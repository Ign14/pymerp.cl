const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HowItWorks-imsl8N6F.js","assets/mockData-CNyaZF9j.js","assets/Features-Bn4DET5E.js","assets/Segmentation-BmoDjmrL.js"])))=>i.map(i=>d[i]);
function I8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Ome=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $b={exports:{}},sf={};var $j;function V8(){if($j)return sf;$j=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return sf.Fragment=e,sf.jsx=n,sf.jsxs=n,sf}var qj;function U8(){return qj||(qj=1,$b.exports=V8()),$b.exports}var i=U8(),qb={exports:{}},nt={};var Yj;function F8(){if(Yj)return nt;Yj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function w(H){return H===null||typeof H!="object"?null:(H=y&&H[y]||H["@@iterator"],typeof H=="function"?H:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,S={};function N(H,Z,te){this.props=H,this.context=Z,this.refs=S,this.updater=te||_}N.prototype.isReactComponent={},N.prototype.setState=function(H,Z){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Z,"setState")},N.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function k(){}k.prototype=N.prototype;function R(H,Z,te){this.props=H,this.context=Z,this.refs=S,this.updater=te||_}var A=R.prototype=new k;A.constructor=R,C(A,N.prototype),A.isPureReactComponent=!0;var L=Array.isArray;function F(){}var P={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function T(H,Z,te){var J=te.ref;return{$$typeof:t,type:H,key:Z,ref:J!==void 0?J:null,props:te}}function I(H,Z){return T(H.type,Z,H.props)}function V(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function $(H){var Z={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(te){return Z[te]})}var U=/\/+/g;function G(H,Z){return typeof H=="object"&&H!==null&&H.key!=null?$(""+H.key):Z.toString(36)}function W(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(F,F):(H.status="pending",H.then(function(Z){H.status==="pending"&&(H.status="fulfilled",H.value=Z)},function(Z){H.status==="pending"&&(H.status="rejected",H.reason=Z)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function z(H,Z,te,J,ne){var ae=typeof H;(ae==="undefined"||ae==="boolean")&&(H=null);var me=!1;if(H===null)me=!0;else switch(ae){case"bigint":case"string":case"number":me=!0;break;case"object":switch(H.$$typeof){case t:case e:me=!0;break;case m:return me=H._init,z(me(H._payload),Z,te,J,ne)}}if(me)return ne=ne(H),me=J===""?"."+G(H,0):J,L(ne)?(te="",me!=null&&(te=me.replace(U,"$&/")+"/"),z(ne,Z,te,"",function(Se){return Se})):ne!=null&&(V(ne)&&(ne=I(ne,te+(ne.key==null||H&&H.key===ne.key?"":(""+ne.key).replace(U,"$&/")+"/")+me)),Z.push(ne)),1;me=0;var we=J===""?".":J+":";if(L(H))for(var Ne=0;Ne<H.length;Ne++)J=H[Ne],ae=we+G(J,Ne),me+=z(J,Z,te,ae,ne);else if(Ne=w(H),typeof Ne=="function")for(H=Ne.call(H),Ne=0;!(J=H.next()).done;)J=J.value,ae=we+G(J,Ne++),me+=z(J,Z,te,ae,ne);else if(ae==="object"){if(typeof H.then=="function")return z(W(H),Z,te,J,ne);throw Z=String(H),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return me}function q(H,Z,te){if(H==null)return H;var J=[],ne=0;return z(H,J,"","",function(ae){return Z.call(te,ae,ne++)}),J}function K(H){if(H._status===-1){var Z=H._result;Z=Z(),Z.then(function(te){(H._status===0||H._status===-1)&&(H._status=1,H._result=te)},function(te){(H._status===0||H._status===-1)&&(H._status=2,H._result=te)}),H._status===-1&&(H._status=0,H._result=Z)}if(H._status===1)return H._result.default;throw H._result}var X=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},se={map:q,forEach:function(H,Z,te){q(H,function(){Z.apply(this,arguments)},te)},count:function(H){var Z=0;return q(H,function(){Z++}),Z},toArray:function(H){return q(H,function(Z){return Z})||[]},only:function(H){if(!V(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return nt.Activity=g,nt.Children=se,nt.Component=N,nt.Fragment=n,nt.Profiler=s,nt.PureComponent=R,nt.StrictMode=r,nt.Suspense=d,nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,nt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return P.H.useMemoCache(H)}},nt.cache=function(H){return function(){return H.apply(null,arguments)}},nt.cacheSignal=function(){return null},nt.cloneElement=function(H,Z,te){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var J=C({},H.props),ne=H.key;if(Z!=null)for(ae in Z.key!==void 0&&(ne=""+Z.key),Z)!O.call(Z,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&Z.ref===void 0||(J[ae]=Z[ae]);var ae=arguments.length-2;if(ae===1)J.children=te;else if(1<ae){for(var me=Array(ae),we=0;we<ae;we++)me[we]=arguments[we+2];J.children=me}return T(H.type,ne,J)},nt.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},nt.createElement=function(H,Z,te){var J,ne={},ae=null;if(Z!=null)for(J in Z.key!==void 0&&(ae=""+Z.key),Z)O.call(Z,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ne[J]=Z[J]);var me=arguments.length-2;if(me===1)ne.children=te;else if(1<me){for(var we=Array(me),Ne=0;Ne<me;Ne++)we[Ne]=arguments[Ne+2];ne.children=we}if(H&&H.defaultProps)for(J in me=H.defaultProps,me)ne[J]===void 0&&(ne[J]=me[J]);return T(H,ae,ne)},nt.createRef=function(){return{current:null}},nt.forwardRef=function(H){return{$$typeof:u,render:H}},nt.isValidElement=V,nt.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:K}},nt.memo=function(H,Z){return{$$typeof:f,type:H,compare:Z===void 0?null:Z}},nt.startTransition=function(H){var Z=P.T,te={};P.T=te;try{var J=H(),ne=P.S;ne!==null&&ne(te,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(F,X)}catch(ae){X(ae)}finally{Z!==null&&te.types!==null&&(Z.types=te.types),P.T=Z}},nt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},nt.use=function(H){return P.H.use(H)},nt.useActionState=function(H,Z,te){return P.H.useActionState(H,Z,te)},nt.useCallback=function(H,Z){return P.H.useCallback(H,Z)},nt.useContext=function(H){return P.H.useContext(H)},nt.useDebugValue=function(){},nt.useDeferredValue=function(H,Z){return P.H.useDeferredValue(H,Z)},nt.useEffect=function(H,Z){return P.H.useEffect(H,Z)},nt.useEffectEvent=function(H){return P.H.useEffectEvent(H)},nt.useId=function(){return P.H.useId()},nt.useImperativeHandle=function(H,Z,te){return P.H.useImperativeHandle(H,Z,te)},nt.useInsertionEffect=function(H,Z){return P.H.useInsertionEffect(H,Z)},nt.useLayoutEffect=function(H,Z){return P.H.useLayoutEffect(H,Z)},nt.useMemo=function(H,Z){return P.H.useMemo(H,Z)},nt.useOptimistic=function(H,Z){return P.H.useOptimistic(H,Z)},nt.useReducer=function(H,Z,te){return P.H.useReducer(H,Z,te)},nt.useRef=function(H){return P.H.useRef(H)},nt.useState=function(H){return P.H.useState(H)},nt.useSyncExternalStore=function(H,Z,te){return P.H.useSyncExternalStore(H,Z,te)},nt.useTransition=function(){return P.H.useTransition()},nt.version="19.2.3",nt}var Wj;function z0(){return Wj||(Wj=1,qb.exports=F8()),qb.exports}var x=z0();const fe=Yc(x),q_=I8({__proto__:null,default:fe},[x]);var Yb={exports:{}},af={},Wb={exports:{}},Gb={};var Gj;function B8(){return Gj||(Gj=1,(function(t){function e(z,q){var K=z.length;z.push(q);e:for(;0<K;){var X=K-1>>>1,se=z[X];if(0<s(se,q))z[X]=q,z[K]=se,K=X;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],K=z.pop();if(K!==q){z[0]=K;e:for(var X=0,se=z.length,H=se>>>1;X<H;){var Z=2*(X+1)-1,te=z[Z],J=Z+1,ne=z[J];if(0>s(te,K))J<se&&0>s(ne,te)?(z[X]=ne,z[J]=K,X=J):(z[X]=te,z[Z]=K,X=Z);else if(J<se&&0>s(ne,K))z[X]=ne,z[J]=K,X=J;else break e}}return q}function s(z,q){var K=z.sortIndex-q.sortIndex;return K!==0?K:z.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,g=null,y=3,w=!1,_=!1,C=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function A(z){for(var q=n(f);q!==null;){if(q.callback===null)r(f);else if(q.startTime<=z)r(f),q.sortIndex=q.expirationTime,e(d,q);else break;q=n(f)}}function L(z){if(C=!1,A(z),!_)if(n(d)!==null)_=!0,F||(F=!0,$());else{var q=n(f);q!==null&&W(L,q.startTime-z)}}var F=!1,P=-1,O=5,T=-1;function I(){return S?!0:!(t.unstable_now()-T<O)}function V(){if(S=!1,F){var z=t.unstable_now();T=z;var q=!0;try{e:{_=!1,C&&(C=!1,k(P),P=-1),w=!0;var K=y;try{t:{for(A(z),g=n(d);g!==null&&!(g.expirationTime>z&&I());){var X=g.callback;if(typeof X=="function"){g.callback=null,y=g.priorityLevel;var se=X(g.expirationTime<=z);if(z=t.unstable_now(),typeof se=="function"){g.callback=se,A(z),q=!0;break t}g===n(d)&&r(d),A(z)}else r(d);g=n(d)}if(g!==null)q=!0;else{var H=n(f);H!==null&&W(L,H.startTime-z),q=!1}}break e}finally{g=null,y=K,w=!1}q=void 0}}finally{q?$():F=!1}}}var $;if(typeof R=="function")$=function(){R(V)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,G=U.port2;U.port1.onmessage=V,$=function(){G.postMessage(null)}}else $=function(){N(V,0)};function W(z,q){P=N(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(z){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var K=y;y=q;try{return z()}finally{y=K}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=y;y=z;try{return q()}finally{y=K}},t.unstable_scheduleCallback=function(z,q,K){var X=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,z){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=K+se,z={id:m++,callback:q,priorityLevel:z,startTime:K,expirationTime:se,sortIndex:-1},K>X?(z.sortIndex=K,e(f,z),n(d)===null&&z===n(f)&&(C?(k(P),P=-1):C=!0,W(L,K-X))):(z.sortIndex=se,e(d,z),_||w||(_=!0,F||(F=!0,$()))),z},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(z){var q=y;return function(){var K=y;y=q;try{return z.apply(this,arguments)}finally{y=K}}}})(Gb)),Gb}var Kj;function z8(){return Kj||(Kj=1,Wb.exports=B8()),Wb.exports}var Kb={exports:{}},Rr={};var Qj;function H8(){if(Qj)return Rr;Qj=1;var t=z0();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:d,containerInfo:f,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Rr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Rr.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},Rr.flushSync=function(d){var f=l.T,m=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=f,r.p=m,r.d.f()}},Rr.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},Rr.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Rr.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,g=u(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:w}):m==="script"&&r.d.X(d,{crossOrigin:g,integrity:y,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Rr.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},Rr.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=u(m,f.crossOrigin);r.d.L(d,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Rr.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},Rr.requestFormReset=function(d){r.d.r(d)},Rr.unstable_batchedUpdates=function(d,f){return d(f)},Rr.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},Rr.useFormStatus=function(){return l.H.useHostTransitionStatus()},Rr.version="19.2.3",Rr}var Xj;function qP(){if(Xj)return Kb.exports;Xj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kb.exports=H8(),Kb.exports}var Zj;function $8(){if(Zj)return af;Zj=1;var t=z8(),e=z0(),n=qP();function r(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(r(188))}function f(o){var c=o.alternate;if(!c){if(c=a(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,p=c;;){var b=h.return;if(b===null)break;var E=b.alternate;if(E===null){if(p=b.return,p!==null){h=p;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===h)return d(b),o;if(E===p)return d(b),c;E=E.sibling}throw Error(r(188))}if(h.return!==p.return)h=b,p=E;else{for(var D=!1,B=b.child;B;){if(B===h){D=!0,h=b,p=E;break}if(B===p){D=!0,p=b,h=E;break}B=B.sibling}if(!D){for(B=E.child;B;){if(B===h){D=!0,h=E,p=b;break}if(B===p){D=!0,p=E,h=b;break}B=B.sibling}if(!D)throw Error(r(189))}}if(h.alternate!==p)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function m(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=m(o),c!==null)return c;o=o.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var U=Symbol.for("react.client.reference");function G(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===U?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case C:return"Fragment";case N:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case F:return"SuspenseList";case T:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case R:return o.displayName||"Context";case k:return(o._context.displayName||"Context")+".Consumer";case A:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case P:return c=o.displayName||null,c!==null?c:G(o.type)||"Memo";case O:c=o._payload,o=o._init;try{return G(o(c))}catch{}}return null}var W=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},X=[],se=-1;function H(o){return{current:o}}function Z(o){0>se||(o.current=X[se],X[se]=null,se--)}function te(o,c){se++,X[se]=o.current,o.current=c}var J=H(null),ne=H(null),ae=H(null),me=H(null);function we(o,c){switch(te(ae,c),te(ne,o),te(J,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?fj(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=fj(c),o=mj(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Z(J),te(J,o)}function Ne(){Z(J),Z(ne),Z(ae)}function Se(o){o.memoizedState!==null&&te(me,o);var c=J.current,h=mj(c,o.type);c!==h&&(te(ne,o),te(J,h))}function Ue(o){ne.current===o&&(Z(J),Z(ne)),me.current===o&&(Z(me),ef._currentValue=K)}var jt,Qe;function on(o){if(jt===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);jt=c&&c[1]||"",Qe=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jt+o+Qe}var Ee=!1;function ut(o,c){if(!o||Ee)return"";Ee=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(he){var ce=he}Reflect.construct(o,[],ve)}else{try{ve.call()}catch(he){ce=he}o.call(ve.prototype)}}else{try{throw Error()}catch(he){ce=he}(ve=o())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),D=E[0],B=E[1];if(D&&B){var Q=D.split(`
`),le=B.split(`
`);for(b=p=0;p<Q.length&&!Q[p].includes("DetermineComponentFrameRoot");)p++;for(;b<le.length&&!le[b].includes("DetermineComponentFrameRoot");)b++;if(p===Q.length||b===le.length)for(p=Q.length-1,b=le.length-1;1<=p&&0<=b&&Q[p]!==le[b];)b--;for(;1<=p&&0<=b;p--,b--)if(Q[p]!==le[b]){if(p!==1||b!==1)do if(p--,b--,0>b||Q[p]!==le[b]){var ge=`
`+Q[p].replace(" at new "," at ");return o.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",o.displayName)),ge}while(1<=p&&0<=b);break}}}finally{Ee=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?on(h):""}function Rt(o,c){switch(o.tag){case 26:case 27:case 5:return on(o.type);case 16:return on("Lazy");case 13:return o.child!==c&&c!==null?on("Suspense Fallback"):on("Suspense");case 19:return on("SuspenseList");case 0:case 15:return ut(o.type,!1);case 11:return ut(o.type.render,!1);case 1:return ut(o.type,!0);case 31:return on("Activity");default:return""}}function cr(o){try{var c="",h=null;do c+=Rt(o,h),h=o,o=o.return;while(o);return c}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var _t=Object.prototype.hasOwnProperty,en=t.unstable_scheduleCallback,nr=t.unstable_cancelCallback,us=t.unstable_shouldYield,Wr=t.unstable_requestPaint,_n=t.unstable_now,ur=t.unstable_getCurrentPriorityLevel,ds=t.unstable_ImmediatePriority,Rs=t.unstable_UserBlockingPriority,Gr=t.unstable_NormalPriority,la=t.unstable_LowPriority,Ni=t.unstable_IdlePriority,ca=t.log,Ra=t.unstable_setDisableYieldValue,Hn=null,En=null;function Rn(o){if(typeof ca=="function"&&Ra(o),En&&typeof En.setStrictMode=="function")try{En.setStrictMode(Hn,o)}catch{}}var tn=Math.clz32?Math.clz32:$e,Te=Math.log,Re=Math.LN2;function $e(o){return o>>>=0,o===0?32:31-(Te(o)/Re|0)|0}var st=256,Xt=262144,tt=4194304;function Zt(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Pn(o,c,h){var p=o.pendingLanes;if(p===0)return 0;var b=0,E=o.suspendedLanes,D=o.pingedLanes;o=o.warmLanes;var B=p&134217727;return B!==0?(p=B&~E,p!==0?b=Zt(p):(D&=B,D!==0?b=Zt(D):h||(h=B&~o,h!==0&&(b=Zt(h))))):(B=p&~E,B!==0?b=Zt(B):D!==0?b=Zt(D):h||(h=p&~o,h!==0&&(b=Zt(h)))),b===0?0:c!==0&&c!==b&&(c&E)===0&&(E=b&-b,h=c&-c,E>=h||E===32&&(h&4194048)!==0)?c:b}function $n(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function xr(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hs(){var o=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),o}function Tt(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Ar(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function ji(o,c,h,p,b,E){var D=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var B=o.entanglements,Q=o.expirationTimes,le=o.hiddenUpdates;for(h=D&~h;0<h;){var ge=31-tn(h),ve=1<<ge;B[ge]=0,Q[ge]=-1;var ce=le[ge];if(ce!==null)for(le[ge]=null,ge=0;ge<ce.length;ge++){var he=ce[ge];he!==null&&(he.lane&=-536870913)}h&=~ve}p!==0&&Ye(o,p,0),E!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=E&~(D&~c))}function Ye(o,c,h){o.pendingLanes|=c,o.suspendedLanes&=~c;var p=31-tn(c);o.entangledLanes|=c,o.entanglements[p]=o.entanglements[p]|1073741824|h&261930}function ah(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var p=31-tn(h),b=1<<p;b&c|o[p]&c&&(o[p]|=c),h&=~b}}function ih(o,c){var h=c&-c;return h=(h&42)!==0?1:Bl(h),(h&(o.suspendedLanes|c))!==0?0:h}function Bl(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ti(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function np(){var o=q.p;return o!==0?o:(o=window.event,o===void 0?32:Ij(o.type))}function ua(o,c){var h=q.p;try{return q.p=o,c()}finally{q.p=h}}var da=Math.random().toString(36).slice(2),qn="__reactFiber$"+da,dr="__reactProps$"+da,Pa="__reactContainer$"+da,ru="__reactEvents$"+da,Qx="__reactListeners$"+da,rp="__reactHandles$"+da,sp="__reactResources$"+da,Ma="__reactMarker$"+da;function su(o){delete o[qn],delete o[dr],delete o[ru],delete o[Qx],delete o[rp]}function La(o){var c=o[qn];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Pa]||h[qn]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=wj(o);o!==null;){if(h=o[qn])return h;o=wj(o)}return c}o=h,h=o.parentNode}return null}function Ps(o){if(o=o[qn]||o[Pa]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function fs(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(r(33))}function Oa(o){var c=o[sp];return c||(c=o[sp]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Yn(o){o[Ma]=!0}var oh=new Set,lh={};function Ia(o,c){Va(o,c),Va(o+"Capture",c)}function Va(o,c){for(lh[o]=c,o=0;o<c.length;o++)oh.add(c[o])}var ch=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uh={},dh={};function ap(o){return _t.call(dh,o)?!0:_t.call(uh,o)?!1:ch.test(o)?dh[o]=!0:(uh[o]=!0,!1)}function au(o,c,h){if(ap(c))if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+h)}}function ms(o,c,h){if(h===null)o.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+h)}}function Wn(o,c,h,p){if(p===null)o.removeAttribute(h);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(c,h,""+p)}}function hr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function wo(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function hh(o,c,h){var p=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,E=p.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return b.call(this)},set:function(D){h=""+D,E.call(this,D)}}),Object.defineProperty(o,c,{enumerable:p.enumerable}),{getValue:function(){return h},setValue:function(D){h=""+D},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ut(o){if(!o._valueTracker){var c=wo(o)?"checked":"value";o._valueTracker=hh(o,c,""+o[c])}}function zl(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),p="";return o&&(p=wo(o)?o.checked?"true":"false":o.value),o=p,o!==h?(c.setValue(o),!0):!1}function Ua(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Hl=/[\n"\\]/g;function Kr(o){return o.replace(Hl,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function iu(o,c,h,p,b,E,D,B){o.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?o.type=D:o.removeAttribute("type"),c!=null?D==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+hr(c)):o.value!==""+hr(c)&&(o.value=""+hr(c)):D!=="submit"&&D!=="reset"||o.removeAttribute("value"),c!=null?fh(o,D,hr(c)):h!=null?fh(o,D,hr(h)):p!=null&&o.removeAttribute("value"),b==null&&E!=null&&(o.defaultChecked=!!E),b!=null&&(o.checked=b&&typeof b!="function"&&typeof b!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?o.name=""+hr(B):o.removeAttribute("name")}function ip(o,c,h,p,b,E,D,B){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(o.type=E),c!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||c!=null)){Ut(o);return}h=h!=null?""+hr(h):"",c=c!=null?""+hr(c):h,B||c===o.value||(o.value=c),o.defaultValue=c}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,o.checked=B?o.checked:!!p,o.defaultChecked=!!p,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(o.name=D),Ut(o)}function fh(o,c,h){c==="number"&&Ua(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function _o(o,c,h,p){if(o=o.options,c){c={};for(var b=0;b<h.length;b++)c["$"+h[b]]=!0;for(h=0;h<o.length;h++)b=c.hasOwnProperty("$"+o[h].value),o[h].selected!==b&&(o[h].selected=b),b&&p&&(o[h].defaultSelected=!0)}else{for(h=""+hr(h),c=null,b=0;b<o.length;b++){if(o[b].value===h){o[b].selected=!0,p&&(o[b].defaultSelected=!0);return}c!==null||o[b].disabled||(c=o[b])}c!==null&&(c.selected=!0)}}function op(o,c,h){if(c!=null&&(c=""+hr(c),c!==o.value&&(o.value=c),h==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=h!=null?""+hr(h):""}function Eo(o,c,h,p){if(c==null){if(p!=null){if(h!=null)throw Error(r(92));if(W(p)){if(1<p.length)throw Error(r(93));p=p[0]}h=p}h==null&&(h=""),c=h}h=hr(c),o.defaultValue=h,p=o.textContent,p===h&&p!==""&&p!==null&&(o.value=p),Ut(o)}function Qr(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var lp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mh(o,c,h){var p=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?p?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":p?o.setProperty(c,h):typeof h!="number"||h===0||lp.has(c)?c==="float"?o.cssFloat=h:o[c]=(""+h).trim():o[c]=h+"px"}function ph(o,c,h){if(c!=null&&typeof c!="object")throw Error(r(62));if(o=o.style,h!=null){for(var p in h)!h.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?o.setProperty(p,""):p==="float"?o.cssFloat="":o[p]="");for(var b in c)p=c[b],c.hasOwnProperty(b)&&h[b]!==p&&mh(o,b,p)}else for(var E in c)c.hasOwnProperty(E)&&mh(o,E,c[E])}function ou(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Co=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lu(o){return Co.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ha(){}var gh=null;function Ms(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var So=null,Fa=null;function $l(o){var c=Ps(o);if(c&&(o=c.stateNode)){var h=o[dr]||null;e:switch(o=c.stateNode,c.type){case"input":if(iu(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Kr(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var p=h[c];if(p!==o&&p.form===o.form){var b=p[dr]||null;if(!b)throw Error(r(90));iu(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<h.length;c++)p=h[c],p.form===o.form&&zl(p)}break e;case"textarea":op(o,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&_o(o,!!h.multiple,c,!1)}}}var cu=!1;function No(o,c,h){if(cu)return o(c,h);cu=!0;try{var p=o(c);return p}finally{if(cu=!1,(So!==null||Fa!==null)&&(ng(),So&&(c=So,o=Fa,Fa=So=null,$l(c),o)))for(c=0;c<o.length;c++)$l(o[c])}}function fa(o,c){var h=o.stateNode;if(h===null)return null;var p=h[dr]||null;if(p===null)return null;h=p[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(o=o.type,p=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!p;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var Ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ql=!1;if(Ls)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){ql=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{ql=!1}var Ba=null,yh=null,Yl=null;function xh(){if(Yl)return Yl;var o,c=yh,h=c.length,p,b="value"in Ba?Ba.value:Ba.textContent,E=b.length;for(o=0;o<h&&c[o]===b[o];o++);var D=h-o;for(p=1;p<=D&&c[h-p]===b[E-p];p++);return Yl=b.slice(o,1<p?1-p:void 0)}function Wl(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function ki(){return!0}function ma(){return!1}function vr(o){function c(h,p,b,E,D){this._reactName=h,this._targetInst=b,this.type=p,this.nativeEvent=E,this.target=D,this.currentTarget=null;for(var B in o)o.hasOwnProperty(B)&&(h=o[B],this[B]=h?h(E):E[B]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ki:ma,this.isPropagationStopped=ma,this}return g(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ki)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ki)},persist:function(){},isPersistent:ki}),c}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=vr(Di),jo=g({},Di,{view:0,detail:0}),vh=vr(jo),To,uu,Ha,du=g({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ko,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ha&&(Ha&&o.type==="mousemove"?(To=o.screenX-Ha.screenX,uu=o.screenY-Ha.screenY):uu=To=0,Ha=o),To)},movementY:function(o){return"movementY"in o?o.movementY:uu}}),bh=vr(du),Gl=g({},du,{dataTransfer:0}),up=vr(Gl),dp=g({},jo,{relatedTarget:0}),Kl=vr(dp),wh=g({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),hp=vr(wh),hu=g({},Di,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),fp=vr(hu),mp=g({},Di,{data:0}),$a=vr(mp),pp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xp(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=yp[o])?!!c[o]:!1}function ko(){return xp}var Ur=g({},jo,{key:function(o){if(o.key){var c=pp[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Wl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?gp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ko,charCode:function(o){return o.type==="keypress"?Wl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Wl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),vp=vr(Ur),bp=g({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ai=vr(bp),v=g({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ko}),j=vr(v),M=g({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y=vr(M),ie=g({},du,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),de=vr(ie),Ce=g({},Di,{newState:0,oldState:0}),at=vr(Ce),Mn=[9,13,27,32],Pt=Ls&&"CompositionEvent"in window,pn=null;Ls&&"documentMode"in document&&(pn=document.documentMode);var Os=Ls&&"TextEvent"in window&&!pn,qa=Ls&&(!Pt||pn&&8<pn&&11>=pn),pa=" ",ga=!1;function Ql(o,c){switch(o){case"keyup":return Mn.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fu(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var mu=!1;function o9(o,c){switch(o){case"compositionend":return fu(c);case"keypress":return c.which!==32?null:(ga=!0,pa);case"textInput":return o=c.data,o===pa&&ga?null:o;default:return null}}function l9(o,c){if(mu)return o==="compositionend"||!Pt&&Ql(o,c)?(o=xh(),Yl=yh=Ba=null,mu=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return qa&&c.locale!=="ko"?null:c.data;default:return null}}var c9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CS(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!c9[o.type]:c==="textarea"}function SS(o,c,h,p){So?Fa?Fa.push(p):Fa=[p]:So=p,c=cg(c,"onChange"),0<c.length&&(h=new za("onChange","change",null,h,p),o.push({event:h,listeners:c}))}var _h=null,Eh=null;function u9(o){oj(o,0)}function wp(o){var c=fs(o);if(zl(c))return o}function NS(o,c){if(o==="change")return c}var jS=!1;if(Ls){var Xx;if(Ls){var Zx="oninput"in document;if(!Zx){var TS=document.createElement("div");TS.setAttribute("oninput","return;"),Zx=typeof TS.oninput=="function"}Xx=Zx}else Xx=!1;jS=Xx&&(!document.documentMode||9<document.documentMode)}function kS(){_h&&(_h.detachEvent("onpropertychange",DS),Eh=_h=null)}function DS(o){if(o.propertyName==="value"&&wp(Eh)){var c=[];SS(c,Eh,o,Ms(o)),No(u9,c)}}function d9(o,c,h){o==="focusin"?(kS(),_h=c,Eh=h,_h.attachEvent("onpropertychange",DS)):o==="focusout"&&kS()}function h9(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return wp(Eh)}function f9(o,c){if(o==="click")return wp(c)}function m9(o,c){if(o==="input"||o==="change")return wp(c)}function p9(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ps=typeof Object.is=="function"?Object.is:p9;function Ch(o,c){if(ps(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),p=Object.keys(c);if(h.length!==p.length)return!1;for(p=0;p<h.length;p++){var b=h[p];if(!_t.call(c,b)||!ps(o[b],c[b]))return!1}return!0}function AS(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function RS(o,c){var h=AS(o);o=0;for(var p;h;){if(h.nodeType===3){if(p=o+h.textContent.length,o<=c&&p>=c)return{node:h,offset:c-o};o=p}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=AS(h)}}function PS(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?PS(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function MS(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Ua(o.document);c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Ua(o.document)}return c}function Jx(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var g9=Ls&&"documentMode"in document&&11>=document.documentMode,pu=null,ev=null,Sh=null,tv=!1;function LS(o,c,h){var p=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;tv||pu==null||pu!==Ua(p)||(p=pu,"selectionStart"in p&&Jx(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Sh&&Ch(Sh,p)||(Sh=p,p=cg(ev,"onSelect"),0<p.length&&(c=new za("onSelect","select",null,c,h),o.push({event:c,listeners:p}),c.target=pu)))}function Xl(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var gu={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionrun:Xl("Transition","TransitionRun"),transitionstart:Xl("Transition","TransitionStart"),transitioncancel:Xl("Transition","TransitionCancel"),transitionend:Xl("Transition","TransitionEnd")},nv={},OS={};Ls&&(OS=document.createElement("div").style,"AnimationEvent"in window||(delete gu.animationend.animation,delete gu.animationiteration.animation,delete gu.animationstart.animation),"TransitionEvent"in window||delete gu.transitionend.transition);function Zl(o){if(nv[o])return nv[o];if(!gu[o])return o;var c=gu[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in OS)return nv[o]=c[h];return o}var IS=Zl("animationend"),VS=Zl("animationiteration"),US=Zl("animationstart"),y9=Zl("transitionrun"),x9=Zl("transitionstart"),v9=Zl("transitioncancel"),FS=Zl("transitionend"),BS=new Map,rv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rv.push("scrollEnd");function ya(o,c){BS.set(o,c),Ia(c,[o])}var _p=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Is=[],yu=0,sv=0;function Ep(){for(var o=yu,c=sv=yu=0;c<o;){var h=Is[c];Is[c++]=null;var p=Is[c];Is[c++]=null;var b=Is[c];Is[c++]=null;var E=Is[c];if(Is[c++]=null,p!==null&&b!==null){var D=p.pending;D===null?b.next=b:(b.next=D.next,D.next=b),p.pending=b}E!==0&&zS(h,b,E)}}function Cp(o,c,h,p){Is[yu++]=o,Is[yu++]=c,Is[yu++]=h,Is[yu++]=p,sv|=p,o.lanes|=p,o=o.alternate,o!==null&&(o.lanes|=p)}function av(o,c,h,p){return Cp(o,c,h,p),Sp(o)}function Jl(o,c){return Cp(o,null,null,c),Sp(o)}function zS(o,c,h){o.lanes|=h;var p=o.alternate;p!==null&&(p.lanes|=h);for(var b=!1,E=o.return;E!==null;)E.childLanes|=h,p=E.alternate,p!==null&&(p.childLanes|=h),E.tag===22&&(o=E.stateNode,o===null||o._visibility&1||(b=!0)),o=E,E=E.return;return o.tag===3?(E=o.stateNode,b&&c!==null&&(b=31-tn(h),o=E.hiddenUpdates,p=o[b],p===null?o[b]=[c]:p.push(c),c.lane=h|536870912),E):null}function Sp(o){if(50<Wh)throw Wh=0,mb=null,Error(r(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var xu={};function b9(o,c,h,p){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(o,c,h,p){return new b9(o,c,h,p)}function iv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ri(o,c){var h=o.alternate;return h===null?(h=gs(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function HS(o,c){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,c=h.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Np(o,c,h,p,b,E){var D=0;if(p=o,typeof o=="function")iv(o)&&(D=1);else if(typeof o=="string")D=S8(o,h,J.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case T:return o=gs(31,h,c,b),o.elementType=T,o.lanes=E,o;case C:return ec(h.children,b,E,c);case S:D=8,b|=24;break;case N:return o=gs(12,h,c,b|2),o.elementType=N,o.lanes=E,o;case L:return o=gs(13,h,c,b),o.elementType=L,o.lanes=E,o;case F:return o=gs(19,h,c,b),o.elementType=F,o.lanes=E,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case R:D=10;break e;case k:D=9;break e;case A:D=11;break e;case P:D=14;break e;case O:D=16,p=null;break e}D=29,h=Error(r(130,o===null?"null":typeof o,"")),p=null}return c=gs(D,h,c,b),c.elementType=o,c.type=p,c.lanes=E,c}function ec(o,c,h,p){return o=gs(7,o,p,c),o.lanes=h,o}function ov(o,c,h){return o=gs(6,o,null,c),o.lanes=h,o}function $S(o){var c=gs(18,null,null,0);return c.stateNode=o,c}function lv(o,c,h){return c=gs(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var qS=new WeakMap;function Vs(o,c){if(typeof o=="object"&&o!==null){var h=qS.get(o);return h!==void 0?h:(c={value:o,source:c,stack:cr(c)},qS.set(o,c),c)}return{value:o,source:c,stack:cr(c)}}var vu=[],bu=0,jp=null,Nh=0,Us=[],Fs=0,Do=null,Ya=1,Wa="";function Pi(o,c){vu[bu++]=Nh,vu[bu++]=jp,jp=o,Nh=c}function YS(o,c,h){Us[Fs++]=Ya,Us[Fs++]=Wa,Us[Fs++]=Do,Do=o;var p=Ya;o=Wa;var b=32-tn(p)-1;p&=~(1<<b),h+=1;var E=32-tn(c)+b;if(30<E){var D=b-b%5;E=(p&(1<<D)-1).toString(32),p>>=D,b-=D,Ya=1<<32-tn(c)+b|h<<b|p,Wa=E+o}else Ya=1<<E|h<<b|p,Wa=o}function cv(o){o.return!==null&&(Pi(o,1),YS(o,1,0))}function uv(o){for(;o===jp;)jp=vu[--bu],vu[bu]=null,Nh=vu[--bu],vu[bu]=null;for(;o===Do;)Do=Us[--Fs],Us[Fs]=null,Wa=Us[--Fs],Us[Fs]=null,Ya=Us[--Fs],Us[Fs]=null}function WS(o,c){Us[Fs++]=Ya,Us[Fs++]=Wa,Us[Fs++]=Do,Ya=c.id,Wa=c.overflow,Do=o}var br=null,ln=null,wt=!1,Ao=null,Bs=!1,dv=Error(r(519));function Ro(o){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jh(Vs(c,o)),dv}function GS(o){var c=o.stateNode,h=o.type,p=o.memoizedProps;switch(c[qn]=o,c[dr]=p,h){case"dialog":mt("cancel",c),mt("close",c);break;case"iframe":case"object":case"embed":mt("load",c);break;case"video":case"audio":for(h=0;h<Kh.length;h++)mt(Kh[h],c);break;case"source":mt("error",c);break;case"img":case"image":case"link":mt("error",c),mt("load",c);break;case"details":mt("toggle",c);break;case"input":mt("invalid",c),ip(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":mt("invalid",c);break;case"textarea":mt("invalid",c),Eo(c,p.value,p.defaultValue,p.children)}h=p.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||p.suppressHydrationWarning===!0||dj(c.textContent,h)?(p.popover!=null&&(mt("beforetoggle",c),mt("toggle",c)),p.onScroll!=null&&mt("scroll",c),p.onScrollEnd!=null&&mt("scrollend",c),p.onClick!=null&&(c.onclick=ha),c=!0):c=!1,c||Ro(o,!0)}function KS(o){for(br=o.return;br;)switch(br.tag){case 5:case 31:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:br=br.return}}function wu(o){if(o!==br)return!1;if(!wt)return KS(o),wt=!0,!1;var c=o.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||kb(o.type,o.memoizedProps)),h=!h),h&&ln&&Ro(o),KS(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));ln=bj(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));ln=bj(o)}else c===27?(c=ln,Yo(o.type)?(o=Mb,Mb=null,ln=o):ln=c):ln=br?Hs(o.stateNode.nextSibling):null;return!0}function tc(){ln=br=null,wt=!1}function hv(){var o=Ao;return o!==null&&(es===null?es=o:es.push.apply(es,o),Ao=null),o}function jh(o){Ao===null?Ao=[o]:Ao.push(o)}var fv=H(null),nc=null,Mi=null;function Po(o,c,h){te(fv,c._currentValue),c._currentValue=h}function Li(o){o._currentValue=fv.current,Z(fv)}function mv(o,c,h){for(;o!==null;){var p=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),o===h)break;o=o.return}}function pv(o,c,h,p){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var E=b.dependencies;if(E!==null){var D=b.child;E=E.firstContext;e:for(;E!==null;){var B=E;E=b;for(var Q=0;Q<c.length;Q++)if(B.context===c[Q]){E.lanes|=h,B=E.alternate,B!==null&&(B.lanes|=h),mv(E.return,h,o),p||(D=null);break e}E=B.next}}else if(b.tag===18){if(D=b.return,D===null)throw Error(r(341));D.lanes|=h,E=D.alternate,E!==null&&(E.lanes|=h),mv(D,h,o),D=null}else D=b.child;if(D!==null)D.return=b;else for(D=b;D!==null;){if(D===o){D=null;break}if(b=D.sibling,b!==null){b.return=D.return,D=b;break}D=D.return}b=D}}function _u(o,c,h,p){o=null;for(var b=c,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var D=b.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var B=b.type;ps(b.pendingProps.value,D.value)||(o!==null?o.push(B):o=[B])}}else if(b===me.current){if(D=b.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push(ef):o=[ef])}b=b.return}o!==null&&pv(c,o,h,p),c.flags|=262144}function Tp(o){for(o=o.firstContext;o!==null;){if(!ps(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function rc(o){nc=o,Mi=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function wr(o){return QS(nc,o)}function kp(o,c){return nc===null&&rc(o),QS(o,c)}function QS(o,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},Mi===null){if(o===null)throw Error(r(308));Mi=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Mi=Mi.next=c;return h}var w9=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(h,p){o.push(p)}};this.abort=function(){c.aborted=!0,o.forEach(function(h){return h()})}},_9=t.unstable_scheduleCallback,E9=t.unstable_NormalPriority,Gn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gv(){return{controller:new w9,data:new Map,refCount:0}}function Th(o){o.refCount--,o.refCount===0&&_9(E9,function(){o.controller.abort()})}var kh=null,yv=0,Eu=0,Cu=null;function C9(o,c){if(kh===null){var h=kh=[];yv=0,Eu=bb(),Cu={status:"pending",value:void 0,then:function(p){h.push(p)}}}return yv++,c.then(XS,XS),c}function XS(){if(--yv===0&&kh!==null){Cu!==null&&(Cu.status="fulfilled");var o=kh;kh=null,Eu=0,Cu=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function S9(o,c){var h=[],p={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return o.then(function(){p.status="fulfilled",p.value=c;for(var b=0;b<h.length;b++)(0,h[b])(c)},function(b){for(p.status="rejected",p.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),p}var ZS=z.S;z.S=function(o,c){LN=_n(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&C9(o,c),ZS!==null&&ZS(o,c)};var sc=H(null);function xv(){var o=sc.current;return o!==null?o:Jt.pooledCache}function Dp(o,c){c===null?te(sc,sc.current):te(sc,c.pool)}function JS(){var o=xv();return o===null?null:{parent:Gn._currentValue,pool:o}}var Su=Error(r(460)),vv=Error(r(474)),Ap=Error(r(542)),Rp={then:function(){}};function e2(o){return o=o.status,o==="fulfilled"||o==="rejected"}function t2(o,c,h){switch(h=o[h],h===void 0?o.push(c):h!==c&&(c.then(ha,ha),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,r2(o),o;default:if(typeof c.status=="string")c.then(ha,ha);else{if(o=Jt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=c,o.status="pending",o.then(function(p){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=p}},function(p){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,r2(o),o}throw ic=c,Su}}function ac(o){try{var c=o._init;return c(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(ic=h,Su):h}}var ic=null;function n2(){if(ic===null)throw Error(r(459));var o=ic;return ic=null,o}function r2(o){if(o===Su||o===Ap)throw Error(r(483))}var Nu=null,Dh=0;function Pp(o){var c=Dh;return Dh+=1,Nu===null&&(Nu=[]),t2(Nu,o,c)}function Ah(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Mp(o,c){throw c.$$typeof===y?Error(r(525)):(o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function s2(o){function c(re,ee){if(o){var oe=re.deletions;oe===null?(re.deletions=[ee],re.flags|=16):oe.push(ee)}}function h(re,ee){if(!o)return null;for(;ee!==null;)c(re,ee),ee=ee.sibling;return null}function p(re){for(var ee=new Map;re!==null;)re.key!==null?ee.set(re.key,re):ee.set(re.index,re),re=re.sibling;return ee}function b(re,ee){return re=Ri(re,ee),re.index=0,re.sibling=null,re}function E(re,ee,oe){return re.index=oe,o?(oe=re.alternate,oe!==null?(oe=oe.index,oe<ee?(re.flags|=67108866,ee):oe):(re.flags|=67108866,ee)):(re.flags|=1048576,ee)}function D(re){return o&&re.alternate===null&&(re.flags|=67108866),re}function B(re,ee,oe,ye){return ee===null||ee.tag!==6?(ee=ov(oe,re.mode,ye),ee.return=re,ee):(ee=b(ee,oe),ee.return=re,ee)}function Q(re,ee,oe,ye){var Be=oe.type;return Be===C?ge(re,ee,oe.props.children,ye,oe.key):ee!==null&&(ee.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===O&&ac(Be)===ee.type)?(ee=b(ee,oe.props),Ah(ee,oe),ee.return=re,ee):(ee=Np(oe.type,oe.key,oe.props,null,re.mode,ye),Ah(ee,oe),ee.return=re,ee)}function le(re,ee,oe,ye){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==oe.containerInfo||ee.stateNode.implementation!==oe.implementation?(ee=lv(oe,re.mode,ye),ee.return=re,ee):(ee=b(ee,oe.children||[]),ee.return=re,ee)}function ge(re,ee,oe,ye,Be){return ee===null||ee.tag!==7?(ee=ec(oe,re.mode,ye,Be),ee.return=re,ee):(ee=b(ee,oe),ee.return=re,ee)}function ve(re,ee,oe){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=ov(""+ee,re.mode,oe),ee.return=re,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return oe=Np(ee.type,ee.key,ee.props,null,re.mode,oe),Ah(oe,ee),oe.return=re,oe;case _:return ee=lv(ee,re.mode,oe),ee.return=re,ee;case O:return ee=ac(ee),ve(re,ee,oe)}if(W(ee)||$(ee))return ee=ec(ee,re.mode,oe,null),ee.return=re,ee;if(typeof ee.then=="function")return ve(re,Pp(ee),oe);if(ee.$$typeof===R)return ve(re,kp(re,ee),oe);Mp(re,ee)}return null}function ce(re,ee,oe,ye){var Be=ee!==null?ee.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Be!==null?null:B(re,ee,""+oe,ye);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:return oe.key===Be?Q(re,ee,oe,ye):null;case _:return oe.key===Be?le(re,ee,oe,ye):null;case O:return oe=ac(oe),ce(re,ee,oe,ye)}if(W(oe)||$(oe))return Be!==null?null:ge(re,ee,oe,ye,null);if(typeof oe.then=="function")return ce(re,ee,Pp(oe),ye);if(oe.$$typeof===R)return ce(re,ee,kp(re,oe),ye);Mp(re,oe)}return null}function he(re,ee,oe,ye,Be){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return re=re.get(oe)||null,B(ee,re,""+ye,Be);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case w:return re=re.get(ye.key===null?oe:ye.key)||null,Q(ee,re,ye,Be);case _:return re=re.get(ye.key===null?oe:ye.key)||null,le(ee,re,ye,Be);case O:return ye=ac(ye),he(re,ee,oe,ye,Be)}if(W(ye)||$(ye))return re=re.get(oe)||null,ge(ee,re,ye,Be,null);if(typeof ye.then=="function")return he(re,ee,oe,Pp(ye),Be);if(ye.$$typeof===R)return he(re,ee,oe,kp(ee,ye),Be);Mp(ee,ye)}return null}function Oe(re,ee,oe,ye){for(var Be=null,kt=null,Ve=ee,ot=ee=0,yt=null;Ve!==null&&ot<oe.length;ot++){Ve.index>ot?(yt=Ve,Ve=null):yt=Ve.sibling;var Dt=ce(re,Ve,oe[ot],ye);if(Dt===null){Ve===null&&(Ve=yt);break}o&&Ve&&Dt.alternate===null&&c(re,Ve),ee=E(Dt,ee,ot),kt===null?Be=Dt:kt.sibling=Dt,kt=Dt,Ve=yt}if(ot===oe.length)return h(re,Ve),wt&&Pi(re,ot),Be;if(Ve===null){for(;ot<oe.length;ot++)Ve=ve(re,oe[ot],ye),Ve!==null&&(ee=E(Ve,ee,ot),kt===null?Be=Ve:kt.sibling=Ve,kt=Ve);return wt&&Pi(re,ot),Be}for(Ve=p(Ve);ot<oe.length;ot++)yt=he(Ve,re,ot,oe[ot],ye),yt!==null&&(o&&yt.alternate!==null&&Ve.delete(yt.key===null?ot:yt.key),ee=E(yt,ee,ot),kt===null?Be=yt:kt.sibling=yt,kt=yt);return o&&Ve.forEach(function(Xo){return c(re,Xo)}),wt&&Pi(re,ot),Be}function qe(re,ee,oe,ye){if(oe==null)throw Error(r(151));for(var Be=null,kt=null,Ve=ee,ot=ee=0,yt=null,Dt=oe.next();Ve!==null&&!Dt.done;ot++,Dt=oe.next()){Ve.index>ot?(yt=Ve,Ve=null):yt=Ve.sibling;var Xo=ce(re,Ve,Dt.value,ye);if(Xo===null){Ve===null&&(Ve=yt);break}o&&Ve&&Xo.alternate===null&&c(re,Ve),ee=E(Xo,ee,ot),kt===null?Be=Xo:kt.sibling=Xo,kt=Xo,Ve=yt}if(Dt.done)return h(re,Ve),wt&&Pi(re,ot),Be;if(Ve===null){for(;!Dt.done;ot++,Dt=oe.next())Dt=ve(re,Dt.value,ye),Dt!==null&&(ee=E(Dt,ee,ot),kt===null?Be=Dt:kt.sibling=Dt,kt=Dt);return wt&&Pi(re,ot),Be}for(Ve=p(Ve);!Dt.done;ot++,Dt=oe.next())Dt=he(Ve,re,ot,Dt.value,ye),Dt!==null&&(o&&Dt.alternate!==null&&Ve.delete(Dt.key===null?ot:Dt.key),ee=E(Dt,ee,ot),kt===null?Be=Dt:kt.sibling=Dt,kt=Dt);return o&&Ve.forEach(function(O8){return c(re,O8)}),wt&&Pi(re,ot),Be}function Kt(re,ee,oe,ye){if(typeof oe=="object"&&oe!==null&&oe.type===C&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case w:e:{for(var Be=oe.key;ee!==null;){if(ee.key===Be){if(Be=oe.type,Be===C){if(ee.tag===7){h(re,ee.sibling),ye=b(ee,oe.props.children),ye.return=re,re=ye;break e}}else if(ee.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===O&&ac(Be)===ee.type){h(re,ee.sibling),ye=b(ee,oe.props),Ah(ye,oe),ye.return=re,re=ye;break e}h(re,ee);break}else c(re,ee);ee=ee.sibling}oe.type===C?(ye=ec(oe.props.children,re.mode,ye,oe.key),ye.return=re,re=ye):(ye=Np(oe.type,oe.key,oe.props,null,re.mode,ye),Ah(ye,oe),ye.return=re,re=ye)}return D(re);case _:e:{for(Be=oe.key;ee!==null;){if(ee.key===Be)if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){h(re,ee.sibling),ye=b(ee,oe.children||[]),ye.return=re,re=ye;break e}else{h(re,ee);break}else c(re,ee);ee=ee.sibling}ye=lv(oe,re.mode,ye),ye.return=re,re=ye}return D(re);case O:return oe=ac(oe),Kt(re,ee,oe,ye)}if(W(oe))return Oe(re,ee,oe,ye);if($(oe)){if(Be=$(oe),typeof Be!="function")throw Error(r(150));return oe=Be.call(oe),qe(re,ee,oe,ye)}if(typeof oe.then=="function")return Kt(re,ee,Pp(oe),ye);if(oe.$$typeof===R)return Kt(re,ee,kp(re,oe),ye);Mp(re,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,ee!==null&&ee.tag===6?(h(re,ee.sibling),ye=b(ee,oe),ye.return=re,re=ye):(h(re,ee),ye=ov(oe,re.mode,ye),ye.return=re,re=ye),D(re)):h(re,ee)}return function(re,ee,oe,ye){try{Dh=0;var Be=Kt(re,ee,oe,ye);return Nu=null,Be}catch(Ve){if(Ve===Su||Ve===Ap)throw Ve;var kt=gs(29,Ve,null,re.mode);return kt.lanes=ye,kt.return=re,kt}finally{}}}var oc=s2(!0),a2=s2(!1),Mo=!1;function bv(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wv(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Lo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Oo(o,c,h){var p=o.updateQueue;if(p===null)return null;if(p=p.shared,(Mt&2)!==0){var b=p.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),p.pending=c,c=Sp(o),zS(o,null,h),c}return Cp(o,p,c,h),Sp(o)}function Rh(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var p=c.lanes;p&=o.pendingLanes,h|=p,c.lanes=h,ah(o,h)}}function _v(o,c){var h=o.updateQueue,p=o.alternate;if(p!==null&&(p=p.updateQueue,h===p)){var b=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var D={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?b=E=D:E=E.next=D,h=h.next}while(h!==null);E===null?b=E=c:E=E.next=c}else b=E=c;h={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}var Ev=!1;function Ph(){if(Ev){var o=Cu;if(o!==null)throw o}}function Mh(o,c,h,p){Ev=!1;var b=o.updateQueue;Mo=!1;var E=b.firstBaseUpdate,D=b.lastBaseUpdate,B=b.shared.pending;if(B!==null){b.shared.pending=null;var Q=B,le=Q.next;Q.next=null,D===null?E=le:D.next=le,D=Q;var ge=o.alternate;ge!==null&&(ge=ge.updateQueue,B=ge.lastBaseUpdate,B!==D&&(B===null?ge.firstBaseUpdate=le:B.next=le,ge.lastBaseUpdate=Q))}if(E!==null){var ve=b.baseState;D=0,ge=le=Q=null,B=E;do{var ce=B.lane&-536870913,he=ce!==B.lane;if(he?(gt&ce)===ce:(p&ce)===ce){ce!==0&&ce===Eu&&(Ev=!0),ge!==null&&(ge=ge.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Oe=o,qe=B;ce=c;var Kt=h;switch(qe.tag){case 1:if(Oe=qe.payload,typeof Oe=="function"){ve=Oe.call(Kt,ve,ce);break e}ve=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=qe.payload,ce=typeof Oe=="function"?Oe.call(Kt,ve,ce):Oe,ce==null)break e;ve=g({},ve,ce);break e;case 2:Mo=!0}}ce=B.callback,ce!==null&&(o.flags|=64,he&&(o.flags|=8192),he=b.callbacks,he===null?b.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ge===null?(le=ge=he,Q=ve):ge=ge.next=he,D|=ce;if(B=B.next,B===null){if(B=b.shared.pending,B===null)break;he=B,B=he.next,he.next=null,b.lastBaseUpdate=he,b.shared.pending=null}}while(!0);ge===null&&(Q=ve),b.baseState=Q,b.firstBaseUpdate=le,b.lastBaseUpdate=ge,E===null&&(b.shared.lanes=0),Bo|=D,o.lanes=D,o.memoizedState=ve}}function i2(o,c){if(typeof o!="function")throw Error(r(191,o));o.call(c)}function o2(o,c){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)i2(h[o],c)}var ju=H(null),Lp=H(0);function l2(o,c){o=$i,te(Lp,o),te(ju,c),$i=o|c.baseLanes}function Cv(){te(Lp,$i),te(ju,ju.current)}function Sv(){$i=Lp.current,Z(ju),Z(Lp)}var ys=H(null),zs=null;function Io(o){var c=o.alternate;te(Ln,Ln.current&1),te(ys,o),zs===null&&(c===null||ju.current!==null||c.memoizedState!==null)&&(zs=o)}function Nv(o){te(Ln,Ln.current),te(ys,o),zs===null&&(zs=o)}function c2(o){o.tag===22?(te(Ln,Ln.current),te(ys,o),zs===null&&(zs=o)):Vo()}function Vo(){te(Ln,Ln.current),te(ys,ys.current)}function xs(o){Z(ys),zs===o&&(zs=null),Z(Ln)}var Ln=H(0);function Op(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Rb(h)||Pb(h)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Oi=0,it=null,Wt=null,Kn=null,Ip=!1,Tu=!1,lc=!1,Vp=0,Lh=0,ku=null,N9=0;function Cn(){throw Error(r(321))}function jv(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!ps(o[h],c[h]))return!1;return!0}function Tv(o,c,h,p,b,E){return Oi=E,it=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,z.H=o===null||o.memoizedState===null?Y2:Hv,lc=!1,E=h(p,b),lc=!1,Tu&&(E=d2(c,h,p,b)),u2(o),E}function u2(o){z.H=Vh;var c=Wt!==null&&Wt.next!==null;if(Oi=0,Kn=Wt=it=null,Ip=!1,Lh=0,ku=null,c)throw Error(r(300));o===null||Qn||(o=o.dependencies,o!==null&&Tp(o)&&(Qn=!0))}function d2(o,c,h,p){it=o;var b=0;do{if(Tu&&(ku=null),Lh=0,Tu=!1,25<=b)throw Error(r(301));if(b+=1,Kn=Wt=null,o.updateQueue!=null){var E=o.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}z.H=W2,E=c(h,p)}while(Tu);return E}function j9(){var o=z.H,c=o.useState()[0];return c=typeof c.then=="function"?Oh(c):c,o=o.useState()[0],(Wt!==null?Wt.memoizedState:null)!==o&&(it.flags|=1024),c}function kv(){var o=Vp!==0;return Vp=0,o}function Dv(o,c,h){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~h}function Av(o){if(Ip){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Ip=!1}Oi=0,Kn=Wt=it=null,Tu=!1,Lh=Vp=0,ku=null}function Fr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?it.memoizedState=Kn=o:Kn=Kn.next=o,Kn}function On(){if(Wt===null){var o=it.alternate;o=o!==null?o.memoizedState:null}else o=Wt.next;var c=Kn===null?it.memoizedState:Kn.next;if(c!==null)Kn=c,Wt=o;else{if(o===null)throw it.alternate===null?Error(r(467)):Error(r(310));Wt=o,o={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Kn===null?it.memoizedState=Kn=o:Kn=Kn.next=o}return Kn}function Up(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oh(o){var c=Lh;return Lh+=1,ku===null&&(ku=[]),o=t2(ku,o,c),c=it,(Kn===null?c.memoizedState:Kn.next)===null&&(c=c.alternate,z.H=c===null||c.memoizedState===null?Y2:Hv),o}function Fp(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Oh(o);if(o.$$typeof===R)return wr(o)}throw Error(r(438,String(o)))}function Rv(o){var c=null,h=it.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var p=it.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=Up(),it.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(o),p=0;p<o;p++)h[p]=I;return c.index++,h}function Ii(o,c){return typeof c=="function"?c(o):c}function Bp(o){var c=On();return Pv(c,Wt,o)}function Pv(o,c,h){var p=o.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=h;var b=o.baseQueue,E=p.pending;if(E!==null){if(b!==null){var D=b.next;b.next=E.next,E.next=D}c.baseQueue=b=E,p.pending=null}if(E=o.baseState,b===null)o.memoizedState=E;else{c=b.next;var B=D=null,Q=null,le=c,ge=!1;do{var ve=le.lane&-536870913;if(ve!==le.lane?(gt&ve)===ve:(Oi&ve)===ve){var ce=le.revertLane;if(ce===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ve===Eu&&(ge=!0);else if((Oi&ce)===ce){le=le.next,ce===Eu&&(ge=!0);continue}else ve={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(B=Q=ve,D=E):Q=Q.next=ve,it.lanes|=ce,Bo|=ce;ve=le.action,lc&&h(E,ve),E=le.hasEagerState?le.eagerState:h(E,ve)}else ce={lane:ve,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Q===null?(B=Q=ce,D=E):Q=Q.next=ce,it.lanes|=ve,Bo|=ve;le=le.next}while(le!==null&&le!==c);if(Q===null?D=E:Q.next=B,!ps(E,o.memoizedState)&&(Qn=!0,ge&&(h=Cu,h!==null)))throw h;o.memoizedState=E,o.baseState=D,o.baseQueue=Q,p.lastRenderedState=E}return b===null&&(p.lanes=0),[o.memoizedState,p.dispatch]}function Mv(o){var c=On(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var p=h.dispatch,b=h.pending,E=c.memoizedState;if(b!==null){h.pending=null;var D=b=b.next;do E=o(E,D.action),D=D.next;while(D!==b);ps(E,c.memoizedState)||(Qn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),h.lastRenderedState=E}return[E,p]}function h2(o,c,h){var p=it,b=On(),E=wt;if(E){if(h===void 0)throw Error(r(407));h=h()}else h=c();var D=!ps((Wt||b).memoizedState,h);if(D&&(b.memoizedState=h,Qn=!0),b=b.queue,Iv(p2.bind(null,p,b,o),[o]),b.getSnapshot!==c||D||Kn!==null&&Kn.memoizedState.tag&1){if(p.flags|=2048,Du(9,{destroy:void 0},m2.bind(null,p,b,h,c),null),Jt===null)throw Error(r(349));E||(Oi&127)!==0||f2(p,c,h)}return h}function f2(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=it.updateQueue,c===null?(c=Up(),it.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function m2(o,c,h,p){c.value=h,c.getSnapshot=p,g2(c)&&y2(o)}function p2(o,c,h){return h(function(){g2(c)&&y2(o)})}function g2(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!ps(o,h)}catch{return!0}}function y2(o){var c=Jl(o,2);c!==null&&ts(c,o,2)}function Lv(o){var c=Fr();if(typeof o=="function"){var h=o;if(o=h(),lc){Rn(!0);try{h()}finally{Rn(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:o},c}function x2(o,c,h,p){return o.baseState=h,Pv(o,Wt,typeof p=="function"?p:Ii)}function T9(o,c,h,p,b){if($p(o))throw Error(r(485));if(o=c.action,o!==null){var E={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){E.listeners.push(D)}};z.T!==null?h(!0):E.isTransition=!1,p(E),h=c.pending,h===null?(E.next=c.pending=E,v2(c,E)):(E.next=h.next,c.pending=h.next=E)}}function v2(o,c){var h=c.action,p=c.payload,b=o.state;if(c.isTransition){var E=z.T,D={};z.T=D;try{var B=h(b,p),Q=z.S;Q!==null&&Q(D,B),b2(o,c,B)}catch(le){Ov(o,c,le)}finally{E!==null&&D.types!==null&&(E.types=D.types),z.T=E}}else try{E=h(b,p),b2(o,c,E)}catch(le){Ov(o,c,le)}}function b2(o,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(p){w2(o,c,p)},function(p){return Ov(o,c,p)}):w2(o,c,h)}function w2(o,c,h){c.status="fulfilled",c.value=h,_2(c),o.state=h,c=o.pending,c!==null&&(h=c.next,h===c?o.pending=null:(h=h.next,c.next=h,v2(o,h)))}function Ov(o,c,h){var p=o.pending;if(o.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=h,_2(c),c=c.next;while(c!==p)}o.action=null}function _2(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function E2(o,c){return c}function C2(o,c){if(wt){var h=Jt.formState;if(h!==null){e:{var p=it;if(wt){if(ln){t:{for(var b=ln,E=Bs;b.nodeType!==8;){if(!E){b=null;break t}if(b=Hs(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){ln=Hs(b.nextSibling),p=b.data==="F!";break e}}Ro(p)}p=!1}p&&(c=h[0])}}return h=Fr(),h.memoizedState=h.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E2,lastRenderedState:c},h.queue=p,h=H2.bind(null,it,p),p.dispatch=h,p=Lv(!1),E=zv.bind(null,it,!1,p.queue),p=Fr(),b={state:c,dispatch:null,action:o,pending:null},p.queue=b,h=T9.bind(null,it,b,E,h),b.dispatch=h,p.memoizedState=o,[c,h,!1]}function S2(o){var c=On();return N2(c,Wt,o)}function N2(o,c,h){if(c=Pv(o,c,E2)[0],o=Bp(Ii)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=Oh(c)}catch(D){throw D===Su?Ap:D}else p=c;c=On();var b=c.queue,E=b.dispatch;return h!==c.memoizedState&&(it.flags|=2048,Du(9,{destroy:void 0},k9.bind(null,b,h),null)),[p,E,o]}function k9(o,c){o.action=c}function j2(o){var c=On(),h=Wt;if(h!==null)return N2(c,h,o);On(),c=c.memoizedState,h=On();var p=h.queue.dispatch;return h.memoizedState=o,[c,p,!1]}function Du(o,c,h,p){return o={tag:o,create:h,deps:p,inst:c,next:null},c=it.updateQueue,c===null&&(c=Up(),it.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=o.next=o:(p=h.next,h.next=o,o.next=p,c.lastEffect=o),o}function T2(){return On().memoizedState}function zp(o,c,h,p){var b=Fr();it.flags|=o,b.memoizedState=Du(1|c,{destroy:void 0},h,p===void 0?null:p)}function Hp(o,c,h,p){var b=On();p=p===void 0?null:p;var E=b.memoizedState.inst;Wt!==null&&p!==null&&jv(p,Wt.memoizedState.deps)?b.memoizedState=Du(c,E,h,p):(it.flags|=o,b.memoizedState=Du(1|c,E,h,p))}function k2(o,c){zp(8390656,8,o,c)}function Iv(o,c){Hp(2048,8,o,c)}function D9(o){it.flags|=4;var c=it.updateQueue;if(c===null)c=Up(),it.updateQueue=c,c.events=[o];else{var h=c.events;h===null?c.events=[o]:h.push(o)}}function D2(o){var c=On().memoizedState;return D9({ref:c,nextImpl:o}),function(){if((Mt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function A2(o,c){return Hp(4,2,o,c)}function R2(o,c){return Hp(4,4,o,c)}function P2(o,c){if(typeof c=="function"){o=o();var h=c(o);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function M2(o,c,h){h=h!=null?h.concat([o]):null,Hp(4,4,P2.bind(null,c,o),h)}function Vv(){}function L2(o,c){var h=On();c=c===void 0?null:c;var p=h.memoizedState;return c!==null&&jv(c,p[1])?p[0]:(h.memoizedState=[o,c],o)}function O2(o,c){var h=On();c=c===void 0?null:c;var p=h.memoizedState;if(c!==null&&jv(c,p[1]))return p[0];if(p=o(),lc){Rn(!0);try{o()}finally{Rn(!1)}}return h.memoizedState=[p,c],p}function Uv(o,c,h){return h===void 0||(Oi&1073741824)!==0&&(gt&261930)===0?o.memoizedState=c:(o.memoizedState=h,o=IN(),it.lanes|=o,Bo|=o,h)}function I2(o,c,h,p){return ps(h,c)?h:ju.current!==null?(o=Uv(o,h,p),ps(o,c)||(Qn=!0),o):(Oi&42)===0||(Oi&1073741824)!==0&&(gt&261930)===0?(Qn=!0,o.memoizedState=h):(o=IN(),it.lanes|=o,Bo|=o,c)}function V2(o,c,h,p,b){var E=q.p;q.p=E!==0&&8>E?E:8;var D=z.T,B={};z.T=B,zv(o,!1,c,h);try{var Q=b(),le=z.S;if(le!==null&&le(B,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ge=S9(Q,p);Ih(o,c,ge,ws(o))}else Ih(o,c,p,ws(o))}catch(ve){Ih(o,c,{then:function(){},status:"rejected",reason:ve},ws())}finally{q.p=E,D!==null&&B.types!==null&&(D.types=B.types),z.T=D}}function A9(){}function Fv(o,c,h,p){if(o.tag!==5)throw Error(r(476));var b=U2(o).queue;V2(o,b,c,K,h===null?A9:function(){return F2(o),h(p)})}function U2(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:K},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:h},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function F2(o){var c=U2(o);c.next===null&&(c=o.alternate.memoizedState),Ih(o,c.next.queue,{},ws())}function Bv(){return wr(ef)}function B2(){return On().memoizedState}function z2(){return On().memoizedState}function R9(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var h=ws();o=Lo(h);var p=Oo(c,o,h);p!==null&&(ts(p,c,h),Rh(p,c,h)),c={cache:gv()},o.payload=c;return}c=c.return}}function P9(o,c,h){var p=ws();h={lane:p,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},$p(o)?$2(c,h):(h=av(o,c,h,p),h!==null&&(ts(h,o,p),q2(h,c,p)))}function H2(o,c,h){var p=ws();Ih(o,c,h,p)}function Ih(o,c,h,p){var b={lane:p,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if($p(o))$2(c,b);else{var E=o.alternate;if(o.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var D=c.lastRenderedState,B=E(D,h);if(b.hasEagerState=!0,b.eagerState=B,ps(B,D))return Cp(o,c,b,0),Jt===null&&Ep(),!1}catch{}finally{}if(h=av(o,c,b,p),h!==null)return ts(h,o,p),q2(h,c,p),!0}return!1}function zv(o,c,h,p){if(p={lane:2,revertLane:bb(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},$p(o)){if(c)throw Error(r(479))}else c=av(o,h,p,2),c!==null&&ts(c,o,2)}function $p(o){var c=o.alternate;return o===it||c!==null&&c===it}function $2(o,c){Tu=Ip=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function q2(o,c,h){if((h&4194048)!==0){var p=c.lanes;p&=o.pendingLanes,h|=p,c.lanes=h,ah(o,h)}}var Vh={readContext:wr,use:Fp,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useInsertionEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useSyncExternalStore:Cn,useId:Cn,useHostTransitionStatus:Cn,useFormState:Cn,useActionState:Cn,useOptimistic:Cn,useMemoCache:Cn,useCacheRefresh:Cn};Vh.useEffectEvent=Cn;var Y2={readContext:wr,use:Fp,useCallback:function(o,c){return Fr().memoizedState=[o,c===void 0?null:c],o},useContext:wr,useEffect:k2,useImperativeHandle:function(o,c,h){h=h!=null?h.concat([o]):null,zp(4194308,4,P2.bind(null,c,o),h)},useLayoutEffect:function(o,c){return zp(4194308,4,o,c)},useInsertionEffect:function(o,c){zp(4,2,o,c)},useMemo:function(o,c){var h=Fr();c=c===void 0?null:c;var p=o();if(lc){Rn(!0);try{o()}finally{Rn(!1)}}return h.memoizedState=[p,c],p},useReducer:function(o,c,h){var p=Fr();if(h!==void 0){var b=h(c);if(lc){Rn(!0);try{h(c)}finally{Rn(!1)}}}else b=c;return p.memoizedState=p.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},p.queue=o,o=o.dispatch=P9.bind(null,it,o),[p.memoizedState,o]},useRef:function(o){var c=Fr();return o={current:o},c.memoizedState=o},useState:function(o){o=Lv(o);var c=o.queue,h=H2.bind(null,it,c);return c.dispatch=h,[o.memoizedState,h]},useDebugValue:Vv,useDeferredValue:function(o,c){var h=Fr();return Uv(h,o,c)},useTransition:function(){var o=Lv(!1);return o=V2.bind(null,it,o.queue,!0,!1),Fr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,h){var p=it,b=Fr();if(wt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Jt===null)throw Error(r(349));(gt&127)!==0||f2(p,c,h)}b.memoizedState=h;var E={value:h,getSnapshot:c};return b.queue=E,k2(p2.bind(null,p,E,o),[o]),p.flags|=2048,Du(9,{destroy:void 0},m2.bind(null,p,E,h,c),null),h},useId:function(){var o=Fr(),c=Jt.identifierPrefix;if(wt){var h=Wa,p=Ya;h=(p&~(1<<32-tn(p)-1)).toString(32)+h,c="_"+c+"R_"+h,h=Vp++,0<h&&(c+="H"+h.toString(32)),c+="_"}else h=N9++,c="_"+c+"r_"+h.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:Bv,useFormState:C2,useActionState:C2,useOptimistic:function(o){var c=Fr();c.memoizedState=c.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=zv.bind(null,it,!0,h),h.dispatch=c,[o,c]},useMemoCache:Rv,useCacheRefresh:function(){return Fr().memoizedState=R9.bind(null,it)},useEffectEvent:function(o){var c=Fr(),h={impl:o};return c.memoizedState=h,function(){if((Mt&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},Hv={readContext:wr,use:Fp,useCallback:L2,useContext:wr,useEffect:Iv,useImperativeHandle:M2,useInsertionEffect:A2,useLayoutEffect:R2,useMemo:O2,useReducer:Bp,useRef:T2,useState:function(){return Bp(Ii)},useDebugValue:Vv,useDeferredValue:function(o,c){var h=On();return I2(h,Wt.memoizedState,o,c)},useTransition:function(){var o=Bp(Ii)[0],c=On().memoizedState;return[typeof o=="boolean"?o:Oh(o),c]},useSyncExternalStore:h2,useId:B2,useHostTransitionStatus:Bv,useFormState:S2,useActionState:S2,useOptimistic:function(o,c){var h=On();return x2(h,Wt,o,c)},useMemoCache:Rv,useCacheRefresh:z2};Hv.useEffectEvent=D2;var W2={readContext:wr,use:Fp,useCallback:L2,useContext:wr,useEffect:Iv,useImperativeHandle:M2,useInsertionEffect:A2,useLayoutEffect:R2,useMemo:O2,useReducer:Mv,useRef:T2,useState:function(){return Mv(Ii)},useDebugValue:Vv,useDeferredValue:function(o,c){var h=On();return Wt===null?Uv(h,o,c):I2(h,Wt.memoizedState,o,c)},useTransition:function(){var o=Mv(Ii)[0],c=On().memoizedState;return[typeof o=="boolean"?o:Oh(o),c]},useSyncExternalStore:h2,useId:B2,useHostTransitionStatus:Bv,useFormState:j2,useActionState:j2,useOptimistic:function(o,c){var h=On();return Wt!==null?x2(h,Wt,o,c):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:Rv,useCacheRefresh:z2};W2.useEffectEvent=D2;function $v(o,c,h,p){c=o.memoizedState,h=h(p,c),h=h==null?c:g({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var qv={enqueueSetState:function(o,c,h){o=o._reactInternals;var p=ws(),b=Lo(p);b.payload=c,h!=null&&(b.callback=h),c=Oo(o,b,p),c!==null&&(ts(c,o,p),Rh(c,o,p))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var p=ws(),b=Lo(p);b.tag=1,b.payload=c,h!=null&&(b.callback=h),c=Oo(o,b,p),c!==null&&(ts(c,o,p),Rh(c,o,p))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=ws(),p=Lo(h);p.tag=2,c!=null&&(p.callback=c),c=Oo(o,p,h),c!==null&&(ts(c,o,h),Rh(c,o,h))}};function G2(o,c,h,p,b,E,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(p,E,D):c.prototype&&c.prototype.isPureReactComponent?!Ch(h,p)||!Ch(b,E):!0}function K2(o,c,h,p){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,p),c.state!==o&&qv.enqueueReplaceState(c,c.state,null)}function cc(o,c){var h=c;if("ref"in c){h={};for(var p in c)p!=="ref"&&(h[p]=c[p])}if(o=o.defaultProps){h===c&&(h=g({},h));for(var b in o)h[b]===void 0&&(h[b]=o[b])}return h}function Q2(o){_p(o)}function X2(o){console.error(o)}function Z2(o){_p(o)}function qp(o,c){try{var h=o.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function J2(o,c,h){try{var p=o.onCaughtError;p(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Yv(o,c,h){return h=Lo(h),h.tag=3,h.payload={element:null},h.callback=function(){qp(o,c)},h}function eN(o){return o=Lo(o),o.tag=3,o}function tN(o,c,h,p){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var E=p.value;o.payload=function(){return b(E)},o.callback=function(){J2(c,h,p)}}var D=h.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(o.callback=function(){J2(c,h,p),typeof b!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var B=p.stack;this.componentDidCatch(p.value,{componentStack:B!==null?B:""})})}function M9(o,c,h,p,b){if(h.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=h.alternate,c!==null&&_u(c,h,b,!0),h=ys.current,h!==null){switch(h.tag){case 31:case 13:return zs===null?rg():h.alternate===null&&Sn===0&&(Sn=3),h.flags&=-257,h.flags|=65536,h.lanes=b,p===Rp?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([p]):c.add(p),yb(o,p,b)),!1;case 22:return h.flags|=65536,p===Rp?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([p]):h.add(p)),yb(o,p,b)),!1}throw Error(r(435,h.tag))}return yb(o,p,b),rg(),!1}if(wt)return c=ys.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,p!==dv&&(o=Error(r(422),{cause:p}),jh(Vs(o,h)))):(p!==dv&&(c=Error(r(423),{cause:p}),jh(Vs(c,h))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,p=Vs(p,h),b=Yv(o.stateNode,p,b),_v(o,b),Sn!==4&&(Sn=2)),!1;var E=Error(r(520),{cause:p});if(E=Vs(E,h),Yh===null?Yh=[E]:Yh.push(E),Sn!==4&&(Sn=2),c===null)return!0;p=Vs(p,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,o=b&-b,h.lanes|=o,o=Yv(h.stateNode,p,o),_v(h,o),!1;case 1:if(c=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(zo===null||!zo.has(E))))return h.flags|=65536,b&=-b,h.lanes|=b,b=eN(b),tN(b,o,h,p),_v(h,b),!1}h=h.return}while(h!==null);return!1}var Wv=Error(r(461)),Qn=!1;function _r(o,c,h,p){c.child=o===null?a2(c,null,h,p):oc(c,o.child,h,p)}function nN(o,c,h,p,b){h=h.render;var E=c.ref;if("ref"in p){var D={};for(var B in p)B!=="ref"&&(D[B]=p[B])}else D=p;return rc(c),p=Tv(o,c,h,D,E,b),B=kv(),o!==null&&!Qn?(Dv(o,c,b),Vi(o,c,b)):(wt&&B&&cv(c),c.flags|=1,_r(o,c,p,b),c.child)}function rN(o,c,h,p,b){if(o===null){var E=h.type;return typeof E=="function"&&!iv(E)&&E.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=E,sN(o,c,E,p,b)):(o=Np(h.type,null,p,c,c.mode,b),o.ref=c.ref,o.return=c,c.child=o)}if(E=o.child,!tb(o,b)){var D=E.memoizedProps;if(h=h.compare,h=h!==null?h:Ch,h(D,p)&&o.ref===c.ref)return Vi(o,c,b)}return c.flags|=1,o=Ri(E,p),o.ref=c.ref,o.return=c,c.child=o}function sN(o,c,h,p,b){if(o!==null){var E=o.memoizedProps;if(Ch(E,p)&&o.ref===c.ref)if(Qn=!1,c.pendingProps=p=E,tb(o,b))(o.flags&131072)!==0&&(Qn=!0);else return c.lanes=o.lanes,Vi(o,c,b)}return Gv(o,c,h,p,b)}function aN(o,c,h,p){var b=p.children,E=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((c.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,o!==null){for(p=c.child=o.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~E}else p=0,c.child=null;return iN(o,c,E,h,p)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Dp(c,E!==null?E.cachePool:null),E!==null?l2(c,E):Cv(),c2(c);else return p=c.lanes=536870912,iN(o,c,E!==null?E.baseLanes|h:h,h,p)}else E!==null?(Dp(c,E.cachePool),l2(c,E),Vo(),c.memoizedState=null):(o!==null&&Dp(c,null),Cv(),Vo());return _r(o,c,b,h),c.child}function Uh(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function iN(o,c,h,p,b){var E=xv();return E=E===null?null:{parent:Gn._currentValue,pool:E},c.memoizedState={baseLanes:h,cachePool:E},o!==null&&Dp(c,null),Cv(),c2(c),o!==null&&_u(o,c,p,!0),c.childLanes=b,null}function Yp(o,c){return c=Gp({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function oN(o,c,h){return oc(c,o.child,null,h),o=Yp(c,c.pendingProps),o.flags|=2,xs(c),c.memoizedState=null,o}function L9(o,c,h){var p=c.pendingProps,b=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(wt){if(p.mode==="hidden")return o=Yp(c,p),c.lanes=536870912,Uh(null,o);if(Nv(c),(o=ln)?(o=vj(o,Bs),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Do!==null?{id:Ya,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},h=$S(o),h.return=c,c.child=h,br=c,ln=null)):o=null,o===null)throw Ro(c);return c.lanes=536870912,null}return Yp(c,p)}var E=o.memoizedState;if(E!==null){var D=E.dehydrated;if(Nv(c),b)if(c.flags&256)c.flags&=-257,c=oN(o,c,h);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(r(558));else if(Qn||_u(o,c,h,!1),b=(h&o.childLanes)!==0,Qn||b){if(p=Jt,p!==null&&(D=ih(p,h),D!==0&&D!==E.retryLane))throw E.retryLane=D,Jl(o,D),ts(p,o,D),Wv;rg(),c=oN(o,c,h)}else o=E.treeContext,ln=Hs(D.nextSibling),br=c,wt=!0,Ao=null,Bs=!1,o!==null&&WS(c,o),c=Yp(c,p),c.flags|=4096;return c}return o=Ri(o.child,{mode:p.mode,children:p.children}),o.ref=c.ref,c.child=o,o.return=c,o}function Wp(o,c){var h=c.ref;if(h===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(o===null||o.ref!==h)&&(c.flags|=4194816)}}function Gv(o,c,h,p,b){return rc(c),h=Tv(o,c,h,p,void 0,b),p=kv(),o!==null&&!Qn?(Dv(o,c,b),Vi(o,c,b)):(wt&&p&&cv(c),c.flags|=1,_r(o,c,h,b),c.child)}function lN(o,c,h,p,b,E){return rc(c),c.updateQueue=null,h=d2(c,p,h,b),u2(o),p=kv(),o!==null&&!Qn?(Dv(o,c,E),Vi(o,c,E)):(wt&&p&&cv(c),c.flags|=1,_r(o,c,h,E),c.child)}function cN(o,c,h,p,b){if(rc(c),c.stateNode===null){var E=xu,D=h.contextType;typeof D=="object"&&D!==null&&(E=wr(D)),E=new h(p,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=qv,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=p,E.state=c.memoizedState,E.refs={},bv(c),D=h.contextType,E.context=typeof D=="object"&&D!==null?wr(D):xu,E.state=c.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&($v(c,h,D,p),E.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(D=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),D!==E.state&&qv.enqueueReplaceState(E,E.state,null),Mh(c,p,E,b),Ph(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(o===null){E=c.stateNode;var B=c.memoizedProps,Q=cc(h,B);E.props=Q;var le=E.context,ge=h.contextType;D=xu,typeof ge=="object"&&ge!==null&&(D=wr(ge));var ve=h.getDerivedStateFromProps;ge=typeof ve=="function"||typeof E.getSnapshotBeforeUpdate=="function",B=c.pendingProps!==B,ge||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B||le!==D)&&K2(c,E,p,D),Mo=!1;var ce=c.memoizedState;E.state=ce,Mh(c,p,E,b),Ph(),le=c.memoizedState,B||ce!==le||Mo?(typeof ve=="function"&&($v(c,h,ve,p),le=c.memoizedState),(Q=Mo||G2(c,h,Q,p,ce,le,D))?(ge||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=le),E.props=p,E.state=le,E.context=D,p=Q):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{E=c.stateNode,wv(o,c),D=c.memoizedProps,ge=cc(h,D),E.props=ge,ve=c.pendingProps,ce=E.context,le=h.contextType,Q=xu,typeof le=="object"&&le!==null&&(Q=wr(le)),B=h.getDerivedStateFromProps,(le=typeof B=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D!==ve||ce!==Q)&&K2(c,E,p,Q),Mo=!1,ce=c.memoizedState,E.state=ce,Mh(c,p,E,b),Ph();var he=c.memoizedState;D!==ve||ce!==he||Mo||o!==null&&o.dependencies!==null&&Tp(o.dependencies)?(typeof B=="function"&&($v(c,h,B,p),he=c.memoizedState),(ge=Mo||G2(c,h,ge,p,ce,he,Q)||o!==null&&o.dependencies!==null&&Tp(o.dependencies))?(le||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,he,Q),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,he,Q)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||D===o.memoizedProps&&ce===o.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&ce===o.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=he),E.props=p,E.state=he,E.context=Q,p=ge):(typeof E.componentDidUpdate!="function"||D===o.memoizedProps&&ce===o.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||D===o.memoizedProps&&ce===o.memoizedState||(c.flags|=1024),p=!1)}return E=p,Wp(o,c),p=(c.flags&128)!==0,E||p?(E=c.stateNode,h=p&&typeof h.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,o!==null&&p?(c.child=oc(c,o.child,null,b),c.child=oc(c,null,h,b)):_r(o,c,h,b),c.memoizedState=E.state,o=c.child):o=Vi(o,c,b),o}function uN(o,c,h,p){return tc(),c.flags|=256,_r(o,c,h,p),c.child}var Kv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qv(o){return{baseLanes:o,cachePool:JS()}}function Xv(o,c,h){return o=o!==null?o.childLanes&~h:0,c&&(o|=bs),o}function dN(o,c,h){var p=c.pendingProps,b=!1,E=(c.flags&128)!==0,D;if((D=E)||(D=o!==null&&o.memoizedState===null?!1:(Ln.current&2)!==0),D&&(b=!0,c.flags&=-129),D=(c.flags&32)!==0,c.flags&=-33,o===null){if(wt){if(b?Io(c):Vo(),(o=ln)?(o=vj(o,Bs),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Do!==null?{id:Ya,overflow:Wa}:null,retryLane:536870912,hydrationErrors:null},h=$S(o),h.return=c,c.child=h,br=c,ln=null)):o=null,o===null)throw Ro(c);return Pb(o)?c.lanes=32:c.lanes=536870912,null}var B=p.children;return p=p.fallback,b?(Vo(),b=c.mode,B=Gp({mode:"hidden",children:B},b),p=ec(p,b,h,null),B.return=c,p.return=c,B.sibling=p,c.child=B,p=c.child,p.memoizedState=Qv(h),p.childLanes=Xv(o,D,h),c.memoizedState=Kv,Uh(null,p)):(Io(c),Zv(c,B))}var Q=o.memoizedState;if(Q!==null&&(B=Q.dehydrated,B!==null)){if(E)c.flags&256?(Io(c),c.flags&=-257,c=Jv(o,c,h)):c.memoizedState!==null?(Vo(),c.child=o.child,c.flags|=128,c=null):(Vo(),B=p.fallback,b=c.mode,p=Gp({mode:"visible",children:p.children},b),B=ec(B,b,h,null),B.flags|=2,p.return=c,B.return=c,p.sibling=B,c.child=p,oc(c,o.child,null,h),p=c.child,p.memoizedState=Qv(h),p.childLanes=Xv(o,D,h),c.memoizedState=Kv,c=Uh(null,p));else if(Io(c),Pb(B)){if(D=B.nextSibling&&B.nextSibling.dataset,D)var le=D.dgst;D=le,p=Error(r(419)),p.stack="",p.digest=D,jh({value:p,source:null,stack:null}),c=Jv(o,c,h)}else if(Qn||_u(o,c,h,!1),D=(h&o.childLanes)!==0,Qn||D){if(D=Jt,D!==null&&(p=ih(D,h),p!==0&&p!==Q.retryLane))throw Q.retryLane=p,Jl(o,p),ts(D,o,p),Wv;Rb(B)||rg(),c=Jv(o,c,h)}else Rb(B)?(c.flags|=192,c.child=o.child,c=null):(o=Q.treeContext,ln=Hs(B.nextSibling),br=c,wt=!0,Ao=null,Bs=!1,o!==null&&WS(c,o),c=Zv(c,p.children),c.flags|=4096);return c}return b?(Vo(),B=p.fallback,b=c.mode,Q=o.child,le=Q.sibling,p=Ri(Q,{mode:"hidden",children:p.children}),p.subtreeFlags=Q.subtreeFlags&65011712,le!==null?B=Ri(le,B):(B=ec(B,b,h,null),B.flags|=2),B.return=c,p.return=c,p.sibling=B,c.child=p,Uh(null,p),p=c.child,B=o.child.memoizedState,B===null?B=Qv(h):(b=B.cachePool,b!==null?(Q=Gn._currentValue,b=b.parent!==Q?{parent:Q,pool:Q}:b):b=JS(),B={baseLanes:B.baseLanes|h,cachePool:b}),p.memoizedState=B,p.childLanes=Xv(o,D,h),c.memoizedState=Kv,Uh(o.child,p)):(Io(c),h=o.child,o=h.sibling,h=Ri(h,{mode:"visible",children:p.children}),h.return=c,h.sibling=null,o!==null&&(D=c.deletions,D===null?(c.deletions=[o],c.flags|=16):D.push(o)),c.child=h,c.memoizedState=null,h)}function Zv(o,c){return c=Gp({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function Gp(o,c){return o=gs(22,o,null,c),o.lanes=0,o}function Jv(o,c,h){return oc(c,o.child,null,h),o=Zv(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function hN(o,c,h){o.lanes|=c;var p=o.alternate;p!==null&&(p.lanes|=c),mv(o.return,c,h)}function eb(o,c,h,p,b,E){var D=o.memoizedState;D===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:h,tailMode:b,treeForkCount:E}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=p,D.tail=h,D.tailMode=b,D.treeForkCount=E)}function fN(o,c,h){var p=c.pendingProps,b=p.revealOrder,E=p.tail;p=p.children;var D=Ln.current,B=(D&2)!==0;if(B?(D=D&1|2,c.flags|=128):D&=1,te(Ln,D),_r(o,c,p,h),p=wt?Nh:0,!B&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&hN(o,h,c);else if(o.tag===19)hN(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(b){case"forwards":for(h=c.child,b=null;h!==null;)o=h.alternate,o!==null&&Op(o)===null&&(b=h),h=h.sibling;h=b,h===null?(b=c.child,c.child=null):(b=h.sibling,h.sibling=null),eb(c,!1,b,h,E,p);break;case"backwards":case"unstable_legacy-backwards":for(h=null,b=c.child,c.child=null;b!==null;){if(o=b.alternate,o!==null&&Op(o)===null){c.child=b;break}o=b.sibling,b.sibling=h,h=b,b=o}eb(c,!0,h,null,E,p);break;case"together":eb(c,!1,null,null,void 0,p);break;default:c.memoizedState=null}return c.child}function Vi(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),Bo|=c.lanes,(h&c.childLanes)===0)if(o!==null){if(_u(o,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=Ri(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=Ri(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function tb(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Tp(o)))}function O9(o,c,h){switch(c.tag){case 3:we(c,c.stateNode.containerInfo),Po(c,Gn,o.memoizedState.cache),tc();break;case 27:case 5:Se(c);break;case 4:we(c,c.stateNode.containerInfo);break;case 10:Po(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Nv(c),null;break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(Io(c),c.flags|=128,null):(h&c.child.childLanes)!==0?dN(o,c,h):(Io(c),o=Vi(o,c,h),o!==null?o.sibling:null);Io(c);break;case 19:var b=(o.flags&128)!==0;if(p=(h&c.childLanes)!==0,p||(_u(o,c,h,!1),p=(h&c.childLanes)!==0),b){if(p)return fN(o,c,h);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),te(Ln,Ln.current),p)break;return null;case 22:return c.lanes=0,aN(o,c,h,c.pendingProps);case 24:Po(c,Gn,o.memoizedState.cache)}return Vi(o,c,h)}function mN(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps)Qn=!0;else{if(!tb(o,h)&&(c.flags&128)===0)return Qn=!1,O9(o,c,h);Qn=(o.flags&131072)!==0}else Qn=!1,wt&&(c.flags&1048576)!==0&&YS(c,Nh,c.index);switch(c.lanes=0,c.tag){case 16:e:{var p=c.pendingProps;if(o=ac(c.elementType),c.type=o,typeof o=="function")iv(o)?(p=cc(o,p),c.tag=1,c=cN(null,c,o,p,h)):(c.tag=0,c=Gv(null,c,o,p,h));else{if(o!=null){var b=o.$$typeof;if(b===A){c.tag=11,c=nN(null,c,o,p,h);break e}else if(b===P){c.tag=14,c=rN(null,c,o,p,h);break e}}throw c=G(o)||o,Error(r(306,c,""))}}return c;case 0:return Gv(o,c,c.type,c.pendingProps,h);case 1:return p=c.type,b=cc(p,c.pendingProps),cN(o,c,p,b,h);case 3:e:{if(we(c,c.stateNode.containerInfo),o===null)throw Error(r(387));p=c.pendingProps;var E=c.memoizedState;b=E.element,wv(o,c),Mh(c,p,null,h);var D=c.memoizedState;if(p=D.cache,Po(c,Gn,p),p!==E.cache&&pv(c,[Gn],h,!0),Ph(),p=D.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:D.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=uN(o,c,p,h);break e}else if(p!==b){b=Vs(Error(r(424)),c),jh(b),c=uN(o,c,p,h);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(ln=Hs(o.firstChild),br=c,wt=!0,Ao=null,Bs=!0,h=a2(c,null,p,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(tc(),p===b){c=Vi(o,c,h);break e}_r(o,c,p,h)}c=c.child}return c;case 26:return Wp(o,c),o===null?(h=Sj(c.type,null,c.pendingProps,null))?c.memoizedState=h:wt||(h=c.type,o=c.pendingProps,p=ug(ae.current).createElement(h),p[qn]=c,p[dr]=o,Er(p,h,o),Yn(p),c.stateNode=p):c.memoizedState=Sj(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Se(c),o===null&&wt&&(p=c.stateNode=_j(c.type,c.pendingProps,ae.current),br=c,Bs=!0,b=ln,Yo(c.type)?(Mb=b,ln=Hs(p.firstChild)):ln=b),_r(o,c,c.pendingProps.children,h),Wp(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&wt&&((b=p=ln)&&(p=h8(p,c.type,c.pendingProps,Bs),p!==null?(c.stateNode=p,br=c,ln=Hs(p.firstChild),Bs=!1,b=!0):b=!1),b||Ro(c)),Se(c),b=c.type,E=c.pendingProps,D=o!==null?o.memoizedProps:null,p=E.children,kb(b,E)?p=null:D!==null&&kb(b,D)&&(c.flags|=32),c.memoizedState!==null&&(b=Tv(o,c,j9,null,null,h),ef._currentValue=b),Wp(o,c),_r(o,c,p,h),c.child;case 6:return o===null&&wt&&((o=h=ln)&&(h=f8(h,c.pendingProps,Bs),h!==null?(c.stateNode=h,br=c,ln=null,o=!0):o=!1),o||Ro(c)),null;case 13:return dN(o,c,h);case 4:return we(c,c.stateNode.containerInfo),p=c.pendingProps,o===null?c.child=oc(c,null,p,h):_r(o,c,p,h),c.child;case 11:return nN(o,c,c.type,c.pendingProps,h);case 7:return _r(o,c,c.pendingProps,h),c.child;case 8:return _r(o,c,c.pendingProps.children,h),c.child;case 12:return _r(o,c,c.pendingProps.children,h),c.child;case 10:return p=c.pendingProps,Po(c,c.type,p.value),_r(o,c,p.children,h),c.child;case 9:return b=c.type._context,p=c.pendingProps.children,rc(c),b=wr(b),p=p(b),c.flags|=1,_r(o,c,p,h),c.child;case 14:return rN(o,c,c.type,c.pendingProps,h);case 15:return sN(o,c,c.type,c.pendingProps,h);case 19:return fN(o,c,h);case 31:return L9(o,c,h);case 22:return aN(o,c,h,c.pendingProps);case 24:return rc(c),p=wr(Gn),o===null?(b=xv(),b===null&&(b=Jt,E=gv(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=h),b=E),c.memoizedState={parent:p,cache:b},bv(c),Po(c,Gn,b)):((o.lanes&h)!==0&&(wv(o,c),Mh(c,null,null,h),Ph()),b=o.memoizedState,E=c.memoizedState,b.parent!==p?(b={parent:p,cache:p},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),Po(c,Gn,p)):(p=E.cache,Po(c,Gn,p),p!==b.cache&&pv(c,[Gn],h,!0))),_r(o,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Ui(o){o.flags|=4}function nb(o,c,h,p,b){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(b&335544128)===b)if(o.stateNode.complete)o.flags|=8192;else if(BN())o.flags|=8192;else throw ic=Rp,vv}else o.flags&=-16777217}function pN(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Dj(c))if(BN())o.flags|=8192;else throw ic=Rp,vv}function Kp(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?hs():536870912,o.lanes|=c,Mu|=c)}function Fh(o,c){if(!wt)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var p=null;h!==null;)h.alternate!==null&&(p=h),h=h.sibling;p===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:p.sibling=null}}function cn(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,p=0;if(c)for(var b=o.child;b!==null;)h|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)h|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=p,o.childLanes=h,c}function I9(o,c,h){var p=c.pendingProps;switch(uv(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(c),null;case 1:return cn(c),null;case 3:return h=c.stateNode,p=null,o!==null&&(p=o.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),Li(Gn),Ne(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(wu(c)?Ui(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,hv())),cn(c),null;case 26:var b=c.type,E=c.memoizedState;return o===null?(Ui(c),E!==null?(cn(c),pN(c,E)):(cn(c),nb(c,b,null,p,h))):E?E!==o.memoizedState?(Ui(c),cn(c),pN(c,E)):(cn(c),c.flags&=-16777217):(o=o.memoizedProps,o!==p&&Ui(c),cn(c),nb(c,b,o,p,h)),null;case 27:if(Ue(c),h=ae.current,b=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Ui(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return cn(c),null}o=J.current,wu(c)?GS(c):(o=_j(b,p,h),c.stateNode=o,Ui(c))}return cn(c),null;case 5:if(Ue(c),b=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==p&&Ui(c);else{if(!p){if(c.stateNode===null)throw Error(r(166));return cn(c),null}if(E=J.current,wu(c))GS(c);else{var D=ug(ae.current);switch(E){case 1:E=D.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:E=D.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":E=D.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":E=D.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":E=D.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof p.is=="string"?D.createElement("select",{is:p.is}):D.createElement("select"),p.multiple?E.multiple=!0:p.size&&(E.size=p.size);break;default:E=typeof p.is=="string"?D.createElement(b,{is:p.is}):D.createElement(b)}}E[qn]=c,E[dr]=p;e:for(D=c.child;D!==null;){if(D.tag===5||D.tag===6)E.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===c)break e;for(;D.sibling===null;){if(D.return===null||D.return===c)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}c.stateNode=E;e:switch(Er(E,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Ui(c)}}return cn(c),nb(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,h),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==p&&Ui(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(r(166));if(o=ae.current,wu(c)){if(o=c.stateNode,h=c.memoizedProps,p=null,b=br,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}o[qn]=c,o=!!(o.nodeValue===h||p!==null&&p.suppressHydrationWarning===!0||dj(o.nodeValue,h)),o||Ro(c,!0)}else o=ug(o).createTextNode(p),o[qn]=c,c.stateNode=o}return cn(c),null;case 31:if(h=c.memoizedState,o===null||o.memoizedState!==null){if(p=wu(c),h!==null){if(o===null){if(!p)throw Error(r(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[qn]=c}else tc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;cn(c),o=!1}else h=hv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return c.flags&256?(xs(c),c):(xs(c),null);if((c.flags&128)!==0)throw Error(r(558))}return cn(c),null;case 13:if(p=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=wu(c),p!==null&&p.dehydrated!==null){if(o===null){if(!b)throw Error(r(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[qn]=c}else tc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;cn(c),b=!1}else b=hv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(xs(c),c):(xs(c),null)}return xs(c),(c.flags&128)!==0?(c.lanes=h,c):(h=p!==null,o=o!==null&&o.memoizedState!==null,h&&(p=c.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==b&&(p.flags|=2048)),h!==o&&h&&(c.child.flags|=8192),Kp(c,c.updateQueue),cn(c),null);case 4:return Ne(),o===null&&Cb(c.stateNode.containerInfo),cn(c),null;case 10:return Li(c.type),cn(c),null;case 19:if(Z(Ln),p=c.memoizedState,p===null)return cn(c),null;if(b=(c.flags&128)!==0,E=p.rendering,E===null)if(b)Fh(p,!1);else{if(Sn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(E=Op(o),E!==null){for(c.flags|=128,Fh(p,!1),o=E.updateQueue,c.updateQueue=o,Kp(c,o),c.subtreeFlags=0,o=h,h=c.child;h!==null;)HS(h,o),h=h.sibling;return te(Ln,Ln.current&1|2),wt&&Pi(c,p.treeForkCount),c.child}o=o.sibling}p.tail!==null&&_n()>eg&&(c.flags|=128,b=!0,Fh(p,!1),c.lanes=4194304)}else{if(!b)if(o=Op(E),o!==null){if(c.flags|=128,b=!0,o=o.updateQueue,c.updateQueue=o,Kp(c,o),Fh(p,!0),p.tail===null&&p.tailMode==="hidden"&&!E.alternate&&!wt)return cn(c),null}else 2*_n()-p.renderingStartTime>eg&&h!==536870912&&(c.flags|=128,b=!0,Fh(p,!1),c.lanes=4194304);p.isBackwards?(E.sibling=c.child,c.child=E):(o=p.last,o!==null?o.sibling=E:c.child=E,p.last=E)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=_n(),o.sibling=null,h=Ln.current,te(Ln,b?h&1|2:h&1),wt&&Pi(c,p.treeForkCount),o):(cn(c),null);case 22:case 23:return xs(c),Sv(),p=c.memoizedState!==null,o!==null?o.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(h&536870912)!==0&&(c.flags&128)===0&&(cn(c),c.subtreeFlags&6&&(c.flags|=8192)):cn(c),h=c.updateQueue,h!==null&&Kp(c,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==h&&(c.flags|=2048),o!==null&&Z(sc),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),Li(Gn),cn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function V9(o,c){switch(uv(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Li(Gn),Ne(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Ue(c),null;case 31:if(c.memoizedState!==null){if(xs(c),c.alternate===null)throw Error(r(340));tc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if(xs(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));tc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Z(Ln),null;case 4:return Ne(),null;case 10:return Li(c.type),null;case 22:case 23:return xs(c),Sv(),o!==null&&Z(sc),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Li(Gn),null;case 25:return null;default:return null}}function gN(o,c){switch(uv(c),c.tag){case 3:Li(Gn),Ne();break;case 26:case 27:case 5:Ue(c);break;case 4:Ne();break;case 31:c.memoizedState!==null&&xs(c);break;case 13:xs(c);break;case 19:Z(Ln);break;case 10:Li(c.type);break;case 22:case 23:xs(c),Sv(),o!==null&&Z(sc);break;case 24:Li(Gn)}}function Bh(o,c){try{var h=c.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var b=p.next;h=b;do{if((h.tag&o)===o){p=void 0;var E=h.create,D=h.inst;p=E(),D.destroy=p}h=h.next}while(h!==b)}}catch(B){Bt(c,c.return,B)}}function Uo(o,c,h){try{var p=c.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var E=b.next;p=E;do{if((p.tag&o)===o){var D=p.inst,B=D.destroy;if(B!==void 0){D.destroy=void 0,b=c;var Q=h,le=B;try{le()}catch(ge){Bt(b,Q,ge)}}}p=p.next}while(p!==E)}}catch(ge){Bt(c,c.return,ge)}}function yN(o){var c=o.updateQueue;if(c!==null){var h=o.stateNode;try{o2(c,h)}catch(p){Bt(o,o.return,p)}}}function xN(o,c,h){h.props=cc(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(p){Bt(o,c,p)}}function zh(o,c){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var p=o.stateNode;break;case 30:p=o.stateNode;break;default:p=o.stateNode}typeof h=="function"?o.refCleanup=h(p):h.current=p}}catch(b){Bt(o,c,b)}}function Ga(o,c){var h=o.ref,p=o.refCleanup;if(h!==null)if(typeof p=="function")try{p()}catch(b){Bt(o,c,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Bt(o,c,b)}else h.current=null}function vN(o){var c=o.type,h=o.memoizedProps,p=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&p.focus();break e;case"img":h.src?p.src=h.src:h.srcSet&&(p.srcset=h.srcSet)}}catch(b){Bt(o,o.return,b)}}function rb(o,c,h){try{var p=o.stateNode;i8(p,o.type,h,c),p[dr]=c}catch(b){Bt(o,o.return,b)}}function bN(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Yo(o.type)||o.tag===4}function sb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||bN(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Yo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ab(o,c,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(o),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=ha));else if(p!==4&&(p===27&&Yo(o.type)&&(h=o.stateNode,c=null),o=o.child,o!==null))for(ab(o,c,h),o=o.sibling;o!==null;)ab(o,c,h),o=o.sibling}function Qp(o,c,h){var p=o.tag;if(p===5||p===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(p!==4&&(p===27&&Yo(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(Qp(o,c,h),o=o.sibling;o!==null;)Qp(o,c,h),o=o.sibling}function wN(o){var c=o.stateNode,h=o.memoizedProps;try{for(var p=o.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);Er(c,p,h),c[qn]=o,c[dr]=h}catch(E){Bt(o,o.return,E)}}var Fi=!1,Xn=!1,ib=!1,_N=typeof WeakSet=="function"?WeakSet:Set,fr=null;function U9(o,c){if(o=o.containerInfo,jb=yg,o=MS(o),Jx(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var p=h.getSelection&&h.getSelection();if(p&&p.rangeCount!==0){h=p.anchorNode;var b=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var D=0,B=-1,Q=-1,le=0,ge=0,ve=o,ce=null;t:for(;;){for(var he;ve!==h||b!==0&&ve.nodeType!==3||(B=D+b),ve!==E||p!==0&&ve.nodeType!==3||(Q=D+p),ve.nodeType===3&&(D+=ve.nodeValue.length),(he=ve.firstChild)!==null;)ce=ve,ve=he;for(;;){if(ve===o)break t;if(ce===h&&++le===b&&(B=D),ce===E&&++ge===p&&(Q=D),(he=ve.nextSibling)!==null)break;ve=ce,ce=ve.parentNode}ve=he}h=B===-1||Q===-1?null:{start:B,end:Q}}else h=null}h=h||{start:0,end:0}}else h=null;for(Tb={focusedElem:o,selectionRange:h},yg=!1,fr=c;fr!==null;)if(c=fr,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,fr=o;else for(;fr!==null;){switch(c=fr,E=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)b=o[h],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&E!==null){o=void 0,h=c,b=E.memoizedProps,E=E.memoizedState,p=h.stateNode;try{var Oe=cc(h.type,b);o=p.getSnapshotBeforeUpdate(Oe,E),p.__reactInternalSnapshotBeforeUpdate=o}catch(qe){Bt(h,h.return,qe)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,h=o.nodeType,h===9)Ab(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Ab(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=c.sibling,o!==null){o.return=c.return,fr=o;break}fr=c.return}}function EN(o,c,h){var p=h.flags;switch(h.tag){case 0:case 11:case 15:zi(o,h),p&4&&Bh(5,h);break;case 1:if(zi(o,h),p&4)if(o=h.stateNode,c===null)try{o.componentDidMount()}catch(D){Bt(h,h.return,D)}else{var b=cc(h.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(b,c,o.__reactInternalSnapshotBeforeUpdate)}catch(D){Bt(h,h.return,D)}}p&64&&yN(h),p&512&&zh(h,h.return);break;case 3:if(zi(o,h),p&64&&(o=h.updateQueue,o!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{o2(o,c)}catch(D){Bt(h,h.return,D)}}break;case 27:c===null&&p&4&&wN(h);case 26:case 5:zi(o,h),c===null&&p&4&&vN(h),p&512&&zh(h,h.return);break;case 12:zi(o,h);break;case 31:zi(o,h),p&4&&NN(o,h);break;case 13:zi(o,h),p&4&&jN(o,h),p&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=G9.bind(null,h),m8(o,h))));break;case 22:if(p=h.memoizedState!==null||Fi,!p){c=c!==null&&c.memoizedState!==null||Xn,b=Fi;var E=Xn;Fi=p,(Xn=c)&&!E?Hi(o,h,(h.subtreeFlags&8772)!==0):zi(o,h),Fi=b,Xn=E}break;case 30:break;default:zi(o,h)}}function CN(o){var c=o.alternate;c!==null&&(o.alternate=null,CN(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&su(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var gn=null,Xr=!1;function Bi(o,c,h){for(h=h.child;h!==null;)SN(o,c,h),h=h.sibling}function SN(o,c,h){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Hn,h)}catch{}switch(h.tag){case 26:Xn||Ga(h,c),Bi(o,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Xn||Ga(h,c);var p=gn,b=Xr;Yo(h.type)&&(gn=h.stateNode,Xr=!1),Bi(o,c,h),Xh(h.stateNode),gn=p,Xr=b;break;case 5:Xn||Ga(h,c);case 6:if(p=gn,b=Xr,gn=null,Bi(o,c,h),gn=p,Xr=b,gn!==null)if(Xr)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(h.stateNode)}catch(E){Bt(h,c,E)}else try{gn.removeChild(h.stateNode)}catch(E){Bt(h,c,E)}break;case 18:gn!==null&&(Xr?(o=gn,yj(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),zu(o)):yj(gn,h.stateNode));break;case 4:p=gn,b=Xr,gn=h.stateNode.containerInfo,Xr=!0,Bi(o,c,h),gn=p,Xr=b;break;case 0:case 11:case 14:case 15:Uo(2,h,c),Xn||Uo(4,h,c),Bi(o,c,h);break;case 1:Xn||(Ga(h,c),p=h.stateNode,typeof p.componentWillUnmount=="function"&&xN(h,c,p)),Bi(o,c,h);break;case 21:Bi(o,c,h);break;case 22:Xn=(p=Xn)||h.memoizedState!==null,Bi(o,c,h),Xn=p;break;default:Bi(o,c,h)}}function NN(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{zu(o)}catch(h){Bt(c,c.return,h)}}}function jN(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{zu(o)}catch(h){Bt(c,c.return,h)}}function F9(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new _N),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new _N),c;default:throw Error(r(435,o.tag))}}function Xp(o,c){var h=F9(o);c.forEach(function(p){if(!h.has(p)){h.add(p);var b=K9.bind(null,o,p);p.then(b,b)}})}function Zr(o,c){var h=c.deletions;if(h!==null)for(var p=0;p<h.length;p++){var b=h[p],E=o,D=c,B=D;e:for(;B!==null;){switch(B.tag){case 27:if(Yo(B.type)){gn=B.stateNode,Xr=!1;break e}break;case 5:gn=B.stateNode,Xr=!1;break e;case 3:case 4:gn=B.stateNode.containerInfo,Xr=!0;break e}B=B.return}if(gn===null)throw Error(r(160));SN(E,D,b),gn=null,Xr=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)TN(c,o),c=c.sibling}var xa=null;function TN(o,c){var h=o.alternate,p=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Zr(c,o),Jr(o),p&4&&(Uo(3,o,o.return),Bh(3,o),Uo(5,o,o.return));break;case 1:Zr(c,o),Jr(o),p&512&&(Xn||h===null||Ga(h,h.return)),p&64&&Fi&&(o=o.updateQueue,o!==null&&(p=o.callbacks,p!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?p:h.concat(p))));break;case 26:var b=xa;if(Zr(c,o),Jr(o),p&512&&(Xn||h===null||Ga(h,h.return)),p&4){var E=h!==null?h.memoizedState:null;if(p=o.memoizedState,h===null)if(p===null)if(o.stateNode===null){e:{p=o.type,h=o.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":E=b.getElementsByTagName("title")[0],(!E||E[Ma]||E[qn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(p),b.head.insertBefore(E,b.querySelector("head > title"))),Er(E,p,h),E[qn]=o,Yn(E),p=E;break e;case"link":var D=Tj("link","href",b).get(p+(h.href||""));if(D){for(var B=0;B<D.length;B++)if(E=D[B],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){D.splice(B,1);break t}}E=b.createElement(p),Er(E,p,h),b.head.appendChild(E);break;case"meta":if(D=Tj("meta","content",b).get(p+(h.content||""))){for(B=0;B<D.length;B++)if(E=D[B],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){D.splice(B,1);break t}}E=b.createElement(p),Er(E,p,h),b.head.appendChild(E);break;default:throw Error(r(468,p))}E[qn]=o,Yn(E),p=E}o.stateNode=p}else kj(b,o.type,o.stateNode);else o.stateNode=jj(b,p,o.memoizedProps);else E!==p?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,p===null?kj(b,o.type,o.stateNode):jj(b,p,o.memoizedProps)):p===null&&o.stateNode!==null&&rb(o,o.memoizedProps,h.memoizedProps)}break;case 27:Zr(c,o),Jr(o),p&512&&(Xn||h===null||Ga(h,h.return)),h!==null&&p&4&&rb(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Zr(c,o),Jr(o),p&512&&(Xn||h===null||Ga(h,h.return)),o.flags&32){b=o.stateNode;try{Qr(b,"")}catch(Oe){Bt(o,o.return,Oe)}}p&4&&o.stateNode!=null&&(b=o.memoizedProps,rb(o,b,h!==null?h.memoizedProps:b)),p&1024&&(ib=!0);break;case 6:if(Zr(c,o),Jr(o),p&4){if(o.stateNode===null)throw Error(r(162));p=o.memoizedProps,h=o.stateNode;try{h.nodeValue=p}catch(Oe){Bt(o,o.return,Oe)}}break;case 3:if(fg=null,b=xa,xa=dg(c.containerInfo),Zr(c,o),xa=b,Jr(o),p&4&&h!==null&&h.memoizedState.isDehydrated)try{zu(c.containerInfo)}catch(Oe){Bt(o,o.return,Oe)}ib&&(ib=!1,kN(o));break;case 4:p=xa,xa=dg(o.stateNode.containerInfo),Zr(c,o),Jr(o),xa=p;break;case 12:Zr(c,o),Jr(o);break;case 31:Zr(c,o),Jr(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Xp(o,p)));break;case 13:Zr(c,o),Jr(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Jp=_n()),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Xp(o,p)));break;case 22:b=o.memoizedState!==null;var Q=h!==null&&h.memoizedState!==null,le=Fi,ge=Xn;if(Fi=le||b,Xn=ge||Q,Zr(c,o),Xn=ge,Fi=le,Jr(o),p&8192)e:for(c=o.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(h===null||Q||Fi||Xn||uc(o)),h=null,c=o;;){if(c.tag===5||c.tag===26){if(h===null){Q=h=c;try{if(E=Q.stateNode,b)D=E.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{B=Q.stateNode;var ve=Q.memoizedProps.style,ce=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;B.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Oe){Bt(Q,Q.return,Oe)}}}else if(c.tag===6){if(h===null){Q=c;try{Q.stateNode.nodeValue=b?"":Q.memoizedProps}catch(Oe){Bt(Q,Q.return,Oe)}}}else if(c.tag===18){if(h===null){Q=c;try{var he=Q.stateNode;b?xj(he,!0):xj(Q.stateNode,!1)}catch(Oe){Bt(Q,Q.return,Oe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=o.updateQueue,p!==null&&(h=p.retryQueue,h!==null&&(p.retryQueue=null,Xp(o,h))));break;case 19:Zr(c,o),Jr(o),p&4&&(p=o.updateQueue,p!==null&&(o.updateQueue=null,Xp(o,p)));break;case 30:break;case 21:break;default:Zr(c,o),Jr(o)}}function Jr(o){var c=o.flags;if(c&2){try{for(var h,p=o.return;p!==null;){if(bN(p)){h=p;break}p=p.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var b=h.stateNode,E=sb(o);Qp(o,E,b);break;case 5:var D=h.stateNode;h.flags&32&&(Qr(D,""),h.flags&=-33);var B=sb(o);Qp(o,B,D);break;case 3:case 4:var Q=h.stateNode.containerInfo,le=sb(o);ab(o,le,Q);break;default:throw Error(r(161))}}catch(ge){Bt(o,o.return,ge)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function kN(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;kN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function zi(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)EN(o,c.alternate,c),c=c.sibling}function uc(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Uo(4,c,c.return),uc(c);break;case 1:Ga(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&xN(c,c.return,h),uc(c);break;case 27:Xh(c.stateNode);case 26:case 5:Ga(c,c.return),uc(c);break;case 22:c.memoizedState===null&&uc(c);break;case 30:uc(c);break;default:uc(c)}o=o.sibling}}function Hi(o,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,b=o,E=c,D=E.flags;switch(E.tag){case 0:case 11:case 15:Hi(b,E,h),Bh(4,E);break;case 1:if(Hi(b,E,h),p=E,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(le){Bt(p,p.return,le)}if(p=E,b=p.updateQueue,b!==null){var B=p.stateNode;try{var Q=b.shared.hiddenCallbacks;if(Q!==null)for(b.shared.hiddenCallbacks=null,b=0;b<Q.length;b++)i2(Q[b],B)}catch(le){Bt(p,p.return,le)}}h&&D&64&&yN(E),zh(E,E.return);break;case 27:wN(E);case 26:case 5:Hi(b,E,h),h&&p===null&&D&4&&vN(E),zh(E,E.return);break;case 12:Hi(b,E,h);break;case 31:Hi(b,E,h),h&&D&4&&NN(b,E);break;case 13:Hi(b,E,h),h&&D&4&&jN(b,E);break;case 22:E.memoizedState===null&&Hi(b,E,h),zh(E,E.return);break;case 30:break;default:Hi(b,E,h)}c=c.sibling}}function ob(o,c){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Th(h))}function lb(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Th(o))}function va(o,c,h,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)DN(o,c,h,p),c=c.sibling}function DN(o,c,h,p){var b=c.flags;switch(c.tag){case 0:case 11:case 15:va(o,c,h,p),b&2048&&Bh(9,c);break;case 1:va(o,c,h,p);break;case 3:va(o,c,h,p),b&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Th(o)));break;case 12:if(b&2048){va(o,c,h,p),o=c.stateNode;try{var E=c.memoizedProps,D=E.id,B=E.onPostCommit;typeof B=="function"&&B(D,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Q){Bt(c,c.return,Q)}}else va(o,c,h,p);break;case 31:va(o,c,h,p);break;case 13:va(o,c,h,p);break;case 23:break;case 22:E=c.stateNode,D=c.alternate,c.memoizedState!==null?E._visibility&2?va(o,c,h,p):Hh(o,c):E._visibility&2?va(o,c,h,p):(E._visibility|=2,Au(o,c,h,p,(c.subtreeFlags&10256)!==0||!1)),b&2048&&ob(D,c);break;case 24:va(o,c,h,p),b&2048&&lb(c.alternate,c);break;default:va(o,c,h,p)}}function Au(o,c,h,p,b){for(b=b&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var E=o,D=c,B=h,Q=p,le=D.flags;switch(D.tag){case 0:case 11:case 15:Au(E,D,B,Q,b),Bh(8,D);break;case 23:break;case 22:var ge=D.stateNode;D.memoizedState!==null?ge._visibility&2?Au(E,D,B,Q,b):Hh(E,D):(ge._visibility|=2,Au(E,D,B,Q,b)),b&&le&2048&&ob(D.alternate,D);break;case 24:Au(E,D,B,Q,b),b&&le&2048&&lb(D.alternate,D);break;default:Au(E,D,B,Q,b)}c=c.sibling}}function Hh(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=o,p=c,b=p.flags;switch(p.tag){case 22:Hh(h,p),b&2048&&ob(p.alternate,p);break;case 24:Hh(h,p),b&2048&&lb(p.alternate,p);break;default:Hh(h,p)}c=c.sibling}}var $h=8192;function Ru(o,c,h){if(o.subtreeFlags&$h)for(o=o.child;o!==null;)AN(o,c,h),o=o.sibling}function AN(o,c,h){switch(o.tag){case 26:Ru(o,c,h),o.flags&$h&&o.memoizedState!==null&&N8(h,xa,o.memoizedState,o.memoizedProps);break;case 5:Ru(o,c,h);break;case 3:case 4:var p=xa;xa=dg(o.stateNode.containerInfo),Ru(o,c,h),xa=p;break;case 22:o.memoizedState===null&&(p=o.alternate,p!==null&&p.memoizedState!==null?(p=$h,$h=16777216,Ru(o,c,h),$h=p):Ru(o,c,h));break;default:Ru(o,c,h)}}function RN(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function qh(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];fr=p,MN(p,o)}RN(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)PN(o),o=o.sibling}function PN(o){switch(o.tag){case 0:case 11:case 15:qh(o),o.flags&2048&&Uo(9,o,o.return);break;case 3:qh(o);break;case 12:qh(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Zp(o)):qh(o);break;default:qh(o)}}function Zp(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var p=c[h];fr=p,MN(p,o)}RN(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Uo(8,c,c.return),Zp(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Zp(c));break;default:Zp(c)}o=o.sibling}}function MN(o,c){for(;fr!==null;){var h=fr;switch(h.tag){case 0:case 11:case 15:Uo(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var p=h.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Th(h.memoizedState.cache)}if(p=h.child,p!==null)p.return=h,fr=p;else e:for(h=o;fr!==null;){p=fr;var b=p.sibling,E=p.return;if(CN(p),p===h){fr=null;break e}if(b!==null){b.return=E,fr=b;break e}fr=E}}}var B9={getCacheForType:function(o){var c=wr(Gn),h=c.data.get(o);return h===void 0&&(h=o(),c.data.set(o,h)),h},cacheSignal:function(){return wr(Gn).controller.signal}},z9=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Jt=null,ft=null,gt=0,Ft=0,vs=null,Fo=!1,Pu=!1,cb=!1,$i=0,Sn=0,Bo=0,dc=0,ub=0,bs=0,Mu=0,Yh=null,es=null,db=!1,Jp=0,LN=0,eg=1/0,tg=null,zo=null,rr=0,Ho=null,Lu=null,qi=0,hb=0,fb=null,ON=null,Wh=0,mb=null;function ws(){return(Mt&2)!==0&&gt!==0?gt&-gt:z.T!==null?bb():np()}function IN(){if(bs===0)if((gt&536870912)===0||wt){var o=Xt;Xt<<=1,(Xt&3932160)===0&&(Xt=262144),bs=o}else bs=536870912;return o=ys.current,o!==null&&(o.flags|=32),bs}function ts(o,c,h){(o===Jt&&(Ft===2||Ft===9)||o.cancelPendingCommit!==null)&&(Ou(o,0),$o(o,gt,bs,!1)),Ar(o,h),((Mt&2)===0||o!==Jt)&&(o===Jt&&((Mt&2)===0&&(dc|=h),Sn===4&&$o(o,gt,bs,!1)),Ka(o))}function VN(o,c,h){if((Mt&6)!==0)throw Error(r(327));var p=!h&&(c&127)===0&&(c&o.expiredLanes)===0||$n(o,c),b=p?q9(o,c):gb(o,c,!0),E=p;do{if(b===0){Pu&&!p&&$o(o,c,0,!1);break}else{if(h=o.current.alternate,E&&!H9(h)){b=gb(o,c,!1),E=!1;continue}if(b===2){if(E=c,o.errorRecoveryDisabledLanes&E)var D=0;else D=o.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){c=D;e:{var B=o;b=Yh;var Q=B.current.memoizedState.isDehydrated;if(Q&&(Ou(B,D).flags|=256),D=gb(B,D,!1),D!==2){if(cb&&!Q){B.errorRecoveryDisabledLanes|=E,dc|=E,b=4;break e}E=es,es=b,E!==null&&(es===null?es=E:es.push.apply(es,E))}b=D}if(E=!1,b!==2)continue}}if(b===1){Ou(o,0),$o(o,c,0,!0);break}e:{switch(p=o,E=b,E){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:$o(p,c,bs,!Fo);break e;case 2:es=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(b=Jp+300-_n(),10<b)){if($o(p,c,bs,!Fo),Pn(p,0,!0)!==0)break e;qi=c,p.timeoutHandle=pj(UN.bind(null,p,h,es,tg,db,c,bs,dc,Mu,Fo,E,"Throttled",-0,0),b);break e}UN(p,h,es,tg,db,c,bs,dc,Mu,Fo,E,null,-0,0)}}break}while(!0);Ka(o)}function UN(o,c,h,p,b,E,D,B,Q,le,ge,ve,ce,he){if(o.timeoutHandle=-1,ve=c.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ha},AN(c,E,ve);var Oe=(E&62914560)===E?Jp-_n():(E&4194048)===E?LN-_n():0;if(Oe=j8(ve,Oe),Oe!==null){qi=E,o.cancelPendingCommit=Oe(WN.bind(null,o,c,E,h,p,b,D,B,Q,ge,ve,null,ce,he)),$o(o,E,D,!le);return}}WN(o,c,E,h,p,b,D,B,Q)}function H9(o){for(var c=o;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var p=0;p<h.length;p++){var b=h[p],E=b.getSnapshot;b=b.value;try{if(!ps(E(),b))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function $o(o,c,h,p){c&=~ub,c&=~dc,o.suspendedLanes|=c,o.pingedLanes&=~c,p&&(o.warmLanes|=c),p=o.expirationTimes;for(var b=c;0<b;){var E=31-tn(b),D=1<<E;p[E]=-1,b&=~D}h!==0&&Ye(o,h,c)}function ng(){return(Mt&6)===0?(Gh(0),!1):!0}function pb(){if(ft!==null){if(Ft===0)var o=ft.return;else o=ft,Mi=nc=null,Av(o),Nu=null,Dh=0,o=ft;for(;o!==null;)gN(o.alternate,o),o=o.return;ft=null}}function Ou(o,c){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,c8(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),qi=0,pb(),Jt=o,ft=h=Ri(o.current,null),gt=c,Ft=0,vs=null,Fo=!1,Pu=$n(o,c),cb=!1,Mu=bs=ub=dc=Bo=Sn=0,es=Yh=null,db=!1,(c&8)!==0&&(c|=c&32);var p=o.entangledLanes;if(p!==0)for(o=o.entanglements,p&=c;0<p;){var b=31-tn(p),E=1<<b;c|=o[b],p&=~E}return $i=c,Ep(),h}function FN(o,c){it=null,z.H=Vh,c===Su||c===Ap?(c=n2(),Ft=3):c===vv?(c=n2(),Ft=4):Ft=c===Wv?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,vs=c,ft===null&&(Sn=1,qp(o,Vs(c,o.current)))}function BN(){var o=ys.current;return o===null?!0:(gt&4194048)===gt?zs===null:(gt&62914560)===gt||(gt&536870912)!==0?o===zs:!1}function zN(){var o=z.H;return z.H=Vh,o===null?Vh:o}function HN(){var o=z.A;return z.A=B9,o}function rg(){Sn=4,Fo||(gt&4194048)!==gt&&ys.current!==null||(Pu=!0),(Bo&134217727)===0&&(dc&134217727)===0||Jt===null||$o(Jt,gt,bs,!1)}function gb(o,c,h){var p=Mt;Mt|=2;var b=zN(),E=HN();(Jt!==o||gt!==c)&&(tg=null,Ou(o,c)),c=!1;var D=Sn;e:do try{if(Ft!==0&&ft!==null){var B=ft,Q=vs;switch(Ft){case 8:pb(),D=6;break e;case 3:case 2:case 9:case 6:ys.current===null&&(c=!0);var le=Ft;if(Ft=0,vs=null,Iu(o,B,Q,le),h&&Pu){D=0;break e}break;default:le=Ft,Ft=0,vs=null,Iu(o,B,Q,le)}}$9(),D=Sn;break}catch(ge){FN(o,ge)}while(!0);return c&&o.shellSuspendCounter++,Mi=nc=null,Mt=p,z.H=b,z.A=E,ft===null&&(Jt=null,gt=0,Ep()),D}function $9(){for(;ft!==null;)$N(ft)}function q9(o,c){var h=Mt;Mt|=2;var p=zN(),b=HN();Jt!==o||gt!==c?(tg=null,eg=_n()+500,Ou(o,c)):Pu=$n(o,c);e:do try{if(Ft!==0&&ft!==null){c=ft;var E=vs;t:switch(Ft){case 1:Ft=0,vs=null,Iu(o,c,E,1);break;case 2:case 9:if(e2(E)){Ft=0,vs=null,qN(c);break}c=function(){Ft!==2&&Ft!==9||Jt!==o||(Ft=7),Ka(o)},E.then(c,c);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:e2(E)?(Ft=0,vs=null,qN(c)):(Ft=0,vs=null,Iu(o,c,E,7));break;case 5:var D=null;switch(ft.tag){case 26:D=ft.memoizedState;case 5:case 27:var B=ft;if(D?Dj(D):B.stateNode.complete){Ft=0,vs=null;var Q=B.sibling;if(Q!==null)ft=Q;else{var le=B.return;le!==null?(ft=le,sg(le)):ft=null}break t}}Ft=0,vs=null,Iu(o,c,E,5);break;case 6:Ft=0,vs=null,Iu(o,c,E,6);break;case 8:pb(),Sn=6;break e;default:throw Error(r(462))}}Y9();break}catch(ge){FN(o,ge)}while(!0);return Mi=nc=null,z.H=p,z.A=b,Mt=h,ft!==null?0:(Jt=null,gt=0,Ep(),Sn)}function Y9(){for(;ft!==null&&!us();)$N(ft)}function $N(o){var c=mN(o.alternate,o,$i);o.memoizedProps=o.pendingProps,c===null?sg(o):ft=c}function qN(o){var c=o,h=c.alternate;switch(c.tag){case 15:case 0:c=lN(h,c,c.pendingProps,c.type,void 0,gt);break;case 11:c=lN(h,c,c.pendingProps,c.type.render,c.ref,gt);break;case 5:Av(c);default:gN(h,c),c=ft=HS(c,$i),c=mN(h,c,$i)}o.memoizedProps=o.pendingProps,c===null?sg(o):ft=c}function Iu(o,c,h,p){Mi=nc=null,Av(c),Nu=null,Dh=0;var b=c.return;try{if(M9(o,b,c,h,gt)){Sn=1,qp(o,Vs(h,o.current)),ft=null;return}}catch(E){if(b!==null)throw ft=b,E;Sn=1,qp(o,Vs(h,o.current)),ft=null;return}c.flags&32768?(wt||p===1?o=!0:Pu||(gt&536870912)!==0?o=!1:(Fo=o=!0,(p===2||p===9||p===3||p===6)&&(p=ys.current,p!==null&&p.tag===13&&(p.flags|=16384))),YN(c,o)):sg(c)}function sg(o){var c=o;do{if((c.flags&32768)!==0){YN(c,Fo);return}o=c.return;var h=I9(c.alternate,c,$i);if(h!==null){ft=h;return}if(c=c.sibling,c!==null){ft=c;return}ft=c=o}while(c!==null);Sn===0&&(Sn=5)}function YN(o,c){do{var h=V9(o.alternate,o);if(h!==null){h.flags&=32767,ft=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(o=o.sibling,o!==null)){ft=o;return}ft=o=h}while(o!==null);Sn=6,ft=null}function WN(o,c,h,p,b,E,D,B,Q){o.cancelPendingCommit=null;do ag();while(rr!==0);if((Mt&6)!==0)throw Error(r(327));if(c!==null){if(c===o.current)throw Error(r(177));if(E=c.lanes|c.childLanes,E|=sv,ji(o,h,E,D,B,Q),o===Jt&&(ft=Jt=null,gt=0),Lu=c,Ho=o,qi=h,hb=E,fb=b,ON=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Q9(Gr,function(){return ZN(),null})):(o.callbackNode=null,o.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=z.T,z.T=null,b=q.p,q.p=2,D=Mt,Mt|=4;try{U9(o,c,h)}finally{Mt=D,q.p=b,z.T=p}}rr=1,GN(),KN(),QN()}}function GN(){if(rr===1){rr=0;var o=Ho,c=Lu,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=z.T,z.T=null;var p=q.p;q.p=2;var b=Mt;Mt|=4;try{TN(c,o);var E=Tb,D=MS(o.containerInfo),B=E.focusedElem,Q=E.selectionRange;if(D!==B&&B&&B.ownerDocument&&PS(B.ownerDocument.documentElement,B)){if(Q!==null&&Jx(B)){var le=Q.start,ge=Q.end;if(ge===void 0&&(ge=le),"selectionStart"in B)B.selectionStart=le,B.selectionEnd=Math.min(ge,B.value.length);else{var ve=B.ownerDocument||document,ce=ve&&ve.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),Oe=B.textContent.length,qe=Math.min(Q.start,Oe),Kt=Q.end===void 0?qe:Math.min(Q.end,Oe);!he.extend&&qe>Kt&&(D=Kt,Kt=qe,qe=D);var re=RS(B,qe),ee=RS(B,Kt);if(re&&ee&&(he.rangeCount!==1||he.anchorNode!==re.node||he.anchorOffset!==re.offset||he.focusNode!==ee.node||he.focusOffset!==ee.offset)){var oe=ve.createRange();oe.setStart(re.node,re.offset),he.removeAllRanges(),qe>Kt?(he.addRange(oe),he.extend(ee.node,ee.offset)):(oe.setEnd(ee.node,ee.offset),he.addRange(oe))}}}}for(ve=[],he=B;he=he.parentNode;)he.nodeType===1&&ve.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<ve.length;B++){var ye=ve[B];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}yg=!!jb,Tb=jb=null}finally{Mt=b,q.p=p,z.T=h}}o.current=c,rr=2}}function KN(){if(rr===2){rr=0;var o=Ho,c=Lu,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=z.T,z.T=null;var p=q.p;q.p=2;var b=Mt;Mt|=4;try{EN(o,c.alternate,c)}finally{Mt=b,q.p=p,z.T=h}}rr=3}}function QN(){if(rr===4||rr===3){rr=0,Wr();var o=Ho,c=Lu,h=qi,p=ON;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?rr=5:(rr=0,Lu=Ho=null,XN(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(zo=null),Ti(h),c=c.stateNode,En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Hn,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=z.T,b=q.p,q.p=2,z.T=null;try{for(var E=o.onRecoverableError,D=0;D<p.length;D++){var B=p[D];E(B.value,{componentStack:B.stack})}}finally{z.T=c,q.p=b}}(qi&3)!==0&&ag(),Ka(o),b=o.pendingLanes,(h&261930)!==0&&(b&42)!==0?o===mb?Wh++:(Wh=0,mb=o):Wh=0,Gh(0)}}function XN(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Th(c)))}function ag(){return GN(),KN(),QN(),ZN()}function ZN(){if(rr!==5)return!1;var o=Ho,c=hb;hb=0;var h=Ti(qi),p=z.T,b=q.p;try{q.p=32>h?32:h,z.T=null,h=fb,fb=null;var E=Ho,D=qi;if(rr=0,Lu=Ho=null,qi=0,(Mt&6)!==0)throw Error(r(331));var B=Mt;if(Mt|=4,PN(E.current),DN(E,E.current,D,h),Mt=B,Gh(0,!1),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Hn,E)}catch{}return!0}finally{q.p=b,z.T=p,XN(o,c)}}function JN(o,c,h){c=Vs(h,c),c=Yv(o.stateNode,c,2),o=Oo(o,c,2),o!==null&&(Ar(o,2),Ka(o))}function Bt(o,c,h){if(o.tag===3)JN(o,o,h);else for(;c!==null;){if(c.tag===3){JN(c,o,h);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(zo===null||!zo.has(p))){o=Vs(h,o),h=eN(2),p=Oo(c,h,2),p!==null&&(tN(h,p,c,o),Ar(p,2),Ka(p));break}}c=c.return}}function yb(o,c,h){var p=o.pingCache;if(p===null){p=o.pingCache=new z9;var b=new Set;p.set(c,b)}else b=p.get(c),b===void 0&&(b=new Set,p.set(c,b));b.has(h)||(cb=!0,b.add(h),o=W9.bind(null,o,c,h),c.then(o,o))}function W9(o,c,h){var p=o.pingCache;p!==null&&p.delete(c),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Jt===o&&(gt&h)===h&&(Sn===4||Sn===3&&(gt&62914560)===gt&&300>_n()-Jp?(Mt&2)===0&&Ou(o,0):ub|=h,Mu===gt&&(Mu=0)),Ka(o)}function ej(o,c){c===0&&(c=hs()),o=Jl(o,c),o!==null&&(Ar(o,c),Ka(o))}function G9(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),ej(o,h)}function K9(o,c){var h=0;switch(o.tag){case 31:case 13:var p=o.stateNode,b=o.memoizedState;b!==null&&(h=b.retryLane);break;case 19:p=o.stateNode;break;case 22:p=o.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(c),ej(o,h)}function Q9(o,c){return en(o,c)}var ig=null,Vu=null,xb=!1,og=!1,vb=!1,qo=0;function Ka(o){o!==Vu&&o.next===null&&(Vu===null?ig=Vu=o:Vu=Vu.next=o),og=!0,xb||(xb=!0,Z9())}function Gh(o,c){if(!vb&&og){vb=!0;do for(var h=!1,p=ig;p!==null;){if(o!==0){var b=p.pendingLanes;if(b===0)var E=0;else{var D=p.suspendedLanes,B=p.pingedLanes;E=(1<<31-tn(42|o)+1)-1,E&=b&~(D&~B),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,sj(p,E))}else E=gt,E=Pn(p,p===Jt?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||$n(p,E)||(h=!0,sj(p,E));p=p.next}while(h);vb=!1}}function X9(){tj()}function tj(){og=xb=!1;var o=0;qo!==0&&l8()&&(o=qo);for(var c=_n(),h=null,p=ig;p!==null;){var b=p.next,E=nj(p,c);E===0?(p.next=null,h===null?ig=b:h.next=b,b===null&&(Vu=h)):(h=p,(o!==0||(E&3)!==0)&&(og=!0)),p=b}rr!==0&&rr!==5||Gh(o),qo!==0&&(qo=0)}function nj(o,c){for(var h=o.suspendedLanes,p=o.pingedLanes,b=o.expirationTimes,E=o.pendingLanes&-62914561;0<E;){var D=31-tn(E),B=1<<D,Q=b[D];Q===-1?((B&h)===0||(B&p)!==0)&&(b[D]=xr(B,c)):Q<=c&&(o.expiredLanes|=B),E&=~B}if(c=Jt,h=gt,h=Pn(o,o===c?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p=o.callbackNode,h===0||o===c&&(Ft===2||Ft===9)||o.cancelPendingCommit!==null)return p!==null&&p!==null&&nr(p),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||$n(o,h)){if(c=h&-h,c===o.callbackPriority)return c;switch(p!==null&&nr(p),Ti(h)){case 2:case 8:h=Rs;break;case 32:h=Gr;break;case 268435456:h=Ni;break;default:h=Gr}return p=rj.bind(null,o),h=en(h,p),o.callbackPriority=c,o.callbackNode=h,c}return p!==null&&p!==null&&nr(p),o.callbackPriority=2,o.callbackNode=null,2}function rj(o,c){if(rr!==0&&rr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(ag()&&o.callbackNode!==h)return null;var p=gt;return p=Pn(o,o===Jt?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),p===0?null:(VN(o,p,c),nj(o,_n()),o.callbackNode!=null&&o.callbackNode===h?rj.bind(null,o):null)}function sj(o,c){if(ag())return null;VN(o,c,!0)}function Z9(){u8(function(){(Mt&6)!==0?en(ds,X9):tj()})}function bb(){if(qo===0){var o=Eu;o===0&&(o=st,st<<=1,(st&261888)===0&&(st=256)),qo=o}return qo}function aj(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:lu(""+o)}function ij(o,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,o.id&&h.setAttribute("form",o.id),c.parentNode.insertBefore(h,c),o=new FormData(o),h.parentNode.removeChild(h),o}function J9(o,c,h,p,b){if(c==="submit"&&h&&h.stateNode===b){var E=aj((b[dr]||null).action),D=p.submitter;D&&(c=(c=D[dr]||null)?aj(c.formAction):D.getAttribute("formAction"),c!==null&&(E=c,D=null));var B=new za("action","action",null,p,b);o.push({event:B,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(qo!==0){var Q=D?ij(b,D):new FormData(b);Fv(h,{pending:!0,data:Q,method:b.method,action:E},null,Q)}}else typeof E=="function"&&(B.preventDefault(),Q=D?ij(b,D):new FormData(b),Fv(h,{pending:!0,data:Q,method:b.method,action:E},E,Q))},currentTarget:b}]})}}for(var wb=0;wb<rv.length;wb++){var _b=rv[wb],e8=_b.toLowerCase(),t8=_b[0].toUpperCase()+_b.slice(1);ya(e8,"on"+t8)}ya(IS,"onAnimationEnd"),ya(VS,"onAnimationIteration"),ya(US,"onAnimationStart"),ya("dblclick","onDoubleClick"),ya("focusin","onFocus"),ya("focusout","onBlur"),ya(y9,"onTransitionRun"),ya(x9,"onTransitionStart"),ya(v9,"onTransitionCancel"),ya(FS,"onTransitionEnd"),Va("onMouseEnter",["mouseout","mouseover"]),Va("onMouseLeave",["mouseout","mouseover"]),Va("onPointerEnter",["pointerout","pointerover"]),Va("onPointerLeave",["pointerout","pointerover"]),Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kh));function oj(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var p=o[h],b=p.event;p=p.listeners;e:{var E=void 0;if(c)for(var D=p.length-1;0<=D;D--){var B=p[D],Q=B.instance,le=B.currentTarget;if(B=B.listener,Q!==E&&b.isPropagationStopped())break e;E=B,b.currentTarget=le;try{E(b)}catch(ge){_p(ge)}b.currentTarget=null,E=Q}else for(D=0;D<p.length;D++){if(B=p[D],Q=B.instance,le=B.currentTarget,B=B.listener,Q!==E&&b.isPropagationStopped())break e;E=B,b.currentTarget=le;try{E(b)}catch(ge){_p(ge)}b.currentTarget=null,E=Q}}}}function mt(o,c){var h=c[ru];h===void 0&&(h=c[ru]=new Set);var p=o+"__bubble";h.has(p)||(lj(c,o,2,!1),h.add(p))}function Eb(o,c,h){var p=0;c&&(p|=4),lj(h,o,p,c)}var lg="_reactListening"+Math.random().toString(36).slice(2);function Cb(o){if(!o[lg]){o[lg]=!0,oh.forEach(function(h){h!=="selectionchange"&&(n8.has(h)||Eb(h,!1,o),Eb(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[lg]||(c[lg]=!0,Eb("selectionchange",!1,c))}}function lj(o,c,h,p){switch(Ij(c)){case 2:var b=D8;break;case 8:b=A8;break;default:b=Ub}h=b.bind(null,c,h,o),b=void 0,!ql||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),p?b!==void 0?o.addEventListener(c,h,{capture:!0,passive:b}):o.addEventListener(c,h,!0):b!==void 0?o.addEventListener(c,h,{passive:b}):o.addEventListener(c,h,!1)}function Sb(o,c,h,p,b){var E=p;if((c&1)===0&&(c&2)===0&&p!==null)e:for(;;){if(p===null)return;var D=p.tag;if(D===3||D===4){var B=p.stateNode.containerInfo;if(B===b)break;if(D===4)for(D=p.return;D!==null;){var Q=D.tag;if((Q===3||Q===4)&&D.stateNode.containerInfo===b)return;D=D.return}for(;B!==null;){if(D=La(B),D===null)return;if(Q=D.tag,Q===5||Q===6||Q===26||Q===27){p=E=D;continue e}B=B.parentNode}}p=p.return}No(function(){var le=E,ge=Ms(h),ve=[];e:{var ce=BS.get(o);if(ce!==void 0){var he=za,Oe=o;switch(o){case"keypress":if(Wl(h)===0)break e;case"keydown":case"keyup":he=vp;break;case"focusin":Oe="focus",he=Kl;break;case"focusout":Oe="blur",he=Kl;break;case"beforeblur":case"afterblur":he=Kl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=bh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=up;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=j;break;case IS:case VS:case US:he=hp;break;case FS:he=Y;break;case"scroll":case"scrollend":he=vh;break;case"wheel":he=de;break;case"copy":case"cut":case"paste":he=fp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Ai;break;case"toggle":case"beforetoggle":he=at}var qe=(c&4)!==0,Kt=!qe&&(o==="scroll"||o==="scrollend"),re=qe?ce!==null?ce+"Capture":null:ce;qe=[];for(var ee=le,oe;ee!==null;){var ye=ee;if(oe=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||oe===null||re===null||(ye=fa(ee,re),ye!=null&&qe.push(Qh(ee,ye,oe))),Kt)break;ee=ee.return}0<qe.length&&(ce=new he(ce,Oe,null,h,ge),ve.push({event:ce,listeners:qe}))}}if((c&7)===0){e:{if(ce=o==="mouseover"||o==="pointerover",he=o==="mouseout"||o==="pointerout",ce&&h!==gh&&(Oe=h.relatedTarget||h.fromElement)&&(La(Oe)||Oe[Pa]))break e;if((he||ce)&&(ce=ge.window===ge?ge:(ce=ge.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(Oe=h.relatedTarget||h.toElement,he=le,Oe=Oe?La(Oe):null,Oe!==null&&(Kt=a(Oe),qe=Oe.tag,Oe!==Kt||qe!==5&&qe!==27&&qe!==6)&&(Oe=null)):(he=null,Oe=le),he!==Oe)){if(qe=bh,ye="onMouseLeave",re="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(qe=Ai,ye="onPointerLeave",re="onPointerEnter",ee="pointer"),Kt=he==null?ce:fs(he),oe=Oe==null?ce:fs(Oe),ce=new qe(ye,ee+"leave",he,h,ge),ce.target=Kt,ce.relatedTarget=oe,ye=null,La(ge)===le&&(qe=new qe(re,ee+"enter",Oe,h,ge),qe.target=oe,qe.relatedTarget=Kt,ye=qe),Kt=ye,he&&Oe)t:{for(qe=r8,re=he,ee=Oe,oe=0,ye=re;ye;ye=qe(ye))oe++;ye=0;for(var Be=ee;Be;Be=qe(Be))ye++;for(;0<oe-ye;)re=qe(re),oe--;for(;0<ye-oe;)ee=qe(ee),ye--;for(;oe--;){if(re===ee||ee!==null&&re===ee.alternate){qe=re;break t}re=qe(re),ee=qe(ee)}qe=null}else qe=null;he!==null&&cj(ve,ce,he,qe,!1),Oe!==null&&Kt!==null&&cj(ve,Kt,Oe,qe,!0)}}e:{if(ce=le?fs(le):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var kt=NS;else if(CS(ce))if(jS)kt=m9;else{kt=h9;var Ve=d9}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&ou(le.elementType)&&(kt=NS):kt=f9;if(kt&&(kt=kt(o,le))){SS(ve,kt,h,ge);break e}Ve&&Ve(o,ce,le),o==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&fh(ce,"number",ce.value)}switch(Ve=le?fs(le):window,o){case"focusin":(CS(Ve)||Ve.contentEditable==="true")&&(pu=Ve,ev=le,Sh=null);break;case"focusout":Sh=ev=pu=null;break;case"mousedown":tv=!0;break;case"contextmenu":case"mouseup":case"dragend":tv=!1,LS(ve,h,ge);break;case"selectionchange":if(g9)break;case"keydown":case"keyup":LS(ve,h,ge)}var ot;if(Pt)e:{switch(o){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else mu?Ql(o,h)&&(yt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(yt="onCompositionStart");yt&&(qa&&h.locale!=="ko"&&(mu||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&mu&&(ot=xh()):(Ba=ge,yh="value"in Ba?Ba.value:Ba.textContent,mu=!0)),Ve=cg(le,yt),0<Ve.length&&(yt=new $a(yt,o,null,h,ge),ve.push({event:yt,listeners:Ve}),ot?yt.data=ot:(ot=fu(h),ot!==null&&(yt.data=ot)))),(ot=Os?o9(o,h):l9(o,h))&&(yt=cg(le,"onBeforeInput"),0<yt.length&&(Ve=new $a("onBeforeInput","beforeinput",null,h,ge),ve.push({event:Ve,listeners:yt}),Ve.data=ot)),J9(ve,o,le,h,ge)}oj(ve,c)})}function Qh(o,c,h){return{instance:o,listener:c,currentTarget:h}}function cg(o,c){for(var h=c+"Capture",p=[];o!==null;){var b=o,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=fa(o,h),b!=null&&p.unshift(Qh(o,b,E)),b=fa(o,c),b!=null&&p.push(Qh(o,b,E))),o.tag===3)return p;o=o.return}return[]}function r8(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function cj(o,c,h,p,b){for(var E=c._reactName,D=[];h!==null&&h!==p;){var B=h,Q=B.alternate,le=B.stateNode;if(B=B.tag,Q!==null&&Q===p)break;B!==5&&B!==26&&B!==27||le===null||(Q=le,b?(le=fa(h,E),le!=null&&D.unshift(Qh(h,le,Q))):b||(le=fa(h,E),le!=null&&D.push(Qh(h,le,Q)))),h=h.return}D.length!==0&&o.push({event:c,listeners:D})}var s8=/\r\n?/g,a8=/\u0000|\uFFFD/g;function uj(o){return(typeof o=="string"?o:""+o).replace(s8,`
`).replace(a8,"")}function dj(o,c){return c=uj(c),uj(o)===c}function Gt(o,c,h,p,b,E){switch(h){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||Qr(o,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&Qr(o,""+p);break;case"className":ms(o,"class",p);break;case"tabIndex":ms(o,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":ms(o,h,p);break;case"style":ph(o,p,E);break;case"data":if(c!=="object"){ms(o,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||h!=="href")){o.removeAttribute(h);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=lu(""+p),o.setAttribute(h,p);break;case"action":case"formAction":if(typeof p=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(c!=="input"&&Gt(o,c,"name",b.name,b,null),Gt(o,c,"formEncType",b.formEncType,b,null),Gt(o,c,"formMethod",b.formMethod,b,null),Gt(o,c,"formTarget",b.formTarget,b,null)):(Gt(o,c,"encType",b.encType,b,null),Gt(o,c,"method",b.method,b,null),Gt(o,c,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){o.removeAttribute(h);break}p=lu(""+p),o.setAttribute(h,p);break;case"onClick":p!=null&&(o.onclick=ha);break;case"onScroll":p!=null&&mt("scroll",o);break;case"onScrollEnd":p!=null&&mt("scrollend",o);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(h=p.__html,h!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"multiple":o.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":o.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){o.removeAttribute("xlink:href");break}h=lu(""+p),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""+p):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":p===!0?o.setAttribute(h,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?o.setAttribute(h,p):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?o.setAttribute(h,p):o.removeAttribute(h);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?o.removeAttribute(h):o.setAttribute(h,p);break;case"popover":mt("beforetoggle",o),mt("toggle",o),au(o,"popover",p);break;case"xlinkActuate":Wn(o,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Wn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Wn(o,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Wn(o,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Wn(o,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Wn(o,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Wn(o,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":au(o,"is",p);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=cp.get(h)||h,au(o,h,p))}}function Nb(o,c,h,p,b,E){switch(h){case"style":ph(o,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(h=p.__html,h!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"children":typeof p=="string"?Qr(o,p):(typeof p=="number"||typeof p=="bigint")&&Qr(o,""+p);break;case"onScroll":p!=null&&mt("scroll",o);break;case"onScrollEnd":p!=null&&mt("scrollend",o);break;case"onClick":p!=null&&(o.onclick=ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lh.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),c=h.slice(2,b?h.length-7:void 0),E=o[dr]||null,E=E!=null?E[h]:null,typeof E=="function"&&o.removeEventListener(c,E,b),typeof p=="function")){typeof E!="function"&&E!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(c,p,b);break e}h in o?o[h]=p:p===!0?o.setAttribute(h,""):au(o,h,p)}}}function Er(o,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":mt("error",o),mt("load",o);var p=!1,b=!1,E;for(E in h)if(h.hasOwnProperty(E)){var D=h[E];if(D!=null)switch(E){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Gt(o,c,E,D,h,null)}}b&&Gt(o,c,"srcSet",h.srcSet,h,null),p&&Gt(o,c,"src",h.src,h,null);return;case"input":mt("invalid",o);var B=E=D=b=null,Q=null,le=null;for(p in h)if(h.hasOwnProperty(p)){var ge=h[p];if(ge!=null)switch(p){case"name":b=ge;break;case"type":D=ge;break;case"checked":Q=ge;break;case"defaultChecked":le=ge;break;case"value":E=ge;break;case"defaultValue":B=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,c));break;default:Gt(o,c,p,ge,h,null)}}ip(o,E,B,Q,le,D,b,!1);return;case"select":mt("invalid",o),p=D=E=null;for(b in h)if(h.hasOwnProperty(b)&&(B=h[b],B!=null))switch(b){case"value":E=B;break;case"defaultValue":D=B;break;case"multiple":p=B;default:Gt(o,c,b,B,h,null)}c=E,h=D,o.multiple=!!p,c!=null?_o(o,!!p,c,!1):h!=null&&_o(o,!!p,h,!0);return;case"textarea":mt("invalid",o),E=b=p=null;for(D in h)if(h.hasOwnProperty(D)&&(B=h[D],B!=null))switch(D){case"value":p=B;break;case"defaultValue":b=B;break;case"children":E=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Gt(o,c,D,B,h,null)}Eo(o,p,b,E);return;case"option":for(Q in h)if(h.hasOwnProperty(Q)&&(p=h[Q],p!=null))switch(Q){case"selected":o.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Gt(o,c,Q,p,h,null)}return;case"dialog":mt("beforetoggle",o),mt("toggle",o),mt("cancel",o),mt("close",o);break;case"iframe":case"object":mt("load",o);break;case"video":case"audio":for(p=0;p<Kh.length;p++)mt(Kh[p],o);break;case"image":mt("error",o),mt("load",o);break;case"details":mt("toggle",o);break;case"embed":case"source":case"link":mt("error",o),mt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in h)if(h.hasOwnProperty(le)&&(p=h[le],p!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Gt(o,c,le,p,h,null)}return;default:if(ou(c)){for(ge in h)h.hasOwnProperty(ge)&&(p=h[ge],p!==void 0&&Nb(o,c,ge,p,h,void 0));return}}for(B in h)h.hasOwnProperty(B)&&(p=h[B],p!=null&&Gt(o,c,B,p,h,null))}function i8(o,c,h,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,D=null,B=null,Q=null,le=null,ge=null;for(he in h){var ve=h[he];if(h.hasOwnProperty(he)&&ve!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":Q=ve;default:p.hasOwnProperty(he)||Gt(o,c,he,null,p,ve)}}for(var ce in p){var he=p[ce];if(ve=h[ce],p.hasOwnProperty(ce)&&(he!=null||ve!=null))switch(ce){case"type":E=he;break;case"name":b=he;break;case"checked":le=he;break;case"defaultChecked":ge=he;break;case"value":D=he;break;case"defaultValue":B=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,c));break;default:he!==ve&&Gt(o,c,ce,he,p,ve)}}iu(o,D,B,Q,le,ge,E,b);return;case"select":he=D=B=ce=null;for(E in h)if(Q=h[E],h.hasOwnProperty(E)&&Q!=null)switch(E){case"value":break;case"multiple":he=Q;default:p.hasOwnProperty(E)||Gt(o,c,E,null,p,Q)}for(b in p)if(E=p[b],Q=h[b],p.hasOwnProperty(b)&&(E!=null||Q!=null))switch(b){case"value":ce=E;break;case"defaultValue":B=E;break;case"multiple":D=E;default:E!==Q&&Gt(o,c,b,E,p,Q)}c=B,h=D,p=he,ce!=null?_o(o,!!h,ce,!1):!!p!=!!h&&(c!=null?_o(o,!!h,c,!0):_o(o,!!h,h?[]:"",!1));return;case"textarea":he=ce=null;for(B in h)if(b=h[B],h.hasOwnProperty(B)&&b!=null&&!p.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Gt(o,c,B,null,p,b)}for(D in p)if(b=p[D],E=h[D],p.hasOwnProperty(D)&&(b!=null||E!=null))switch(D){case"value":ce=b;break;case"defaultValue":he=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==E&&Gt(o,c,D,b,p,E)}op(o,ce,he);return;case"option":for(var Oe in h)if(ce=h[Oe],h.hasOwnProperty(Oe)&&ce!=null&&!p.hasOwnProperty(Oe))switch(Oe){case"selected":o.selected=!1;break;default:Gt(o,c,Oe,null,p,ce)}for(Q in p)if(ce=p[Q],he=h[Q],p.hasOwnProperty(Q)&&ce!==he&&(ce!=null||he!=null))switch(Q){case"selected":o.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Gt(o,c,Q,ce,p,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in h)ce=h[qe],h.hasOwnProperty(qe)&&ce!=null&&!p.hasOwnProperty(qe)&&Gt(o,c,qe,null,p,ce);for(le in p)if(ce=p[le],he=h[le],p.hasOwnProperty(le)&&ce!==he&&(ce!=null||he!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,c));break;default:Gt(o,c,le,ce,p,he)}return;default:if(ou(c)){for(var Kt in h)ce=h[Kt],h.hasOwnProperty(Kt)&&ce!==void 0&&!p.hasOwnProperty(Kt)&&Nb(o,c,Kt,void 0,p,ce);for(ge in p)ce=p[ge],he=h[ge],!p.hasOwnProperty(ge)||ce===he||ce===void 0&&he===void 0||Nb(o,c,ge,ce,p,he);return}}for(var re in h)ce=h[re],h.hasOwnProperty(re)&&ce!=null&&!p.hasOwnProperty(re)&&Gt(o,c,re,null,p,ce);for(ve in p)ce=p[ve],he=h[ve],!p.hasOwnProperty(ve)||ce===he||ce==null&&he==null||Gt(o,c,ve,ce,p,he)}function hj(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o8(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,h=performance.getEntriesByType("resource"),p=0;p<h.length;p++){var b=h[p],E=b.transferSize,D=b.initiatorType,B=b.duration;if(E&&B&&hj(D)){for(D=0,B=b.responseEnd,p+=1;p<h.length;p++){var Q=h[p],le=Q.startTime;if(le>B)break;var ge=Q.transferSize,ve=Q.initiatorType;ge&&hj(ve)&&(Q=Q.responseEnd,D+=ge*(Q<B?1:(B-le)/(Q-le)))}if(--p,c+=8*(E+D)/(b.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var jb=null,Tb=null;function ug(o){return o.nodeType===9?o:o.ownerDocument}function fj(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mj(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function kb(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Db=null;function l8(){var o=window.event;return o&&o.type==="popstate"?o===Db?!1:(Db=o,!0):(Db=null,!1)}var pj=typeof setTimeout=="function"?setTimeout:void 0,c8=typeof clearTimeout=="function"?clearTimeout:void 0,gj=typeof Promise=="function"?Promise:void 0,u8=typeof queueMicrotask=="function"?queueMicrotask:typeof gj<"u"?function(o){return gj.resolve(null).then(o).catch(d8)}:pj;function d8(o){setTimeout(function(){throw o})}function Yo(o){return o==="head"}function yj(o,c){var h=c,p=0;do{var b=h.nextSibling;if(o.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"||h==="/&"){if(p===0){o.removeChild(b),zu(c);return}p--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")p++;else if(h==="html")Xh(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,Xh(h);for(var E=h.firstChild;E;){var D=E.nextSibling,B=E.nodeName;E[Ma]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=D}}else h==="body"&&Xh(o.ownerDocument.body);h=b}while(h);zu(c)}function xj(o,c){var h=o;o=0;do{var p=h.nextSibling;if(h.nodeType===1?c?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(c?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),p&&p.nodeType===8)if(h=p.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=p}while(h)}function Ab(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Ab(h),su(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function h8(o,c,h,p){for(;o.nodeType===1;){var b=h;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(p){if(!o[Ma])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(E=o.getAttribute("rel"),E==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(E!==b.rel||o.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||o.getAttribute("title")!==(b.title==null?null:b.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(E=o.getAttribute("src"),(E!==(b.src==null?null:b.src)||o.getAttribute("type")!==(b.type==null?null:b.type)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&o.getAttribute("name")===E)return o}else return o;if(o=Hs(o.nextSibling),o===null)break}return null}function f8(o,c,h){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Hs(o.nextSibling),o===null))return null;return o}function vj(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Hs(o.nextSibling),o===null))return null;return o}function Rb(o){return o.data==="$?"||o.data==="$~"}function Pb(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function m8(o,c){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||h.readyState!=="loading")c();else{var p=function(){c(),h.removeEventListener("DOMContentLoaded",p)};h.addEventListener("DOMContentLoaded",p),o._reactRetry=p}}function Hs(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var Mb=null;function bj(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(c===0)return Hs(o.nextSibling);c--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||c++}o=o.nextSibling}return null}function wj(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(c===0)return o;c--}else h!=="/$"&&h!=="/&"||c++}o=o.previousSibling}return null}function _j(o,c,h){switch(c=ug(h),o){case"html":if(o=c.documentElement,!o)throw Error(r(452));return o;case"head":if(o=c.head,!o)throw Error(r(453));return o;case"body":if(o=c.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Xh(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);su(o)}var $s=new Map,Ej=new Set;function dg(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Yi=q.d;q.d={f:p8,r:g8,D:y8,C:x8,L:v8,m:b8,X:_8,S:w8,M:E8};function p8(){var o=Yi.f(),c=ng();return o||c}function g8(o){var c=Ps(o);c!==null&&c.tag===5&&c.type==="form"?F2(c):Yi.r(o)}var Uu=typeof document>"u"?null:document;function Cj(o,c,h){var p=Uu;if(p&&typeof c=="string"&&c){var b=Kr(c);b='link[rel="'+o+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),Ej.has(b)||(Ej.add(b),o={rel:o,crossOrigin:h,href:c},p.querySelector(b)===null&&(c=p.createElement("link"),Er(c,"link",o),Yn(c),p.head.appendChild(c)))}}function y8(o){Yi.D(o),Cj("dns-prefetch",o,null)}function x8(o,c){Yi.C(o,c),Cj("preconnect",o,c)}function v8(o,c,h){Yi.L(o,c,h);var p=Uu;if(p&&o&&c){var b='link[rel="preload"][as="'+Kr(c)+'"]';c==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+Kr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+Kr(h.imageSizes)+'"]')):b+='[href="'+Kr(o)+'"]';var E=b;switch(c){case"style":E=Fu(o);break;case"script":E=Bu(o)}$s.has(E)||(o=g({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:o,as:c},h),$s.set(E,o),p.querySelector(b)!==null||c==="style"&&p.querySelector(Zh(E))||c==="script"&&p.querySelector(Jh(E))||(c=p.createElement("link"),Er(c,"link",o),Yn(c),p.head.appendChild(c)))}}function b8(o,c){Yi.m(o,c);var h=Uu;if(h&&o){var p=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+Kr(p)+'"][href="'+Kr(o)+'"]',E=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Bu(o)}if(!$s.has(E)&&(o=g({rel:"modulepreload",href:o},c),$s.set(E,o),h.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Jh(E)))return}p=h.createElement("link"),Er(p,"link",o),Yn(p),h.head.appendChild(p)}}}function w8(o,c,h){Yi.S(o,c,h);var p=Uu;if(p&&o){var b=Oa(p).hoistableStyles,E=Fu(o);c=c||"default";var D=b.get(E);if(!D){var B={loading:0,preload:null};if(D=p.querySelector(Zh(E)))B.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":c},h),(h=$s.get(E))&&Lb(o,h);var Q=D=p.createElement("link");Yn(Q),Er(Q,"link",o),Q._p=new Promise(function(le,ge){Q.onload=le,Q.onerror=ge}),Q.addEventListener("load",function(){B.loading|=1}),Q.addEventListener("error",function(){B.loading|=2}),B.loading|=4,hg(D,c,p)}D={type:"stylesheet",instance:D,count:1,state:B},b.set(E,D)}}}function _8(o,c){Yi.X(o,c);var h=Uu;if(h&&o){var p=Oa(h).hoistableScripts,b=Bu(o),E=p.get(b);E||(E=h.querySelector(Jh(b)),E||(o=g({src:o,async:!0},c),(c=$s.get(b))&&Ob(o,c),E=h.createElement("script"),Yn(E),Er(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(b,E))}}function E8(o,c){Yi.M(o,c);var h=Uu;if(h&&o){var p=Oa(h).hoistableScripts,b=Bu(o),E=p.get(b);E||(E=h.querySelector(Jh(b)),E||(o=g({src:o,async:!0,type:"module"},c),(c=$s.get(b))&&Ob(o,c),E=h.createElement("script"),Yn(E),Er(E,"link",o),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(b,E))}}function Sj(o,c,h,p){var b=(b=ae.current)?dg(b):null;if(!b)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=Fu(h.href),h=Oa(b).hoistableStyles,p=h.get(c),p||(p={type:"style",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Fu(h.href);var E=Oa(b).hoistableStyles,D=E.get(o);if(D||(b=b.ownerDocument||b,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(o,D),(E=b.querySelector(Zh(o)))&&!E._p&&(D.instance=E,D.state.loading=5),$s.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},$s.set(o,h),E||C8(b,o,h,D.state))),c&&p===null)throw Error(r(528,""));return D}if(c&&p!==null)throw Error(r(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Bu(h),h=Oa(b).hoistableScripts,p=h.get(c),p||(p={type:"script",instance:null,count:0,state:null},h.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Fu(o){return'href="'+Kr(o)+'"'}function Zh(o){return'link[rel="stylesheet"]['+o+"]"}function Nj(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function C8(o,c,h,p){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=o.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),Er(c,"link",h),Yn(c),o.head.appendChild(c))}function Bu(o){return'[src="'+Kr(o)+'"]'}function Jh(o){return"script[async]"+o}function jj(o,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var p=o.querySelector('style[data-href~="'+Kr(h.href)+'"]');if(p)return c.instance=p,Yn(p),p;var b=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return p=(o.ownerDocument||o).createElement("style"),Yn(p),Er(p,"style",b),hg(p,h.precedence,o),c.instance=p;case"stylesheet":b=Fu(h.href);var E=o.querySelector(Zh(b));if(E)return c.state.loading|=4,c.instance=E,Yn(E),E;p=Nj(h),(b=$s.get(b))&&Lb(p,b),E=(o.ownerDocument||o).createElement("link"),Yn(E);var D=E;return D._p=new Promise(function(B,Q){D.onload=B,D.onerror=Q}),Er(E,"link",p),c.state.loading|=4,hg(E,h.precedence,o),c.instance=E;case"script":return E=Bu(h.src),(b=o.querySelector(Jh(E)))?(c.instance=b,Yn(b),b):(p=h,(b=$s.get(E))&&(p=g({},h),Ob(p,b)),o=o.ownerDocument||o,b=o.createElement("script"),Yn(b),Er(b,"link",p),o.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,hg(p,h.precedence,o));return c.instance}function hg(o,c,h){for(var p=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,E=b,D=0;D<p.length;D++){var B=p[D];if(B.dataset.precedence===c)E=B;else if(E!==b)break}E?E.parentNode.insertBefore(o,E.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(o,c.firstChild))}function Lb(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Ob(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var fg=null;function Tj(o,c,h){if(fg===null){var p=new Map,b=fg=new Map;b.set(h,p)}else b=fg,p=b.get(h),p||(p=new Map,b.set(h,p));if(p.has(o))return p;for(p.set(o,null),h=h.getElementsByTagName(o),b=0;b<h.length;b++){var E=h[b];if(!(E[Ma]||E[qn]||o==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var D=E.getAttribute(c)||"";D=o+D;var B=p.get(D);B?B.push(E):p.set(D,[E])}}return p}function kj(o,c,h){o=o.ownerDocument||o,o.head.insertBefore(h,c==="title"?o.querySelector("head > title"):null)}function S8(o,c,h){if(h===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Dj(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function N8(o,c,h,p){if(h.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var b=Fu(p.href),E=c.querySelector(Zh(b));if(E){c=E._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=mg.bind(o),c.then(o,o)),h.state.loading|=4,h.instance=E,Yn(E);return}E=c.ownerDocument||c,p=Nj(p),(b=$s.get(b))&&Lb(p,b),E=E.createElement("link"),Yn(E);var D=E;D._p=new Promise(function(B,Q){D.onload=B,D.onerror=Q}),Er(E,"link",p),h.instance=E}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=mg.bind(o),c.addEventListener("load",h),c.addEventListener("error",h))}}var Ib=0;function j8(o,c){return o.stylesheets&&o.count===0&&gg(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var p=setTimeout(function(){if(o.stylesheets&&gg(o,o.stylesheets),o.unsuspend){var E=o.unsuspend;o.unsuspend=null,E()}},6e4+c);0<o.imgBytes&&Ib===0&&(Ib=62500*o8());var b=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&gg(o,o.stylesheets),o.unsuspend)){var E=o.unsuspend;o.unsuspend=null,E()}},(o.imgBytes>Ib?50:800)+c);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function mg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gg(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var pg=null;function gg(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,pg=new Map,c.forEach(T8,o),pg=null,mg.call(o))}function T8(o,c){if(!(c.state.loading&4)){var h=pg.get(o);if(h)var p=h.get(null);else{h=new Map,pg.set(o,h);for(var b=o.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var D=b[E];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(h.set(D.dataset.precedence,D),p=D)}p&&h.set(null,p)}b=c.instance,D=b.getAttribute("data-precedence"),E=h.get(D)||p,E===p&&h.set(null,b),h.set(D,b),this.count++,p=mg.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),E?E.parentNode.insertBefore(b,E.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(b,o.firstChild)),c.state.loading|=4}}var ef={$$typeof:R,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function k8(o,c,h,p,b,E,D,B,Q){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function Aj(o,c,h,p,b,E,D,B,Q,le,ge,ve){return o=new k8(o,c,h,D,Q,le,ge,ve,B),c=1,E===!0&&(c|=24),E=gs(3,null,null,c),o.current=E,E.stateNode=o,c=gv(),c.refCount++,o.pooledCache=c,c.refCount++,E.memoizedState={element:p,isDehydrated:h,cache:c},bv(E),o}function Rj(o){return o?(o=xu,o):xu}function Pj(o,c,h,p,b,E){b=Rj(b),p.context===null?p.context=b:p.pendingContext=b,p=Lo(c),p.payload={element:h},E=E===void 0?null:E,E!==null&&(p.callback=E),h=Oo(o,p,c),h!==null&&(ts(h,o,c),Rh(h,o,c))}function Mj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Vb(o,c){Mj(o,c),(o=o.alternate)&&Mj(o,c)}function Lj(o){if(o.tag===13||o.tag===31){var c=Jl(o,67108864);c!==null&&ts(c,o,67108864),Vb(o,67108864)}}function Oj(o){if(o.tag===13||o.tag===31){var c=ws();c=Bl(c);var h=Jl(o,c);h!==null&&ts(h,o,c),Vb(o,c)}}var yg=!0;function D8(o,c,h,p){var b=z.T;z.T=null;var E=q.p;try{q.p=2,Ub(o,c,h,p)}finally{q.p=E,z.T=b}}function A8(o,c,h,p){var b=z.T;z.T=null;var E=q.p;try{q.p=8,Ub(o,c,h,p)}finally{q.p=E,z.T=b}}function Ub(o,c,h,p){if(yg){var b=Fb(p);if(b===null)Sb(o,c,p,xg,h),Vj(o,p);else if(P8(b,o,c,h,p))p.stopPropagation();else if(Vj(o,p),c&4&&-1<R8.indexOf(o)){for(;b!==null;){var E=Ps(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var D=Zt(E.pendingLanes);if(D!==0){var B=E;for(B.pendingLanes|=2,B.entangledLanes|=2;D;){var Q=1<<31-tn(D);B.entanglements[1]|=Q,D&=~Q}Ka(E),(Mt&6)===0&&(eg=_n()+500,Gh(0))}}break;case 31:case 13:B=Jl(E,2),B!==null&&ts(B,E,2),ng(),Vb(E,2)}if(E=Fb(p),E===null&&Sb(o,c,p,xg,h),E===b)break;b=E}b!==null&&p.stopPropagation()}else Sb(o,c,p,null,h)}}function Fb(o){return o=Ms(o),Bb(o)}var xg=null;function Bb(o){if(xg=null,o=La(o),o!==null){var c=a(o);if(c===null)o=null;else{var h=c.tag;if(h===13){if(o=l(c),o!==null)return o;o=null}else if(h===31){if(o=u(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return xg=o,null}function Ij(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ur()){case ds:return 2;case Rs:return 8;case Gr:case la:return 32;case Ni:return 268435456;default:return 32}default:return 32}}var zb=!1,Wo=null,Go=null,Ko=null,tf=new Map,nf=new Map,Qo=[],R8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vj(o,c){switch(o){case"focusin":case"focusout":Wo=null;break;case"dragenter":case"dragleave":Go=null;break;case"mouseover":case"mouseout":Ko=null;break;case"pointerover":case"pointerout":tf.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":nf.delete(c.pointerId)}}function rf(o,c,h,p,b,E){return o===null||o.nativeEvent!==E?(o={blockedOn:c,domEventName:h,eventSystemFlags:p,nativeEvent:E,targetContainers:[b]},c!==null&&(c=Ps(c),c!==null&&Lj(c)),o):(o.eventSystemFlags|=p,c=o.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),o)}function P8(o,c,h,p,b){switch(c){case"focusin":return Wo=rf(Wo,o,c,h,p,b),!0;case"dragenter":return Go=rf(Go,o,c,h,p,b),!0;case"mouseover":return Ko=rf(Ko,o,c,h,p,b),!0;case"pointerover":var E=b.pointerId;return tf.set(E,rf(tf.get(E)||null,o,c,h,p,b)),!0;case"gotpointercapture":return E=b.pointerId,nf.set(E,rf(nf.get(E)||null,o,c,h,p,b)),!0}return!1}function Uj(o){var c=La(o.target);if(c!==null){var h=a(c);if(h!==null){if(c=h.tag,c===13){if(c=l(h),c!==null){o.blockedOn=c,ua(o.priority,function(){Oj(h)});return}}else if(c===31){if(c=u(h),c!==null){o.blockedOn=c,ua(o.priority,function(){Oj(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function vg(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=Fb(o.nativeEvent);if(h===null){h=o.nativeEvent;var p=new h.constructor(h.type,h);gh=p,h.target.dispatchEvent(p),gh=null}else return c=Ps(h),c!==null&&Lj(c),o.blockedOn=h,!1;c.shift()}return!0}function Fj(o,c,h){vg(o)&&h.delete(c)}function M8(){zb=!1,Wo!==null&&vg(Wo)&&(Wo=null),Go!==null&&vg(Go)&&(Go=null),Ko!==null&&vg(Ko)&&(Ko=null),tf.forEach(Fj),nf.forEach(Fj)}function bg(o,c){o.blockedOn===c&&(o.blockedOn=null,zb||(zb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,M8)))}var wg=null;function Bj(o){wg!==o&&(wg=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wg===o&&(wg=null);for(var c=0;c<o.length;c+=3){var h=o[c],p=o[c+1],b=o[c+2];if(typeof p!="function"){if(Bb(p||h)===null)continue;break}var E=Ps(h);E!==null&&(o.splice(c,3),c-=3,Fv(E,{pending:!0,data:b,method:h.method,action:p},p,b))}}))}function zu(o){function c(Q){return bg(Q,o)}Wo!==null&&bg(Wo,o),Go!==null&&bg(Go,o),Ko!==null&&bg(Ko,o),tf.forEach(c),nf.forEach(c);for(var h=0;h<Qo.length;h++){var p=Qo[h];p.blockedOn===o&&(p.blockedOn=null)}for(;0<Qo.length&&(h=Qo[0],h.blockedOn===null);)Uj(h),h.blockedOn===null&&Qo.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(p=0;p<h.length;p+=3){var b=h[p],E=h[p+1],D=b[dr]||null;if(typeof E=="function")D||Bj(h);else if(D){var B=null;if(E&&E.hasAttribute("formAction")){if(b=E,D=E[dr]||null)B=D.formAction;else if(Bb(b)!==null)continue}else B=D.action;typeof B=="function"?h[p+1]=B:(h.splice(p,3),p-=3),Bj(h)}}}function zj(){function o(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(D){return b=D})},focusReset:"manual",scroll:"manual"})}function c(){b!==null&&(b(),b=null),p||setTimeout(h,20)}function h(){if(!p&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(h,100),function(){p=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),b!==null&&(b(),b=null)}}}function Hb(o){this._internalRoot=o}_g.prototype.render=Hb.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));var h=c.current,p=ws();Pj(h,p,o,c,null,null)},_g.prototype.unmount=Hb.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Pj(o.current,2,null,o,null,null),ng(),c[Pa]=null}};function _g(o){this._internalRoot=o}_g.prototype.unstable_scheduleHydration=function(o){if(o){var c=np();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Qo.length&&c!==0&&c<Qo[h].priority;h++);Qo.splice(h,0,o),h===0&&Uj(o)}};var Hj=e.version;if(Hj!=="19.2.3")throw Error(r(527,Hj,"19.2.3"));q.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=f(c),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var L8={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eg.isDisabled&&Eg.supportsFiber)try{Hn=Eg.inject(L8),En=Eg}catch{}}return af.createRoot=function(o,c){if(!s(o))throw Error(r(299));var h=!1,p="",b=Q2,E=X2,D=Z2;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError)),c=Aj(o,1,!1,null,null,h,p,null,b,E,D,zj),o[Pa]=c.current,Cb(o),new Hb(c)},af.hydrateRoot=function(o,c,h){if(!s(o))throw Error(r(299));var p=!1,b="",E=Q2,D=X2,B=Z2,Q=null;return h!=null&&(h.unstable_strictMode===!0&&(p=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(B=h.onRecoverableError),h.formState!==void 0&&(Q=h.formState)),c=Aj(o,1,!0,c,h??null,p,b,Q,E,D,B,zj),c.context=Rj(null),h=c.current,p=ws(),p=Bl(p),b=Lo(p),b.callback=null,Oo(h,b,p),h=p,c.current.lanes=h,Ar(c,h),Ka(c),o[Pa]=c.current,Cb(o),new _g(c)},af.version="19.2.3",af}var Jj;function q8(){if(Jj)return Yb.exports;Jj=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Yb.exports=$8(),Yb.exports}var Y8=q8();const W8=Yc(Y8);var Qb,eT;function G8(){if(eT)return Qb;eT=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,l){if(a===l)return!0;if(a&&l&&typeof a=="object"&&typeof l=="object"){if(a.constructor!==l.constructor)return!1;var u,d,f;if(Array.isArray(a)){if(u=a.length,u!=l.length)return!1;for(d=u;d--!==0;)if(!s(a[d],l[d]))return!1;return!0}var m;if(e&&a instanceof Map&&l instanceof Map){if(a.size!==l.size)return!1;for(m=a.entries();!(d=m.next()).done;)if(!l.has(d.value[0]))return!1;for(m=a.entries();!(d=m.next()).done;)if(!s(d.value[1],l.get(d.value[0])))return!1;return!0}if(n&&a instanceof Set&&l instanceof Set){if(a.size!==l.size)return!1;for(m=a.entries();!(d=m.next()).done;)if(!l.has(d.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(l)){if(u=a.length,u!=l.length)return!1;for(d=u;d--!==0;)if(a[d]!==l[d])return!1;return!0}if(a.constructor===RegExp)return a.source===l.source&&a.flags===l.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof l.valueOf=="function")return a.valueOf()===l.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof l.toString=="function")return a.toString()===l.toString();if(f=Object.keys(a),u=f.length,u!==Object.keys(l).length)return!1;for(d=u;d--!==0;)if(!Object.prototype.hasOwnProperty.call(l,f[d]))return!1;if(t&&a instanceof Element)return!1;for(d=u;d--!==0;)if(!((f[d]==="_owner"||f[d]==="__v"||f[d]==="__o")&&a.$$typeof)&&!s(a[f[d]],l[f[d]]))return!1;return!0}return a!==a&&l!==l}return Qb=function(l,u){try{return s(l,u)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},Qb}var K8=G8();const Q8=Yc(K8);var Xb,tT;function X8(){if(tT)return Xb;tT=1;var t=function(e,n,r,s,a,l,u,d){if(!e){var f;if(n===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[r,s,a,l,u,d],g=0;f=new Error(n.replace(/%s/g,function(){return m[g++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};return Xb=t,Xb}var Z8=X8();const nT=Yc(Z8);var Zb,rT;function J8(){return rT||(rT=1,Zb=function(e,n,r,s){var a=r?r.call(s,e,n):void 0;if(a!==void 0)return!!a;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var d=Object.prototype.hasOwnProperty.bind(n),f=0;f<l.length;f++){var m=l[f];if(!d(m))return!1;var g=e[m],y=n[m];if(a=r?r.call(s,g,y,m):void 0,a===!1||a===void 0&&g!==y)return!1}return!0}),Zb}var e7=J8();const t7=Yc(e7);var YP=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(YP||{}),Jb={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},sT=Object.values(YP),Y_={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},n7=Object.entries(Y_).reduce((t,[e,n])=>(t[n]=e,t),{}),_a="data-rh",md={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},pd=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},r7=t=>{let e=pd(t,"title");const n=pd(t,md.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=pd(t,md.DEFAULT_TITLE);return e||r||void 0},s7=t=>pd(t,md.ON_CHANGE_CLIENT_STATE)||(()=>{}),ew=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),a7=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let a=0;a<s.length;a+=1){const u=s[a].toLowerCase();if(t.indexOf(u)!==-1&&r[u])return n.concat(r)}}return n},[]),i7=t=>console&&typeof console.warn=="function"&&console.warn(t),of=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&i7(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,a)=>{const l={};a.filter(d=>{let f;const m=Object.keys(d);for(let y=0;y<m.length;y+=1){const w=m[y],_=w.toLowerCase();e.indexOf(_)!==-1&&!(f==="rel"&&d[f].toLowerCase()==="canonical")&&!(_==="rel"&&d[_].toLowerCase()==="stylesheet")&&(f=_),e.indexOf(w)!==-1&&(w==="innerHTML"||w==="cssText"||w==="itemprop")&&(f=w)}if(!f||!d[f])return!1;const g=d[f].toLowerCase();return r[f]||(r[f]={}),l[f]||(l[f]={}),r[f][g]?!1:(l[f][g]=!0,!0)}).reverse().forEach(d=>s.push(d));const u=Object.keys(l);for(let d=0;d<u.length;d+=1){const f=u[d],m={...r[f],...l[f]};r[f]=m}return s},[]).reverse()},o7=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},l7=t=>({baseTag:a7(["href"],t),bodyAttributes:ew("bodyAttributes",t),defer:pd(t,md.DEFER),encode:pd(t,md.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:ew("htmlAttributes",t),linkTags:of("link",["rel","href"],t),metaTags:of("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:of("noscript",["innerHTML"],t),onChangeClientState:s7(t),scriptTags:of("script",["src","innerHTML"],t),styleTags:of("style",["cssText"],t),title:r7(t),titleAttributes:ew("titleAttributes",t),prioritizeSeoTags:o7(t,md.PRIORITIZE_SEO_TAGS)}),WP=t=>Array.isArray(t)?t.join(""):t,c7=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},tw=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(c7(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},aT=(t,e)=>({...t,[e]:void 0}),u7=["noscript","script","style"],h1=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),GP=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),d7=(t,e,n,r)=>{const s=GP(n),a=WP(e);return s?`<${t} ${_a}="true" ${s}>${h1(a,r)}</${t}>`:`<${t} ${_a}="true">${h1(a,r)}</${t}>`},h7=(t,e,n=!0)=>e.reduce((r,s)=>{const a=s,l=Object.keys(a).filter(f=>!(f==="innerHTML"||f==="cssText")).reduce((f,m)=>{const g=typeof a[m]>"u"?m:`${m}="${h1(a[m],n)}"`;return f?`${f} ${g}`:g},""),u=a.innerHTML||a.cssText||"",d=u7.indexOf(t)===-1;return`${r}<${t} ${_a}="true" ${l}${d?"/>":`>${u}</${t}>`}`},""),KP=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Y_[r];return n[s||r]=t[r],n},e),f7=(t,e,n)=>{const r={key:e,[_a]:!0},s=KP(n,r);return[fe.createElement("title",s,e)]},ty=(t,e)=>e.map((n,r)=>{const s={key:r,[_a]:!0};return Object.keys(n).forEach(a=>{const u=Y_[a]||a;if(u==="innerHTML"||u==="cssText"){const d=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:d}}else s[u]=n[a]}),fe.createElement(t,s)}),Ws=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>f7(t,e.title,e.titleAttributes),toString:()=>d7(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>KP(e),toString:()=>GP(e)};default:return{toComponent:()=>ty(t,e),toString:()=>h7(t,e,n)}}},m7=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=tw(t,Jb.meta),a=tw(e,Jb.link),l=tw(n,Jb.script);return{priorityMethods:{toComponent:()=>[...ty("meta",s.priority),...ty("link",a.priority),...ty("script",l.priority)],toString:()=>`${Ws("meta",s.priority,r)} ${Ws("link",a.priority,r)} ${Ws("script",l.priority,r)}`},metaTags:s.default,linkTags:a.default,scriptTags:l.default}},p7=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:a,styleTags:l,title:u="",titleAttributes:d,prioritizeSeoTags:f}=t;let{linkTags:m,metaTags:g,scriptTags:y}=t,w={toComponent:()=>{},toString:()=>""};return f&&({priorityMethods:w,linkTags:m,metaTags:g,scriptTags:y}=m7(t)),{priority:w,base:Ws("base",e,r),bodyAttributes:Ws("bodyAttributes",n,r),htmlAttributes:Ws("htmlAttributes",s,r),link:Ws("link",m,r),meta:Ws("meta",g,r),noscript:Ws("noscript",a,r),script:Ws("script",y,r),style:Ws("style",l,r),title:Ws("title",{title:u,titleAttributes:d},r)}},f1=p7,Cg=[],QP=!!(typeof window<"u"&&window.document&&window.document.createElement),m1=class{instances=[];canUseDOM=QP;context;value={setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Cg:this.instances,add:t=>{(this.canUseDOM?Cg:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Cg:this.instances).indexOf(t);(this.canUseDOM?Cg:this.instances).splice(e,1)}}};constructor(t,e){this.context=t,this.canUseDOM=e||!1,e||(t.helmet=f1({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},g7={},XP=fe.createContext(g7),ZP=class JP extends x.Component{static canUseDOM=QP;helmetData;constructor(e){super(e),this.helmetData=new m1(this.props.context||{},JP.canUseDOM)}render(){return fe.createElement(XP.Provider,{value:this.helmetData.value},this.props.children)}},Hu=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${_a}]`),s=[].slice.call(r),a=[];let l;return e&&e.length&&e.forEach(u=>{const d=document.createElement(t);for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f))if(f==="innerHTML")d.innerHTML=u.innerHTML;else if(f==="cssText")d.styleSheet?d.styleSheet.cssText=u.cssText:d.appendChild(document.createTextNode(u.cssText));else{const m=f,g=typeof u[m]>"u"?"":u[m];d.setAttribute(f,g)}d.setAttribute(_a,"true"),s.some((f,m)=>(l=m,d.isEqualNode(f)))?s.splice(l,1):a.push(d)}),s.forEach(u=>u.parentNode?.removeChild(u)),a.forEach(u=>n.appendChild(u)),{oldTags:s,newTags:a}},p1=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(_a),s=r?r.split(","):[],a=[...s],l=Object.keys(e);for(const u of l){const d=e[u]||"";n.getAttribute(u)!==d&&n.setAttribute(u,d),s.indexOf(u)===-1&&s.push(u);const f=a.indexOf(u);f!==-1&&a.splice(f,1)}for(let u=a.length-1;u>=0;u-=1)n.removeAttribute(a[u]);s.length===a.length?n.removeAttribute(_a):n.getAttribute(_a)!==l.join(",")&&n.setAttribute(_a,l.join(","))},y7=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=WP(t)),p1("title",e)},iT=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:a,metaTags:l,noscriptTags:u,onChangeClientState:d,scriptTags:f,styleTags:m,title:g,titleAttributes:y}=t;p1("body",r),p1("html",s),y7(g,y);const w={baseTag:Hu("base",n),linkTags:Hu("link",a),metaTags:Hu("meta",l),noscriptTags:Hu("noscript",u),scriptTags:Hu("script",f),styleTags:Hu("style",m)},_={},C={};Object.keys(w).forEach(S=>{const{newTags:N,oldTags:k}=w[S];N.length&&(_[S]=N),k.length&&(C[S]=w[S].oldTags)}),e&&e(),d(t,_,C)},lf=null,x7=t=>{lf&&cancelAnimationFrame(lf),t.defer?lf=requestAnimationFrame(()=>{iT(t,()=>{lf=null})}):(iT(t),lf=null)},v7=x7,oT=class extends x.Component{rendered=!1;shouldComponentUpdate(t){return!t7(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:e}=this.props.context;let n=null;const r=l7(t.get().map(s=>{const a={...s.props};return delete a.context,a}));ZP.canUseDOM?v7(r):f1&&(n=f1(r)),e(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},b7=class extends x.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(t){return!Q8(aT(this.props,"helmetData"),aT(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return nT(sT.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${sT.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),nT(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return fe.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...a}=r.props,l=Object.keys(a).reduce((d,f)=>(d[n7[f]||f]=a[f],d),{});let{type:u}=r;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(r,s),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,l,s);break;default:e=this.mapObjectTypeChildren(r,e,l,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof m1)){const s=r;r=new m1(s.context,!0),delete n.helmetData}return r?fe.createElement(oT,{...n,context:r.value}):fe.createElement(XP.Consumer,null,s=>fe.createElement(oT,{...n,context:s}))}},Ll=qP();const w7=Yc(Ll);function tm(){return tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tm.apply(this,arguments)}var dl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dl||(dl={}));const lT="popstate";function _7(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:l,hash:u}=r.location;return g1("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:jy(s)}return C7(e,n,null,t)}function Fn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function W_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E7(){return Math.random().toString(36).substr(2,8)}function cT(t,e){return{usr:t.state,key:t.key,idx:e}}function g1(t,e,n,r){return n===void 0&&(n=null),tm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hd(e):e,{state:n,key:e&&e.key||r||E7()})}function jy(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function C7(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,u=dl.Pop,d=null,f=m();f==null&&(f=0,l.replaceState(tm({},l.state,{idx:f}),""));function m(){return(l.state||{idx:null}).idx}function g(){u=dl.Pop;let S=m(),N=S==null?null:S-f;f=S,d&&d({action:u,location:C.location,delta:N})}function y(S,N){u=dl.Push;let k=g1(C.location,S,N);f=m()+1;let R=cT(k,f),A=C.createHref(k);try{l.pushState(R,"",A)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(A)}a&&d&&d({action:u,location:C.location,delta:1})}function w(S,N){u=dl.Replace;let k=g1(C.location,S,N);f=m();let R=cT(k,f),A=C.createHref(k);l.replaceState(R,"",A),a&&d&&d({action:u,location:C.location,delta:0})}function _(S){let N=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof S=="string"?S:jy(S);return k=k.replace(/ $/,"%20"),Fn(N,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,N)}let C={get action(){return u},get location(){return t(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(lT,g),d=S,()=>{s.removeEventListener(lT,g),d=null}},createHref(S){return e(s,S)},createURL:_,encodeLocation(S){let N=_(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:w,go(S){return l.go(S)}};return C}var uT;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(uT||(uT={}));function S7(t,e,n){return n===void 0&&(n="/"),N7(t,e,n)}function N7(t,e,n,r){let s=typeof e=="string"?Hd(e):e,a=G_(s.pathname||"/",n);if(a==null)return null;let l=eM(t);j7(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=U7(a);u=O7(l[d],f)}return u}function eM(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,l,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(Fn(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let f=gl([r,d.relativePath]),m=n.concat(d);a.children&&a.children.length>0&&(Fn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),eM(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:M7(f,a.index),routesMeta:m})};return t.forEach((a,l)=>{var u;if(a.path===""||!((u=a.path)!=null&&u.includes("?")))s(a,l);else for(let d of tM(a.path))s(a,l,d)}),e}function tM(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=tM(r.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function j7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:L7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const T7=/^:[\w-]+$/,k7=3,D7=2,A7=1,R7=10,P7=-2,dT=t=>t==="*";function M7(t,e){let n=t.split("/"),r=n.length;return n.some(dT)&&(r+=P7),e&&(r+=D7),n.filter(s=>!dT(s)).reduce((s,a)=>s+(T7.test(a)?k7:a===""?A7:R7),r)}function L7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function O7(t,e,n){let{routesMeta:r}=t,s={},a="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",g=I7({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),y=d.route;if(!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:gl([a,g.pathname]),pathnameBase:$7(gl([a,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(a=gl([a,g.pathnameBase]))}return l}function I7(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=V7(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,m,g)=>{let{paramName:y,isOptional:w}=m;if(y==="*"){let C=u[g]||"";l=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const _=u[g];return w&&!_?f[y]=void 0:f[y]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:t}}function V7(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),W_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function U7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return W_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function G_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const F7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B7=t=>F7.test(t);function z7(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hd(t):t,a;if(n)if(B7(n))a=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),W_(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?a=hT(n.substring(1),"/"):a=hT(n,e)}else a=e;return{pathname:a,search:q7(r),hash:Y7(s)}}function hT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function nw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function H7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function K_(t,e){let n=H7(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Q_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Hd(t):(s=tm({},t),Fn(!s.pathname||!s.pathname.includes("?"),nw("?","pathname","search",s)),Fn(!s.pathname||!s.pathname.includes("#"),nw("#","pathname","hash",s)),Fn(!s.search||!s.search.includes("#"),nw("#","search","hash",s)));let a=t===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=n;else{let g=e.length-1;if(!r&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),g-=1;s.pathname=y.join("/")}u=g>=0?e[g]:"/"}let d=z7(s,u),f=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}const gl=t=>t.join("/").replace(/\/\/+/g,"/"),$7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Y7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function W7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nM=["post","put","patch","delete"];new Set(nM);const G7=["get",...nM];new Set(G7);function nm(){return nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nm.apply(this,arguments)}const X_=x.createContext(null),K7=x.createContext(null),Ol=x.createContext(null),H0=x.createContext(null),xo=x.createContext({outlet:null,matches:[],isDataRoute:!1}),rM=x.createContext(null);function Q7(t,e){let{relative:n}=e===void 0?{}:e;$d()||Fn(!1);let{basename:r,navigator:s}=x.useContext(Ol),{hash:a,pathname:l,search:u}=aM(t,{relative:n}),d=l;return r!=="/"&&(d=l==="/"?r:gl([r,l])),s.createHref({pathname:d,search:u,hash:a})}function $d(){return x.useContext(H0)!=null}function Ei(){return $d()||Fn(!1),x.useContext(H0).location}function sM(t){x.useContext(Ol).static||x.useLayoutEffect(t)}function Ze(){let{isDataRoute:t}=x.useContext(xo);return t?cV():X7()}function X7(){$d()||Fn(!1);let t=x.useContext(X_),{basename:e,future:n,navigator:r}=x.useContext(Ol),{matches:s}=x.useContext(xo),{pathname:a}=Ei(),l=JSON.stringify(K_(s,n.v7_relativeSplatPath)),u=x.useRef(!1);return sM(()=>{u.current=!0}),x.useCallback(function(f,m){if(m===void 0&&(m={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let g=Q_(f,JSON.parse(l),a,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:gl([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,l,a,t])}function Sm(){let{matches:t}=x.useContext(xo),e=t[t.length-1];return e?e.params:{}}function aM(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Ol),{matches:s}=x.useContext(xo),{pathname:a}=Ei(),l=JSON.stringify(K_(s,r.v7_relativeSplatPath));return x.useMemo(()=>Q_(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function Z7(t,e){return J7(t,e)}function J7(t,e,n,r){$d()||Fn(!1);let{navigator:s}=x.useContext(Ol),{matches:a}=x.useContext(xo),l=a[a.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let f=Ei(),m;if(e){var g;let S=typeof e=="string"?Hd(e):e;d==="/"||(g=S.pathname)!=null&&g.startsWith(d)||Fn(!1),m=S}else m=f;let y=m.pathname||"/",w=y;if(d!=="/"){let S=d.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let _=S7(t,{pathname:w}),C=sV(_&&_.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:gl([d,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:gl([d,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r);return e&&C?x.createElement(H0.Provider,{value:{location:nm({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:dl.Pop}},C):C}function eV(){let t=lV(),e=W7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,null)}const tV=x.createElement(eV,null);class nV extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(xo.Provider,{value:this.props.routeContext},x.createElement(rM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rV(t){let{routeContext:e,match:n,children:r}=t,s=x.useContext(X_);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(xo.Provider,{value:e},r)}function sV(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let m=l.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);m>=0||Fn(!1),l=l.slice(0,Math.min(l.length,m+1))}let d=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let g=l[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=m),g.route.id){let{loaderData:y,errors:w}=n,_=g.route.loader&&y[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||_){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((m,g,y)=>{let w,_=!1,C=null,S=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,C=g.route.errorElement||tV,d&&(f<0&&y===0?(uV("route-fallback"),_=!0,S=null):f===y&&(_=!0,S=g.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,y+1)),k=()=>{let R;return w?R=C:_?R=S:g.route.Component?R=x.createElement(g.route.Component,null):g.route.element?R=g.route.element:R=m,x.createElement(rV,{match:g,routeContext:{outlet:m,matches:N,isDataRoute:n!=null},children:R})};return n&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?x.createElement(nV,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:k(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):k()},null)}var iM=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(iM||{}),oM=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(oM||{});function aV(t){let e=x.useContext(X_);return e||Fn(!1),e}function iV(t){let e=x.useContext(K7);return e||Fn(!1),e}function oV(t){let e=x.useContext(xo);return e||Fn(!1),e}function lM(t){let e=oV(),n=e.matches[e.matches.length-1];return n.route.id||Fn(!1),n.route.id}function lV(){var t;let e=x.useContext(rM),n=iV(),r=lM();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cV(){let{router:t}=aV(iM.UseNavigateStable),e=lM(oM.UseNavigateStable),n=x.useRef(!1);return sM(()=>{n.current=!0}),x.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,nm({fromRouteId:e},a)))},[t,e])}const fT={};function uV(t,e,n){fT[t]||(fT[t]=!0)}function dV(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function rw(t){let{to:e,replace:n,state:r,relative:s}=t;$d()||Fn(!1);let{future:a,static:l}=x.useContext(Ol),{matches:u}=x.useContext(xo),{pathname:d}=Ei(),f=Ze(),m=Q_(e,K_(u,a.v7_relativeSplatPath),d,s==="path"),g=JSON.stringify(m);return x.useEffect(()=>f(JSON.parse(g),{replace:n,state:r,relative:s}),[f,g,s,n,r]),null}function Me(t){Fn(!1)}function hV(t){let{basename:e="/",children:n=null,location:r,navigationType:s=dl.Pop,navigator:a,static:l=!1,future:u}=t;$d()&&Fn(!1);let d=e.replace(/^\/*/,"/"),f=x.useMemo(()=>({basename:d,navigator:a,static:l,future:nm({v7_relativeSplatPath:!1},u)}),[d,u,a,l]);typeof r=="string"&&(r=Hd(r));let{pathname:m="/",search:g="",hash:y="",state:w=null,key:_="default"}=r,C=x.useMemo(()=>{let S=G_(m,d);return S==null?null:{location:{pathname:S,search:g,hash:y,state:w,key:_},navigationType:s}},[d,m,g,y,w,_,s]);return C==null?null:x.createElement(Ol.Provider,{value:f},x.createElement(H0.Provider,{children:n,value:C}))}function cM(t){let{children:e,location:n}=t;return Z7(y1(e),n)}new Promise(()=>{});function y1(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let a=[...e,s];if(r.type===x.Fragment){n.push.apply(n,y1(r.props.children,a));return}r.type!==Me&&Fn(!1),!r.props.index||!r.props.children||Fn(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=y1(r.props.children,a)),n.push(l)}),n}function x1(){return x1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x1.apply(this,arguments)}function fV(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function mV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pV(t,e){return t.button===0&&(!e||e==="_self")&&!mV(t)}function v1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function gV(t,e){let n=v1(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const yV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xV="6";try{window.__reactRouterVersion=xV}catch{}const vV="startTransition",mT=q_[vV];function uM(t){let{basename:e,children:n,future:r,window:s}=t,a=x.useRef();a.current==null&&(a.current=_7({window:s,v5Compat:!0}));let l=a.current,[u,d]=x.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},m=x.useCallback(g=>{f&&mT?mT(()=>d(g)):d(g)},[d,f]);return x.useLayoutEffect(()=>l.listen(m),[l,m]),x.useEffect(()=>dV(r),[r]),x.createElement(hV,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const bV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jn=x.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:l,state:u,target:d,to:f,preventScrollReset:m,viewTransition:g}=e,y=fV(e,yV),{basename:w}=x.useContext(Ol),_,C=!1;if(typeof f=="string"&&wV.test(f)&&(_=f,bV))try{let R=new URL(window.location.href),A=f.startsWith("//")?new URL(R.protocol+f):new URL(f),L=G_(A.pathname,w);A.origin===R.origin&&L!=null?f=L+A.search+A.hash:C=!0}catch{}let S=Q7(f,{relative:s}),N=_V(f,{replace:l,state:u,target:d,preventScrollReset:m,relative:s,viewTransition:g});function k(R){r&&r(R),R.defaultPrevented||N(R)}return x.createElement("a",x1({},y,{href:_||S,onClick:C||a?r:k,ref:n,target:d}))});var pT;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pT||(pT={}));var gT;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gT||(gT={}));function _V(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:l,viewTransition:u}=e===void 0?{}:e,d=Ze(),f=Ei(),m=aM(t,{relative:l});return x.useCallback(g=>{if(pV(g,n)){g.preventDefault();let y=r!==void 0?r:jy(f)===jy(m);d(t,{replace:y,state:s,preventScrollReset:a,relative:l,viewTransition:u})}},[f,d,m,r,s,n,t,a,l,u])}function dM(t){let e=x.useRef(v1(t)),n=x.useRef(!1),r=Ei(),s=x.useMemo(()=>gV(r.search,n.current?null:e.current),[r.search]),a=Ze(),l=x.useCallback((u,d)=>{const f=v1(typeof u=="function"?u(s):u);n.current=!0,a("?"+f,d)},[a,s]);return[s,l]}let EV={data:""},CV=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||EV},SV=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,NV=/\/\*[^]*?\*\/|  +/g,yT=/\n+/g,al=(t,e)=>{let n="",r="",s="";for(let a in t){let l=t[a];a[0]=="@"?a[1]=="i"?n=a+" "+l+";":r+=a[1]=="f"?al(l,a):a+"{"+al(l,a[1]=="k"?"":e)+"}":typeof l=="object"?r+=al(l,e?e.replace(/([^,])+/g,u=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,u):u?u+" "+d:d)):a):l!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=al.p?al.p(a,l):a+":"+l+";")}return n+(e&&s?e+"{"+s+"}":s)+r},Wi={},hM=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+hM(t[n]);return e}return t},jV=(t,e,n,r,s)=>{let a=hM(t),l=Wi[a]||(Wi[a]=(d=>{let f=0,m=11;for(;f<d.length;)m=101*m+d.charCodeAt(f++)>>>0;return"go"+m})(a));if(!Wi[l]){let d=a!==t?t:(f=>{let m,g,y=[{}];for(;m=SV.exec(f.replace(NV,""));)m[4]?y.shift():m[3]?(g=m[3].replace(yT," ").trim(),y.unshift(y[0][g]=y[0][g]||{})):y[0][m[1]]=m[2].replace(yT," ").trim();return y[0]})(t);Wi[l]=al(s?{["@keyframes "+l]:d}:d,n?"":"."+l)}let u=n&&Wi.g?Wi.g:null;return n&&(Wi.g=Wi[l]),((d,f,m,g)=>{g?f.data=f.data.replace(g,d):f.data.indexOf(d)===-1&&(f.data=m?d+f.data:f.data+d)})(Wi[l],e,r,u),l},TV=(t,e,n)=>t.reduce((r,s,a)=>{let l=e[a];if(l&&l.call){let u=l(n),d=u&&u.props&&u.props.className||/^go/.test(u)&&u;l=d?"."+d:u&&typeof u=="object"?u.props?"":al(u,""):u===!1?"":u}return r+s+(l??"")},"");function $0(t){let e=this||{},n=t.call?t(e.p):t;return jV(n.unshift?n.raw?TV(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,CV(e.target),e.g,e.o,e.k)}let fM,b1,w1;$0.bind({g:1});let ao=$0.bind({k:1});function kV(t,e,n,r){al.p=e,fM=t,b1=n,w1=r}function Il(t,e){let n=this||{};return function(){let r=arguments;function s(a,l){let u=Object.assign({},a),d=u.className||s.className;n.p=Object.assign({theme:b1&&b1()},u),n.o=/ *go\d+/.test(d),u.className=$0.apply(n,r)+(d?" "+d:"");let f=t;return t[0]&&(f=u.as||t,delete u.as),w1&&f[0]&&w1(u),fM(f,u)}return s}}var DV=t=>typeof t=="function",Ty=(t,e)=>DV(t)?t(e):t,AV=(()=>{let t=0;return()=>(++t).toString()})(),mM=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),RV=20,Z_="default",pM=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===e.toast.id?{...l,...e.toast}:l)};case 2:let{toast:r}=e;return pM(t,{type:t.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+a}))}}},ny=[],gM={toasts:[],pausedAt:void 0,settings:{toastLimit:RV}},ri={},yM=(t,e=Z_)=>{ri[e]=pM(ri[e]||gM,t),ny.forEach(([n,r])=>{n===e&&r(ri[e])})},xM=t=>Object.keys(ri).forEach(e=>yM(t,e)),PV=t=>Object.keys(ri).find(e=>ri[e].toasts.some(n=>n.id===t)),q0=(t=Z_)=>e=>{yM(e,t)},MV={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},LV=(t={},e=Z_)=>{let[n,r]=x.useState(ri[e]||gM),s=x.useRef(ri[e]);x.useEffect(()=>(s.current!==ri[e]&&r(ri[e]),ny.push([e,r]),()=>{let l=ny.findIndex(([u])=>u===e);l>-1&&ny.splice(l,1)}),[e]);let a=n.toasts.map(l=>{var u,d,f;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((u=t[l.type])==null?void 0:u.removeDelay)||t?.removeDelay,duration:l.duration||((d=t[l.type])==null?void 0:d.duration)||t?.duration||MV[l.type],style:{...t.style,...(f=t[l.type])==null?void 0:f.style,...l.style}}});return{...n,toasts:a}},OV=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||AV()}),Nm=t=>(e,n)=>{let r=OV(e,t,n);return q0(r.toasterId||PV(r.id))({type:2,toast:r}),r.id},ar=(t,e)=>Nm("blank")(t,e);ar.error=Nm("error");ar.success=Nm("success");ar.loading=Nm("loading");ar.custom=Nm("custom");ar.dismiss=(t,e)=>{let n={type:3,toastId:t};e?q0(e)(n):xM(n)};ar.dismissAll=t=>ar.dismiss(void 0,t);ar.remove=(t,e)=>{let n={type:4,toastId:t};e?q0(e)(n):xM(n)};ar.removeAll=t=>ar.remove(void 0,t);ar.promise=(t,e,n)=>{let r=ar.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let a=e.success?Ty(e.success,s):void 0;return a?ar.success(a,{id:r,...n,...n?.success}):ar.dismiss(r),s}).catch(s=>{let a=e.error?Ty(e.error,s):void 0;a?ar.error(a,{id:r,...n,...n?.error}):ar.dismiss(r)}),t};var IV=1e3,VV=(t,e="default")=>{let{toasts:n,pausedAt:r}=LV(t,e),s=x.useRef(new Map).current,a=x.useCallback((g,y=IV)=>{if(s.has(g))return;let w=setTimeout(()=>{s.delete(g),l({type:4,toastId:g})},y);s.set(g,w)},[]);x.useEffect(()=>{if(r)return;let g=Date.now(),y=n.map(w=>{if(w.duration===1/0)return;let _=(w.duration||0)+w.pauseDuration-(g-w.createdAt);if(_<0){w.visible&&ar.dismiss(w.id);return}return setTimeout(()=>ar.dismiss(w.id,e),_)});return()=>{y.forEach(w=>w&&clearTimeout(w))}},[n,r,e]);let l=x.useCallback(q0(e),[e]),u=x.useCallback(()=>{l({type:5,time:Date.now()})},[l]),d=x.useCallback((g,y)=>{l({type:1,toast:{id:g,height:y}})},[l]),f=x.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),m=x.useCallback((g,y)=>{let{reverseOrder:w=!1,gutter:_=8,defaultPosition:C}=y||{},S=n.filter(R=>(R.position||C)===(g.position||C)&&R.height),N=S.findIndex(R=>R.id===g.id),k=S.filter((R,A)=>A<N&&R.visible).length;return S.filter(R=>R.visible).slice(...w?[k+1]:[0,k]).reduce((R,A)=>R+(A.height||0)+_,0)},[n]);return x.useEffect(()=>{n.forEach(g=>{if(g.dismissed)a(g.id,g.removeDelay);else{let y=s.get(g.id);y&&(clearTimeout(y),s.delete(g.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:d,startPause:u,endPause:f,calculateOffset:m}}},UV=ao`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,FV=ao`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,BV=ao`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zV=Il("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${UV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${FV} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${BV} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,HV=ao`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,$V=Il("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${HV} 1s linear infinite;
`,qV=ao`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,YV=ao`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,WV=Il("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qV} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${YV} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,GV=Il("div")`
  position: absolute;
`,KV=Il("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,QV=ao`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,XV=Il("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${QV} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ZV=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?x.createElement(XV,null,e):e:n==="blank"?null:x.createElement(KV,null,x.createElement($V,{...r}),n!=="loading"&&x.createElement(GV,null,n==="error"?x.createElement(zV,{...r}):x.createElement(WV,{...r})))},JV=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,eU=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,tU="0%{opacity:0;} 100%{opacity:1;}",nU="0%{opacity:1;} 100%{opacity:0;}",rU=Il("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,sU=Il("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,aU=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=mM()?[tU,nU]:[JV(n),eU(n)];return{animation:e?`${ao(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ao(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},iU=x.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?aU(t.position||e||"top-center",t.visible):{opacity:0},a=x.createElement(ZV,{toast:t}),l=x.createElement(sU,{...t.ariaProps},Ty(t.message,t));return x.createElement(rU,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:a,message:l}):x.createElement(x.Fragment,null,a,l))});kV(x.createElement);var oU=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let a=x.useCallback(l=>{if(l){let u=()=>{let d=l.getBoundingClientRect().height;r(t,d)};u(),new MutationObserver(u).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return x.createElement("div",{ref:a,className:e,style:n},s)},lU=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mM()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},cU=$0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Sg=16,uU=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,toasterId:a,containerStyle:l,containerClassName:u})=>{let{toasts:d,handlers:f}=VV(n,a);return x.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:Sg,left:Sg,right:Sg,bottom:Sg,pointerEvents:"none",...l},className:u,onMouseEnter:f.startPause,onMouseLeave:f.endPause},d.map(m=>{let g=m.position||e,y=f.calculateOffset(m,{reverseOrder:t,gutter:r,defaultPosition:e}),w=lU(g,y);return x.createElement(oU,{id:m.id,key:m.id,onHeightUpdate:f.updateHeight,className:m.visible?cU:"",style:w},m.type==="custom"?Ty(m.message,m):s?s(m):x.createElement(iU,{toast:m,position:g}))}))},ue=ar;const J_=x.createContext({});function jm(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const eE=typeof window<"u",tE=eE?x.useLayoutEffect:x.useEffect,Y0=x.createContext(null);function nE(t,e){t.indexOf(e)===-1&&t.push(e)}function rE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const io=(t,e,n)=>n>e?e:n<t?t:n;let sE=()=>{};const oo={},vM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function bM(t){return typeof t=="object"&&t!==null}const wM=t=>/^0[^.\s]+$/u.test(t);function aE(t){let e;return()=>(e===void 0&&(e=t()),e)}const ta=t=>t,dU=(t,e)=>n=>e(t(n)),Tm=(...t)=>t.reduce(dU),rm=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};let iE=class{constructor(){this.subscriptions=[]}add(e){return nE(this.subscriptions,e),()=>rE(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const l=this.subscriptions[a];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};const oi=t=>t*1e3,ea=t=>t/1e3;function _M(t,e){return e?t*(1e3/e):0}const EM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,hU=1e-7,fU=12;function mU(t,e,n,r,s){let a,l,u=0;do l=e+(n-e)/2,a=EM(l,r,s)-t,a>0?n=l:e=l;while(Math.abs(a)>hU&&++u<fU);return l}function km(t,e,n,r){if(t===e&&n===r)return ta;const s=a=>mU(a,0,1,t,n);return a=>a===0||a===1?a:EM(s(a),e,r)}const CM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,SM=t=>e=>1-t(1-e),NM=km(.33,1.53,.69,.99),oE=SM(NM),jM=CM(oE),TM=t=>(t*=2)<1?.5*oE(t):.5*(2-Math.pow(2,-10*(t-1))),lE=t=>1-Math.sin(Math.acos(t)),kM=SM(lE),DM=CM(lE),pU=km(.42,0,1,1),gU=km(0,0,.58,1),AM=km(.42,0,.58,1),yU=t=>Array.isArray(t)&&typeof t[0]!="number",RM=t=>Array.isArray(t)&&typeof t[0]=="number",xU={linear:ta,easeIn:pU,easeInOut:AM,easeOut:gU,circIn:lE,circInOut:DM,circOut:kM,backIn:oE,backInOut:jM,backOut:NM,anticipate:TM},vU=t=>typeof t=="string",xT=t=>{if(RM(t)){sE(t.length===4);const[e,n,r,s]=t;return km(e,n,r,s)}else if(vU(t))return xU[t];return t},Ng=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function bU(t,e){let n=new Set,r=new Set,s=!1,a=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function d(m){l.has(m)&&(f.schedule(m),t()),m(u)}const f={schedule:(m,g=!1,y=!1)=>{const _=y&&s?n:r;return g&&l.add(m),_.has(m)||_.add(m),m},cancel:m=>{r.delete(m),l.delete(m)},process:m=>{if(u=m,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(d),n.clear(),s=!1,a&&(a=!1,f.process(m))}};return f}const wU=40;function PM(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=Ng.reduce((R,A)=>(R[A]=bU(a),R),{}),{setup:u,read:d,resolveKeyframes:f,preUpdate:m,update:g,preRender:y,render:w,postRender:_}=l,C=()=>{const R=oo.useManualTiming?s.timestamp:performance.now();n=!1,oo.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(R-s.timestamp,wU),1)),s.timestamp=R,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),m.process(s),g.process(s),y.process(s),w.process(s),_.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(C))},S=()=>{n=!0,r=!0,s.isProcessing||t(C)};return{schedule:Ng.reduce((R,A)=>{const L=l[A];return R[A]=(F,P=!1,O=!1)=>(n||S(),L.schedule(F,P,O)),R},{}),cancel:R=>{for(let A=0;A<Ng.length;A++)l[Ng[A]].cancel(R)},state:s,steps:l}}const{schedule:rn,cancel:lo,state:Sr,steps:sw}=PM(typeof requestAnimationFrame<"u"?requestAnimationFrame:ta,!0);let ry;function _U(){ry=void 0}const os={now:()=>(ry===void 0&&os.set(Sr.isProcessing||oo.useManualTiming?Sr.timestamp:performance.now()),ry),set:t=>{ry=t,queueMicrotask(_U)}},MM=t=>e=>typeof e=="string"&&e.startsWith(t),cE=MM("--"),EU=MM("var(--"),uE=t=>EU(t)?CU.test(t.split("/*")[0].trim()):!1,CU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,qd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},sm={...qd,transform:t=>io(0,1,t)},jg={...qd,default:1},Lf=t=>Math.round(t*1e5)/1e5,dE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function SU(t){return t==null}const NU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hE=(t,e)=>n=>!!(typeof n=="string"&&NU.test(n)&&n.startsWith(t)||e&&!SU(n)&&Object.prototype.hasOwnProperty.call(n,e)),LM=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,l,u]=r.match(dE);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},jU=t=>io(0,255,t),aw={...qd,transform:t=>Math.round(jU(t))},bc={test:hE("rgb","red"),parse:LM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+aw.transform(t)+", "+aw.transform(e)+", "+aw.transform(n)+", "+Lf(sm.transform(r))+")"};function TU(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const _1={test:hE("#"),parse:TU,transform:bc.transform},Dm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),nl=Dm("deg"),li=Dm("%"),Ge=Dm("px"),kU=Dm("vh"),DU=Dm("vw"),vT={...li,parse:t=>li.parse(t)/100,transform:t=>li.transform(t*100)},sd={test:hE("hsl","hue"),parse:LM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+li.transform(Lf(e))+", "+li.transform(Lf(n))+", "+Lf(sm.transform(r))+")"},Jn={test:t=>bc.test(t)||_1.test(t)||sd.test(t),parse:t=>bc.test(t)?bc.parse(t):sd.test(t)?sd.parse(t):_1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bc.transform(t):sd.transform(t),getAnimatableNone:t=>{const e=Jn.parse(t);return e.alpha=0,Jn.transform(e)}},AU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function RU(t){return isNaN(t)&&typeof t=="string"&&(t.match(dE)?.length||0)+(t.match(AU)?.length||0)>0}const OM="number",IM="color",PU="var",MU="var(",bT="${}",LU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function am(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const u=e.replace(LU,d=>(Jn.test(d)?(r.color.push(a),s.push(IM),n.push(Jn.parse(d))):d.startsWith(MU)?(r.var.push(a),s.push(PU),n.push(d)):(r.number.push(a),s.push(OM),n.push(parseFloat(d))),++a,bT)).split(bT);return{values:n,split:u,indexes:r,types:s}}function VM(t){return am(t).values}function UM(t){const{split:e,types:n}=am(t),r=e.length;return s=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],s[l]!==void 0){const u=n[l];u===OM?a+=Lf(s[l]):u===IM?a+=Jn.transform(s[l]):a+=s[l]}return a}}const OU=t=>typeof t=="number"?0:Jn.test(t)?Jn.getAnimatableNone(t):t;function IU(t){const e=VM(t);return UM(t)(e.map(OU))}const _l={test:RU,parse:VM,createTransformer:UM,getAnimatableNone:IU};function iw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function VU({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,l=0;if(!e)s=a=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,d=2*n-u;s=iw(d,u,t+1/3),a=iw(d,u,t),l=iw(d,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function ky(t,e){return n=>n>0?e:t}const vn=(t,e,n)=>t+(e-t)*n,ow=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},UU=[_1,bc,sd],FU=t=>UU.find(e=>e.test(t));function wT(t){const e=FU(t);if(!e)return!1;let n=e.parse(t);return e===sd&&(n=VU(n)),n}const _T=(t,e)=>{const n=wT(t),r=wT(e);if(!n||!r)return ky(t,e);const s={...n};return a=>(s.red=ow(n.red,r.red,a),s.green=ow(n.green,r.green,a),s.blue=ow(n.blue,r.blue,a),s.alpha=vn(n.alpha,r.alpha,a),bc.transform(s))},E1=new Set(["none","hidden"]);function BU(t,e){return E1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zU(t,e){return n=>vn(t,e,n)}function fE(t){return typeof t=="number"?zU:typeof t=="string"?uE(t)?ky:Jn.test(t)?_T:qU:Array.isArray(t)?FM:typeof t=="object"?Jn.test(t)?_T:HU:ky}function FM(t,e){const n=[...t],r=n.length,s=t.map((a,l)=>fE(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)n[l]=s[l](a);return n}}function HU(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=fE(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function $U(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],l=t.indexes[a][r[a]],u=t.values[l]??0;n[s]=u,r[a]++}return n}const qU=(t,e)=>{const n=_l.createTransformer(e),r=am(t),s=am(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?E1.has(t)&&!s.values.length||E1.has(e)&&!r.values.length?BU(t,e):Tm(FM($U(r,s),s.values),n):ky(t,e)};function BM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?vn(t,e,n):fE(t)(t,e)}const YU=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>rn.update(e,n),stop:()=>lo(e),now:()=>Sr.isProcessing?Sr.timestamp:os.now()}},zM=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Dy=2e4;function mE(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Dy;)e+=n,r=t.next(e);return e>=Dy?1/0:e}function WU(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(mE(r),Dy);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:ea(s)}}const GU=5;function HM(t,e,n){const r=Math.max(e-GU,0);return _M(n-t(r),e-r)}const Nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lw=.001;function KU({duration:t=Nn.duration,bounce:e=Nn.bounce,velocity:n=Nn.velocity,mass:r=Nn.mass}){let s,a,l=1-e;l=io(Nn.minDamping,Nn.maxDamping,l),t=io(Nn.minDuration,Nn.maxDuration,ea(t)),l<1?(s=f=>{const m=f*l,g=m*t,y=m-n,w=C1(f,l),_=Math.exp(-g);return lw-y/w*_},a=f=>{const g=f*l*t,y=g*n+n,w=Math.pow(l,2)*Math.pow(f,2)*t,_=Math.exp(-g),C=C1(Math.pow(f,2),l);return(-s(f)+lw>0?-1:1)*((y-w)*_)/C}):(s=f=>{const m=Math.exp(-f*t),g=(f-n)*t+1;return-lw+m*g},a=f=>{const m=Math.exp(-f*t),g=(n-f)*(t*t);return m*g});const u=5/t,d=XU(s,a,u);if(t=oi(t),isNaN(d))return{stiffness:Nn.stiffness,damping:Nn.damping,duration:t};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:t}}}const QU=12;function XU(t,e,n){let r=n;for(let s=1;s<QU;s++)r=r-t(r)/e(r);return r}function C1(t,e){return t*Math.sqrt(1-e*e)}const ZU=["duration","bounce"],JU=["stiffness","damping","mass"];function ET(t,e){return e.some(n=>t[n]!==void 0)}function eF(t){let e={velocity:Nn.velocity,stiffness:Nn.stiffness,damping:Nn.damping,mass:Nn.mass,isResolvedFromDuration:!1,...t};if(!ET(t,JU)&&ET(t,ZU))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*io(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Nn.mass,stiffness:s,damping:a}}else{const n=KU(t);e={...e,...n,mass:Nn.mass},e.isResolvedFromDuration=!0}return e}function Ay(t=Nn.visualDuration,e=Nn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:g,velocity:y,isResolvedFromDuration:w}=eF({...n,velocity:-ea(n.velocity||0)}),_=y||0,C=f/(2*Math.sqrt(d*m)),S=l-a,N=ea(Math.sqrt(d/m)),k=Math.abs(S)<5;r||(r=k?Nn.restSpeed.granular:Nn.restSpeed.default),s||(s=k?Nn.restDelta.granular:Nn.restDelta.default);let R;if(C<1){const L=C1(N,C);R=F=>{const P=Math.exp(-C*N*F);return l-P*((_+C*N*S)/L*Math.sin(L*F)+S*Math.cos(L*F))}}else if(C===1)R=L=>l-Math.exp(-N*L)*(S+(_+N*S)*L);else{const L=N*Math.sqrt(C*C-1);R=F=>{const P=Math.exp(-C*N*F),O=Math.min(L*F,300);return l-P*((_+C*N*S)*Math.sinh(O)+L*S*Math.cosh(O))/L}}const A={calculatedDuration:w&&g||null,next:L=>{const F=R(L);if(w)u.done=L>=g;else{let P=L===0?_:0;C<1&&(P=L===0?oi(_):HM(R,L,F));const O=Math.abs(P)<=r,T=Math.abs(l-F)<=s;u.done=O&&T}return u.value=u.done?l:F,u},toString:()=>{const L=Math.min(mE(A),Dy),F=zM(P=>A.next(L*P).value,L,30);return L+"ms "+F},toTransition:()=>{}};return A}Ay.applyToOptions=t=>{const e=WU(t,100,Ay);return t.ease=e.ease,t.duration=oi(e.duration),t.type="keyframes",t};function S1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:m}){const g=t[0],y={done:!1,value:g},w=O=>u!==void 0&&O<u||d!==void 0&&O>d,_=O=>u===void 0?d:d===void 0||Math.abs(u-O)<Math.abs(d-O)?u:d;let C=n*e;const S=g+C,N=l===void 0?S:l(S);N!==S&&(C=N-g);const k=O=>-C*Math.exp(-O/r),R=O=>N+k(O),A=O=>{const T=k(O),I=R(O);y.done=Math.abs(T)<=f,y.value=y.done?N:I};let L,F;const P=O=>{w(y.value)&&(L=O,F=Ay({keyframes:[y.value,_(y.value)],velocity:HM(R,O,y.value),damping:s,stiffness:a,restDelta:f,restSpeed:m}))};return P(0),{calculatedDuration:null,next:O=>{let T=!1;return!F&&L===void 0&&(T=!0,A(O),P(O)),L!==void 0&&O>=L?F.next(O-L):(!T&&A(O),y)}}}function tF(t,e,n){const r=[],s=n||oo.mix||BM,a=t.length-1;for(let l=0;l<a;l++){let u=s(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||ta:e;u=Tm(d,u)}r.push(u)}return r}function $M(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(sE(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=tF(e,r,s),d=u.length,f=m=>{if(l&&m<t[0])return e[0];let g=0;if(d>1)for(;g<t.length-2&&!(m<t[g+1]);g++);const y=rm(t[g],t[g+1],m);return u[g](y)};return n?m=>f(io(t[0],t[a-1],m)):f}function nF(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=rm(0,e,r);t.push(vn(n,1,s))}}function rF(t){const e=[0];return nF(e,t.length-1),e}function sF(t,e){return t.map(n=>n*e)}function aF(t,e){return t.map(()=>e||AM).splice(0,t.length-1)}function Of({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=yU(r)?r.map(xT):xT(r),a={done:!1,value:e[0]},l=sF(n&&n.length===e.length?n:rF(e),t),u=$M(l,e,{ease:Array.isArray(s)?s:aF(e,s)});return{calculatedDuration:t,next:d=>(a.value=u(d),a.done=d>=t,a)}}const iF=t=>t!==null;function pE(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(iF),u=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!u||r===void 0?a[u]:r}const oF={decay:S1,inertia:S1,tween:Of,keyframes:Of,spring:Ay};function qM(t){typeof t.type=="string"&&(t.type=oF[t.type])}class gE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const lF=t=>t/100;class W0 extends gE{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==os.now()&&this.tick(os.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;qM(e);const{type:n=Of,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:l=0}=e;let{keyframes:u}=e;const d=n||Of;d!==Of&&typeof u[0]!="number"&&(this.mixKeyframes=Tm(lF,BM(u[0],u[1])),u=[0,100]);const f=d({...e,keyframes:u});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=mE(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:m,repeat:g,repeatType:y,repeatDelay:w,type:_,onUpdate:C,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const N=this.currentTime-f*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?N<0:N>s;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let R=this.currentTime,A=r;if(g){const O=Math.min(this.currentTime,s)/u;let T=Math.floor(O),I=O%1;!I&&O>=1&&(I=1),I===1&&T--,T=Math.min(T,g+1),!!(T%2)&&(y==="reverse"?(I=1-I,w&&(I-=w/u)):y==="mirror"&&(A=l)),R=io(0,1,I)*u}const L=k?{done:!1,value:m[0]}:A.next(R);a&&(L.value=a(L.value));let{done:F}=L;!k&&d!==null&&(F=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return P&&_!==S1&&(L.value=pE(m,this.options,S,this.speed)),C&&C(L.value),P&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return ea(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ea(e)}get time(){return ea(this.currentTime)}set time(e){e=oi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(os.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ea(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=YU,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(os.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function cF(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wc=t=>t*180/Math.PI,N1=t=>{const e=wc(Math.atan2(t[1],t[0]));return j1(e)},uF={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:N1,rotateZ:N1,skewX:t=>wc(Math.atan(t[1])),skewY:t=>wc(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},j1=t=>(t=t%360,t<0&&(t+=360),t),CT=N1,ST=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),NT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),dF={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ST,scaleY:NT,scale:t=>(ST(t)+NT(t))/2,rotateX:t=>j1(wc(Math.atan2(t[6],t[5]))),rotateY:t=>j1(wc(Math.atan2(-t[2],t[0]))),rotateZ:CT,rotate:CT,skewX:t=>wc(Math.atan(t[4])),skewY:t=>wc(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function T1(t){return t.includes("scale")?1:0}function k1(t,e){if(!t||t==="none")return T1(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=dF,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=uF,s=u}if(!s)return T1(e);const a=r[e],l=s[1].split(",").map(fF);return typeof a=="function"?a(l):l[a]}const hF=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return k1(n,e)};function fF(t){return parseFloat(t.trim())}const Yd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wd=new Set(Yd),jT=t=>t===qd||t===Ge,mF=new Set(["x","y","z"]),pF=Yd.filter(t=>!mF.has(t));function gF(t){const e=[];return pF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Sc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>k1(e,"x"),y:(t,{transform:e})=>k1(e,"y")};Sc.translateX=Sc.x;Sc.translateY=Sc.y;const Nc=new Set;let D1=!1,A1=!1,R1=!1;function YM(){if(A1){const t=Array.from(Nc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=gF(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,l])=>{r.getValue(a)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}A1=!1,D1=!1,Nc.forEach(t=>t.complete(R1)),Nc.clear()}function WM(){Nc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(A1=!0)})}function yF(){R1=!0,WM(),YM(),R1=!1}class yE{constructor(e,n,r,s,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Nc.add(this),D1||(D1=!0,rn.read(WM),rn.resolveKeyframes(YM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const u=r.readValue(n,l);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=l),s&&a===void 0&&s.set(e[0])}cF(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Nc.delete(this)}cancel(){this.state==="scheduled"&&(Nc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const xF=t=>t.startsWith("--");function vF(t,e,n){xF(e)?t.style.setProperty(e,n):t.style[e]=n}const bF=aE(()=>window.ScrollTimeline!==void 0),wF={};function _F(t,e){const n=aE(t);return()=>wF[e]??n()}const GM=_F(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cf=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,TT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cf([0,.65,.55,1]),circOut:Cf([.55,0,1,.45]),backIn:Cf([.31,.01,.66,-.59]),backOut:Cf([.33,1.53,.69,.99])};function KM(t,e){if(t)return typeof t=="function"?GM()?zM(t,e):"ease-out":RM(t)?Cf(t):Array.isArray(t)?t.map(n=>KM(n,e)||TT.easeOut):TT[t]}function EF(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:l="loop",ease:u="easeOut",times:d}={},f=void 0){const m={[e]:n};d&&(m.offset=d);const g=KM(u,s);Array.isArray(g)&&(m.easing=g);const y={delay:r,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),t.animate(m,y)}function QM(t){return typeof t=="function"&&"applyToOptions"in t}function CF({type:t,...e}){return QM(t)&&GM()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class SF extends gE{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:u,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,sE(typeof e.type!="string");const f=CF(e);this.animation=EF(n,r,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=pE(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(m):vF(n,r,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ea(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ea(e)}get time(){return ea(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=oi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&bF()?(this.animation.timeline=e,ta):n(this)}}const XM={anticipate:TM,backInOut:jM,circInOut:DM};function NF(t){return t in XM}function jF(t){typeof t.ease=="string"&&NF(t.ease)&&(t.ease=XM[t.ease])}const kT=10;class TF extends SF{constructor(e){jF(e),qM(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new W0({...l,autoplay:!1}),d=oi(this.finishedTime??this.time);n.setWithVelocity(u.sample(d-kT).value,u.sample(d).value,kT),u.stop()}}const DT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(_l.test(t)||t==="0")&&!t.startsWith("url("));function kF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function DF(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=DT(s,e),u=DT(a,e);return!l||!u?!1:kF(t)||(n==="spring"||QM(n))&&r}function P1(t){t.duration=0,t.type="keyframes"}const AF=new Set(["opacity","clipPath","filter","transform"]),RF=aE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function PF(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return RF()&&n&&AF.has(n)&&(n!=="transform"||!f)&&!d&&!r&&s!=="mirror"&&a!==0&&l!=="inertia"}const MF=40;class LF extends gE{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:l="loop",keyframes:u,name:d,motionValue:f,element:m,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=os.now();const y={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:l,name:d,motionValue:f,element:m,...g},w=m?.KeyframeResolver||yE;this.keyframeResolver=new w(u,(_,C,S)=>this.onKeyframesResolved(_,C,y,!S),d,f,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:a,type:l,velocity:u,delay:d,isHandoff:f,onUpdate:m}=r;this.resolvedAt=os.now(),DF(e,a,l,u)||((oo.instantAnimations||!d)&&m?.(pE(e,r,n)),e[0]=e[e.length-1],P1(r),r.repeat=0);const y={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>MF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},w=!f&&PF(y)?new TF({...y,element:y.motionValue.owner.current}):new W0(y);w.finished.then(()=>this.notifyFinished()).catch(ta),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),yF()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const OF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function IF(t){const e=OF.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function ZM(t,e,n=1){const[r,s]=IF(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return vM(l)?parseFloat(l):l}return uE(s)?ZM(s,e,n+1):s}function xE(t,e){return t?.[e]??t?.default??t}const JM=new Set(["width","height","top","left","right","bottom",...Yd]),VF={test:t=>t==="auto",parse:t=>t},eL=t=>e=>e.test(t),tL=[qd,Ge,li,nl,DU,kU,VF],AT=t=>tL.find(eL(t));function UF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wM(t):!0}const FF=new Set(["brightness","contrast","saturate","opacity"]);function BF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(dE)||[];if(!r)return t;const s=n.replace(r,"");let a=FF.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const zF=/\b([a-z-]*)\(.*?\)/gu,M1={..._l,getAnimatableNone:t=>{const e=t.match(zF);return e?e.map(BF).join(" "):t}},RT={...qd,transform:Math.round},HF={rotate:nl,rotateX:nl,rotateY:nl,rotateZ:nl,scale:jg,scaleX:jg,scaleY:jg,scaleZ:jg,skew:nl,skewX:nl,skewY:nl,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:sm,originX:vT,originY:vT,originZ:Ge},vE={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,radius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,backgroundPositionX:Ge,backgroundPositionY:Ge,...HF,zIndex:RT,fillOpacity:sm,strokeOpacity:sm,numOctaves:RT},$F={...vE,color:Jn,backgroundColor:Jn,outlineColor:Jn,fill:Jn,stroke:Jn,borderColor:Jn,borderTopColor:Jn,borderRightColor:Jn,borderBottomColor:Jn,borderLeftColor:Jn,filter:M1,WebkitFilter:M1},nL=t=>$F[t];function rL(t,e){let n=nL(t);return n!==M1&&(n=_l),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const qF=new Set(["auto","none","0"]);function YF(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!qF.has(a)&&am(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=rL(n,s)}class WF extends yE{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),uE(f))){const m=ZM(f,n.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!JM.has(r)||e.length!==2)return;const[s,a]=e,l=AT(s),u=AT(a);if(l!==u)if(jT(l)&&jT(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else Sc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||UF(e[s]))&&r.push(s);r.length&&YF(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=Sc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function GF(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const sL=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function aL(t){return bM(t)&&"offsetHeight"in t}const PT=30,KF=t=>!isNaN(parseFloat(t)),If={current:void 0};class QF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=os.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=os.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=KF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new iE);const r=this.events[e].add(n);return e==="change"?()=>{r(),rn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return If.current&&If.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=os.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>PT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,PT);return _M(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mc(t,e){return new QF(t,e)}const{schedule:bE}=PM(queueMicrotask,!1),wa={x:!1,y:!1};function iL(){return wa.x||wa.y}function XF(t){return t==="x"||t==="y"?wa[t]?null:(wa[t]=!0,()=>{wa[t]=!1}):wa.x||wa.y?null:(wa.x=wa.y=!0,()=>{wa.x=wa.y=!1})}function oL(t,e){const n=GF(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function MT(t){return!(t.pointerType==="touch"||iL())}function ZF(t,e,n={}){const[r,s,a]=oL(t,n),l=u=>{if(!MT(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const m=g=>{MT(g)&&(f(g),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),a}const lL=(t,e)=>e?t===e?!0:lL(t,e.parentElement):!1,wE=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,JF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function eB(t){return JF.has(t.tagName)||t.tabIndex!==-1}const sy=new WeakSet;function LT(t){return e=>{e.key==="Enter"&&t(e)}}function cw(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const tB=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=LT(()=>{if(sy.has(n))return;cw(n,"down");const s=LT(()=>{cw(n,"up")}),a=()=>cw(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function OT(t){return wE(t)&&!iL()}function nB(t,e,n={}){const[r,s,a]=oL(t,n),l=u=>{const d=u.currentTarget;if(!OT(u))return;sy.add(d);const f=e(d,u),m=(w,_)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",y),sy.has(d)&&sy.delete(d),OT(w)&&typeof f=="function"&&f(w,{success:_})},g=w=>{m(w,d===window||d===document||n.useGlobalTarget||lL(d,w.target))},y=w=>{m(w,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",y,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),aL(u)&&(u.addEventListener("focus",f=>tB(f,s)),!eB(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),a}function cL(t){return bM(t)&&"ownerSVGElement"in t}function rB(t){return cL(t)&&t.tagName==="svg"}function sB(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],s=t[1+n],a=t[2+n],l=t[3+n],u=$M(s,a,l);return e?u(r):u}const pr=t=>!!(t&&t.getVelocity);function aB(t,e,n){const r=t.get();let s=null,a=r,l;const u=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,d=()=>{s&&(s.stop(),s=null)},f=()=>{d(),s=new W0({keyframes:[VT(t.get()),VT(a)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:l})};if(t.attach((m,g)=>{a=m,l=y=>g(IT(y,u)),rn.postRender(f)},d),pr(e)){const m=e.on("change",y=>t.set(IT(y,u))),g=t.on("destroy",m);return()=>{m(),g()}}return d}function IT(t,e){return e?t+e:t}function VT(t){return typeof t=="number"?t:parseFloat(t)}const iB=[...tL,Jn,_l],oB=t=>iB.find(eL(t)),Am=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function UT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function lB(...t){return e=>{let n=!1;const r=t.map(s=>{const a=UT(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():UT(t[s],null)}}}}function cB(...t){return x.useCallback(lB(...t),t)}class uB extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=aL(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dB({children:t,isPresent:e,anchorX:n,root:r}){const s=x.useId(),a=x.useRef(null),l=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=x.useContext(Am),d=cB(a,t?.ref);return x.useInsertionEffect(()=>{const{width:f,height:m,top:g,left:y,right:w}=l.current;if(e||!a.current||!f||!m)return;const _=n==="left"?`left: ${y}`:`right: ${w}`;a.current.dataset.motionPopId=s;const C=document.createElement("style");u&&(C.nonce=u);const S=r??document.head;return S.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${m}px !important;
            ${_}px !important;
            top: ${g}px !important;
          }
        `),()=>{S.contains(C)&&S.removeChild(C)}},[e]),i.jsx(uB,{isPresent:e,childRef:a,sizeRef:l,children:x.cloneElement(t,{ref:d})})}const hB=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:l,anchorX:u,root:d})=>{const f=jm(fB),m=x.useId();let g=!0,y=x.useMemo(()=>(g=!1,{id:m,initial:e,isPresent:n,custom:s,onExitComplete:w=>{f.set(w,!0);for(const _ of f.values())if(!_)return;r&&r()},register:w=>(f.set(w,!1),()=>f.delete(w))}),[n,f,r]);return a&&g&&(y={...y}),x.useMemo(()=>{f.forEach((w,_)=>f.set(_,!1))},[n]),x.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),l==="popLayout"&&(t=i.jsx(dB,{isPresent:n,anchorX:u,root:d,children:t})),i.jsx(Y0.Provider,{value:y,children:t})};function fB(){return new Map}function uL(t=!0){const e=x.useContext(Y0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=x.useId();x.useEffect(()=>{if(t)return s(a)},[t]);const l=x.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,l]:[!0]}const Tg=t=>t.key||"";function FT(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const Ta=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:l=!1,anchorX:u="left",root:d})=>{const[f,m]=uL(l),g=x.useMemo(()=>FT(t),[t]),y=l&&!f?[]:g.map(Tg),w=x.useRef(!0),_=x.useRef(g),C=jm(()=>new Map),[S,N]=x.useState(g),[k,R]=x.useState(g);tE(()=>{w.current=!1,_.current=g;for(let F=0;F<k.length;F++){const P=Tg(k[F]);y.includes(P)?C.delete(P):C.get(P)!==!0&&C.set(P,!1)}},[k,y.length,y.join("-")]);const A=[];if(g!==S){let F=[...g];for(let P=0;P<k.length;P++){const O=k[P],T=Tg(O);y.includes(T)||(F.splice(P,0,O),A.push(O))}return a==="wait"&&A.length&&(F=A),R(FT(F)),N(g),null}const{forceRender:L}=x.useContext(J_);return i.jsx(i.Fragment,{children:k.map(F=>{const P=Tg(F),O=l&&!f?!1:g===k||y.includes(P),T=()=>{if(C.has(P))C.set(P,!0);else return;let I=!0;C.forEach(V=>{V||(I=!1)}),I&&(L?.(),R(_.current),l&&m?.(),r&&r())};return i.jsx(hB,{isPresent:O,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:d,onExitComplete:O?void 0:T,anchorX:u,children:F},P)})})},dL=x.createContext({strict:!1}),BT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jd={};for(const t in BT)jd[t]={isEnabled:e=>BT[t].some(n=>!!e[n])};function mB(t){for(const e in t)jd[e]={...jd[e],...t[e]}}const pB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ry(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||pB.has(t)}let hL=t=>!Ry(t);function gB(t){typeof t=="function"&&(hL=e=>e.startsWith("on")?!Ry(e):t(e))}try{gB(require("@emotion/is-prop-valid").default)}catch{}function yB(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(hL(s)||n===!0&&Ry(s)||!e&&!Ry(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const G0=x.createContext({});function K0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function im(t){return typeof t=="string"||Array.isArray(t)}const _E=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],EE=["initial",..._E];function Q0(t){return K0(t.animate)||EE.some(e=>im(t[e]))}function fL(t){return!!(Q0(t)||t.variants)}function xB(t,e){if(Q0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||im(n)?n:void 0,animate:im(r)?r:void 0}}return t.inherit!==!1?e:{}}function vB(t){const{initial:e,animate:n}=xB(t,x.useContext(G0));return x.useMemo(()=>({initial:e,animate:n}),[zT(e),zT(n)])}function zT(t){return Array.isArray(t)?t.join(" "):t}const om={};function bB(t){for(const e in t)om[e]=t[e],cE(e)&&(om[e].isCSSVariable=!0)}function mL(t,{layout:e,layoutId:n}){return Wd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!om[t]||t==="opacity")}const wB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_B=Yd.length;function EB(t,e,n){let r="",s=!0;for(let a=0;a<_B;a++){const l=Yd[a],u=t[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||n){const f=sL(u,vE[l]);if(!d){s=!1;const m=wB[l]||l;r+=`${m}(${f}) `}n&&(e[l]=f)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function CE(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let l=!1,u=!1;for(const d in e){const f=e[d];if(Wd.has(d)){l=!0;continue}else if(cE(d)){s[d]=f;continue}else{const m=sL(f,vE[d]);d.startsWith("origin")?(u=!0,a[d]=m):r[d]=m}}if(e.transform||(l||n?r.transform=EB(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;r.transformOrigin=`${d} ${f} ${m}`}}const SE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function pL(t,e,n){for(const r in e)!pr(e[r])&&!mL(r,n)&&(t[r]=e[r])}function CB({transformTemplate:t},e){return x.useMemo(()=>{const n=SE();return CE(n,e,t),Object.assign({},n.vars,n.style)},[e])}function SB(t,e){const n=t.style||{},r={};return pL(r,n,t),Object.assign(r,CB(t,e)),r}function NB(t,e){const n={},r=SB(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const jB={offset:"stroke-dashoffset",array:"stroke-dasharray"},TB={offset:"strokeDashoffset",array:"strokeDasharray"};function kB(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?jB:TB;t[a.offset]=Ge.transform(-r);const l=Ge.transform(e),u=Ge.transform(n);t[a.array]=`${l} ${u}`}function gL(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:l=0,...u},d,f,m){if(CE(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:y}=t;g.transform&&(y.transform=g.transform,delete g.transform),(y.transform||g.transformOrigin)&&(y.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),y.transform&&(y.transformBox=m?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),s!==void 0&&kB(g,s,a,l,!1)}const yL=()=>({...SE(),attrs:{}}),xL=t=>typeof t=="string"&&t.toLowerCase()==="svg";function DB(t,e,n,r){const s=x.useMemo(()=>{const a=yL();return gL(a,e,xL(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};pL(a,t.style,t),s.style={...a,...s.style}}return s}const AB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function NE(t){return typeof t!="string"||t.includes("-")?!1:!!(AB.indexOf(t)>-1||/[A-Z]/u.test(t))}function RB(t,e,n,{latestValues:r},s,a=!1){const u=(NE(t)?DB:NB)(e,r,s,t),d=yB(e,typeof t=="string",a),f=t!==x.Fragment?{...d,...u,ref:n}:{},{children:m}=e,g=x.useMemo(()=>pr(m)?m.get():m,[m]);return x.createElement(t,{...f,children:g})}function HT(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function jE(t,e,n,r){if(typeof e=="function"){const[s,a]=HT(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=HT(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function ay(t){return pr(t)?t.get():t}function PB({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:MB(n,r,s,t),renderState:e()}}function MB(t,e,n,r){const s={},a=r(t,{});for(const y in a)s[y]=ay(a[y]);let{initial:l,animate:u}=t;const d=Q0(t),f=fL(t);e&&f&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||l===!1;const g=m?u:l;if(g&&typeof g!="boolean"&&!K0(g)){const y=Array.isArray(g)?g:[g];for(let w=0;w<y.length;w++){const _=jE(t,y[w]);if(_){const{transitionEnd:C,transition:S,...N}=_;for(const k in N){let R=N[k];if(Array.isArray(R)){const A=m?R.length-1:0;R=R[A]}R!==null&&(s[k]=R)}for(const k in C)s[k]=C[k]}}}return s}const vL=t=>(e,n)=>{const r=x.useContext(G0),s=x.useContext(Y0),a=()=>PB(t,e,r,s);return n?a():jm(a)};function TE(t,e,n){const{style:r}=t,s={};for(const a in r)(pr(r[a])||e.style&&pr(e.style[a])||mL(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const LB=vL({scrapeMotionValuesFromProps:TE,createRenderState:SE});function bL(t,e,n){const r=TE(t,e,n);for(const s in t)if(pr(t[s])||pr(e[s])){const a=Yd.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const OB=vL({scrapeMotionValuesFromProps:bL,createRenderState:yL}),IB=Symbol.for("motionComponentSymbol");function ad(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function VB(t,e,n){return x.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ad(n)&&(n.current=r))},[e])}const kE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),UB="framerAppearId",wL="data-"+kE(UB),_L=x.createContext({});function FB(t,e,n,r,s){const{visualElement:a}=x.useContext(G0),l=x.useContext(dL),u=x.useContext(Y0),d=x.useContext(Am).reducedMotion,f=x.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,g=x.useContext(_L);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&BB(f.current,n,s,g);const y=x.useRef(!1);x.useInsertionEffect(()=>{m&&y.current&&m.update(n,u)});const w=n[wL],_=x.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return tE(()=>{m&&(y.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),_.current&&m.animationState&&m.animationState.animateChanges())}),x.useEffect(()=>{m&&(!_.current&&m.animationState&&m.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),_.current=!1),m.enteringChildren=void 0)}),m}function BB(t,e,n,r){const{layoutId:s,layout:a,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:EL(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!l||u&&ad(u),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:d,layoutRoot:f})}function EL(t){if(t)return t.options.allowProjection!==!1?t.projection:EL(t.parent)}function uw(t,{forwardMotionProps:e=!1}={},n,r){n&&mB(n);const s=NE(t)?OB:LB;function a(u,d){let f;const m={...x.useContext(Am),...u,layoutId:zB(u)},{isStatic:g}=m,y=vB(u),w=s(u,g);if(!g&&eE){HB();const _=$B(m);f=_.MeasureLayout,y.visualElement=FB(t,w,m,r,_.ProjectionNode)}return i.jsxs(G0.Provider,{value:y,children:[f&&y.visualElement?i.jsx(f,{visualElement:y.visualElement,...m}):null,RB(t,u,VB(w,y.visualElement,d),w,g,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=x.forwardRef(a);return l[IB]=t,l}function zB({layoutId:t}){const e=x.useContext(J_).id;return e&&t!==void 0?e+"-"+t:t}function HB(t,e){x.useContext(dL).strict}function $B(t){const{drag:e,layout:n}=jd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function qB(t,e){if(typeof Proxy>"u")return uw;const n=new Map,r=(a,l)=>uw(a,l,t,e),s=(a,l)=>r(a,l);return new Proxy(s,{get:(a,l)=>l==="create"?r:(n.has(l)||n.set(l,uw(l,void 0,t,e)),n.get(l))})}function CL({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function YB({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function WB(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function dw(t){return t===void 0||t===1}function L1({scale:t,scaleX:e,scaleY:n}){return!dw(t)||!dw(e)||!dw(n)}function mc(t){return L1(t)||SL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function SL(t){return $T(t.x)||$T(t.y)}function $T(t){return t&&t!=="0%"}function Py(t,e,n){const r=t-n,s=e*r;return n+s}function qT(t,e,n,r,s){return s!==void 0&&(t=Py(t,s,r)),Py(t,n,r)+e}function O1(t,e=0,n=1,r,s){t.min=qT(t.min,e,n,r,s),t.max=qT(t.max,e,n,r,s)}function NL(t,{x:e,y:n}){O1(t.x,e.translate,e.scale,e.originPoint),O1(t.y,n.translate,n.scale,n.originPoint)}const YT=.999999999999,WT=1.0000000000001;function GB(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,l;for(let u=0;u<s;u++){a=n[u],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&od(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,NL(t,l)),r&&mc(a.latestValues)&&od(t,a.latestValues))}e.x<WT&&e.x>YT&&(e.x=1),e.y<WT&&e.y>YT&&(e.y=1)}function id(t,e){t.min=t.min+e,t.max=t.max+e}function GT(t,e,n,r,s=.5){const a=vn(t.min,t.max,s);O1(t,e,n,a,r)}function od(t,e){GT(t.x,e.x,e.scaleX,e.scale,e.originX),GT(t.y,e.y,e.scaleY,e.scale,e.originY)}function jL(t,e){return CL(WB(t.getBoundingClientRect(),e))}function KB(t,e,n){const r=jL(t,n),{scroll:s}=e;return s&&(id(r.x,s.offset.x),id(r.y,s.offset.y)),r}const KT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ld=()=>({x:KT(),y:KT()}),QT=()=>({min:0,max:0}),sr=()=>({x:QT(),y:QT()}),I1={current:null},TL={current:!1};function QB(){if(TL.current=!0,!!eE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>I1.current=t.matches;t.addEventListener("change",e),e()}else I1.current=!1}const XB=new WeakMap;function ZB(t,e,n){for(const r in e){const s=e[r],a=n[r];if(pr(s))t.addValue(r,s);else if(pr(a))t.addValue(r,Mc(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,Mc(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const XT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class JB{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=os.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,rn.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!a,this.isControllingVariants=Q0(n),this.isVariantNode=fL(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in g){const w=g[y];d[y]!==void 0&&pr(w)&&w.set(d[y])}}mount(e){this.current=e,XB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),TL.current||QB(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:I1.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),lo(this.notifyUpdate),lo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Wd.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&rn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in jd){const n=jd[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):sr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<XT.length;r++){const s=XT[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,l=e[a];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=ZB(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Mc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(vM(r)||wM(r))?r=parseFloat(r):!oB(r)&&_l.test(n)&&(r=rL(e,n)),this.setBaseTarget(e,pr(r)?r.get():r)),pr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=jE(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!pr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new iE),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){bE.render(this.render)}}class kL extends JB{constructor(){super(...arguments),this.KeyframeResolver=WF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function DL(t,{style:e,vars:n},r,s){const a=t.style;let l;for(l in e)a[l]=e[l];s?.applyProjectionStyles(a,r);for(l in n)a.setProperty(l,n[l])}function ez(t){return window.getComputedStyle(t)}class tz extends kL{constructor(){super(...arguments),this.type="html",this.renderInstance=DL}readValueFromInstance(e,n){if(Wd.has(n))return this.projection?.isProjecting?T1(n):hF(e,n);{const r=ez(e),s=(cE(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jL(e,n)}build(e,n,r){CE(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return TE(e,n,r)}}const AL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nz(t,e,n,r){DL(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(AL.has(s)?s:kE(s),e.attrs[s])}class rz extends kL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=sr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Wd.has(n)){const r=nL(n);return r&&r.default||0}return n=AL.has(n)?n:kE(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return bL(e,n,r)}build(e,n,r){gL(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){nz(e,n,r,s)}mount(e){this.isSVGTag=xL(e.tagName),super.mount(e)}}const sz=(t,e)=>NE(t)?new rz(e):new tz(e,{allowProjection:t!==x.Fragment});function gd(t,e,n){const r=t.getProps();return jE(r,e,n!==void 0?n:r.custom,t)}const V1=t=>Array.isArray(t);function az(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Mc(n))}function iz(t){return V1(t)?t[t.length-1]||0:t}function oz(t,e){const n=gd(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const l in a){const u=iz(a[l]);az(t,l,u)}}function lz(t){return!!(pr(t)&&t.add)}function U1(t,e){const n=t.getValue("willChange");if(lz(n))return n.add(e);if(!n&&oo.WillChange){const r=new oo.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function RL(t){return t.props[wL]}const cz=t=>t!==null;function uz(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(cz),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const dz={type:"spring",stiffness:500,damping:25,restSpeed:10},hz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fz={type:"keyframes",duration:.8},mz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pz=(t,{keyframes:e})=>e.length>2?fz:Wd.has(t)?t.startsWith("scale")?hz(e[1]):dz:mz;function gz({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:l,repeatDelay:u,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const DE=(t,e,n,r={},s,a)=>l=>{const u=xE(r,t)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-oi(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:y=>{e.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:a?void 0:s};gz(u)||Object.assign(m,pz(t,m)),m.duration&&(m.duration=oi(m.duration)),m.repeatDelay&&(m.repeatDelay=oi(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let g=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(P1(m),m.delay===0&&(g=!0)),(oo.instantAnimations||oo.skipAnimations)&&(g=!0,P1(m),m.delay=0),m.allowFlatten=!u.type&&!u.ease,g&&!a&&e.get()!==void 0){const y=uz(m.keyframes,u);if(y!==void 0){rn.update(()=>{m.onUpdate(y),m.onComplete()});return}}return u.isSync?new W0(m):new LF(m)};function yz({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function PL(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(a=r);const d=[],f=s&&t.animationState&&t.animationState.getState()[s];for(const m in u){const g=t.getValue(m,t.latestValues[m]??null),y=u[m];if(y===void 0||f&&yz(f,m))continue;const w={delay:n,...xE(a||{},m)},_=g.get();if(_!==void 0&&!g.isAnimating&&!Array.isArray(y)&&y===_&&!w.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const N=RL(t);if(N){const k=window.MotionHandoffAnimation(N,m,rn);k!==null&&(w.startTime=k,C=!0)}}U1(t,m),g.start(DE(m,g,y,t.shouldReduceMotion&&JM.has(m)?{type:!1}:w,t,C));const S=g.animation;S&&d.push(S)}return l&&Promise.all(d).then(()=>{rn.update(()=>{l&&oz(t,l)})}),d}function ML(t,e,n,r=0,s=1){const a=Array.from(t).sort((f,m)=>f.sortNodePosition(m)).indexOf(e),l=t.size,u=(l-1)*r;return typeof n=="function"?n(a,l):s===1?a*r:u-a*r}function F1(t,e,n={}){const r=gd(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(PL(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:g}=s;return xz(t,e,d,f,m,g,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,f]=u==="beforeChildren"?[a,l]:[l,a];return d().then(()=>f())}else return Promise.all([a(),l(n.delay)])}function xz(t,e,n=0,r=0,s=0,a=1,l){const u=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),u.push(F1(d,e,{...l,delay:n+(typeof r=="function"?0:r)+ML(t.variantChildren,d,r,s,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(u)}function vz(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>F1(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=F1(t,e,n);else{const s=typeof e=="function"?gd(t,e,n.custom):e;r=Promise.all(PL(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function LL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const bz=EE.length;function OL(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?OL(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<bz;n++){const r=EE[n],s=t.props[r];(im(s)||s===!1)&&(e[r]=s)}return e}const wz=[..._E].reverse(),_z=_E.length;function Ez(t){return e=>Promise.all(e.map(({animation:n,options:r})=>vz(t,n,r)))}function Cz(t){let e=Ez(t),n=ZT(),r=!0;const s=d=>(f,m)=>{const g=gd(t,m,d==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:y,transitionEnd:w,..._}=g;f={...f,..._,...w}}return f};function a(d){e=d(t)}function l(d){const{props:f}=t,m=OL(t.parent)||{},g=[],y=new Set;let w={},_=1/0;for(let S=0;S<_z;S++){const N=wz[S],k=n[N],R=f[N]!==void 0?f[N]:m[N],A=im(R),L=N===d?k.isActive:null;L===!1&&(_=S);let F=R===m[N]&&R!==f[N]&&A;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),k.protectedKeys={...w},!k.isActive&&L===null||!R&&!k.prevProp||K0(R)||typeof R=="boolean")continue;const P=Sz(k.prevProp,R);let O=P||N===d&&k.isActive&&!F&&A||S>_&&A,T=!1;const I=Array.isArray(R)?R:[R];let V=I.reduce(s(N),{});L===!1&&(V={});const{prevResolvedValues:$={}}=k,U={...$,...V},G=q=>{O=!0,y.has(q)&&(T=!0,y.delete(q)),k.needsAnimating[q]=!0;const K=t.getValue(q);K&&(K.liveStyle=!1)};for(const q in U){const K=V[q],X=$[q];if(w.hasOwnProperty(q))continue;let se=!1;V1(K)&&V1(X)?se=!LL(K,X):se=K!==X,se?K!=null?G(q):y.add(q):K!==void 0&&y.has(q)?G(q):k.protectedKeys[q]=!0}k.prevProp=R,k.prevResolvedValues=V,k.isActive&&(w={...w,...V}),r&&t.blockInitialAnimation&&(O=!1);const W=F&&P;O&&(!W||T)&&g.push(...I.map(q=>{const K={type:N};if(typeof q=="string"&&r&&!W&&t.manuallyAnimateOnMount&&t.parent){const{parent:X}=t,se=gd(X,q);if(X.enteringChildren&&se){const{delayChildren:H}=se.transition||{};K.delay=ML(X.enteringChildren,t,H)}}return{animation:q,options:K}}))}if(y.size){const S={};if(typeof f.initial!="boolean"){const N=gd(t,Array.isArray(f.initial)?f.initial[0]:f.initial);N&&N.transition&&(S.transition=N.transition)}y.forEach(N=>{const k=t.getBaseTarget(N),R=t.getValue(N);R&&(R.liveStyle=!0),S[N]=k??null}),g.push({animation:S})}let C=!!g.length;return r&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(g):Promise.resolve()}function u(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(d,f)),n[d].isActive=f;const m=l(d);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:l,setActive:u,setAnimateFunction:a,getState:()=>n,reset:()=>{n=ZT()}}}function Sz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LL(e,t):!1}function hc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZT(){return{animate:hc(!0),whileInView:hc(),whileHover:hc(),whileTap:hc(),whileDrag:hc(),whileFocus:hc(),exit:hc()}}class Vl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Nz extends Vl{constructor(e){super(e),e.animationState||(e.animationState=Cz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();K0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let jz=0;class Tz extends Vl{constructor(){super(...arguments),this.id=jz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const kz={animation:{Feature:Nz},exit:{Feature:Tz}};function lm(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Rm(t){return{point:{x:t.pageX,y:t.pageY}}}const Dz=t=>e=>wE(e)&&t(e,Rm(e));function Vf(t,e,n,r){return lm(t,e,Dz(n),r)}const IL=1e-4,Az=1-IL,Rz=1+IL,VL=.01,Pz=0-VL,Mz=0+VL;function Hr(t){return t.max-t.min}function Lz(t,e,n){return Math.abs(t-e)<=n}function JT(t,e,n,r=.5){t.origin=r,t.originPoint=vn(e.min,e.max,t.origin),t.scale=Hr(n)/Hr(e),t.translate=vn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Az&&t.scale<=Rz||isNaN(t.scale))&&(t.scale=1),(t.translate>=Pz&&t.translate<=Mz||isNaN(t.translate))&&(t.translate=0)}function Uf(t,e,n,r){JT(t.x,e.x,n.x,r?r.originX:void 0),JT(t.y,e.y,n.y,r?r.originY:void 0)}function ek(t,e,n){t.min=n.min+e.min,t.max=t.min+Hr(e)}function Oz(t,e,n){ek(t.x,e.x,n.x),ek(t.y,e.y,n.y)}function tk(t,e,n){t.min=e.min-n.min,t.max=t.min+Hr(e)}function My(t,e,n){tk(t.x,e.x,n.x),tk(t.y,e.y,n.y)}function qs(t){return[t("x"),t("y")]}const UL=({current:t})=>t?t.ownerDocument.defaultView:null,nk=(t,e)=>Math.abs(t-e);function Iz(t,e){const n=nk(t.x,e.x),r=nk(t.y,e.y);return Math.sqrt(n**2+r**2)}class FL{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=fw(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,_=Iz(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!_)return;const{point:C}=y,{timestamp:S}=Sr;this.history.push({...C,timestamp:S});const{onStart:N,onMove:k}=this.handlers;w||(N&&N(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=hw(w,this.transformPagePoint),rn.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:_,onSessionEnd:C,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=fw(y.type==="pointercancel"?this.lastMoveEventInfo:hw(w,this.transformPagePoint),this.history);this.startEvent&&_&&_(y,N),C&&C(y,N)},!wE(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const u=Rm(e),d=hw(u,this.transformPagePoint),{point:f}=d,{timestamp:m}=Sr;this.history=[{...f,timestamp:m}];const{onSessionStart:g}=n;g&&g(e,fw(d,this.history)),this.removeListeners=Tm(Vf(this.contextWindow,"pointermove",this.handlePointerMove),Vf(this.contextWindow,"pointerup",this.handlePointerUp),Vf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lo(this.updatePoint)}}function hw(t,e){return e?{point:e(t.point)}:t}function rk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fw({point:t},e){return{point:t,delta:rk(t,BL(e)),offset:rk(t,Vz(e)),velocity:Uz(e,.1)}}function Vz(t){return t[0]}function BL(t){return t[t.length-1]}function Uz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=BL(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>oi(e)));)n--;if(!r)return{x:0,y:0};const a=ea(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Fz(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?vn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?vn(n,t,r.max):Math.min(t,n)),t}function sk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Bz(t,{top:e,left:n,bottom:r,right:s}){return{x:sk(t.x,n,s),y:sk(t.y,e,r)}}function ak(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function zz(t,e){return{x:ak(t.x,e.x),y:ak(t.y,e.y)}}function Hz(t,e){let n=.5;const r=Hr(t),s=Hr(e);return s>r?n=rm(e.min,e.max-r,t.min):r>s&&(n=rm(t.min,t.max-s,e.min)),io(0,1,n)}function $z(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const B1=.35;function qz(t=B1){return t===!1?t=0:t===!0&&(t=B1),{x:ik(t,"left","right"),y:ik(t,"top","bottom")}}function ik(t,e,n){return{min:ok(t,e),max:ok(t,n)}}function ok(t,e){return typeof t=="number"?t:t[e]||0}const Yz=new WeakMap;class Wz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=sr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Rm(g).point)},l=(g,y)=>{const{drag:w,dragPropagation:_,onDragStart:C}=this.getProps();if(w&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XF(w),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qs(N=>{let k=this.getAxisMotionValue(N).get()||0;if(li.test(k)){const{projection:R}=this.visualElement;if(R&&R.layout){const A=R.layout.layoutBox[N];A&&(k=Hr(A)*(parseFloat(k)/100))}}this.originPoint[N]=k}),C&&rn.postRender(()=>C(g,y)),U1(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},u=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y;const{dragPropagation:w,dragDirectionLock:_,onDirectionLock:C,onDrag:S}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:N}=y;if(_&&this.currentDirection===null){this.currentDirection=Gz(N),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",y.point,N),this.updateAxis("y",y.point,N),this.visualElement.render(),S&&S(g,y)},d=(g,y)=>{this.latestPointerEvent=g,this.latestPanInfo=y,this.stop(g,y),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>qs(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new FL(e,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:UL(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&rn.postRender(()=>u(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!kg(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=Fz(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&ad(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Bz(r.layoutBox,e):this.constraints=!1,this.elastic=qz(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qs(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=$z(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ad(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=KB(r,s.root,this.visualElement.getTransformPagePoint());let l=zz(s.layout.layoutBox,a);if(n){const u=n(YB(l));this.hasMutatedConstraints=!!u,u&&(l=CL(u))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=qs(m=>{if(!kg(m,n,this.currentDirection))return;let g=d&&d[m]||{};l&&(g={min:0,max:0});const y=s?200:1e6,w=s?40:1e7,_={type:"inertia",velocity:r?e[m]:0,bounceStiffness:y,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(m,_)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return U1(this.visualElement,e),r.start(DE(e,r,0,n,this.visualElement,!1))}stopAnimation(){qs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qs(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qs(n=>{const{drag:r}=this.getProps();if(!kg(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n];a.set(e[n]-vn(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ad(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};qs(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=Hz({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qs(l=>{if(!kg(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(vn(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;Yz.set(this.visualElement,this);const e=this.visualElement.current,n=Vf(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();ad(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),rn.read(r);const l=lm(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(qs(m=>{const g=this.getAxisMotionValue(m);g&&(this.originPoint[m]+=d[m].translate,g.set(g.get()+d[m].translate))}),this.visualElement.render())}));return()=>{l(),n(),a(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:l=B1,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:l,dragMomentum:u}}}function kg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Gz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Kz extends Vl{constructor(e){super(e),this.removeGroupControls=ta,this.removeListeners=ta,this.controls=new Wz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ta}unmount(){this.removeGroupControls(),this.removeListeners()}}const lk=t=>(e,n)=>{t&&rn.postRender(()=>t(e,n))};class Qz extends Vl{constructor(){super(...arguments),this.removePointerDownListener=ta}onPointerDown(e){this.session=new FL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:lk(e),onStart:lk(n),onMove:r,onEnd:(a,l)=>{delete this.session,s&&rn.postRender(()=>s(a,l))}}}mount(){this.removePointerDownListener=Vf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const iy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ck(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const cf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ge.test(t))t=parseFloat(t);else return t;const n=ck(t,e.target.x),r=ck(t,e.target.y);return`${n}% ${r}%`}},Xz={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=_l.parse(t);if(s.length>5)return r;const a=_l.createTransformer(t),l=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,d=n.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const f=vn(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),a(s)}};let mw=!1;class Zz extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;bB(Jz),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),mw&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),iy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,mw=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||rn.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;mw=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zL(t){const[e,n]=uL(),r=x.useContext(J_);return i.jsx(Zz,{...t,layoutGroup:r,switchLayoutGroup:x.useContext(_L),isPresent:e,safeToRemove:n})}const Jz={borderRadius:{...cf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cf,borderTopRightRadius:cf,borderBottomLeftRadius:cf,borderBottomRightRadius:cf,boxShadow:Xz};function eH(t,e,n){const r=pr(t)?t:Mc(t);return r.start(DE("",r,e,n)),r.animation}const tH=(t,e)=>t.depth-e.depth;class nH{constructor(){this.children=[],this.isDirty=!1}add(e){nE(this.children,e),this.isDirty=!0}remove(e){rE(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tH),this.isDirty=!1,this.children.forEach(e)}}function rH(t,e){const n=os.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(lo(r),t(a-e))};return rn.setup(r,!0),()=>lo(r)}const HL=["TopLeft","TopRight","BottomLeft","BottomRight"],sH=HL.length,uk=t=>typeof t=="string"?parseFloat(t):t,dk=t=>typeof t=="number"||Ge.test(t);function aH(t,e,n,r,s,a){s?(t.opacity=vn(0,n.opacity??1,iH(r)),t.opacityExit=vn(e.opacity??1,0,oH(r))):a&&(t.opacity=vn(e.opacity??1,n.opacity??1,r));for(let l=0;l<sH;l++){const u=`border${HL[l]}Radius`;let d=hk(e,u),f=hk(n,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||dk(d)===dk(f)?(t[u]=Math.max(vn(uk(d),uk(f),r),0),(li.test(f)||li.test(d))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=vn(e.rotate||0,n.rotate||0,r))}function hk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iH=$L(0,.5,kM),oH=$L(.5,.95,ta);function $L(t,e,n){return r=>r<t?0:r>e?1:n(rm(t,e,r))}function fk(t,e){t.min=e.min,t.max=e.max}function ba(t,e){fk(t.x,e.x),fk(t.y,e.y)}function mk(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function pk(t,e,n,r,s){return t-=e,t=Py(t,1/n,r),s!==void 0&&(t=Py(t,1/s,r)),t}function lH(t,e=0,n=1,r=.5,s,a=t,l=t){if(li.test(e)&&(e=parseFloat(e),e=vn(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=vn(a.min,a.max,r);t===a&&(u-=e),t.min=pk(t.min,e,n,u,s),t.max=pk(t.max,e,n,u,s)}function gk(t,e,[n,r,s],a,l){lH(t,e[n],e[r],e[s],e.scale,a,l)}const cH=["x","scaleX","originX"],uH=["y","scaleY","originY"];function yk(t,e,n,r){gk(t.x,e,cH,n?n.x:void 0,r?r.x:void 0),gk(t.y,e,uH,n?n.y:void 0,r?r.y:void 0)}function xk(t){return t.translate===0&&t.scale===1}function qL(t){return xk(t.x)&&xk(t.y)}function vk(t,e){return t.min===e.min&&t.max===e.max}function dH(t,e){return vk(t.x,e.x)&&vk(t.y,e.y)}function bk(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function YL(t,e){return bk(t.x,e.x)&&bk(t.y,e.y)}function wk(t){return Hr(t.x)/Hr(t.y)}function _k(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class hH{constructor(){this.members=[]}add(e){nE(this.members,e),e.scheduleRender()}remove(e){if(rE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fH(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,l=n?.z||0;if((s||a||l)&&(r=`translate3d(${s}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:g,rotateY:y,skewX:w,skewY:_}=n;f&&(r=`perspective(${f}px) ${r}`),m&&(r+=`rotate(${m}deg) `),g&&(r+=`rotateX(${g}deg) `),y&&(r+=`rotateY(${y}deg) `),w&&(r+=`skewX(${w}deg) `),_&&(r+=`skewY(${_}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const pw=["","X","Y","Z"],mH=1e3;let pH=0;function gw(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function WL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=RL(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",rn,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&WL(r)}function GL({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e?.()){this.id=pH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(xH),this.nodes.forEach(_H),this.nodes.forEach(EH),this.nodes.forEach(vH)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new nH)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new iE),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=cL(l)&&!rB(l),this.instance=l;const{layoutId:u,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||u)&&(this.isLayoutDirty=!0),t){let m,g=0;const y=()=>this.root.updateBlockedByResize=!1;rn.read(()=>{g=window.innerWidth}),t(l,()=>{const w=window.innerWidth;w!==g&&(g=w,this.root.updateBlockedByResize=!0,m&&m(),m=rH(y,250),iy.hasAnimatedSinceResize&&(iy.hasAnimatedSinceResize=!1,this.nodes.forEach(Sk)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeLayoutChanged:y,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||f.getDefaultTransition()||TH,{onLayoutAnimationStart:C,onLayoutAnimationComplete:S}=f.getProps(),N=!this.targetLayout||!YL(this.targetLayout,w),k=!g&&y;if(this.options.layoutRoot||this.resumeFrom||k||g&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...xE(_,"layout"),onPlay:C,onComplete:S};(f.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(m,k)}else g||Sk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),lo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CH),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&WL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const g=this.path[m];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ek);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Ck);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wH),this.nodes.forEach(gH),this.nodes.forEach(yH)):this.nodes.forEach(Ck),this.clearAllSnapshots();const u=os.now();Sr.delta=io(0,1e3/60,u-Sr.timestamp),Sr.timestamp=u,Sr.isProcessing=!0,sw.update.process(Sr),sw.preRender.process(Sr),sw.render.process(Sr),Sr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bH),this.sharedNodes.forEach(SH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hr(this.snapshot.measuredBox.x)&&!Hr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=sr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!qL(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||mc(this.latestValues)||m)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),kH(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return sr();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(DH))){const{scroll:f}=this.root;f&&(id(u.x,f.offset.x),id(u.y,f.offset.y))}return u}removeElementScroll(l){const u=sr();if(ba(u,l),this.scroll?.wasRoot)return u;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:g}=f;f!==this.root&&m&&g.layoutScroll&&(m.wasRoot&&ba(u,l),id(u.x,m.offset.x),id(u.y,m.offset.y))}return u}applyTransform(l,u=!1){const d=sr();ba(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&od(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),mc(m.latestValues)&&od(d,m.latestValues)}return mc(this.latestValues)&&od(d,this.latestValues),d}removeTransform(l){const u=sr();ba(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!mc(f.latestValues))continue;L1(f.latestValues)&&f.updateSnapshot();const m=sr(),g=f.measurePageBox();ba(m,g),yk(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return mc(this.latestValues)&&yk(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==u;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:g}=this.options;if(!this.layout||!(m||g))return;this.resolvedRelativeTargetAt=Sr.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=sr(),this.targetWithTransforms=sr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Oz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ba(this.target,this.layout.layoutBox),NL(this.target,this.targetDelta)):ba(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||L1(this.parent.latestValues)||SL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=sr(),this.relativeTargetOrigin=sr(),My(this.relativeTargetOrigin,u,d),ba(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Sr.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;ba(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;GB(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=sr());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mk(this.prevProjectionDelta.x,this.projectionDelta.x),mk(this.prevProjectionDelta.y,this.projectionDelta.y)),Uf(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==y||!_k(this.projectionDelta.x,this.prevProjectionDelta.x)||!_k(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ld(),this.projectionDelta=ld(),this.projectionDeltaWithTransform=ld()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},g=ld();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=sr(),w=d?d.source:void 0,_=this.layout?this.layout.source:void 0,C=w!==_,S=this.getStack(),N=!S||S.members.length<=1,k=!!(C&&!N&&this.options.crossfade===!0&&!this.path.some(jH));this.animationProgress=0;let R;this.mixTargetDelta=A=>{const L=A/1e3;Nk(g.x,l.x,L),Nk(g.y,l.y,L),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(My(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),NH(this.relativeTarget,this.relativeTargetOrigin,y,L),R&&dH(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=sr()),ba(R,this.relativeTarget)),C&&(this.animationValues=m,aH(m,f,this.latestValues,L,k,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(lo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rn.update(()=>{iy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Mc(0)),this.currentAnimation=eH(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:m}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&KL(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||sr();const g=Hr(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+g;const y=Hr(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}ba(u,d),od(u,m),Uf(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new hH),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&gw("z",l,f,this.animationValues);for(let m=0;m<pw.length;m++)gw(`rotate${pw[m]}`,l,f,this.animationValues),gw(`skew${pw[m]}`,l,f,this.animationValues);l.render();for(const m in f)l.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=ay(u?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=ay(u?.pointerEvents)||""),this.hasProjected&&!mc(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let g=fH(this.projectionDeltaWithTransform,this.treeScale,m);d&&(g=d(m,g)),l.transform=g;const{x:y,y:w}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,f.animationValues?l.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const _ in om){if(m[_]===void 0)continue;const{correct:C,applyTo:S,isCSSVariable:N}=om[_],k=g==="none"?m[_]:C(m[_],f);if(S){const R=S.length;for(let A=0;A<R;A++)l[S[A]]=k}else N?this.options.visualElement.renderState.vars[_]=k:l[_]=k}this.options.layoutId&&(l.pointerEvents=f===this?ay(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(Ek),this.root.sharedNodes.clear()}}}function gH(t){t.updateLayout()}function yH(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?qs(m=>{const g=a?e.measuredBox[m]:e.layoutBox[m],y=Hr(g);g.min=n[m].min,g.max=g.min+y}):KL(s,e.layoutBox,n)&&qs(m=>{const g=a?e.measuredBox[m]:e.layoutBox[m],y=Hr(n[m]);g.max=g.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+y)});const l=ld();Uf(l,n,e.layoutBox);const u=ld();a?Uf(u,t.applyTransform(r,!0),e.measuredBox):Uf(u,n,e.layoutBox);const d=!qL(l);let f=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:y}=m;if(g&&y){const w=sr();My(w,e.layoutBox,g.layoutBox);const _=sr();My(_,n,y.layoutBox),YL(w,_)||(f=!0),m.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=w,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function xH(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bH(t){t.clearSnapshot()}function Ek(t){t.clearMeasurements()}function Ck(t){t.isLayoutDirty=!1}function wH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Sk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function _H(t){t.resolveTargetDelta()}function EH(t){t.calcProjection()}function CH(t){t.resetSkewAndRotation()}function SH(t){t.removeLeadSnapshot()}function Nk(t,e,n){t.translate=vn(e.translate,0,n),t.scale=vn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function jk(t,e,n,r){t.min=vn(e.min,n.min,r),t.max=vn(e.max,n.max,r)}function NH(t,e,n,r){jk(t.x,e.x,n.x,r),jk(t.y,e.y,n.y,r)}function jH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const TH={duration:.45,ease:[.4,0,.1,1]},Tk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),kk=Tk("applewebkit/")&&!Tk("chrome/")?Math.round:ta;function Dk(t){t.min=kk(t.min),t.max=kk(t.max)}function kH(t){Dk(t.x),Dk(t.y)}function KL(t,e,n){return t==="position"||t==="preserve-aspect"&&!Lz(wk(e),wk(n),.2)}function DH(t){return t!==t.root&&t.scroll?.wasRoot}const AH=GL({attachResizeListener:(t,e)=>lm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yw={current:void 0},QL=GL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!yw.current){const t=new AH({});t.mount(window),t.setOptions({layoutScroll:!0}),yw.current=t}return yw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),RH={pan:{Feature:Qz},drag:{Feature:Kz,ProjectionNode:QL,MeasureLayout:zL}};function Ak(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&rn.postRender(()=>a(e,Rm(e)))}class PH extends Vl{mount(){const{current:e}=this.node;e&&(this.unmount=ZF(e,(n,r)=>(Ak(this.node,r,"Start"),s=>Ak(this.node,s,"End"))))}unmount(){}}class MH extends Vl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tm(lm(this.node.current,"focus",()=>this.onFocus()),lm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Rk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&rn.postRender(()=>a(e,Rm(e)))}class LH extends Vl{mount(){const{current:e}=this.node;e&&(this.unmount=nB(e,(n,r)=>(Rk(this.node,r,"Start"),(s,{success:a})=>Rk(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const z1=new WeakMap,xw=new WeakMap,OH=t=>{const e=z1.get(t.target);e&&e(t)},IH=t=>{t.forEach(OH)};function VH({root:t,...e}){const n=t||document;xw.has(n)||xw.set(n,{});const r=xw.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(IH,{root:t,...e})),r[s]}function UH(t,e,n){const r=VH(e);return z1.set(t,n),r.observe(t),()=>{z1.delete(t),r.unobserve(t)}}const FH={some:0,all:1};class BH extends Vl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:FH[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:g}=this.node.getProps(),y=f?m:g;y&&y(d)};return UH(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zH(e,n))&&this.startObserver()}unmount(){}}function zH({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const HH={inView:{Feature:BH},tap:{Feature:LH},focus:{Feature:MH},hover:{Feature:PH}},$H={layout:{ProjectionNode:QL,MeasureLayout:zL}},qH={...kz,...HH,...RH,...$H},_e=qB(qH,sz);function AE(t){const e=jm(()=>Mc(t)),{isStatic:n}=x.useContext(Am);if(n){const[,r]=x.useState(t);x.useEffect(()=>e.on("change",r),[])}return e}function XL(t,e){const n=AE(e()),r=()=>n.set(e());return r(),tE(()=>{const s=()=>rn.preRender(r,!1,!0),a=t.map(l=>l.on("change",s));return()=>{a.forEach(l=>l()),lo(r)}}),n}function YH(t){If.current=[],t();const e=XL(If.current,t);return If.current=void 0,e}function WH(t,e,n,r){if(typeof t=="function")return YH(t);const s=sB(e,n,r);return Array.isArray(t)?Pk(t,s):Pk([t],([a])=>s(a))}function Pk(t,e){const n=jm(()=>[]);return XL(t,()=>{n.length=0;const r=t.length;for(let s=0;s<r;s++)n[s]=t[s].get();return e(n)})}function GH(t,e={}){const{isStatic:n}=x.useContext(Am),r=()=>pr(t)?t.get():t;if(n)return WH(r);const s=AE(r());return x.useInsertionEffect(()=>aB(s,t,e),[s,JSON.stringify(e)]),s}const KH=()=>{};var Mk={};const ZL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},QH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],l=t[n++],u=t[n++],d=((s&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},JL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],l=s+1<t.length,u=l?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,m=a>>2,g=(a&3)<<4|u>>4;let y=(u&15)<<2|f>>6,w=f&63;d||(w=64,l||(y=64)),r.push(n[m],n[g],n[y],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||u==null||f==null||g==null)throw new XH;const y=a<<2|u>>4;if(r.push(y),f!==64){const w=u<<4&240|f>>2;if(r.push(w),g!==64){const _=f<<6&192|g;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZH=function(t){const e=ZL(t);return JL.encodeByteArray(e,!0)},Ly=function(t){return ZH(t).replace(/\./g,"")},e3=function(t){try{return JL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const e$=()=>JH().__FIREBASE_DEFAULTS__,t$=()=>{if(typeof process>"u"||typeof Mk>"u")return;const t=Mk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},n$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&e3(t[1]);return e&&JSON.parse(e)},X0=()=>{try{return KH()||e$()||t$()||n$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},t3=t=>X0()?.emulatorHosts?.[t],n3=t=>{const e=t3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},r3=()=>X0()?.config,s3=t=>X0()?.[`_${t}`];class r${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Ci(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Z0(t){return(await fetch(t,{credentials:"include"})).ok}function s$(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ly(JSON.stringify(n)),Ly(JSON.stringify(l)),""].join(".")}const Ff={};function a$(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ff))Ff[e]?t.emulator.push(e):t.prod.push(e);return t}function i$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Lk=!1;function RE(t,e){if(typeof window>"u"||typeof document>"u"||!Ci(window.location.host)||Ff[t]===e||Ff[t]||Lk)return;Ff[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=a$().prod.length>0;function l(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function d(y,w){y.setAttribute("width","24"),y.setAttribute("id",w),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Lk=!0,l()},y}function m(y,w){y.setAttribute("id",w),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function g(){const y=i$(r),w=n("text"),_=document.getElementById(w)||document.createElement("span"),C=n("learnmore"),S=document.getElementById(C)||document.createElement("a"),N=n("preprendIcon"),k=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const R=y.element;u(R),m(S,C);const A=f();d(k,N),R.append(k,_,S,A),document.body.appendChild(R)}a?(_.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function o$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Or())}function l$(){const t=X0()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function u$(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function d$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h$(){const t=Or();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function f$(){return!l$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function m$(){try{return typeof indexedDB=="object"}catch{return!1}}function p$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const g$="FirebaseError";class ka extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=g$,Object.setPrototypeOf(this,ka.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pm.prototype.create)}}class Pm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?y$(a,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new ka(s,u,r)}}function y$(t,e){return t.replace(x$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const x$=/\{\$([^}]+)}/g;function v$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],l=e[s];if(Ok(a)&&Ok(l)){if(!Lc(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ok(t){return t!==null&&typeof t=="object"}function Mm(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sf(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Nf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function b$(t,e){const n=new w$(t,e);return n.subscribe.bind(n)}class w${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vw),s.error===void 0&&(s.error=vw),s.complete===void 0&&(s.complete=vw);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vw(){}function Lt(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pc="[DEFAULT]";class E${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new r$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(S$(e))try{this.getOrInitializeService({instanceIdentifier:pc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=pc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pc){return this.instances.has(e)}getOptions(e=pc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&l.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:C$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pc){return this.component?this.component.multipleInstances?e:pc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C$(t){return t===pc?void 0:t}function S$(t){return t.instantiationMode==="EAGER"}class N${constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new E$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var xt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xt||(xt={}));const j$={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},T$=xt.INFO,k$={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},D$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=k$[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let PE=class{constructor(e){this.name=e,this._logLevel=T$,this._logHandler=D$,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}};const A$=(t,e)=>e.some(n=>t instanceof n);let Ik,Vk;function R$(){return Ik||(Ik=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P$(){return Vk||(Vk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a3=new WeakMap,H1=new WeakMap,i3=new WeakMap,bw=new WeakMap,ME=new WeakMap;function M$(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(yl(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&a3.set(n,t)}).catch(()=>{}),ME.set(e,t),e}function L$(t){if(H1.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});H1.set(t,e)}let $1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return H1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||i3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O$(t){$1=t($1)}function I$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ww(this),e,...n);return i3.set(r,e.sort?e.sort():[e]),yl(r)}:P$().includes(t)?function(...e){return t.apply(ww(this),e),yl(a3.get(this))}:function(...e){return yl(t.apply(ww(this),e))}}function V$(t){return typeof t=="function"?I$(t):(t instanceof IDBTransaction&&L$(t),A$(t,R$())?new Proxy(t,$1):t)}function yl(t){if(t instanceof IDBRequest)return M$(t);if(bw.has(t))return bw.get(t);const e=V$(t);return e!==t&&(bw.set(t,e),ME.set(e,t)),e}const ww=t=>ME.get(t);function U$(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(t,e),u=yl(l);return r&&l.addEventListener("upgradeneeded",d=>{r(yl(l.result),d.oldVersion,d.newVersion,yl(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),u.then(d=>{a&&d.addEventListener("close",()=>a()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const F$=["get","getKey","getAll","getAllKeys","count"],B$=["put","add","delete","clear"],_w=new Map;function Uk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_w.get(e))return _w.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=B$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||F$.includes(n)))return;const a=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&d.done]))[0]};return _w.set(e,a),a}O$(t=>({...t,get:(e,n,r)=>Uk(e,n)||t.get(e,n,r),has:(e,n)=>!!Uk(e,n)||t.has(e,n)}));class z${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function H$(t){return t.getComponent()?.type==="VERSION"}const q1="@firebase/app",Fk="0.14.6";const uo=new PE("@firebase/app"),$$="@firebase/app-compat",q$="@firebase/analytics-compat",Y$="@firebase/analytics",W$="@firebase/app-check-compat",G$="@firebase/app-check",K$="@firebase/auth",Q$="@firebase/auth-compat",X$="@firebase/database",Z$="@firebase/data-connect",J$="@firebase/database-compat",eq="@firebase/functions",tq="@firebase/functions-compat",nq="@firebase/installations",rq="@firebase/installations-compat",sq="@firebase/messaging",aq="@firebase/messaging-compat",iq="@firebase/performance",oq="@firebase/performance-compat",lq="@firebase/remote-config",cq="@firebase/remote-config-compat",uq="@firebase/storage",dq="@firebase/storage-compat",hq="@firebase/firestore",fq="@firebase/ai",mq="@firebase/firestore-compat",pq="firebase",gq="12.6.0";const Y1="[DEFAULT]",yq={[q1]:"fire-core",[$$]:"fire-core-compat",[Y$]:"fire-analytics",[q$]:"fire-analytics-compat",[G$]:"fire-app-check",[W$]:"fire-app-check-compat",[K$]:"fire-auth",[Q$]:"fire-auth-compat",[X$]:"fire-rtdb",[Z$]:"fire-data-connect",[J$]:"fire-rtdb-compat",[eq]:"fire-fn",[tq]:"fire-fn-compat",[nq]:"fire-iid",[rq]:"fire-iid-compat",[sq]:"fire-fcm",[aq]:"fire-fcm-compat",[iq]:"fire-perf",[oq]:"fire-perf-compat",[lq]:"fire-rc",[cq]:"fire-rc-compat",[uq]:"fire-gcs",[dq]:"fire-gcs-compat",[hq]:"fire-fst",[mq]:"fire-fst-compat",[fq]:"fire-vertex","fire-js":"fire-js",[pq]:"fire-js-all"};const Oy=new Map,xq=new Map,W1=new Map;function Bk(t,e){try{t.container.addComponent(e)}catch(n){uo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function El(t){const e=t.name;if(W1.has(e))return uo.debug(`There were multiple attempts to register component ${e}.`),!1;W1.set(e,t);for(const n of Oy.values())Bk(n,t);for(const n of xq.values())Bk(n,t);return!0}function Lm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function as(t){return t==null?!1:t.settings!==void 0}const vq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xl=new Pm("app","Firebase",vq);class bq{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xl.create("app-deleted",{appName:this._name})}}const Wc=gq;function o3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Y1,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xl.create("bad-app-name",{appName:String(s)});if(n||(n=r3()),!n)throw xl.create("no-options");const a=Oy.get(s);if(a){if(Lc(n,a.options)&&Lc(r,a.config))return a;throw xl.create("duplicate-app",{appName:s})}const l=new N$(s);for(const d of W1.values())l.addComponent(d);const u=new bq(n,r,l);return Oy.set(s,u),u}function LE(t=Y1){const e=Oy.get(t);if(!e&&t===Y1&&r3())return o3();if(!e)throw xl.create("no-app",{appName:t});return e}function na(t,e,n){let r=yq[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uo.warn(l.join(" "));return}El(new co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const wq="firebase-heartbeat-database",_q=1,cm="firebase-heartbeat-store";let Ew=null;function l3(){return Ew||(Ew=U$(wq,_q,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cm)}catch(n){console.warn(n)}}}}).catch(t=>{throw xl.create("idb-open",{originalErrorMessage:t.message})})),Ew}async function Eq(t){try{const n=(await l3()).transaction(cm),r=await n.objectStore(cm).get(c3(t));return await n.done,r}catch(e){if(e instanceof ka)uo.warn(e.message);else{const n=xl.create("idb-get",{originalErrorMessage:e?.message});uo.warn(n.message)}}}async function zk(t,e){try{const r=(await l3()).transaction(cm,"readwrite");await r.objectStore(cm).put(e,c3(t)),await r.done}catch(n){if(n instanceof ka)uo.warn(n.message);else{const r=xl.create("idb-set",{originalErrorMessage:n?.message});uo.warn(r.message)}}}function c3(t){return`${t.name}!${t.options.appId}`}const Cq=1024,Sq=30;class Nq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Tq(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Hk();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Sq){const s=kq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){uo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hk(),{heartbeatsToSend:n,unsentEntries:r}=jq(this._heartbeatsCache.heartbeats),s=Ly(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return uo.warn(e),""}}}function Hk(){return new Date().toISOString().substring(0,10)}function jq(t,e=Cq){const n=[];let r=t.slice();for(const s of t){const a=n.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),$k(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$k(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Tq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return m$()?p$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Eq(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $k(t){return Ly(JSON.stringify({version:2,heartbeats:t})).length}function kq(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Dq(t){El(new co("platform-logger",e=>new z$(e),"PRIVATE")),El(new co("heartbeat",e=>new Nq(e),"PRIVATE")),na(q1,Fk,t),na(q1,Fk,"esm2020"),na("fire-js","")}Dq("");function u3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Aq=u3,d3=new Pm("auth","Firebase",u3());const Iy=new PE("@firebase/auth");function Rq(t,...e){Iy.logLevel<=xt.WARN&&Iy.warn(`Auth (${Wc}): ${t}`,...e)}function oy(t,...e){Iy.logLevel<=xt.ERROR&&Iy.error(`Auth (${Wc}): ${t}`,...e)}function sa(t,...e){throw OE(t,...e)}function ci(t,...e){return OE(t,...e)}function h3(t,e,n){const r={...Aq(),[e]:n};return new Pm("auth","Firebase",r).create(e,{appName:t.name})}function Ji(t){return h3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return d3.create(t,...e)}function Fe(t,e,...n){if(!t)throw OE(e,...n)}function Xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw oy(e),new Error(e)}function ho(t,e){t||Xi(e)}function G1(){return typeof self<"u"&&self.location?.href||""}function Pq(){return qk()==="http:"||qk()==="https:"}function qk(){return typeof self<"u"&&self.location?.protocol||null}function Mq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pq()||u$()||"connection"in navigator)?navigator.onLine:!0}function Lq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Om{constructor(e,n){this.shortDelay=e,this.longDelay=n,ho(n>e,"Short delay should be less than long delay!"),this.isMobile=o$()||d$()}get(){return Mq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function IE(t,e){ho(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class f3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Oq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Iq=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vq=new Om(3e4,6e4);function Da(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function oa(t,e,n,r,s={}){return m3(t,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const u=Mm({key:t.config.apiKey,...l}).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:d,...a};return c$()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Ci(t.emulatorConfig.host)&&(f.credentials="include"),f3.fetch()(await p3(t,t.config.apiHost,n,u),f)})}async function m3(t,e,n){t._canInitEmulator=!1;const r={...Oq,...e};try{const s=new Fq(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Dg(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dg(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw Dg(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw Dg(t,"user-disabled",l);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw h3(t,m,f);sa(t,m)}}catch(s){if(s instanceof ka)throw s;sa(t,"network-request-failed",{message:String(s)})}}async function Im(t,e,n,r,s={}){const a=await oa(t,e,n,r,s);return"mfaPendingCredential"in a&&sa(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function p3(t,e,n,r){const s=`${e}${n}?${r}`,a=t,l=a.config.emulator?IE(t.config,s):`${t.config.apiScheme}://${s}`;return Iq.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function Uq(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fq{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),Vq.get())})}}function Dg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ci(t,e,r);return s.customData._tokenResponse=n,s}function Yk(t){return t!==void 0&&t.enterprise!==void 0}class Bq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Uq(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zq(t,e){return oa(t,"GET","/v2/recaptchaConfig",Da(t,e))}async function Hq(t,e){return oa(t,"POST","/v1/accounts:delete",e)}async function Vy(t,e){return oa(t,"POST","/v1/accounts:lookup",e)}function Bf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $q(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),s=VE(r);Fe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:r,authTime:Bf(Cw(s.auth_time)),issuedAtTime:Bf(Cw(s.iat)),expirationTime:Bf(Cw(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Cw(t){return Number(t)*1e3}function VE(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return oy("JWT malformed, contained fewer than 3 sections"),null;try{const s=e3(n);return s?JSON.parse(s):(oy("Failed to decode base64 JWT payload"),null)}catch(s){return oy("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Wk(t){const e=VE(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Td(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ka&&qq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Yq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class K1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bf(this.lastLoginAt),this.creationTime=Bf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Uy(t){const e=t.auth,n=await t.getIdToken(),r=await Td(t,Vy(e,{idToken:n}));Fe(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=s.providerUserInfo?.length?g3(s.providerUserInfo):[],l=Gq(t.providerData,a),u=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!l?.length,f=u?d:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new K1(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function Wq(t){const e=Lt(t);await Uy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Gq(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function g3(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Kq(t,e){const n=await m3(t,{},async()=>{const r=Mm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,l=await p3(t,s,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return t.emulatorConfig&&Ci(t.emulatorConfig.host)&&(d.credentials="include"),f3.fetch()(l,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Qq(t,e){return oa(t,"POST","/v2/accounts:revokeToken",Da(t,e))}class yd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=Wk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await Kq(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,l=new yd;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Fe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Fe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yd,this.toJSON())}_performRefresh(){return Xi("not implemented")}}function Zo(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ea{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Yq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new K1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Td(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $q(this,e)}reload(){return Wq(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ea({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Uy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(as(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await Td(this,Hq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,u=n.tenantId??void 0,d=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:g,emailVerified:y,isAnonymous:w,providerData:_,stsTokenManager:C}=n;Fe(g&&C,e,"internal-error");const S=yd.fromJSON(this.name,C);Fe(typeof g=="string",e,"internal-error"),Zo(r,e.name),Zo(s,e.name),Fe(typeof y=="boolean",e,"internal-error"),Fe(typeof w=="boolean",e,"internal-error"),Zo(a,e.name),Zo(l,e.name),Zo(u,e.name),Zo(d,e.name),Zo(f,e.name),Zo(m,e.name);const N=new Ea({uid:g,auth:e,email:s,emailVerified:y,displayName:r,isAnonymous:w,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:S,createdAt:f,lastLoginAt:m});return _&&Array.isArray(_)&&(N.providerData=_.map(k=>({...k}))),d&&(N._redirectEventId=d),N}static async _fromIdTokenResponse(e,n,r=!1){const s=new yd;s.updateFromServerResponse(n);const a=new Ea({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Uy(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Fe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?g3(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,u=new yd;u.updateFromIdToken(r);const d=new Ea({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new K1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(d,f),d}}const Gk=new Map;function Zi(t){ho(t instanceof Function,"Expected a class definition");let e=Gk.get(t);return e?(ho(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gk.set(t,e),e)}class y3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}y3.type="NONE";const Kk=y3;function ly(t,e,n){return`firebase:${t}:${e}:${n}`}class xd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=ly(this.userKey,s.apiKey,a),this.fullPersistenceKey=ly("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vy(this.auth,{idToken:e}).catch(()=>{});return n?Ea._fromGetAccountInfoResponse(this.auth,n,e):null}return Ea._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xd(Zi(Kk),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=s[0]||Zi(Kk);const l=ly(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(l);if(m){let g;if(typeof m=="string"){const y=await Vy(e,{idToken:m}).catch(()=>{});if(!y)break;g=await Ea._fromGetAccountInfoResponse(e,y,m)}else g=Ea._fromJSON(e,m);f!==a&&(u=g),a=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new xd(a,e,r):(a=d[0],u&&await a._set(l,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new xd(a,e,r))}}function Qk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(E3(e))return"Blackberry";if(C3(e))return"Webos";if(v3(e))return"Safari";if((e.includes("chrome/")||b3(e))&&!e.includes("edge/"))return"Chrome";if(_3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function x3(t=Or()){return/firefox\//i.test(t)}function v3(t=Or()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b3(t=Or()){return/crios\//i.test(t)}function w3(t=Or()){return/iemobile/i.test(t)}function _3(t=Or()){return/android/i.test(t)}function E3(t=Or()){return/blackberry/i.test(t)}function C3(t=Or()){return/webos/i.test(t)}function UE(t=Or()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Xq(t=Or()){return UE(t)&&!!window.navigator?.standalone}function Zq(){return h$()&&document.documentMode===10}function S3(t=Or()){return UE(t)||_3(t)||C3(t)||E3(t)||/windows phone/i.test(t)||w3(t)}function N3(t,e=[]){let n;switch(t){case"Browser":n=Qk(Or());break;case"Worker":n=`${Qk(Or())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wc}/${r}`}class Jq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,u)=>{try{const d=e(a);l(d)}catch(d){u(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function eY(t,e={}){return oa(t,"GET","/v2/passwordPolicy",Da(t,e))}const tY=6;class nY{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tY,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class rY{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xk(this),this.idTokenSubscription=new Xk(this),this.beforeStateQueue=new Jq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=d3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vy(this,{idToken:e}),r=await Ea._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(as(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Uy(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Lq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(as(this.app))return Promise.reject(Ji(this));const n=e?Lt(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return as(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return as(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eY(this),n=new nY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Qq(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zi(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await xd.create(this,[Zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(as(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Rq(`Error while retrieving App Check token: ${e.error}`),e?.token}}function vo(t){return Lt(t)}class Xk{constructor(e){this.auth=e,this.observer=null,this.addObserver=b$(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let J0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sY(t){J0=t}function j3(t){return J0.loadJS(t)}function aY(){return J0.recaptchaEnterpriseScript}function iY(){return J0.gapiScript}function oY(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class lY{constructor(){this.enterprise=new cY}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class cY{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const uY="recaptcha-enterprise",T3="NO_RECAPTCHA";class dY{constructor(e){this.type=uY,this.auth=vo(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,u)=>{zq(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new Bq(d);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(a,l,u){const d=window.grecaptcha;Yk(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(f=>{l(f)}).catch(()=>{l(T3)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lY().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(u=>{if(!n&&Yk(window.grecaptcha))s(u,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=aY();d.length!==0&&(d+=u),j3(d).then(()=>{s(u,a,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function Zk(t,e,n,r=!1,s=!1){const a=new dY(t);let l;if(s)l=T3;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Fy(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Zk(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Zk(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}function hY(t,e){const n=Lm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Lc(a,e??{}))return s;sa(s,"already-initialized")}return n.initialize({options:e})}function fY(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Zi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function mY(t,e,n){const r=vo(t);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=k3(e),{host:l,port:u}=pY(e),d=u===null?"":`:${u}`,f={url:`${a}//${l}${d}/`},m=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(Lc(f,r.config.emulator)&&Lc(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Ci(l)?(Z0(`${a}//${l}${d}`),RE("Auth",!0)):gY()}function k3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pY(t){const e=k3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Jk(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:Jk(l)}}}function Jk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function gY(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class FE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xi("not implemented")}_getIdTokenResponse(e){return Xi("not implemented")}_linkToIdToken(e,n){return Xi("not implemented")}_getReauthenticationResolver(e){return Xi("not implemented")}}async function D3(t,e){return oa(t,"POST","/v1/accounts:resetPassword",Da(t,e))}async function yY(t,e){return oa(t,"POST","/v1/accounts:update",e)}async function xY(t,e){return oa(t,"POST","/v1/accounts:signUp",e)}async function vY(t,e){return oa(t,"POST","/v1/accounts:update",Da(t,e))}async function bY(t,e){return Im(t,"POST","/v1/accounts:signInWithPassword",Da(t,e))}async function wY(t,e){return oa(t,"POST","/v1/accounts:sendOobCode",Da(t,e))}async function _Y(t,e){return wY(t,e)}async function EY(t,e){return Im(t,"POST","/v1/accounts:signInWithEmailLink",Da(t,e))}async function CY(t,e){return Im(t,"POST","/v1/accounts:signInWithEmailLink",Da(t,e))}class um extends FE{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new um(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new um(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fy(e,n,"signInWithPassword",bY);case"emailLink":return EY(e,{email:this._email,oobCode:this._password});default:sa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fy(e,r,"signUpPassword",xY);case"emailLink":return CY(e,{idToken:n,email:this._email,oobCode:this._password});default:sa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function vd(t,e){return Im(t,"POST","/v1/accounts:signInWithIdp",Da(t,e))}const SY="http://localhost";class Oc extends FE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const l=new Oc(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return vd(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vd(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vd(e,n)}buildRequest(){const e={requestUri:SY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mm(n)}return e}}function NY(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jY(t){const e=Sf(Nf(t)).link,n=e?Sf(Nf(e)).deep_link_id:null,r=Sf(Nf(t)).deep_link_id;return(r?Sf(Nf(r)).link:null)||r||n||e||t}class BE{constructor(e){const n=Sf(Nf(e)),r=n.apiKey??null,s=n.oobCode??null,a=NY(n.mode??null);Fe(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=jY(e);try{return new BE(n)}catch{return null}}}class Gd{constructor(){this.providerId=Gd.PROVIDER_ID}static credential(e,n){return um._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=BE.parseLink(n);return Fe(r,"argument-error"),um._fromEmailAndCode(e,r.code,r.tenantId)}}Gd.PROVIDER_ID="password";Gd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Gd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class A3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vm extends A3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class il extends Vm{constructor(){super("facebook.com")}static credential(e){return Oc._fromParams({providerId:il.PROVIDER_ID,signInMethod:il.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return il.credentialFromTaggedObject(e)}static credentialFromError(e){return il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return il.credential(e.oauthAccessToken)}catch{return null}}}il.FACEBOOK_SIGN_IN_METHOD="facebook.com";il.PROVIDER_ID="facebook.com";class ol extends Vm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oc._fromParams({providerId:ol.PROVIDER_ID,signInMethod:ol.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ol.credentialFromTaggedObject(e)}static credentialFromError(e){return ol.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ol.credential(n,r)}catch{return null}}}ol.GOOGLE_SIGN_IN_METHOD="google.com";ol.PROVIDER_ID="google.com";class ll extends Vm{constructor(){super("github.com")}static credential(e){return Oc._fromParams({providerId:ll.PROVIDER_ID,signInMethod:ll.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ll.credentialFromTaggedObject(e)}static credentialFromError(e){return ll.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ll.credential(e.oauthAccessToken)}catch{return null}}}ll.GITHUB_SIGN_IN_METHOD="github.com";ll.PROVIDER_ID="github.com";class cl extends Vm{constructor(){super("twitter.com")}static credential(e,n){return Oc._fromParams({providerId:cl.PROVIDER_ID,signInMethod:cl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cl.credentialFromTaggedObject(e)}static credentialFromError(e){return cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return cl.credential(n,r)}catch{return null}}}cl.TWITTER_SIGN_IN_METHOD="twitter.com";cl.PROVIDER_ID="twitter.com";async function TY(t,e){return Im(t,"POST","/v1/accounts:signUp",Da(t,e))}class Ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Ea._fromIdTokenResponse(e,r,s),l=eD(r);return new Ic({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=eD(r);return new Ic({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function eD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class By extends ka{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,By.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new By(e,n,r,s)}}function R3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?By._fromErrorAndOperation(t,a,e,r):a})}async function kY(t,e,n=!1){const r=await Td(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ic._forOperation(t,"link",r)}async function DY(t,e,n=!1){const{auth:r}=t;if(as(r.app))return Promise.reject(Ji(r));const s="reauthenticate";try{const a=await Td(t,R3(r,s,e,t),n);Fe(a.idToken,r,"internal-error");const l=VE(a.idToken);Fe(l,r,"internal-error");const{sub:u}=l;return Fe(t.uid===u,r,"user-mismatch"),Ic._forOperation(t,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&sa(r,"user-mismatch"),a}}async function P3(t,e,n=!1){if(as(t.app))return Promise.reject(Ji(t));const r="signIn",s=await R3(t,r,e),a=await Ic._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function AY(t,e){return P3(vo(t),e)}class zE{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?HE._fromServerResponse(e,n):"totpInfo"in n?$E._fromServerResponse(e,n):sa(e,"internal-error")}}class HE extends zE{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new HE(n)}}class $E extends zE{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new $E(n)}}function RY(t,e,n){Fe(n.url?.length>0,t,"invalid-continue-uri"),Fe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Fe(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Fe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Fe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function qE(t){const e=vo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PY(t,e,n){const r=vo(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&RY(r,s,n),await Fy(r,s,"getOobCode",_Y)}async function MY(t,e,n){await D3(Lt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qE(t),r})}async function LY(t,e){await vY(Lt(t),{oobCode:e})}async function M3(t,e){const n=Lt(t),r=await D3(n,{oobCode:e}),s=r.requestType;switch(Fe(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fe(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fe(r.mfaInfo,n,"internal-error");default:Fe(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=zE._fromServerResponse(vo(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:s}}async function OY(t,e){const{data:n}=await M3(Lt(t),e);return n.email}async function IY(t,e,n){if(as(t.app))return Promise.reject(Ji(t));const r=vo(t),l=await Fy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TY).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&qE(t),d}),u=await Ic._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(u.user),u}function VY(t,e,n){return as(t.app)?Promise.reject(Ji(t)):AY(Lt(t),Gd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qE(t),r})}function UY(t,e){return FY(Lt(t),null,e)}async function FY(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const l=await Td(t,yY(r,a));await t._updateTokensIfNecessary(l,!0)}function BY(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function zY(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function HY(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function L3(t){return Lt(t).signOut()}const zy="__sak";class O3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zy,"1"),this.storage.removeItem(zy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const $Y=1e3,qY=10;class I3 extends O3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=S3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);Zq()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qY):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$Y)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I3.type="LOCAL";const YY=I3;class V3 extends O3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}V3.type="SESSION";const U3=V3;function WY(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class ex{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new ex(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,l=this.handlersMap[s];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async f=>f(n.origin,a)),d=await WY(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ex.receivers=[];function YE(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class GY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((u,d)=>{const f=YE("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(g){const y=g;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(y.data.response);break;default:clearTimeout(m),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function ui(){return window}function KY(t){ui().location.href=t}function F3(){return typeof ui().WorkerGlobalScope<"u"&&typeof ui().importScripts=="function"}async function QY(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XY(){return navigator?.serviceWorker?.controller||null}function ZY(){return F3()?self:null}const B3="firebaseLocalStorageDb",JY=1,Hy="firebaseLocalStorage",z3="fbase_key";class Um{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function tx(t,e){return t.transaction([Hy],e?"readwrite":"readonly").objectStore(Hy)}function eW(){const t=indexedDB.deleteDatabase(B3);return new Um(t).toPromise()}function Q1(){const t=indexedDB.open(B3,JY);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hy,{keyPath:z3})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hy)?e(r):(r.close(),await eW(),e(await Q1()))})})}async function tD(t,e,n){const r=tx(t,!0).put({[z3]:e,value:n});return new Um(r).toPromise()}async function tW(t,e){const n=tx(t,!1).get(e),r=await new Um(n).toPromise();return r===void 0?null:r.value}function nD(t,e){const n=tx(t,!0).delete(e);return new Um(n).toPromise()}const nW=800,rW=3;class H3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Q1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rW)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ex._getInstance(ZY()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QY(),!this.activeServiceWorker)return;this.sender=new GY(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Q1();return await tD(e,zy,"1"),await nD(e,zy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tW(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>nD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=tx(s,!1).getAll();return new Um(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nW)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H3.type="LOCAL";const sW=H3;new Om(3e4,6e4);function aW(t,e){return e?Zi(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class WE extends FE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vd(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vd(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vd(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iW(t){return P3(t.auth,new WE(t),t.bypassAuthState)}function oW(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),DY(n,new WE(t),t.bypassAuthState)}async function lW(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),kY(n,new WE(t),t.bypassAuthState)}class $3{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iW;case"linkViaPopup":case"linkViaRedirect":return lW;case"reauthViaPopup":case"reauthViaRedirect":return oW;default:sa(this.auth,"internal-error")}}resolve(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ho(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cW=new Om(2e3,1e4);class cd extends $3{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,cd.currentPopupAction&&cd.currentPopupAction.cancel(),cd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ho(this.filter.length===1,"Popup operations only handle one event");const e=YE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cd.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cW.get())};e()}}cd.currentPopupAction=null;const uW="pendingRedirect",cy=new Map;class dW extends $3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cy.get(this.auth._key());if(!e){try{const r=await hW(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cy.set(this.auth._key(),e)}return this.bypassAuthState||cy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hW(t,e){const n=pW(e),r=mW(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fW(t,e){cy.set(t._key(),e)}function mW(t){return Zi(t._redirectPersistence)}function pW(t){return ly(uW,t.config.apiKey,t.name)}async function gW(t,e,n=!1){if(as(t.app))return Promise.reject(Ji(t));const r=vo(t),s=aW(r,e),l=await new dW(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const yW=600*1e3;class xW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!q3(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ci(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yW&&this.cachedEventUids.clear(),this.cachedEventUids.has(rD(e))}saveEventToCache(e){this.cachedEventUids.add(rD(e)),this.lastProcessedEventTime=Date.now()}}function rD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function q3({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function vW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return q3(t);default:return!1}}async function bW(t,e={}){return oa(t,"GET","/v1/projects",e)}const wW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_W=/^https?/;async function EW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bW(t);for(const n of e)try{if(CW(n))return}catch{}sa(t,"unauthorized-domain")}function CW(t){const e=G1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!_W.test(n))return!1;if(wW.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const SW=new Om(3e4,6e4);function sD(){const t=ui().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NW(t){return new Promise((e,n)=>{function r(){sD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sD(),n(ci(t,"network-request-failed"))},timeout:SW.get()})}if(ui().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ui().gapi?.load)r();else{const s=oY("iframefcb");return ui()[s]=()=>{gapi.load?r():n(ci(t,"network-request-failed"))},j3(`${iY()}?onload=${s}`).catch(a=>n(a))}}).catch(e=>{throw uy=null,e})}let uy=null;function jW(t){return uy=uy||NW(t),uy}const TW=new Om(5e3,15e3),kW="__/auth/iframe",DW="emulator/auth/iframe",AW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PW(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?IE(e,DW):`https://${t.config.authDomain}/${kW}`,r={apiKey:e.apiKey,appName:t.name,v:Wc},s=RW.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Mm(r).slice(1)}`}async function MW(t){const e=await jW(t),n=ui().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:PW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AW,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=ci(t,"network-request-failed"),u=ui().setTimeout(()=>{a(l)},TW.get());function d(){ui().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{a(l)})}))}const LW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OW=500,IW=600,VW="_blank",UW="http://localhost";class aD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FW(t,e,n,r=OW,s=IW){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...LW,width:r.toString(),height:s.toString(),top:a,left:l},f=Or().toLowerCase();n&&(u=b3(f)?VW:n),x3(f)&&(e=e||UW,d.scrollbars="yes");const m=Object.entries(d).reduce((y,[w,_])=>`${y}${w}=${_},`,"");if(Xq(f)&&u!=="_self")return BW(e||"",u),new aD(null);const g=window.open(e||"",u,m);Fe(g,t,"popup-blocked");try{g.focus()}catch{}return new aD(g)}function BW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const zW="__/auth/handler",HW="emulator/auth/handler",$W=encodeURIComponent("fac");async function iD(t,e,n,r,s,a){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wc,eventId:s};if(e instanceof A3){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",v$(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))l[m]=g}if(e instanceof Vm){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const d=await t._getAppCheckToken(),f=d?`#${$W}=${encodeURIComponent(d)}`:"";return`${qW(t)}?${Mm(u).slice(1)}${f}`}function qW({config:t}){return t.emulator?IE(t,HW):`https://${t.authDomain}/${zW}`}const Sw="webStorageSupport";class YW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U3,this._completeRedirectFn=gW,this._overrideRedirectResult=fW}async _openPopup(e,n,r,s){ho(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await iD(e,n,r,G1(),s);return FW(e,a,YE())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await iD(e,n,r,G1(),s);return KY(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(ho(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await MW(e),r=new xW(e);return n.register("authEvent",s=>(Fe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sw,{type:Sw},s=>{const a=s?.[0]?.[Sw];a!==void 0&&n(!!a),sa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return S3()||v3()||UE()}}const WW=YW;var oD="@firebase/auth",lD="1.11.1";class GW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function KW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QW(t){El(new co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Fe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N3(t)},f=new rY(r,s,a,d);return fY(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),El(new co("auth-internal",e=>{const n=vo(e.getProvider("auth").getImmediate());return(r=>new GW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),na(oD,lD,KW(t)),na(oD,lD,"esm2020")}const XW=300,ZW=s3("authIdTokenMaxAge")||XW;let cD=null;const JW=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZW)return;const s=n?.token;cD!==s&&(cD=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eG(t=LE()){const e=Lm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=hY(t,{popupRedirectResolver:WW,persistence:[sW,YY,U3]}),r=s3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=JW(a.toString());zY(n,l,()=>l(n.currentUser)),BY(n,u=>l(u))}}const s=t3("auth");return s&&mY(n,`http://${s}`),n}function tG(){return document.getElementsByTagName("head")?.[0]??document}sY({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ci("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",tG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QW("Browser");var nG="firebase",rG="12.6.0";na(nG,rG,"app");var uD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var vl,Y3;(function(){var t;function e(P,O){function T(){}T.prototype=O.prototype,P.F=O.prototype,P.prototype=new T,P.prototype.constructor=P,P.D=function(I,V,$){for(var U=Array(arguments.length-2),G=2;G<arguments.length;G++)U[G-2]=arguments[G];return O.prototype[V].apply(I,U)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,O,T){T||(T=0);const I=Array(16);if(typeof O=="string")for(var V=0;V<16;++V)I[V]=O.charCodeAt(T++)|O.charCodeAt(T++)<<8|O.charCodeAt(T++)<<16|O.charCodeAt(T++)<<24;else for(V=0;V<16;++V)I[V]=O[T++]|O[T++]<<8|O[T++]<<16|O[T++]<<24;O=P.g[0],T=P.g[1],V=P.g[2];let $=P.g[3],U;U=O+($^T&(V^$))+I[0]+3614090360&4294967295,O=T+(U<<7&4294967295|U>>>25),U=$+(V^O&(T^V))+I[1]+3905402710&4294967295,$=O+(U<<12&4294967295|U>>>20),U=V+(T^$&(O^T))+I[2]+606105819&4294967295,V=$+(U<<17&4294967295|U>>>15),U=T+(O^V&($^O))+I[3]+3250441966&4294967295,T=V+(U<<22&4294967295|U>>>10),U=O+($^T&(V^$))+I[4]+4118548399&4294967295,O=T+(U<<7&4294967295|U>>>25),U=$+(V^O&(T^V))+I[5]+1200080426&4294967295,$=O+(U<<12&4294967295|U>>>20),U=V+(T^$&(O^T))+I[6]+2821735955&4294967295,V=$+(U<<17&4294967295|U>>>15),U=T+(O^V&($^O))+I[7]+4249261313&4294967295,T=V+(U<<22&4294967295|U>>>10),U=O+($^T&(V^$))+I[8]+1770035416&4294967295,O=T+(U<<7&4294967295|U>>>25),U=$+(V^O&(T^V))+I[9]+2336552879&4294967295,$=O+(U<<12&4294967295|U>>>20),U=V+(T^$&(O^T))+I[10]+4294925233&4294967295,V=$+(U<<17&4294967295|U>>>15),U=T+(O^V&($^O))+I[11]+2304563134&4294967295,T=V+(U<<22&4294967295|U>>>10),U=O+($^T&(V^$))+I[12]+1804603682&4294967295,O=T+(U<<7&4294967295|U>>>25),U=$+(V^O&(T^V))+I[13]+4254626195&4294967295,$=O+(U<<12&4294967295|U>>>20),U=V+(T^$&(O^T))+I[14]+2792965006&4294967295,V=$+(U<<17&4294967295|U>>>15),U=T+(O^V&($^O))+I[15]+1236535329&4294967295,T=V+(U<<22&4294967295|U>>>10),U=O+(V^$&(T^V))+I[1]+4129170786&4294967295,O=T+(U<<5&4294967295|U>>>27),U=$+(T^V&(O^T))+I[6]+3225465664&4294967295,$=O+(U<<9&4294967295|U>>>23),U=V+(O^T&($^O))+I[11]+643717713&4294967295,V=$+(U<<14&4294967295|U>>>18),U=T+($^O&(V^$))+I[0]+3921069994&4294967295,T=V+(U<<20&4294967295|U>>>12),U=O+(V^$&(T^V))+I[5]+3593408605&4294967295,O=T+(U<<5&4294967295|U>>>27),U=$+(T^V&(O^T))+I[10]+38016083&4294967295,$=O+(U<<9&4294967295|U>>>23),U=V+(O^T&($^O))+I[15]+3634488961&4294967295,V=$+(U<<14&4294967295|U>>>18),U=T+($^O&(V^$))+I[4]+3889429448&4294967295,T=V+(U<<20&4294967295|U>>>12),U=O+(V^$&(T^V))+I[9]+568446438&4294967295,O=T+(U<<5&4294967295|U>>>27),U=$+(T^V&(O^T))+I[14]+3275163606&4294967295,$=O+(U<<9&4294967295|U>>>23),U=V+(O^T&($^O))+I[3]+4107603335&4294967295,V=$+(U<<14&4294967295|U>>>18),U=T+($^O&(V^$))+I[8]+1163531501&4294967295,T=V+(U<<20&4294967295|U>>>12),U=O+(V^$&(T^V))+I[13]+2850285829&4294967295,O=T+(U<<5&4294967295|U>>>27),U=$+(T^V&(O^T))+I[2]+4243563512&4294967295,$=O+(U<<9&4294967295|U>>>23),U=V+(O^T&($^O))+I[7]+1735328473&4294967295,V=$+(U<<14&4294967295|U>>>18),U=T+($^O&(V^$))+I[12]+2368359562&4294967295,T=V+(U<<20&4294967295|U>>>12),U=O+(T^V^$)+I[5]+4294588738&4294967295,O=T+(U<<4&4294967295|U>>>28),U=$+(O^T^V)+I[8]+2272392833&4294967295,$=O+(U<<11&4294967295|U>>>21),U=V+($^O^T)+I[11]+1839030562&4294967295,V=$+(U<<16&4294967295|U>>>16),U=T+(V^$^O)+I[14]+4259657740&4294967295,T=V+(U<<23&4294967295|U>>>9),U=O+(T^V^$)+I[1]+2763975236&4294967295,O=T+(U<<4&4294967295|U>>>28),U=$+(O^T^V)+I[4]+1272893353&4294967295,$=O+(U<<11&4294967295|U>>>21),U=V+($^O^T)+I[7]+4139469664&4294967295,V=$+(U<<16&4294967295|U>>>16),U=T+(V^$^O)+I[10]+3200236656&4294967295,T=V+(U<<23&4294967295|U>>>9),U=O+(T^V^$)+I[13]+681279174&4294967295,O=T+(U<<4&4294967295|U>>>28),U=$+(O^T^V)+I[0]+3936430074&4294967295,$=O+(U<<11&4294967295|U>>>21),U=V+($^O^T)+I[3]+3572445317&4294967295,V=$+(U<<16&4294967295|U>>>16),U=T+(V^$^O)+I[6]+76029189&4294967295,T=V+(U<<23&4294967295|U>>>9),U=O+(T^V^$)+I[9]+3654602809&4294967295,O=T+(U<<4&4294967295|U>>>28),U=$+(O^T^V)+I[12]+3873151461&4294967295,$=O+(U<<11&4294967295|U>>>21),U=V+($^O^T)+I[15]+530742520&4294967295,V=$+(U<<16&4294967295|U>>>16),U=T+(V^$^O)+I[2]+3299628645&4294967295,T=V+(U<<23&4294967295|U>>>9),U=O+(V^(T|~$))+I[0]+4096336452&4294967295,O=T+(U<<6&4294967295|U>>>26),U=$+(T^(O|~V))+I[7]+1126891415&4294967295,$=O+(U<<10&4294967295|U>>>22),U=V+(O^($|~T))+I[14]+2878612391&4294967295,V=$+(U<<15&4294967295|U>>>17),U=T+($^(V|~O))+I[5]+4237533241&4294967295,T=V+(U<<21&4294967295|U>>>11),U=O+(V^(T|~$))+I[12]+1700485571&4294967295,O=T+(U<<6&4294967295|U>>>26),U=$+(T^(O|~V))+I[3]+2399980690&4294967295,$=O+(U<<10&4294967295|U>>>22),U=V+(O^($|~T))+I[10]+4293915773&4294967295,V=$+(U<<15&4294967295|U>>>17),U=T+($^(V|~O))+I[1]+2240044497&4294967295,T=V+(U<<21&4294967295|U>>>11),U=O+(V^(T|~$))+I[8]+1873313359&4294967295,O=T+(U<<6&4294967295|U>>>26),U=$+(T^(O|~V))+I[15]+4264355552&4294967295,$=O+(U<<10&4294967295|U>>>22),U=V+(O^($|~T))+I[6]+2734768916&4294967295,V=$+(U<<15&4294967295|U>>>17),U=T+($^(V|~O))+I[13]+1309151649&4294967295,T=V+(U<<21&4294967295|U>>>11),U=O+(V^(T|~$))+I[4]+4149444226&4294967295,O=T+(U<<6&4294967295|U>>>26),U=$+(T^(O|~V))+I[11]+3174756917&4294967295,$=O+(U<<10&4294967295|U>>>22),U=V+(O^($|~T))+I[2]+718787259&4294967295,V=$+(U<<15&4294967295|U>>>17),U=T+($^(V|~O))+I[9]+3951481745&4294967295,P.g[0]=P.g[0]+O&4294967295,P.g[1]=P.g[1]+(V+(U<<21&4294967295|U>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+$&4294967295}r.prototype.v=function(P,O){O===void 0&&(O=P.length);const T=O-this.blockSize,I=this.C;let V=this.h,$=0;for(;$<O;){if(V==0)for(;$<=T;)s(this,P,$),$+=this.blockSize;if(typeof P=="string"){for(;$<O;)if(I[V++]=P.charCodeAt($++),V==this.blockSize){s(this,I),V=0;break}}else for(;$<O;)if(I[V++]=P[$++],V==this.blockSize){s(this,I),V=0;break}}this.h=V,this.o+=O},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var O=1;O<P.length-8;++O)P[O]=0;O=this.o*8;for(var T=P.length-8;T<P.length;++T)P[T]=O&255,O/=256;for(this.v(P),P=Array(16),O=0,T=0;T<4;++T)for(let I=0;I<32;I+=8)P[O++]=this.g[T]>>>I&255;return P};function a(P,O){var T=u;return Object.prototype.hasOwnProperty.call(T,P)?T[P]:T[P]=O(P)}function l(P,O){this.h=O;const T=[];let I=!0;for(let V=P.length-1;V>=0;V--){const $=P[V]|0;I&&$==O||(T[V]=$,I=!1)}this.g=T}var u={};function d(P){return-128<=P&&P<128?a(P,function(O){return new l([O|0],O<0?-1:0)}):new l([P|0],P<0?-1:0)}function f(P){if(isNaN(P)||!isFinite(P))return g;if(P<0)return S(f(-P));const O=[];let T=1;for(let I=0;P>=T;I++)O[I]=P/T|0,T*=4294967296;return new l(O,0)}function m(P,O){if(P.length==0)throw Error("number format error: empty string");if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(P.charAt(0)=="-")return S(m(P.substring(1),O));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=f(Math.pow(O,8));let I=g;for(let $=0;$<P.length;$+=8){var V=Math.min(8,P.length-$);const U=parseInt(P.substring($,$+V),O);V<8?(V=f(Math.pow(O,V)),I=I.j(V).add(f(U))):(I=I.j(T),I=I.add(f(U)))}return I}var g=d(0),y=d(1),w=d(16777216);t=l.prototype,t.m=function(){if(C(this))return-S(this).m();let P=0,O=1;for(let T=0;T<this.g.length;T++){const I=this.i(T);P+=(I>=0?I:4294967296+I)*O,O*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(_(this))return"0";if(C(this))return"-"+S(this).toString(P);const O=f(Math.pow(P,6));var T=this;let I="";for(;;){const V=A(T,O).g;T=N(T,V.j(O));let $=((T.g.length>0?T.g[0]:T.h)>>>0).toString(P);if(T=V,_(T))return $+I;for(;$.length<6;)$="0"+$;I=$+I}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function _(P){if(P.h!=0)return!1;for(let O=0;O<P.g.length;O++)if(P.g[O]!=0)return!1;return!0}function C(P){return P.h==-1}t.l=function(P){return P=N(this,P),C(P)?-1:_(P)?0:1};function S(P){const O=P.g.length,T=[];for(let I=0;I<O;I++)T[I]=~P.g[I];return new l(T,~P.h).add(y)}t.abs=function(){return C(this)?S(this):this},t.add=function(P){const O=Math.max(this.g.length,P.g.length),T=[];let I=0;for(let V=0;V<=O;V++){let $=I+(this.i(V)&65535)+(P.i(V)&65535),U=($>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);I=U>>>16,$&=65535,U&=65535,T[V]=U<<16|$}return new l(T,T[T.length-1]&-2147483648?-1:0)};function N(P,O){return P.add(S(O))}t.j=function(P){if(_(this)||_(P))return g;if(C(this))return C(P)?S(this).j(S(P)):S(S(this).j(P));if(C(P))return S(this.j(S(P)));if(this.l(w)<0&&P.l(w)<0)return f(this.m()*P.m());const O=this.g.length+P.g.length,T=[];for(var I=0;I<2*O;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(let V=0;V<P.g.length;V++){const $=this.i(I)>>>16,U=this.i(I)&65535,G=P.i(V)>>>16,W=P.i(V)&65535;T[2*I+2*V]+=U*W,k(T,2*I+2*V),T[2*I+2*V+1]+=$*W,k(T,2*I+2*V+1),T[2*I+2*V+1]+=U*G,k(T,2*I+2*V+1),T[2*I+2*V+2]+=$*G,k(T,2*I+2*V+2)}for(P=0;P<O;P++)T[P]=T[2*P+1]<<16|T[2*P];for(P=O;P<2*O;P++)T[P]=0;return new l(T,0)};function k(P,O){for(;(P[O]&65535)!=P[O];)P[O+1]+=P[O]>>>16,P[O]&=65535,O++}function R(P,O){this.g=P,this.h=O}function A(P,O){if(_(O))throw Error("division by zero");if(_(P))return new R(g,g);if(C(P))return O=A(S(P),O),new R(S(O.g),S(O.h));if(C(O))return O=A(P,S(O)),new R(S(O.g),O.h);if(P.g.length>30){if(C(P)||C(O))throw Error("slowDivide_ only works with positive integers.");for(var T=y,I=O;I.l(P)<=0;)T=L(T),I=L(I);var V=F(T,1),$=F(I,1);for(I=F(I,2),T=F(T,2);!_(I);){var U=$.add(I);U.l(P)<=0&&(V=V.add(T),$=U),I=F(I,1),T=F(T,1)}return O=N(P,V.j(O)),new R(V,O)}for(V=g;P.l(O)>=0;){for(T=Math.max(1,Math.floor(P.m()/O.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),$=f(T),U=$.j(O);C(U)||U.l(P)>0;)T-=I,$=f(T),U=$.j(O);_($)&&($=y),V=V.add($),P=N(P,U)}return new R(V,P)}t.B=function(P){return A(this,P).h},t.and=function(P){const O=Math.max(this.g.length,P.g.length),T=[];for(let I=0;I<O;I++)T[I]=this.i(I)&P.i(I);return new l(T,this.h&P.h)},t.or=function(P){const O=Math.max(this.g.length,P.g.length),T=[];for(let I=0;I<O;I++)T[I]=this.i(I)|P.i(I);return new l(T,this.h|P.h)},t.xor=function(P){const O=Math.max(this.g.length,P.g.length),T=[];for(let I=0;I<O;I++)T[I]=this.i(I)^P.i(I);return new l(T,this.h^P.h)};function L(P){const O=P.g.length+1,T=[];for(let I=0;I<O;I++)T[I]=P.i(I)<<1|P.i(I-1)>>>31;return new l(T,P.h)}function F(P,O){const T=O>>5;O%=32;const I=P.g.length-T,V=[];for(let $=0;$<I;$++)V[$]=O>0?P.i($+T)>>>O|P.i($+T+1)<<32-O:P.i($+T);return new l(V,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Y3=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,vl=l}).apply(typeof uD<"u"?uD:typeof self<"u"?self:typeof window<"u"?window:{});var Ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var W3,jf,G3,dy,X1,K3,Q3,X3;(function(){var t,e=Object.defineProperty;function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ag=="object"&&Ag];for(var j=0;j<v.length;++j){var M=v[j];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var r=n(this);function s(v,j){if(j)e:{var M=r;v=v.split(".");for(var Y=0;Y<v.length-1;Y++){var ie=v[Y];if(!(ie in M))break e;M=M[ie]}v=v[v.length-1],Y=M[v],j=j(Y),j!=Y&&j!=null&&e(M,v,{configurable:!0,writable:!0,value:j})}}s("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(v){return v||function(j){var M=[],Y;for(Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&M.push([Y,j[Y]]);return M}});var a=a||{},l=this||self;function u(v){var j=typeof v;return j=="object"&&v!=null||j=="function"}function d(v,j,M){return v.call.apply(v.bind,arguments)}function f(v,j,M){return f=d,f.apply(null,arguments)}function m(v,j){var M=Array.prototype.slice.call(arguments,1);return function(){var Y=M.slice();return Y.push.apply(Y,arguments),v.apply(this,Y)}}function g(v,j){function M(){}M.prototype=j.prototype,v.Z=j.prototype,v.prototype=new M,v.prototype.constructor=v,v.Ob=function(Y,ie,de){for(var Ce=Array(arguments.length-2),at=2;at<arguments.length;at++)Ce[at-2]=arguments[at];return j.prototype[ie].apply(Y,Ce)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function w(v){const j=v.length;if(j>0){const M=Array(j);for(let Y=0;Y<j;Y++)M[Y]=v[Y];return M}return[]}function _(v,j){for(let Y=1;Y<arguments.length;Y++){const ie=arguments[Y];var M=typeof ie;if(M=M!="object"?M:ie?Array.isArray(ie)?"array":M:"null",M=="array"||M=="object"&&typeof ie.length=="number"){M=v.length||0;const de=ie.length||0;v.length=M+de;for(let Ce=0;Ce<de;Ce++)v[M+Ce]=ie[Ce]}else v.push(ie)}}class C{constructor(j,M){this.i=j,this.j=M,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function S(v){l.setTimeout(()=>{throw v},0)}function N(){var v=P;let j=null;return v.g&&(j=v.g,v.g=v.g.next,v.g||(v.h=null),j.next=null),j}class k{constructor(){this.h=this.g=null}add(j,M){const Y=R.get();Y.set(j,M),this.h?this.h.next=Y:this.g=Y,this.h=Y}}var R=new C(()=>new A,v=>v.reset());class A{constructor(){this.next=this.g=this.h=null}set(j,M){this.h=j,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let L,F=!1,P=new k,O=()=>{const v=Promise.resolve(void 0);L=()=>{v.then(T)}};function T(){for(var v;v=N();){try{v.h.call(v.g)}catch(M){S(M)}var j=R;j.j(v),j.h<100&&(j.h++,v.next=j.g,j.g=v)}F=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(v,j){this.type=v,this.g=this.target=j,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var $=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var v=!1,j=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const M=()=>{};l.addEventListener("test",M,j),l.removeEventListener("test",M,j)}catch{}return v})();function U(v){return/^[\s\xa0]*$/.test(v)}function G(v,j){V.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,j)}g(G,V),G.prototype.init=function(v,j){const M=this.type=v.type,Y=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=j,j=v.relatedTarget,j||(M=="mouseover"?j=v.fromElement:M=="mouseout"&&(j=v.toElement)),this.relatedTarget=j,Y?(this.clientX=Y.clientX!==void 0?Y.clientX:Y.pageX,this.clientY=Y.clientY!==void 0?Y.clientY:Y.pageY,this.screenX=Y.screenX||0,this.screenY=Y.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var W="closure_listenable_"+(Math.random()*1e6|0),z=0;function q(v,j,M,Y,ie){this.listener=v,this.proxy=null,this.src=j,this.type=M,this.capture=!!Y,this.ha=ie,this.key=++z,this.da=this.fa=!1}function K(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function X(v,j,M){for(const Y in v)j.call(M,v[Y],Y,v)}function se(v,j){for(const M in v)j.call(void 0,v[M],M,v)}function H(v){const j={};for(const M in v)j[M]=v[M];return j}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(v,j){let M,Y;for(let ie=1;ie<arguments.length;ie++){Y=arguments[ie];for(M in Y)v[M]=Y[M];for(let de=0;de<Z.length;de++)M=Z[de],Object.prototype.hasOwnProperty.call(Y,M)&&(v[M]=Y[M])}}function J(v){this.src=v,this.g={},this.h=0}J.prototype.add=function(v,j,M,Y,ie){const de=v.toString();v=this.g[de],v||(v=this.g[de]=[],this.h++);const Ce=ae(v,j,Y,ie);return Ce>-1?(j=v[Ce],M||(j.fa=!1)):(j=new q(j,this.src,de,!!Y,ie),j.fa=M,v.push(j)),j};function ne(v,j){const M=j.type;if(M in v.g){var Y=v.g[M],ie=Array.prototype.indexOf.call(Y,j,void 0),de;(de=ie>=0)&&Array.prototype.splice.call(Y,ie,1),de&&(K(j),v.g[M].length==0&&(delete v.g[M],v.h--))}}function ae(v,j,M,Y){for(let ie=0;ie<v.length;++ie){const de=v[ie];if(!de.da&&de.listener==j&&de.capture==!!M&&de.ha==Y)return ie}return-1}var me="closure_lm_"+(Math.random()*1e6|0),we={};function Ne(v,j,M,Y,ie){if(Array.isArray(j)){for(let de=0;de<j.length;de++)Ne(v,j[de],M,Y,ie);return null}return M=cr(M),v&&v[W]?v.J(j,M,u(Y)?!!Y.capture:!1,ie):Se(v,j,M,!1,Y,ie)}function Se(v,j,M,Y,ie,de){if(!j)throw Error("Invalid event type");const Ce=u(ie)?!!ie.capture:!!ie;let at=ut(v);if(at||(v[me]=at=new J(v)),M=at.add(j,M,Y,Ce,de),M.proxy)return M;if(Y=Ue(),M.proxy=Y,Y.src=v,Y.listener=M,v.addEventListener)$||(ie=Ce),ie===void 0&&(ie=!1),v.addEventListener(j.toString(),Y,ie);else if(v.attachEvent)v.attachEvent(on(j.toString()),Y);else if(v.addListener&&v.removeListener)v.addListener(Y);else throw Error("addEventListener and attachEvent are unavailable.");return M}function Ue(){function v(M){return j.call(v.src,v.listener,M)}const j=Ee;return v}function jt(v,j,M,Y,ie){if(Array.isArray(j))for(var de=0;de<j.length;de++)jt(v,j[de],M,Y,ie);else Y=u(Y)?!!Y.capture:!!Y,M=cr(M),v&&v[W]?(v=v.i,de=String(j).toString(),de in v.g&&(j=v.g[de],M=ae(j,M,Y,ie),M>-1&&(K(j[M]),Array.prototype.splice.call(j,M,1),j.length==0&&(delete v.g[de],v.h--)))):v&&(v=ut(v))&&(j=v.g[j.toString()],v=-1,j&&(v=ae(j,M,Y,ie)),(M=v>-1?j[v]:null)&&Qe(M))}function Qe(v){if(typeof v!="number"&&v&&!v.da){var j=v.src;if(j&&j[W])ne(j.i,v);else{var M=v.type,Y=v.proxy;j.removeEventListener?j.removeEventListener(M,Y,v.capture):j.detachEvent?j.detachEvent(on(M),Y):j.addListener&&j.removeListener&&j.removeListener(Y),(M=ut(j))?(ne(M,v),M.h==0&&(M.src=null,j[me]=null)):K(v)}}}function on(v){return v in we?we[v]:we[v]="on"+v}function Ee(v,j){if(v.da)v=!0;else{j=new G(j,this);const M=v.listener,Y=v.ha||v.src;v.fa&&Qe(v),v=M.call(Y,j)}return v}function ut(v){return v=v[me],v instanceof J?v:null}var Rt="__closure_events_fn_"+(Math.random()*1e9>>>0);function cr(v){return typeof v=="function"?v:(v[Rt]||(v[Rt]=function(j){return v.handleEvent(j)}),v[Rt])}function _t(){I.call(this),this.i=new J(this),this.M=this,this.G=null}g(_t,I),_t.prototype[W]=!0,_t.prototype.removeEventListener=function(v,j,M,Y){jt(this,v,j,M,Y)};function en(v,j){var M,Y=v.G;if(Y)for(M=[];Y;Y=Y.G)M.push(Y);if(v=v.M,Y=j.type||j,typeof j=="string")j=new V(j,v);else if(j instanceof V)j.target=j.target||v;else{var ie=j;j=new V(Y,v),te(j,ie)}ie=!0;let de,Ce;if(M)for(Ce=M.length-1;Ce>=0;Ce--)de=j.g=M[Ce],ie=nr(de,Y,!0,j)&&ie;if(de=j.g=v,ie=nr(de,Y,!0,j)&&ie,ie=nr(de,Y,!1,j)&&ie,M)for(Ce=0;Ce<M.length;Ce++)de=j.g=M[Ce],ie=nr(de,Y,!1,j)&&ie}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var v=this.i;for(const j in v.g){const M=v.g[j];for(let Y=0;Y<M.length;Y++)K(M[Y]);delete v.g[j],v.h--}}this.G=null},_t.prototype.J=function(v,j,M,Y){return this.i.add(String(v),j,!1,M,Y)},_t.prototype.K=function(v,j,M,Y){return this.i.add(String(v),j,!0,M,Y)};function nr(v,j,M,Y){if(j=v.i.g[String(j)],!j)return!0;j=j.concat();let ie=!0;for(let de=0;de<j.length;++de){const Ce=j[de];if(Ce&&!Ce.da&&Ce.capture==M){const at=Ce.listener,Mn=Ce.ha||Ce.src;Ce.fa&&ne(v.i,Ce),ie=at.call(Mn,Y)!==!1&&ie}}return ie&&!Y.defaultPrevented}function us(v,j){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=f(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:l.setTimeout(v,j||0)}function Wr(v){v.g=us(()=>{v.g=null,v.i&&(v.i=!1,Wr(v))},v.l);const j=v.h;v.h=null,v.m.apply(null,j)}class _n extends I{constructor(j,M){super(),this.m=j,this.l=M,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(v){I.call(this),this.h=v,this.g={}}g(ur,I);var ds=[];function Rs(v){X(v.g,function(j,M){this.g.hasOwnProperty(M)&&Qe(j)},v),v.g={}}ur.prototype.N=function(){ur.Z.N.call(this),Rs(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gr=l.JSON.stringify,la=l.JSON.parse,Ni=class{stringify(v){return l.JSON.stringify(v,void 0)}parse(v){return l.JSON.parse(v,void 0)}};function ca(){}function Ra(){}var Hn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function En(){V.call(this,"d")}g(En,V);function Rn(){V.call(this,"c")}g(Rn,V);var tn={},Te=null;function Re(){return Te=Te||new _t}tn.Ia="serverreachability";function $e(v){V.call(this,tn.Ia,v)}g($e,V);function st(v){const j=Re();en(j,new $e(j))}tn.STAT_EVENT="statevent";function Xt(v,j){V.call(this,tn.STAT_EVENT,v),this.stat=j}g(Xt,V);function tt(v){const j=Re();en(j,new Xt(j,v))}tn.Ja="timingevent";function Zt(v,j){V.call(this,tn.Ja,v),this.size=j}g(Zt,V);function Pn(v,j){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){v()},j)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function xr(v,j,M,Y,ie,de){v.info(function(){if(v.g)if(de){var Ce="",at=de.split("&");for(let Pt=0;Pt<at.length;Pt++){var Mn=at[Pt].split("=");if(Mn.length>1){const pn=Mn[0];Mn=Mn[1];const Os=pn.split("_");Ce=Os.length>=2&&Os[1]=="type"?Ce+(pn+"="+Mn+"&"):Ce+(pn+"=redacted&")}}}else Ce=null;else Ce=de;return"XMLHTTP REQ ("+Y+") [attempt "+ie+"]: "+j+`
`+M+`
`+Ce})}function hs(v,j,M,Y,ie,de,Ce){v.info(function(){return"XMLHTTP RESP ("+Y+") [ attempt "+ie+"]: "+j+`
`+M+`
`+de+" "+Ce})}function Tt(v,j,M,Y){v.info(function(){return"XMLHTTP TEXT ("+j+"): "+ji(v,M)+(Y?" "+Y:"")})}function Ar(v,j){v.info(function(){return"TIMEOUT: "+j})}$n.prototype.info=function(){};function ji(v,j){if(!v.g)return j;if(!j)return null;try{const de=JSON.parse(j);if(de){for(v=0;v<de.length;v++)if(Array.isArray(de[v])){var M=de[v];if(!(M.length<2)){var Y=M[1];if(Array.isArray(Y)&&!(Y.length<1)){var ie=Y[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Ce=1;Ce<Y.length;Ce++)Y[Ce]=""}}}}return Gr(de)}catch{return j}}var Ye={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ah={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ih;function Bl(){}g(Bl,ca),Bl.prototype.g=function(){return new XMLHttpRequest},ih=new Bl;function Ti(v){return encodeURIComponent(String(v))}function np(v){var j=1;v=v.split(":");const M=[];for(;j>0&&v.length;)M.push(v.shift()),j--;return v.length&&M.push(v.join(":")),M}function ua(v,j,M,Y){this.j=v,this.i=j,this.l=M,this.S=Y||1,this.V=new ur(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new da}function da(){this.i=null,this.g="",this.h=!1}var qn={},dr={};function Pa(v,j,M){v.M=1,v.A=zl(Wn(j)),v.u=M,v.R=!0,ru(v,null)}function ru(v,j){v.F=Date.now(),Ma(v),v.B=Wn(v.A);var M=v.B,Y=v.S;Array.isArray(Y)||(Y=[String(Y)]),ou(M.i,"t",Y),v.C=0,M=v.j.L,v.h=new da,v.g=yp(v.j,M?j:null,!v.u),v.P>0&&(v.O=new _n(f(v.Y,v,v.g),v.P)),j=v.V,M=v.g,Y=v.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(ds[0]=ie.toString()),ie=ds);for(let de=0;de<ie.length;de++){const Ce=Ne(M,ie[de],Y||j.handleEvent,!1,j.h||j);if(!Ce)break;j.g[Ce.key]=Ce}j=v.J?H(v.J):{},v.u?(v.v||(v.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,j)):(v.v="GET",v.g.ea(v.B,v.v,null,j)),st(),xr(v.i,v.v,v.B,v.l,v.S,v.u)}ua.prototype.ba=function(v){v=v.target;const j=this.O;j&&ma(v)==3?j.j():this.Y(v)},ua.prototype.Y=function(v){try{if(v==this.g)e:{const at=ma(this.g),Mn=this.g.ya(),Pt=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||vr(this.g)))){this.K||at!=4||Mn==7||(Mn==8||Pt<=0?st(3):st(2)),La(this);var j=this.g.ca();this.X=j;var M=Qx(this);if(this.o=j==200,hs(this.i,this.v,this.B,this.l,this.S,at,j),this.o){if(this.U&&!this.L){t:{if(this.g){var Y,ie=this.g;if((Y=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Y)){var de=Y;break t}}de=null}if(v=de)Tt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oa(this,v);else{this.o=!1,this.m=3,tt(12),fs(this),Ps(this);break e}}if(this.R){v=!0;let pn;for(;!this.K&&this.C<M.length;)if(pn=sp(this,M),pn==dr){at==4&&(this.m=4,tt(14),v=!1),Tt(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==qn){this.m=4,tt(15),Tt(this.i,this.l,M,"[Invalid Chunk]"),v=!1;break}else Tt(this.i,this.l,pn,null),Oa(this,pn);if(rp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||M.length!=0||this.h.h||(this.m=1,tt(16),v=!1),this.o=this.o&&v,!v)Tt(this.i,this.l,M,"[Invalid Chunked Response]"),fs(this),Ps(this);else if(M.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),wh(Ce),Ce.P=!0,tt(11))}}else Tt(this.i,this.l,M,null),Oa(this,M);at==4&&fs(this),this.o&&!this.K&&(at==4?fp(this.j,this):(this.o=!1,Ma(this)))}else Di(this.g),j==400&&M.indexOf("Unknown SID")>0?(this.m=3,tt(12)):(this.m=0,tt(13)),fs(this),Ps(this)}}}catch{}finally{}};function Qx(v){if(!rp(v))return v.g.la();const j=vr(v.g);if(j==="")return"";let M="";const Y=j.length,ie=ma(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return fs(v),Ps(v),"";v.h.i=new l.TextDecoder}for(let de=0;de<Y;de++)v.h.h=!0,M+=v.h.i.decode(j[de],{stream:!(ie&&de==Y-1)});return j.length=0,v.h.g+=M,v.C=0,v.h.g}function rp(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function sp(v,j){var M=v.C,Y=j.indexOf(`
`,M);return Y==-1?dr:(M=Number(j.substring(M,Y)),isNaN(M)?qn:(Y+=1,Y+M>j.length?dr:(j=j.slice(Y,Y+M),v.C=Y+M,j)))}ua.prototype.cancel=function(){this.K=!0,fs(this)};function Ma(v){v.T=Date.now()+v.H,su(v,v.H)}function su(v,j){if(v.D!=null)throw Error("WatchDog timer not null");v.D=Pn(f(v.aa,v),j)}function La(v){v.D&&(l.clearTimeout(v.D),v.D=null)}ua.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(st(),tt(17)),fs(this),this.m=2,Ps(this)):su(this,this.T-v)};function Ps(v){v.j.I==0||v.K||fp(v.j,v)}function fs(v){La(v);var j=v.O;j&&typeof j.dispose=="function"&&j.dispose(),v.O=null,Rs(v.V),v.g&&(j=v.g,v.g=null,j.abort(),j.dispose())}function Oa(v,j){try{var M=v.j;if(M.I!=0&&(M.g==v||Va(M.h,v))){if(!v.L&&Va(M.h,v)&&M.I==3){try{var Y=M.Ba.g.parse(j)}catch{Y=null}if(Array.isArray(Y)&&Y.length==3){var ie=Y;if(ie[0]==0){e:if(!M.v){if(M.g)if(M.g.F+3e3<v.F)hu(M),To(M);else break e;Kl(M),tt(18)}}else M.xa=ie[1],0<M.xa-M.K&&ie[2]<37500&&M.F&&M.A==0&&!M.C&&(M.C=Pn(f(M.Va,M),6e3));Ia(M.h)<=1&&M.ta&&(M.ta=void 0)}else $a(M,11)}else if((v.L||M.g==v)&&hu(M),!U(j))for(ie=M.Ba.g.parse(j),j=0;j<ie.length;j++){let Pt=ie[j];const pn=Pt[0];if(!(pn<=M.K))if(M.K=pn,Pt=Pt[1],M.I==2)if(Pt[0]=="c"){M.M=Pt[1],M.ba=Pt[2];const Os=Pt[3];Os!=null&&(M.ka=Os,M.j.info("VER="+M.ka));const qa=Pt[4];qa!=null&&(M.za=qa,M.j.info("SVER="+M.za));const pa=Pt[5];pa!=null&&typeof pa=="number"&&pa>0&&(Y=1.5*pa,M.O=Y,M.j.info("backChannelRequestTimeoutMs_="+Y)),Y=M;const ga=v.g;if(ga){const Ql=ga.g?ga.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ql){var de=Y.h;de.g||Ql.indexOf("spdy")==-1&&Ql.indexOf("quic")==-1&&Ql.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(ch(de,de.h),de.h=null))}if(Y.G){const fu=ga.g?ga.g.getResponseHeader("X-HTTP-Session-Id"):null;fu&&(Y.wa=fu,Ut(Y.J,Y.G,fu))}}M.I=3,M.l&&M.l.ra(),M.aa&&(M.T=Date.now()-v.F,M.j.info("Handshake RTT: "+M.T+"ms")),Y=M;var Ce=v;if(Y.na=gp(Y,Y.L?Y.ba:null,Y.W),Ce.L){uh(Y.h,Ce);var at=Ce,Mn=Y.O;Mn&&(at.H=Mn),at.D&&(La(at),Ma(at)),Y.g=Ce}else dp(Y);M.i.length>0&&Ha(M)}else Pt[0]!="stop"&&Pt[0]!="close"||$a(M,7);else M.I==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?$a(M,7):vh(M):Pt[0]!="noop"&&M.l&&M.l.qa(Pt),M.A=0)}}st(4)}catch{}}var Yn=class{constructor(v,j){this.g=v,this.map=j}};function oh(v){this.l=v||10,l.PerformanceNavigationTiming?(v=l.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lh(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Ia(v){return v.h?1:v.g?v.g.size:0}function Va(v,j){return v.h?v.h==j:v.g?v.g.has(j):!1}function ch(v,j){v.g?v.g.add(j):v.h=j}function uh(v,j){v.h&&v.h==j?v.h=null:v.g&&v.g.has(j)&&v.g.delete(j)}oh.prototype.cancel=function(){if(this.i=dh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function dh(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let j=v.i;for(const M of v.g.values())j=j.concat(M.G);return j}return w(v.i)}var ap=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function au(v,j){if(v){v=v.split("&");for(let M=0;M<v.length;M++){const Y=v[M].indexOf("=");let ie,de=null;Y>=0?(ie=v[M].substring(0,Y),de=v[M].substring(Y+1)):ie=v[M],j(ie,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function ms(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;v instanceof ms?(this.l=v.l,hr(this,v.j),this.o=v.o,this.g=v.g,wo(this,v.u),this.h=v.h,hh(this,cp(v.i)),this.m=v.m):v&&(j=String(v).match(ap))?(this.l=!1,hr(this,j[1]||"",!0),this.o=Ua(j[2]||""),this.g=Ua(j[3]||"",!0),wo(this,j[4]),this.h=Ua(j[5]||"",!0),hh(this,j[6]||"",!0),this.m=Ua(j[7]||"")):(this.l=!1,this.i=new Eo(null,this.l))}ms.prototype.toString=function(){const v=[];var j=this.j;j&&v.push(Hl(j,iu,!0),":");var M=this.g;return(M||j=="file")&&(v.push("//"),(j=this.o)&&v.push(Hl(j,iu,!0),"@"),v.push(Ti(M).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.u,M!=null&&v.push(":",String(M))),(M=this.h)&&(this.g&&M.charAt(0)!="/"&&v.push("/"),v.push(Hl(M,M.charAt(0)=="/"?fh:ip,!0))),(M=this.i.toString())&&v.push("?",M),(M=this.m)&&v.push("#",Hl(M,op)),v.join("")},ms.prototype.resolve=function(v){const j=Wn(this);let M=!!v.j;M?hr(j,v.j):M=!!v.o,M?j.o=v.o:M=!!v.g,M?j.g=v.g:M=v.u!=null;var Y=v.h;if(M)wo(j,v.u);else if(M=!!v.h){if(Y.charAt(0)!="/")if(this.g&&!this.h)Y="/"+Y;else{var ie=j.h.lastIndexOf("/");ie!=-1&&(Y=j.h.slice(0,ie+1)+Y)}if(ie=Y,ie==".."||ie==".")Y="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){Y=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const de=[];for(let Ce=0;Ce<ie.length;){const at=ie[Ce++];at=="."?Y&&Ce==ie.length&&de.push(""):at==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),Y&&Ce==ie.length&&de.push("")):(de.push(at),Y=!0)}Y=de.join("/")}else Y=ie}return M?j.h=Y:M=v.i.toString()!=="",M?hh(j,cp(v.i)):M=!!v.m,M&&(j.m=v.m),j};function Wn(v){return new ms(v)}function hr(v,j,M){v.j=M?Ua(j,!0):j,v.j&&(v.j=v.j.replace(/:$/,""))}function wo(v,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);v.u=j}else v.u=null}function hh(v,j,M){j instanceof Eo?(v.i=j,lu(v.i,v.l)):(M||(j=Hl(j,_o)),v.i=new Eo(j,v.l))}function Ut(v,j,M){v.i.set(j,M)}function zl(v){return Ut(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function Ua(v,j){return v?j?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Hl(v,j,M){return typeof v=="string"?(v=encodeURI(v).replace(j,Kr),M&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Kr(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var iu=/[#\/\?@]/g,ip=/[#\?:]/g,fh=/[#\?]/g,_o=/[#\?@]/g,op=/#/g;function Eo(v,j){this.h=this.g=null,this.i=v||null,this.j=!!j}function Qr(v){v.g||(v.g=new Map,v.h=0,v.i&&au(v.i,function(j,M){v.add(decodeURIComponent(j.replace(/\+/g," ")),M)}))}t=Eo.prototype,t.add=function(v,j){Qr(this),this.i=null,v=Co(this,v);let M=this.g.get(v);return M||this.g.set(v,M=[]),M.push(j),this.h+=1,this};function lp(v,j){Qr(v),j=Co(v,j),v.g.has(j)&&(v.i=null,v.h-=v.g.get(j).length,v.g.delete(j))}function mh(v,j){return Qr(v),j=Co(v,j),v.g.has(j)}t.forEach=function(v,j){Qr(this),this.g.forEach(function(M,Y){M.forEach(function(ie){v.call(j,ie,Y,this)},this)},this)};function ph(v,j){Qr(v);let M=[];if(typeof j=="string")mh(v,j)&&(M=M.concat(v.g.get(Co(v,j))));else for(v=Array.from(v.g.values()),j=0;j<v.length;j++)M=M.concat(v[j]);return M}t.set=function(v,j){return Qr(this),this.i=null,v=Co(this,v),mh(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[j]),this.h+=1,this},t.get=function(v,j){return v?(v=ph(this,v),v.length>0?String(v[0]):j):j};function ou(v,j,M){lp(v,j),M.length>0&&(v.i=null,v.g.set(Co(v,j),w(M)),v.h+=M.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],j=Array.from(this.g.keys());for(let Y=0;Y<j.length;Y++){var M=j[Y];const ie=Ti(M);M=ph(this,M);for(let de=0;de<M.length;de++){let Ce=ie;M[de]!==""&&(Ce+="="+Ti(M[de])),v.push(Ce)}}return this.i=v.join("&")};function cp(v){const j=new Eo;return j.i=v.i,v.g&&(j.g=new Map(v.g),j.h=v.h),j}function Co(v,j){return j=String(j),v.j&&(j=j.toLowerCase()),j}function lu(v,j){j&&!v.j&&(Qr(v),v.i=null,v.g.forEach(function(M,Y){const ie=Y.toLowerCase();Y!=ie&&(lp(this,Y),ou(this,ie,M))},v)),v.j=j}function ha(v,j){const M=new $n;if(l.Image){const Y=new Image;Y.onload=m(Ms,M,"TestLoadImage: loaded",!0,j,Y),Y.onerror=m(Ms,M,"TestLoadImage: error",!1,j,Y),Y.onabort=m(Ms,M,"TestLoadImage: abort",!1,j,Y),Y.ontimeout=m(Ms,M,"TestLoadImage: timeout",!1,j,Y),l.setTimeout(function(){Y.ontimeout&&Y.ontimeout()},1e4),Y.src=v}else j(!1)}function gh(v,j){const M=new $n,Y=new AbortController,ie=setTimeout(()=>{Y.abort(),Ms(M,"TestPingServer: timeout",!1,j)},1e4);fetch(v,{signal:Y.signal}).then(de=>{clearTimeout(ie),de.ok?Ms(M,"TestPingServer: ok",!0,j):Ms(M,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ie),Ms(M,"TestPingServer: error",!1,j)})}function Ms(v,j,M,Y,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),Y(M)}catch{}}function So(){this.g=new Ni}function Fa(v){this.i=v.Sb||null,this.h=v.ab||!1}g(Fa,ca),Fa.prototype.g=function(){return new $l(this.i,this.h)};function $l(v,j){_t.call(this),this.H=v,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g($l,_t),t=$l.prototype,t.open=function(v,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=j,this.readyState=1,fa(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(j.body=v),(this.H||l).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,No(this)),this.readyState=0},t.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;cu(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function cu(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}t.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var j=v.value?v.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!v.done}))&&(this.response=this.responseText+=j)}v.done?No(this):fa(this),this.readyState==3&&cu(this)}},t.Oa=function(v){this.g&&(this.response=this.responseText=v,No(this))},t.Na=function(v){this.g&&(this.response=v,No(this))},t.ga=function(){this.g&&No(this)};function No(v){v.readyState=4,v.l=null,v.j=null,v.B=null,fa(v)}t.setRequestHeader=function(v,j){this.A.append(v,j)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],j=this.h.entries();for(var M=j.next();!M.done;)M=M.value,v.push(M[0]+": "+M[1]),M=j.next();return v.join(`\r
`)};function fa(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty($l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Ls(v){let j="";return X(v,function(M,Y){j+=Y,j+=":",j+=M,j+=`\r
`}),j}function ql(v,j,M){e:{for(Y in M){var Y=!1;break e}Y=!0}Y||(M=Ls(M),typeof v=="string"?M!=null&&Ti(M):Ut(v,j,M))}function Yt(v){_t.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Yt,_t);var Ba=/^https?$/i,yh=["POST","PUT"];t=Yt.prototype,t.Fa=function(v){this.H=v},t.ea=function(v,j,M,Y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);j=j?j.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ih.g(),this.g.onreadystatechange=y(f(this.Ca,this));try{this.B=!0,this.g.open(j,String(v),!0),this.B=!1}catch(de){Yl(this,de);return}if(v=M||"",M=new Map(this.headers),Y)if(Object.getPrototypeOf(Y)===Object.prototype)for(var ie in Y)M.set(ie,Y[ie]);else if(typeof Y.keys=="function"&&typeof Y.get=="function")for(const de of Y.keys())M.set(de,Y.get(de));else throw Error("Unknown input type for opt_headers: "+String(Y));Y=Array.from(M.keys()).find(de=>de.toLowerCase()=="content-type"),ie=l.FormData&&v instanceof l.FormData,!(Array.prototype.indexOf.call(yh,j,void 0)>=0)||Y||ie||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Ce]of M)this.g.setRequestHeader(de,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(de){Yl(this,de)}};function Yl(v,j){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=j,v.o=5,xh(v),ki(v)}function xh(v){v.A||(v.A=!0,en(v,"complete"),en(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,en(this,"complete"),en(this,"abort"),ki(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),Yt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Wl(this):this.Xa())},t.Xa=function(){Wl(this)};function Wl(v){if(v.h&&typeof a<"u"){if(v.v&&ma(v)==4)setTimeout(v.Ca.bind(v),0);else if(en(v,"readystatechange"),ma(v)==4){v.h=!1;try{const de=v.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var M;if(!(M=j)){var Y;if(Y=de===0){let Ce=String(v.D).match(ap)[1]||null;!Ce&&l.self&&l.self.location&&(Ce=l.self.location.protocol.slice(0,-1)),Y=!Ba.test(Ce?Ce.toLowerCase():"")}M=Y}if(M)en(v,"complete"),en(v,"success");else{v.o=6;try{var ie=ma(v)>2?v.g.statusText:""}catch{ie=""}v.l=ie+" ["+v.ca()+"]",xh(v)}}finally{ki(v)}}}}function ki(v,j){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const M=v.g;v.g=null,j||en(v,"ready");try{M.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ma(v){return v.g?v.g.readyState:0}t.ca=function(){try{return ma(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(v){if(this.g){var j=this.g.responseText;return v&&j.indexOf(v)==0&&(j=j.substring(v.length)),la(j)}};function vr(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Di(v){const j={};v=(v.g&&ma(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let Y=0;Y<v.length;Y++){if(U(v[Y]))continue;var M=np(v[Y]);const ie=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const de=j[ie]||[];j[ie]=de,de.push(M)}se(j,function(Y){return Y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(v,j,M){return M&&M.internalChannelParams&&M.internalChannelParams[v]||j}function jo(v){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=za("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=za("baseRetryDelayMs",5e3,v),this.Za=za("retryDelaySeedMs",1e4,v),this.Ta=za("forwardChannelMaxRetries",2,v),this.va=za("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new oh(v&&v.concurrentRequestLimit),this.Ba=new So,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jo.prototype,t.ka=8,t.I=1,t.connect=function(v,j,M,Y){tt(0),this.W=v,this.H=j||{},M&&Y!==void 0&&(this.H.OSID=M,this.H.OAID=Y),this.F=this.X,this.J=gp(this,null,this.W),Ha(this)};function vh(v){if(uu(v),v.I==3){var j=v.V++,M=Wn(v.J);if(Ut(M,"SID",v.M),Ut(M,"RID",j),Ut(M,"TYPE","terminate"),Gl(v,M),j=new ua(v,v.j,j),j.M=2,j.A=zl(Wn(M)),M=!1,l.navigator&&l.navigator.sendBeacon)try{M=l.navigator.sendBeacon(j.A.toString(),"")}catch{}!M&&l.Image&&(new Image().src=j.A,M=!0),M||(j.g=yp(j.j,null),j.g.ea(j.A)),j.F=Date.now(),Ma(j)}pp(v)}function To(v){v.g&&(wh(v),v.g.cancel(),v.g=null)}function uu(v){To(v),v.v&&(l.clearTimeout(v.v),v.v=null),hu(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&l.clearTimeout(v.m),v.m=null)}function Ha(v){if(!lh(v.h)&&!v.m){v.m=!0;var j=v.Ea;L||O(),F||(L(),F=!0),P.add(j,v),v.D=0}}function du(v,j){return Ia(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=j.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=Pn(f(v.Ea,v,j),mp(v,v.D)),v.D++,!0)}t.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const ie=new ua(this,this.j,v);let de=this.o;if(this.U&&(de?(de=H(de),te(de,this.U)):de=this.U),this.u!==null||this.R||(ie.J=de,de=null),this.S)e:{for(var j=0,M=0;M<this.i.length;M++){t:{var Y=this.i[M];if("__data__"in Y.map&&(Y=Y.map.__data__,typeof Y=="string")){Y=Y.length;break t}Y=void 0}if(Y===void 0)break;if(j+=Y,j>4096){j=M;break e}if(j===4096||M===this.i.length-1){j=M+1;break e}}j=1e3}else j=1e3;j=up(this,ie,j),M=Wn(this.J),Ut(M,"RID",v),Ut(M,"CVER",22),this.G&&Ut(M,"X-HTTP-Session-Id",this.G),Gl(this,M),de&&(this.R?j="headers="+Ti(Ls(de))+"&"+j:this.u&&ql(M,this.u,de)),ch(this.h,ie),this.Ra&&Ut(M,"TYPE","init"),this.S?(Ut(M,"$req",j),Ut(M,"SID","null"),ie.U=!0,Pa(ie,M,null)):Pa(ie,M,j),this.I=2}}else this.I==3&&(v?bh(this,v):this.i.length==0||lh(this.h)||bh(this))};function bh(v,j){var M;j?M=j.l:M=v.V++;const Y=Wn(v.J);Ut(Y,"SID",v.M),Ut(Y,"RID",M),Ut(Y,"AID",v.K),Gl(v,Y),v.u&&v.o&&ql(Y,v.u,v.o),M=new ua(v,v.j,M,v.D+1),v.u===null&&(M.J=v.o),j&&(v.i=j.G.concat(v.i)),j=up(v,M,1e3),M.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),ch(v.h,M),Pa(M,Y,j)}function Gl(v,j){v.H&&X(v.H,function(M,Y){Ut(j,Y,M)}),v.l&&X({},function(M,Y){Ut(j,Y,M)})}function up(v,j,M){M=Math.min(v.i.length,M);const Y=v.l?f(v.l.Ka,v.l,v):null;e:{var ie=v.i;let at=-1;for(;;){const Mn=["count="+M];at==-1?M>0?(at=ie[0].g,Mn.push("ofs="+at)):at=0:Mn.push("ofs="+at);let Pt=!0;for(let pn=0;pn<M;pn++){var de=ie[pn].g;const Os=ie[pn].map;if(de-=at,de<0)at=Math.max(0,ie[pn].g-100),Pt=!1;else try{de="req"+de+"_"||"";try{var Ce=Os instanceof Map?Os:Object.entries(Os);for(const[qa,pa]of Ce){let ga=pa;u(pa)&&(ga=Gr(pa)),Mn.push(de+qa+"="+encodeURIComponent(ga))}}catch(qa){throw Mn.push(de+"type="+encodeURIComponent("_badmap")),qa}}catch{Y&&Y(Os)}}if(Pt){Ce=Mn.join("&");break e}}Ce=void 0}return v=v.i.splice(0,M),j.G=v,Ce}function dp(v){if(!v.g&&!v.v){v.Y=1;var j=v.Da;L||O(),F||(L(),F=!0),P.add(j,v),v.A=0}}function Kl(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=Pn(f(v.Da,v),mp(v,v.A)),v.A++,!0)}t.Da=function(){if(this.v=null,hp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=Pn(f(this.Wa,this),v)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,tt(10),To(this),hp(this))};function wh(v){v.B!=null&&(l.clearTimeout(v.B),v.B=null)}function hp(v){v.g=new ua(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var j=Wn(v.na);Ut(j,"RID","rpc"),Ut(j,"SID",v.M),Ut(j,"AID",v.K),Ut(j,"CI",v.F?"0":"1"),!v.F&&v.ia&&Ut(j,"TO",v.ia),Ut(j,"TYPE","xmlhttp"),Gl(v,j),v.u&&v.o&&ql(j,v.u,v.o),v.O&&(v.g.H=v.O);var M=v.g;v=v.ba,M.M=1,M.A=zl(Wn(j)),M.u=null,M.R=!0,ru(M,v)}t.Va=function(){this.C!=null&&(this.C=null,To(this),Kl(this),tt(19))};function hu(v){v.C!=null&&(l.clearTimeout(v.C),v.C=null)}function fp(v,j){var M=null;if(v.g==j){hu(v),wh(v),v.g=null;var Y=2}else if(Va(v.h,j))M=j.G,uh(v.h,j),Y=1;else return;if(v.I!=0){if(j.o)if(Y==1){M=j.u?j.u.length:0,j=Date.now()-j.F;var ie=v.D;Y=Re(),en(Y,new Zt(Y,M)),Ha(v)}else dp(v);else if(ie=j.m,ie==3||ie==0&&j.X>0||!(Y==1&&du(v,j)||Y==2&&Kl(v)))switch(M&&M.length>0&&(j=v.h,j.i=j.i.concat(M)),ie){case 1:$a(v,5);break;case 4:$a(v,10);break;case 3:$a(v,6);break;default:$a(v,2)}}}function mp(v,j){let M=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(M*=2),M*j}function $a(v,j){if(v.j.info("Error code "+j),j==2){var M=f(v.bb,v),Y=v.Ua;const ie=!Y;Y=new ms(Y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||hr(Y,"https"),zl(Y),ie?ha(Y.toString(),M):gh(Y.toString(),M)}else tt(2);v.I=0,v.l&&v.l.pa(j),pp(v),uu(v)}t.bb=function(v){v?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function pp(v){if(v.I=0,v.ja=[],v.l){const j=dh(v.h);(j.length!=0||v.i.length!=0)&&(_(v.ja,j),_(v.ja,v.i),v.h.i.length=0,w(v.i),v.i.length=0),v.l.oa()}}function gp(v,j,M){var Y=M instanceof ms?Wn(M):new ms(M);if(Y.g!="")j&&(Y.g=j+"."+Y.g),wo(Y,Y.u);else{var ie=l.location;Y=ie.protocol,j=j?j+"."+ie.hostname:ie.hostname,ie=+ie.port;const de=new ms(null);Y&&hr(de,Y),j&&(de.g=j),ie&&wo(de,ie),M&&(de.h=M),Y=de}return M=v.G,j=v.wa,M&&j&&Ut(Y,M,j),Ut(Y,"VER",v.ka),Gl(v,Y),Y}function yp(v,j,M){if(j&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=v.Aa&&!v.ma?new Yt(new Fa({ab:M})):new Yt(v.ma),j.Fa(v.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xp(){}t=xp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ko(){}ko.prototype.g=function(v,j){return new Ur(v,j)};function Ur(v,j){_t.call(this),this.g=new jo(j),this.l=v,this.h=j&&j.messageUrlParams||null,v=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(v?v["X-WebChannel-Content-Type"]=j.messageContentType:v={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(v?v["X-WebChannel-Client-Profile"]=j.sa:v={"X-WebChannel-Client-Profile":j.sa}),this.g.U=v,(v=j&&j.Qb)&&!U(v)&&(this.g.u=v),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!U(j)&&(this.g.G=j,v=this.h,v!==null&&j in v&&(v=this.h,j in v&&delete v[j])),this.j=new Ai(this)}g(Ur,_t),Ur.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ur.prototype.close=function(){vh(this.g)},Ur.prototype.o=function(v){var j=this.g;if(typeof v=="string"){var M={};M.__data__=v,v=M}else this.v&&(M={},M.__data__=Gr(v),v=M);j.i.push(new Yn(j.Ya++,v)),j.I==3&&Ha(j)},Ur.prototype.N=function(){this.g.l=null,delete this.j,vh(this.g),delete this.g,Ur.Z.N.call(this)};function vp(v){En.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var j=v.__sm__;if(j){e:{for(const M in j){v=M;break e}v=void 0}(this.i=v)&&(v=this.i,j=j!==null&&v in j?j[v]:void 0),this.data=j}else this.data=v}g(vp,En);function bp(){Rn.call(this),this.status=1}g(bp,Rn);function Ai(v){this.g=v}g(Ai,xp),Ai.prototype.ra=function(){en(this.g,"a")},Ai.prototype.qa=function(v){en(this.g,new vp(v))},Ai.prototype.pa=function(v){en(this.g,new bp)},Ai.prototype.oa=function(){en(this.g,"b")},ko.prototype.createWebChannel=ko.prototype.g,Ur.prototype.send=Ur.prototype.o,Ur.prototype.open=Ur.prototype.m,Ur.prototype.close=Ur.prototype.close,X3=function(){return new ko},Q3=function(){return Re()},K3=tn,X1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ye.NO_ERROR=0,Ye.TIMEOUT=8,Ye.HTTP_ERROR=6,dy=Ye,ah.COMPLETE="complete",G3=ah,Ra.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",_t.prototype.listen=_t.prototype.J,jf=Ra,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,W3=Yt}).apply(typeof Ag<"u"?Ag:typeof self<"u"?self:typeof window<"u"?window:{});const dD="@firebase/firestore",hD="4.9.2";class rs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rs.UNAUTHENTICATED=new rs(null),rs.GOOGLE_CREDENTIALS=new rs("google-credentials-uid"),rs.FIRST_PARTY=new rs("first-party-uid"),rs.MOCK_USER=new rs("mock-user");let Kd="12.3.0";const Vc=new PE("@firebase/firestore");function Zu(){return Vc.logLevel}function Pe(t,...e){if(Vc.logLevel<=xt.DEBUG){const n=e.map(GE);Vc.debug(`Firestore (${Kd}): ${t}`,...n)}}function fo(t,...e){if(Vc.logLevel<=xt.ERROR){const n=e.map(GE);Vc.error(`Firestore (${Kd}): ${t}`,...n)}}function dm(t,...e){if(Vc.logLevel<=xt.WARN){const n=e.map(GE);Vc.warn(`Firestore (${Kd}): ${t}`,...n)}}function GE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function We(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Z3(t,r,n)}function Z3(t,e,n){let r=`FIRESTORE (${Kd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fo(r),new Error(r)}function Vt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Z3(e,s,r)}function rt(t,e){return t}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends ka{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class eo{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class sG{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(rs.UNAUTHENTICATED)))}shutdown(){}}class iG{constructor(e){this.t=e,this.currentUser=rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Vt(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let a=new eo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new eo,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new eo)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt(typeof r.accessToken=="string",31837,{l:r}),new sG(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new rs(e)}}class oG{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=rs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lG{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oG(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(rs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cG{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,as(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Vt(this.o===void 0,3512);const r=a=>{a.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fD(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fD(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function uG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class KE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=uG(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function vt(t,e){return t<e?-1:t>e?1:0}function Z1(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return Nw(s)===Nw(a)?vt(s,a):Nw(s)?1:-1}return vt(t.length,e.length)}const dG=55296,hG=57343;function Nw(t){const e=t.charCodeAt(0);return e>=dG&&e<=hG}function kd(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const mD="__name__";class Qa{constructor(e,n,r){n===void 0?n=0:n>e.length&&We(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&We(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qa?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Qa.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return vt(e.length,n.length)}static compareSegments(e,n){const r=Qa.isNumericId(e),s=Qa.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Qa.extractNumericId(e).compare(Qa.extractNumericId(n)):Z1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vl.fromString(e.substring(4,e.length-2))}}class nn extends Qa{construct(e,n,r){return new nn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new je(xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new nn(n)}static emptyPath(){return new nn([])}}const fG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tr extends Qa{construct(e,n,r){return new Tr(e,n,r)}static isValidIdentifier(e){return fG.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mD}static keyField(){return new Tr([mD])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new je(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new je(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new je(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(a(),s++)}if(a(),l)throw new je(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tr(n)}static emptyPath(){return new Tr([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(nn.fromString(e))}static fromName(e){return new ze(nn.fromString(e).popFirst(5))}static empty(){return new ze(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new nn(e.slice()))}}function J3(t,e,n){if(!n)throw new je(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mG(t,e,n,r){if(e===!0&&r===!0)throw new je(xe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pD(t){if(!ze.isDocumentKey(t))throw new je(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gD(t){if(ze.isDocumentKey(t))throw new je(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eO(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function nx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":We(12329,{type:typeof t})}function ks(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new je(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nx(t);throw new je(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function tr(t,e){const n={typeString:t};return e&&(n.value=e),n}function Fm(t,e){if(!eO(t))throw new je(xe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(s&&typeof l!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new je(xe.INVALID_ARGUMENT,n);return!0}const yD=-62135596800,xD=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xD);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new je(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new je(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yD)throw new je(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xD}_compareTo(e){return this.seconds===e.seconds?vt(this.nanoseconds,e.nanoseconds):vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fm(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:tr("string",Ke._jsonSchemaVersion),seconds:tr("number"),nanoseconds:tr("number")};class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new Ke(0,0))}static max(){return new et(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hm=-1;function pG(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=et.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Cl(s,ze.empty(),e)}function gG(t){return new Cl(t.readTime,t.key,hm)}class Cl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cl(et.min(),ze.empty(),hm)}static max(){return new Cl(et.max(),ze.empty(),hm)}}function yG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ze.comparator(t.documentKey,e.documentKey),n!==0?n:vt(t.largestBatchId,e.largestBatchId))}const xG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Qd(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==xG)throw t;Pe("LocalStore","Unexpectedly lost primary lease")}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):be.reject(n)}static resolve(e){return new be(((n,r)=>{n(e)}))}static reject(e){return new be(((n,r)=>{r(e)}))}static waitFor(e){return new be(((n,r)=>{let s=0,a=0,l=!1;e.forEach((u=>{++s,u.next((()=>{++a,l&&a===s&&n()}),(d=>r(d)))})),l=!0,a===s&&n()}))}static or(e){let n=be.resolve(!1);for(const r of e)n=n.next((s=>s?be.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,a)=>{r.push(n.call(this,s,a))})),this.waitFor(r)}static mapArray(e,n){return new be(((r,s)=>{const a=e.length,l=new Array(a);let u=0;for(let d=0;d<a;d++){const f=d;n(e[f]).next((m=>{l[f]=m,++u,u===a&&r(l)}),(m=>s(m)))}}))}static doWhile(e,n){return new be(((r,s)=>{const a=()=>{e()===!0?n().next((()=>{a()}),s):r()};a()}))}}function bG(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xd(t){return t.name==="IndexedDbTransactionError"}class rx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}rx.ce=-1;const QE=-1;function sx(t){return t==null}function $y(t){return t===0&&1/t==-1/0}function wG(t){return typeof t=="number"&&Number.isInteger(t)&&!$y(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const tO="";function _G(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vD(e)),e=EG(t.get(n),e);return vD(e)}function EG(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case tO:n+="";break;default:n+=a}}return n}function vD(t){return t+tO+""}function bD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ul(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class wn{constructor(e,n){this.comparator=e,this.root=n||Nr.EMPTY}insert(e,n){return new wn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rg(this.root,e,this.comparator,!0)}}class Rg{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Nr.RED,this.left=s??Nr.EMPTY,this.right=a??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Nr(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Nr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ir{constructor(e){this.comparator=e,this.data=new wn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wD(this.data.getIterator())}getIteratorFrom(e){return new wD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof ir)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ir(this.comparator);return n.data=e,n}}class wD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ns{constructor(e){this.fields=e,e.sort(Tr.comparator)}static empty(){return new Ns([])}unionWith(e){let n=new ir(Tr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ns(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kd(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class rO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new rO("Invalid base64 string: "+a):a}})(e);return new Dr(n)}static fromUint8Array(e){const n=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Dr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const CG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sl(t){if(Vt(!!t,39018),typeof t=="string"){let e=0;const n=CG.exec(t);if(Vt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:In(t.seconds),nanos:In(t.nanos)}}function In(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Nl(t){return typeof t=="string"?Dr.fromBase64String(t):Dr.fromUint8Array(t)}const sO="server_timestamp",aO="__type__",iO="__previous_value__",oO="__local_write_time__";function XE(t){return(t?.mapValue?.fields||{})[aO]?.stringValue===sO}function ax(t){const e=t.mapValue.fields[iO];return XE(e)?ax(e):e}function fm(t){const e=Sl(t.mapValue.fields[oO].timestampValue);return new Ke(e.seconds,e.nanos)}class SG{constructor(e,n,r,s,a,l,u,d,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}}const qy="(default)";class mm{constructor(e,n){this.projectId=e,this.database=n||qy}static empty(){return new mm("","")}get isDefaultDatabase(){return this.database===qy}isEqual(e){return e instanceof mm&&e.projectId===this.projectId&&e.database===this.database}}const lO="__type__",NG="__max__",Pg={mapValue:{}},cO="__vector__",Yy="value";function jl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?XE(t)?4:TG(t)?9007199254740991:jG(t)?10:11:We(28295,{value:t})}function vi(t,e){if(t===e)return!0;const n=jl(t);if(n!==jl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fm(t).isEqual(fm(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Sl(s.timestampValue),u=Sl(a.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,a){return Nl(s.bytesValue).isEqual(Nl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,a){return In(s.geoPointValue.latitude)===In(a.geoPointValue.latitude)&&In(s.geoPointValue.longitude)===In(a.geoPointValue.longitude)})(t,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return In(s.integerValue)===In(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=In(s.doubleValue),u=In(a.doubleValue);return l===u?$y(l)===$y(u):isNaN(l)&&isNaN(u)}return!1})(t,e);case 9:return kd(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},u=a.mapValue.fields||{};if(bD(l)!==bD(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!vi(l[d],u[d])))return!1;return!0})(t,e);default:return We(52216,{left:t})}}function pm(t,e){return(t.values||[]).find((n=>vi(n,e)))!==void 0}function Dd(t,e){if(t===e)return 0;const n=jl(t),r=jl(e);if(n!==r)return vt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vt(t.booleanValue,e.booleanValue);case 2:return(function(a,l){const u=In(a.integerValue||a.doubleValue),d=In(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(t,e);case 3:return _D(t.timestampValue,e.timestampValue);case 4:return _D(fm(t),fm(e));case 5:return Z1(t.stringValue,e.stringValue);case 6:return(function(a,l){const u=Nl(a),d=Nl(l);return u.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,l){const u=a.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const m=vt(u[f],d[f]);if(m!==0)return m}return vt(u.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,l){const u=vt(In(a.latitude),In(l.latitude));return u!==0?u:vt(In(a.longitude),In(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ED(t.arrayValue,e.arrayValue);case 10:return(function(a,l){const u=a.fields||{},d=l.fields||{},f=u[Yy]?.arrayValue,m=d[Yy]?.arrayValue,g=vt(f?.values?.length||0,m?.values?.length||0);return g!==0?g:ED(f,m)})(t.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Pg.mapValue&&l===Pg.mapValue)return 0;if(a===Pg.mapValue)return 1;if(l===Pg.mapValue)return-1;const u=a.fields||{},d=Object.keys(u),f=l.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const y=Z1(d[g],m[g]);if(y!==0)return y;const w=Dd(u[d[g]],f[m[g]]);if(w!==0)return w}return vt(d.length,m.length)})(t.mapValue,e.mapValue);default:throw We(23264,{he:n})}}function _D(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return vt(t,e);const n=Sl(t),r=Sl(e),s=vt(n.seconds,r.seconds);return s!==0?s:vt(n.nanos,r.nanos)}function ED(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Dd(n[s],r[s]);if(a)return a}return vt(n.length,r.length)}function Ad(t){return J1(t)}function J1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Sl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Nl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return ze.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=J1(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${J1(n.fields[l])}`;return s+"}"})(t.mapValue):We(61005,{value:t})}function hy(t){switch(jl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ax(t);return e?16+hy(e):16;case 5:return 2*t.stringValue.length;case 6:return Nl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+hy(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Ul(r.fields,((a,l)=>{s+=a.length+hy(l)})),s})(t.mapValue);default:throw We(13486,{value:t})}}function CD(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function e_(t){return!!t&&"integerValue"in t}function ZE(t){return!!t&&"arrayValue"in t}function SD(t){return!!t&&"nullValue"in t}function ND(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fy(t){return!!t&&"mapValue"in t}function jG(t){return(t?.mapValue?.fields||{})[lO]?.stringValue===cO}function zf(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ul(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=zf(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zf(t.arrayValue.values[n]);return e}return{...t}}function TG(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NG}class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zf(n)}setAll(e){let n=Tr.emptyPath(),r={},s=[];e.forEach(((l,u)=>{if(!n.isImmediateParentOf(u)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=zf(l):s.push(u.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());fy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];fy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ul(n,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new is(zf(this.value))}}function uO(t){const e=[];return Ul(t.fields,((n,r)=>{const s=new Tr([n]);if(fy(r)){const a=uO(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Ns(e)}class Lr{constructor(e,n,r,s,a,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=u}static newInvalidDocument(e){return new Lr(e,0,et.min(),et.min(),et.min(),is.empty(),0)}static newFoundDocument(e,n,r,s){return new Lr(e,1,n,et.min(),r,s,0)}static newNoDocument(e,n){return new Lr(e,2,n,et.min(),et.min(),is.empty(),0)}static newUnknownDocument(e,n){return new Lr(e,3,n,et.min(),et.min(),is.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wy{constructor(e,n){this.position=e,this.inclusive=n}}function jD(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],l=t.position[s];if(a.field.isKeyField()?r=ze.comparator(ze.fromName(l.referenceValue),n.key):r=Dd(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function TD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}class gm{constructor(e,n="asc"){this.field=e,this.dir=n}}function kG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class dO{}class er extends dO{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AG(e,n,r):n==="array-contains"?new MG(e,r):n==="in"?new LG(e,r):n==="not-in"?new OG(e,r):n==="array-contains-any"?new IG(e,r):new er(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RG(e,r):new PG(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Dd(n,this.value)):n!==null&&jl(this.value)===jl(n)&&this.matchesComparison(Dd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Na extends dO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Na(e,n)}matches(e){return hO(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hO(t){return t.op==="and"}function fO(t){return DG(t)&&hO(t)}function DG(t){for(const e of t.filters)if(e instanceof Na)return!1;return!0}function t_(t){if(t instanceof er)return t.field.canonicalString()+t.op.toString()+Ad(t.value);if(fO(t))return t.filters.map((e=>t_(e))).join(",");{const e=t.filters.map((n=>t_(n))).join(",");return`${t.op}(${e})`}}function mO(t,e){return t instanceof er?(function(r,s){return s instanceof er&&r.op===s.op&&r.field.isEqual(s.field)&&vi(r.value,s.value)})(t,e):t instanceof Na?(function(r,s){return s instanceof Na&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,u)=>a&&mO(l,s.filters[u])),!0):!1})(t,e):void We(19439)}function pO(t){return t instanceof er?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ad(n.value)}`})(t):t instanceof Na?(function(n){return n.op.toString()+" {"+n.getFilters().map(pO).join(" ,")+"}"})(t):"Filter"}class AG extends er{constructor(e,n,r){super(e,n,r),this.key=ze.fromName(r.referenceValue)}matches(e){const n=ze.comparator(e.key,this.key);return this.matchesComparison(n)}}class RG extends er{constructor(e,n){super(e,"in",n),this.keys=gO("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class PG extends er{constructor(e,n){super(e,"not-in",n),this.keys=gO("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function gO(t,e){return(e.arrayValue?.values||[]).map((n=>ze.fromName(n.referenceValue)))}class MG extends er{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ZE(n)&&pm(n.arrayValue,this.value)}}class LG extends er{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pm(this.value.arrayValue,n)}}class OG extends er{constructor(e,n){super(e,"not-in",n)}matches(e){if(pm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pm(this.value.arrayValue,n)}}class IG extends er{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ZE(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>pm(this.value.arrayValue,r)))}}class VG{constructor(e,n=null,r=[],s=[],a=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=u,this.Te=null}}function kD(t,e=null,n=[],r=[],s=null,a=null,l=null){return new VG(t,e,n,r,s,a,l)}function JE(t){const e=rt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>t_(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),sx(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ad(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ad(r))).join(",")),e.Te=n}return e.Te}function eC(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TD(t.startAt,e.startAt)&&TD(t.endAt,e.endAt)}function n_(t){return ze.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Zd{constructor(e,n=null,r=[],s=[],a=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function UG(t,e,n,r,s,a,l,u){return new Zd(t,e,n,r,s,a,l,u)}function ix(t){return new Zd(t)}function DD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yO(t){return t.collectionGroup!==null}function Hf(t){const e=rt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new ir(Tr.comparator);return l.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new gm(a,r))})),n.has(Tr.keyField().canonicalString())||e.Ie.push(new gm(Tr.keyField(),r))}return e.Ie}function di(t){const e=rt(t);return e.Ee||(e.Ee=FG(e,Hf(t))),e.Ee}function FG(t,e){if(t.limitType==="F")return kD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new gm(s.field,a)}));const n=t.endAt?new Wy(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wy(t.startAt.position,t.startAt.inclusive):null;return kD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function r_(t,e){const n=t.filters.concat([e]);return new Zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gy(t,e,n){return new Zd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ox(t,e){return eC(di(t),di(e))&&t.limitType===e.limitType}function xO(t){return`${JE(di(t))}|lt:${t.limitType}`}function Ju(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>pO(s))).join(", ")}]`),sx(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Ad(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Ad(s))).join(",")),`Target(${r})`})(di(t))}; limitType=${t.limitType})`}function lx(t,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ze.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,s){for(const a of Hf(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(l,u,d){const f=jD(l,u,d);return l.inclusive?f<=0:f<0})(r.startAt,Hf(r),s)||r.endAt&&!(function(l,u,d){const f=jD(l,u,d);return l.inclusive?f>=0:f>0})(r.endAt,Hf(r),s))})(t,e)}function BG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vO(t){return(e,n)=>{let r=!1;for(const s of Hf(t)){const a=zG(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zG(t,e,n){const r=t.field.isKeyField()?ze.comparator(e.key,n.key):(function(a,l,u){const d=l.data.field(a),f=u.data.field(a);return d!==null&&f!==null?Dd(d,f):We(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return We(19790,{direction:t.dir})}}class Gc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ul(this.inner,((n,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return nO(this.inner)}size(){return this.innerSize}}const HG=new wn(ze.comparator);function mo(){return HG}const bO=new wn(ze.comparator);function Tf(...t){let e=bO;for(const n of t)e=e.insert(n.key,n);return e}function wO(t){let e=bO;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function _c(){return $f()}function _O(){return $f()}function $f(){return new Gc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const $G=new wn(ze.comparator),qG=new ir(ze.comparator);function bt(...t){let e=qG;for(const n of t)e=e.add(n);return e}const YG=new ir(vt);function WG(){return YG}function tC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$y(e)?"-0":e}}function EO(t){return{integerValue:""+t}}function GG(t,e){return wG(e)?EO(e):tC(t,e)}class cx{constructor(){this._=void 0}}function KG(t,e,n){return t instanceof Ky?(function(s,a){const l={fields:{[aO]:{stringValue:sO},[oO]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&XE(a)&&(a=ax(a)),a&&(l.fields[iO]=a),{mapValue:l}})(n,e):t instanceof ym?SO(t,e):t instanceof xm?NO(t,e):(function(s,a){const l=CO(s,a),u=AD(l)+AD(s.Ae);return e_(l)&&e_(s.Ae)?EO(u):tC(s.serializer,u)})(t,e)}function QG(t,e,n){return t instanceof ym?SO(t,e):t instanceof xm?NO(t,e):n}function CO(t,e){return t instanceof Qy?(function(r){return e_(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Ky extends cx{}class ym extends cx{constructor(e){super(),this.elements=e}}function SO(t,e){const n=jO(e);for(const r of t.elements)n.some((s=>vi(s,r)))||n.push(r);return{arrayValue:{values:n}}}class xm extends cx{constructor(e){super(),this.elements=e}}function NO(t,e){let n=jO(e);for(const r of t.elements)n=n.filter((s=>!vi(s,r)));return{arrayValue:{values:n}}}class Qy extends cx{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function AD(t){return In(t.integerValue||t.doubleValue)}function jO(t){return ZE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function XG(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof ym&&s instanceof ym||r instanceof xm&&s instanceof xm?kd(r.elements,s.elements,vi):r instanceof Qy&&s instanceof Qy?vi(r.Ae,s.Ae):r instanceof Ky&&s instanceof Ky})(t.transform,e.transform)}class ZG{constructor(e,n){this.version=e,this.transformResults=n}}class ra{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ra}static exists(e){return new ra(void 0,e)}static updateTime(e){return new ra(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function my(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ux{}function TO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nC(t.key,ra.none()):new Bm(t.key,t.data,ra.none());{const n=t.data,r=is.empty();let s=new ir(Tr.comparator);for(let a of e.fields)if(!s.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Fl(t.key,r,new Ns(s.toArray()),ra.none())}}function JG(t,e,n){t instanceof Bm?(function(s,a,l){const u=s.value.clone(),d=PD(s.fieldTransforms,a,l.transformResults);u.setAll(d),a.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Fl?(function(s,a,l){if(!my(s.precondition,a))return void a.convertToUnknownDocument(l.version);const u=PD(s.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(kO(s)),d.setAll(u),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function qf(t,e,n,r){return t instanceof Bm?(function(a,l,u,d){if(!my(a.precondition,l))return u;const f=a.value.clone(),m=MD(a.fieldTransforms,d,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Fl?(function(a,l,u,d){if(!my(a.precondition,l))return u;const f=MD(a.fieldTransforms,d,l),m=l.data;return m.setAll(kO(a)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),u===null?null:u.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,l,u){return my(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u})(t,e,n)}function eK(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=CO(r.transform,s||null);a!=null&&(n===null&&(n=is.empty()),n.set(r.field,a))}return n||null}function RD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&kd(r,s,((a,l)=>XG(a,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bm extends ux{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fl extends ux{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function kO(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function PD(t,e,n){const r=new Map;Vt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],l=a.transform,u=e.data.field(a.field);r.set(a.field,QG(l,u,n[s]))}return r}function MD(t,e,n){const r=new Map;for(const s of t){const a=s.transform,l=n.data.field(s.field);r.set(s.field,KG(a,l,e))}return r}class nC extends ux{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tK extends ux{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nK{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&JG(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qf(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qf(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_O();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let u=this.applyToLocalView(l,a.mutatedFields);u=n.has(s.key)?null:u;const d=TO(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(et.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),bt())}isEqual(e){return this.batchId===e.batchId&&kd(this.mutations,e.mutations,((n,r)=>RD(n,r)))&&kd(this.baseMutations,e.baseMutations,((n,r)=>RD(n,r)))}}class rC{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Vt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return $G})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new rC(e,n,r,s)}}class rK{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class sK{constructor(e,n){this.count=e,this.unchangedNames=n}}var Zn,Et;function aK(t){switch(t){case xe.OK:return We(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return We(15467,{code:t})}}function DO(t){if(t===void 0)return fo("GRPC error has no .code"),xe.UNKNOWN;switch(t){case Zn.OK:return xe.OK;case Zn.CANCELLED:return xe.CANCELLED;case Zn.UNKNOWN:return xe.UNKNOWN;case Zn.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Zn.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Zn.INTERNAL:return xe.INTERNAL;case Zn.UNAVAILABLE:return xe.UNAVAILABLE;case Zn.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Zn.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Zn.NOT_FOUND:return xe.NOT_FOUND;case Zn.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Zn.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Zn.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Zn.ABORTED:return xe.ABORTED;case Zn.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Zn.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Zn.DATA_LOSS:return xe.DATA_LOSS;default:return We(39323,{code:t})}}(Et=Zn||(Zn={}))[Et.OK=0]="OK",Et[Et.CANCELLED=1]="CANCELLED",Et[Et.UNKNOWN=2]="UNKNOWN",Et[Et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Et[Et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Et[Et.NOT_FOUND=5]="NOT_FOUND",Et[Et.ALREADY_EXISTS=6]="ALREADY_EXISTS",Et[Et.PERMISSION_DENIED=7]="PERMISSION_DENIED",Et[Et.UNAUTHENTICATED=16]="UNAUTHENTICATED",Et[Et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Et[Et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Et[Et.ABORTED=10]="ABORTED",Et[Et.OUT_OF_RANGE=11]="OUT_OF_RANGE",Et[Et.UNIMPLEMENTED=12]="UNIMPLEMENTED",Et[Et.INTERNAL=13]="INTERNAL",Et[Et.UNAVAILABLE=14]="UNAVAILABLE",Et[Et.DATA_LOSS=15]="DATA_LOSS";function iK(){return new TextEncoder}const oK=new vl([4294967295,4294967295],0);function LD(t){const e=iK().encode(t),n=new Y3;return n.update(e),new Uint8Array(n.digest())}function OD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vl([n,r],0),new vl([s,a],0)]}class sC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new kf(`Invalid padding: ${n}`);if(r<0)throw new kf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new kf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vl.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(vl.fromNumber(r)));return s.compare(oK)===1&&(s=new vl([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=LD(e),[r,s]=OD(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new sC(a,s,n);return r.forEach((u=>l.insert(u))),l}insert(e){if(this.ge===0)return;const n=LD(e),[r,s]=OD(n);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.Se(l)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class kf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dx{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,zm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dx(et.min(),s,new wn(vt),mo(),bt())}}class zm{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zm(r,n,bt(),bt(),bt())}}class py{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class AO{constructor(e,n){this.targetId=e,this.Ce=n}}class RO{constructor(e,n,r=Dr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ID{constructor(){this.ve=0,this.Fe=VD(),this.Me=Dr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bt(),n=bt(),r=bt();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:We(38017,{changeType:a})}})),new zm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=VD()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lK{constructor(e){this.Ge=e,this.ze=new Map,this.je=mo(),this.Je=Mg(),this.He=Mg(),this.Ye=new wn(vt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(n_(a))if(r===0){const l=new ze(a.path);this.et(n,l,Lr.newNoDocument(l,et.min()))}else Vt(r===1,20013,{expectedCount:r});else{const l=this._t(n);if(l!==r){const u=this.ut(e),d=u?this.ct(u,e,l):1;if(d!==0){this.it(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let l,u;try{l=Nl(r).toUint8Array()}catch(d){if(d instanceof rO)return dm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new sC(l,s,a)}catch(d){return dm(d instanceof kf?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),u=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(u)||(this.et(n,a,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((a,l)=>{const u=this.ot(l);if(u){if(a.current&&n_(u.target)){const d=new ze(u.target.path);this.It(d).has(l)||this.Et(l,d)||this.et(l,d,Lr.newNoDocument(d,e))}a.Be&&(n.set(l,a.ke()),a.qe())}}));let r=bt();this.He.forEach(((a,l)=>{let u=!0;l.forEachWhile((d=>{const f=this.ot(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new dx(e,n,this.Ye,this.je,r);return this.je=mo(),this.Je=Mg(),this.He=Mg(),this.Ye=new wn(vt),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ID,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ir(vt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ir(vt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ID),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mg(){return new wn(ze.comparator)}function VD(){return new wn(ze.comparator)}const cK={asc:"ASCENDING",desc:"DESCENDING"},uK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dK={and:"AND",or:"OR"};class hK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function s_(t,e){return t.useProto3Json||sx(e)?e:{value:e}}function Xy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fK(t,e){return Xy(t,e.toTimestamp())}function hi(t){return Vt(!!t,49232),et.fromTimestamp((function(n){const r=Sl(n);return new Ke(r.seconds,r.nanos)})(t))}function aC(t,e){return a_(t,e).canonicalString()}function a_(t,e){const n=(function(s){return new nn(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function MO(t){const e=nn.fromString(t);return Vt(UO(e),10190,{key:e.toString()}),e}function i_(t,e){return aC(t.databaseId,e.path)}function jw(t,e){const n=MO(e);if(n.get(1)!==t.databaseId.projectId)throw new je(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new je(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ze(OO(n))}function LO(t,e){return aC(t.databaseId,e)}function mK(t){const e=MO(t);return e.length===4?nn.emptyPath():OO(e)}function o_(t){return new nn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OO(t){return Vt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function UD(t,e,n){return{name:i_(t,e),fields:n.value.mapValue.fields}}function pK(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:We(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(f,m){return f.useProto3Json?(Vt(m===void 0||typeof m=="string",58123),Dr.fromBase64String(m||"")):(Vt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Dr.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&(function(f){const m=f.code===void 0?xe.UNKNOWN:DO(f.code);return new je(m,f.message||"")})(l);n=new RO(r,s,a,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=jw(t,r.document.name),a=hi(r.document.updateTime),l=r.document.createTime?hi(r.document.createTime):et.min(),u=new is({mapValue:{fields:r.document.fields}}),d=Lr.newFoundDocument(s,a,l,u),f=r.targetIds||[],m=r.removedTargetIds||[];n=new py(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=jw(t,r.document),a=r.readTime?hi(r.readTime):et.min(),l=Lr.newNoDocument(s,a),u=r.removedTargetIds||[];n=new py([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=jw(t,r.document),a=r.removedTargetIds||[];n=new py([],a,s,null)}else{if(!("filter"in e))return We(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new sK(s,a),u=r.targetId;n=new AO(u,l)}}return n}function gK(t,e){let n;if(e instanceof Bm)n={update:UD(t,e.key,e.value)};else if(e instanceof nC)n={delete:i_(t,e.key)};else if(e instanceof Fl)n={update:UD(t,e.key,e.data),updateMask:SK(e.fieldMask)};else{if(!(e instanceof tK))return We(16599,{Vt:e.type});n={verify:i_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const u=l.transform;if(u instanceof Ky)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ym)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof xm)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Qy)return{fieldPath:l.field.canonicalString(),increment:u.Ae};throw We(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:fK(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:We(27497)})(t,e.precondition)),n}function yK(t,e){return t&&t.length>0?(Vt(e!==void 0,14353),t.map((n=>(function(s,a){let l=s.updateTime?hi(s.updateTime):hi(a);return l.isEqual(et.min())&&(l=hi(a)),new ZG(l,s.transformResults||[])})(n,e)))):[]}function xK(t,e){return{documents:[LO(t,e.path)]}}function vK(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LO(t,s);const a=(function(f){if(f.length!==0)return VO(Na.create(f,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const l=(function(f){if(f.length!==0)return f.map((m=>(function(y){return{field:ed(y.field),direction:_K(y.dir)}})(m)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=s_(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:n,parent:s}}function bK(t){let e=mK(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Vt(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=(function(g){const y=IO(g);return y instanceof Na&&fO(y)?y.getFilters():[y]})(n.where));let l=[];n.orderBy&&(l=(function(g){return g.map((y=>(function(_){return new gm(td(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(y)))})(n.orderBy));let u=null;n.limit&&(u=(function(g){let y;return y=typeof g=="object"?g.value:g,sx(y)?null:y})(n.limit));let d=null;n.startAt&&(d=(function(g){const y=!!g.before,w=g.values||[];return new Wy(w,y)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const y=!g.before,w=g.values||[];return new Wy(w,y)})(n.endAt)),UG(e,s,l,a,u,"F",d,f)}function wK(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function IO(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=td(n.unaryFilter.field);return er.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=td(n.unaryFilter.field);return er.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=td(n.unaryFilter.field);return er.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=td(n.unaryFilter.field);return er.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(t):t.fieldFilter!==void 0?(function(n){return er.create(td(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Na.create(n.compositeFilter.filters.map((r=>IO(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(n.compositeFilter.op))})(t):We(30097,{filter:t})}function _K(t){return cK[t]}function EK(t){return uK[t]}function CK(t){return dK[t]}function ed(t){return{fieldPath:t.canonicalString()}}function td(t){return Tr.fromServerFormat(t.fieldPath)}function VO(t){return t instanceof er?(function(n){if(n.op==="=="){if(ND(n.value))return{unaryFilter:{field:ed(n.field),op:"IS_NAN"}};if(SD(n.value))return{unaryFilter:{field:ed(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ND(n.value))return{unaryFilter:{field:ed(n.field),op:"IS_NOT_NAN"}};if(SD(n.value))return{unaryFilter:{field:ed(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ed(n.field),op:EK(n.op),value:n.value}}})(t):t instanceof Na?(function(n){const r=n.getFilters().map((s=>VO(s)));return r.length===1?r[0]:{compositeFilter:{op:CK(n.op),filters:r}}})(t):We(54877,{filter:t})}function SK(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function UO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class hl{constructor(e,n,r,s,a=et.min(),l=et.min(),u=Dr.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new hl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class NK{constructor(e){this.yt=e}}function jK(t){const e=bK({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gy(e,e.limit,"L"):e}class TK{constructor(){this.Cn=new kK}addToCollectionParentIndex(e,n){return this.Cn.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(Cl.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(Cl.min())}updateCollectionGroup(e,n,r){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class kK{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ir(nn.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ir(nn.comparator)).toArray()}}const FD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FO=41943040;class ss{static withCacheSize(e){return new ss(e,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(FO,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);class Rd{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Rd(0)}static cr(){return new Rd(-1)}}const BD="LruGarbageCollector",BO=1048576;function zD([t,e],[n,r]){const s=vt(t,n);return s===0?vt(e,r):s}class DK{constructor(e){this.Ir=e,this.buffer=new ir(zD),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zD(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AK{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Pe(BD,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xd(n)?Pe(BD,"Ignoring IndexedDB error during garbage collection: ",n):await Qd(n)}await this.Vr(3e5)}))}}class RK{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return be.resolve(rx.ce);const r=new DK(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(FD)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FD):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,l,u,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,l=Date.now(),this.nthSequenceNumber(e,s)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),Zu()<=xt.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${a} targets in `+(d-u)+`ms
	Removed ${g} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:g}))))}}function PK(t,e){return new RK(t,e)}class MK{constructor(){this.changes=new Gc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?be.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class LK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class OK{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&qf(r.mutation,s,Ns.empty(),Ke.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,bt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=bt()){const s=_c();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((a=>{let l=Tf();return a.forEach(((u,d)=>{l=l.insert(u,d.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const r=_c();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,bt())))}populateOverlays(e,n,r){const s=[];return r.forEach((a=>{n.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,u)=>{n.set(l,u)}))}))}computeViews(e,n,r,s){let a=mo();const l=$f(),u=(function(){return $f()})();return n.forEach(((d,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Fl)?a=a.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),qf(m.mutation,f,m.mutation.getFieldMask(),Ke.now())):l.set(f.key,Ns.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((f,m)=>l.set(f,m))),n.forEach(((f,m)=>u.set(f,new LK(m,l.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=$f();let s=new wn(((l,u)=>l-u)),a=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const u of l)u.keys().forEach((d=>{const f=n.get(d);if(f===null)return;let m=r.get(d)||Ns.empty();m=u.applyToLocalView(f,m),r.set(d,m);const g=(s.get(u.batchId)||bt()).add(d);s=s.insert(u.batchId,g)}))})).next((()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,m=d.value,g=_O();m.forEach((y=>{if(!a.has(y)){const w=TO(n.get(y),r.get(y));w!==null&&g.set(y,w),a=a.add(y)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,g))}return be.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(l){return ze.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):be.resolve(_c());let u=hm,d=a;return l.next((f=>be.forEach(f,((m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),a.get(m)?be.resolve():this.remoteDocumentCache.getEntry(e,m).next((y=>{d=d.insert(m,y)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,d,f,bt()))).next((m=>({batchId:u,changes:wO(m)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ze(n)).next((r=>{let s=Tf();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let l=Tf();return this.indexManager.getCollectionParents(e,a).next((u=>be.forEach(u,(d=>{const f=(function(g,y){return new Zd(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((m=>{m.forEach(((g,y)=>{l=l.insert(g,y)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s)))).next((l=>{a.forEach(((d,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,Lr.newInvalidDocument(m)))}));let u=Tf();return l.forEach(((d,f)=>{const m=a.get(d);m!==void 0&&qf(m.mutation,f,Ns.empty(),Ke.now()),lx(n,f)&&(u=u.insert(d,f))})),u}))}}class IK{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return be.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:hi(s.createTime)}})(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:jK(s.bundledQuery),readTime:hi(s.readTime)}})(n)),be.resolve()}}class VK{constructor(){this.overlays=new wn(ze.comparator),this.qr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_c();return be.forEach(n,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,a)=>{this.St(e,n,a)})),be.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),be.resolve()}getOverlaysForCollection(e,n,r){const s=_c(),a=n.length+1,l=new ze(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>r&&s.set(d.getKey(),d)}return be.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new wn(((f,m)=>f-m));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let m=a.get(f.largestBatchId);m===null&&(m=_c(),a=a.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=_c(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,m)=>u.set(f,m))),!(u.size()>=s)););return be.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new rK(n,r));let a=this.qr.get(n);a===void 0&&(a=bt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}class UK{constructor(){this.sessionToken=Dr.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,be.resolve()}}class iC{constructor(){this.Qr=new ir(mr.$r),this.Ur=new ir(mr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new mr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new mr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new ze(new nn([])),r=new mr(n,e),s=new mr(n,e+1),a=[];return this.Ur.forEachInRange([r,s],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ze(new nn([])),r=new mr(n,e),s=new mr(n,e+1);let a=bt();return this.Ur.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const n=new mr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ze.comparator(e.key,n.key)||vt(e.Yr,n.Yr)}static Kr(e,n){return vt(e.Yr,n.Yr)||ze.comparator(e.key,n.key)}}class FK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ir(mr.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new nK(a,n,r,s);this.mutationQueue.push(l);for(const u of s)this.Zr=this.Zr.add(new mr(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return be.resolve(l)}lookupMutationBatch(e,n){return be.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return be.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?QE:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mr(n,0),s=new mr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],(l=>{const u=this.Xr(l.Yr);a.push(u)})),be.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ir(vt);return n.forEach((s=>{const a=new mr(s,0),l=new mr(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(u=>{r=r.add(u.Yr)}))})),be.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const l=new mr(new ze(a),0);let u=new ir(vt);return this.Zr.forEachWhile((d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Yr)),!0)}),l),be.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Vt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return be.forEach(n.mutations,(s=>{const a=new mr(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new mr(n,0),s=this.Zr.firstAfterOrEqual(r);return be.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class BK{constructor(e){this.ri=e,this.docs=(function(){return new wn(ze.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,l=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return be.resolve(r?r.document.mutableCopy():Lr.newInvalidDocument(n))}getEntries(e,n){let r=mo();return n.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Lr.newInvalidDocument(s))})),be.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=mo();const l=n.path,u=new ze(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||yG(gG(m),r)<=0||(s.has(m.key)||lx(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return be.resolve(a)}getAllFromCollectionGroup(e,n,r,s){We(9500)}ii(e,n){return be.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new zK(this)}getSize(e){return be.resolve(this.size)}}class zK extends MK{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),be.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class HK{constructor(e){this.persistence=e,this.si=new Gc((n=>JE(n)),eC),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.oi=0,this._i=new iC,this.targetCount=0,this.ai=Rd.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),be.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Rd(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.Pr(n),be.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach(((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),be.waitFor(a).next((()=>s))}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return be.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),be.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),be.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return be.resolve(r)}containsKey(e,n){return be.resolve(this._i.containsKey(n))}}class zO{constructor(e,n){this.ui={},this.overlays={},this.ci=new rx(0),this.li=!1,this.li=!0,this.hi=new UK,this.referenceDelegate=e(this),this.Pi=new HK(this),this.indexManager=new TK,this.remoteDocumentCache=(function(s){return new BK(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new NK(n),this.Ii=new IK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new VK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new FK(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new $K(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,n){return be.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class $K extends vG{constructor(e){super(),this.currentSequenceNumber=e}}class oC{constructor(e){this.persistence=e,this.Ri=new iC,this.Vi=null}static mi(e){return new oC(e)}get fi(){if(this.Vi)return this.Vi;throw We(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),be.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),be.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,(r=>{const s=ze.fromPath(r);return this.gi(e,s).next((a=>{a||n.removeEntry(s,et.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return be.or([()=>be.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Zy{constructor(e,n){this.persistence=e,this.pi=new Gc((r=>_G(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=PK(this,n)}static mi(e,n){return new Zy(e,n)}Ei(){}di(e){return be.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return be.forEach(this.pi,((r,s)=>this.br(e,r,s).next((a=>a?be.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,n).next((u=>{u||(r++,a.removeEntry(l,et.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hy(e.data.value)),n}br(e,n,r){return be.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return be.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class lC{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=bt(),s=bt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new lC(e,n.fromCache,r,s)}}class qK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YK{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return f$()?8:bG(Or())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,n,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new qK;return this.Ss(e,n,l).next((u=>{if(a.result=u,this.Vs)return this.bs(e,n,l,u.size)}))})).next((()=>a.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Zu()<=xt.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",Ju(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(Zu()<=xt.DEBUG&&Pe("QueryEngine","Query:",Ju(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Zu()<=xt.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",Ju(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(n))):be.resolve())}ys(e,n){if(DD(n))return be.resolve(null);let r=di(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Gy(n,null,"F"),r=di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=bt(...a);return this.ps.getDocuments(e,l).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const f=this.Ds(n,u);return this.Cs(n,f,l,d.readTime)?this.ys(e,Gy(n,null,"F")):this.vs(e,f,n,d)}))))})))))}ws(e,n,r,s){return DD(n)||s.isEqual(et.min())?be.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(n,a);return this.Cs(n,l,r,s)?be.resolve(null):(Zu()<=xt.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ju(n)),this.vs(e,l,n,pG(s,hm)).next((u=>u)))}))}Ds(e,n){let r=new ir(vO(e));return n.forEach(((s,a)=>{lx(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Zu()<=xt.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",Ju(n)),this.ps.getDocumentsMatchingQuery(e,n,Cl.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((a=>(n.forEach((l=>{a=a.insert(l.key,l)})),a)))}}const cC="LocalStore",WK=3e8;class GK{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new wn(vt),this.xs=new Gc((a=>JE(a)),eC),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OK(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function KK(t,e,n,r){return new GK(t,e,n,r)}async function HO(t,e){const n=rt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],u=[];let d=bt();for(const f of s){l.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of a){u.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return n.localDocuments.getDocuments(r,d).next((f=>({Ls:f,removedBatchIds:l,addedBatchIds:u})))}))}))}function QK(t,e){const n=rt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,f,m){const g=f.batch,y=g.keys();let w=be.resolve();return y.forEach((_=>{w=w.next((()=>m.getEntry(d,_))).next((C=>{const S=f.docVersions.get(_);Vt(S!==null,48541),C.version.compareTo(S)<0&&(g.applyToRemoteDocument(C,f),C.isValidDocument()&&(C.setReadTime(f.commitVersion),m.addEntry(C)))}))})),w.next((()=>u.mutationQueue.removeMutationBatch(d,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=bt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function $O(t){const e=rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function XK(t,e){const n=rt(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach(((m,g)=>{const y=s.get(g);if(!y)return;u.push(n.Pi.removeMatchingKeys(a,m.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,m.addedDocuments,g))));let w=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(Dr.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),s=s.insert(g,w),(function(C,S,N){return C.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=WK?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(y,w,m)&&u.push(n.Pi.updateTargetData(a,w))}));let d=mo(),f=bt();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))})),u.push(ZK(a,l,e.documentUpdates).next((m=>{d=m.ks,f=m.qs}))),!r.isEqual(et.min())){const m=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));u.push(m)}return be.waitFor(u).next((()=>l.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,d,f))).next((()=>d))})).then((a=>(n.Ms=s,a)))}function ZK(t,e,n){let r=bt(),s=bt();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let l=mo();return n.forEach(((u,d)=>{const f=a.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(et.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):Pe(cC,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)})),{ks:l,qs:s}}))}function JK(t,e){const n=rt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=QE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function eQ(t,e){const n=rt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((a=>a?(s=a,be.resolve(s)):n.Pi.allocateTargetId(r).next((l=>(s=new hl(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function l_(t,e,n){const r=rt(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Xd(l))throw l;Pe(cC,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function HD(t,e,n){const r=rt(t);let s=et.min(),a=bt();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(d,f,m){const g=rt(d),y=g.xs.get(m);return y!==void 0?be.resolve(g.Ms.get(y)):g.Pi.getTargetData(f,m)})(r,l,di(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,u.targetId).next((d=>{a=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,n?s:et.min(),n?a:bt()))).next((u=>(tQ(r,BG(e),u),{documents:u,Qs:a})))))}function tQ(t,e,n){let r=t.Os.get(e)||et.min();n.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}class $D{constructor(){this.activeTargetIds=WG()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nQ{constructor(){this.Mo=new $D,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $D,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rQ{Oo(e){}shutdown(){}}const qD="ConnectivityMonitor";class YD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Pe(qD,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Pe(qD,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Lg=null;function c_(){return Lg===null?Lg=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lg++,"0x"+Lg.toString(16)}const Tw="RestConnection",sQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aQ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===qy?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const l=c_(),u=this.zo(e,n.toUriEncodedString());Pe(Tw,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,a);const{host:f}=new URL(u),m=Ci(f);return this.Jo(e,u,d,r,m).then((g=>(Pe(Tw,`Received RPC '${e}' ${l}: `,g),g)),(g=>{throw dm(Tw,`RPC '${e}' ${l} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,n,r,s,a,l){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Kd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}zo(e,n){const r=sQ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class iQ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Pr="WebChannelConnection";class oQ extends aQ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const l=c_();return new Promise(((u,d)=>{const f=new W3;f.setWithCredentials(!0),f.listenOnce(G3.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case dy.NO_ERROR:const g=f.getResponseJson();Pe(Pr,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(g)),u(g);break;case dy.TIMEOUT:Pe(Pr,`RPC '${e}' ${l} timed out`),d(new je(xe.DEADLINE_EXCEEDED,"Request time out"));break;case dy.HTTP_ERROR:const y=f.getStatus();if(Pe(Pr,`RPC '${e}' ${l} failed with status:`,y,"response text:",f.getResponseText()),y>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const _=w?.error;if(_&&_.status&&_.message){const C=(function(N){const k=N.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(k)>=0?k:xe.UNKNOWN})(_.status);d(new je(C,_.message))}else d(new je(xe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new je(xe.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{Pe(Pr,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(s);Pe(Pr,`RPC '${e}' ${l} sending request:`,s),f.send(n,"POST",m,r,15)}))}T_(e,n,r){const s=c_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=X3(),u=Q3(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const m=a.join("");Pe(Pr,`Creating RPC '${e}' stream ${s}: ${m}`,d);const g=l.createWebChannel(m,d);this.I_(g);let y=!1,w=!1;const _=new iQ({Yo:S=>{w?Pe(Pr,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(y||(Pe(Pr,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),Pe(Pr,`RPC '${e}' stream ${s} sending:`,S),g.send(S))},Zo:()=>g.close()}),C=(S,N,k)=>{S.listen(N,(R=>{try{k(R)}catch(A){setTimeout((()=>{throw A}),0)}}))};return C(g,jf.EventType.OPEN,(()=>{w||(Pe(Pr,`RPC '${e}' stream ${s} transport opened.`),_.o_())})),C(g,jf.EventType.CLOSE,(()=>{w||(w=!0,Pe(Pr,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(g))})),C(g,jf.EventType.ERROR,(S=>{w||(w=!0,dm(Pr,`RPC '${e}' stream ${s} transport errored. Name:`,S.name,"Message:",S.message),_.a_(new je(xe.UNAVAILABLE,"The operation could not be completed")))})),C(g,jf.EventType.MESSAGE,(S=>{if(!w){const N=S.data[0];Vt(!!N,16349);const k=N,R=k?.error||k[0]?.error;if(R){Pe(Pr,`RPC '${e}' stream ${s} received error:`,R);const A=R.status;let L=(function(O){const T=Zn[O];if(T!==void 0)return DO(T)})(A),F=R.message;L===void 0&&(L=xe.INTERNAL,F="Unknown error status: "+A+" with message "+R.message),w=!0,_.a_(new je(L,F)),g.close()}else Pe(Pr,`RPC '${e}' stream ${s} received:`,N),_.u_(N)}})),C(u,K3.STAT_EVENT,(S=>{S.stat===X1.PROXY?Pe(Pr,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===X1.NOPROXY&&Pe(Pr,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function kw(){return typeof document<"u"?document:null}function hx(t){return new hK(t,!0)}class qO{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const WD="PersistentStream";class YO{constructor(e,n,r,s,a,l,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qO(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(fo(n.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new je(xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(WD,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Pe(WD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class lQ extends YO{constructor(e,n,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pK(this.serializer,e),r=(function(a){if(!("targetChange"in a))return et.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?et.min():l.readTime?hi(l.readTime):et.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=o_(this.serializer),n.addTarget=(function(a,l){let u;const d=l.target;if(u=n_(d)?{documents:xK(a,d)}:{query:vK(a,d).ft},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=PO(a,l.resumeToken);const f=s_(a,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(et.min())>0){u.readTime=Xy(a,l.snapshotVersion.toTimestamp());const f=s_(a,l.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);const r=wK(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=o_(this.serializer),n.removeTarget=e,this.q_(n)}}class cQ extends YO{constructor(e,n,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=yK(e.writeResults,e.commitTime),r=hi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=o_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>gK(this.serializer,r)))};this.q_(n)}}class uQ{}class dQ extends uQ{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new je(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,a_(n,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new je(xe.UNKNOWN,a.toString())}))}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Ho(e,a_(n,r),s,l,u,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new je(xe.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class hQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fo(n),this.aa=!1):Pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Uc="RemoteStore";class fQ{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{Kc(this)&&(Pe(Uc,"Restarting streams for network reachability change."),await(async function(d){const f=rt(d);f.Ea.add(4),await Hm(f),f.Ra.set("Unknown"),f.Ea.delete(4),await fx(f)})(this))}))})),this.Ra=new hQ(r,s)}}async function fx(t){if(Kc(t))for(const e of t.da)await e(!0)}async function Hm(t){for(const e of t.da)await e(!1)}function WO(t,e){const n=rt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),fC(n)?hC(n):Jd(n).O_()&&dC(n,e))}function uC(t,e){const n=rt(t),r=Jd(n);n.Ia.delete(e),r.O_()&&GO(n,e),n.Ia.size===0&&(r.O_()?r.L_():Kc(n)&&n.Ra.set("Unknown"))}function dC(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Jd(t).Y_(e)}function GO(t,e){t.Va.Ue(e),Jd(t).Z_(e)}function hC(t){t.Va=new lK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Jd(t).start(),t.Ra.ua()}function fC(t){return Kc(t)&&!Jd(t).x_()&&t.Ia.size>0}function Kc(t){return rt(t).Ea.size===0}function KO(t){t.Va=void 0}async function mQ(t){t.Ra.set("Online")}async function pQ(t){t.Ia.forEach(((e,n)=>{dC(t,e)}))}async function gQ(t,e){KO(t),fC(t)?(t.Ra.ha(e),hC(t)):t.Ra.set("Unknown")}async function yQ(t,e,n){if(t.Ra.set("Online"),e instanceof RO&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const u of a.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.Ia.delete(u),s.Va.removeTarget(u))})(t,e)}catch(r){Pe(Uc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jy(t,r)}else if(e instanceof py?t.Va.Ze(e):e instanceof AO?t.Va.st(e):t.Va.tt(e),!n.isEqual(et.min()))try{const r=await $O(t.localStore);n.compareTo(r)>=0&&await(function(a,l){const u=a.Va.Tt(l);return u.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=a.Ia.get(f);m&&a.Ia.set(f,m.withResumeToken(d.resumeToken,l))}})),u.targetMismatches.forEach(((d,f)=>{const m=a.Ia.get(d);if(!m)return;a.Ia.set(d,m.withResumeToken(Dr.EMPTY_BYTE_STRING,m.snapshotVersion)),GO(a,d);const g=new hl(m.target,d,f,m.sequenceNumber);dC(a,g)})),a.remoteSyncer.applyRemoteEvent(u)})(t,n)}catch(r){Pe(Uc,"Failed to raise snapshot:",r),await Jy(t,r)}}async function Jy(t,e,n){if(!Xd(e))throw e;t.Ea.add(1),await Hm(t),t.Ra.set("Offline"),n||(n=()=>$O(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Pe(Uc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await fx(t)}))}function QO(t,e){return e().catch((n=>Jy(t,n,e)))}async function mx(t){const e=rt(t),n=Tl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:QE;for(;xQ(e);)try{const s=await JK(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,vQ(e,s)}catch(s){await Jy(e,s)}XO(e)&&ZO(e)}function xQ(t){return Kc(t)&&t.Ta.length<10}function vQ(t,e){t.Ta.push(e);const n=Tl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function XO(t){return Kc(t)&&!Tl(t).x_()&&t.Ta.length>0}function ZO(t){Tl(t).start()}async function bQ(t){Tl(t).ra()}async function wQ(t){const e=Tl(t);for(const n of t.Ta)e.ea(n.mutations)}async function _Q(t,e,n){const r=t.Ta.shift(),s=rC.from(r,e,n);await QO(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await mx(t)}async function EQ(t,e){e&&Tl(t).X_&&await(async function(r,s){if((function(l){return aK(l)&&l!==xe.ABORTED})(s.code)){const a=r.Ta.shift();Tl(r).B_(),await QO(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await mx(r)}})(t,e),XO(t)&&ZO(t)}async function GD(t,e){const n=rt(t);n.asyncQueue.verifyOperationInProgress(),Pe(Uc,"RemoteStore received new credentials");const r=Kc(n);n.Ea.add(3),await Hm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await fx(n)}async function CQ(t,e){const n=rt(t);e?(n.Ea.delete(2),await fx(n)):e||(n.Ea.add(2),await Hm(n),n.Ra.set("Unknown"))}function Jd(t){return t.ma||(t.ma=(function(n,r,s){const a=rt(n);return a.sa(),new lQ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:mQ.bind(null,t),t_:pQ.bind(null,t),r_:gQ.bind(null,t),H_:yQ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),fC(t)?hC(t):t.Ra.set("Unknown")):(await t.ma.stop(),KO(t))}))),t.ma}function Tl(t){return t.fa||(t.fa=(function(n,r,s){const a=rt(n);return a.sa(),new cQ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:bQ.bind(null,t),r_:EQ.bind(null,t),ta:wQ.bind(null,t),na:_Q.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await mx(t)):(await t.fa.stop(),t.Ta.length>0&&(Pe(Uc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class mC{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new eo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const l=Date.now()+r,u=new mC(e,n,l,s,a);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pC(t,e){if(fo("AsyncQueue",`${e}: ${t}`),Xd(t))return new je(xe.UNAVAILABLE,`${e}: ${t}`);throw t}class bd{static emptySet(e){return new bd(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ze.comparator(n.key,r.key):(n,r)=>ze.comparator(n.key,r.key),this.keyedMap=Tf(),this.sortedSet=new wn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class KD{constructor(){this.ga=new wn(ze.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):We(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Pd{constructor(e,n,r,s,a,l,u,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,a){const l=[];return n.forEach((u=>{l.push({type:0,doc:u})})),new Pd(e,n,bd.emptySet(n),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ox(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class SQ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class NQ{constructor(){this.queries=QD(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=rt(n),a=s.queries;s.queries=QD(),a.forEach(((l,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new je(xe.ABORTED,"Firestore shutting down"))}}function QD(){return new Gc((t=>xO(t)),ox)}async function gC(t,e){const n=rt(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new SQ,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=pC(l,`Initialization of query '${Ju(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&xC(n)}async function yC(t,e){const n=rt(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jQ(t,e){const n=rt(t);let r=!1;for(const s of e){const a=s.query,l=n.queries.get(a);if(l){for(const u of l.Sa)u.Fa(s)&&(r=!0);l.wa=s}}r&&xC(n)}function TQ(t,e,n){const r=rt(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function xC(t){t.Ca.forEach((e=>{e.next()}))}var u_,XD;(XD=u_||(u_={})).Ma="default",XD.Cache="cache";class vC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Pd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Pd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==u_.Cache}}class JO{constructor(e){this.key=e}}class eI{constructor(e){this.key=e}}class kQ{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=bt(),this.mutatedKeys=bt(),this.eu=vO(e),this.tu=new bd(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new KD,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,g)=>{const y=s.get(m),w=lx(this.query,g)?g:null,_=!!y&&this.mutatedKeys.has(y.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let S=!1;y&&w?y.data.isEqual(w.data)?_!==C&&(r.track({type:3,doc:w}),S=!0):this.su(y,w)||(r.track({type:2,doc:w}),S=!0,(d&&this.eu(w,d)>0||f&&this.eu(w,f)<0)&&(u=!0)):!y&&w?(r.track({type:0,doc:w}),S=!0):y&&!w&&(r.track({type:1,doc:y}),S=!0,(d||f)&&(u=!0)),S&&(w?(l=l.add(w),a=C?a.add(m):a.delete(m)):(l=l.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:u,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,g)=>(function(w,_){const C=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Rt:S})}};return C(w)-C(_)})(m.type,g.type)||this.eu(m.doc,g.doc))),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,f=d!==this.Za;return this.Za=d,l.length!==0||f?{snapshot:new Pd(this.query,e.tu,a,l,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new KD,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=bt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new eI(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new JO(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=bt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Pd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bC="SyncEngine";class DQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AQ{constructor(e){this.key=e,this.hu=!1}}class RQ{constructor(e,n,r,s,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Gc((u=>xO(u)),ox),this.Iu=new Map,this.Eu=new Set,this.du=new wn(ze.comparator),this.Au=new Map,this.Ru=new iC,this.Vu={},this.mu=new Map,this.fu=Rd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PQ(t,e,n=!0){const r=iI(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await tI(r,e,n,!0),s}async function MQ(t,e){const n=iI(t);await tI(n,e,!0,!1)}async function tI(t,e,n,r){const s=await eQ(t.localStore,di(e)),a=s.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let u;return r&&(u=await LQ(t,e,a,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&WO(t.remoteStore,s),u}async function LQ(t,e,n,r,s){t.pu=(g,y,w)=>(async function(C,S,N,k){let R=S.view.ru(N);R.Cs&&(R=await HD(C.localStore,S.query,!1).then((({documents:P})=>S.view.ru(P,R))));const A=k&&k.targetChanges.get(S.targetId),L=k&&k.targetMismatches.get(S.targetId)!=null,F=S.view.applyChanges(R,C.isPrimaryClient,A,L);return JD(C,S.targetId,F.au),F.snapshot})(t,g,y,w);const a=await HD(t.localStore,e,!0),l=new kQ(e,a.Qs),u=l.ru(a.documents),d=zm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=l.applyChanges(u,t.isPrimaryClient,d);JD(t,n,f.au);const m=new DQ(e,n,l);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function OQ(t,e,n){const r=rt(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!ox(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await l_(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&uC(r.remoteStore,s.targetId),d_(r,s.targetId)})).catch(Qd)):(d_(r,s.targetId),await l_(r.localStore,s.targetId,!0))}async function IQ(t,e){const n=rt(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uC(n.remoteStore,r.targetId))}async function VQ(t,e,n){const r=qQ(t);try{const s=await(function(l,u){const d=rt(l),f=Ke.now(),m=u.reduce(((w,_)=>w.add(_.key)),bt());let g,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let _=mo(),C=bt();return d.Ns.getEntries(w,m).next((S=>{_=S,_.forEach(((N,k)=>{k.isValidDocument()||(C=C.add(N))}))})).next((()=>d.localDocuments.getOverlayedDocuments(w,_))).next((S=>{g=S;const N=[];for(const k of u){const R=eK(k,g.get(k.key).overlayedDocument);R!=null&&N.push(new Fl(k.key,R,uO(R.value.mapValue),ra.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,N,u)})).next((S=>{y=S;const N=S.applyToLocalDocumentSet(g,C);return d.documentOverlayCache.saveOverlays(w,S.batchId,N)}))})).then((()=>({batchId:y.batchId,changes:wO(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,u,d){let f=l.Vu[l.currentUser.toKey()];f||(f=new wn(vt)),f=f.insert(u,d),l.Vu[l.currentUser.toKey()]=f})(r,s.batchId,n),await $m(r,s.changes),await mx(r.remoteStore)}catch(s){const a=pC(s,"Failed to persist write");n.reject(a)}}async function nI(t,e){const n=rt(t);try{const r=await XK(n.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=n.Au.get(a);l&&(Vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Vt(l.hu,14607):s.removedDocuments.size>0&&(Vt(l.hu,42227),l.hu=!1))})),await $m(n,r,e)}catch(r){await Qd(r)}}function ZD(t,e,n){const r=rt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((a,l)=>{const u=l.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(l,u){const d=rt(l);d.onlineState=u;let f=!1;d.queries.forEach(((m,g)=>{for(const y of g.Sa)y.va(u)&&(f=!0)})),f&&xC(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UQ(t,e,n){const r=rt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new wn(ze.comparator);l=l.insert(a,Lr.newNoDocument(a,et.min()));const u=bt().add(a),d=new dx(et.min(),new Map,new wn(vt),l,u);await nI(r,d),r.du=r.du.remove(a),r.Au.delete(e),wC(r)}else await l_(r.localStore,e,!1).then((()=>d_(r,e,n))).catch(Qd)}async function FQ(t,e){const n=rt(t),r=e.batch.batchId;try{const s=await QK(n.localStore,e);sI(n,r,null),rI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $m(n,s)}catch(s){await Qd(s)}}async function BQ(t,e,n){const r=rt(t);try{const s=await(function(l,u){const d=rt(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return d.mutationQueue.lookupMutationBatch(f,u).next((g=>(Vt(g!==null,37113),m=g.keys(),d.mutationQueue.removeMutationBatch(f,g)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>d.localDocuments.getDocuments(f,m)))}))})(r.localStore,e);sI(r,e,n),rI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $m(r,s)}catch(s){await Qd(s)}}function rI(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function sI(t,e,n){const r=rt(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function d_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||aI(t,r)}))}function aI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(uC(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),wC(t))}function JD(t,e,n){for(const r of n)r instanceof JO?(t.Ru.addReference(r.key,e),zQ(t,r)):r instanceof eI?(Pe(bC,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||aI(t,r.key)):We(19791,{wu:r})}function zQ(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Pe(bC,"New document in limbo: "+n),t.Eu.add(r),wC(t))}function wC(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ze(nn.fromString(e)),r=t.fu.next();t.Au.set(r,new AQ(n)),t.du=t.du.insert(n,r),WO(t.remoteStore,new hl(di(ix(n.path)),r,"TargetPurposeLimboResolution",rx.ce))}}async function $m(t,e,n){const r=rt(t),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{l.push(r.pu(d,e,n).then((f=>{if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:n?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(f){s.push(f);const m=lC.As(d.targetId,f);a.push(m)}})))})),await Promise.all(l),r.Pu.H_(s),await(async function(d,f){const m=rt(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>be.forEach(f,(y=>be.forEach(y.Es,(w=>m.persistence.referenceDelegate.addReference(g,y.targetId,w))).next((()=>be.forEach(y.ds,(w=>m.persistence.referenceDelegate.removeReference(g,y.targetId,w)))))))))}catch(g){if(!Xd(g))throw g;Pe(cC,"Failed to update sequence numbers: "+g)}for(const g of f){const y=g.targetId;if(!g.fromCache){const w=m.Ms.get(y),_=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(_);m.Ms=m.Ms.insert(y,C)}}})(r.localStore,a))}async function HQ(t,e){const n=rt(t);if(!n.currentUser.isEqual(e)){Pe(bC,"User change. New user:",e.toKey());const r=await HO(n.localStore,e);n.currentUser=e,(function(a,l){a.mu.forEach((u=>{u.forEach((d=>{d.reject(new je(xe.CANCELLED,l))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $m(n,r.Ls)}}function $Q(t,e){const n=rt(t),r=n.Au.get(e);if(r&&r.hu)return bt().add(r.key);{let s=bt();const a=n.Iu.get(e);if(!a)return s;for(const l of a){const u=n.Tu.get(l);s=s.unionWith(u.view.nu)}return s}}function iI(t){const e=rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$Q.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UQ.bind(null,e),e.Pu.H_=jQ.bind(null,e.eventManager),e.Pu.yu=TQ.bind(null,e.eventManager),e}function qQ(t){const e=rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FQ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BQ.bind(null,e),e}class e0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hx(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return KK(this.persistence,new YK,e.initialUser,this.serializer)}Cu(e){return new zO(oC.mi,this.serializer)}Du(e){return new nQ}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}e0.provider={build:()=>new e0};class YQ extends e0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Vt(this.persistence.referenceDelegate instanceof Zy,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AK(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new zO((r=>Zy.mi(r,n)),this.serializer)}}class h_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ZD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HQ.bind(null,this.syncEngine),await CQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new NQ})()}createDatastore(e){const n=hx(e.databaseInfo.databaseId),r=(function(a){return new oQ(a)})(e.databaseInfo);return(function(a,l,u,d){return new dQ(a,l,u,d)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,a,l,u){return new fQ(r,s,a,l,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>ZD(this.syncEngine,n,0)),(function(){return YD.v()?new YD:new rQ})())}createSyncEngine(e,n){return(function(s,a,l,u,d,f,m){const g=new RQ(s,a,l,u,d,f);return m&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=rt(n);Pe(Uc,"RemoteStore shutting down."),r.Ea.add(5),await Hm(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}h_.provider={build:()=>new h_};class _C{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const kl="FirestoreClient";class WQ{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=rs.UNAUTHENTICATED,this.clientId=KE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{Pe(kl,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Pe(kl,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new eo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pC(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Dw(t,e){t.asyncQueue.verifyOperationInProgress(),Pe(kl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await HO(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function eA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GQ(t);Pe(kl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>GD(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>GD(e.remoteStore,s))),t._onlineComponents=e}async function GQ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pe(kl,"Using user provided OfflineComponentProvider");try{await Dw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===xe.FAILED_PRECONDITION||s.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;dm("Error using user provided cache. Falling back to memory cache: "+n),await Dw(t,new e0)}}else Pe(kl,"Using default OfflineComponentProvider"),await Dw(t,new YQ(void 0));return t._offlineComponents}async function oI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pe(kl,"Using user provided OnlineComponentProvider"),await eA(t,t._uninitializedComponentsProvider._online)):(Pe(kl,"Using default OnlineComponentProvider"),await eA(t,new h_))),t._onlineComponents}function KQ(t){return oI(t).then((e=>e.syncEngine))}async function t0(t){const e=await oI(t),n=e.eventManager;return n.onListen=PQ.bind(null,e.syncEngine),n.onUnlisten=OQ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MQ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IQ.bind(null,e.syncEngine),n}function QQ(t,e,n={}){const r=new eo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,u,d,f){const m=new _C({next:y=>{m.Nu(),l.enqueueAndForget((()=>yC(a,g)));const w=y.docs.has(u);!w&&y.fromCache?f.reject(new je(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&d&&d.source==="server"?f.reject(new je(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new vC(ix(u.path),m,{includeMetadataChanges:!0,qa:!0});return gC(a,g)})(await t0(t),t.asyncQueue,e,n,r))),r.promise}function XQ(t,e,n={}){const r=new eo;return t.asyncQueue.enqueueAndForget((async()=>(function(a,l,u,d,f){const m=new _C({next:y=>{m.Nu(),l.enqueueAndForget((()=>yC(a,g))),y.fromCache&&d.source==="server"?f.reject(new je(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new vC(u,m,{includeMetadataChanges:!0,qa:!0});return gC(a,g)})(await t0(t),t.asyncQueue,e,n,r))),r.promise}function lI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const tA=new Map;const ZQ="firestore.googleapis.com",nA=!0;class rA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new je(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZQ,this.ssl=nA}else this.host=e.host,this.ssl=e.ssl??nA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BO)throw new je(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lI(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new je(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new je(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new je(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class EC{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new aG;switch(r.type){case"firstParty":return new lG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new je(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=tA.get(n);r&&(Pe("ComponentProvider","Removing Datastore"),tA.delete(n),r.terminate())})(this),Promise.resolve()}}class bo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bo(this.firestore,e,this._query)}}class Tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}toJSON(){return{type:Tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fm(n,Tn._jsonSchema))return new Tn(e,r||null,new ze(nn.fromString(n.referencePath)))}}Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:tr("string",Tn._jsonSchemaVersion),referencePath:tr("string")};class bl extends bo{constructor(e,n,r){super(e,n,ix(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new ze(e))}withConverter(e){return new bl(this.firestore,e,this._path)}}function ct(t,e,...n){if(t=Lt(t),J3("collection","path",e),t instanceof EC){const r=nn.fromString(e,...n);return gD(r),new bl(t,null,r)}{if(!(t instanceof Tn||t instanceof bl))throw new je(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nn.fromString(e,...n));return gD(r),new bl(t.firestore,null,r)}}function sn(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=KE.newId()),J3("doc","path",e),t instanceof EC){const r=nn.fromString(e,...n);return pD(r),new Tn(t,null,new ze(r))}{if(!(t instanceof Tn||t instanceof bl))throw new je(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nn.fromString(e,...n));return pD(r),new Tn(t.firestore,t instanceof bl?t.converter:null,new ze(r))}}const sA="AsyncQueue";class aA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qO(this,"async_queue_retry"),this._c=()=>{const r=kw();r&&Pe(sA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=kw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new eo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xd(e))throw e;Pe(sA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,fo("INTERNAL UNHANDLED ERROR: ",iA(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=mC.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&We(47125,{Pc:iA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function iA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function oA(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(t,["next","error","complete"])}class po extends EC{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new aA,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aA(e),this._firestoreClient=void 0,await e}}}function JQ(t,e,n){n||(n=qy);const r=Lm(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Lc(a,e))return s;throw new je(xe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new je(xe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BO)throw new je(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ci(e.host)&&Z0(e.host),r.initialize({options:e,instanceIdentifier:n})}function px(t){if(t._terminated)throw new je(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eX(t),t._firestoreClient}function eX(t){const e=t._freezeSettings(),n=(function(s,a,l,u){return new SG(s,a,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,lI(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new WQ(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const a=s?._online.build();return{_offline:s?._offline.build(a),_online:a}})(t._componentsProvider))}class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(Dr.fromBase64String(e))}catch(n){throw new je(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Js(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fm(e,Js._jsonSchema))return Js.fromBase64String(e.bytes)}}Js._jsonSchemaVersion="firestore/bytes/1.0",Js._jsonSchema={type:tr("string",Js._jsonSchemaVersion),bytes:tr("string")};class gx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new je(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class CC{constructor(e){this._methodName=e}}class fi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new je(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new je(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return vt(this._lat,e._lat)||vt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(e){if(Fm(e,fi._jsonSchema))return new fi(e.latitude,e.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:tr("string",fi._jsonSchemaVersion),latitude:tr("number"),longitude:tr("number")};class mi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fm(e,mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mi(e.vectorValues);throw new je(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:tr("string",mi._jsonSchemaVersion),vectorValues:tr("object")};const tX=/^__.*__$/;class nX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bm(e,this.data,n,this.fieldTransforms)}}class cI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{Ac:t})}}class SC{constructor(e,n,r,s,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new SC({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return n0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uI(this.Ac)&&tX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hx(e)}Cc(e,n,r,s=!1){return new SC({Ac:e,methodName:n,Dc:r,path:Tr.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yx(t){const e=t._freezeSettings(),n=hx(t._databaseId);return new rX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dI(t,e,n,r,s,a={}){const l=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);NC("Data must be an object, but it was:",l,r);const u=hI(r,l);let d,f;if(a.merge)d=new Ns(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const m=[];for(const g of a.mergeFields){const y=f_(e,g,n);if(!l.contains(y))throw new je(xe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);mI(m,y)||m.push(y)}d=new Ns(m),f=l.fieldTransforms.filter((g=>d.covers(g.field)))}else d=null,f=l.fieldTransforms;return new nX(new is(u),d,f)}class xx extends CC{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xx}}function sX(t,e,n,r){const s=t.Cc(1,e,n);NC("Data must be an object, but it was:",s,r);const a=[],l=is.empty();Ul(r,((d,f)=>{const m=jC(e,d,n);f=Lt(f);const g=s.yc(m);if(f instanceof xx)a.push(m);else{const y=qm(f,g);y!=null&&(a.push(m),l.set(m,y))}}));const u=new Ns(a);return new cI(l,u,s.fieldTransforms)}function aX(t,e,n,r,s,a){const l=t.Cc(1,e,n),u=[f_(e,r,n)],d=[s];if(a.length%2!=0)throw new je(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)u.push(f_(e,a[y])),d.push(a[y+1]);const f=[],m=is.empty();for(let y=u.length-1;y>=0;--y)if(!mI(f,u[y])){const w=u[y];let _=d[y];_=Lt(_);const C=l.yc(w);if(_ instanceof xx)f.push(w);else{const S=qm(_,C);S!=null&&(f.push(w),m.set(w,S))}}const g=new Ns(f);return new cI(m,g,l.fieldTransforms)}function iX(t,e,n,r=!1){return qm(n,t.Cc(r?4:3,e))}function qm(t,e){if(fI(t=Lt(t)))return NC("Unsupported field value:",e,t),hI(t,e);if(t instanceof CC)return(function(r,s){if(!uI(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const u of r){let d=qm(u,s.wc(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}})(t,e)}return(function(r,s){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GG(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Ke.fromDate(r);return{timestampValue:Xy(s.serializer,a)}}if(r instanceof Ke){const a=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xy(s.serializer,a)}}if(r instanceof fi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Js)return{bytesValue:PO(s.serializer,r._byteString)};if(r instanceof Tn){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:aC(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mi)return(function(l,u){return{mapValue:{fields:{[lO]:{stringValue:cO},[Yy]:{arrayValue:{values:l.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return tC(u.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${nx(r)}`)})(t,e)}function hI(t,e){const n={};return nO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ul(t,((r,s)=>{const a=qm(s,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function fI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof fi||t instanceof Js||t instanceof Tn||t instanceof CC||t instanceof mi)}function NC(t,e,n){if(!fI(n)||!eO(n)){const r=nx(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function f_(t,e,n){if((e=Lt(e))instanceof gx)return e._internalPath;if(typeof e=="string")return jC(t,e);throw n0("Field path arguments must be of type string or ",t,!1,void 0,n)}const oX=new RegExp("[~\\*/\\[\\]]");function jC(t,e,n){if(e.search(oX)>=0)throw n0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gx(...e.split("."))._internalPath}catch{throw n0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function n0(t,e,n,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new je(xe.INVALID_ARGUMENT,u+t+d)}function mI(t,e){return t.some((n=>n.isEqual(e)))}class pI{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lX extends pI{data(){return super.data()}}function vx(t,e){return typeof e=="string"?jC(t,e):e instanceof gx?e._internalPath:e._delegate._internalPath}function gI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new je(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TC{}class kC extends TC{}function fn(t,e,...n){let r=[];e instanceof TC&&r.push(e),r=r.concat(n),(function(a){const l=a.filter((d=>d instanceof DC)).length,u=a.filter((d=>d instanceof bx)).length;if(l>1||l>0&&u>0)throw new je(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class bx extends kC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bx(e,n,r)}_apply(e){const n=this._parse(e);return yI(e._query,n),new bo(e.firestore,e.converter,r_(e._query,n))}_parse(e){const n=yx(e.firestore);return(function(a,l,u,d,f,m,g){let y;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new je(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){cA(g,m);const _=[];for(const C of g)_.push(lA(d,a,C));y={arrayValue:{values:_}}}else y=lA(d,a,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||cA(g,m),y=iX(u,l,g,m==="in"||m==="not-in");return er.create(f,m,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xe(t,e,n){const r=e,s=vx("where",t);return bx._create(s,r,n)}class DC extends TC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new DC(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Na.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,a){let l=s;const u=a.getFlattenedFilters();for(const d of u)yI(l,d),l=r_(l,d)})(e._query,n),new bo(e.firestore,e.converter,r_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class AC extends kC{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new AC(e,n)}_apply(e){const n=(function(s,a,l){if(s.startAt!==null)throw new je(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new je(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gm(a,l)})(e._query,this._field,this._direction);return new bo(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new Zd(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function go(t,e="asc"){const n=e,r=vx("orderBy",t);return AC._create(r,n)}class RC extends kC{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new RC(e,n,r)}_apply(e){return new bo(e.firestore,e.converter,Gy(e._query,this._limit,this._limitType))}}function wx(t){return RC._create("limit",t,"F")}function lA(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new je(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yO(e)&&n.indexOf("/")!==-1)throw new je(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(nn.fromString(n));if(!ze.isDocumentKey(r))throw new je(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CD(t,new ze(r))}if(n instanceof Tn)return CD(t,n._key);throw new je(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nx(n)}.`)}function cA(t,e){if(!Array.isArray(t)||t.length===0)throw new je(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yI(t,e){const n=(function(s,a){for(const l of s)for(const u of l.getFlattenedFilters())if(a.indexOf(u.op)>=0)return u.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new je(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new je(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cX{convertValue(e,n="none"){switch(jl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Nl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ul(e,((s,a)=>{r[s]=this.convertValue(a,n)})),r}convertVectorValue(e){const n=e.fields?.[Yy].arrayValue?.values?.map((r=>In(r.doubleValue)));return new mi(n)}convertGeoPoint(e){return new fi(In(e.latitude),In(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ax(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fm(e));default:return null}}convertTimestamp(e){const n=Sl(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nn.fromString(e);Vt(UO(r),9688,{name:e});const s=new mm(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return s.isEqual(n)||fo(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}function xI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Df{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jc extends pI{constructor(e,n,r,s,a,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vx("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jc._jsonSchemaVersion="firestore/documentSnapshot/1.0",jc._jsonSchema={type:tr("string",jc._jsonSchemaVersion),bundleSource:tr("string","DocumentSnapshot"),bundleName:tr("string"),bundle:tr("string")};class gy extends jc{data(e={}){return super.data(e)}}class Tc{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Df(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new gy(this._firestore,this._userDataWriter,r.key,r,new Df(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new je(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((u=>{const d=new gy(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Df(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>a||u.type!==3)).map((u=>{const d=new gy(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Df(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),m=l.indexOf(u.doc.key)),{type:uX(u.type),doc:d,oldIndex:f,newIndex:m}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Tc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=KE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:t})}}function Qc(t){t=ks(t,Tn);const e=ks(t.firestore,po);return QQ(px(e),t._key).then((n=>bI(e,t,n)))}Tc._jsonSchemaVersion="firestore/querySnapshot/1.0",Tc._jsonSchema={type:tr("string",Tc._jsonSchemaVersion),bundleSource:tr("string","QuerySnapshot"),bundleName:tr("string"),bundle:tr("string")};class PC extends cX{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function mn(t){t=ks(t,bo);const e=ks(t.firestore,po),n=px(e),r=new PC(e);return gI(t._query),XQ(n,t._query).then((s=>new Tc(e,r,t,s)))}function dX(t,e,n){t=ks(t,Tn);const r=ks(t.firestore,po),s=xI(t.converter,e);return _x(r,[dI(yx(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ra.none())])}function Aa(t,e,n,...r){t=ks(t,Tn);const s=ks(t.firestore,po),a=yx(s);let l;return l=typeof(e=Lt(e))=="string"||e instanceof gx?aX(a,"updateDoc",t._key,e,n,r):sX(a,"updateDoc",t._key,e),_x(s,[l.toMutation(t._key,ra.exists(!0))])}function eh(t){return _x(ks(t.firestore,po),[new nC(t._key,ra.none())])}function As(t,e){const n=ks(t.firestore,po),r=sn(t),s=xI(t.converter,e);return _x(n,[dI(yx(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ra.exists(!1))]).then((()=>r))}function vI(t,...e){t=Lt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||oA(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(oA(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let a,l,u;if(t instanceof Tn)l=ks(t.firestore,po),u=ix(t._key.path),a={next:d=>{e[r]&&e[r](bI(l,t,d))},error:e[r+1],complete:e[r+2]};else{const d=ks(t,bo);l=ks(d.firestore,po),u=d._query;const f=new PC(l);a={next:m=>{e[r]&&e[r](new Tc(l,f,d,m))},error:e[r+1],complete:e[r+2]},gI(t._query)}return(function(f,m,g,y){const w=new _C(y),_=new vC(m,w,g);return f.asyncQueue.enqueueAndForget((async()=>gC(await t0(f),_))),()=>{w.Nu(),f.asyncQueue.enqueueAndForget((async()=>yC(await t0(f),_)))}})(px(l),u,s,a)}function _x(t,e){return(function(r,s){const a=new eo;return r.asyncQueue.enqueueAndForget((async()=>VQ(await KQ(r),s,a))),a.promise})(px(t),e)}function bI(t,e,n){const r=n.docs.get(e._key),s=new PC(t);return new jc(t,s,e._key,r,new Df(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Kd=s})(Wc),El(new co("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),u=new po(new iG(r.getProvider("auth-internal")),new cG(l,r.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new je(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mm(f.options.projectId,m)})(l,s),l);return a={useFetchStreams:n,...a},u._setSettings(a),u}),"PUBLIC").setMultipleInstances(!0)),na(dD,hD,e),na(dD,hD,"esm2020")})();const wI="firebasestorage.googleapis.com",_I="storageBucket",hX=120*1e3,fX=600*1e3;class An extends ka{constructor(e,n,r=0){super(Aw(e),`Firebase Storage: ${n} (${Aw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,An.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Aw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var kn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(kn||(kn={}));function Aw(t){return"storage/"+t}function MC(){const t="An unknown error occurred, please check the error payload for server response.";return new An(kn.UNKNOWN,t)}function mX(t){return new An(kn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function pX(t){return new An(kn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function gX(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new An(kn.UNAUTHENTICATED,t)}function yX(){return new An(kn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xX(t){return new An(kn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vX(){return new An(kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bX(){return new An(kn.CANCELED,"User canceled the upload/download.")}function wX(t){return new An(kn.INVALID_URL,"Invalid URL '"+t+"'.")}function _X(t){return new An(kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function EX(){return new An(kn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_I+"' property when initializing the app?")}function CX(){return new An(kn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SX(){return new An(kn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NX(t){return new An(kn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function m_(t){return new An(kn.INVALID_ARGUMENT,t)}function EI(){return new An(kn.APP_DELETED,"The Firebase app was deleted.")}function jX(t){return new An(kn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yf(t,e){return new An(kn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function uf(t){throw new An(kn.INTERNAL_ERROR,"Internal error: "+t)}class js{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=js.makeFromUrl(e,n)}catch{return new js(e,"")}if(r.path==="")return r;throw _X(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function f(A){A.path_=decodeURIComponent(A.path)}const m="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",w=new RegExp(`^https?://${g}/${m}/b/${s}/o${y}`,"i"),_={bucket:1,path:3},C=n===wI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",N=new RegExp(`^https?://${C}/${s}/${S}`,"i"),R=[{regex:u,indices:d,postModify:a},{regex:w,indices:_,postModify:f},{regex:N,indices:{bucket:1,path:2},postModify:f}];for(let A=0;A<R.length;A++){const L=R[A],F=L.regex.exec(e);if(F){const P=F[L.indices.bucket];let O=F[L.indices.path];O||(O=""),r=new js(P,O),L.postModify(r);break}}if(r==null)throw wX(e);return r}}class TX{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function kX(t,e,n){let r=1,s=null,a=null,l=!1,u=0;function d(){return u===2}let f=!1;function m(...S){f||(f=!0,e.apply(null,S))}function g(S){s=setTimeout(()=>{s=null,t(w,d())},S)}function y(){a&&clearTimeout(a)}function w(S,...N){if(f){y();return}if(S){y(),m.call(null,S,...N);return}if(d()||l){y(),m.call(null,S,...N);return}r<64&&(r*=2);let R;u===1?(u=2,R=0):R=(r+Math.random())*1e3,g(R)}let _=!1;function C(S){_||(_=!0,y(),!f&&(s!==null?(S||(u=2),clearTimeout(s),g(0)):S||(u=1)))}return g(0),a=setTimeout(()=>{l=!0,C(!0)},n),C}function DX(t){t(!1)}function AX(t){return t!==void 0}function RX(t){return typeof t=="object"&&!Array.isArray(t)}function LC(t){return typeof t=="string"||t instanceof String}function uA(t){return OC()&&t instanceof Blob}function OC(){return typeof Blob<"u"}function dA(t,e,n,r){if(r<e)throw m_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw m_(`Invalid value for '${t}'. Expected ${n} or less.`)}function IC(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function CI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var kc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(kc||(kc={}));function PX(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}class MX{constructor(e,n,r,s,a,l,u,d,f,m,g,y=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=g,this.retry=y,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,C)=>{this.resolve_=_,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Og(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const u=a.getErrorCode()===kc.NO_ERROR,d=a.getStatus();if(!u||PX(d,this.additionalRetryCodes_)&&this.retry){const m=a.getErrorCode()===kc.ABORT;r(!1,new Og(!1,null,m));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new Og(f,a))})},n=(r,s)=>{const a=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());AX(d)?a(d):a()}catch(d){l(d)}else if(u!==null){const d=MC();d.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,d)):l(d)}else if(s.canceled){const d=this.appDelete_?EI():bX();l(d)}else{const d=vX();l(d)}};this.canceled_?n(!1,new Og(!1,null,!0)):this.backoffId_=kX(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DX(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Og{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function LX(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function OX(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IX(t,e){e&&(t["X-Firebase-GMPID"]=e)}function VX(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function UX(t,e,n,r,s,a,l=!0,u=!1){const d=CI(t.urlParams),f=t.url+d,m=Object.assign({},t.headers);return IX(m,e),LX(m,n),OX(m,a),VX(m,r),new MX(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l,u)}function FX(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BX(...t){const e=FX();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(OC())return new Blob(t);throw new An(kn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zX(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function HX(t){if(typeof atob>"u")throw NX("base-64");return atob(t)}const si={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rw{constructor(e,n){this.data=e,this.contentType=n||null}}function $X(t,e){switch(t){case si.RAW:return new Rw(SI(e));case si.BASE64:case si.BASE64URL:return new Rw(NI(t,e));case si.DATA_URL:return new Rw(YX(e),WX(e))}throw MC()}function SI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=t.charCodeAt(++n);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qX(t){let e;try{e=decodeURIComponent(t)}catch{throw Yf(si.DATA_URL,"Malformed data URL.")}return SI(e)}function NI(t,e){switch(t){case si.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Yf(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case si.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Yf(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=HX(e)}catch(s){throw s.message.includes("polyfill")?s:Yf(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class jI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Yf(si.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=GX(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function YX(t){const e=new jI(t);return e.base64?NI(si.BASE64,e.rest):qX(e.rest)}function WX(t){return new jI(t).contentType}function GX(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class ul{constructor(e,n){let r=0,s="";uA(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(uA(this.data_)){const r=this.data_,s=zX(r,e,n);return s===null?null:new ul(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ul(r,!0)}}static getBlob(...e){if(OC()){const n=e.map(r=>r instanceof ul?r.data_:r);return new ul(BX.apply(null,n))}else{const n=e.map(l=>LC(l)?$X(si.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(l=>{for(let u=0;u<l.length;u++)s[a++]=l[u]}),new ul(s,!0)}}uploadData(){return this.data_}}function TI(t){let e;try{e=JSON.parse(t)}catch{return null}return RX(e)?e:null}function KX(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function QX(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function kI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function XX(t,e){return e}class Br{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||XX}}let Ig=null;function ZX(t){return!LC(t)||t.length<2?t:kI(t)}function DI(){if(Ig)return Ig;const t=[];t.push(new Br("bucket")),t.push(new Br("generation")),t.push(new Br("metageneration")),t.push(new Br("name","fullPath",!0));function e(a,l){return ZX(l)}const n=new Br("name");n.xform=e,t.push(n);function r(a,l){return l!==void 0?Number(l):l}const s=new Br("size");return s.xform=r,t.push(s),t.push(new Br("timeCreated")),t.push(new Br("updated")),t.push(new Br("md5Hash",null,!0)),t.push(new Br("cacheControl",null,!0)),t.push(new Br("contentDisposition",null,!0)),t.push(new Br("contentEncoding",null,!0)),t.push(new Br("contentLanguage",null,!0)),t.push(new Br("contentType",null,!0)),t.push(new Br("metadata","customMetadata",!0)),Ig=t,Ig}function JX(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new js(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function eZ(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const l=n[a];r[l.local]=l.xform(r,e[l.server])}return JX(r,t),r}function AI(t,e,n){const r=TI(e);return r===null?null:eZ(t,r,n)}function tZ(t,e,n,r){const s=TI(e);if(s===null||!LC(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(f=>{const m=t.bucket,g=t.fullPath,y="/b/"+l(m)+"/o/"+l(g),w=IC(y,n,r),_=CI({alt:"media",token:f});return w+_})[0]}function nZ(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class RI{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function PI(t){if(!t)throw MC()}function rZ(t,e){function n(r,s){const a=AI(t,s,e);return PI(a!==null),a}return n}function sZ(t,e){function n(r,s){const a=AI(t,s,e);return PI(a!==null),tZ(a,s,t.host,t._protocol)}return n}function MI(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=yX():s=gX():n.getStatus()===402?s=pX(t.bucket):n.getStatus()===403?s=xX(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function aZ(t){const e=MI(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=mX(t.path)),a.serverResponse=s.serverResponse,a}return n}function iZ(t,e,n){const r=e.fullServerUrl(),s=IC(r,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,u=new RI(s,a,sZ(t,n),l);return u.errorHandler=aZ(e),u}function oZ(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lZ(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=oZ(null,e)),r}function cZ(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let R="";for(let A=0;A<2;A++)R=R+Math.random().toString().slice(2);return R}const d=u();l["Content-Type"]="multipart/related; boundary="+d;const f=lZ(e,r,s),m=nZ(f,n),g="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,y=`\r
--`+d+"--",w=ul.getBlob(g,r,y);if(w===null)throw CX();const _={name:f.fullPath},C=IC(a,t.host,t._protocol),S="POST",N=t.maxUploadRetryTime,k=new RI(C,S,rZ(t,n),N);return k.urlParams=_,k.headers=l,k.body=w.uploadData(),k.errorHandler=MI(e),k}class uZ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=kc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=kc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=kc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,a){if(this.sent_)throw uf("cannot .send() more than once");if(Ci(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dZ extends uZ{initXhr(){this.xhr_.responseType="text"}}function LI(){return new dZ}class Fc{constructor(e,n){this._service=e,n instanceof js?this._location=n:this._location=js.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fc(e,n)}get root(){const e=new js(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kI(this._location.path)}get storage(){return this._service}get parent(){const e=KX(this._location.path);if(e===null)return null;const n=new js(this._location.bucket,e);return new Fc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jX(e)}}function hZ(t,e,n){t._throwIfRoot("uploadBytes");const r=cZ(t.storage,t._location,DI(),new ul(e,!0),n);return t.storage.makeRequestWithTokens(r,LI).then(s=>({metadata:s,ref:t}))}function fZ(t){t._throwIfRoot("getDownloadURL");const e=iZ(t.storage,t._location,DI());return t.storage.makeRequestWithTokens(e,LI).then(n=>{if(n===null)throw SX();return n})}function mZ(t,e){const n=QX(t._location.path,e),r=new js(t._location.bucket,n);return new Fc(t.storage,r)}function pZ(t){return/^[A-Za-z]+:\/\//.test(t)}function gZ(t,e){return new Fc(t,e)}function OI(t,e){if(t instanceof VC){const n=t;if(n._bucket==null)throw EX();const r=new Fc(n,n._bucket);return e!=null?OI(r,e):r}else return e!==void 0?mZ(t,e):t}function yZ(t,e){if(e&&pZ(e)){if(t instanceof VC)return gZ(t,e);throw m_("To use ref(service, url), the first argument must be a Storage instance.")}else return OI(t,e)}function hA(t,e){const n=e?.[_I];return n==null?null:js.makeFromBucketSpec(n,t)}function xZ(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ci(e);s&&(Z0(`https://${t.host}/b`),RE("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:s$(a,t.app.options.projectId))}class VC{constructor(e,n,r,s,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=wI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hX,this._maxUploadRetryTime=fX,this._requests=new Set,s!=null?this._bucket=js.makeFromBucketSpec(s,this._host):this._bucket=hA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=js.makeFromBucketSpec(this._url,e):this._bucket=hA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(as(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fc(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new TX(EI());{const l=UX(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const fA="@firebase/storage",mA="0.14.0";const II="storage";function vZ(t,e,n){return t=Lt(t),hZ(t,e,n)}function bZ(t){return t=Lt(t),fZ(t)}function wZ(t,e){return t=Lt(t),yZ(t,e)}function _Z(t=LE(),e){t=Lt(t);const r=Lm(t,II).getImmediate({identifier:e}),s=n3("storage");return s&&EZ(r,...s),r}function EZ(t,e,n,r={}){xZ(t,e,n,r)}function CZ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new VC(n,r,s,e,Wc)}function SZ(){El(new co(II,CZ,"PUBLIC").setMultipleInstances(!0)),na(fA,mA,""),na(fA,mA,"esm2020")}SZ();const NZ="type.googleapis.com/google.protobuf.Int64Value",jZ="type.googleapis.com/google.protobuf.UInt64Value";function VI(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function r0(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>r0(e));if(typeof t=="function"||typeof t=="object")return VI(t,e=>r0(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Md(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case NZ:case jZ:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Md(e)):typeof t=="function"||typeof t=="object"?VI(t,e=>Md(e)):t}const UC="functions";const pA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ls extends ka{constructor(e,n,r){super(`${UC}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,ls.prototype)}}function TZ(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function s0(t,e){let n=TZ(t),r=n,s;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!pA[l])return new ls("internal","internal");n=pA[l],r=l}const u=a.message;typeof u=="string"&&(r=u),s=a.details,s!==void 0&&(s=Md(s))}}catch{}return n==="ok"?null:new ls(n,r,s)}class kZ{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,as(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s?.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}const p_="us-central1",DZ=/^data: (.*?)(?:\n|$)/;function AZ(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new ls("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class RZ{constructor(e,n,r,s,a=p_,l=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new kZ(e,n,r,s),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(a);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=p_}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function PZ(t,e,n){const r=Ci(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Z0(t.emulatorOrigin+"/backends"),RE("Functions",!0))}function MZ(t,e,n){const r=s=>OZ(t,e,s,{});return r.stream=(s,a)=>VZ(t,e,s,a),r}function UI(t){return t.emulatorOrigin&&Ci(t.emulatorOrigin)?"include":void 0}async function LZ(t,e,n,r,s){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:UI(s)})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function FI(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function OZ(t,e,n,r){const s=t._url(e);return IZ(t,s,n,r)}async function IZ(t,e,n,r){n=r0(n);const s={data:n},a=await FI(t,r),l=r.timeout||7e4,u=AZ(l),d=await Promise.race([LZ(e,s,a,t.fetchImpl,t),u.promise,t.cancelAllRequests]);if(u.cancel(),!d)throw new ls("cancelled","Firebase Functions instance was deleted.");const f=s0(d.status,d.json);if(f)throw f;if(!d.json)throw new ls("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new ls("internal","Response is missing data field.");return{data:Md(m)}}function VZ(t,e,n,r){const s=t._url(e);return UZ(t,s,n,r||{})}async function UZ(t,e,n,r){n=r0(n);const s={data:n},a=await FI(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:r?.signal,credentials:UI(t)})}catch(y){if(y instanceof Error&&y.name==="AbortError"){const _=new ls("cancelled","Request was cancelled.");return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}const w=s0(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let u,d;const f=new Promise((y,w)=>{u=y,d=w});r?.signal?.addEventListener("abort",()=>{const y=new ls("cancelled","Request was cancelled.");d(y)});const m=l.body.getReader(),g=FZ(m,u,d,r?.signal);return{stream:{[Symbol.asyncIterator](){const y=g.getReader();return{async next(){const{value:w,done:_}=await y.read();return{value:w,done:_}},async return(){return await y.cancel(),{done:!0,value:void 0}}}}},data:f}}function FZ(t,e,n,r){const s=(l,u)=>{const d=l.match(DZ);if(!d)return;const f=d[1];try{const m=JSON.parse(f);if("result"in m){e(Md(m.result));return}if("message"in m){u.enqueue(Md(m.message));return}if("error"in m){const g=s0(0,m);u.error(g),n(g);return}}catch(m){if(m instanceof ls){u.error(m),n(m);return}}},a=new TextDecoder;return new ReadableStream({start(l){let u="";return d();async function d(){if(r?.aborted){const f=new ls("cancelled","Request was cancelled");return l.error(f),n(f),Promise.resolve()}try{const{value:f,done:m}=await t.read();if(m){u.trim()&&s(u.trim(),l),l.close();return}if(r?.aborted){const y=new ls("cancelled","Request was cancelled");l.error(y),n(y),await t.cancel();return}u+=a.decode(f,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const y of g)y.trim()&&s(y.trim(),l);return d()}catch(f){const m=f instanceof ls?f:s0(0,null);l.error(m),n(m)}}},cancel(){return t.cancel()}})}const gA="@firebase/functions",yA="0.13.1";const BZ="auth-internal",zZ="app-check-internal",HZ="messaging-internal";function $Z(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(BZ),l=n.getProvider(HZ),u=n.getProvider(zZ);return new RZ(s,a,l,u,r)};El(new co(UC,e,"PUBLIC").setMultipleInstances(!0)),na(gA,yA,t),na(gA,yA,"esm2020")}function qZ(t=LE(),e=p_){const r=Lm(Lt(t),UC).getImmediate({identifier:e}),s=n3("functions");return s&&YZ(r,...s),r}function YZ(t,e,n){PZ(Lt(t),e,n)}function Ex(t,e,n){return MZ(Lt(t),e)}$Z();let WZ=class{config;constructor(){this.config={isDevelopment:!1,enableProduction:!1}}log(...e){this.config.isDevelopment&&console.log("[INFO]",...e)}warn(...e){this.config.isDevelopment&&console.warn("[WARN]",...e)}error(...e){(this.config.isDevelopment||this.config.enableProduction)&&console.error("[ERROR]",...e)}debug(...e){this.config.isDevelopment&&console.debug("[DEBUG]",...e)}group(e,n=!1){this.config.isDevelopment&&(n?console.groupCollapsed(`[GROUP] ${e}`):console.group(`[GROUP] ${e}`))}groupEnd(){this.config.isDevelopment&&console.groupEnd()}table(e){this.config.isDevelopment&&console.table(e)}time(e){this.config.isDevelopment&&console.time(e)}timeEnd(e){this.config.isDevelopment&&console.timeEnd(e)}success(e,...n){this.config.isDevelopment&&console.log("",e,...n)}info(e,...n){this.config.isDevelopment&&console.log("",e,...n)}};const De=new WZ,GZ="us-central1",Wf={width:1200,height:800,maxSizeKB:1e3,format:"image/jpeg",quality:.9},BI=`Recomendado: ${Wf.width}x${Wf.height} px, formato JPG o PNG, mx ~${Math.round(Wf.maxSizeKB/1e3)}MB.`,xA=300,a0="PRO",ud={products:{BASIC:1/0,STANDARD:1/0,PRO:1/0,APPROVED25:1/0},services:{BASIC:1/0,STANDARD:1/0,PRO:1/0,APPROVED25:1/0},serviceSchedules:{BASIC:1/0,STANDARD:1/0,PRO:1/0,APPROVED25:1/0},professionals:{BASIC:1/0,STANDARD:1/0,PRO:1/0,APPROVED25:1/0}},g_={BASIC:"Basic",STANDARD:"Standard",PRO:"Pro",APPROVED25:"Approved 25"},KZ=(t,e)=>{const n=ud[t];return n[e??a0]??n[a0]},QZ=t=>g_[t??a0]??g_[a0],wd={BASIC:{name:"Basic",description:"Ideal para emprendedores individuales",price:"Gratis",features:["1 profesional","Hasta 3 servicios o productos","5 horarios de servicio","Pgina pblica personalizada","Integracin con WhatsApp"],limits:{professionals:1,services:3,products:3,serviceSchedules:5}},STANDARD:{name:"Standard",description:"Para pequeos equipos en crecimiento",price:"$9.990/mes",features:["Hasta 5 profesionales","Hasta 10 servicios","Hasta 15 productos","15 horarios de servicio","Todas las funciones de Basic","Soporte prioritario"],limits:{professionals:5,services:10,products:15,serviceSchedules:15},recommended:!0},PRO:{name:"Pro",description:"Sin lmites para empresas establecidas",price:"$29.990/mes",features:["Hasta 60 profesionales","Servicios ilimitados","Productos ilimitados","Horarios ilimitados","Todas las funciones de Standard","Soporte premium 24/7","Anlisis avanzados"],limits:{professionals:60,services:1/0,products:1/0,serviceSchedules:1/0}},APPROVED25:{name:"Approved 25",description:"Plan especial para usuarios aprobados",price:"Personalizado",features:["Hasta 10 profesionales","Hasta 25 servicios","Hasta 25 productos","Horarios ilimitados","Todas las funciones incluidas"],limits:{professionals:10,services:25,products:25,serviceSchedules:1/0}}},XZ={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENV:"production",VITE_APP_NAME:"PYM-ERP",VITE_APP_VERSION:"1.0.0",VITE_ENABLE_ANALYTICS:"true",VITE_FIREBASE_API_KEY:"AIza.REDACTED",VITE_FIREBASE_APP_ID:"1:345943895840:web:f180f99f5f87c088ee7145",VITE_FIREBASE_AUTH_DOMAIN:"agendaemprende-8ac77.firebaseapp.com",VITE_FIREBASE_FUNCTIONS_REGION:"us-central1",VITE_FIREBASE_MESSAGING_SENDER_ID:"345943895840",VITE_FIREBASE_PROJECT_ID:"agendaemprende-8ac77",VITE_FIREBASE_STORAGE_BUCKET:"agendaemprende-8ac77.firebasestorage.app",VITE_GA_DEBUG:"false",VITE_GA_MEASUREMENT_ID:"G-58V5RL01MF",VITE_GOOGLE_MAPS_API_KEY:"AIza.REDACTED",VITE_SENTRY_DSN:""},ZZ=XZ,JZ=t=>t?.trim()||"",yy=[],Mr=(t,{required:e=!0,fallback:n=""}={})=>{const r=JZ(ZZ[t]);return!r&&e&&yy.push(t),r||n},eJ={apiKey:Mr("VITE_FIREBASE_API_KEY"),authDomain:Mr("VITE_FIREBASE_AUTH_DOMAIN"),projectId:Mr("VITE_FIREBASE_PROJECT_ID"),storageBucket:Mr("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:Mr("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:Mr("VITE_FIREBASE_APP_ID"),functionsRegion:Mr("VITE_FIREBASE_FUNCTIONS_REGION",{required:!1,fallback:GZ})};if(yy.length>0){const t=`Variables de entorno faltantes: ${yy.join(", ")}`;throw De.error(" Variables de entorno faltantes:",yy),De.error("Por favor, verifica que el archivo .env existe y contiene todas las variables necesarias."),new Error(t)}const dn={app:{version:Mr("VITE_APP_VERSION",{required:!1,fallback:"1.0.0"}),name:Mr("VITE_APP_NAME",{required:!1,fallback:"AgendaWeb"}),environment:Mr("VITE_APP_ENV",{required:!1,fallback:"development"})},firebase:eJ,googleMapsApiKey:Mr("VITE_GOOGLE_MAPS_API_KEY",{required:!1,fallback:""}),analytics:{measurementId:Mr("VITE_GA_MEASUREMENT_ID",{required:!1,fallback:""}),debug:Mr("VITE_GA_DEBUG",{required:!1,fallback:"false"})==="true",enabled:Mr("VITE_ENABLE_ANALYTICS",{required:!1,fallback:"true"})==="true"},sentry:{dsn:Mr("VITE_SENTRY_DSN",{required:!1,fallback:""})},isDevelopment:!1,isProduction:!0,e2eUser:Mr("VITE_E2E_USER",{required:!1,fallback:""})},tJ={apiKey:dn.firebase.apiKey,authDomain:dn.firebase.authDomain,projectId:dn.firebase.projectId,storageBucket:dn.firebase.storageBucket,messagingSenderId:dn.firebase.messagingSenderId,appId:dn.firebase.appId};De.success("Firebase configurado correctamente");const Cx=o3(tJ),Yr=eG(Cx),Ie=JQ(Cx,{experimentalForceLongPolling:!0}),nJ=_Z(Cx),Sx=qZ(Cx,dn.firebase.functionsRegion);var Cs=(t=>(t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE",t.FORCE_PASSWORD_CHANGE="FORCE_PASSWORD_CHANGE",t))(Cs||{}),It=(t=>(t.SUPERADMIN="SUPERADMIN",t.ENTREPRENEUR="ENTREPRENEUR",t))(It||{}),zI=(t=>(t.PENDING="PENDING",t.APPROVED="APPROVED",t.REJECTED="REJECTED",t))(zI||{}),un=(t=>(t.SERVICES="SERVICES",t.PRODUCTS="PRODUCTS",t))(un||{}),_s=(t=>(t.PAGE_VIEW="PAGE_VIEW",t.WHATSAPP_CLICK="WHATSAPP_CLICK",t.SERVICE_BOOK_CLICK="SERVICE_BOOK_CLICK",t.PRODUCT_ORDER_CLICK="PRODUCT_ORDER_CLICK",t))(_s||{}),Le=(t=>(t.REQUESTED="REQUESTED",t.CONFIRMED="CONFIRMED",t.CANCELLED="CANCELLED",t.COMPLETED="COMPLETED",t.NO_SHOW="NO_SHOW",t))(Le||{});const HI=async t=>{const e=sn(Ie,"users",t),n=await Qc(e);return n.exists()?{id:n.id,...n.data()}:null},i0=async t=>{const e=fn(ct(Ie,"users"),Xe("email","==",t),wx(1)),n=await mn(e);if(!n.empty){const r=n.docs[0];return{id:r.id,...r.data()}}return null},o0=async(t,e)=>{const n=e||t.email;return await dX(sn(Ie,"users",n),{...t,created_at:Ke.now()}),n},Nx=async(t,e)=>{const n=sn(Ie,"users",t);await Aa(n,e)},rJ=async()=>(await mn(ct(Ie,"users"))).docs.map(e=>{const n=e.data();return{id:e.id,...n,created_at:n.created_at?.toDate?.()||new Date}}),sJ=async t=>(await As(ct(Ie,"accessRequests"),{...t,status:zI.PENDING,created_at:Ke.now()})).id,aJ=async(t,e)=>{const n=sn(Ie,"accessRequests",t),r={...e};e.processed_at&&(r.processed_at=Ke.fromDate(e.processed_at)),await Aa(n,r)},iJ=async t=>{const e=fn(ct(Ie,"accessRequests"),Xe("email","==",t),wx(1)),n=await mn(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,created_at:s.created_at?.toDate?.()||new Date,processed_at:s.processed_at?.toDate?.()}}return null},Vr=async t=>{const e=sn(Ie,"companies",t),n=await Qc(e);if(n.exists()){const r=n.data();return{id:n.id,...r,created_at:r.created_at?.toDate()||new Date,updated_at:r.updated_at?.toDate()||new Date}}return null},oJ=async()=>(await mn(ct(Ie,"companies"))).docs.map(e=>{const n=e.data();return{id:e.id,...n,created_at:n.created_at?.toDate?.()||new Date,updated_at:n.updated_at?.toDate?.()||new Date}}),lJ=async t=>{const e=fn(ct(Ie,"companies"),Xe("slug","==",t),wx(1)),n=await mn(e);if(!n.empty){const r=n.docs[0],s=r.data();return{id:r.id,...s,created_at:s.created_at?.toDate()||new Date,updated_at:s.updated_at?.toDate()||new Date}}return null},cJ=async t=>(await As(ct(Ie,"companies"),{...t,business_type:t.business_type||"SERVICES",created_at:Ke.now(),updated_at:Ke.now()})).id,Xc=async(t,e)=>{const n=sn(Ie,"companies",t),r={...e,updated_at:Ke.now()};await Aa(n,r)},jx=async(t,e)=>{const n=fn(ct(Ie,"companyAppearances"),Xe("company_id","==",t),Xe("context","==",e),wx(1)),r=await mn(n);if(!r.empty){const s=r.docs[0];return{id:s.id,...s.data()}}return null},$I=async(t,e,n)=>{const r=await jx(t,e);return r?(await Aa(sn(Ie,"companyAppearances",r.id),n),r.id):(await As(ct(Ie,"companyAppearances"),{company_id:t,context:e,...n})).id},Tx=async t=>{const e=fn(ct(Ie,"scheduleSlots"),Xe("company_id","==",t));return(await mn(e)).docs.map(r=>({id:r.id,...r.data()}))},uJ=async t=>(await As(ct(Ie,"scheduleSlots"),t)).id,dJ=async(t,e)=>{const n=sn(Ie,"scheduleSlots",t);await Aa(n,e)},hJ=async t=>{await eh(sn(Ie,"scheduleSlots",t))},th=async t=>{const e=fn(ct(Ie,"services"),Xe("company_id","==",t));return(await mn(e)).docs.map(r=>({id:r.id,...r.data(),professional_ids:r.data()?.professional_ids||[]}))},Ym=async t=>{const e=sn(Ie,"services",t),n=await Qc(e);if(n.exists()){const r=n.data();return{id:n.id,...r,professional_ids:r?.professional_ids||[]}}return null},fJ=async t=>(await As(ct(Ie,"services"),t)).id,qI=async(t,e)=>{const n=sn(Ie,"services",t);await Aa(n,e)},mJ=async t=>{await eh(sn(Ie,"services",t))},kx=async t=>{const e=fn(ct(Ie,"serviceSchedules"),Xe("service_id","==",t));return(await mn(e)).docs.map(r=>({id:r.id,...r.data()}))},pJ=async(t,e)=>{const n=await kx(t);for(const r of n)await eh(sn(Ie,"serviceSchedules",r.id));for(const r of e)await As(ct(Ie,"serviceSchedules"),{service_id:t,schedule_slot_id:r})},FC=async t=>{const e=fn(ct(Ie,"products"),Xe("company_id","==",t));return(await mn(e)).docs.map(r=>({id:r.id,...r.data()}))},gJ=async t=>{const e=sn(Ie,"products",t),n=await Qc(e);return n.exists()?{id:n.id,...n.data()}:null},yJ=async t=>(await As(ct(Ie,"products"),t)).id,YI=async(t,e)=>{const n=sn(Ie,"products",t);await Aa(n,e)},xJ=async t=>{await eh(sn(Ie,"products",t))},vJ=async t=>{const e=fn(ct(Ie,"appointmentRequests"),Xe("company_id","==",t));return(await mn(e)).docs.map(r=>({id:r.id,...r.data(),created_at:r.data().created_at?.toDate()||new Date})).sort((r,s)=>(s.created_at?.getTime?.()||0)-(r.created_at?.getTime?.()||0))},bJ=async t=>(await As(ct(Ie,"productOrderRequests"),{...t,created_at:Ke.now()})).id,wJ=async t=>{const e=fn(ct(Ie,"productOrderRequests"),Xe("company_id","==",t));return(await mn(e)).docs.map(r=>({id:r.id,...r.data(),created_at:r.data().created_at?.toDate()||new Date})).sort((r,s)=>(s.created_at?.getTime?.()||0)-(r.created_at?.getTime?.()||0))},Vg=async(t,e)=>(await As(ct(Ie,"publicPageEvents"),{company_id:t,event_type:e,created_at:Ke.now()})).id,_J=async t=>{const e=fn(ct(Ie,"publicPageEvents"),Xe("company_id","==",t));return(await mn(e)).docs.map(r=>({id:r.id,...r.data(),created_at:r.data().created_at?.toDate()||new Date})).sort((r,s)=>s.created_at.getTime()-r.created_at.getTime())},Je=t=>typeof t=="string",df=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},vA=t=>t==null?"":""+t,EJ=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},CJ=/###/g,bA=t=>t&&t.indexOf("###")>-1?t.replace(CJ,"."):t,wA=t=>!t||Je(t),Gf=(t,e,n)=>{const r=Je(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(wA(t))return{};const a=bA(r[s]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++s}return wA(t)?{}:{obj:t,k:bA(r[s])}},_A=(t,e,n)=>{const{obj:r,k:s}=Gf(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let a=e[e.length-1],l=e.slice(0,e.length-1),u=Gf(t,l,Object);for(;u.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),u=Gf(t,l,Object),u?.obj&&typeof u.obj[`${u.k}.${a}`]<"u"&&(u.obj=void 0);u.obj[`${u.k}.${a}`]=n},SJ=(t,e,n,r)=>{const{obj:s,k:a}=Gf(t,e,Object);s[a]=s[a]||[],s[a].push(n)},l0=(t,e)=>{const{obj:n,k:r}=Gf(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},NJ=(t,e,n)=>{const r=l0(t,n);return r!==void 0?r:l0(e,n)},WI=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?Je(t[r])||t[r]instanceof String||Je(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):WI(t[r],e[r],n):t[r]=e[r]);return t},$u=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var jJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const TJ=t=>Je(t)?t.replace(/[&<>"'\/]/g,e=>jJ[e]):t;class kJ{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const DJ=[" ",",","?","!",";"],AJ=new kJ(20),RJ=(t,e,n)=>{e=e||"",n=n||"";const r=DJ.filter(l=>e.indexOf(l)<0&&n.indexOf(l)<0);if(r.length===0)return!0;const s=AJ.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!s.test(t);if(!a){const l=t.indexOf(n);l>0&&!s.test(t.substring(0,l))&&(a=!0)}return a},y_=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let s=t;for(let a=0;a<r.length;){if(!s||typeof s!="object")return;let l,u="";for(let d=a;d<r.length;++d)if(d!==a&&(u+=n),u+=r[d],l=s[u],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<r.length-1)continue;a+=d-a+1;break}s=l}return s},vm=t=>t?.replace("_","-"),PJ={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class c0{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||PJ,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(Je(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new c0(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new c0(this.logger,e)}}var ai=new c0;class Dx{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([s,a])=>{for(let l=0;l<a;l++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,a])=>{for(let l=0;l<a;l++)s.apply(s,[e,...n])})}}class EA extends Dx{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,s={}){const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,l=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let u;e.indexOf(".")>-1?u=e.split("."):(u=[e,n],r&&(Array.isArray(r)?u.push(...r):Je(r)&&a?u.push(...r.split(a)):u.push(r)));const d=l0(this.data,u);return!d&&!n&&!r&&e.indexOf(".")>-1&&(e=u[0],n=u[1],r=u.slice(2).join(".")),d||!l||!Je(r)?d:y_(this.data?.[e]?.[n],r,a)}addResource(e,n,r,s,a={silent:!1}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let u=[e,n];r&&(u=u.concat(l?r.split(l):r)),e.indexOf(".")>-1&&(u=e.split("."),s=n,n=u[1]),this.addNamespaces(n),_A(this.data,u,s),a.silent||this.emit("added",e,n,r,s)}addResources(e,n,r,s={silent:!1}){for(const a in r)(Je(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,a,l={silent:!1,skipCopy:!1}){let u=[e,n];e.indexOf(".")>-1&&(u=e.split("."),s=r,r=n,n=u[1]),this.addNamespaces(n);let d=l0(this.data,u)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?WI(d,r,a):d={...d,...r},_A(this.data,u,d),l.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var GI={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(a=>{e=this.processors[a]?.process(e,n,r,s)??e}),e}};const KI=Symbol("i18next/PATH_KEY");function MJ(){const t=[],e=Object.create(null);let n;return e.get=(r,s)=>(n?.revoke?.(),s===KI?t:(t.push(s),n=Proxy.revocable(r,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function x_(t,e){const{[KI]:n}=t(MJ());return n.join(e?.keySeparator??".")}const CA={},Pw=t=>!Je(t)&&typeof t!="boolean"&&typeof t!="number";class u0 extends Dx{constructor(e,n={}){super(),EJ(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ai.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const s=this.resolve(e,r);if(s?.res===void 0)return!1;const a=Pw(s.res);return!(r.returnObjects===!1&&a)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const l=r&&e.indexOf(r)>-1,u=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!RJ(e,r,s);if(l&&!u){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Je(a)?[a]:a};const f=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(f[0])>-1)&&(a=f.shift()),e=f.join(s)}return{key:e,namespaces:Je(a)?[a]:a}}translate(e,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";typeof e=="function"&&(e=x_(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const a=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(e[e.length-1],s),f=d[d.length-1];let m=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const g=s.lng||this.language,y=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(g?.toLowerCase()==="cimode")return y?a?{res:`${f}${m}${u}`,usedKey:u,exactUsedKey:u,usedLng:g,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:`${f}${m}${u}`:a?{res:u,usedKey:u,exactUsedKey:u,usedLng:g,usedNS:f,usedParams:this.getUsedParamsDetails(s)}:u;const w=this.resolve(e,s);let _=w?.res;const C=w?.usedKey||u,S=w?.exactUsedKey||u,N=["[object Number]","[object Function]","[object RegExp]"],k=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,R=!this.i18nFormat||this.i18nFormat.handleAsObject,A=s.count!==void 0&&!Je(s.count),L=u0.hasDefaultValue(s),F=A?this.pluralResolver.getSuffix(g,s.count,s):"",P=s.ordinal&&A?this.pluralResolver.getSuffix(g,s.count,{ordinal:!1}):"",O=A&&!s.ordinal&&s.count===0,T=O&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${F}`]||s[`defaultValue${P}`]||s.defaultValue;let I=_;R&&!_&&L&&(I=T);const V=Pw(I),$=Object.prototype.toString.apply(I);if(R&&I&&V&&N.indexOf($)<0&&!(Je(k)&&Array.isArray(I))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const U=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,I,{...s,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return a?(w.res=U,w.usedParams=this.getUsedParamsDetails(s),w):U}if(l){const U=Array.isArray(I),G=U?[]:{},W=U?S:C;for(const z in I)if(Object.prototype.hasOwnProperty.call(I,z)){const q=`${W}${l}${z}`;L&&!_?G[z]=this.translate(q,{...s,defaultValue:Pw(T)?T[z]:void 0,joinArrays:!1,ns:d}):G[z]=this.translate(q,{...s,joinArrays:!1,ns:d}),G[z]===q&&(G[z]=I[z])}_=G}}else if(R&&Je(k)&&Array.isArray(_))_=_.join(k),_&&(_=this.extendTranslation(_,e,s,r));else{let U=!1,G=!1;!this.isValidLookup(_)&&L&&(U=!0,_=T),this.isValidLookup(_)||(G=!0,_=u);const z=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:_,q=L&&T!==_&&this.options.updateMissing;if(G||U||q){if(this.logger.log(q?"updateKey":"missingKey",g,f,u,q?T:_),l){const H=this.resolve(u,{...s,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const X=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&X&&X[0])for(let H=0;H<X.length;H++)K.push(X[H]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(s.lng||this.language):K.push(s.lng||this.language);const se=(H,Z,te)=>{const J=L&&te!==_?te:z;this.options.missingKeyHandler?this.options.missingKeyHandler(H,f,Z,J,q,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(H,f,Z,J,q,s),this.emit("missingKey",H,f,Z,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&A?K.forEach(H=>{const Z=this.pluralResolver.getSuffixes(H,s);O&&s[`defaultValue${this.options.pluralSeparator}zero`]&&Z.indexOf(`${this.options.pluralSeparator}zero`)<0&&Z.push(`${this.options.pluralSeparator}zero`),Z.forEach(te=>{se([H],u+te,s[`defaultValue${te}`]||T)})}):se(K,u,T))}_=this.extendTranslation(_,e,s,w,r),G&&_===u&&this.options.appendNamespaceToMissingKey&&(_=`${f}${m}${u}`),(G||U)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${f}${m}${u}`:u,U?_:void 0,s))}return a?(w.res=_,w.usedParams=this.getUsedParamsDetails(s),w):_}extendTranslation(e,n,r,s,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=Je(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const g=e.match(this.interpolator.nestingRegexp);f=g&&g.length}let m=r.replace&&!Je(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),e=this.interpolator.interpolate(e,m,r.lng||this.language||s.usedLng,r),d){const g=e.match(this.interpolator.nestingRegexp),y=g&&g.length;f<y&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>a?.[0]===g[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):this.translate(...g,n),r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,u=Je(l)?[l]:l;return e!=null&&u?.length&&r.applyPostProcessor!==!1&&(e=GI.handle(u,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,s,a,l,u;return Je(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(r))return;const f=this.extractFromKey(d,n),m=f.key;s=m;let g=f.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const y=n.count!==void 0&&!Je(n.count),w=y&&!n.ordinal&&n.count===0,_=n.context!==void 0&&(Je(n.context)||typeof n.context=="number")&&n.context!=="",C=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);g.forEach(S=>{this.isValidLookup(r)||(u=S,!CA[`${C[0]}-${S}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(u)&&(CA[`${C[0]}-${S}`]=!0,this.logger.warn(`key "${s}" for languages "${C.join(", ")}" won't get resolved as namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),C.forEach(N=>{if(this.isValidLookup(r))return;l=N;const k=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(k,m,N,S,n);else{let A;y&&(A=this.pluralResolver.getSuffix(N,n.count,n));const L=`${this.options.pluralSeparator}zero`,F=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(n.ordinal&&A.indexOf(F)===0&&k.push(m+A.replace(F,this.options.pluralSeparator)),k.push(m+A),w&&k.push(m+L)),_){const P=`${m}${this.options.contextSeparator||"_"}${n.context}`;k.push(P),y&&(n.ordinal&&A.indexOf(F)===0&&k.push(P+A.replace(F,this.options.pluralSeparator)),k.push(P+A),w&&k.push(P+L))}}let R;for(;R=k.pop();)this.isValidLookup(r)||(a=R,r=this.getResource(N,S,R,n))}))})}),{res:r,usedKey:s,exactUsedKey:a,usedLng:l,usedNS:u}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!Je(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const a of n)delete s[a]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class SA{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ai.create("languageUtils")}getScriptPartFromCode(e){if(e=vm(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=vm(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(Je(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),Je(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),s=[],a=l=>{l&&(this.isSupportedCode(l)?s.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Je(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Je(e)&&a(this.formatLanguageCode(e)),r.forEach(l=>{s.indexOf(l)<0&&a(this.formatLanguageCode(l))}),s}}const NA={zero:0,one:1,two:2,few:3,many:4,other:5},jA={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class LJ{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ai.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=vm(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:s});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),jA;if(!e.match(/-|_/))return jA;const d=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(d,n)}return this.pluralRulesCache[a]=l,l}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,a)=>NA[s]-NA[a]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(e,n,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const TA=(t,e,n,r=".",s=!0)=>{let a=NJ(t,e,n);return!a&&s&&Je(n)&&(a=y_(t,n,r),a===void 0&&(a=y_(e,n,r))),a},Mw=t=>t.replace(/\$/g,"$$$$");class kA{constructor(e={}){this.logger=ai.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:a,prefixEscaped:l,suffix:u,suffixEscaped:d,formatSeparator:f,unescapeSuffix:m,unescapePrefix:g,nestingPrefix:y,nestingPrefixEscaped:w,nestingSuffix:_,nestingSuffixEscaped:C,nestingOptionsSeparator:S,maxReplaces:N,alwaysFormat:k}=e.interpolation;this.escape=n!==void 0?n:TJ,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=a?$u(a):l||"{{",this.suffix=u?$u(u):d||"}}",this.formatSeparator=f||",",this.unescapePrefix=m?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=y?$u(y):w||$u("$t("),this.nestingSuffix=_?$u(_):C||$u(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=N||1e3,this.alwaysFormat=k!==void 0?k:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let a,l,u;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const N=TA(n,d,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(N,void 0,r,{...s,...n,interpolationkey:w}):N}const _=w.split(this.formatSeparator),C=_.shift().trim(),S=_.join(this.formatSeparator).trim();return this.format(TA(n,d,C,this.options.keySeparator,this.options.ignoreJSONStructure),S,r,{...s,...n,interpolationkey:C})};this.resetRegExp();const m=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,g=s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>Mw(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?Mw(this.escape(w)):Mw(w)}].forEach(w=>{for(u=0;a=w.regex.exec(e);){const _=a[1].trim();if(l=f(_),l===void 0)if(typeof m=="function"){const S=m(e,a,s);l=Je(S)?S:""}else if(s&&Object.prototype.hasOwnProperty.call(s,_))l="";else if(g){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${e}`),l="";else!Je(l)&&!this.useRawValueToEscape&&(l=vA(l));const C=w.safeValue(l);if(e=e.replace(a[0],C),g?(w.regex.lastIndex+=l.length,w.regex.lastIndex-=a[0].length):w.regex.lastIndex=0,u++,u>=this.maxReplaces)break}}),e}nest(e,n,r={}){let s,a,l;const u=(d,f)=>{const m=this.nestingOptionsSeparator;if(d.indexOf(m)<0)return d;const g=d.split(new RegExp(`${m}[ ]*{`));let y=`{${g[1]}`;d=g[0],y=this.interpolate(y,l);const w=y.match(/'/g),_=y.match(/"/g);((w?.length??0)%2===0&&!_||_.length%2!==0)&&(y=y.replace(/'/g,'"'));try{l=JSON.parse(y),f&&(l={...f,...l})}catch(C){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,C),`${d}${m}${y}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;s=this.nestingRegexp.exec(e);){let d=[];l={...r},l=l.replace&&!Je(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const f=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(f!==-1&&(d=s[1].slice(f).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),s[1]=s[1].slice(0,f)),a=n(u.call(this,s[1].trim(),l),l),a&&s[0]===e&&!Je(a))return a;Je(a)||(a=vA(a)),a||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),a=""),d.length&&(a=d.reduce((m,g)=>this.format(m,g,r.lng,{...r,interpolationkey:s[1].trim()}),a.trim())),e=e.replace(s[0],a),this.regexp.lastIndex=0}return e}}const OJ=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(l=>{if(l){const[u,...d]=l.split(":"),f=d.join(":").trim().replace(/^'+|'+$/g,""),m=u.trim();n[m]||(n[m]=f),f==="false"&&(n[m]=!1),f==="true"&&(n[m]=!0),isNaN(f)||(n[m]=parseInt(f,10))}})}return{formatName:e,formatOptions:n}},DA=t=>{const e={};return(n,r,s)=>{let a=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(a={...a,[s.interpolationkey]:void 0});const l=r+JSON.stringify(a);let u=e[l];return u||(u=t(vm(r),s),e[l]=u),u(n)}},IJ=t=>(e,n,r)=>t(vm(n),r)(e);class VJ{constructor(e={}){this.logger=ai.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?DA:IJ;this.formats={number:r((s,a)=>{const l=new Intl.NumberFormat(s,{...a});return u=>l.format(u)}),currency:r((s,a)=>{const l=new Intl.NumberFormat(s,{...a,style:"currency"});return u=>l.format(u)}),datetime:r((s,a)=>{const l=new Intl.DateTimeFormat(s,{...a});return u=>l.format(u)}),relativetime:r((s,a)=>{const l=new Intl.RelativeTimeFormat(s,{...a});return u=>l.format(u,a.range||"day")}),list:r((s,a)=>{const l=new Intl.ListFormat(s,{...a});return u=>l.format(u)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=DA(n)}format(e,n,r,s={}){const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(u=>u.indexOf(")")>-1)){const u=a.findIndex(d=>d.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,u)].join(this.formatSeparator)}return a.reduce((u,d)=>{const{formatName:f,formatOptions:m}=OJ(d);if(this.formats[f]){let g=u;try{const y=s?.formatParams?.[s.interpolationkey]||{},w=y.locale||y.lng||s.locale||s.lng||r;g=this.formats[f](u,w,{...m,...s,...y})}catch(y){this.logger.warn(y)}return g}else this.logger.warn(`there was no format function for ${f}`);return u},e)}}const UJ=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class FJ extends Dx{constructor(e,n,r,s={}){super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=ai.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,s.backend,s)}queueLoad(e,n,r,s){const a={},l={},u={},d={};return e.forEach(f=>{let m=!0;n.forEach(g=>{const y=`${f}|${g}`;!r.reload&&this.store.hasResourceBundle(f,g)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?l[y]===void 0&&(l[y]=!0):(this.state[y]=1,m=!1,l[y]===void 0&&(l[y]=!0),a[y]===void 0&&(a[y]=!0),d[g]===void 0&&(d[g]=!0)))}),m||(u[f]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(u),toLoadNamespaces:Object.keys(d)}}loaded(e,n,r){const s=e.split("|"),a=s[0],l=s[1];n&&this.emit("failedLoading",a,l,n),!n&&r&&this.store.addResourceBundle(a,l,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const u={};this.queue.forEach(d=>{SJ(d.loaded,[a],l),UJ(d,e),n&&d.errors.push(n),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(f=>{u[f]||(u[f]={});const m=d.loaded[f];m.length&&m.forEach(g=>{u[f][g]===void 0&&(u[f][g]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(d=>!d.done)}read(e,n,r,s=0,a=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:a,callback:l});return}this.readingCalls++;const u=(f,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(f&&m&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,a*2,l)},a);return}l(f,m)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const f=d(e,n);f&&typeof f.then=="function"?f.then(m=>u(null,m)).catch(u):u(null,f)}catch(f){u(f)}return}return d(e,n,u)}prepareLoading(e,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Je(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Je(n)&&(n=[n]);const a=this.queueLoad(e,n,r,s);if(!a.toLoad.length)return a.pending.length||s(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),s=r[0],a=r[1];this.read(s,a,"read",void 0,void 0,(l,u)=>{l&&this.logger.warn(`${n}loading namespace ${a} for language ${s} failed`,l),!l&&u&&this.logger.log(`${n}loaded namespace ${a} for language ${s}`,u),this.loaded(e,l,u)})}saveMissing(e,n,r,s,a,l={},u=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const d={...l,isUpdate:a},f=this.backend.create.bind(this.backend);if(f.length<6)try{let m;f.length===5?m=f(e,n,r,s,d):m=f(e,n,r,s),m&&typeof m.then=="function"?m.then(g=>u(null,g)).catch(u):u(null,m)}catch(m){u(m)}else f(e,n,r,s,u,d)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const AA=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Je(t[1])&&(e.defaultValue=t[1]),Je(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),RA=t=>(Je(t.ns)&&(t.ns=[t.ns]),Je(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Je(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),Ug=()=>{},BJ=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Kf extends Dx{constructor(e={},n){if(super(),this.options=RA(e),this.services={},this.logger=ai,this.modules={external:[]},BJ(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(Je(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=AA();this.options={...r,...this.options,...RA(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?ai.init(s(this.modules.logger),this.options):ai.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:f=VJ;const m=new SA(this.options);this.store=new EA(this.options.resources,this.options);const g=this.services;g.logger=ai,g.resourceStore=this.store,g.languageUtils=m,g.pluralResolver=new LJ(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),f&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(g.formatter=s(f),g.formatter.init&&g.formatter.init(g,this.options),this.options.interpolation.format=g.formatter.format.bind(g.formatter)),g.interpolator=new kA(this.options),g.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},g.backendConnector=new FJ(s(this.modules.backend),g.resourceStore,g,this.options),g.backendConnector.on("*",(w,..._)=>{this.emit(w,..._)}),this.modules.languageDetector&&(g.languageDetector=s(this.modules.languageDetector),g.languageDetector.init&&g.languageDetector.init(g,this.options.detection,this.options)),this.modules.i18nFormat&&(g.i18nFormat=s(this.modules.i18nFormat),g.i18nFormat.init&&g.i18nFormat.init(this)),this.translator=new u0(this.services,this.options),this.translator.on("*",(w,..._)=>{this.emit(w,..._)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Ug),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=(...m)=>this.store[f](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=(...m)=>(this.store[f](...m),this)});const u=df(),d=()=>{const f=(m,g)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),u.resolve(g),n(m,g)};if(this.languages&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),u}loadResources(e,n=Ug){let r=n;const s=Je(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(f=>{f!=="cimode"&&a.indexOf(f)<0&&a.push(f)})};s?l(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),this.options.preload?.forEach?.(u=>l(u)),this.services.backendConnector.load(a,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(e,n,r){const s=df();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Ug),this.services.backendConnector.reload(e,n,a=>{s.resolve(),r(a)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&GI.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=df();this.emit("languageChanging",e);const s=u=>{this.language=u,this.languages=this.services.languageUtils.toResolveHierarchy(u),this.resolvedLanguage=void 0,this.setResolvedLanguage(u)},a=(u,d)=>{d?this.isLanguageChangingTo===e&&(s(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve((...f)=>this.t(...f)),n&&n(u,(...f)=>this.t(...f))},l=u=>{!e&&!u&&this.services.languageDetector&&(u=[]);const d=Je(u)?u:u&&u[0],f=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Je(u)?[u]:u);f&&(this.language||s(f),this.translator.language||this.translator.changeLanguage(f),this.services.languageDetector?.cacheUserLanguage?.(f)),this.loadResources(f,m=>{a(m,f)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,n,r){const s=(a,l,...u)=>{let d;typeof l!="object"?d=this.options.overloadTranslationOptionHandler([a,l].concat(u)):d={...l},d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||s.keyPrefix);const f=this.options.keySeparator||".";let m;return d.keyPrefix&&Array.isArray(a)?m=a.map(g=>(typeof g=="function"&&(g=x_(g,{...this.options,...l})),`${d.keyPrefix}${f}${g}`)):(typeof a=="function"&&(a=x_(a,{...this.options,...l})),m=d.keyPrefix?`${d.keyPrefix}${f}${a}`:a),this.t(m,d)};return Je(e)?s.lng=e:s.lngs=e,s.ns=n,s.keyPrefix=r,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(u,d)=>{const f=this.services.backendConnector.state[`${u}|${d}`];return f===-1||f===0||f===2};if(n.precheck){const u=n.precheck(this,l);if(u!==void 0)return u}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,e)&&(!s||l(a,e)))}loadNamespaces(e,n){const r=df();return this.options.ns?(Je(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=df();Je(e)&&(e=[e]);const s=this.options.preload||[],a=e.filter(l=>s.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=s.concat(a),this.loadResources(l=>{r.resolve(),n&&n(l)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const s=new Intl.Locale(e);if(s&&s.getTextInfo){const a=s.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new SA(AA());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const r=new Kf(e,n);return r.createInstance=Kf.createInstance,r}cloneInstance(e={},n=Ug){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},a=new Kf(s);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(u=>{a[u]=this[u]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const u=Object.keys(this.store.data).reduce((d,f)=>(d[f]={...this.store.data[f]},d[f]=Object.keys(d[f]).reduce((m,g)=>(m[g]={...d[f][g]},m),d[f]),d),{});a.store=new EA(u,s),a.services.resourceStore=a.store}return e.interpolation&&(a.services.interpolator=new kA(s)),a.translator=new u0(a.services,s),a.translator.on("*",(u,...d)=>{a.emit(u,...d)}),a.init(s,n),a.translator.options=s,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const lr=Kf.createInstance();lr.createInstance;lr.dir;lr.init;lr.loadResources;lr.reloadResources;lr.use;lr.changeLanguage;lr.getFixedT;lr.t;lr.exists;lr.setDefaultNamespace;lr.hasLoadedNamespace;lr.loadNamespaces;lr.loadLanguages;const zJ=(t,e,n,r)=>{const s=[n,{code:e,...r||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(s,"warn","react-i18next::",!0);Bc(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...s):console?.warn&&console.warn(...s)},PA={},QI=(t,e,n,r)=>{Bc(n)&&PA[n]||(Bc(n)&&(PA[n]=new Date),zJ(t,e,n,r))},XI=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},v_=(t,e,n)=>{t.loadNamespaces(e,XI(t,n))},MA=(t,e,n,r)=>{if(Bc(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return v_(t,n,r);n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,XI(t,r))},HJ=(t,e,n={})=>!e.languages||!e.languages.length?(QI(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,t))return!1}}),Bc=t=>typeof t=="string",$J=t=>typeof t=="object"&&t!==null,qJ=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,YJ={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},WJ=t=>YJ[t],GJ=t=>t.replace(qJ,WJ);let b_={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:GJ};const KJ=(t={})=>{b_={...b_,...t}},QJ=()=>b_;let ZI;const XJ=t=>{ZI=t},ZJ=()=>ZI,JJ={type:"3rdParty",init(t){KJ(t.options.react),XJ(t)}},eee=x.createContext();class tee{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Lw={exports:{}},Ow={};var LA;function nee(){if(LA)return Ow;LA=1;var t=z0();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function u(g,y){var w=y(),_=r({inst:{value:w,getSnapshot:y}}),C=_[0].inst,S=_[1];return a(function(){C.value=w,C.getSnapshot=y,d(C)&&S({inst:C})},[g,w,y]),s(function(){return d(C)&&S({inst:C}),g(function(){d(C)&&S({inst:C})})},[g]),l(w),w}function d(g){var y=g.getSnapshot;g=g.value;try{var w=y();return!n(g,w)}catch{return!0}}function f(g,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return Ow.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,Ow}var OA;function ree(){return OA||(OA=1,Lw.exports=nee()),Lw.exports}var see=ree();const aee=(t,e)=>Bc(e)?e:$J(e)&&Bc(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,iee={t:aee,ready:!1},oee=()=>()=>{},Zc=(t,e={})=>{const{i18n:n}=e,{i18n:r,defaultNS:s}=x.useContext(eee)||{},a=n||r||ZJ();a&&!a.reportNamespaces&&(a.reportNamespaces=new tee),a||QI(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=x.useMemo(()=>({...QJ(),...a?.options?.react,...e}),[a,e]),{useSuspense:u,keyPrefix:d}=l,f=t||s||a?.options?.defaultNS,m=Bc(f)?[f]:f||["translation"],g=x.useMemo(()=>m,m);a?.reportNamespaces?.addUsedNamespaces?.(g);const y=x.useRef(0),w=x.useCallback(T=>{if(!a)return oee;const{bindI18n:I,bindI18nStore:V}=l,$=()=>{y.current+=1,T()};return I&&a.on(I,$),V&&a.store.on(V,$),()=>{I&&I.split(" ").forEach(U=>a.off(U,$)),V&&V.split(" ").forEach(U=>a.store.off(U,$))}},[a,l]),_=x.useRef(),C=x.useCallback(()=>{if(!a)return iee;const T=!!(a.isInitialized||a.initializedStoreOnce)&&g.every(W=>HJ(W,a,l)),I=e.lng||a.language,V=y.current,$=_.current;if($&&$.ready===T&&$.lng===I&&$.keyPrefix===d&&$.revision===V)return $;const G={t:a.getFixedT(I,l.nsMode==="fallback"?g:g[0],d),ready:T,lng:I,keyPrefix:d,revision:V};return _.current=G,G},[a,g,d,l,e.lng]),[S,N]=x.useState(0),{t:k,ready:R}=see.useSyncExternalStore(w,C,C);x.useEffect(()=>{if(a&&!R&&!u){const T=()=>N(I=>I+1);e.lng?MA(a,e.lng,g,T):v_(a,g,T)}},[a,e.lng,g,R,u,S]);const A=a||{},L=x.useRef(null),F=x.useRef(),P=T=>{const I=Object.getOwnPropertyDescriptors(T);I.__original&&delete I.__original;const V=Object.create(Object.getPrototypeOf(T),I);if(!Object.prototype.hasOwnProperty.call(V,"__original"))try{Object.defineProperty(V,"__original",{value:T,writable:!1,enumerable:!1,configurable:!1})}catch{}return V},O=x.useMemo(()=>{const T=A,I=T?.language;let V=T;T&&(L.current&&L.current.__original===T?F.current!==I?(V=P(T),L.current=V,F.current=I):V=L.current:(V=P(T),L.current=V,F.current=I));const $=[k,V,R];return $.t=k,$.i18n=V,$.ready=R,$},[k,A,R,A.resolvedLanguage,A.language,A.languages]);if(a&&u&&!R)throw new Promise(T=>{const I=()=>T();e.lng?MA(a,e.lng,g,I):v_(a,g,I)});return O},{slice:lee,forEach:cee}=[];function uee(t){return cee.call(lee.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function dee(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const IA=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,hee=function(t,e){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(e);let a=`${t}=${s}`;if(r.maxAge>0){const l=r.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");a+=`; Max-Age=${Math.floor(l)}`}if(r.domain){if(!IA.test(r.domain))throw new TypeError("option domain is invalid");a+=`; Domain=${r.domain}`}if(r.path){if(!IA.test(r.path))throw new TypeError("option path is invalid");a+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(a+="; Partitioned"),a},VA={create(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=hee(t,e,s)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var fee={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return VA.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:a}=e;n&&typeof document<"u"&&VA.create(n,t,r,s,a)}},mee={name:"querystring",lookup(t){let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const a=r.substring(1).split("&");for(let l=0;l<a.length;l++){const u=a[l].indexOf("=");u>0&&a[l].substring(0,u)===e&&(n=a[l].substring(u+1))}}return n}},pee={name:"hash",lookup(t){let{lookupHash:e,lookupFromHashIndex:n}=t,r;if(typeof window<"u"){const{hash:s}=window.location;if(s&&s.length>2){const a=s.substring(1);if(e){const l=a.split("&");for(let u=0;u<l.length;u++){const d=l[u].indexOf("=");d>0&&l[u].substring(0,d)===e&&(r=l[u].substring(d+1))}}if(r)return r;if(!r&&n>-1){const l=s.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof n=="number"?n:0]?.replace("/",""):void 0}}}return r}};let qu=null;const UA=()=>{if(qu!==null)return qu;try{if(qu=typeof window<"u"&&window.localStorage!==null,!qu)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{qu=!1}return qu};var gee={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&UA())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&UA()&&window.localStorage.setItem(n,t)}};let Yu=null;const FA=()=>{if(Yu!==null)return Yu;try{if(Yu=typeof window<"u"&&window.sessionStorage!==null,!Yu)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Yu=!1}return Yu};var yee={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&FA())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&FA()&&window.sessionStorage.setItem(n,t)}},xee={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let a=0;a<n.length;a++)e.push(n[a]);r&&e.push(r),s&&e.push(s)}return e.length>0?e:void 0}},vee={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},bee={name:"path",lookup(t){let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?n[typeof e=="number"?e:0]?.replace("/",""):void 0}},wee={name:"subdomain",lookup(t){let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};let JI=!1;try{document.cookie,JI=!0}catch{}const e5=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];JI||e5.splice(1,1);const _ee=()=>({order:e5,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class t5{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=uee(n,this.options||{},_ee()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(fee),this.addDetector(mee),this.addDetector(gee),this.addDetector(yee),this.addDetector(xee),this.addDetector(vee),this.addDetector(bee),this.addDetector(wee),this.addDetector(pee)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!dee(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}t5.type="languageDetector";function w_(t){"@babel/helpers - typeof";return w_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w_(t)}function n5(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":w_(XMLHttpRequest))==="object"}function Eee(t){return!!t&&typeof t.then=="function"}function Cee(t){return Eee(t)?t:Promise.resolve(t)}const See="modulepreload",Nee=function(t){return"/"+t},BA={},Jc=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let d=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=d(n.map(f=>{if(f=Nee(f),f in BA)return;BA[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":See,m||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),m)return new Promise((w,_)=>{y.addEventListener("load",w),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function zA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function HA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zA(Object(n),!0).forEach(function(r){jee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jee(t,e,n){return(e=Tee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tee(t){var e=kee(t,"string");return zc(e)=="symbol"?e:e+""}function kee(t,e){if(zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}var Dl=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Dl=global.fetch:typeof window<"u"&&window.fetch&&(Dl=window.fetch);var bm;n5()&&(typeof global<"u"&&global.XMLHttpRequest?bm=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(bm=window.XMLHttpRequest));var d0;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?d0=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(d0=window.ActiveXObject));typeof Dl!="function"&&(Dl=void 0);if(!Dl&&!bm&&!d0)try{Jc(()=>import("./browser-ponyfill-BllI2tYC.js").then(t=>t.b),[]).then(function(t){Dl=t.default}).catch(function(){})}catch{}var __=function(e,n){if(n&&zc(n)==="object"){var r="";for(var s in n)r+="&"+encodeURIComponent(s)+"="+encodeURIComponent(n[s]);if(!r)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+r.slice(1)}return e},$A=function(e,n,r,s){var a=function(d){if(!d.ok)return r(d.statusText||"Error",{status:d.status});d.text().then(function(f){r(null,{status:d.status,data:f})}).catch(r)};if(s){var l=s(e,n);if(l instanceof Promise){l.then(a).catch(r);return}}typeof fetch=="function"?fetch(e,n).then(a).catch(r):Dl(e,n).then(a).catch(r)},qA=!1,Dee=function(e,n,r,s){e.queryStringParams&&(n=__(n,e.queryStringParams));var a=HA({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(a["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(a["Content-Type"]="application/json");var l=typeof e.requestOptions=="function"?e.requestOptions(r):e.requestOptions,u=HA({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:a},qA?{}:l),d=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{$A(n,u,s,d)}catch(f){if(!l||Object.keys(l).length===0||!f.message||f.message.indexOf("not implemented")<0)return s(f);try{Object.keys(l).forEach(function(m){delete u[m]}),$A(n,u,s,d),qA=!0}catch(m){s(m)}}},Aee=function(e,n,r,s){r&&zc(r)==="object"&&(r=__("",r).slice(1)),e.queryStringParams&&(n=__(n,e.queryStringParams));try{var a=bm?new bm:new d0("MSXML2.XMLHTTP.3.0");a.open(r?"POST":"GET",n,1),e.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!e.withCredentials,r&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var l=e.customHeaders;if(l=typeof l=="function"?l():l,l)for(var u in l)a.setRequestHeader(u,l[u]);a.onreadystatechange=function(){a.readyState>3&&s(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(r)}catch(d){console&&console.log(d)}},Ree=function(e,n,r,s){if(typeof r=="function"&&(s=r,r=void 0),s=s||function(){},Dl&&n.indexOf("file:")!==0)return Dee(e,n,r,s);if(n5()||typeof ActiveXObject=="function")return Aee(e,n,r,s);s(new Error("No fetch and no xhr implementation found!"))};function Ld(t){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ld(t)}function YA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Iw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YA(Object(n),!0).forEach(function(r){r5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s5(r.key),r)}}function Lee(t,e,n){return e&&Mee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function r5(t,e,n){return(e=s5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s5(t){var e=Oee(t,"string");return Ld(e)=="symbol"?e:e+""}function Oee(t,e){if(Ld(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Iee=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,s){return r5({},r,s||"")},parseLoadPayload:function(n,r){},request:Ree,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},a5=(function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Pee(this,t),this.services=e,this.options=n,this.allOptions=r,this.type="backend",this.init(e,n,r)}return Lee(t,[{key:"init",value:function(n){var r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=Iw(Iw(Iw({},Iee()),this.options||{}),s),this.allOptions=a,this.services&&this.options.reloadInterval){var l=setInterval(function(){return r.reload()},this.options.reloadInterval);Ld(l)==="object"&&typeof l.unref=="function"&&l.unref()}}},{key:"readMulti",value:function(n,r,s){this._readAny(n,n,r,r,s)}},{key:"read",value:function(n,r,s){this._readAny([n],n,[r],r,s)}},{key:"_readAny",value:function(n,r,s,a,l){var u=this,d=this.options.loadPath;typeof this.options.loadPath=="function"&&(d=this.options.loadPath(n,s)),d=Cee(d),d.then(function(f){if(!f)return l(null,{});var m=u.services.interpolator.interpolate(f,{lng:n.join("+"),ns:s.join("+")});u.loadUrl(m,l,r,a)})}},{key:"loadUrl",value:function(n,r,s,a){var l=this,u=typeof s=="string"?[s]:s,d=typeof a=="string"?[a]:a,f=this.options.parseLoadPayload(u,d);this.options.request(this.options,n,f,function(m,g){if(g&&(g.status>=500&&g.status<600||!g.status))return r("failed loading "+n+"; status code: "+g.status,!0);if(g&&g.status>=400&&g.status<500)return r("failed loading "+n+"; status code: "+g.status,!1);if(!g&&m&&m.message){var y=m.message.toLowerCase(),w=["failed","fetch","network","load"].find(function(S){return y.indexOf(S)>-1});if(w)return r("failed loading "+n+": "+m.message,!0)}if(m)return r(m,!1);var _,C;try{typeof g.data=="string"?_=l.options.parse(g.data,s,a):_=g.data}catch{C="failed parsing "+n+" to json"}if(C)return r(C,!1);r(null,_)})}},{key:"create",value:function(n,r,s,a,l){var u=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var d=this.options.parsePayload(r,s,a),f=0,m=[],g=[];n.forEach(function(y){var w=u.options.addPath;typeof u.options.addPath=="function"&&(w=u.options.addPath(y,r));var _=u.services.interpolator.interpolate(w,{lng:y,ns:r});u.options.request(u.options,_,d,function(C,S){f+=1,m.push(C),g.push(S),f===n.length&&typeof l=="function"&&l(m,g)})})}}},{key:"reload",value:function(){var n=this,r=this.services,s=r.backendConnector,a=r.languageUtils,l=r.logger,u=s.language;if(!(u&&u.toLowerCase()==="cimode")){var d=[],f=function(g){var y=a.toResolveHierarchy(g);y.forEach(function(w){d.indexOf(w)<0&&d.push(w)})};f(u),this.allOptions.preload&&this.allOptions.preload.forEach(function(m){return f(m)}),d.forEach(function(m){n.allOptions.ns.forEach(function(g){s.read(m,g,"read",null,null,function(y,w){y&&l.warn("loading namespace ".concat(g," for language ").concat(m," failed"),y),!y&&w&&l.log("loaded namespace ".concat(g," for language ").concat(m),w),s.loaded("".concat(m,"|").concat(g),y,w)})})})}}}])})();a5.type="backend";const i5=["es","en"],Vee={order:["localStorage","querystring","navigator"],lookupLocalStorage:"i18nextLng",lookupQuerystring:"lng",caches:["localStorage"],excludeCacheFor:["cimode"]},Uee={loadPath:"/locales/{{lng}}/{{ns}}.json",defaultNS:"translation",crossDomain:!1};if(typeof window<"u")try{const t=localStorage.getItem("i18nextLng");if(t&&t.includes("-")){const e=t.split("-")[0];localStorage.setItem("i18nextLng",e)}}catch(t){console.warn("[i18n] No se pudo normalizar lenguaje almacenado",t)}lr.use(JJ).use(t5).use(a5).init({fallbackLng:"es",fallbackNS:"translation",supportedLngs:i5,load:"languageOnly",defaultNS:"translation",ns:["translation","dashboard","appointments","notifications","landing","schedule"],debug:!1,interpolation:{escapeValue:!1},detection:Vee,backend:Uee,cache:{enabled:!0},react:{useSuspense:!1,bindI18n:"languageChanged loaded",bindI18nStore:"added",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"]}});lr.on("languageChanged",t=>{console.log(`[i18n] Language changed to: ${t}`),typeof document<"u"&&(document.documentElement.lang=t),typeof window<"u"&&window.gtag&&window.gtag("event","language_change",{language:t})});lr.on("failedLoading",(t,e,n)=>{console.error(`[i18n] Failed loading ${t}/${e}:`,n)});const E_=async t=>{try{await lr.changeLanguage(t),localStorage.setItem("i18nextLng",t)}catch(e){console.error("[i18n] Error changing language:",e)}},Ax=()=>{const e=lr.language.split("-")[0];return i5.includes(e)?e:"es"},Fee="https://www.pymerp.cl",Bee=()=>typeof window<"u"&&window.location?.origin?window.location.origin:Fee,zee=()=>({url:`${Bee()}/auth/action`,handleCodeInApp:!1}),Hee=t=>{try{t.languageCode=Ax()}catch{}},$ee=async(t,e)=>(await VY(Yr,t,e)).user,qee=async()=>{await L3(Yr)},WA=async()=>{await L3(Yr)},Yee=async t=>{const e=Yr.currentUser;if(!e)throw new Error("No user logged in");await UY(e,t);const n=e.email||"";let r=await HI(e.uid);if(!r&&n){const s=await i0(n.toLowerCase());s&&(await o0({email:s.email,status:s.status,role:s.role,company_id:s.company_id},e.uid),r={...s,id:e.uid})}r||await o0({email:n.toLowerCase(),status:Cs.FORCE_PASSWORD_CHANGE,role:It.ENTREPRENEUR},e.uid),await Nx(e.uid,{status:Cs.ACTIVE})},Wee=async(t,e)=>(await IY(Yr,t,e)).user,o5=async(t,e)=>{Hee(Yr),await PY(Yr,t,zee())},Gee=async()=>{const t=Yr.currentUser;if(!t||!t.email)return null;try{const n=await HI(t.uid);if(n)return n}catch(n){De.warn("No se pudo leer usuario por UID, intentando por email:",n)}let e=null;try{e=await i0(t.email)}catch(n){De.error("No se pudo leer usuario por email:",n)}if(e)try{const n={email:e.email,status:e.status,role:e.role};return e.company_id&&(n.company_id=e.company_id),await o0(n,t.uid),{...e,id:t.uid}}catch(n){De.error("Error sincronizando usuario con UID:",n)}return e},l5=t=>{const{projectId:e,functionsRegion:n}=dn.firebase;return`https://${n}-${e}.cloudfunctions.net/${t}`},c5=async(t,e)=>{const n=l5("setCompanyClaimHttp"),r=Yr.currentUser,s=r?await r.getIdToken():null,a=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify({uid:t,companyId:e})});if(!a.ok){const u=await a.text();throw new Error(u||"Error al establecer claim de compaa")}const l=await a.json();if(l.success!==!0)throw new Error(l.error||"Error al establecer claim de compaa");return l},Kee=async t=>{const e=l5("deleteUserAccountHttp"),n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const s=await n.text();throw new Error(s||"Error al eliminar cuenta")}const r=await n.json();if(r.success!==!0)throw new Error(r.error||"Error al eliminar cuenta");return r},u5=x.createContext({firebaseUser:null,firestoreUser:null,loading:!0}),an=()=>x.useContext(u5),Qee=({children:t})=>{const e=x.useMemo(()=>{if(dn.app.environment!=="e2e"&&!dn.e2eUser)return null;try{const d=typeof localStorage<"u"&&localStorage.getItem("e2e:user")||dn.e2eUser;return d&&{founder:{id:"u-entrepreneur",email:"founder@demo.com",role:"ENTREPRENEUR",status:"ACTIVE",company_id:"company-services",created_at:new Date},seller:{id:"u-product-owner",email:"seller@demo.com",role:"ENTREPRENEUR",status:"ACTIVE",company_id:"company-products",created_at:new Date},admin:{id:"u-admin",email:"admin@demo.com",role:"SUPERADMIN",status:"ACTIVE",created_at:new Date},force:{id:"u-force-reset",email:"force@demo.com",role:"ENTREPRENEUR",status:"FORCE_PASSWORD_CHANGE",company_id:"company-services",created_at:new Date}}[d]||null}catch(d){return De.warn("E2E auth bypass fall:",d),null}},[]),[n,r]=x.useState(e?{uid:e.id,email:e.email}:null),[s,a]=x.useState(e),[l,u]=x.useState(!e);return x.useEffect(()=>e?void 0:HY(Yr,async f=>{try{if(r(f),f)try{const m=await Gee();if(a(m),m?.company_id)try{await c5(f.uid,m.company_id)}catch(g){De.warn("No se pudo sincronizar claim de compaa:",g)}}catch(m){De.error("Error obteniendo usuario de Firestore:",m),a(null)}else a(null)}catch(m){De.error("Error en AuthContext:",m)}finally{u(!1)}}),[]),i.jsx(u5.Provider,{value:{firebaseUser:n,firestoreUser:s,loading:l},children:t})},Qt=({children:t,requiredRole:e,requireActive:n=!0})=>{const{firebaseUser:r,firestoreUser:s,loading:a}=an();return dn.app.environment==="e2e"?i.jsx(i.Fragment,{children:t}):a?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):!r||!s?i.jsx(rw,{to:"/login",replace:!0}):n&&s.status===Cs.FORCE_PASSWORD_CHANGE?i.jsx(rw,{to:"/change-password",replace:!0}):e&&s.role!==e?i.jsx(rw,{to:"/dashboard",replace:!0}):i.jsx(i.Fragment,{children:t})},_d=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Al=globalThis,Qf="10.27.0";function BC(){return zC(Al),Al}function zC(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||Qf,e[Qf]=e[Qf]||{}}function HC(t,e,n=Al){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Qf]=r[Qf]||{};return s[t]||(s[t]=e())}const Xee="Sentry Logger ",GA={};function d5(t){if(!("console"in Al))return t();const e=Al.console,n={},r=Object.keys(GA);r.forEach(s=>{const a=GA[s];n[s]=e[s],e[s]=a});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function Zee(){qC().enabled=!0}function Jee(){qC().enabled=!1}function h5(){return qC().enabled}function ete(...t){$C("log",...t)}function tte(...t){$C("warn",...t)}function nte(...t){$C("error",...t)}function $C(t,...e){_d&&h5()&&d5(()=>{Al.console[t](`${Xee}[${t}]:`,...e)})}function qC(){return _d?HC("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const xy={enable:Zee,disable:Jee,isEnabled:h5,log:ete,warn:tte,error:nte},rte=Object.prototype.toString;function ste(t,e){return rte.call(t)===`[object ${e}]`}function ate(t){return ste(t,"Object")}function ite(t){return!!(t?.then&&typeof t.then=="function")}function ote(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{_d&&xy.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function lte(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function cte(){const t=Al;return t.crypto||t.msCrypto}let Vw;function ute(){return Math.random()*16}function Xf(t=cte()){try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return Vw||(Vw="10000000100040008000"+1e11),Vw.replace(/[018]/g,e=>(e^(ute()&15)>>e/4).toString(16))}const f5=1e3;function YC(){return Date.now()/f5}function dte(){const{performance:t}=Al;if(!t?.now||!t.timeOrigin)return YC;const e=t.timeOrigin;return()=>(e+t.now())/f5}let KA;function hte(){return(KA??(KA=dte()))()}function fte(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||hte(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Xf()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function m5(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=m5(r[s],e[s],n-1));return r}function QA(){return Xf()}const C_="_sentrySpan";function XA(t,e){e?ote(t,C_,e):delete t[C_]}function ZA(t){return t[C_]}const mte=100;class Rl{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:QA(),sampleRand:Math.random()}}clone(){const e=new Rl;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,XA(e,ZA(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&fte(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this.setTags({[e]:n})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,n){return this.setAttributes({[e]:n})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof Rl?n.getScopeData():ate(n)?e:void 0,{tags:s,attributes:a,extra:l,user:u,contexts:d,level:f,fingerprint:m=[],propagationContext:g}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...a},this._extra={...this._extra,...l},this._contexts={...this._contexts,...d},u&&Object.keys(u).length&&(this._user=u),f&&(this._level=f),m.length&&(this._fingerprint=m),g&&(this._propagationContext=g),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,XA(this,void 0),this._attachments=[],this.setPropagationContext({traceId:QA(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:mte;if(r<=0)return this;const s={timestamp:YC(),...e,message:e.message?lte(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ZA(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=m5(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n?.event_id||Xf();if(!this._client)return _d&&xy.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=r?.event_id||Xf();if(!this._client)return _d&&xy.warn("No client configured on scope - will not capture message!"),s;const a=r?.syntheticException??new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:a,...r,event_id:s},this),s}captureEvent(e,n){const r=n?.event_id||Xf();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(_d&&xy.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function pte(){return HC("defaultCurrentScope",()=>new Rl)}function gte(){return HC("defaultIsolationScope",()=>new Rl)}class yte{constructor(e,n){let r;e?r=e:r=new Rl;let s;n?s=n:s=new Rl,this._stack=[{scope:r}],this._isolationScope=s}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(s){throw this._popScope(),s}return ite(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Od(){const t=BC(),e=zC(t);return e.stack=e.stack||new yte(pte(),gte())}function xte(t){return Od().withScope(t)}function vte(t,e){const n=Od();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function JA(t){return Od().withScope(()=>t(Od().getIsolationScope()))}function bte(){return{withIsolationScope:JA,withScope:xte,withSetScope:vte,withSetIsolationScope:(t,e)=>JA(e),getCurrentScope:()=>Od().getScope(),getIsolationScope:()=>Od().getIsolationScope()}}function p5(t){const e=zC(t);return e.acs?e.acs:bte()}function WC(){const t=BC();return p5(t).getCurrentScope()}function wte(){const t=BC();return p5(t).getIsolationScope()}function _te(){return WC().getClient()}function Ete(t){if(t)return Cte(t)?{captureContext:t}:Nte(t)?{captureContext:t}:t}function Cte(t){return t instanceof Rl||typeof t=="function"}const Ste=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Nte(t){return Object.keys(t).some(e=>Ste.includes(e))}function jte(t,e){return WC().captureException(t,Ete(e))}function Tte(t,e){const n=typeof e=="string"?e:void 0,r=typeof e!="string"?{captureContext:e}:void 0;return WC().captureMessage(t,n,r)}const kte=100;function Dte(t,e){const n=_te(),r=wte();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:a=kte}=n.getOptions();if(a<=0)return;const u={timestamp:YC(),...t},d=s?d5(()=>s(u,e)):u;d!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",d,e),r.addBreadcrumb(d,a))}const Ate=()=>{{De.warn("Sentry DSN no configurado. Los errores no se enviarn a Sentry.");return}},g5=(t,e)=>{jte(t,{contexts:e?{custom:e}:void 0})},fl=(t,e)=>{Dte({message:t,data:e,level:"info",timestamp:Date.now()/1e3})};class Rte extends x.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){De.error("ErrorBoundary caught an error:",e,n),this.setState({errorInfo:n}),this.props.onError&&this.props.onError(e,n),g5(e,{componentStack:n.componentStack})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-8",children:[i.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:"Algo sali mal"}),i.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Lo sentimos, ha ocurrido un error inesperado. Nuestro equipo ha sido notificado."}),!1,i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:this.handleReset,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Intentar de nuevo"}),i.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors",children:"Ir al inicio"})]}),i.jsxs("p",{className:"text-xs text-gray-500 text-center mt-4",children:["Error ID: ",Date.now().toString(36)]})]})}):this.props.children}}function He({children:t}){return i.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeInOut"},children:t})}function Uw({href:t,children:e}){return i.jsx("a",{href:t,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[9999] focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded focus:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:e})}function Pte(){return i.jsxs("nav",{"aria-label":"Enlaces de navegacin rpida",className:"skip-links",children:[i.jsx(Uw,{href:"#main-content",children:"Saltar al contenido principal"}),i.jsx(Uw,{href:"#navigation",children:"Saltar a la navegacin"}),i.jsx(Uw,{href:"#footer",children:"Saltar al pie de pgina"})]})}function xn({children:t,onClick:e,className:n="",style:r,type:s="button",disabled:a=!1,ariaLabel:l,ariaDescribedBy:u}){return i.jsx(_e.button,{type:s,onClick:e,disabled:a,className:n,style:r,whileHover:{scale:a?1:1.02},whileTap:{scale:a?1:.98},transition:{type:"spring",stiffness:400,damping:17},"aria-label":l,"aria-describedby":u,"aria-disabled":a,children:t})}function Mte(){const[t,e]=x.useState(null),[n,r]=x.useState(!1),[s,a]=x.useState(!1);return x.useEffect(()=>{},[]),null}function Lte(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:a,onRegisterError:l}=t;let u,d;const f=async(g=!0)=>{await d};async function m(){if("serviceWorker"in navigator){if(u=await Jc(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/sw.js",{scope:"/",type:"classic"})).catch(g=>{l?.(g)}),!u)return;u.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),u.addEventListener("installed",g=>{g.isUpdate||r?.()}),u.register({immediate:e}).then(g=>{a?a("/sw.js",g):s?.(g)}).catch(g=>{l?.(g)})}}return d=m(),f}function Ote(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:a,onRegisterError:l}=t,[u,d]=x.useState(!1),[f,m]=x.useState(!1),[g]=x.useState(()=>Lte({immediate:e,onOfflineReady(){m(!0),r?.()},onNeedRefresh(){d(!0),n?.()},onRegistered:s,onRegisteredSW:a,onRegisterError:l}));return{needRefresh:[u,d],offlineReady:[f,m],updateServiceWorker:g}}function Ite(){const[t,e]=x.useState(!1),[n,r]=x.useState(!navigator.onLine),{needRefresh:[s,a],offlineReady:[l,u],updateServiceWorker:d}=Ote({onRegistered(f){console.log(" Service Worker registrado"),f&&setInterval(()=>{f.update()},3600*1e3)},onRegisterError(f){console.error(" Error registrando Service Worker:",f)}});return x.useEffect(()=>{window.matchMedia("(display-mode: standalone)").matches&&e(!0);const f=()=>r(!1),m=()=>r(!0);return window.addEventListener("online",f),window.addEventListener("offline",m),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",m)}},[]),{isInstalled:t,isUpdateAvailable:s,isOffline:n,needRefresh:[s,a],offlineReady:[l,u],updateServiceWorker:d}}function Vte(){const[t,e]=x.useState(navigator.onLine);return x.useEffect(()=>{const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n),window.addEventListener("offline",r),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}},[]),t}function Ute(){if(typeof navigator<"u"&&(navigator.userAgent.includes("Headless")||navigator.userAgent.includes("PWA-Test")))return null;const{needRefresh:t,offlineReady:e,updateServiceWorker:n}=Ite(),[r,s]=t,[a,l]=e,u=()=>{l(!1),s(!1)},d=()=>{n(!0)};return i.jsx(Ta,{children:(a||r)&&i.jsx(_e.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",damping:20},className:"fixed top-2 sm:top-4 left-1/2 transform -translate-x-1/2 z-[9999] w-[calc(100%-1rem)] sm:w-full max-w-md px-2 sm:px-4",children:i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-3 sm:p-4 border border-gray-200 dark:border-gray-700",children:i.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[i.jsx("div",{className:"flex-shrink-0 pt-0.5",children:r?i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsxs("div",{className:"flex-1 min-w-0 pr-1 sm:pr-0",children:[i.jsx("h4",{className:"text-xs sm:text-sm font-semibold text-gray-900 dark:text-white mb-0.5 sm:mb-1 leading-tight",children:r?" Nueva versin disponible":" Listo para usar sin conexin"}),i.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:r?"Hay una actualizacin de pymerp.cl. Actualiza ahora para obtener las ltimas mejoras y correcciones.":"pymerp.cl ya est disponible sin conexin a internet. Puedes usarla en cualquier momento."})]}),i.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2 flex-shrink-0",children:[r&&i.jsx(xn,{onClick:d,className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-blue-600 text-white rounded text-[10px] sm:text-xs font-medium hover:bg-blue-700 whitespace-nowrap",children:"Actualizar"}),i.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-0.5 sm:p-1","aria-label":"Cerrar",children:i.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})})})}function Fte(){const t=Vte();return i.jsx(Ta,{children:!t&&i.jsx(_e.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-0 left-0 right-0 z-[9999]",children:i.jsx("div",{className:"bg-yellow-500 dark:bg-yellow-600 text-white px-4 py-2 text-center text-sm font-medium shadow-lg",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})}),i.jsx("span",{children:" Sin conexin a internet - Trabajando en modo sin conexin"})]})})})})}const eR="cookie-consent",tR="1.0";function Bte(){const[t,e]=x.useState(!1),[n,r]=x.useState(!1),[s,a]=x.useState({essential:!0,analytics:!1,marketing:!1});x.useEffect(()=>{const g=localStorage.getItem(eR);if(!g)setTimeout(()=>{e(!0)},2e3);else try{const y=JSON.parse(g);y.version===tR?(a(y.preferences),l(y.preferences)):e(!0)}catch{e(!0)}},[]);const l=g=>{typeof window<"u"&&window.gtag&&window.gtag("consent","update",{analytics_storage:g.analytics?"granted":"denied",ad_storage:g.marketing?"granted":"denied",personalization_storage:g.marketing?"granted":"denied"}),!g.analytics&&window.gtag&&(window["ga-disable-G-58V5RL01MF"]=!0)},u=g=>{const y={version:tR,timestamp:new Date().toISOString(),preferences:g};localStorage.setItem(eR,JSON.stringify(y)),l(g),e(!1)},d=()=>{const g={essential:!0,analytics:!0,marketing:!0};a(g),u(g)},f=()=>{const g={essential:!0,analytics:!1,marketing:!1};a(g),u(g)},m=()=>{u(s),r(!1)};return t?i.jsx(Ta,{children:i.jsx(_e.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-0 left-0 right-0 z-[10000] bg-white dark:bg-gray-800 border-t-2 border-gray-200 dark:border-gray-700 shadow-2xl",role:"dialog","aria-label":"Consentimiento de cookies","aria-describedby":"cookie-description",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:n?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Preferencias de Cookies"}),i.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700","aria-label":"Volver",children:""})]}),i.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Cookies Esenciales"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Necesarias para el funcionamiento de AgendaWeb: autenticacin, sesin de usuario y seguridad. No se pueden desactivar porque son indispensables."})]}),i.jsx("div",{className:"flex items-center ml-4",children:i.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Siempre activas"})})]})}),i.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Cookies de Anlisis"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nos ayudan a entender cmo usas AgendaWeb para mejorar continuamente. Utilizamos Google Analytics 4. Tus datos son annimos y agregados."})]}),i.jsx("div",{className:"flex items-center ml-4",children:i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.analytics,onChange:g=>a({...s,analytics:g.target.checked}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})})]})}),i.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 opacity-50",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Cookies de Publicidad"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Actualmente no utilizamos cookies de publicidad o marketing. AgendaWeb no muestra anuncios de terceros."})]}),i.jsx("div",{className:"flex items-center ml-4",children:i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Desactivadas"})})]})}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(xn,{onClick:f,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Rechazar Todo"}),i.jsx(xn,{onClick:m,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Guardar Preferencias"}),i.jsx(xn,{onClick:d,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700",children:"Aceptar Todo"})]})]})}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:" Este sitio usa cookies"}),i.jsxs("p",{id:"cookie-description",className:"text-sm text-gray-600 dark:text-gray-400",children:["Usamos cookies esenciales para el funcionamiento de AgendaWeb y cookies de anlisis para mejorar tu experiencia. Puedes personalizar tus preferencias o aceptar todo."," ",i.jsx("a",{href:"/privacidad",target:"_blank",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",rel:"noopener noreferrer",children:"Ver Poltica de Privacidad"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[i.jsx("button",{onClick:()=>r(!0),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Personalizar"}),i.jsx(xn,{onClick:f,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Rechazar Todo"}),i.jsx(xn,{onClick:d,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Aceptar Todo"})]})]})})})})}):null}const y5=x.createContext({theme:"light",toggleTheme:()=>{}}),zte=()=>x.useContext(y5),Hte=({children:t})=>{const[e,n]=x.useState("light");x.useEffect(()=>{const s=localStorage.getItem("app-theme");s?n(s):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&n("dark")},[]),x.useEffect(()=>{document.body.dataset.theme=e,localStorage.setItem("app-theme",e)},[e]);const r=x.useMemo(()=>({theme:e,toggleTheme:()=>n(s=>s==="light"?"dark":"light")}),[e]);return i.jsx(y5.Provider,{value:r,children:t})};function GC(){const{theme:t,toggleTheme:e}=zte();return i.jsx("button",{type:"button",onClick:e,className:"flex items-center justify-center w-10 h-10 rounded-full border-2 border-gray-300 bg-white hover:bg-gray-50 text-gray-700 shadow-sm transition-all hover:shadow-md hover:scale-105","aria-label":"Cambiar modo claro/oscuro",title:t==="light"?"Cambiar a modo oscuro":"Cambiar a modo claro",children:t==="light"?"":""})}const hf=[{code:"es",name:"Spanish",nativeName:"Espaol",flag:""},{code:"en",name:"English",nativeName:"English",flag:""}];function $te({className:t="",showLabel:e=!1,variant:n="dropdown"}){const{t:r}=Zc(),[s,a]=x.useState(!1),[l,u]=x.useState(!1),d=x.useRef(null),f=Ax(),m=hf.find(w=>w.code===f)||hf[0];x.useEffect(()=>{typeof window<"u"&&u(window.navigator.userAgent.toLowerCase().includes("windows"))},[]);const g=w=>l?i.jsx("span",{"aria-hidden":"true",className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-blue-600 text-[10px] font-semibold uppercase text-white shadow-sm",children:w.code}):i.jsx("span",{className:"text-lg",role:"img","aria-label":w.name,children:w.flag});x.useEffect(()=>{const w=_=>{d.current&&!d.current.contains(_.target)&&a(!1)};return s&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[s]);const y=async w=>{try{await E_(w),a(!1),setTimeout(()=>{window.dispatchEvent(new Event("languageChanged"))},100)}catch(_){console.error("Error changing language:",_)}};if(n==="button"){const w=hf.find(_=>_.code!==f)||hf[1];return i.jsxs("button",{onClick:()=>y(w.code),className:`inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors ${t}`,title:r("language.toggle"),"aria-label":r("language.toggle"),children:[g(m),e&&i.jsx("span",{className:"hidden sm:inline",children:m.nativeName})]})}return i.jsxs("div",{ref:d,className:`relative inline-block text-left ${t}`,children:[i.jsxs("button",{onClick:()=>a(!s),className:"inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors","aria-haspopup":"true","aria-expanded":s,title:r("language.toggle"),children:[g(m),e&&i.jsx("span",{className:"hidden sm:inline",children:m.nativeName}),i.jsx("svg",{className:`w-4 h-4 transition-transform ${s?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&i.jsx("div",{className:"absolute right-0 z-50 mt-2 w-48 origin-top-right rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-in fade-in slide-in-from-top-2 duration-200",role:"menu","aria-orientation":"vertical",children:i.jsx("div",{className:"py-1",role:"none",children:hf.map(w=>{const _=w.code===f;return i.jsxs("button",{onClick:()=>y(w.code),className:`
                    w-full text-left px-4 py-2 text-sm flex items-center gap-3 transition-colors
                    ${_?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"}
                  `,role:"menuitem",disabled:_,children:[i.jsx("span",{className:"text-lg",role:"img","aria-label":w.name,children:w.flag}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{children:w.nativeName}),w.nativeName!==w.name&&i.jsx("span",{className:"text-xs text-gray-500",children:w.name})]}),_&&i.jsx("svg",{className:"ml-auto w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},w.code)})})})]})}function KC(){return i.jsx($te,{variant:"button"})}var Fw={},Bw={},zw={},nR;function qte(){return nR||(nR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];if(typeof window<"u"){var u;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(u=window).gtag.apply(u,a)}},n=e;t.default=n})(zw)),zw}var Hw={},rR;function Yte(){return rR||(rR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function n(u){return u.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(d,f,m){return f>0&&f+d.length!==m.length&&d.search(e)>-1&&m.charAt(f-2)!==":"&&(m.charAt(f+d.length)!=="-"||m.charAt(f-1)==="-")&&m.charAt(f-1).search(/[^\s-]/)<0?d.toLowerCase():d.substr(1).search(/[A-Z]|\../)>-1?d:d.charAt(0).toUpperCase()+d.substr(1)})}function r(u){return typeof u=="string"&&u.indexOf("@")!==-1}var s="REDACTED (Potential Email Address)";function a(u){return r(u)?(console.warn("This arg looks like an email address, redacting."),s):u}function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,m=u||"";return d&&(m=n(u)),f&&(m=a(m)),m}})(Hw)),Hw}var sR;function Wte(){return sR||(sR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GA4=void 0;var e=l(qte()),n=l(Yte()),r=["eventCategory","eventAction","eventLabel","eventValue","hitType"],s=["title","location"],a=["page","hitType"];function l(G){return G&&G.__esModule?G:{default:G}}function u(G,W){if(G==null)return{};var z=d(G,W),q,K;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(G);for(K=0;K<X.length;K++)q=X[K],!(W.indexOf(q)>=0)&&Object.prototype.propertyIsEnumerable.call(G,q)&&(z[q]=G[q])}return z}function d(G,W){if(G==null)return{};var z={},q=Object.keys(G),K,X;for(X=0;X<q.length;X++)K=q[X],!(W.indexOf(K)>=0)&&(z[K]=G[K]);return z}function f(G){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},f(G)}function m(G){return w(G)||y(G)||k(G)||g()}function g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(G){if(typeof Symbol<"u"&&G[Symbol.iterator]!=null||G["@@iterator"]!=null)return Array.from(G)}function w(G){if(Array.isArray(G))return R(G)}function _(G,W){var z=Object.keys(G);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(G);W&&(q=q.filter(function(K){return Object.getOwnPropertyDescriptor(G,K).enumerable})),z.push.apply(z,q)}return z}function C(G){for(var W=1;W<arguments.length;W++){var z=arguments[W]!=null?arguments[W]:{};W%2?_(Object(z),!0).forEach(function(q){T(G,q,z[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(z)):_(Object(z)).forEach(function(q){Object.defineProperty(G,q,Object.getOwnPropertyDescriptor(z,q))})}return G}function S(G,W){return L(G)||A(G,W)||k(G,W)||N()}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(G,W){if(G){if(typeof G=="string")return R(G,W);var z=Object.prototype.toString.call(G).slice(8,-1);if(z==="Object"&&G.constructor&&(z=G.constructor.name),z==="Map"||z==="Set")return Array.from(G);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return R(G,W)}}function R(G,W){(W==null||W>G.length)&&(W=G.length);for(var z=0,q=new Array(W);z<W;z++)q[z]=G[z];return q}function A(G,W){var z=G==null?null:typeof Symbol<"u"&&G[Symbol.iterator]||G["@@iterator"];if(z!=null){var q,K,X,se,H=[],Z=!0,te=!1;try{if(X=(z=z.call(G)).next,W!==0)for(;!(Z=(q=X.call(z)).done)&&(H.push(q.value),H.length!==W);Z=!0);}catch(J){te=!0,K=J}finally{try{if(!Z&&z.return!=null&&(se=z.return(),Object(se)!==se))return}finally{if(te)throw K}}return H}}function L(G){if(Array.isArray(G))return G}function F(G,W){if(!(G instanceof W))throw new TypeError("Cannot call a class as a function")}function P(G,W){for(var z=0;z<W.length;z++){var q=W[z];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(G,I(q.key),q)}}function O(G,W,z){return W&&P(G.prototype,W),Object.defineProperty(G,"prototype",{writable:!1}),G}function T(G,W,z){return W=I(W),W in G?Object.defineProperty(G,W,{value:z,enumerable:!0,configurable:!0,writable:!0}):G[W]=z,G}function I(G){var W=V(G,"string");return f(W)==="symbol"?W:String(W)}function V(G,W){if(f(G)!=="object"||G===null)return G;var z=G[Symbol.toPrimitive];if(z!==void 0){var q=z.call(G,W);if(f(q)!=="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(G)}var $=(function(){function G(){var W=this;F(this,G),T(this,"reset",function(){W.isInitialized=!1,W._testMode=!1,W._currentMeasurementId,W._hasLoadedGA=!1,W._isQueuing=!1,W._queueGtag=[]}),T(this,"_gtag",function(){for(var z=arguments.length,q=new Array(z),K=0;K<z;K++)q[K]=arguments[K];W._testMode||W._isQueuing?W._queueGtag.push(q):e.default.apply(void 0,q)}),T(this,"_loadGA",function(z,q){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!W._hasLoadedGA){var X=document.createElement("script");X.async=!0,X.src="".concat(K,"?id=").concat(z),q&&X.setAttribute("nonce",q),document.body.appendChild(X),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},W._hasLoadedGA=!0}}),T(this,"_toGtagOptions",function(z){if(z){var q={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},K=Object.entries(z).reduce(function(X,se){var H=S(se,2),Z=H[0],te=H[1];return q[Z]?X[q[Z]]=te:X[Z]=te,X},{});return K}}),T(this,"initialize",function(z){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!z)throw new Error("Require GA_MEASUREMENT_ID");var K=typeof z=="string"?[{trackingId:z}]:z;W._currentMeasurementId=K[0].trackingId;var X=q.gaOptions,se=q.gtagOptions,H=q.nonce,Z=q.testMode,te=Z===void 0?!1:Z,J=q.gtagUrl;if(W._testMode=te,te||W._loadGA(W._currentMeasurementId,H,J),W.isInitialized||(W._gtag("js",new Date),K.forEach(function(me){var we=C(C(C({},W._toGtagOptions(C(C({},X),me.gaOptions))),se),me.gtagOptions);Object.keys(we).length?W._gtag("config",me.trackingId,we):W._gtag("config",me.trackingId)})),W.isInitialized=!0,!te){var ne=m(W._queueGtag);for(W._queueGtag=[],W._isQueuing=!1;ne.length;){var ae=ne.shift();W._gtag.apply(W,m(ae)),ae[0]==="get"&&(W._isQueuing=!0)}}}),T(this,"set",function(z){if(!z){console.warn("`fieldsObject` is required in .set()");return}if(f(z)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(z).length===0&&console.warn("empty `fieldsObject` given to .set()"),W._gaCommand("set",z)}),T(this,"_gaCommandSendEvent",function(z,q,K,X,se){W._gtag("event",q,C(C({event_category:z,event_label:K,value:X},se&&{non_interaction:se.nonInteraction}),W._toGtagOptions(se)))}),T(this,"_gaCommandSendEventParameters",function(){for(var z=arguments.length,q=new Array(z),K=0;K<z;K++)q[K]=arguments[K];if(typeof q[0]=="string")W._gaCommandSendEvent.apply(W,m(q.slice(1)));else{var X=q[0],se=X.eventCategory,H=X.eventAction,Z=X.eventLabel,te=X.eventValue;X.hitType;var J=u(X,r);W._gaCommandSendEvent(se,H,Z,te,J)}}),T(this,"_gaCommandSendTiming",function(z,q,K,X){W._gtag("event","timing_complete",{name:q,value:K,event_category:z,event_label:X})}),T(this,"_gaCommandSendPageview",function(z,q){if(q&&Object.keys(q).length){var K=W._toGtagOptions(q),X=K.title,se=K.location,H=u(K,s);W._gtag("event","page_view",C(C(C(C({},z&&{page_path:z}),X&&{page_title:X}),se&&{page_location:se}),H))}else z?W._gtag("event","page_view",{page_path:z}):W._gtag("event","page_view")}),T(this,"_gaCommandSendPageviewParameters",function(){for(var z=arguments.length,q=new Array(z),K=0;K<z;K++)q[K]=arguments[K];if(typeof q[0]=="string")W._gaCommandSendPageview.apply(W,m(q.slice(1)));else{var X=q[0],se=X.page;X.hitType;var H=u(X,a);W._gaCommandSendPageview(se,H)}}),T(this,"_gaCommandSend",function(){for(var z=arguments.length,q=new Array(z),K=0;K<z;K++)q[K]=arguments[K];var X=typeof q[0]=="string"?q[0]:q[0].hitType;switch(X){case"event":W._gaCommandSendEventParameters.apply(W,q);break;case"pageview":W._gaCommandSendPageviewParameters.apply(W,q);break;case"timing":W._gaCommandSendTiming.apply(W,m(q.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(X));break;default:console.warn("Send command doesn't exist: ".concat(X))}}),T(this,"_gaCommandSet",function(){for(var z=arguments.length,q=new Array(z),K=0;K<z;K++)q[K]=arguments[K];typeof q[0]=="string"&&(q[0]=T({},q[0],q[1])),W._gtag("set",W._toGtagOptions(q[0]))}),T(this,"_gaCommand",function(z){for(var q=arguments.length,K=new Array(q>1?q-1:0),X=1;X<q;X++)K[X-1]=arguments[X];switch(z){case"send":W._gaCommandSend.apply(W,K);break;case"set":W._gaCommandSet.apply(W,K);break;default:console.warn("Command doesn't exist: ".concat(z))}}),T(this,"ga",function(){for(var z=arguments.length,q=new Array(z),K=0;K<z;K++)q[K]=arguments[K];if(typeof q[0]=="string")W._gaCommand.apply(W,q);else{var X=q[0];W._gtag("get",W._currentMeasurementId,"client_id",function(se){W._isQueuing=!1;var H=W._queueGtag;for(X({get:function(J){return J==="clientId"?se:J==="trackingId"?W._currentMeasurementId:J==="apiVersion"?"1":void 0}});H.length;){var Z=H.shift();W._gtag.apply(W,m(Z))}}),W._isQueuing=!0}return W.ga}),T(this,"event",function(z,q){if(typeof z=="string")W._gtag("event",z,W._toGtagOptions(q));else{var K=z.action,X=z.category,se=z.label,H=z.value,Z=z.nonInteraction,te=z.transport;if(!X||!K){console.warn("args.category AND args.action are required in event()");return}var J={hitType:"event",eventCategory:(0,n.default)(X),eventAction:(0,n.default)(K)};se&&(J.eventLabel=(0,n.default)(se)),typeof H<"u"&&(typeof H!="number"?console.warn("Expected `args.value` arg to be a Number."):J.eventValue=H),typeof Z<"u"&&(typeof Z!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):J.nonInteraction=Z),typeof te<"u"&&(typeof te!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(te)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),J.transport=te)),W._gaCommand("send",J)}}),T(this,"send",function(z){W._gaCommand("send",z)}),this.reset()}return O(G,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),G})();t.GA4=$;var U=new $;t.default=U})(Bw)),Bw}var aR;function Gte(){return aR||(aR=1,(function(t){function e(u){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},e(u)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactGAImplementation=void 0;var n=s(Wte());function r(u){if(typeof WeakMap!="function")return null;var d=new WeakMap,f=new WeakMap;return(r=function(g){return g?f:d})(u)}function s(u,d){if(u&&u.__esModule)return u;if(u===null||e(u)!=="object"&&typeof u!="function")return{default:u};var f=r(d);if(f&&f.has(u))return f.get(u);var m={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in u)if(y!=="default"&&Object.prototype.hasOwnProperty.call(u,y)){var w=g?Object.getOwnPropertyDescriptor(u,y):null;w&&(w.get||w.set)?Object.defineProperty(m,y,w):m[y]=u[y]}return m.default=u,f&&f.set(u,m),m}var a=n.GA4;t.ReactGAImplementation=a;var l=n.default;t.default=l})(Fw)),Fw}var Kte=Gte();const Rx=Yc(Kte);var jr=(t=>(t.USER="user",t.NAVIGATION="navigation",t.ENGAGEMENT="engagement",t.CONVERSION="conversion",t.ERROR="error",t.BUSINESS="business",t))(jr||{}),pi=(t=>(t.SIGN_UP="sign_up",t.LOGIN="login",t.LOGOUT="logout",t.PROFILE_UPDATE="profile_update",t.PAGE_VIEW="page_view",t.CLICK="click",t.SEARCH="search",t.SCROLL="scroll",t.VIDEO_PLAY="video_play",t.FILE_DOWNLOAD="file_download",t.WHATSAPP_CLICK="whatsapp_click",t.SERVICE_BOOKING="service_booking",t.PRODUCT_ORDER="product_order",t.CONTACT_SUBMIT="contact_submit",t.SERVICE_CREATE="service_create",t.PRODUCT_CREATE="product_create",t.COMPANY_SETUP="company_setup",t.ERROR_OCCURRED="error_occurred",t))(pi||{});let S_={app_version:dn.app.version,environment:dn.app.environment,session_id:Qte()};function Qte(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Xte(t){const e=t;if(!dn.analytics.enabled){De.warn("GA4 deshabilitado o Measurement ID no configurado");return}try{Rx.initialize(e,{gaOptions:{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure",cookie_expires:63072e3,...S_},gtagOptions:{debug_mode:dn.analytics.debug,send_page_view:!0,custom_map:{dimension1:"user_role",dimension2:"company_id",dimension3:"business_type",dimension4:"app_version",dimension5:"environment"}}}),De.success("Google Analytics 4 inicializado:",e),De.debug("Custom dimensions:",S_),dn.analytics.debug&&nne()}catch(n){De.error("Error inicializando GA4:",n)}}function Zte(t,e){try{const n=t||window.location.pathname+window.location.search;Rx.send({hitType:"pageview",page:n,title:e||document.title}),De.debug("GA4 Pageview:",n)}catch(n){De.error("Error tracking pageview:",n)}}function cs(t,e){if(dn.analytics.enabled)try{const n={...S_,...e,timestamp:Date.now()};Rx.event(t,n),De.debug("GA4 Event:",t,n),dn.analytics.debug&&rne(t,n)}catch(n){De.error("Error tracking event:",n)}}function Jte(t,e,n){try{Rx.event("timing_complete",{name:t,value:Math.round(e),event_category:n||"performance"}),De.debug("GA4 Timing:",t,e)}catch(r){De.error("Error tracking timing:",r)}}function ene(t,e){cs("scroll",{category:"engagement",scroll_depth:t,page:e||window.location.pathname})}function tne(t,e){cs("time_on_page",{category:"engagement",time_seconds:Math.round(t),page:e||window.location.pathname})}let nd=[];const iR=50;function nne(){if(typeof window>"u")return;const t=document.createElement("div");t.id="ga4-debugger",t.style.cssText=`
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 400px;
    max-height: 500px;
    background: rgba(0, 0, 0, 0.95);
    color: #00ff00;
    font-family: 'Courier New', monospace;
    font-size: 12px;
    padding: 15px;
    border-radius: 8px;
    z-index: 99999;
    overflow-y: auto;
    box-shadow: 0 4px 20px rgba(0, 255, 0, 0.3);
    display: none;
  `,t.innerHTML=`
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px solid #00ff00; padding-bottom: 10px;">
      <strong style="font-size: 14px;"> GA4 Debugger</strong>
      <div>
        <button id="ga4-clear" style="background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; margin-right: 5px;">Clear</button>
        <button id="ga4-close" style="background: #444; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Hide</button>
      </div>
    </div>
    <div id="ga4-events" style="max-height: 400px; overflow-y: auto;"></div>
  `,document.body.appendChild(t);const e=document.createElement("button");e.id="ga4-toggle",e.textContent=" GA4",e.style.cssText=`
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(0, 255, 0, 0.9);
    color: black;
    border: none;
    padding: 10px 15px;
    border-radius: 50px;
    cursor: pointer;
    z-index: 99998;
    font-weight: bold;
    box-shadow: 0 2px 10px rgba(0, 255, 0, 0.5);
    transition: all 0.3s;
  `,e.addEventListener("mouseenter",()=>{e.style.transform="scale(1.1)"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)"}),e.addEventListener("click",()=>{const n=document.getElementById("ga4-debugger");n&&(n.style.display=n.style.display==="none"?"block":"none")}),document.body.appendChild(e),document.getElementById("ga4-clear")?.addEventListener("click",()=>{nd=[];const n=document.getElementById("ga4-events");n&&(n.innerHTML='<p style="color: #888;">No events tracked yet...</p>')}),document.getElementById("ga4-close")?.addEventListener("click",()=>{const n=document.getElementById("ga4-debugger");n&&(n.style.display="none")}),De.success("GA4 Debugger inicializado - Click en el botn flotante para ver eventos")}function rne(t,e){if(typeof window>"u")return;const n={timestamp:Date.now(),action:t,params:e};nd.unshift(n),nd.length>iR&&(nd=nd.slice(0,iR));const r=document.getElementById("ga4-events");r&&(r.innerHTML=nd.map(s=>{const a=new Date(s.timestamp).toLocaleTimeString(),l=JSON.stringify(s.params,null,2);return`
      <div style="margin-bottom: 15px; padding: 10px; background: rgba(0, 255, 0, 0.1); border-left: 3px solid #00ff00; border-radius: 4px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
          <strong style="color: #00ffff;">${s.action}</strong>
          <span style="color: #888; font-size: 10px;">${a}</span>
        </div>
        <details>
          <summary style="cursor: pointer; color: #ffff00; margin-bottom: 5px;">Params</summary>
          <pre style="margin: 5px 0 0 0; padding: 8px; background: rgba(0, 0, 0, 0.5); border-radius: 4px; overflow-x: auto; font-size: 10px;">${l}</pre>
        </details>
      </div>
    `}).join(""))}const sne={"appointments.manualCreated":{action:"manual_appointment_created",category:jr.CONVERSION,requiredParams:["professional_id","service_id"]},"appointments.publicRequested":{action:"public_appointment_requested",category:jr.CONVERSION,requiredParams:["company_id","service_id"]},"appointments.confirmed":{action:"appointment_confirmed",category:jr.BUSINESS,requiredParams:["company_id"]},"products.orderSubmitted":{action:pi.PRODUCT_ORDER,category:jr.CONVERSION,requiredParams:["company_id"]},"companies.setupCompleted":{action:pi.COMPANY_SETUP,category:jr.BUSINESS},"contact.whatsappClick":{action:pi.WHATSAPP_CLICK,category:jr.NAVIGATION,requiredParams:["company_id"]}};function ane(t,e){const n=sne[t],r={...n.defaultParams,...e,category:n.category};return{action:n.action,params:r}}function ine(){const t=Ei(),e=x.useRef(t.pathname);x.useEffect(()=>{t.pathname!==e.current&&(Zte(t.pathname+t.search),fl("Page viewed",{path:t.pathname,search:t.search}),De.debug("Page tracked:",t.pathname),e.current=t.pathname)},[t])}function one(){const t=Ei(),e=x.useRef(Date.now());x.useEffect(()=>(e.current=Date.now(),()=>{const n=(Date.now()-e.current)/1e3;n>3&&(tne(n,t.pathname),De.debug("Time on page:",n,"seconds"))}),[t.pathname])}function lne(){const t=Ei(),e=x.useRef(new Set);x.useEffect(()=>{e.current=new Set;const n=()=>{const r=document.documentElement.scrollHeight-window.innerHeight,s=window.scrollY,a=Math.round(s/r*100);[25,50,75,100].forEach(u=>{a>=u&&!e.current.has(u)&&(e.current.add(u),ene(u,t.pathname),De.debug("Scroll depth:",u+"%"))})};return window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)},[t.pathname])}function cne(){return x.useCallback((t,e)=>{cs(pi.SEARCH,{category:jr.NAVIGATION,search_term:t,results_count:e}),fl("Search performed",{term:t,results:e}),De.debug("Search tracked:",t,e)},[])}function une(t){const e=x.useCallback(()=>{cs("form_start",{category:jr.ENGAGEMENT,form_name:t}),fl("Form started",{form:t}),De.debug("Form started:",t)},[t]),n=x.useCallback((s=!0)=>{cs(s?"form_complete":"form_error",{category:jr.ENGAGEMENT,form_name:t,success:s}),fl("Form completed",{form:t,success:s}),De.debug("Form completed:",t,s)},[t]),r=x.useCallback(s=>{cs("form_field_interaction",{category:jr.ENGAGEMENT,form_name:t,field_name:s})},[t]);return{trackFormStart:e,trackFormComplete:n,trackFormField:r}}function dne(t){const e=x.useCallback(()=>{cs("video_start",{category:jr.ENGAGEMENT,video_id:t}),De.debug("Video started:",t)},[t]),n=x.useCallback(s=>{cs("video_complete",{category:jr.ENGAGEMENT,video_id:t,video_duration:s}),De.debug("Video completed:",t,s)},[t]),r=x.useCallback(s=>{cs("video_progress",{category:jr.ENGAGEMENT,video_id:t,video_percent:s})},[t]);return{trackVideoStart:e,trackVideoComplete:n,trackVideoProgress:r}}function hne(){return x.useCallback((t,e)=>{cs(pi.ERROR_OCCURRED,{category:jr.ERROR,error_message:t.message,error_stack:t.stack,component:e?.componentStack}),De.error("Error tracked:",t.message)},[])}function eu(){ine(),one(),lne();const t=x.useCallback((l,u)=>{cs(l,u||{}),fl("Event tracked",{action:l,...u}),De.debug("Event tracked:",l)},[]),e=x.useCallback((l,u)=>{const{action:d,params:f}=ane(l,u);cs(d,f),fl("Named event tracked",{name:l,action:d,...f}),De.debug("Named event tracked:",l)},[]),n=x.useCallback(l=>u=>{cs(pi.CLICK,{category:jr.ENGAGEMENT,element_name:l,...u}),fl("Element clicked",{element:l,...u}),De.debug("Click tracked:",l)},[]),r=x.useCallback(()=>(l,u,d)=>{cs(l,{category:jr.CONVERSION,value:u,currency:"CLP",...d}),fl("Conversion tracked",{action:l,value:u,...d}),De.debug("Conversion tracked:",l,u)},[]),s=cne(),a=hne();return{trackEvent:t,trackNamedEvent:e,trackClick:n,trackConversion:r,trackSearch:s,trackForm:une,trackVideo:dne,trackError:a}}const fne="/assets/logopymerp-BbZ7DOOs.png",x5="https://agendaweb.app",mne="AgendaWeb";function pne(t,e=mne){const n=t.trim();return n.toLowerCase().includes(e.toLowerCase())?n:`${n} | ${e}`}function gne(t,e=x5){return t||(typeof window<"u"&&window.location?.href?window.location.href:e)}function yne(t,e){return t||(typeof window<"u"&&window.location?`${window.location.origin}${window.location.pathname}`:e||x5)}function xne(t){return t?Array.isArray(t)?t:[t]:[]}function vne(t){return xne(t).map(e=>JSON.stringify(e,null,2))}function Jo(t,e,n){if(!e||typeof document>"u")return;let r=document.head.querySelector(`meta[${n}="${t}"]`);r||(r=document.createElement("meta"),r.setAttribute(n,t),document.head.appendChild(r)),r.setAttribute("content",e)}function bne(t,e){if(!e||typeof document>"u")return;let n=document.head.querySelector(`link[rel="${t}"]`);n||(n=document.createElement("link"),n.setAttribute("rel",t),document.head.appendChild(n)),n.setAttribute("href",e)}function wne(t,e){if(typeof document>"u")return;const n=document.head.querySelector(`script[data-meta-id="${e}"]`);if(t){const r=n||document.createElement("script");r.type="application/ld+json",r.dataset.metaId=e,r.textContent=typeof t=="string"?t:JSON.stringify(t),n||document.head.appendChild(r)}else n&&n.remove()}function _ne(t){const e={"@context":"https://schema.org","@type":"Organization",name:t.name,url:t.url,logo:t.logo};if(t.description&&(e.description=t.description),t.email&&(e.email=t.email),t.phone&&(e.telephone=t.phone),t.address&&(e.address={"@type":"PostalAddress",streetAddress:t.address.street,addressLocality:t.address.city,addressRegion:t.address.region,postalCode:t.address.postalCode,addressCountry:t.address.country}),t.socialMedia){const n=[];t.socialMedia.facebook&&n.push(t.socialMedia.facebook),t.socialMedia.twitter&&n.push(t.socialMedia.twitter),t.socialMedia.instagram&&n.push(t.socialMedia.instagram),t.socialMedia.linkedin&&n.push(t.socialMedia.linkedin),n.length>0&&(e.sameAs=n)}return e}function Ene(t){const e={"@context":"https://schema.org","@type":"LocalBusiness",name:t.name,description:t.description,image:t.image,url:t.url,address:{"@type":"PostalAddress",streetAddress:t.address.street,addressLocality:t.address.city,addressRegion:t.address.region,postalCode:t.address.postalCode,addressCountry:t.address.country}};return t.phone&&(e.telephone=t.phone),t.priceRange&&(e.priceRange=t.priceRange),t.geo&&(e.geo={"@type":"GeoCoordinates",latitude:t.geo.latitude,longitude:t.geo.longitude}),t.openingHours&&t.openingHours.length>0&&(e.openingHoursSpecification=t.openingHours.map(n=>({"@type":"OpeningHoursSpecification",dayOfWeek:n.split(" ")[0],opens:n.split(" ")[1],closes:n.split(" ")[2]}))),t.rating&&(e.aggregateRating={"@type":"AggregateRating",ratingValue:t.rating.value,reviewCount:t.rating.count}),e}function Ir({title:t,description:e,keywords:n,author:r="AgendaWeb",ogType:s="website",ogImage:a="/og-default.jpg",ogImageAlt:l,ogUrl:u,twitterCard:d="summary_large_image",twitterSite:f="@agendaweb",twitterCreator:m,canonical:g,robots:y="index, follow",language:w="es",viewport:_="width=device-width, initial-scale=1.0",schema:C,customMeta:S=[]}){const N=x.useMemo(()=>gne(u),[u]),k=x.useMemo(()=>yne(g,N),[g,N]),R=x.useMemo(()=>pne(t),[t]),A=x.useMemo(()=>{const L=vne(C);return L.length===0?null:L.map((F,P)=>i.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:F}},`schema-${P}`))},[C]);return i.jsxs(b7,{children:[i.jsx("html",{lang:w}),i.jsx("title",{children:R}),i.jsx("meta",{name:"description",content:e}),n&&i.jsx("meta",{name:"keywords",content:n}),r&&i.jsx("meta",{name:"author",content:r}),i.jsx("meta",{name:"viewport",content:_}),i.jsx("meta",{name:"robots",content:y}),i.jsx("link",{rel:"canonical",href:k}),i.jsx("meta",{property:"og:type",content:s}),i.jsx("meta",{property:"og:title",content:R}),i.jsx("meta",{property:"og:description",content:e}),i.jsx("meta",{property:"og:url",content:N}),i.jsx("meta",{property:"og:image",content:a}),l&&i.jsx("meta",{property:"og:image:alt",content:l}),i.jsx("meta",{property:"og:site_name",content:"AgendaWeb"}),i.jsx("meta",{property:"og:locale",content:"es_ES"}),i.jsx("meta",{name:"twitter:card",content:d}),i.jsx("meta",{name:"twitter:title",content:R}),i.jsx("meta",{name:"twitter:description",content:e}),i.jsx("meta",{name:"twitter:image",content:a}),f&&i.jsx("meta",{name:"twitter:site",content:f}),m&&i.jsx("meta",{name:"twitter:creator",content:m}),i.jsx("meta",{name:"format-detection",content:"telephone=no"}),i.jsx("meta",{httpEquiv:"x-ua-compatible",content:"ie=edge"}),i.jsx("meta",{name:"theme-color",content:"#2563eb"}),S.map((L,F)=>L.name?i.jsx("meta",{name:L.name,content:L.content},`custom-${F}`):L.property?i.jsx("meta",{property:L.property,content:L.content},`custom-${F}`):null),A]})}function Cne(){const{t}=Zc("landing"),{trackClick:e}=eu(),[n,r]=x.useState(!0),s=()=>e("landing_cta_secondary")(),a=()=>e("landing_cta_primary")(),l=()=>e("landing_cta_nearby")(),u=()=>{r(!1),e("landing_overlay_close")()},d=_ne({name:t("brandName"),url:typeof window<"u"?window.location.origin:"https://pymerp.cl",logo:typeof window<"u"?`${window.location.origin}/logopymerp.png`:"https://pymerp.cl/logopymerp.png",description:t("tagline")});return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:t("seoTitle"),description:t("tagline"),keywords:t("seoKeywords"),ogImage:"/logopymerp.png",ogImageAlt:t("ogImageAlt"),schema:d,robots:"index, follow"}),i.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center relative",children:[n&&i.jsx("div",{className:"fixed inset-0 z-20 bg-gray-900/60 backdrop-blur-sm flex items-center justify-center px-4",role:"dialog","aria-modal":"true","aria-labelledby":"beta-announcement-title",children:i.jsxs("div",{className:"relative max-w-2xl w-full bg-white/10 border border-white/30 rounded-2xl shadow-2xl p-6 sm:p-8 text-center text-white",children:[i.jsx("button",{type:"button",onClick:u,className:"absolute top-3 right-3 text-white bg-black/50 hover:bg-black/60 rounded-full px-3 py-1 text-sm font-semibold shadow transition-colors","aria-label":t("betaOverlay.closeButton"),children:""}),i.jsxs("div",{className:"space-y-3 animate-pulse",children:[i.jsx("div",{className:"text-xs sm:text-sm uppercase tracking-[0.2em] text-blue-200",children:t("betaOverlay.title")}),i.jsx("h2",{id:"beta-announcement-title",className:"text-2xl sm:text-3xl font-extrabold leading-tight drop-shadow",children:t("betaOverlay.message")}),i.jsx("p",{className:"text-lg sm:text-xl font-semibold text-blue-100",children:t("betaOverlay.offer")}),i.jsx("p",{className:"text-sm sm:text-base text-blue-100",children:t("betaOverlay.launch")})]})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 w-full",children:[i.jsxs("nav",{className:"flex flex-col items-center gap-3 mb-6","aria-label":t("navigation.topBar"),children:[i.jsxs("div",{className:"flex justify-center gap-2",children:[i.jsx(KC,{}),i.jsx(GC,{})]}),i.jsx(jn,{to:"/login",className:"text-sm text-blue-700 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":t("navigation.alreadyAccountLink"),children:t("navigation.alreadyAccount")})]}),i.jsxs("main",{className:"bg-white shadow rounded-lg p-8 sm:p-10 text-center space-y-6",children:[i.jsxs("header",{className:"flex flex-col items-center gap-4",children:[i.jsx("img",{src:fne,alt:t("hero.logoAlt"),loading:"lazy",decoding:"async",width:224,height:140,className:"w-40 sm:w-48 md:w-56 drop-shadow"}),i.jsx("h1",{className:"sr-only",children:t("hero.title")})]}),i.jsx("p",{className:"text-lg sm:text-xl text-gray-700 leading-relaxed",children:t("hero.subtitle")}),i.jsxs("section",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 justify-center sm:items-center","aria-label":t("ctas.ariaLabel"),children:[i.jsx(jn,{to:"/login",onClick:s,className:"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t("ctas.loginAriaLabel"),children:t("ctas.loginButton")}),i.jsx(jn,{to:"/request-access",onClick:a,className:"w-full sm:w-auto px-8 py-3 bg-white text-blue-600 border-2 border-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t("ctas.requestAriaLabel"),children:t("ctas.requestButton")}),i.jsx(jn,{to:"/pymes-cercanas",onClick:l,className:"w-full sm:w-auto px-8 py-3 bg-gray-100 text-blue-700 border-2 border-blue-200 rounded-lg font-semibold hover:bg-gray-200 transition text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t("ctas.nearbyAriaLabel"),children:t("ctas.nearbyButton")})]})]}),i.jsxs("footer",{className:"mt-6 text-center text-sm text-gray-600 space-y-2","aria-label":t("footer.ariaLabel"),children:[i.jsx(jn,{to:"/transparencia",className:"text-blue-600 hover:underline font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1",children:t("footer.transparency")}),i.jsxs("div",{className:"flex justify-center items-center gap-2",children:[i.jsx("img",{src:"/instagram.svg",alt:"",loading:"lazy",decoding:"async",width:20,height:20,className:"h-5 w-5","aria-hidden":"true"}),i.jsx("a",{href:"https://instagram.com/pymerp",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":t("footer.instagramAriaLabel"),children:t("footer.instagramHandle")})]}),i.jsx("div",{className:"text-xs text-gray-500","aria-label":t("footer.versionAriaLabel"),children:t("footer.version")})]})]})]})]})}const Sne=()=>{const[t,e]=x.useState(!1),n=Ze();return i.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-gray-800/95 backdrop-blur-xl border-b border-gray-700/50 shadow-lg",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-18",children:[i.jsx(_e.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>n("/"),className:"flex items-center relative","aria-label":"Ir a inicio de PyM-ERP",whileTap:{scale:.95},children:i.jsx("div",{className:"relative",children:i.jsx("img",{src:"/logoapp.png",alt:"PyM-ERP Logo",className:"w-14 h-14 sm:w-16 sm:h-16 object-contain relative z-10"})})}),i.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:"hidden md:flex items-center space-x-3 lg:space-x-4",children:[i.jsx(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/login"),className:"px-4 py-2 text-gray-100 font-medium hover:text-white transition-colors duration-200 text-sm lg:text-base",children:"Iniciar Sesin"}),i.jsx(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/request-access"),className:"px-5 lg:px-6 py-2 bg-white text-gray-900 rounded-lg font-medium shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 text-sm lg:text-base",children:"Comenzar Gratis"})]}),i.jsx(_e.button,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},onClick:()=>e(!t),className:"md:hidden p-2 rounded-lg hover:bg-gray-700/50 active:bg-gray-600/50 transition-colors duration-200","aria-label":t?"Cerrar men de navegacin":"Abrir men de navegacin","aria-expanded":t,"aria-controls":"mobile-nav",type:"button",whileTap:{scale:.98},children:i.jsx("svg",{className:"w-6 h-6 text-gray-100",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",viewBox:"0 0 24 24",stroke:"currentColor",children:t?i.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):i.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]})}),i.jsx(_e.div,{initial:!1,animate:{height:t?"auto":0,opacity:t?1:0},transition:{duration:.3},id:"mobile-nav",className:"md:hidden overflow-hidden bg-gray-800/95 backdrop-blur-xl border-t border-gray-700/50 shadow-lg",children:i.jsxs("div",{className:"px-4 py-4 space-y-2",children:[i.jsx("button",{onClick:()=>{n("/login"),e(!1)},className:"block w-full text-center px-4 py-2.5 text-gray-100 font-medium border border-gray-600 rounded-lg hover:bg-gray-700/50 hover:border-gray-500 hover:text-white transition-all duration-200 active:scale-[0.98] bg-gray-800 shadow-sm",children:"Iniciar Sesin"}),i.jsx("button",{onClick:()=>{n("/request-access"),e(!1)},className:"block w-full text-center px-4 py-2.5 bg-white text-gray-900 rounded-lg font-medium shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 active:scale-[0.98]",children:"Comenzar Gratis"})]})})]})},Nne=()=>{const t=Ze();return i.jsxs("section",{"aria-labelledby":"landing-hero-heading",className:"relative min-h-screen flex items-center justify-center bg-white overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[i.jsx(_e.div,{initial:{opacity:0,scale:.8},animate:{opacity:.1,scale:1},transition:{duration:1.5},className:"absolute top-20 -left-20 w-96 h-96 bg-purple-500 rounded-full blur-3xl"}),i.jsx(_e.div,{initial:{opacity:0,scale:.8},animate:{opacity:.1,scale:1},transition:{duration:1.5,delay:.3},className:"absolute bottom-20 -right-20 w-96 h-96 bg-indigo-500 rounded-full blur-3xl"})]}),i.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16 text-center",children:i.jsxs(_e.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[i.jsxs(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},className:"inline-flex items-center px-4 py-2 mb-8 bg-indigo-100 text-indigo-700 rounded-full text-sm font-medium",children:[i.jsx("span",{className:"mr-2",children:""}),"Nuevo: Funcionalidades de IA disponibles"]}),i.jsxs(_e.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},id:"landing-hero-heading",className:"text-3xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-snug sm:leading-tight tracking-tight max-w-3xl mx-auto",children:["Transforma tu negocio a digital:"," ",i.jsx("span",{className:"text-indigo-700 sm:text-transparent sm:bg-clip-text sm:bg-gradient-to-r sm:from-indigo-600 sm:to-purple-600 block sm:inline",children:"Tu pgina web + agenda/catlogo/men"})," ",i.jsx("span",{className:"text-indigo-700 sm:text-transparent sm:bg-clip-text sm:bg-gradient-to-r sm:from-indigo-600 sm:to-purple-600 block sm:inline",children:"en solo 5 minutos"})]}),i.jsx(_e.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-lg sm:text-xl text-gray-700 font-medium mb-10 max-w-2xl mx-auto leading-relaxed",children:"Para todo tipo de negocios! Clinicas, talleres, barberias, spas, profesionales independientes, tiendas, agricultores, centros deportivos y ms. Sin conocimientos tcnicos, sin costos ocultos, rpido e intuitivo."}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/request-access"),className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold text-lg shadow-lg hover:shadow-xl transition-shadow duration-300 w-full sm:w-auto",children:"Solicitar acceso gratis "}),i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{document.getElementById("how-it-works")?.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-white text-gray-700 rounded-lg font-semibold text-lg border-2 border-gray-300 hover:border-gray-400 hover:bg-gray-50 transition-all duration-300 w-full sm:w-auto",children:"Cmo funciona"}),i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/features"),className:"px-8 py-4 bg-indigo-50 text-indigo-700 rounded-lg font-semibold text-lg border-2 border-indigo-200 hover:border-indigo-300 hover:bg-indigo-100 transition-all duration-300 w-full sm:w-auto",children:"Ver precios"})]}),i.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},className:"mt-10 flex flex-wrap justify-center gap-4 text-sm",children:[i.jsxs("span",{className:"flex items-center text-gray-700 font-medium",children:[i.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Plan BSICO gratis para siempre"]}),i.jsxs("span",{className:"flex items-center text-gray-700 font-medium",children:[i.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Sin tarjeta de crdito"]}),i.jsxs("span",{className:"flex items-center text-gray-700 font-medium",children:[i.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Listo en minutos"]})]}),i.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7},className:"mt-12",children:i.jsxs("div",{className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-teal-500 to-emerald-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer group",children:[i.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),i.jsx("path",{d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),i.jsx("button",{onClick:()=>t("/pymes-cercanas"),className:"font-semibold text-base",children:"Descubre PYMEs cercanas a ti"}),i.jsx("svg",{className:"w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{d:"M9 5l7 7-7 7"})})]})})]})})]})},jne=x.lazy(()=>Jc(()=>import("./HowItWorks-imsl8N6F.js"),__vite__mapDeps([0,1])).then(t=>({default:t.HowItWorks}))),Tne=x.lazy(()=>Jc(()=>import("./Features-Bn4DET5E.js"),__vite__mapDeps([2,1])).then(t=>({default:t.Features}))),kne=x.lazy(()=>Jc(()=>import("./Segmentation-BmoDjmrL.js"),__vite__mapDeps([3,1])).then(t=>({default:t.Segmentation}))),Dne=x.lazy(()=>Jc(()=>import("./Trust--7kOLrE6.js"),[]).then(t=>({default:t.Trust}))),Ane=x.lazy(()=>Jc(()=>import("./CTASection-DrtLZFYz.js"),[]).then(t=>({default:t.CTASection}))),Rne=()=>i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"PYM-ERP | Plataforma todo-en-uno para tu negocio",description:"Automatiza reservas, facturacin y marketing en una sola plataforma diseada para PYMES y profesionales independientes.",keywords:"pymes, agenda online, gestin de negocios, reservas, ERP",ogImage:"/logopymerp.png",ogImageAlt:"PYM-ERP plataforma",canonical:"/",robots:"index, follow"}),i.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-white",children:[i.jsx(Sne,{}),i.jsxs("main",{children:[i.jsx("div",{id:"hero",children:i.jsx(Nne,{})}),i.jsxs(x.Suspense,{fallback:i.jsx("div",{className:"space-y-12","aria-hidden":"true"}),children:[i.jsx("div",{id:"how-it-works",children:i.jsx(jne,{})}),i.jsx("div",{id:"features",children:i.jsx(Tne,{})}),i.jsx("div",{id:"segmentation",children:i.jsx(kne,{})}),i.jsx("div",{id:"trust",children:i.jsx(Dne,{})}),i.jsx(Ane,{})]})]}),i.jsx("footer",{className:"bg-gray-900 text-white py-12",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 md:gap-12",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Empresa"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsx("li",{children:i.jsx("a",{href:"/about",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Acerca de"})}),i.jsx("li",{children:i.jsx("a",{href:"/contacto",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Carreras"})}),i.jsx("li",{children:i.jsx("a",{href:"/contacto",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Prensa"})}),i.jsx("li",{children:i.jsx("a",{href:"/contacto",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Contacto"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Producto"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsx("li",{children:i.jsx("a",{href:"/features",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Precios"})}),i.jsx("li",{children:i.jsx("a",{href:"/security",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Seguridad"})}),i.jsx("li",{children:i.jsx("a",{href:"/roadmap",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Roadmap"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Recursos"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsx("li",{children:i.jsx("a",{href:"/contacto",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Documentacin"})}),i.jsx("li",{children:i.jsx("a",{href:"/contacto",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Blog"})}),i.jsx("li",{children:i.jsx("a",{href:"/contacto",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Centro de Ayuda"})}),i.jsx("li",{children:i.jsx("a",{href:"/contacto",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"API"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold mb-4 text-white",children:"Legal"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsx("li",{children:i.jsx("a",{href:"/privacidad",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Privacidad"})}),i.jsx("li",{children:i.jsx("a",{href:"/terminos",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Trminos"})}),i.jsx("li",{children:i.jsx("a",{href:"/privacidad",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Cookies"})}),i.jsx("li",{children:i.jsx("a",{href:"/terminos",className:"text-gray-300 hover:text-white transition-colors font-medium",children:"Licencias"})})]})]})]}),i.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-700 flex flex-col md:flex-row justify-between items-center gap-6",children:[i.jsx("p",{className:"text-gray-300 text-sm font-medium",children:" 2024 PyM-ERP. Todos los derechos reservados."}),i.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[i.jsxs("a",{href:"https://x.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"X de PYM-ERP",children:[i.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),i.jsx("span",{className:"sr-only",children:"X"})]}),i.jsxs("a",{href:"https://instagram.com/pymerp",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Instagram de PYM-ERP",children:[i.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"})}),i.jsx("span",{className:"sr-only",children:"Instagram"})]}),i.jsxs("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"LinkedIn de PYM-ERP",children:[i.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),i.jsx("span",{className:"sr-only",children:"LinkedIn"})]}),i.jsxs("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"GitHub de PYM-ERP",children:[i.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),i.jsx("span",{className:"sr-only",children:"GitHub"})]})]})]})]})})]})]}),v5=x.createContext(void 0);function Pne({children:t}){const{t:e}=Zc(),n=Ax(),r=async()=>{await E_(n==="es"?"en":"es")},s=x.useMemo(()=>({locale:n,language:n,toggleLocale:r,setLanguage:E_,t:e}),[n,e]);return i.jsx(v5.Provider,{value:s,children:t})}function b5(){const t=x.useContext(v5);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t}function w5({title:t,description:e,image:n="/logopymerp.png",url:r,structuredData:s,structuredDataId:a="page-json-ld"}){x.useEffect(()=>{const l=r||window.location.href;t&&(document.title=t,Jo("og:title",t,"property"),Jo("twitter:title",t,"name")),e&&(Jo("description",e,"name"),Jo("og:description",e,"property"),Jo("twitter:description",e,"name")),n&&(Jo("og:image",n,"property"),Jo("twitter:image",n,"name")),l&&(Jo("og:url",l,"property"),bne("canonical",l)),wne(s,a)},[t,e,n,r,s,a])}var Gs=(t=>(t.NETWORK="NETWORK_ERROR",t.AUTHENTICATION="AUTHENTICATION_ERROR",t.AUTHORIZATION="AUTHORIZATION_ERROR",t.VALIDATION="VALIDATION_ERROR",t.NOT_FOUND="NOT_FOUND_ERROR",t.SERVER="SERVER_ERROR",t.UNKNOWN="UNKNOWN_ERROR",t))(Gs||{});class Xs extends Error{type;context;timestamp;userId;constructor(e,n="UNKNOWN_ERROR",r){super(e),this.name="AppError",this.type=n,this.context=r,this.timestamp=new Date,Error.captureStackTrace&&Error.captureStackTrace(this,Xs)}}class Mne{userId;setUser(e){this.userId=e}createErrorReport(e){const n={message:e.message,type:e instanceof Xs?e.type:"UNKNOWN_ERROR",stack:e.stack,timestamp:new Date,userId:this.userId,userAgent:typeof window<"u"?window.navigator.userAgent:void 0,url:typeof window<"u"?window.location.href:void 0};return e instanceof Xs&&e.context&&(n.context=e.context),n}handle(e,n=!0){const r=this.createErrorReport(e);this.sendToSentry(r),n&&this.showUserFriendlyMessage(r.type)}sendToSentry(e){try{g5(new Error(e.message),{type:e.type,userId:e.userId,url:e.url,...e.context})}catch(n){De.error("Error enviando a Sentry:",n)}}showUserFriendlyMessage(e){}handleNetworkError(e,n){const r=new Xs(e.message||"Error de red","NETWORK_ERROR",n);this.handle(r)}handleAuthError(e){let n="AUTHENTICATION_ERROR",r="Error de autenticacin";switch(e.code){case"auth/wrong-password":case"auth/user-not-found":r="Email o contrasea incorrectos";break;case"auth/email-already-in-use":r="Este email ya est registrado";break;case"auth/weak-password":r="La contrasea es muy dbil";break;case"auth/invalid-email":r="Email invlido";break;case"auth/user-disabled":r="Esta cuenta ha sido deshabilitada";break;case"auth/too-many-requests":r="Demasiados intentos. Intenta ms tarde";break;default:r=e.message||"Error de autenticacin"}const s=new Xs(r,n,{code:e.code});this.handle(s)}handleFirestoreError(e,n){let r="SERVER_ERROR";e.code==="permission-denied"?r="AUTHORIZATION_ERROR":e.code==="not-found"&&(r="NOT_FOUND_ERROR");const s=new Xs(e.message||"Error de base de datos",r,{...n,code:e.code});this.handle(s)}async wrapAsync(e,n){try{return await e()}catch(r){return this.handle(new Xs(r.message||"Error en operacin asncrona","UNKNOWN_ERROR",n)),null}}}const Fg=new Mne,St=()=>{const t=x.useCallback((a,l)=>{const u=l?.showToast??!0,d=a instanceof Xs?a:new Xs(a.message||"Error desconocido",Gs.UNKNOWN,l?.context);if(Fg.handle(d,!1),u){const f=l?.customMessage||Lne(d);ue.error(f,{duration:4e3,position:"top-right"})}},[]),e=x.useCallback(async(a,l)=>{try{return await a()}catch(u){return t(u,{showToast:l?.showToast,customMessage:l?.customMessage,context:l?.context}),l?.onError&&l.onError(u),null}},[t]),n=x.useCallback(a=>{Fg.handleAuthError(a);const l=One(a);ue.error(l,{duration:5e3,position:"top-right"})},[]),r=x.useCallback((a,l)=>{Fg.handleFirestoreError(a,l);const u=Ine(a);ue.error(u,{duration:4e3,position:"top-right"})},[]),s=x.useCallback((a,l)=>{Fg.handleNetworkError(a,l),ue.error("Error de conexin. Verifica tu internet.",{duration:4e3,position:"top-right"})},[]);return{handleError:t,handleAsyncError:e,handleAuthError:n,handleFirestoreError:r,handleNetworkError:s}};function Lne(t){const e={[Gs.NETWORK]:"Error de conexin. Verifica tu internet.",[Gs.AUTHENTICATION]:"Error de autenticacin. Inicia sesin nuevamente.",[Gs.AUTHORIZATION]:"No tienes permisos para esta accin.",[Gs.VALIDATION]:"Los datos ingresados no son vlidos.",[Gs.NOT_FOUND]:"No se encontr el recurso solicitado.",[Gs.SERVER]:"Error del servidor. Intenta ms tarde.",[Gs.UNKNOWN]:t.message||"Ha ocurrido un error inesperado."};return e[t.type]||e[Gs.UNKNOWN]}function One(t){switch(t.code){case"auth/wrong-password":case"auth/user-not-found":return"Email o contrasea incorrectos";case"auth/email-already-in-use":return"Este email ya est registrado";case"auth/weak-password":return"La contrasea es muy dbil";case"auth/invalid-email":return"Email invlido";case"auth/user-disabled":return"Esta cuenta ha sido deshabilitada";case"auth/too-many-requests":return"Demasiados intentos. Intenta ms tarde";default:return t.message||"Error de autenticacin"}}function Ine(t){switch(t.code){case"permission-denied":return"No tienes permisos para acceder a este recurso";case"not-found":return"No se encontr el recurso solicitado";case"already-exists":return"Este recurso ya existe";case"resource-exhausted":return"Se alcanz el lmite de operaciones";case"unauthenticated":return"Debes iniciar sesin para continuar";default:return t.message||"Error de base de datos"}}function tu({isOpen:t,onClose:e,children:n,className:r="",ariaLabel:s="Dilogo modal",ariaDescribedBy:a}){const l=x.useRef(null),u=x.useRef(null);return x.useEffect(()=>(t?(u.current=document.activeElement,setTimeout(()=>{l.current?.focus()},100),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",u.current&&u.current.focus()),()=>{document.body.style.overflow="unset"}),[t]),x.useEffect(()=>{const d=f=>{f.key==="Escape"&&t&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t,e]),x.useEffect(()=>{if(!t)return;const d=f=>{if(f.key!=="Tab"||!l.current)return;const m=l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),g=m[0],y=m[m.length-1];f.shiftKey&&document.activeElement===g?(f.preventDefault(),y?.focus()):!f.shiftKey&&document.activeElement===y&&(f.preventDefault(),g?.focus())};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[t]),i.jsx(Ta,{children:t&&i.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e,role:"presentation",children:i.jsx(_e.div,{ref:l,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,type:"spring",damping:20},className:`bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto ${r}`,onClick:d=>d.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":s,"aria-describedby":a,tabIndex:-1,children:n})})})}function zn({size:t="md",color:e="#3b82f6",fullScreen:n=!1}){const r={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},s=i.jsx(_e.div,{className:`${r[t]} border-4 border-t-transparent rounded-full`,style:{borderColor:`${e}33`,borderTopColor:e},animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}});return n?i.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center min-h-screen",children:s}):s}function Vne(){const{handleError:t}=St(),[e,n]=x.useState(""),[r,s]=x.useState(""),[a,l]=x.useState(!1),[u,d]=x.useState(!1),[f,m]=x.useState(""),[g,y]=x.useState(!1),[w,_]=x.useState(!1),C=Ze(),{t:S}=b5(),{handleAuthError:N}=St();w5({title:`${S("login.title")} | PYM-ERP`,description:S("login.subtitle"),image:"/logopymerp.png"});const k=async R=>{R.preventDefault(),l(!0);try{await $ee(e,r);const A=await i0(e);if(A?.status===Cs.FORCE_PASSWORD_CHANGE)C("/change-password");else if(A?.role==="SUPERADMIN")C("/admin");else if(A?.company_id){const L=await Vr(A.company_id);L&&!L.setup_completed?C("/setup/company-basic"):C("/dashboard")}else C("/setup/company-basic");ue.success(S("login.successMessage"))}catch(A){N(A)}finally{l(!1)}};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center mb-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(KC,{}),i.jsx(GC,{})]})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:S("login.title")})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:k,children:[i.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"sr-only",children:S("common.email")}),i.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"email",className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:S("common.email"),value:e,onChange:R=>n(R.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"sr-only",children:S("common.password")}),i.jsx("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"current-password",className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:S("common.password"),value:r,onChange:R=>s(R.target.value)})]})]}),i.jsxs("div",{children:[i.jsx(xn,{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:a?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(zn,{size:"sm",color:"#ffffff"}),S("login.submittingButton"),"..."]}):S("login.submitButton")}),i.jsx(xn,{type:"button",onClick:()=>C("/"),className:"group relative w-full flex justify-center py-2 px-4 mt-3 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none fokus:ring-2 fokus:ring-offset-2 focus:ring-blue-500",children:S("common.backHome")}),i.jsx("div",{className:"mt-3 text-center",children:i.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-sm text-blue-600 hover:underline",children:S("login.forgotPassword")})})]})]})]})}),i.jsxs(tu,{isOpen:u,onClose:()=>{d(!1),_(!1),y(!1)},className:"p-6 relative",children:[i.jsx("button",{type:"button",onClick:()=>{d(!1),_(!1),y(!1)},className:"absolute top-3 right-3 text-gray-600 hover:text-gray-800 text-xl","aria-label":"Cerrar",children:""}),w?i.jsxs("div",{className:"text-center space-y-3 py-6",children:[i.jsx("div",{className:"text-5xl text-green-500",children:""}),i.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:S("login.resetSuccessTitle")}),i.jsx("p",{className:"text-sm text-gray-700",children:S("login.resetSuccessMessage")})]}):i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:S("login.resetPasswordTitle")}),i.jsx("p",{className:"text-sm text-gray-700 mb-4",children:S("login.resetPasswordMessage")}),i.jsxs("form",{className:"space-y-4",onSubmit:async R=>{R.preventDefault(),y(!0);try{const A=f.trim().toLowerCase();let L=null,F=null;try{[L,F]=await Promise.all([i0(A).catch(()=>null),iJ(A).catch(()=>null)])}catch(O){console.warn("No se pudieron leer datos de Firestore (no crtico):",O)}const P=L?.email||F?.email||A;await o5(P);try{L?.id&&await Nx(L.id,{status:Cs.ACTIVE})}catch(O){console.warn("No se pudo actualizar el estado del usuario (no crtico):",O)}try{F?.id&&await aJ(F.id,{last_password_reset:new Date})}catch(O){console.warn("No se pudo actualizar la solicitud de acceso (no crtico):",O)}_(!0),y(!1),setTimeout(()=>{d(!1),_(!1),C("/login")},1200)}catch(A){A.code==="auth/user-not-found"?(_(!0),y(!1),setTimeout(()=>{d(!1),_(!1),C("/login")},1200)):(t(A),ue.error(S("login.resetSendError")),y(!1))}finally{y(!1)}},children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:S("common.email")}),i.jsx("input",{type:"email",required:!0,autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:f,onChange:R=>m(R.target.value)})]}),i.jsx(xn,{type:"submit",className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:g,children:g?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx(zn,{size:"sm",color:"#ffffff"}),S("login.resetSendingButton"),"..."]}):S("login.resetSendButton")})]})]})]})]})}const Une=t=>{const{projectId:e,functionsRegion:n}=dn.firebase;return`https://${n}-${e}.cloudfunctions.net/${t}`},Fne=async t=>{try{const e=Une("sendAccessRequestEmailHttp"),n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,created_at:t.created_at.toISOString(),language:t.language||"es"})});if(!n.ok){const s=await n.text();let a;try{a=JSON.parse(s)}catch{a={error:s}}De.error(" Error HTTP:",n.status,a),De.warn(" Email no enviado:",a.error||a.message||"Error desconocido");return}const r=await n.json();r.success?De.success("Email de solicitud de acceso enviado correctamente"):(De.warn(" Email no enviado:",r.message||r.error),r.details&&De.error("Detalles del error:",r.details))}catch(e){De.error("Error completo enviando email:",e),De.error("Mensaje de error:",e.message)}},Bne=(t=12)=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let n="";for(let r=0;r<t;r++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},_5=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");function zne(){const{handleError:t}=St(),[e,n]=x.useState({full_name:"",email:"",business_name:"",whatsapp:"",plan:"BASIC",acceptedBeta:!1}),[r,s]=x.useState(!1),[a,l]=x.useState(!1),[u,d]=x.useState(null),[f,m]=x.useState(!1),g=Ze(),{t:y}=b5();w5({title:`${y("requestAccess.title")} | PYM-ERP`,description:y("requestAccess.subtitle"),image:"/logopymerp.png"});const w=async _=>{_.preventDefault();const C=e.email.trim().toLowerCase(),S=e.full_name.trim(),N=e.business_name.trim(),k=e.whatsapp.replace(/\D/g,"");if(!S||!N||!C){ue.error(y("requestAccess.submitError"));return}if(k.length<9||k.length>15){ue.error(y("requestAccess.invalidWhatsapp"));return}if(!e.acceptedBeta){ue.error(y("requestAccess.acceptBetaTerms"));return}s(!0);let R=null;try{const A={full_name:S,email:C,business_name:N,whatsapp:k,plan:e.plan},L=(e.plan||"BASIC").toUpperCase(),F=Bne(),P=N||C.split("@")[0]||C,O=_5(P);De.info(" Paso 1: Creando access request...");const T={...A,plan:L,whatsapp:k};De.info(" Datos del access request:",T),R=await sJ(T),De.info(" Access request creado:",R),De.info(" Paso 2: Creando usuario en Firebase Auth...");const V=(await Wee(C,F)).uid;De.info(" Usuario Auth creado:",V),De.info(" Paso 3: Creando documento de usuario en Firestore..."),await o0({email:C,status:Cs.FORCE_PASSWORD_CHANGE,role:It.ENTREPRENEUR},V),De.info(" Documento de usuario creado"),De.info(" Paso 4: Creando compaa...");const $=await cJ({owner_user_id:V,name:N,rut:"",industry:"",whatsapp:k,address:"",slug:O,setup_completed:!1,subscription_plan:L,business_type:un.SERVICES});De.info(" Compaa creada:",$),De.info(" Paso 5: Actualizando usuario con company_id..."),await Nx(V,{company_id:$}),De.info(" Usuario actualizado con company_id");try{await c5(V,$)}catch(U){De.warn("No se pudo asignar claim de compaa automticamente",U)}await Fne({...A,plan:L,created_at:new Date,language:Ax()}),await o5(C),await WA(),l(!0)}catch(A){if(De.error("Error completo en submitAccessRequest:",A),De.error("Error code:",A?.code),De.error("Error message:",A?.message),A?.code==="auth/email-already-in-use"){const L=y("requestAccess.emailAlreadyRegisteredLong");ue.error(L),d(L)}else{const L=A?.message||A?.code||"Error desconocido";De.error("Mostrando error al usuario:",L),ue.error(y("requestAccess.submitError")+": "+L)}t(A,{showToast:!1,context:{action:"submitAccessRequest"}})}finally{Yr.currentUser?.email?.toLowerCase()===C&&await WA().catch(()=>{}),s(!1)}};return a?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"max-w-md w-full text-center",children:i.jsxs("div",{className:"bg-white shadow rounded-lg p-8",children:[i.jsx("div",{className:"text-green-600 text-5xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:y("requestAccess.successTitle")}),i.jsx("p",{className:"text-gray-600 mb-6",children:y("requestAccess.successMessage")}),i.jsx("button",{onClick:()=>g("/"),className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:y("common.backHome")})]})})}):i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-center mb-2",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(KC,{}),i.jsx(GC,{})]})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:y("requestAccess.title")}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:y("requestAccess.subtitle")})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:[y("requestAccess.fullNameLabel")," *"]}),i.jsx("input",{id:"full_name",name:"full_name",type:"text",required:!0,autoComplete:"name",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:e.full_name,onChange:_=>n({...e,full_name:_.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:[y("common.email")," *"]}),i.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"email",className:`mt-1 appearance-none relative block w-full px-3 py-2 border ${u?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none sm:text-sm`,value:e.email,onChange:_=>{n({...e,email:_.target.value}),d(null)}}),u&&i.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[i.jsx("p",{className:"text-sm text-red-800",children:u}),i.jsx("button",{type:"button",onClick:()=>g("/login"),className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:y("requestAccess.goToLogin")})]})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"business_name",className:"block text-sm font-medium text-gray-700",children:[y("requestAccess.businessNameLabel")," *"]}),i.jsx("input",{id:"business_name",name:"business_name",type:"text",required:!0,autoComplete:"organization",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"",value:e.business_name,onChange:_=>n({...e,business_name:_.target.value})}),i.jsx("div",{className:"relative overflow-hidden h-5 mt-1",children:i.jsx("span",{className:"absolute whitespace-nowrap text-xs text-blue-600 animate-marquee",children:y("requestAccess.businessNameHint")})})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"whatsapp",className:"block text-sm font-medium text-gray-700",children:[y("requestAccess.whatsappLabel")," *"]}),i.jsx("input",{id:"whatsapp",name:"whatsapp",type:"tel",required:!0,autoComplete:"tel",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"+56912345678",value:e.whatsapp,onChange:_=>n({...e,whatsapp:_.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"plan",className:"block text-sm font-medium text-gray-700",children:y("requestAccess.planLabel")}),i.jsx("select",{id:"plan",name:"plan",className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-gray-50 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm cursor-not-allowed",value:e.plan,disabled:!0,children:i.jsx("option",{value:"BASIC",children:y("requestAccess.plans.basic")})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"El plan BSICO es gratis para siempre"})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("input",{id:"acceptedBeta",name:"acceptedBeta",type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:e.acceptedBeta,onChange:_=>n({...e,acceptedBeta:_.target.checked}),required:!0}),i.jsxs("label",{htmlFor:"acceptedBeta",className:"text-sm text-gray-700",children:[y("requestAccess.acceptBetaLabel")," ",i.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-blue-600 hover:underline font-semibold",children:y("requestAccess.betaTermsLink")})]})]})]}),i.jsxs("div",{children:[i.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y(r?"requestAccess.sendingButton":"requestAccess.submitButton")}),u&&i.jsx("p",{className:"mt-2 text-xs text-center text-red-600",children:y("requestAccess.cannotSubmitWithRegisteredEmail")}),i.jsx("button",{type:"button",onClick:()=>g("/"),className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mt-3",children:y("common.backHome")})]})]})]}),f&&i.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 backdrop-blur-sm flex items-center justify-center px-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 sm:p-8 relative",children:[i.jsx("button",{type:"button",onClick:()=>m(!1),className:"absolute top-3 right-3 text-gray-600 hover:text-gray-800 text-xl","aria-label":"Cerrar",children:""}),i.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:y("requestAccess.betaConditionsTitle")}),i.jsxs("div",{className:"space-y-3 text-gray-700 text-sm sm:text-base",children:[i.jsx("p",{children:y("requestAccess.betaCondition1")}),i.jsx("p",{children:y("requestAccess.betaCondition2")}),i.jsx("p",{children:y("requestAccess.betaCondition3")}),i.jsx("p",{children:y("requestAccess.betaCondition4")}),i.jsx("p",{children:y("requestAccess.betaCondition5")})]})]})})]})}function Hne(){const{handleError:t}=St(),[e]=dM(),n=Ze(),[r,s]=x.useState(""),[a,l]=x.useState(""),[u,d]=x.useState(!1),[f,m]=x.useState(!1),[g,y]=x.useState(null);x.useEffect(()=>{const _=e.get("mode"),C=e.get("oobCode");_==="resetPassword"&&C&&(m(!0),y(C))},[e]);const w=async _=>{if(_.preventDefault(),r!==a){ue.error("Las contraseas no coinciden");return}if(r.length<6){ue.error("La contrasea debe tener al menos 6 caracteres");return}d(!0);try{f&&g?(await MY(Yr,g,r),ue.success("Contrasea restablecida exitosamente"),n("/login")):(await Yee(r),ue.success("Contrasea cambiada exitosamente"),window.location.replace("/setup/company-basic"))}catch(C){t(C,{customMessage:"Error al cambiar la contrasea",context:{action:"changePassword"}})}finally{d(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:f?"Restablecer contrasea":"Cambiar contrasea"}),i.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:f?"Ingresa tu nueva contrasea para restablecer tu cuenta":"Debes cambiar tu contrasea antes de continuar"})]}),i.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Nueva contrasea *"}),i.jsx("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"new-password",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:r,onChange:_=>s(_.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar contrasea *"}),i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,autoComplete:"new-password",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:a,onChange:_=>l(_.target.value)})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:u?"Cambiando...":"Cambiar contrasea"})})]})]})})}function $ne(){const[t]=dM(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState("loading"),[a,l]=x.useState("");return x.useEffect(()=>{(async()=>{const d=t.get("mode"),f=t.get("oobCode");if(!d||!f){s("error"),l("Enlace invlido o expirado. Por favor, solicita un nuevo enlace.");return}try{switch(d){case"verifyEmail":{await LY(Yr,f),s("success"),l("Tu correo electrnico ha sido verificado correctamente."),ue.success("Correo verificado correctamente"),setTimeout(()=>{e("/login?verified=true")},2e3);break}case"resetPassword":{try{await OY(Yr,f),e(`/change-password?oobCode=${f}&mode=resetPassword`)}catch{s("error"),l("Este enlace ha expirado o ya fue utilizado. Por favor, solicita un nuevo enlace de recuperacin."),ue.error("Enlace invlido o expirado"),setTimeout(()=>{e("/login")},3e3)}break}case"recoverEmail":{try{await M3(Yr,f),s("success"),l("Tu email ha sido recuperado correctamente."),ue.success("Email recuperado correctamente"),setTimeout(()=>{e("/login")},2e3)}catch{s("error"),l("Este enlace ha expirado o ya fue utilizado."),ue.error("Enlace invlido o expirado"),setTimeout(()=>{e("/login")},3e3)}break}default:s("error"),l(`Modo de accin no reconocido: ${d}`),setTimeout(()=>{e("/login")},3e3)}}catch(m){console.error("Error procesando accin de Auth:",m),n(m),s("error");let g="Ocurri un error al procesar tu solicitud.";m.code==="auth/expired-action-code"?g="Este enlace ha expirado. Por favor, solicita un nuevo enlace.":m.code==="auth/invalid-action-code"?g="Este enlace es invlido o ya fue utilizado. Por favor, solicita un nuevo enlace.":m.code==="auth/user-disabled"&&(g="Esta cuenta ha sido deshabilitada. Por favor, contacta al soporte."),l(g),ue.error(g),setTimeout(()=>{e("/login")},4e3)}})()},[t,e,n]),i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[r==="loading"&&i.jsxs(i.Fragment,{children:[i.jsx(zn,{size:"lg"}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mt-6 mb-2",children:"Procesando tu solicitud..."}),i.jsx("p",{className:"text-gray-600",children:"Por favor espera mientras verificamos tu enlace."})]}),r==="success"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-6xl text-green-500 mb-4",children:""}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Operacin exitosa!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:a}),i.jsx("p",{className:"text-sm text-gray-500",children:"Sers redirigido automticamente..."})]}),r==="error"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-6xl text-red-500 mb-4",children:""}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error al procesar"}),i.jsx("p",{className:"text-gray-600 mb-6",children:a}),i.jsx("button",{onClick:()=>e("/login"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:"Volver al inicio de sesin"})]})]})})}const h0=[{id:"arica-parinacota",name:"Arica y Parinacota",children:[{id:"arica",name:"Arica",children:[{id:"arica-city",name:"Arica"},{id:"camarones",name:"Camarones"}]},{id:"parinacota",name:"Parinacota",children:[{id:"putre",name:"Putre"},{id:"general-lagos",name:"General Lagos"}]}]},{id:"tarapaca",name:"Tarapac",children:[{id:"iquique",name:"Iquique",children:[{id:"iquique-city",name:"Iquique"},{id:"alto-hospicio",name:"Alto Hospicio"}]},{id:"tamarugal",name:"Tamarugal",children:[{id:"pica",name:"Pica"},{id:"huara",name:"Huara"}]}]},{id:"antofagasta",name:"Antofagasta",children:[{id:"antofagasta-prov",name:"Antofagasta",children:[{id:"antofagasta-city",name:"Antofagasta"},{id:"mejillones",name:"Mejillones"},{id:"sierra-gorda",name:"Sierra Gorda"}]},{id:"el-loa",name:"El Loa",children:[{id:"calama",name:"Calama"},{id:"ollague",name:"Ollage"}]}]},{id:"atacama",name:"Atacama",children:[{id:"copiapo",name:"Copiap",children:[{id:"copiapo-city",name:"Copiap"},{id:"caldera",name:"Caldera"}]},{id:"chanaral",name:"Chaaral",children:[{id:"chanaral-city",name:"Chaaral"},{id:"diego-de-almagro",name:"Diego de Almagro"}]}]},{id:"coquimbo",name:"Coquimbo",children:[{id:"elqui",name:"Elqui",children:[{id:"la-serena",name:"La Serena"},{id:"coquimbo-city",name:"Coquimbo"},{id:"vicuna",name:"Vicua"}]},{id:"limari",name:"Limar",children:[{id:"ovalle",name:"Ovalle"},{id:"combarbala",name:"Combarbal"}]}]},{id:"valparaiso",name:"Valparaso",children:[{id:"valparaiso-prov",name:"Valparaso",children:[{id:"valparaiso-city",name:"Valparaso"},{id:"vina-del-mar",name:"Via del Mar"},{id:"concon",name:"Concn"},{id:"quintero",name:"Quintero"}]},{id:"san-antonio",name:"San Antonio",children:[{id:"san-antonio-city",name:"San Antonio"},{id:"cartagena",name:"Cartagena"}]}]},{id:"metropolitana",name:"Regin Metropolitana",children:[{id:"santiago",name:"Santiago",children:[{id:"santiago-centro",name:"Santiago"},{id:"providencia",name:"Providencia"},{id:"las-condes",name:"Las Condes"},{id:"nunoa",name:"uoa"},{id:"maipu",name:"Maip"},{id:"san-miguel",name:"San Miguel"},{id:"la-florida",name:"La Florida"},{id:"puente-alto",name:"Puente Alto"},{id:"san-bernardo",name:"San Bernardo"},{id:"recoleta",name:"Recoleta"},{id:"independencia",name:"Independencia"},{id:"estacion-central",name:"Estacin Central"}]},{id:"cordillera",name:"Cordillera",children:[{id:"puente-alto-prov",name:"Puente Alto"},{id:"pirque",name:"Pirque"}]}]},{id:"ohiggins",name:"O'Higgins",children:[{id:"cachapoal",name:"Cachapoal",children:[{id:"rancagua",name:"Rancagua"},{id:"codegua",name:"Codegua"}]},{id:"colchagua",name:"Colchagua",children:[{id:"san-fernando",name:"San Fernando"},{id:"chimbarongo",name:"Chimbarongo"}]}]},{id:"maule",name:"Maule",children:[{id:"talca",name:"Talca",children:[{id:"talca-city",name:"Talca"},{id:"curico",name:"Curic"}]},{id:"linares",name:"Linares",children:[{id:"linares-city",name:"Linares"},{id:"longavi",name:"Longav"}]}]},{id:"biobio",name:"Biobo",children:[{id:"concepcion",name:"Concepcin",children:[{id:"concepcion-city",name:"Concepcin"},{id:"talcahuano",name:"Talcahuano"},{id:"san-pedro",name:"San Pedro de la Paz"}]},{id:"arauco",name:"Arauco",children:[{id:"lebu",name:"Lebu"},{id:"caete",name:"Caete"}]}]},{id:"araucania",name:"La Araucana",children:[{id:"cautin",name:"Cautn",children:[{id:"temuco",name:"Temuco"},{id:"villarrica",name:"Villarrica"}]},{id:"malleco",name:"Malleco",children:[{id:"angol",name:"Angol"},{id:"collipulli",name:"Collipulli"}]}]},{id:"los-rios",name:"Los Ros",children:[{id:"valdivia",name:"Valdivia",children:[{id:"valdivia-city",name:"Valdivia"},{id:"corral",name:"Corral"}]}]},{id:"los-lagos",name:"Los Lagos",children:[{id:"llanquihue",name:"Llanquihue",children:[{id:"puerto-montt",name:"Puerto Montt"},{id:"puerto-varas",name:"Puerto Varas"}]}]},{id:"aysen",name:"Aysn",children:[{id:"coyhaique",name:"Coyhaique",children:[{id:"coyhaique-city",name:"Coyhaique"},{id:"aysen",name:"Aysn"}]}]},{id:"magallanes",name:"Magallanes",children:[{id:"magallanes-prov",name:"Magallanes",children:[{id:"punta-arenas",name:"Punta Arenas"},{id:"puerto-natales",name:"Puerto Natales"}]}]}];function $w(t){return t.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").replace(/[^\w\s]/g,"").trim()}function Wu(t){if(!t||!t.trim())return null;const e=$w(t);for(const s of h0)if(s.children){for(const a of s.children)if(a.children){for(const l of a.children)if($w(l.name)===e)return{region:s.name,province:a.name,commune:l.name}}}for(const s of h0)if(s.children){for(const a of s.children)if(a.children)for(const l of a.children){const u=$w(l.name);if(u.includes(e)||e.includes(u))return{region:s.name,province:a.name,commune:l.name}}}const r={santiago:{region:"Regin Metropolitana",province:"Santiago",commune:"Santiago"},providencia:{region:"Regin Metropolitana",province:"Santiago",commune:"Providencia"},"las condes":{region:"Regin Metropolitana",province:"Santiago",commune:"Las Condes"},nuoa:{region:"Regin Metropolitana",province:"Santiago",commune:"uoa"},nunoa:{region:"Regin Metropolitana",province:"Santiago",commune:"uoa"},maipu:{region:"Regin Metropolitana",province:"Santiago",commune:"Maip"},maip:{region:"Regin Metropolitana",province:"Santiago",commune:"Maip"},valparaiso:{region:"Valparaso",province:"Valparaso",commune:"Valparaso"},valparaso:{region:"Valparaso",province:"Valparaso",commune:"Valparaso"},"vina del mar":{region:"Valparaso",province:"Valparaso",commune:"Via del Mar"},"via del mar":{region:"Valparaso",province:"Valparaso",commune:"Via del Mar"},concepcion:{region:"Biobo",province:"Concepcin",commune:"Concepcin"},concepcin:{region:"Biobo",province:"Concepcin",commune:"Concepcin"}}[e];return r||null}function qne(){const t=Ze(),{handleError:e}=St(),[n,r]=x.useState([]),[s,a]=x.useState(!0),[l,u]=x.useState(null),d=dn.googleMapsApiKey,[f,m]=x.useState({country:"chile",region:"",province:"",commune:"",sector:"",showAll:!1});x.useEffect(()=>{(async()=>{try{const A=await oJ();r(A)}catch(A){e(A,{customMessage:"Error cargando empresas",showToast:!1})}finally{a(!1)}})()},[]);const g=x.useMemo(()=>{const R=new Set;return n.forEach(A=>{A.sector&&A.sector.trim()&&R.add(A.sector.trim()),A.industry&&A.industry.trim()&&R.add(A.industry.trim())}),Array.from(R).sort()},[n]),y=x.useMemo(()=>{const R=new Set;return n.forEach(A=>{if(A.commune){const L=Wu(A.commune);L&&R.add(L.region)}}),Array.from(R).sort()},[n]),w=x.useMemo(()=>{if(!f.region)return[];const R=h0.find(L=>L.name===f.region);if(!R||!R.children)return[];const A=new Set;return n.forEach(L=>{if(L.commune){const F=Wu(L.commune);F&&F.region===f.region&&A.add(F.province)}}),R.children.filter(L=>A.has(L.name)).map(L=>L.name).sort()},[f.region,n]),_=x.useMemo(()=>{if(!f.province)return[];const R=h0.find(F=>F.name===f.region);if(!R||!R.children)return[];const A=R.children.find(F=>F.name===f.province);if(!A||!A.children)return[];const L=new Set;return n.forEach(F=>{if(F.commune){const P=Wu(F.commune);P&&P.region===f.region&&P.province===f.province&&L.add(P.commune)}}),A.children.filter(F=>L.has(F.name)).map(F=>F.name).sort()},[f.region,f.province,n]),C=R=>R.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim(),S=x.useMemo(()=>{let R=n;if(f.showAll){if(f.sector){const A=C(f.sector);R=R.filter(L=>{const F=L.sector?C(L.sector):"",P=L.industry?C(L.industry):"";return F===A||P===A||F.includes(A)||P.includes(A)||A.includes(F)||A.includes(P)})}return R}if(f.commune?R=R.filter(A=>{if(!A.commune)return!1;const L=Wu(A.commune);return L?C(L.commune)===C(f.commune):!1}):f.province?R=R.filter(A=>{if(!A.commune)return!1;const L=Wu(A.commune);return L?C(L.province)===C(f.province):!1}):f.region&&(R=R.filter(A=>{if(!A.commune)return!1;const L=Wu(A.commune);return L?C(L.region)===C(f.region):!1})),f.sector){const A=C(f.sector);R=R.filter(L=>{const F=L.sector?C(L.sector):"",P=L.industry?C(L.industry):"";return F===A||P===A||F.includes(A)||P.includes(A)||A.includes(F)||A.includes(P)})}return R},[n,f]),N=(R,A)=>{m(L=>{const F={...L,[R]:A};return R==="region"?(F.province="",F.commune=""):R==="province"?F.commune="":R==="showAll"&&A===!0&&(F.region="",F.province="",F.commune=""),F})},k=()=>{m({country:"chile",region:"",province:"",commune:"",sector:"",showAll:!1})};return s?i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"PYMEs Cercanas | PyM-ERP",description:"Encuentra PYMEs y emprendimientos cerca de ti. Explora negocios locales en tu regin, provincia o comuna.",canonical:"/pymes-cercanas"}),i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-800",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-300",children:"Cargando PYMEs..."})]})})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"PYMEs Cercanas | PyM-ERP",description:"Encuentra PYMEs y emprendimientos cerca de ti. Explora negocios locales en tu regin, provincia o comuna.",canonical:"/pymes-cercanas"}),i.jsxs("div",{className:"min-h-screen bg-gray-800 py-8 px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("button",{type:"button",onClick:()=>t(-1),className:"p-2 rounded-full border border-gray-600 hover:bg-gray-700 text-gray-300 transition-colors","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:"PYMEs Cercanas"})]}),i.jsx("p",{className:"text-gray-300 text-lg max-w-3xl",children:"Explora y encuentra PYMEs y emprendimientos cerca de ti. Filtra por ubicacin o sector para descubrir negocios locales."})]}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gray-700 rounded-xl shadow-lg border border-gray-600 p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Filtros de Bsqueda"}),(f.region||f.province||f.commune||f.sector||f.showAll)&&i.jsx("button",{onClick:k,className:"text-sm text-cyan-400 hover:text-cyan-300 font-medium",children:"Limpiar filtros"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Pas"}),i.jsx("select",{value:f.country,onChange:R=>N("country",R.target.value),className:"w-full px-4 py-2.5 bg-gray-600 border-2 border-gray-500 text-white rounded-lg focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 outline-none transition-colors",disabled:!0,children:i.jsx("option",{value:"chile",children:"Chile"})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-white mb-2",children:["Regin ",f.showAll&&i.jsx("span",{className:"text-gray-400 text-xs",children:"(deshabilitado)"})]}),i.jsxs("select",{value:f.region,onChange:R=>N("region",R.target.value),disabled:f.showAll,className:`w-full px-4 py-2.5 bg-gray-600 border-2 rounded-lg focus:ring-2 outline-none transition-colors text-white ${f.showAll?"border-gray-500 bg-gray-700 text-gray-400 cursor-not-allowed":"border-gray-500 focus:border-cyan-400 focus:ring-cyan-400/20"}`,children:[i.jsx("option",{value:"",children:"Todas las regiones"}),y.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-white mb-2",children:["Provincia ",(!f.region||f.showAll)&&i.jsx("span",{className:"text-gray-400 text-xs",children:"(deshabilitado)"})]}),i.jsxs("select",{value:f.province,onChange:R=>N("province",R.target.value),disabled:!f.region||f.showAll,className:`w-full px-4 py-2.5 bg-gray-600 border-2 rounded-lg focus:ring-2 outline-none transition-colors text-white ${!f.region||f.showAll?"border-gray-500 bg-gray-700 text-gray-400 cursor-not-allowed":"border-gray-500 focus:border-cyan-400 focus:ring-cyan-400/20"}`,children:[i.jsx("option",{value:"",children:"Todas las provincias"}),w.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-white mb-2",children:["Comuna ",(!f.province||f.showAll)&&i.jsx("span",{className:"text-gray-400 text-xs",children:"(deshabilitado)"})]}),i.jsxs("select",{value:f.commune,onChange:R=>N("commune",R.target.value),disabled:!f.province||f.showAll,className:`w-full px-4 py-2.5 bg-gray-600 border-2 rounded-lg focus:ring-2 outline-none transition-colors text-white ${!f.province||f.showAll?"border-gray-500 bg-gray-700 text-gray-400 cursor-not-allowed":"border-gray-500 focus:border-cyan-400 focus:ring-cyan-400/20"}`,children:[i.jsx("option",{value:"",children:"Todas las comunas"}),_.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Sector / Categora"}),i.jsxs("select",{value:f.sector,onChange:R=>N("sector",R.target.value),className:"w-full px-4 py-2.5 bg-gray-600 border-2 border-gray-500 text-white rounded-lg focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 outline-none transition-colors",children:[i.jsx("option",{value:"",children:"Todos los sectores"}),g.map(R=>i.jsx("option",{value:R,children:R},R))]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center gap-3 p-4 border-2 border-gray-500 rounded-lg hover:border-cyan-400 cursor-pointer transition-colors w-full bg-gray-600/50",children:[i.jsx("input",{type:"checkbox",checked:f.showAll,onChange:R=>N("showAll",R.target.checked),className:"w-5 h-5 text-cyan-400 border-gray-500 rounded focus:ring-cyan-400 bg-gray-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold text-white",children:"Mostrar todas las PYMEs"}),i.jsx("div",{className:"text-xs text-gray-300",children:"Ignora filtros de ubicacin"})]})]})})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-600",children:i.jsxs("p",{className:"text-sm text-gray-300",children:[i.jsx("span",{className:"font-semibold text-white",children:S.length})," PYME",S.length!==1?"s":""," encontrada",S.length!==1?"s":""]})})]}),S.length===0?i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gray-700 rounded-xl shadow-lg border border-gray-600 p-12 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No se encontraron PYMEs"}),i.jsx("p",{className:"text-gray-300 mb-6",children:'Intenta ajustar los filtros o selecciona "Mostrar todas las PYMEs" para ver todos los negocios disponibles.'}),i.jsx("button",{onClick:()=>N("showAll",!0),className:"px-6 py-3 bg-cyan-500 text-white rounded-lg font-semibold hover:bg-cyan-600 transition-colors",children:"Mostrar todas las PYMEs"})]}):i.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map((R,A)=>i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+A*.05},className:"bg-gray-700 rounded-xl shadow-md border border-gray-600 p-6 hover:shadow-lg hover:border-cyan-400 transition-all cursor-pointer",onClick:()=>u(R),children:[i.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-16 h-16 bg-gradient-to-br from-cyan-500/20 to-purple-500/20 rounded-lg flex items-center justify-center text-2xl",children:R.business_type==="PRODUCTS"?"":""}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-1 truncate",children:R.name||"Sin nombre"}),R.commune&&i.jsxs("p",{className:"text-sm text-gray-300 flex items-center gap-1",children:[i.jsx("span",{children:""}),i.jsx("span",{children:R.commune})]})]})]}),(R.sector||R.industry)&&i.jsx("div",{className:"mb-3",children:i.jsx("span",{className:"inline-block px-3 py-1 bg-cyan-500/20 text-cyan-300 text-xs font-semibold rounded-full",children:R.sector||R.industry})}),R.description&&i.jsx("p",{className:"text-sm text-gray-300 line-clamp-2 mb-4",children:R.description}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-600",children:[i.jsx("a",{href:`/${R.slug}`,onClick:L=>L.stopPropagation(),target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 font-semibold text-sm",children:"Ver pgina "}),R.whatsapp&&i.jsx("a",{href:`https://wa.me/${R.whatsapp.replace(/\D/g,"")}`,onClick:L=>L.stopPropagation(),target:"_blank",rel:"noopener noreferrer",className:"text-green-400 hover:text-green-300 text-xl","aria-label":"Contactar por WhatsApp",children:""})]})]},R.id))})]}),l&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 px-4",children:i.jsxs(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gray-700 rounded-xl shadow-xl max-w-3xl w-full max-h-[80vh] overflow-hidden flex flex-col border border-gray-600",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-600",children:[i.jsx("h3",{className:"text-xl font-bold text-white",children:l.name}),i.jsx("button",{onClick:()=>u(null),className:"text-gray-300 hover:text-white text-2xl font-bold","aria-label":"Cerrar",children:""})]}),i.jsx("div",{className:"overflow-y-auto p-6",children:i.jsxs("div",{className:"space-y-4",children:[l.commune&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-cyan-300",children:" Ubicacin:"}),i.jsx("p",{className:"text-white",children:l.commune}),l.address&&i.jsx("p",{className:"text-sm text-gray-300",children:l.address})]}),(l.sector||l.industry)&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-cyan-300",children:" Sector:"}),i.jsx("p",{className:"text-white",children:l.sector||l.industry})]}),l.description&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-cyan-300",children:" Descripcin:"}),i.jsx("p",{className:"text-gray-200",children:l.description})]}),l.latitude&&l.longitude&&d&&i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-cyan-300 mb-2 block",children:" Mapa:"}),i.jsx("img",{src:`https://maps.googleapis.com/maps/api/staticmap?center=${l.latitude},${l.longitude}&zoom=14&size=600x300&markers=color:red|${l.latitude},${l.longitude}&key=${d}`,alt:"Mapa de ubicacin",className:"w-full rounded-lg border border-gray-600"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("a",{href:`/${l.slug}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-6 py-3 bg-cyan-500 text-white rounded-lg font-semibold hover:bg-cyan-600 transition-colors text-center",children:"Ver Pgina Pblica"}),l.whatsapp&&i.jsx("a",{href:`https://wa.me/${l.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition-colors flex items-center gap-2",children:" WhatsApp"})]})]})})]})})]})]})}function Yne(){const t=Ze(),e=[{id:"free",name:"FREE",tagline:"Empezar",price:"$0",period:"/mes",description:"Para independientes y micro-emprendedores",color:"from-gray-500 to-gray-600",buttonText:"Empezar Gratis",includes:["1 usuario","1 profesional","1 sucursal","Agenda / Catlogo bsica","Agenda / Catlogo manual","Clientes (mx. 20)","Catlogo servicios (mx. 5)","Citas (mx. 30 / mes)","Correos automticos bsicos"],limitations:["Sin ventas","Sin compras","Sin inventario","Sin proveedores","Sin reportes","Sin exportaciones",'Marca "Powered by PymeERP"',"Sin soporte humano"],features:{usuarios:"1",profesionales:"1",sucursales:"1",agenda:!0,ventas:!1,compras:!1,inventario:null,reportes:null,rrhh:!1}},{id:"starter",name:"STARTER",tagline:"Agenda / Catlogo Pro",price:"$29.990",period:"/mes",description:"Para micro-pymes que necesitan orden",color:"from-green-500 to-green-600",buttonText:"Comenzar Starter",includes:["Hasta 2 usuarios","Hasta 3 profesionales","1 sucursal","Agenda / Catlogo completa","Agenda / Catlogo manual desde dashboard","Clientes ilimitados","Catlogo de servicios ilimitado","Citas (hasta 300 / mes)","Cancelaciones y reprogramaciones","Correos automticos","Historial del cliente"],limitations:["Ventas","Compras","Inventario","Proveedores","Reportes financieros","Multi-sucursal"],features:{usuarios:"2",profesionales:"3",sucursales:"1",agenda:!0,ventas:!1,compras:!1,inventario:null,reportes:null,rrhh:!1}},{id:"pro",name:"PRO",tagline:"Control del Negocio",price:"$89.990",period:"/mes",description:"Para pymes que venden servicios y productos",color:"from-blue-500 to-blue-600",buttonText:"Comenzar Pro",includes:["Hasta 15 usuarios","Hasta 15 profesionales","1 sucursal","Todo lo de Starter +","Ventas completas","Clientes y proveedores","Catlogo de productos","Compras","Inventario bsico","Servicios pendientes","Reportes operativos","Roles y permisos"],limitations:["Multi-sucursal","Inventario avanzado","Reportes financieros avanzados"],features:{usuarios:"15",profesionales:"15",sucursales:"1",agenda:!0,ventas:!0,compras:!0,inventario:"Bsico",reportes:"Operativos",rrhh:!1}},{id:"business",name:"BUSINESS",tagline:"Escalar sin Caos",price:"$169.990",period:"/mes",description:"Para empresas en crecimiento",color:"from-purple-500 to-purple-600",buttonText:"Comenzar Business",includes:["Hasta 40 usuarios","Hasta 60 profesionales","Multi-sucursal","Todo lo de Pro +","Inventario avanzado (kardex)","Reportes financieros","Auditora de acciones","Exportaciones (Excel/PDF)","Permisos avanzados","Soporte prioritario"],limitations:[],features:{usuarios:"40",profesionales:"60",sucursales:"",agenda:!0,ventas:!0,compras:!0,inventario:"Avanzado",reportes:"Financieros",rrhh:!1}},{id:"enterprise",name:"ENTERPRISE",tagline:"Operacin Profesional",price:"Desde $249.990",period:"/mes",description:"Para operacin crtica",color:"from-red-500 to-red-600",buttonText:"Contactar Ventas",includes:["Usuarios ilimitados","Profesionales ilimitados","Multi-sucursal avanzada","Todo lo de Business +","RRHH operativo (turnos, asistencia)","Integraciones externas","SLA","Onboarding asistido","Soporte dedicado"],limitations:[],features:{usuarios:"",profesionales:"",sucursales:"",agenda:!0,ventas:!0,compras:!0,inventario:"Avanzado",reportes:"Financieros",rrhh:!0}}],n=[{label:"Usuarios",key:"usuarios"},{label:"Profesionales",key:"profesionales"},{label:"Sucursales",key:"sucursales"},{label:"Agenda / Catlogo",key:"agenda"},{label:"Ventas",key:"ventas"},{label:"Compras",key:"compras"},{label:"Inventario",key:"inventario"},{label:"Reportes",key:"reportes"},{label:"RRHH",key:"rrhh"}];return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Planes y Funcionalidades | PyM-ERP",description:"Compara nuestros planes y elige el que mejor se adapte a tu negocio. Desde FREE hasta ENTERPRISE, encuentra todas las funcionalidades que necesitas.",canonical:"/features"}),i.jsx("div",{className:"min-h-screen bg-white",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:[i.jsx(_e.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-6 md:mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-10 md:mb-12",children:[i.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-3 md:mb-4",children:"Planes y Funcionalidades"}),i.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:"Elige el plan perfecto para tu negocio. Todos los planes incluyen funcionalidades bsicas, desde gratis hasta soluciones empresariales completas."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 md:gap-6 mb-12 md:mb-16",children:e.map((r,s)=>i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:s*.1},className:`bg-white rounded-xl shadow-lg border-2 ${r.id==="free"?"border-gray-300":r.id==="starter"?"border-green-300":r.id==="pro"?"border-blue-300":r.id==="business"?"border-purple-300":"border-red-300"} hover:shadow-xl transition-all flex flex-col`,children:[i.jsxs("div",{className:`bg-gradient-to-r ${r.color} rounded-t-xl p-4 text-white text-center`,children:[i.jsx("div",{className:"text-xs font-semibold mb-1 opacity-90",children:r.tagline}),i.jsx("div",{className:"text-xl font-bold",children:r.name})]}),i.jsxs("div",{className:"p-4 text-center border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:`font-bold text-gray-900 ${r.price.length>10?"text-2xl md:text-3xl":"text-3xl md:text-4xl"}`,children:r.price}),i.jsx("span",{className:"text-sm md:text-base text-gray-600 whitespace-nowrap",children:r.period})]}),i.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-2",children:r.description})]}),i.jsxs("div",{className:"p-4 flex-1",children:[i.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Incluye:"}),i.jsxs("ul",{className:"space-y-2 mb-4",children:[r.includes.slice(0,6).map((a,l)=>i.jsxs("li",{className:"flex items-start text-xs md:text-sm text-gray-700",children:[i.jsx("span",{className:"text-green-500 mr-2 flex-shrink-0",children:""}),i.jsx("span",{children:a})]},l)),r.includes.length>6&&i.jsxs("li",{className:"text-xs text-gray-500 italic",children:["+",r.includes.length-6," ms..."]})]})]}),r.limitations.length>0&&i.jsxs("div",{className:"p-4 pt-0 border-t border-gray-200",children:[i.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-2",children:"No incluye:"}),i.jsxs("ul",{className:"space-y-1",children:[r.limitations.slice(0,3).map((a,l)=>i.jsxs("li",{className:"flex items-start text-xs text-gray-500",children:[i.jsx("span",{className:"text-gray-400 mr-2 flex-shrink-0",children:""}),i.jsx("span",{children:a})]},l)),r.limitations.length>3&&i.jsxs("li",{className:"text-xs text-gray-400 italic",children:["+",r.limitations.length-3," ms..."]})]})]}),i.jsx("div",{className:"p-4 pt-0",children:i.jsx(_e.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r.id==="free"?t("/request-access"):t("/contacto"),className:`w-full py-2.5 rounded-lg font-semibold text-sm transition-all ${r.id==="free"?`bg-gradient-to-r ${r.color} text-white shadow-md hover:shadow-lg`:"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:r.buttonText})})]},r.id))}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-12 md:mb-16",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-6 text-center",children:"Tabla Comparativa"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsx("div",{className:"inline-block min-w-full align-middle",children:i.jsx("div",{className:"overflow-hidden shadow-lg border-2 border-gray-200 rounded-xl",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Funcionalidad"}),e.map(r=>i.jsx("th",{className:`px-4 py-3 text-center text-xs font-bold uppercase tracking-wider ${r.id==="free"?"text-gray-700":r.id==="starter"?"text-green-700":r.id==="pro"?"text-blue-700":r.id==="business"?"text-purple-700":"text-red-700"}`,children:r.name},r.id))]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((r,s)=>i.jsxs("tr",{className:s%2===0?"bg-white":"bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:r.label}),e.map(a=>{const l=a.features[r.key];return i.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:typeof l=="boolean"?l?i.jsx("span",{className:"text-green-600 font-bold",children:""}):i.jsx("span",{className:"text-gray-300",children:""}):l===null?i.jsx("span",{className:"text-gray-300",children:""}):i.jsx("span",{className:"font-medium",children:l})},a.id)})]},r.key))})]})})})})]}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 md:p-8 lg:p-12 text-center text-white",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-3 md:mb-4",children:"Listo para comenzar?"}),i.jsx("p",{className:"text-base md:text-lg mb-5 md:mb-6 opacity-90",children:"Comienza con el plan FREE y actualiza cuando lo necesites. Sin compromisos, sin tarjeta de crdito."}),i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/request-access"),className:"px-6 md:px-8 py-3 md:py-4 bg-white text-indigo-600 rounded-lg font-semibold shadow-xl hover:shadow-2xl transition-shadow",children:"Crear Cuenta Gratis "})]})]})})]})}function Wne(){const t=Ze();return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Seguridad | PyM-ERP",description:"Conoce cmo PyM-ERP protege tus datos y los de tus clientes con tecnologa de nivel empresarial.",canonical:"/security"}),i.jsx("div",{className:"min-h-screen bg-white",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:[i.jsx(_e.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-6 md:mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[i.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4 md:mb-6 text-center",children:"Seguridad y Privacidad"}),i.jsxs("div",{className:"prose prose-lg max-w-none",children:[i.jsx("p",{className:"text-lg md:text-xl text-gray-600 mb-6 md:mb-8 text-center",children:"La seguridad de tus datos y los de tus clientes es nuestra mxima prioridad. Utilizamos tecnologa de nivel empresarial para proteger tu informacin."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 my-8 md:my-10",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 md:p-6 shadow-lg border-2 border-gray-300 flex flex-col items-center text-center",children:[i.jsx("div",{className:"text-4xl md:text-5xl mb-3 md:mb-4",children:""}),i.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3",children:"Cifrado End-to-End"}),i.jsx("p",{className:"text-sm md:text-base text-gray-800 font-medium",children:"Todos los datos se transmiten cifrados usando protocolos SSL/TLS"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 md:p-6 shadow-lg border-2 border-gray-300 flex flex-col items-center text-center",children:[i.jsx("div",{className:"text-4xl md:text-5xl mb-3 md:mb-4",children:""}),i.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3",children:"Autenticacin Segura"}),i.jsx("p",{className:"text-sm md:text-base text-gray-800 font-medium",children:"Sistema de autenticacin Firebase con verificacin de email"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 md:p-6 shadow-lg border-2 border-gray-300 flex flex-col items-center text-center",children:[i.jsx("div",{className:"text-4xl md:text-5xl mb-3 md:mb-4",children:""}),i.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3",children:"Backups Automticos"}),i.jsx("p",{className:"text-sm md:text-base text-gray-800 font-medium",children:"Respaldos diarios automticos de toda tu informacin"})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 md:p-6 shadow-lg border-2 border-gray-300 flex flex-col items-center text-center",children:[i.jsx("div",{className:"text-4xl md:text-5xl mb-3 md:mb-4",children:""}),i.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3",children:"Proteccin DDoS"}),i.jsx("p",{className:"text-sm md:text-base text-gray-800 font-medium",children:"Infraestructura Google Cloud con proteccin avanzada"})]})]}),i.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mt-8 md:mt-10 mb-3 md:mb-4",children:"Tecnologa Firebase"}),i.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-4 md:mb-6",children:"PyM-ERP est construido sobre Firebase, la plataforma de Google Cloud utilizada por millones de aplicaciones en todo el mundo. Esto nos permite ofrecerte:"}),i.jsxs("ul",{className:"space-y-2 text-gray-700 mb-6 md:mb-8",children:[i.jsx("li",{children:" Infraestructura de clase mundial con 99.9% de disponibilidad"}),i.jsx("li",{children:" Servidores distribuidos globalmente para mxima velocidad"}),i.jsx("li",{children:" Cumplimiento con estndares internacionales de seguridad"}),i.jsx("li",{children:" Escalabilidad automtica segn tu crecimiento"})]}),i.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mt-8 md:mt-10 mb-3 md:mb-4",children:"Privacidad de Datos"}),i.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-4 md:mb-6",children:"Cumplimos con las regulaciones de privacidad ms estrictas:"}),i.jsxs("ul",{className:"space-y-2 text-gray-700 mb-6 md:mb-8",children:[i.jsx("li",{children:" Tus datos son tuyos y solo tuyos"}),i.jsx("li",{children:" Nunca compartimos informacin con terceros"}),i.jsx("li",{children:" Puedes exportar tu informacin en cualquier momento"}),i.jsx("li",{children:" Derecho al olvido: elimina tu cuenta cuando quieras"}),i.jsx("li",{children:" Transparencia total sobre uso de datos"})]}),i.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mt-8 md:mt-10 mb-3 md:mb-4",children:"Control de Acceso"}),i.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-4 md:mb-6",children:"En planes avanzados, tendrs control total sobre quin puede acceder a qu:"}),i.jsxs("ul",{className:"space-y-2 text-gray-700 mb-6 md:mb-8",children:[i.jsx("li",{children:" Sistema de roles y permisos granular"}),i.jsx("li",{children:" Autenticacin de dos factores (2FA)"}),i.jsx("li",{children:" Registro de actividad y auditora"}),i.jsx("li",{children:" Sesiones seguras con expiracin automtica"})]}),i.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 md:p-8 mt-8 md:mt-10 text-center",children:[i.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-3 md:mb-4",children:"Preguntas sobre Seguridad?"}),i.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-5 md:mb-6",children:"Si tienes dudas especficas sobre nuestra seguridad o necesitas informacin para tu departamento de TI, contctanos."}),i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/contacto"),className:"px-6 md:px-8 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transition-shadow",children:"Contactar Soporte"})]})]})]})]})})]})}function Gne(){const t=Ze(),e=[{status:"completed",title:"Fase 1: Lanzamiento Beta",period:"2024 Q4",features:["Plataforma web bsica","Sistema de registro y autenticacin","Catlogo de productos/servicios","Integracin con WhatsApp","Bsqueda por comuna y categora"]},{status:"current",title:"Fase 2: Expansin de Funcionalidades",period:"2026 Q1-Q2",features:["Lanzamiento de PyM-ERP APP mvil","Planes Lite, Standard y Enterprise","Sistema de estadsticas bsicas","Gestin de inventario","Notificaciones automticas","Plantillas de diseo premium"]},{status:"planned",title:"Fase 3: ERP Completo",period:"2026 Q3-Q4",features:["ERP modular multiusuario","Facturacin electrnica integrada","Reportes avanzados y analtica","Sistema de roles y permisos","Integraciones con plataformas externas","API pblica para desarrolladores"]},{status:"future",title:"Fase 4: Inteligencia Artificial",period:"2027",features:["Asistente IA personalizado","Prediccin de demanda","Recomendaciones automticas","Optimizacin de precios","Anlisis de sentimiento de clientes","Automatizacin inteligente"]}],n=s=>{switch(s){case"completed":return"bg-green-500";case"current":return"bg-blue-500";case"planned":return"bg-purple-500";case"future":return"bg-gray-400";default:return"bg-gray-400"}},r=s=>{switch(s){case"completed":return"Completado ";case"current":return"En Desarrollo ";case"planned":return"Planificado ";case"future":return"Futuro ";default:return""}};return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Roadmap | PyM-ERP",description:"Conoce el plan de desarrollo y las prximas funcionalidades que llegarn a PyM-ERP.",canonical:"/roadmap"}),i.jsx("div",{className:"min-h-screen bg-white",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[i.jsx(_e.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Roadmap de Desarrollo"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Conoce lo que estamos construyendo y hacia dnde vamos"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"hidden md:block absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300"}),e.map((s,a)=>i.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:a*.1},className:"relative mb-12 md:ml-16",children:[i.jsx("div",{className:`hidden md:block absolute -left-[4.5rem] top-6 w-8 h-8 rounded-full ${n(s.status)} border-4 border-white shadow-lg`}),i.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 md:p-8 shadow-lg border-2 border-gray-300",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[i.jsx("span",{className:`px-4 py-1 ${n(s.status)} text-white text-sm font-semibold rounded-full`,children:r(s.status)}),i.jsx("span",{className:"text-gray-500 font-medium",children:s.period})]}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:s.title}),i.jsx("ul",{className:"space-y-2",children:s.features.map((l,u)=>i.jsxs("li",{className:"flex items-start text-gray-700",children:[i.jsx("span",{className:"text-green-600 mr-2 mt-1",children:""}),i.jsx("span",{children:l})]},u))})]})]},a))]}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 md:p-12 text-center text-white mt-16",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"S Parte del Futuro"}),i.jsx("p",{className:"text-lg mb-6 opacity-90",children:"nete ahora con el plan gratuito y s de los primeros en acceder a nuevas funcionalidades"}),i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/request-access"),className:"px-8 py-4 bg-white text-indigo-600 rounded-lg font-semibold shadow-xl hover:shadow-2xl transition-shadow",children:"Crear Cuenta Gratis "})]})]})})]})}let E5=-1;const nh=t=>{addEventListener("pageshow",(e=>{e.persisted&&(E5=e.timeStamp,t(e))}),!0)},bi=(t,e,n,r)=>{let s,a;return l=>{e.value>=0&&(l||r)&&(a=e.value-(s??0),(a||s===void 0)&&(s=e.value,e.delta=a,e.rating=((u,d)=>u>d[1]?"poor":u>d[0]?"needs-improvement":"good")(e.value,n),t(e)))}},QC=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},XC=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Wm=()=>XC()?.activationStart??0,wi=(t,e=-1)=>{const n=XC();let r="navigate";return E5>=0?r="back-forward-cache":n&&(document.prerendering||Wm()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},qw=new WeakMap;function ZC(t,e){return qw.get(t)||qw.set(t,new e),qw.get(t)}class Kne{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const n=this.o[0],r=this.o.at(-1);this.i&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const Gm=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver((s=>{Promise.resolve().then((()=>{e(s.getEntries())}))}));return r.observe({type:t,buffered:!0,...n}),r}}catch{}},JC=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let dd=-1;const C5=new Set,oR=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,N_=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(const e of C5)e();isFinite(dd)||(dd=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",N_,!0))}},Px=()=>{if(dd<0){const t=Wm();dd=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((n=>n.name==="hidden"&&n.startTime>t))[0]?.startTime)??oR(),addEventListener("visibilitychange",N_,!0),addEventListener("prerenderingchange",N_,!0),nh((()=>{setTimeout((()=>{dd=oR()}))}))}return{get firstHiddenTime(){return dd},onHidden(t){C5.add(t)}}},Mx=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},lR=[1800,3e3],S5=(t,e={})=>{Mx((()=>{const n=Px();let r,s=wi("FCP");const a=Gm("paint",(l=>{for(const u of l)u.name==="first-contentful-paint"&&(a.disconnect(),u.startTime<n.firstHiddenTime&&(s.value=Math.max(u.startTime-Wm(),0),s.entries.push(u),r(!0)))}));a&&(r=bi(t,s,lR,e.reportAllChanges),nh((l=>{s=wi("FCP"),r=bi(t,s,lR,e.reportAllChanges),QC((()=>{s.value=performance.now()-l.timeStamp,r(!0)}))})))}))},cR=[.1,.25],Qne=(t,e={})=>{const n=Px();S5(JC((()=>{let r,s=wi("CLS",0);const a=ZC(e,Kne),l=d=>{for(const f of d)a.h(f);a.i>s.value&&(s.value=a.i,s.entries=a.o,r())},u=Gm("layout-shift",l);u&&(r=bi(t,s,cR,e.reportAllChanges),n.onHidden((()=>{l(u.takeRecords()),r(!0)})),nh((()=>{a.i=0,s=wi("CLS",0),r=bi(t,s,cR,e.reportAllChanges),QC((()=>r()))})),setTimeout(r))})))};let N5=0,Yw=1/0,Bg=0;const Xne=t=>{for(const e of t)e.interactionId&&(Yw=Math.min(Yw,e.interactionId),Bg=Math.max(Bg,e.interactionId),N5=Bg?(Bg-Yw)/7+1:0)};let j_;const uR=()=>j_?N5:performance.interactionCount??0,Zne=()=>{"interactionCount"in performance||j_||(j_=Gm("event",Xne,{type:"event",buffered:!0,durationThreshold:0}))};let dR=0;class Jne{u=[];l=new Map;m;p;v(){dR=uR(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((uR()-dR)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&e.entryType!=="first-input")return;const n=this.u.at(-1);let r=this.l.get(e.interactionId);if(r||this.u.length<10||e.duration>n.P){if(r?e.duration>r.P?(r.entries=[e],r.P=e.duration):e.duration===r.P&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],P:e.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort(((s,a)=>a.P-s.P)),this.u.length>10){const s=this.u.splice(10);for(const a of s)this.l.delete(a.id)}this.p?.(r)}}}const j5=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=JC(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},hR=[200,500],ere=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=Px();Mx((()=>{Zne();let r,s=wi("INP");const a=ZC(e,Jne),l=d=>{j5((()=>{for(const m of d)a.h(m);const f=a.L();f&&f.P!==s.value&&(s.value=f.P,s.entries=f.entries,r())}))},u=Gm("event",l,{durationThreshold:e.durationThreshold??40});r=bi(t,s,hR,e.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),n.onHidden((()=>{l(u.takeRecords()),r(!0)})),nh((()=>{a.v(),s=wi("INP"),r=bi(t,s,hR,e.reportAllChanges)})))}))};class tre{m;h(e){this.m?.(e)}}const fR=[2500,4e3],nre=(t,e={})=>{Mx((()=>{const n=Px();let r,s=wi("LCP");const a=ZC(e,tre),l=d=>{e.reportAllChanges||(d=d.slice(-1));for(const f of d)a.h(f),f.startTime<n.firstHiddenTime&&(s.value=Math.max(f.startTime-Wm(),0),s.entries=[f],r())},u=Gm("largest-contentful-paint",l);if(u){r=bi(t,s,fR,e.reportAllChanges);const d=JC((()=>{l(u.takeRecords()),u.disconnect(),r(!0)})),f=m=>{m.isTrusted&&(j5(d),removeEventListener(m.type,f,{capture:!0}))};for(const m of["keydown","click","visibilitychange"])addEventListener(m,f,{capture:!0});nh((m=>{s=wi("LCP"),r=bi(t,s,fR,e.reportAllChanges),QC((()=>{s.value=performance.now()-m.timeStamp,r(!0)}))}))}}))},mR=[800,1800],T_=t=>{document.prerendering?Mx((()=>T_(t))):document.readyState!=="complete"?addEventListener("load",(()=>T_(t)),!0):setTimeout(t)},rre=(t,e={})=>{let n=wi("TTFB"),r=bi(t,n,mR,e.reportAllChanges);T_((()=>{const s=XC();s&&(n.value=Math.max(s.responseStart-Wm(),0),n.entries=[s],r(!0),nh((()=>{n=wi("TTFB",0),r=bi(t,n,mR,e.reportAllChanges),r(!0)})))}))},sre={LCP:{good:2500,needsImprovement:4e3},FID:{good:100,needsImprovement:300},CLS:{good:.1,needsImprovement:.25},FCP:{good:1800,needsImprovement:3e3},TTFB:{good:600,needsImprovement:1500},INP:{good:200,needsImprovement:500}};function are(t,e){const n=sre[t];return!n||e<=n.good?"good":e<=n.needsImprovement?"needs-improvement":"poor"}function ff(t){const{name:e,value:n,rating:r,delta:s,id:a}=t,l=r||are(e,n);De.debug(`Web Vital [${e}]:`,{value:Math.round(n),rating:l,delta:Math.round(s),id:a}),Jte(e,n,"Web Vitals"),typeof window<"u"&&window.gtag&&window.gtag("event",e,{event_category:"Web Vitals",value:Math.round(n),event_label:a,non_interaction:!0,metric_rating:l}),l==="poor"&&Tte(`Poor Web Vital: ${e}`,{level:"warning",tags:{web_vital:e,rating:l},contexts:{"Web Vitals":{name:e,value:Math.round(n),rating:l,delta:Math.round(s),id:a}}});try{const u=JSON.parse(localStorage.getItem("web-vitals")||"[]");u.push({name:e,value:Math.round(n),rating:l,timestamp:Date.now(),url:window.location.pathname}),u.length>50&&u.shift(),localStorage.setItem("web-vitals",JSON.stringify(u))}catch(u){De.error("Error guardando Web Vitals:",u)}}function ire(){try{nre(ff),Qne(ff),S5(ff),rre(ff);try{ere(ff)}catch{De.debug("INP no disponible")}De.success("Web Vitals tracking inicializado")}catch(t){De.error("Error inicializando Web Vitals:",t)}}function k_(){try{return JSON.parse(localStorage.getItem("web-vitals")||"[]")}catch(t){return De.error("Error leyendo Web Vitals:",t),[]}}function pR(){try{localStorage.removeItem("web-vitals"),De.debug("Web Vitals cleared")}catch(t){De.error("Error limpiando Web Vitals:",t)}}function gR(t){const e=t||k_(),n={},r={};e.forEach(({name:a,value:l,rating:u})=>{n[a]||(n[a]=[],r[a]={good:0,needsImprovement:0,poor:0}),n[a].push(l),u==="good"?r[a].good++:u==="needs-improvement"?r[a].needsImprovement++:r[a].poor++});const s={};return Object.keys(n).forEach(a=>{const l=n[a],u=l.reduce((d,f)=>d+f,0)/l.length;s[a]={average:Math.round(u),...r[a]}}),s}function ore(){const[t,e]=x.useState([]),[n,r]=x.useState(null),[s,a]=x.useState(!0),l=()=>{try{const f=k_();if(e(f),f.length>0){const m=gR(f);r(m)}else r(null)}catch(f){console.error("Error loading Web Vitals:",f)}finally{a(!1)}};return x.useEffect(()=>{l();const f=m=>{m.key==="web_vitals"&&l()};return window.addEventListener("storage",f),()=>window.removeEventListener("storage",f)},[]),{vitals:t,averages:n,loading:s,refresh:()=>{l()},clearMetrics:()=>{pR(),e([]),r(null)},getStoredWebVitals:k_,calculateAverageVitals:gR,clearStoredWebVitals:pR}}function lre(){const{vitals:t,averages:e,loading:n,clearMetrics:r}=ore(),[s,a]=x.useState([]),[l,u]=x.useState({}),[d,f]=x.useState(!0);x.useEffect(()=>{n||(a(t),e&&u(e),f(!1))},[n,t,e]);const m=()=>{confirm("Desea limpiar todas las mtricas almacenadas?")&&r()},g=_=>{switch(_){case"good":return"text-green-600 bg-green-50";case"needs-improvement":return"text-yellow-600 bg-yellow-50";case"poor":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},y=(_,C)=>_==="CLS"?C.toFixed(3):`${Math.round(C)}ms`,w=_=>({LCP:"Largest Contentful Paint - Tiempo hasta que el contenido principal es visible",FID:"First Input Delay - Tiempo hasta que la pgina responde a la primera interaccin",CLS:"Cumulative Layout Shift - Estabilidad visual de la pgina",FCP:"First Contentful Paint - Tiempo hasta que aparece el primer contenido",TTFB:"Time to First Byte - Tiempo hasta recibir el primer byte del servidor",INP:"Interaction to Next Paint - Tiempo de respuesta a interacciones"})[_]||_;return d?i.jsx("div",{className:"flex items-center justify-center p-12",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Mtricas de Rendimiento"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Core Web Vitals y estadsticas de la aplicacin"})]}),i.jsx("button",{onClick:m,className:"px-4 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition",children:"Limpiar mtricas"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Promedios de Core Web Vitals"}),Object.keys(l).length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No hay mtricas disponibles. Navega por la aplicacin para recopilar datos."}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(l).map(([_,C])=>{const S=C.good+C.needsImprovement+C.poor,N=S>0?C.good/S*100:0,k=S>0?C.needsImprovement/S*100:0,R=S>0?C.poor/S*100:0;return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:_}),i.jsx("span",{className:"text-2xl font-bold text-gray-900",children:y(_,C.average)})]}),i.jsx("p",{className:"text-xs text-gray-600 mb-3",children:w(_)}),i.jsxs("div",{className:"space-y-1 text-xs",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-green-600",children:" Good"}),i.jsxs("span",{className:"font-medium",children:[N.toFixed(0),"%"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-yellow-600",children:" Needs Improvement"}),i.jsxs("span",{className:"font-medium",children:[k.toFixed(0),"%"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-red-600",children:" Poor"}),i.jsxs("span",{className:"font-medium",children:[R.toFixed(0),"%"]})]})]}),i.jsxs("div",{className:"mt-3 h-2 bg-gray-100 rounded-full overflow-hidden flex",children:[i.jsx("div",{className:"bg-green-500",style:{width:`${N}%`}}),i.jsx("div",{className:"bg-yellow-500",style:{width:`${k}%`}}),i.jsx("div",{className:"bg-red-500",style:{width:`${R}%`}})]})]},_)})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ltimas Mtricas Registradas"}),s.length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No hay mtricas recientes"}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mtrica"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pgina"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((_,C)=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:_.name}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:y(_.name,_.value)}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g(_.rating)}`,children:_.rating})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.url}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(_.timestamp).toLocaleString("es-CL")})]},C))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Google Analytics 4"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Tracking de eventos, conversiones y pageviews habilitado"})]}),i.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Sentry"}),i.jsx("p",{className:"text-sm text-purple-700",children:"Monitoreo de errores y performance activo con source maps"})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Web Vitals"}),i.jsx("p",{className:"text-sm text-green-700",children:"Core Web Vitals siendo recolectados en tiempo real"})]})]})]})}function cre(){const t=Ze(),{handleError:e}=St(),[n,r]=x.useState("profiles"),[s,a]=x.useState([]),[l,u]=x.useState(!0),[d,f]=x.useState("asc"),[m,g]=x.useState("ALL"),[y,w]=x.useState(null);x.useEffect(()=>{_()},[]);const _=async()=>{try{const R=(await rJ()).filter(P=>P.status===Cs.ACTIVE||P.status===Cs.FORCE_PASSWORD_CHANGE),A=await Promise.all(R.map(P=>P.company_id?Vr(P.company_id):Promise.resolve(null))),L=await Promise.all(A.map(async P=>{if(!P?.id)return{services:0,products:0};const[O,T]=await Promise.all([th(P.id).catch(()=>[]),FC(P.id).catch(()=>[])]);return{services:O.filter(I=>I.status==="ACTIVE").length,products:T.filter(I=>I.status==="ACTIVE").length}})),F=R.map((P,O)=>({user:P,company:A[O],services:L[O]?.services??0,products:L[O]?.products??0}));a(F)}catch(k){e(k,{customMessage:"Error cargando perfiles"}),ue.error("No se pudieron cargar los perfiles")}finally{u(!1)}},C=async k=>{try{w(k),await Nx(k,{status:Cs.INACTIVE}),a(R=>R.map(A=>A.user.id===k?{...A,user:{...A.user,status:Cs.INACTIVE}}:A)),ue.success("Cuenta bloqueada")}catch(R){e(R,{customMessage:"No se pudo bloquear la cuenta"})}finally{w(null)}},S=async k=>{try{w(k.user.id),await Kee({email:k.user.email,companyId:k.company?.id,userId:k.user.id}),a(R=>R.filter(A=>A.user.id!==k.user.id)),ue.success("Cuenta eliminada")}catch(R){e(R,{customMessage:"No se pudo eliminar la cuenta"})}finally{w(null)}},N=x.useMemo(()=>s.filter(k=>m==="ALL"?!0:k.company?.business_type===m),[s,m]);return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Panel de Administracin"}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{onClick:()=>r("profiles"),className:`px-4 py-2 rounded-t-md border border-b-0 ${n==="profiles"?"bg-white text-gray-900 shadow":"bg-gray-300 text-gray-800"}`,children:"Perfiles"}),i.jsx("button",{onClick:()=>r("metrics"),className:`px-4 py-2 rounded-t-md border border-b-0 ${n==="metrics"?"bg-white text-gray-900 shadow":"bg-gray-200 text-gray-700"}`,children:"Mtricas"}),i.jsx("div",{className:"flex-1 flex items-center justify-end",children:i.jsx("div",{className:"text-sm text-gray-500",children:"Cuentas activas visibles"})})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg",children:[n==="profiles"&&i.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Perfiles"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-gray-600",children:"Tipo:"}),i.jsxs("select",{value:m,onChange:k=>g(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"ALL",children:"Todos"}),i.jsx("option",{value:un.SERVICES,children:"Servicios"}),i.jsx("option",{value:un.PRODUCTS,children:"Productos"})]}),i.jsx("label",{className:"text-sm text-gray-600",children:"Ordenar:"}),i.jsxs("select",{value:d,onChange:k=>f(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"asc",children:"A  Z"}),i.jsx("option",{value:"desc",children:"Z  A"})]})]})]}),l?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-4",children:[N.slice().sort((k,R)=>{const A=(k.company?.name||"").toLowerCase(),L=(R.company?.name||"").toLowerCase();return d==="asc"?A.localeCompare(L):L.localeCompare(A)}).map(k=>i.jsxs("div",{className:"border rounded-lg p-4 flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h3",{className:"font-semibold break-words",children:k.company?.name||"Empresa sin nombre"}),i.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:k.user.status}),k.company?.business_type&&i.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded bg-blue-100 text-blue-800",children:k.company.business_type===un.SERVICES?"Servicios":"Productos"})]}),i.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[i.jsx("strong",{children:"Email:"})," ",k.user.email]}),k.company?.slug&&i.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[i.jsx("strong",{children:"Slug:"})," ",k.company.slug]}),k.company?.subscription_plan&&i.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[i.jsx("strong",{children:"Plan:"})," ",g_[k.company.subscription_plan]||k.company.subscription_plan]}),i.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[i.jsx("strong",{children:"Creado:"})," ",new Date(k.user.created_at).toLocaleString()]})]}),i.jsxs("div",{className:"text-sm text-gray-800 flex flex-col gap-2 min-w-[180px]",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Servicios activos:"}),i.jsx("span",{className:"font-semibold",children:k.services})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Productos activos:"}),i.jsx("span",{className:"font-semibold",children:k.products})]}),i.jsxs("div",{className:"text-xs text-gray-500",children:["Avance productivo: ",k.services+k.products>0?"En progreso":"Pendiente"]}),i.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[k.company?.id&&i.jsx("button",{onClick:()=>t(`/admin/subscriptions/${k.company.id}`),className:"px-3 py-1.5 bg-purple-600 text-white rounded text-xs font-medium hover:bg-purple-700 transition-colors",children:"Gestionar Plan"}),i.jsx("button",{type:"button",disabled:y===k.user.id,onClick:()=>C(k.user.id),className:"px-3 py-2 text-xs rounded bg-yellow-100 text-yellow-800 hover:bg-yellow-200 disabled:opacity-50",children:y===k.user.id&&k.user.status!==Cs.INACTIVE?"Bloqueando...":k.user.status===Cs.INACTIVE?"Bloqueada":"Bloquear cuenta"}),i.jsx("button",{type:"button",disabled:y===k.user.id,onClick:()=>S(k),className:"px-3 py-2 text-xs rounded bg-red-100 text-red-800 hover:bg-red-200 disabled:opacity-50",children:y===k.user.id?"Eliminando...":"Eliminar cuenta"})]})]})]},k.user.id)),s.length===0&&i.jsx("p",{className:"text-gray-500 text-center py-8",children:"No hay perfiles activos"})]})]}),n==="metrics"&&i.jsx("div",{className:"px-4 py-5 sm:p-6",children:i.jsx(lre,{})})]})]})})}const ure=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dre=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),yR=t=>{const e=dre(t);return e.charAt(0).toUpperCase()+e.slice(1)},T5=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),hre=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var fre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mre=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},d)=>x.createElement("svg",{ref:d,...fre,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:T5("lucide",s),...!a&&!hre(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,m])=>x.createElement(f,m)),...Array.isArray(a)?a:[a]]));const gr=(t,e)=>{const n=x.forwardRef(({className:r,...s},a)=>x.createElement(mre,{ref:a,iconNode:e,className:T5(`lucide-${ure(yR(t))}`,`lucide-${t}`,r),...s}));return n.displayName=yR(t),n};const pre=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Km=gr("arrow-left",pre);const gre=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],yre=gr("bell",gre);const xre=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],vre=gr("calendar-clock",xre);const bre=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],k5=gr("calendar",bre);const wre=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],_re=gr("check",wre);const Ere=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Cre=gr("circle-alert",Ere);const Sre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Nre=gr("circle-arrow-up",Sre);const jre=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xR=gr("circle-check-big",jre);const Tre=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],D_=gr("clock",Tre);const kre=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],A_=gr("crown",kre);const Dre=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Are=gr("loader-circle",Dre);const Rre=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Pre=gr("mail",Rre);const Mre=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Lre=gr("phone",Mre);const Ore=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ire=gr("plus",Ore);const Vre=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ure=gr("square-pen",Vre);const Fre=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Bre=gr("trash-2",Fre);const zre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],vy=gr("user-plus",zre);const Hre=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$re=gr("x",Hre),qre=async t=>{const e=sn(Ie,"companies",t),n=await Qc(e);if(!n.exists())throw new Error("Company not found");const r=n.data(),s=r.subscription_plan||"BASIC",a=wd[s];return{currentPlan:s,planDetails:a,limits:{professionals:ud.professionals[s],services:ud.services[s],products:ud.products[s],serviceSchedules:ud.serviceSchedules[s]},subscription:r.subscription}},Yre=async(t,e)=>{const n=sn(Ie,"companies",t),r=ud.professionals[e];await Aa(n,{subscription_plan:e,"subscription.maxProfessionals":r,updated_at:new Date})},Wre=t=>({BASIC:"STANDARD",STANDARD:"PRO",PRO:null,APPROVED25:"PRO"})[t];function Gre({companyId:t,companyName:e,currentPlan:n,onPlanUpdated:r}){const{handleError:s}=St(),[a,l]=x.useState(n),[u,d]=x.useState(!1),f=async()=>{if(a===n){ue.error("Selecciona un plan diferente al actual");return}try{d(!0),await Yre(t,a),ue.success(`Plan actualizado a ${wd[a].name}`),r?.()}catch(w){s(w)}finally{d(!1)}},m=["BASIC","STANDARD","PRO","APPROVED25"],g=w=>({BASIC:"border-gray-300 bg-gray-50",STANDARD:"border-blue-300 bg-blue-50",PRO:"border-purple-300 bg-purple-50",APPROVED25:"border-green-300 bg-green-50"})[w],y=w=>({BASIC:"bg-gray-100 text-gray-800",STANDARD:"bg-blue-100 text-blue-800",PRO:"bg-purple-100 text-purple-800",APPROVED25:"bg-green-100 text-green-800"})[w];return i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Gestionar Suscripcin"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Empresa: ",i.jsx("span",{className:"font-medium",children:e})]}),i.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Plan actual:"}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${y(n)}`,children:wd[n].name})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:m.map(w=>{const _=wd[w],C=a===w,S=n===w;return i.jsxs(_e.button,{onClick:()=>l(w),whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                relative p-4 rounded-lg border-2 text-left transition-all
                ${C?"border-blue-500 ring-2 ring-blue-200":"border-gray-200"}
                ${g(w)}
                hover:shadow-md
              `,children:[S&&i.jsx("div",{className:"absolute top-2 right-2",children:i.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-semibold",children:"Actual"})}),i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[w==="PRO"?i.jsx(A_,{className:"w-6 h-6 text-purple-600 flex-shrink-0"}):i.jsx(_re,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-gray-900",children:_.name}),i.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:_.description})]})]}),i.jsx("p",{className:"text-lg font-bold text-gray-900 mb-3",children:_.price}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"Profesionales:"}),i.jsx("span",{className:"font-semibold text-gray-900",children:_.limits.professionals===1/0?"":_.limits.professionals})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"Servicios:"}),i.jsx("span",{className:"font-semibold text-gray-900",children:_.limits.services===1/0?"":_.limits.services})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-600",children:"Productos:"}),i.jsx("span",{className:"font-semibold text-gray-900",children:_.limits.products===1/0?"":_.limits.products})]})]}),C&&i.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-blue-500 pointer-events-none"})]},w)})}),a!==n&&i.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[i.jsx(Cre,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:"Atencin: Cambio de plan"}),i.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Al cambiar el plan, los lmites se actualizarn inmediatamente. Si la empresa tiene ms recursos activos que el nuevo lmite, no podr agregar nuevos hasta reducir la cantidad."})]})]}),i.jsx("div",{className:"flex gap-3",children:i.jsx("button",{onClick:f,disabled:u||a===n,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:u?"Actualizando...":"Actualizar Plan"})})]})}function Kre(){const{companyId:t}=Sm(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState(null),[a,l]=x.useState(!0);x.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{l(!0);const f=await Vr(t);s(f)}catch(f){n(f)}finally{l(!1)}},d=()=>{u()};return a?i.jsx(zn,{fullScreen:!0,size:"lg"}):r?i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[i.jsx(Km,{className:"w-5 h-5"}),"Volver al panel"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestionar Suscripcin"})]}),i.jsx(Gre,{companyId:r.id,companyName:r.name,currentPlan:r.subscription_plan||"BASIC",onPlanUpdated:d})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Empresa no encontrada"}),i.jsx("button",{onClick:()=>e("/admin"),className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Volver al panel de administracin"})]})})}var D5=(t=>(t.PRO_LIMIT_REACHED="PRO_LIMIT_REACHED",t.SLOT_TAKEN="SLOT_TAKEN",t.SLOT_UNAVAILABLE="SLOT_UNAVAILABLE",t.INVALID_TIME_RANGE="INVALID_TIME_RANGE",t.INVALID_EMAIL="invalid-email",t.INVALID_PHONE="invalid-phone",t.INVALID_RUT="invalid-rut",t.REQUIRED_FIELD="required-field",t.FIELD_TOO_SHORT="field-too-short",t.FIELD_TOO_LONG="field-too-long",t.INVALID_URL="invalid-url",t.PERMISSION_DENIED="permission-denied",t.NOT_FOUND="not-found",t.UNAUTHENTICATED="unauthenticated",t.RESOURCE_EXHAUSTED="resource-exhausted",t.DEADLINE_EXCEEDED="deadline-exceeded",t.UNAVAILABLE="unavailable",t))(D5||{});const Qre=t=>t&&(t.code||t.name==="FirebaseError"&&t.code||typeof t=="object"&&"code"in t)?t.code:"unknown",Xre=(t,e)=>Qre(t)===e,Zre=t=>!t||!t.trim()?{isValid:!1,error:"required-field"}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"invalid-email"},Jre=(t,e=!1)=>!t||!t.trim()?e?{isValid:!1,error:"required-field"}:{isValid:!0}:/^\+?[\d\s-()]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"invalid-phone"},ese=(t,e=!0)=>!t||!t.trim()?e?{isValid:!1,error:"required-field"}:{isValid:!0}:/^[0-9]{1,2}\.[0-9]{3}\.[0-9]{3}-[0-9Kk]$/.test(t)?{isValid:!0}:{isValid:!1,error:"invalid-rut"},Zf=t=>!t||!t.trim()?{isValid:!1,error:"required-field"}:{isValid:!0},A5=t=>{const e={};return Object.entries(t).forEach(([n,{value:r,validators:s}])=>{for(const a of s){const l=a(r);if(!l.isValid&&l.error){e[n]=l.error;break}}}),e};function tse(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState({name:"",rut:"",industry:"",sector:"",seo_keyword:"",whatsapp:"",slug:""}),[a,l]=x.useState(!0),[u,d]=x.useState(!1),[f,m]=x.useState({});x.useEffect(()=>{g()},[]);const g=async()=>{if(!t?.company_id){l(!1);return}try{const _=await Vr(t.company_id);_&&s({name:_.name||"",rut:_.rut||"",industry:_.industry||"",sector:_.sector||"",seo_keyword:_.seo_keyword||"",whatsapp:_.whatsapp||"",slug:_.slug||""})}catch(_){n(_)}finally{l(!1)}},y=async _=>{_.preventDefault(),m({});const C=A5({name:{value:r.name,validators:[Zf]},rut:{value:r.rut,validators:[S=>ese(S,!0)]},industry:{value:r.industry,validators:[Zf]},whatsapp:{value:r.whatsapp,validators:[S=>Jre(S,!0)]}});if(Object.keys(C).length>0){m(C),ue.error("Por favor corrige los errores en el formulario");return}d(!0);try{if(t?.company_id)await Xc(t.company_id,{name:r.name,rut:r.rut,industry:r.industry,sector:r.sector,seo_keyword:r.seo_keyword,whatsapp:r.whatsapp.replace(/\D/g,""),slug:r.slug});else{ue.error("Error: No hay empresa asociada");return}ue.success("Datos guardados"),e("/setup/company-location")}catch(S){ue.error("Error al guardar"),n(S)}finally{d(!1)}},w=(_,C)=>{if(s({...r,[_]:C}),f[_]){const S={...f};delete S[_],m(S)}};return a?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Paso 1: Datos bsicos de la empresa"})]}),i.jsxs("form",{onSubmit:y,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la empresa *"}),i.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${f.name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:r.name,onChange:_=>w("name",_.target.value),"aria-invalid":!!f.name,"aria-describedby":f.name?"name-error":void 0}),f.name&&i.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",role:"alert",children:"Campo requerido"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RUT *"}),i.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${f.rut?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:r.rut,onChange:_=>w("rut",_.target.value),placeholder:"12.345.678-9","aria-invalid":!!f.rut,"aria-describedby":f.rut?"rut-error":void 0}),f.rut&&i.jsx("p",{id:"rut-error",className:"mt-1 text-sm text-red-600",role:"alert",children:f.rut==="required-field"?"Campo requerido":"RUT invlido (formato: 12.345.678-9)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rubro *"}),i.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${f.industry?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:r.industry,onChange:_=>w("industry",_.target.value),placeholder:"Ej: Belleza, Restaurante, Consultora","aria-invalid":!!f.industry,"aria-describedby":f.industry?"industry-error":void 0}),f.industry&&i.jsx("p",{id:"industry-error",className:"mt-1 text-sm text-red-600",role:"alert",children:"Campo requerido"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sector *"}),i.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Salud, Educacin, Tecnologa",value:r.sector,onChange:_=>s({...r,sector:_.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Palabra o frase clave (SEO) *"}),i.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: dentista en Santiago, clases de yoga online",value:r.seo_keyword,onChange:_=>s({...r,seo_keyword:_.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono WhatsApp principal *"}),i.jsx("input",{type:"tel",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${f.whatsapp?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"+56912345678",value:r.whatsapp,onChange:_=>w("whatsapp",_.target.value),"aria-invalid":!!f.whatsapp,"aria-describedby":f.whatsapp?"whatsapp-error":void 0}),f.whatsapp&&i.jsx("p",{id:"whatsapp-error",className:"mt-1 text-sm text-red-600",role:"alert",children:f.whatsapp==="required-field"?"Campo requerido":"Telfono invlido"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug de tu URL pblica *"}),i.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["As se ver tu enlace pblico: https://pymerp.cl/negocios/",i.jsx("strong",{children:r.slug||"tu-slug"})]}),i.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"ej: mi-negocio-unico",value:r.slug,onChange:_=>s({...r,slug:_5(_.target.value)})})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:u?"Guardando...":"Siguiente"})})]})]})})}function wm(t){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(t)}function nse(t,e){if(wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rse(t){var e=nse(t,"string");return wm(e)=="symbol"?e:e+""}function pe(t,e,n){return(e=rse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ww,vR;function sse(){if(vR)return Ww;vR=1;var t=function(n,r,s,a,l,u,d,f){if(!n){var m;if(r===void 0)m=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[s,a,l,u,d,f],y=0;m=new Error(r.replace(/%s/g,function(){return g[y++]})),m.name="Invariant Violation"}throw m.framesToPop=1,m}};return Ww=t,Ww}var ase=sse(),or=R5(ase),lt=x.createContext(null);function ise(){or(!!x.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=x.useContext(lt);return or(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function ose(t,e,n){return Object.keys(t).reduce(function(s,a){return e(s,t[a],a)},n)}function lse(t,e){Object.keys(t).forEach(n=>e(t[n],n))}function cse(t,e,n,r){var s={},a=(l,u)=>{var d=n[u];d!==e[u]&&(s[u]=d,l(r,d))};return lse(t,a),s}function use(t,e,n){var r=ose(n,function(a,l,u){return typeof t[u]=="function"&&a.push(google.maps.event.addListener(e,l,t[u])),a},[]);return r}function dse(t){google.maps.event.removeListener(t)}function pt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(dse)}function ht(t){var{updaterMap:e,eventMap:n,prevProps:r,nextProps:s,instance:a}=t,l=use(s,a,n);return cse(e,r,s,a),l}var bR={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},wR={extraMapTypes(t,e){e.forEach(function(r,s){t.mapTypes.set(String(s),r)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function hse(t){var{children:e,options:n,id:r,mapContainerStyle:s,mapContainerClassName:a,center:l,onClick:u,onDblClick:d,onDrag:f,onDragEnd:m,onDragStart:g,onMouseMove:y,onMouseOut:w,onMouseOver:_,onMouseDown:C,onMouseUp:S,onRightClick:N,onCenterChanged:k,onLoad:R,onUnmount:A}=t,[L,F]=x.useState(null),P=x.useRef(null),[O,T]=x.useState(null),[I,V]=x.useState(null),[$,U]=x.useState(null),[G,W]=x.useState(null),[z,q]=x.useState(null),[K,X]=x.useState(null),[se,H]=x.useState(null),[Z,te]=x.useState(null),[J,ne]=x.useState(null),[ae,me]=x.useState(null),[we,Ne]=x.useState(null),[Se,Ue]=x.useState(null);return x.useEffect(()=>{n&&L!==null&&L.setOptions(n)},[L,n]),x.useEffect(()=>{L!==null&&typeof l<"u"&&L.setCenter(l)},[L,l]),x.useEffect(()=>{L&&d&&(I!==null&&google.maps.event.removeListener(I),V(google.maps.event.addListener(L,"dblclick",d)))},[d]),x.useEffect(()=>{L&&m&&($!==null&&google.maps.event.removeListener($),U(google.maps.event.addListener(L,"dragend",m)))},[m]),x.useEffect(()=>{L&&g&&(G!==null&&google.maps.event.removeListener(G),W(google.maps.event.addListener(L,"dragstart",g)))},[g]),x.useEffect(()=>{L&&C&&(z!==null&&google.maps.event.removeListener(z),q(google.maps.event.addListener(L,"mousedown",C)))},[C]),x.useEffect(()=>{L&&y&&(K!==null&&google.maps.event.removeListener(K),X(google.maps.event.addListener(L,"mousemove",y)))},[y]),x.useEffect(()=>{L&&w&&(se!==null&&google.maps.event.removeListener(se),H(google.maps.event.addListener(L,"mouseout",w)))},[w]),x.useEffect(()=>{L&&_&&(Z!==null&&google.maps.event.removeListener(Z),te(google.maps.event.addListener(L,"mouseover",_)))},[_]),x.useEffect(()=>{L&&S&&(J!==null&&google.maps.event.removeListener(J),ne(google.maps.event.addListener(L,"mouseup",S)))},[S]),x.useEffect(()=>{L&&N&&(ae!==null&&google.maps.event.removeListener(ae),me(google.maps.event.addListener(L,"rightclick",N)))},[N]),x.useEffect(()=>{L&&u&&(we!==null&&google.maps.event.removeListener(we),Ne(google.maps.event.addListener(L,"click",u)))},[u]),x.useEffect(()=>{L&&f&&(Se!==null&&google.maps.event.removeListener(Se),Ue(google.maps.event.addListener(L,"drag",f)))},[f]),x.useEffect(()=>{L&&k&&(O!==null&&google.maps.event.removeListener(O),T(google.maps.event.addListener(L,"center_changed",k)))},[u]),x.useEffect(()=>{var jt=P.current===null?null:new google.maps.Map(P.current,n);return F(jt),jt!==null&&R&&R(jt),()=>{jt!==null&&A&&A(jt)}},[]),i.jsx("div",{id:r,ref:P,style:s,className:a,children:i.jsx(lt.Provider,{value:L,children:L!==null?e:null})})}x.memo(hse);class R_ extends x.PureComponent{constructor(){super(...arguments),pe(this,"state",{map:null}),pe(this,"registeredEvents",[]),pe(this,"mapRef",null),pe(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),pe(this,"panTo",e=>{var n=this.getInstance();n&&n.panTo(e)}),pe(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),pe(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=ht({updaterMap:wR,eventMap:bR,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:wR,eventMap:bR,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),pt(this.registeredEvents))}render(){return i.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:i.jsx(lt.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function _R(t,e,n,r,s,a,l){try{var u=t[a](l),d=u.value}catch(f){return void n(f)}u.done?e(d):Promise.resolve(d).then(r,s)}function P5(t){return function(){var e=this,n=arguments;return new Promise(function(r,s){var a=t.apply(e,n);function l(d){_R(a,r,s,l,u,"next",d)}function u(d){_R(a,r,s,l,u,"throw",d)}l(void 0)})}}function M5(t){var{googleMapsApiKey:e,googleMapsClientId:n,version:r="weekly",language:s,region:a,libraries:l,channel:u,mapIds:d,authReferrerPolicy:f,apiUrl:m="https://maps.googleapis.com"}=t,g=[];return or(e&&n||!(e&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?g.push("key=".concat(e)):n&&g.push("client=".concat(n)),r&&g.push("v=".concat(r)),s&&g.push("language=".concat(s)),a&&g.push("region=".concat(a)),l&&l.length&&g.push("libraries=".concat(l.sort().join(","))),u&&g.push("channel=".concat(u)),d&&d.length&&g.push("map_ids=".concat(d.join(","))),f&&g.push("auth_referrer_policy=".concat(f)),g.push("loading=async"),g.push("callback=initMap"),"".concat(m,"/maps/api/js?").concat(g.join("&"))}var ml=typeof document<"u";function L5(t){var{url:e,id:n,nonce:r}=t;return ml?new Promise(function(a,l){var u=document.getElementById(n),d=window;if(u){var f=u.getAttribute("data-state");if(u.src===e&&f!=="error"){if(f==="ready")return a(n);var m=d.initMap,g=u.onerror;d.initMap=function(){m&&m(),a(n)},u.onerror=function(w){g&&g(w),l(w)};return}else u.remove()}var y=document.createElement("script");y.type="text/javascript",y.src=e,y.id=n,y.async=!0,y.nonce=r||"",y.onerror=function(_){y.setAttribute("data-state","error"),l(_)},d.initMap=function(){y.setAttribute("data-state","ready"),a(n)},document.head.appendChild(y)}).catch(s=>{throw console.error("injectScript error: ",s),s}):Promise.reject(new Error("document is undefined"))}function ER(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function eS(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(s,a){return ER(s)||Reflect.apply(e,t,[s,a]),s};var n=t.appendChild.bind(t);t.appendChild=function(s){return ER(s)||Reflect.apply(n,t,[s]),s}}}var mf=!1;function O5(){return i.jsx("div",{children:"Loading..."})}var _m={id:"script-loader",version:"weekly"};class P_ extends x.PureComponent{constructor(){super(...arguments),pe(this,"check",null),pe(this,"state",{loaded:!1}),pe(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),pe(this,"isCleaningUp",P5(function*(){function e(n){if(!mf)n();else if(ml)var r=window.setInterval(function(){mf||(window.clearInterval(r),n())},1)}return new Promise(e)})),pe(this,"cleanup",()=>{mf=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),pe(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&eS(),or(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:M5(this.props)};L5(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(n=>{this.props.onError&&this.props.onError(n),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),pe(this,"getRef",e=>{this.check=e})}componentDidMount(){if(ml){if(window.google&&window.google.maps&&!mf){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(n){console.error("Error at injecting script after cleaning up: ",n)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ml&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(ml){this.cleanup();var e=()=>{this.check||(delete window.google,mf=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||i.jsx(O5,{})]})}}pe(P_,"defaultProps",_m);function fse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function tS(t,e){if(t==null)return{};var n,r,s=fse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}var CR;function mse(t){var{id:e=_m.id,version:n=_m.version,nonce:r,googleMapsApiKey:s,googleMapsClientId:a,language:l,region:u,libraries:d,preventGoogleFontsLoading:f,channel:m,mapIds:g,authReferrerPolicy:y,apiUrl:w="https://maps.googleapis.com"}=t,_=x.useRef(!1),[C,S]=x.useState(!1),[N,k]=x.useState(void 0);x.useEffect(function(){return _.current=!0,()=>{_.current=!1}},[]),x.useEffect(function(){ml&&f&&eS()},[f]),x.useEffect(function(){C&&or(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[C]);var R=M5({version:n,googleMapsApiKey:s,googleMapsClientId:a,language:l,region:u,libraries:d,channel:m,mapIds:g,authReferrerPolicy:y,apiUrl:w});x.useEffect(function(){if(!ml)return;function F(){_.current&&(S(!0),CR=R)}if(window.google&&window.google.maps&&CR===R){F();return}L5({id:e,url:R,nonce:r}).then(F).catch(function(O){_.current&&k(O),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(s||"-",") or Client ID (").concat(a||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(O)})},[e,R,r]);var A=x.useRef(void 0);return x.useEffect(function(){A.current&&d!==A.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),A.current=d},[d]),{isLoaded:C,loadError:N,url:R}}var pse=["loadingElement","onLoad","onError","onUnmount","children"],gse=i.jsx(O5,{});function yse(t){var{loadingElement:e,onLoad:n,onError:r,onUnmount:s,children:a}=t,l=tS(t,pse),{isLoaded:u,loadError:d}=mse(l);return x.useEffect(function(){u&&typeof n=="function"&&n()},[u,n]),x.useEffect(function(){d&&typeof r=="function"&&r(d)},[d,r]),x.useEffect(function(){return()=>{s&&s()}},[s]),u?a:e||gse}x.memo(yse);function xse(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(m){try{f(r.next(m))}catch(g){l(g)}}function d(m){try{f(r.throw(m))}catch(g){l(g)}}function f(m){m.done?a(m.value):s(m.value).then(u,d)}f((r=r.apply(t,[])).next())})}function vse(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bse=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var l=a[s];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n},wse=vse(bse),SR="__googleMapsScriptId",hd;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(hd||(hd={}));class xc{constructor(e){var{apiKey:n,authReferrerPolicy:r,channel:s,client:a,id:l=SR,language:u,libraries:d=[],mapIds:f,nonce:m,region:g,retries:y=3,url:w="https://maps.googleapis.com/maps/api/js",version:_}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=n,this.authReferrerPolicy=r,this.channel=s,this.client=a,this.id=l||SR,this.language=u,this.libraries=d,this.mapIds=f,this.nonce=m,this.region=g,this.retries=y,this.url=w,this.version=_,xc.instance){if(!wse(this.options,xc.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(xc.instance.options)));return xc.instance}xc.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?hd.FAILURE:this.done?hd.SUCCESS:this.loading?hd.LOADING:hd.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,n)=>{this.loadCallback(r=>{r?n(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,n;if(document.getElementById(this.id)){this.callback();return}var r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(a=>!r[a]&&delete r[a]),!((n=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||n===void 0)&&n.importLibrary||(a=>{var l,u,d,f="The Google Maps JavaScript API",m="google",g="importLibrary",y="__ib__",w=document,_=window;_=_[m]||(_[m]={});var C=_.maps||(_.maps={}),S=new Set,N=new URLSearchParams,k=()=>l||(l=new Promise((R,A)=>xse(this,void 0,void 0,function*(){var L;yield u=w.createElement("script"),u.id=this.id,N.set("libraries",[...S]+"");for(d in a)N.set(d.replace(/[A-Z]/g,F=>"_"+F[0].toLowerCase()),a[d]);N.set("callback",m+".maps."+y),u.src=this.url+"?"+N,C[y]=R,u.onerror=()=>l=A(Error(f+" could not load.")),u.nonce=this.nonce||((L=w.querySelector("script[nonce]"))===null||L===void 0?void 0:L.nonce)||"",w.head.append(u)})));C[g]?console.warn(f+" only loads once. Ignoring:",a):C[g]=function(R){for(var A=arguments.length,L=new Array(A>1?A-1:0),F=1;F<A;F++)L[F-1]=arguments[F];return S.add(R)&&k().then(()=>C[g](R,...L))}})(r);var s=this.libraries.map(a=>this.importLibrary(a));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),a=>{var l=new ErrorEvent("error",{error:a});this.loadErrorCallback(l)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var n=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(n," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var _se=["maps"];function Ese(t){var{id:e=_m.id,version:n=_m.version,nonce:r,googleMapsApiKey:s,language:a,region:l,libraries:u=_se,preventGoogleFontsLoading:d,mapIds:f,authReferrerPolicy:m}=t,g=x.useRef(!1),[y,w]=x.useState(!1),[_,C]=x.useState(void 0);x.useEffect(function(){return g.current=!0,()=>{g.current=!1}},[]);var S=x.useMemo(()=>new xc({id:e,apiKey:s,version:n,libraries:u,language:a||"en",region:l||"US",mapIds:f||[],nonce:r||"",authReferrerPolicy:m||"origin"}),[e,s,n,u,a,l,f,r,m]);x.useEffect(function(){y||S.load().then(()=>{g.current&&w(!0)}).catch(R=>{C(R)})},[]),x.useEffect(()=>{ml&&d&&eS()},[d]);var N=x.useRef();return x.useEffect(()=>{N.current&&u!==N.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),N.current=u},[u]),{isLoaded:y,loadError:_}}function NR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function f0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var jR={},TR={options(t,e){t.setOptions(e)}};function Cse(t){var{options:e,onLoad:n,onUnmount:r}=t,s=x.useContext(lt),[a,l]=x.useState(null);return x.useEffect(()=>{a!==null&&a.setMap(s)},[s]),x.useEffect(()=>{e&&a!==null&&a.setOptions(e)},[a,e]),x.useEffect(()=>{var u=new google.maps.TrafficLayer(f0(f0({},e),{},{map:s}));return l(u),n&&n(u),()=>{a!==null&&(r&&r(a),a.setMap(null))}},[]),null}x.memo(Cse);class Sse extends x.PureComponent{constructor(){super(...arguments),pe(this,"state",{trafficLayer:null}),pe(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),pe(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(f0(f0({},this.props.options),{},{map:this.context}));this.registeredEvents=ht({updaterMap:TR,eventMap:jR,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:TR,eventMap:jR,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),pt(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}pe(Sse,"contextType",lt);function Nse(t){var{onLoad:e,onUnmount:n}=t,r=x.useContext(lt),[s,a]=x.useState(null);return x.useEffect(()=>{s!==null&&s.setMap(r)},[r]),x.useEffect(()=>{var l=new google.maps.BicyclingLayer;return a(l),l.setMap(r),e&&e(l),()=>{l!==null&&(n&&n(l),l.setMap(null))}},[]),null}x.memo(Nse);class jse extends x.PureComponent{constructor(){super(...arguments),pe(this,"state",{bicyclingLayer:null}),pe(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}pe(jse,"contextType",lt);function Tse(t){var{onLoad:e,onUnmount:n}=t,r=x.useContext(lt),[s,a]=x.useState(null);return x.useEffect(()=>{s!==null&&s.setMap(r)},[r]),x.useEffect(()=>{var l=new google.maps.TransitLayer;return a(l),l.setMap(r),e&&e(l),()=>{s!==null&&(n&&n(s),s.setMap(null))}},[]),null}x.memo(Tse);class kse extends x.PureComponent{constructor(){super(...arguments),pe(this,"state",{transitLayer:null}),pe(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}pe(kse,"contextType",lt);function kR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function m0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var DR={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},AR={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function Dse(t){var{options:e,drawingMode:n,onCircleComplete:r,onMarkerComplete:s,onOverlayComplete:a,onPolygonComplete:l,onPolylineComplete:u,onRectangleComplete:d,onLoad:f,onUnmount:m}=t,g=x.useContext(lt),[y,w]=x.useState(null),[_,C]=x.useState(null),[S,N]=x.useState(null),[k,R]=x.useState(null),[A,L]=x.useState(null),[F,P]=x.useState(null),[O,T]=x.useState(null);return x.useEffect(()=>{y!==null&&y.setMap(g)},[g]),x.useEffect(()=>{e&&y!==null&&y.setOptions(e)},[y,e]),x.useEffect(()=>{y!==null&&y.setDrawingMode(n??null)},[y,n]),x.useEffect(()=>{y&&r&&(_!==null&&google.maps.event.removeListener(_),C(google.maps.event.addListener(y,"circlecomplete",r)))},[y,r]),x.useEffect(()=>{y&&s&&(S!==null&&google.maps.event.removeListener(S),N(google.maps.event.addListener(y,"markercomplete",s)))},[y,s]),x.useEffect(()=>{y&&a&&(k!==null&&google.maps.event.removeListener(k),R(google.maps.event.addListener(y,"overlaycomplete",a)))},[y,a]),x.useEffect(()=>{y&&l&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(y,"polygoncomplete",l)))},[y,l]),x.useEffect(()=>{y&&u&&(F!==null&&google.maps.event.removeListener(F),P(google.maps.event.addListener(y,"polylinecomplete",u)))},[y,u]),x.useEffect(()=>{y&&d&&(O!==null&&google.maps.event.removeListener(O),T(google.maps.event.addListener(y,"rectanglecomplete",d)))},[y,d]),x.useEffect(()=>{or(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var I=new google.maps.drawing.DrawingManager(m0(m0({},e),{},{map:g}));return n&&I.setDrawingMode(n),r&&C(google.maps.event.addListener(I,"circlecomplete",r)),s&&N(google.maps.event.addListener(I,"markercomplete",s)),a&&R(google.maps.event.addListener(I,"overlaycomplete",a)),l&&L(google.maps.event.addListener(I,"polygoncomplete",l)),u&&P(google.maps.event.addListener(I,"polylinecomplete",u)),d&&T(google.maps.event.addListener(I,"rectanglecomplete",d)),w(I),f&&f(I),()=>{y!==null&&(_&&google.maps.event.removeListener(_),S&&google.maps.event.removeListener(S),k&&google.maps.event.removeListener(k),A&&google.maps.event.removeListener(A),F&&google.maps.event.removeListener(F),O&&google.maps.event.removeListener(O),m&&m(y),y.setMap(null))}},[]),null}x.memo(Dse);class Ase extends x.PureComponent{constructor(e){super(e),pe(this,"registeredEvents",[]),pe(this,"state",{drawingManager:null}),pe(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),or(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(m0(m0({},this.props.options),{},{map:this.context}));this.registeredEvents=ht({updaterMap:AR,eventMap:DR,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:AR,eventMap:DR,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),pt(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}pe(Ase,"contextType",lt);function RR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ed(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var PR={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},MR={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},p0={};function Rse(t){var{position:e,options:n,clusterer:r,noClustererRedraw:s,children:a,draggable:l,visible:u,animation:d,clickable:f,cursor:m,icon:g,label:y,opacity:w,shape:_,title:C,zIndex:S,onClick:N,onDblClick:k,onDrag:R,onDragEnd:A,onDragStart:L,onMouseOut:F,onMouseOver:P,onMouseUp:O,onMouseDown:T,onRightClick:I,onClickableChanged:V,onCursorChanged:$,onAnimationChanged:U,onDraggableChanged:G,onFlatChanged:W,onIconChanged:z,onPositionChanged:q,onShapeChanged:K,onTitleChanged:X,onVisibleChanged:se,onZindexChanged:H,onLoad:Z,onUnmount:te}=t,J=x.useContext(lt),[ne,ae]=x.useState(null),[me,we]=x.useState(null),[Ne,Se]=x.useState(null),[Ue,jt]=x.useState(null),[Qe,on]=x.useState(null),[Ee,ut]=x.useState(null),[Rt,cr]=x.useState(null),[_t,en]=x.useState(null),[nr,us]=x.useState(null),[Wr,_n]=x.useState(null),[ur,ds]=x.useState(null),[Rs,Gr]=x.useState(null),[la,Ni]=x.useState(null),[ca,Ra]=x.useState(null),[Hn,En]=x.useState(null),[Rn,tn]=x.useState(null),[Te,Re]=x.useState(null),[$e,st]=x.useState(null),[Xt,tt]=x.useState(null),[Zt,Pn]=x.useState(null),[$n,xr]=x.useState(null),[hs,Tt]=x.useState(null);x.useEffect(()=>{ne!==null&&ne.setMap(J)},[J]),x.useEffect(()=>{typeof n<"u"&&ne!==null&&ne.setOptions(n)},[ne,n]),x.useEffect(()=>{typeof l<"u"&&ne!==null&&ne.setDraggable(l)},[ne,l]),x.useEffect(()=>{e&&ne!==null&&ne.setPosition(e)},[ne,e]),x.useEffect(()=>{typeof u<"u"&&ne!==null&&ne.setVisible(u)},[ne,u]),x.useEffect(()=>{ne?.setAnimation(d)},[ne,d]),x.useEffect(()=>{ne&&f!==void 0&&ne.setClickable(f)},[ne,f]),x.useEffect(()=>{ne&&m!==void 0&&ne.setCursor(m)},[ne,m]),x.useEffect(()=>{ne&&g!==void 0&&ne.setIcon(g)},[ne,g]),x.useEffect(()=>{ne&&y!==void 0&&ne.setLabel(y)},[ne,y]),x.useEffect(()=>{ne&&w!==void 0&&ne.setOpacity(w)},[ne,w]),x.useEffect(()=>{ne&&_!==void 0&&ne.setShape(_)},[ne,_]),x.useEffect(()=>{ne&&C!==void 0&&ne.setTitle(C)},[ne,C]),x.useEffect(()=>{ne&&S!==void 0&&ne.setZIndex(S)},[ne,S]),x.useEffect(()=>{ne&&k&&(me!==null&&google.maps.event.removeListener(me),we(google.maps.event.addListener(ne,"dblclick",k)))},[k]),x.useEffect(()=>{ne&&A&&(Ne!==null&&google.maps.event.removeListener(Ne),Se(google.maps.event.addListener(ne,"dragend",A)))},[A]),x.useEffect(()=>{ne&&L&&(Ue!==null&&google.maps.event.removeListener(Ue),jt(google.maps.event.addListener(ne,"dragstart",L)))},[L]),x.useEffect(()=>{ne&&T&&(Qe!==null&&google.maps.event.removeListener(Qe),on(google.maps.event.addListener(ne,"mousedown",T)))},[T]),x.useEffect(()=>{ne&&F&&(Ee!==null&&google.maps.event.removeListener(Ee),ut(google.maps.event.addListener(ne,"mouseout",F)))},[F]),x.useEffect(()=>{ne&&P&&(Rt!==null&&google.maps.event.removeListener(Rt),cr(google.maps.event.addListener(ne,"mouseover",P)))},[P]),x.useEffect(()=>{ne&&O&&(_t!==null&&google.maps.event.removeListener(_t),en(google.maps.event.addListener(ne,"mouseup",O)))},[O]),x.useEffect(()=>{ne&&I&&(nr!==null&&google.maps.event.removeListener(nr),us(google.maps.event.addListener(ne,"rightclick",I)))},[I]),x.useEffect(()=>{ne&&N&&(Wr!==null&&google.maps.event.removeListener(Wr),_n(google.maps.event.addListener(ne,"click",N)))},[N]),x.useEffect(()=>{ne&&R&&(ur!==null&&google.maps.event.removeListener(ur),ds(google.maps.event.addListener(ne,"drag",R)))},[R]),x.useEffect(()=>{ne&&V&&(Rs!==null&&google.maps.event.removeListener(Rs),Gr(google.maps.event.addListener(ne,"clickable_changed",V)))},[V]),x.useEffect(()=>{ne&&$&&(la!==null&&google.maps.event.removeListener(la),Ni(google.maps.event.addListener(ne,"cursor_changed",$)))},[$]),x.useEffect(()=>{ne&&U&&(ca!==null&&google.maps.event.removeListener(ca),Ra(google.maps.event.addListener(ne,"animation_changed",U)))},[U]),x.useEffect(()=>{ne&&G&&(Hn!==null&&google.maps.event.removeListener(Hn),En(google.maps.event.addListener(ne,"draggable_changed",G)))},[G]),x.useEffect(()=>{ne&&W&&(Rn!==null&&google.maps.event.removeListener(Rn),tn(google.maps.event.addListener(ne,"flat_changed",W)))},[W]),x.useEffect(()=>{ne&&z&&(Te!==null&&google.maps.event.removeListener(Te),Re(google.maps.event.addListener(ne,"icon_changed",z)))},[z]),x.useEffect(()=>{ne&&q&&($e!==null&&google.maps.event.removeListener($e),st(google.maps.event.addListener(ne,"position_changed",q)))},[q]),x.useEffect(()=>{ne&&K&&(Xt!==null&&google.maps.event.removeListener(Xt),tt(google.maps.event.addListener(ne,"shape_changed",K)))},[K]),x.useEffect(()=>{ne&&X&&(Zt!==null&&google.maps.event.removeListener(Zt),Pn(google.maps.event.addListener(ne,"title_changed",X)))},[X]),x.useEffect(()=>{ne&&se&&($n!==null&&google.maps.event.removeListener($n),xr(google.maps.event.addListener(ne,"visible_changed",se)))},[se]),x.useEffect(()=>{ne&&H&&(hs!==null&&google.maps.event.removeListener(hs),Tt(google.maps.event.addListener(ne,"zindex_changed",H)))},[H]),x.useEffect(()=>{var ji=Ed(Ed(Ed({},n||p0),r?p0:{map:J}),{},{position:e}),Ye=new google.maps.Marker(ji);return r?r.addMarker(Ye,!!s):Ye.setMap(J),e&&Ye.setPosition(e),typeof u<"u"&&Ye.setVisible(u),typeof l<"u"&&Ye.setDraggable(l),typeof f<"u"&&Ye.setClickable(f),typeof m=="string"&&Ye.setCursor(m),g&&Ye.setIcon(g),typeof y<"u"&&Ye.setLabel(y),typeof w<"u"&&Ye.setOpacity(w),_&&Ye.setShape(_),typeof C=="string"&&Ye.setTitle(C),typeof S=="number"&&Ye.setZIndex(S),k&&we(google.maps.event.addListener(Ye,"dblclick",k)),A&&Se(google.maps.event.addListener(Ye,"dragend",A)),L&&jt(google.maps.event.addListener(Ye,"dragstart",L)),T&&on(google.maps.event.addListener(Ye,"mousedown",T)),F&&ut(google.maps.event.addListener(Ye,"mouseout",F)),P&&cr(google.maps.event.addListener(Ye,"mouseover",P)),O&&en(google.maps.event.addListener(Ye,"mouseup",O)),I&&us(google.maps.event.addListener(Ye,"rightclick",I)),N&&_n(google.maps.event.addListener(Ye,"click",N)),R&&ds(google.maps.event.addListener(Ye,"drag",R)),V&&Gr(google.maps.event.addListener(Ye,"clickable_changed",V)),$&&Ni(google.maps.event.addListener(Ye,"cursor_changed",$)),U&&Ra(google.maps.event.addListener(Ye,"animation_changed",U)),G&&En(google.maps.event.addListener(Ye,"draggable_changed",G)),W&&tn(google.maps.event.addListener(Ye,"flat_changed",W)),z&&Re(google.maps.event.addListener(Ye,"icon_changed",z)),q&&st(google.maps.event.addListener(Ye,"position_changed",q)),K&&tt(google.maps.event.addListener(Ye,"shape_changed",K)),X&&Pn(google.maps.event.addListener(Ye,"title_changed",X)),se&&xr(google.maps.event.addListener(Ye,"visible_changed",se)),H&&Tt(google.maps.event.addListener(Ye,"zindex_changed",H)),ae(Ye),Z&&Z(Ye),()=>{me!==null&&google.maps.event.removeListener(me),Ne!==null&&google.maps.event.removeListener(Ne),Ue!==null&&google.maps.event.removeListener(Ue),Qe!==null&&google.maps.event.removeListener(Qe),Ee!==null&&google.maps.event.removeListener(Ee),Rt!==null&&google.maps.event.removeListener(Rt),_t!==null&&google.maps.event.removeListener(_t),nr!==null&&google.maps.event.removeListener(nr),Wr!==null&&google.maps.event.removeListener(Wr),Rs!==null&&google.maps.event.removeListener(Rs),la!==null&&google.maps.event.removeListener(la),ca!==null&&google.maps.event.removeListener(ca),Hn!==null&&google.maps.event.removeListener(Hn),Rn!==null&&google.maps.event.removeListener(Rn),Te!==null&&google.maps.event.removeListener(Te),$e!==null&&google.maps.event.removeListener($e),Zt!==null&&google.maps.event.removeListener(Zt),$n!==null&&google.maps.event.removeListener($n),hs!==null&&google.maps.event.removeListener(hs),te&&te(Ye),r?r.removeMarker(Ye,!!s):Ye&&Ye.setMap(null)}},[]);var Ar=x.useMemo(()=>a?x.Children.map(a,ji=>{if(!x.isValidElement(ji))return ji;var Ye=ji;return x.cloneElement(Ye,{anchor:ne})}):null,[a,ne]);return i.jsx(i.Fragment,{children:Ar})||null}x.memo(Rse);class g0 extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[])}componentDidMount(){var e=this;return P5(function*(){var n=Ed(Ed(Ed({},e.props.options||p0),e.props.clusterer?p0:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(n),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=ht({updaterMap:MR,eventMap:PR,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:MR,eventMap:PR,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),pt(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?x.Children.map(this.props.children,n=>{if(!x.isValidElement(n))return n;var r=n;return x.cloneElement(r,{anchor:this.marker})}):null;return e||null}}pe(g0,"contextType",lt);var Pse=(function(){function t(e,n){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var n=this.cluster.getClusterer();if(google.maps.event.trigger(n,"click",this.cluster),google.maps.event.trigger(n,"clusterclick",this.cluster),n.getZoomOnClick()){var r=n.getMaxZoom(),s=this.cluster.getBounds(),a=n.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(s),this.timeOut=window.setTimeout(function(){var l=n.getMap();if(l!==null){"fitBounds"in l&&l.fitBounds(s);var u=l.getZoom()||0;r!==null&&u>r&&l.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var n=this.getMap();n!==null&&(this.boundsChangedListener=google.maps.event.addListener(n,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,n,r,s,a,l;if(this.div&&this.center){var u=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,d=this.backgroundPosition.split(" "),f=parseInt(((e=d[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),m=parseInt(((n=d[1])===null||n===void 0?void 0:n.replace(/^\s+|\s+$/g,""))||"0",10),g=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(g!==null?"".concat(g.y,"px"):"0","; left: ").concat(g!==null?"".concat(g.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var y=document.createElement("img");y.alt=u,y.src=this.url,y.width=this.width,y.height=this.height,y.setAttribute("style","position: absolute; top: ".concat(m,"px; left: ").concat(f,"px")),this.cluster.getClusterer().enableRetinaIcons||(y.style.clip="rect(-".concat(m,"px, -").concat(f+this.width,"px, -").concat(m+this.height,", -").concat(f,")"));var w=document.createElement("div");w.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(w.innerText="".concat((s=this.sums)===null||s===void 0?void 0:s.text)),!((a=this.sums)===null||a===void 0)&&a.html&&(w.innerHTML="".concat((l=this.sums)===null||l===void 0?void 0:l.html)),this.div.innerHTML="",this.div.appendChild(y),this.div.appendChild(w),this.div.title=u,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var n=this.cluster.getClusterer().getStyles(),r=n[Math.min(n.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var n=this.getProjection().fromLatLngToDivPixel(e);return n!==null&&(n.x-=this.anchorIcon[1],n.y-=this.anchorIcon[0]),n},t})(),Mse=(function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Pse(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),n=this.getMarkers(),r=0,s=n;r<s.length;r++){var a=s[r],l=a.getPosition();l&&e.extend(l)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var s=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(s-1)+r.lat())/s,(this.center.lng()*(s-1)+r.lng())/s),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var a=this.markers.length,l=this.markerClusterer.getMaxZoom(),u=(n=this.map)===null||n===void 0?void 0:n.getZoom();if(l!==null&&typeof u<"u"&&u>l)e.getMap()!==this.map&&e.setMap(this.map);else if(a<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(a===this.minClusterSize)for(var d=0,f=this.markers;d<f.length;d++){var m=f[d];m.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var n=e.getPosition();if(n)return this.bounds.contains(n)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,n=this.markers.length,r=this.markerClusterer.getMaxZoom(),s=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof s<"u"&&s>r){this.clusterIcon.hide();return}if(n<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var n=0;n<this.markers.length;n++)if(e===this.markers[n])return!0;return!1},t})();function Lse(t,e){var n=t.length,r=n.toString().length,s=Math.min(r,e);return{text:n.toString(),index:s,title:""}}var Ose=2e3,Ise=500,Vse="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",Use="png",Fse=[53,56,66,78,90],Bse="cluster",I5=(function(){function t(e,n,r){n===void 0&&(n=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||Vse,this.imageExtension=r.imageExtension||Use,this.imageSizes=r.imageSizes||Fse,this.calculator=r.calculator||Lse,this.batchSize=r.batchSize||Ose,this.batchSizeIE=r.batchSizeIE||Ise,this.clusterClass=r.clusterClass||Bse,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,n;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((n=this.getMap())===null||n===void 0?void 0:n.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,n=this.markers;e<n.length;e++){var r=n[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var s=0,a=this.clusters;s<a.length;s++){var l=a[s];l.remove()}this.clusters=[];for(var u=0,d=this.listeners;u<d.length;u++){var f=d[u];google.maps.event.removeListener(f)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),n=new google.maps.LatLngBounds,r=0,s=e;r<s.length;r++){var a=s[r],l=a.getPosition();l&&n.extend(l)}var u=this.getMap();u!==null&&"fitBounds"in u&&u.fitBounds(n)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,n){this.pushMarkerTo(e),n||this.redraw()},t.prototype.addMarkers=function(e,n){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];s&&this.pushMarkerTo(s)}n||this.redraw()},t.prototype.pushMarkerTo=function(e){var n=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){n.ready&&(e.isAdded=!1,n.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var n=-1;if(this.markers.indexOf)n=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){n=r;break}return n===-1?!1:(e.setMap(null),this.markers.splice(n,1),!0)},t.prototype.removeMarker=function(e,n){var r=this.removeMarker_(e);return!n&&r&&this.repaint(),r},t.prototype.removeMarkers=function(e,n){for(var r=!1,s=0,a=e;s<a.length;s++){var l=a[s];r=r||this.removeMarker_(l)}return!n&&r&&this.repaint(),r},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,s=e;r<s.length;r++){var a=s[r];a.remove()}},0)},t.prototype.getExtendedBounds=function(e){var n=this.getProjection(),r=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var s=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(s!==null&&(s.x-=this.gridSize,s.y+=this.gridSize),r!==null){var a=n.fromDivPixelToLatLng(r);a!==null&&e.extend(a)}if(s!==null){var l=n.fromDivPixelToLatLng(s);l!==null&&e.extend(l)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var n=0,r=this.clusters;n<r.length;n++){var s=r[n];s.remove()}this.clusters=[];for(var a=0,l=this.markers;a<l.length;a++){var u=l[a];u.isAdded=!1,e&&u.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,n){var r=6371,s=(n.lat()-e.lat())*Math.PI/180,a=(n.lng()-e.lng())*Math.PI/180,l=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(n.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return r*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},t.prototype.isMarkerInBounds=function(e,n){var r=e.getPosition();return r?n.contains(r):!1},t.prototype.addToClosestCluster=function(e){for(var n,r=4e4,s=null,a=0,l=this.clusters;a<l.length;a++){var u=l[a];n=u;var d=n.getCenter(),f=e.getPosition();if(d&&f){var m=this.distanceBetweenPoints(d,f);m<r&&(r=m,s=n)}}s&&s.isMarkerInClusterBounds(e)?s.addMarker(e):(n=new Mse(this),n.addMarker(e),this.clusters.push(n))},t.prototype.createClusters=function(e){var n=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),s=r!==null&&("getBounds"in r)?r.getBounds():null,a=r?.getZoom()||0,l=a>3?new google.maps.LatLngBounds(s?.getSouthWest(),s?.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),u=this.getExtendedBounds(l),d=Math.min(e+this.batchSize,this.markers.length),f=e;f<d;f++){var m=this.markers[f];m&&!m.isAdded&&this.isMarkerInBounds(m,u)&&(!this.ignoreHidden||this.ignoreHidden&&m.getVisible())&&this.addToClosestCluster(m)}if(d<this.markers.length)this.timerRefStatic=window.setTimeout(function(){n.createClusters(d)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var g=0,y=this.clusters;g<y.length;g++){var w=y[g];w.updateIcon()}}}},t.prototype.extend=function(e,n){return(function(s){for(var a in s.prototype){var l=a;this.prototype[l]=s.prototype[l]}return this}).apply(e,[n])},t})();function LR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function zse(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ys={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},At={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},Hse={};function $se(t){var{children:e,options:n,averageCenter:r,batchSizeIE:s,calculator:a,clusterClass:l,enableRetinaIcons:u,gridSize:d,ignoreHidden:f,imageExtension:m,imagePath:g,imageSizes:y,maxZoom:w,minimumClusterSize:_,styles:C,title:S,zoomOnClick:N,onClick:k,onClusteringBegin:R,onClusteringEnd:A,onMouseOver:L,onMouseOut:F,onLoad:P,onUnmount:O}=t,[T,I]=x.useState(null),V=x.useContext(lt),[$,U]=x.useState(null),[G,W]=x.useState(null),[z,q]=x.useState(null),[K,X]=x.useState(null),[se,H]=x.useState(null);return x.useEffect(()=>{T&&F&&(K!==null&&google.maps.event.removeListener(K),X(google.maps.event.addListener(T,Ys.onMouseOut,F)))},[F]),x.useEffect(()=>{T&&L&&(se!==null&&google.maps.event.removeListener(se),H(google.maps.event.addListener(T,Ys.onMouseOver,L)))},[L]),x.useEffect(()=>{T&&k&&($!==null&&google.maps.event.removeListener($),U(google.maps.event.addListener(T,Ys.onClick,k)))},[k]),x.useEffect(()=>{T&&R&&(G!==null&&google.maps.event.removeListener(G),W(google.maps.event.addListener(T,Ys.onClusteringBegin,R)))},[R]),x.useEffect(()=>{T&&A&&(z!==null&&google.maps.event.removeListener(z),W(google.maps.event.addListener(T,Ys.onClusteringEnd,A)))},[A]),x.useEffect(()=>{typeof r<"u"&&T!==null&&At.averageCenter(T,r)},[T,r]),x.useEffect(()=>{typeof s<"u"&&T!==null&&At.batchSizeIE(T,s)},[T,s]),x.useEffect(()=>{typeof a<"u"&&T!==null&&At.calculator(T,a)},[T,a]),x.useEffect(()=>{typeof l<"u"&&T!==null&&At.clusterClass(T,l)},[T,l]),x.useEffect(()=>{typeof u<"u"&&T!==null&&At.enableRetinaIcons(T,u)},[T,u]),x.useEffect(()=>{typeof d<"u"&&T!==null&&At.gridSize(T,d)},[T,d]),x.useEffect(()=>{typeof f<"u"&&T!==null&&At.ignoreHidden(T,f)},[T,f]),x.useEffect(()=>{typeof m<"u"&&T!==null&&At.imageExtension(T,m)},[T,m]),x.useEffect(()=>{typeof g<"u"&&T!==null&&At.imagePath(T,g)},[T,g]),x.useEffect(()=>{typeof y<"u"&&T!==null&&At.imageSizes(T,y)},[T,y]),x.useEffect(()=>{typeof w<"u"&&T!==null&&At.maxZoom(T,w)},[T,w]),x.useEffect(()=>{typeof _<"u"&&T!==null&&At.minimumClusterSize(T,_)},[T,_]),x.useEffect(()=>{typeof C<"u"&&T!==null&&At.styles(T,C)},[T,C]),x.useEffect(()=>{typeof S<"u"&&T!==null&&At.title(T,S)},[T,S]),x.useEffect(()=>{typeof N<"u"&&T!==null&&At.zoomOnClick(T,N)},[T,N]),x.useEffect(()=>{if(V){var Z=zse({},n||Hse),te=new I5(V,[],Z);return r&&At.averageCenter(te,r),s&&At.batchSizeIE(te,s),a&&At.calculator(te,a),l&&At.clusterClass(te,l),u&&At.enableRetinaIcons(te,u),d&&At.gridSize(te,d),f&&At.ignoreHidden(te,f),m&&At.imageExtension(te,m),g&&At.imagePath(te,g),y&&At.imageSizes(te,y),w&&At.maxZoom(te,w),_&&At.minimumClusterSize(te,_),C&&At.styles(te,C),S&&At.title(te,S),N&&At.zoomOnClick(te,N),F&&X(google.maps.event.addListener(te,Ys.onMouseOut,F)),L&&H(google.maps.event.addListener(te,Ys.onMouseOver,L)),k&&U(google.maps.event.addListener(te,Ys.onClick,k)),R&&W(google.maps.event.addListener(te,Ys.onClusteringBegin,R)),A&&q(google.maps.event.addListener(te,Ys.onClusteringEnd,A)),I(te),P&&P(te),()=>{K!==null&&google.maps.event.removeListener(K),se!==null&&google.maps.event.removeListener(se),$!==null&&google.maps.event.removeListener($),G!==null&&google.maps.event.removeListener(G),z!==null&&google.maps.event.removeListener(z),O&&O(te)}}},[]),T!==null&&e(T)||null}x.memo($se);class qse extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{markerClusterer:null}),pe(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new I5(this.context,[],this.props.options);this.registeredEvents=ht({updaterMap:At,eventMap:Ys,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:At,eventMap:Ys,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),pt(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}pe(qse,"contextType",lt);function OR(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var V5=(function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,n=function(m){m.returnValue=!1,m.preventDefault&&m.preventDefault(),e.enableEventPropagation||OR(m)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],l=0,u=a;l<u.length;l++){var d=u[l];this.eventListeners.push(google.maps.event.addListener(this.div,d,OR))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",n),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var n=this.getMap();if(n instanceof google.maps.Map){var r=0,s=0,a=n.getBounds();a&&!a.contains(this.position)&&n.setCenter(this.position);var l=n.getDiv(),u=l.offsetWidth,d=l.offsetHeight,f=this.pixelOffset.width,m=this.pixelOffset.height,g=this.div.offsetWidth,y=this.div.offsetHeight,w=this.infoBoxClearance.width,_=this.infoBoxClearance.height,C=this.getProjection(),S=C.fromLatLngToContainerPixel(this.position);S!==null&&(S.x<-f+w?r=S.x+f-w:S.x+g+f+w>u&&(r=S.x+g+f+w-u),this.alignBottom?S.y<-m+_+y?s=S.y+m-_-y:S.y+m+_>d&&(s=S.y+m+_-d):S.y<-m+_?s=S.y+m-_:S.y+y+m+_>d&&(s=S.y+y+m+_-d)),r===0&&s===0||n.panBy(r,s)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.div.style[n]=e[n]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var n=this.div.ownerDocument,r=n&&n.defaultView?n.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var s=this.div.currentStyle;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),n=e.fromLatLngToDivPixel(this.position);n!==null&&(this.div.style.left=n.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(n.y+this.pixelOffset.height)+"px":this.div.style.top=n.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,n){var r=this;n&&(this.position=n.getPosition(),this.moveListener=google.maps.event.addListener(n,"position_changed",function(){var s=n.getPosition();r.setPosition(s)}),this.mapListener=google.maps.event.addListener(n,"map_changed",function(){r.setMap(n.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,n=this.eventListeners;e<n.length;e++){var r=n[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,n){return(function(s){for(var a in s.prototype)Object.prototype.hasOwnProperty.call(this,a)||(this.prototype[a]=s.prototype[a]);return this}).apply(e,[n])},t})(),Yse=["position"],Wse=["position"];function IR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function y0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var VR={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},UR={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Gse={};function Kse(t){var{children:e,anchor:n,options:r,position:s,zIndex:a,onCloseClick:l,onDomReady:u,onContentChanged:d,onPositionChanged:f,onZindexChanged:m,onLoad:g,onUnmount:y}=t,w=x.useContext(lt),[_,C]=x.useState(null),[S,N]=x.useState(null),[k,R]=x.useState(null),[A,L]=x.useState(null),[F,P]=x.useState(null),[O,T]=x.useState(null),I=x.useRef(null);return x.useEffect(()=>{w&&_!==null&&(_.close(),n?_.open(w,n):_.getPosition()&&_.open(w))},[w,_,n]),x.useEffect(()=>{r&&_!==null&&_.setOptions(r)},[_,r]),x.useEffect(()=>{if(s&&_!==null){var V=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng);_.setPosition(V)}},[s]),x.useEffect(()=>{typeof a=="number"&&_!==null&&_.setZIndex(a)},[a]),x.useEffect(()=>{_&&l&&(S!==null&&google.maps.event.removeListener(S),N(google.maps.event.addListener(_,"closeclick",l)))},[l]),x.useEffect(()=>{_&&u&&(k!==null&&google.maps.event.removeListener(k),R(google.maps.event.addListener(_,"domready",u)))},[u]),x.useEffect(()=>{_&&d&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(_,"content_changed",d)))},[d]),x.useEffect(()=>{_&&f&&(F!==null&&google.maps.event.removeListener(F),P(google.maps.event.addListener(_,"position_changed",f)))},[f]),x.useEffect(()=>{_&&m&&(O!==null&&google.maps.event.removeListener(O),T(google.maps.event.addListener(_,"zindex_changed",m)))},[m]),x.useEffect(()=>{if(w){var V=r||Gse,{position:$}=V,U=tS(V,Yse),G;$&&!($ instanceof google.maps.LatLng)&&(G=new google.maps.LatLng($.lat,$.lng));var W=new V5(y0(y0({},U),G?{position:G}:{}));I.current=document.createElement("div"),C(W),l&&N(google.maps.event.addListener(W,"closeclick",l)),u&&R(google.maps.event.addListener(W,"domready",u)),d&&L(google.maps.event.addListener(W,"content_changed",d)),f&&P(google.maps.event.addListener(W,"position_changed",f)),m&&T(google.maps.event.addListener(W,"zindex_changed",m)),W.setContent(I.current),n?W.open(w,n):W.getPosition()?W.open(w):or(!1,"You must provide either an anchor or a position prop for <InfoBox>."),g&&g(W)}return()=>{_!==null&&(S&&google.maps.event.removeListener(S),A&&google.maps.event.removeListener(A),k&&google.maps.event.removeListener(k),F&&google.maps.event.removeListener(F),O&&google.maps.event.removeListener(O),y&&y(_),_.close())}},[]),I.current?Ll.createPortal(x.Children.only(e),I.current):null}x.memo(Kse);class Qse extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"containerElement",null),pe(this,"state",{infoBox:null}),pe(this,"open",(e,n)=>{n?this.context!==null&&e.open(this.context,n):e.getPosition()?this.context!==null&&e.open(this.context):or(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),pe(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:n}=e,r=tS(e,Wse),s;n&&!(n instanceof google.maps.LatLng)&&(s=new google.maps.LatLng(n.lat,n.lng));var a=new V5(y0(y0({},r),s?{position:s}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=ht({updaterMap:UR,eventMap:VR,prevProps:{},nextProps:this.props,instance:a}),this.setState({infoBox:a},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:n}=this.state;n!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:UR,eventMap:VR,prevProps:e,nextProps:this.props,instance:n}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:n}=this.state;n!==null&&(e&&e(n),pt(this.registeredEvents),n.close())}render(){return this.containerElement?Ll.createPortal(x.Children.only(this.props.children),this.containerElement):null}}pe(Qse,"contextType",lt);var Gw,FR;function Xse(){return FR||(FR=1,Gw=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var l=a[s];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n}),Gw}var Zse=Xse(),BR=R5(Zse),zR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Kw=1,pf=8;class nS{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[n,r]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");var s=r>>4;if(s!==Kw)throw new Error("Got v".concat(s," data when expected v").concat(Kw,"."));var a=zR[r&15];if(!a)throw new Error("Unrecognized array type.");var[l]=new Uint16Array(e,2,1),[u]=new Uint32Array(e,4,1);return new nS(u,l,a,e)}constructor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,s=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=zR.indexOf(this.ArrayType),l=e*2*this.ArrayType.BYTES_PER_ELEMENT,u=e*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-u%8)%8;if(a<0)throw new Error("Unexpected typed array class: ".concat(r,"."));s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,pf,e),this.coords=new this.ArrayType(this.data,pf+u+d,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(pf+l+u+d),this.ids=new this.IndexArrayType(this.data,pf,e),this.coords=new this.ArrayType(this.data,pf+u+d,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(Kw<<4)+a]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=n,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return M_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,r,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:l,nodeSize:u}=this,d=[0,a.length-1,0],f=[];d.length;){var m=d.pop()||0,g=d.pop()||0,y=d.pop()||0;if(g-y<=u){for(var w=y;w<=g;w++){var _=l[2*w],C=l[2*w+1];_>=e&&_<=r&&C>=n&&C<=s&&f.push(a[w])}continue}var S=y+g>>1,N=l[2*S],k=l[2*S+1];N>=e&&N<=r&&k>=n&&k<=s&&f.push(a[S]),(m===0?e<=N:n<=k)&&(d.push(y),d.push(S-1),d.push(1-m)),(m===0?r>=N:s>=k)&&(d.push(S+1),d.push(g),d.push(1-m))}return f}within(e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:a,nodeSize:l}=this,u=[0,s.length-1,0],d=[],f=r*r;u.length;){var m=u.pop()||0,g=u.pop()||0,y=u.pop()||0;if(g-y<=l){for(var w=y;w<=g;w++)HR(a[2*w],a[2*w+1],e,n)<=f&&d.push(s[w]);continue}var _=y+g>>1,C=a[2*_],S=a[2*_+1];HR(C,S,e,n)<=f&&d.push(s[_]),(m===0?e-r<=C:n-r<=S)&&(u.push(y),u.push(_-1),u.push(1-m)),(m===0?e+r>=C:n+r>=S)&&(u.push(_+1),u.push(g),u.push(1-m))}return d}}function M_(t,e,n,r,s,a){if(!(s-r<=n)){var l=r+s>>1;U5(t,e,l,r,s,a),M_(t,e,n,r,l-1,1-a),M_(t,e,n,l+1,s,1-a)}}function U5(t,e,n,r,s,a){for(;s>r;){if(s-r>600){var l=s-r+1,u=n-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(r,Math.floor(n-u*f/l+m)),y=Math.min(s,Math.floor(n+(l-u)*f/l+m));U5(t,e,n,g,y,a)}var w=e[2*n+a],_=r,C=s;for(gf(t,e,r,n),e[2*s+a]>w&&gf(t,e,r,s);_<C;){for(gf(t,e,_,C),_++,C--;e[2*_+a]<w;)_++;for(;e[2*C+a]>w;)C--}e[2*r+a]===w?gf(t,e,r,C):(C++,gf(t,e,C,s)),C<=n&&(r=C+1),n<=C&&(s=C-1)}}function gf(t,e,n,r){Qw(t,n,r),Qw(e,2*n,2*r),Qw(e,2*n+1,2*r+1)}function Qw(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function HR(t,e,n,r){var s=t-n,a=e-r;return s*s+a*a}var Jse={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},$R=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),fc=2,sl=3,Xw=4,rl=5,F5=6;class eae{constructor(e){this.options=Object.assign(Object.create(Jse),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:n,minZoom:r,maxZoom:s}=this.options;n&&console.time("total time");var a="prepare ".concat(e.length," points");n&&console.time(a),this.points=e;for(var l=[],u=0;u<e.length;u++){var d=e[u];if(d.geometry){var[f,m]=d.geometry.coordinates,g=$R(zg(f)),y=$R(Hg(m));l.push(g,y,1/0,u,-1,1),this.options.reduce&&l.push(0)}}var w=this.trees[s+1]=this._createTree(l);n&&console.timeEnd(a);for(var _=s;_>=r;_--){var C=+Date.now();w=this.trees[_]=this._createTree(this._cluster(w,_)),n&&console.log("z%d: %d clusters in %dms",_,w.numItems,+Date.now()-C)}return n&&console.timeEnd("total time"),this}getClusters(e,n){var r=((e[0]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,e[1])),a=e[2]===180?180:((e[2]+180)%360+360)%360-180,l=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,a=180;else if(r>a){var u=this.getClusters([r,s,180,l],n),d=this.getClusters([-180,s,a,l],n);return u.concat(d)}var f=this.trees[this._limitZoom(n)],m=f.range(zg(r),Hg(l),zg(a),Hg(s)),g=f.data,y=[];for(var w of m){var _=this.stride*w;y.push(g[_+rl]>1?qR(g,_,this.clusterProps):this.points[g[_+sl]])}return y}getChildren(e){var n=this._getOriginId(e),r=this._getOriginZoom(e),s="No cluster with the specified id.",a=this.trees[r];if(!a)throw new Error(s);var l=a.data;if(n*this.stride>=l.length)throw new Error(s);var u=this.options.radius/(this.options.extent*Math.pow(2,r-1)),d=l[n*this.stride],f=l[n*this.stride+1],m=a.within(d,f,u),g=[];for(var y of m){var w=y*this.stride;l[w+Xw]===e&&g.push(l[w+rl]>1?qR(l,w,this.clusterProps):this.points[l[w+sl]])}if(g.length===0)throw new Error(s);return g}getLeaves(e,n,r){n=n||10,r=r||0;var s=[];return this._appendLeaves(s,e,n,r,0),s}getTile(e,n,r){var s=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:l,radius:u}=this.options,d=u/l,f=(r-d)/a,m=(r+1+d)/a,g={features:[]};return this._addTileFeatures(s.range((n-d)/a,f,(n+1+d)/a,m),s.data,n,r,a,g),n===0&&this._addTileFeatures(s.range(1-d/a,f,1,m),s.data,a,r,a,g),n===a-1&&this._addTileFeatures(s.range(0,f,d/a,m),s.data,-1,r,a,g),g.features.length?g:null}getClusterExpansionZoom(e){for(var n=this._getOriginZoom(e)-1;n<=this.options.maxZoom;){var r=this.getChildren(e);if(n++,r.length!==1)break;e=r[0].properties.cluster_id}return n}_appendLeaves(e,n,r,s,a){var l=this.getChildren(n);for(var u of l){var d=u.properties;if(d&&d.cluster?a+d.point_count<=s?a+=d.point_count:a=this._appendLeaves(e,d.cluster_id,r,s,a):a<s?a++:e.push(u),e.length===r)break}return a}_createTree(e){for(var n=new nS(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)n.add(e[r],e[r+1]);return n.finish(),n.data=e,n}_addTileFeatures(e,n,r,s,a,l){for(var u of e){var d=u*this.stride,f=n[d+rl]>1,m=void 0,g=void 0,y=void 0;if(f)m=B5(n,d,this.clusterProps),g=n[d],y=n[d+1];else{var w=this.points[n[d+sl]];m=w.properties;var[_,C]=w.geometry.coordinates;g=zg(_),y=Hg(C)}var S={type:1,geometry:[[Math.round(this.options.extent*(g*a-r)),Math.round(this.options.extent*(y*a-s))]],tags:m},N=void 0;f||this.options.generateId?N=n[d+sl]:N=this.points[n[d+sl]].id,N!==void 0&&(S.id=N),l.features.push(S)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,n){for(var{radius:r,extent:s,reduce:a,minPoints:l}=this.options,u=r/(s*Math.pow(2,n)),d=e.data,f=[],m=this.stride,g=0;g<d.length;g+=m)if(!(d[g+fc]<=n)){d[g+fc]=n;var y=d[g],w=d[g+1],_=e.within(d[g],d[g+1],u),C=d[g+rl],S=C;for(var N of _){var k=N*m;d[k+fc]>n&&(S+=d[k+rl])}if(S>C&&S>=l){var R=y*C,A=w*C,L=void 0,F=-1,P=((g/m|0)<<5)+(n+1)+this.points.length;for(var O of _){var T=O*m;if(!(d[T+fc]<=n)){d[T+fc]=n;var I=d[T+rl];R+=d[T]*I,A+=d[T+1]*I,d[T+Xw]=P,a&&(L||(L=this._map(d,g,!0),F=this.clusterProps.length,this.clusterProps.push(L)),a(L,this._map(d,T)))}}d[g+Xw]=P,f.push(R/S,A/S,1/0,P,-1,S),a&&f.push(F)}else{for(var V=0;V<m;V++)f.push(d[g+V]);if(S>1)for(var $ of _){var U=$*m;if(!(d[U+fc]<=n)){d[U+fc]=n;for(var G=0;G<m;G++)f.push(d[U+G])}}}}return f}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,n,r){if(e[n+rl]>1){var s=this.clusterProps[e[n+F5]];return r?Object.assign({},s):s}var a=this.points[e[n+sl]].properties,l=this.options.map(a);return r&&l===a?Object.assign({},l):l}}function qR(t,e,n){return{type:"Feature",id:t[e+sl],properties:B5(t,e,n),geometry:{type:"Point",coordinates:[tae(t[e]),nae(t[e+1])]}}}function B5(t,e,n){var r=t[e+rl],s=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,a=t[e+F5],l=a===-1?{}:Object.assign({},n[a]);return Object.assign(l,{cluster:!0,cluster_id:t[e+sl],point_count:r,point_count_abbreviated:s})}function zg(t){return t/360+.5}function Hg(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function tae(t){return(t-.5)*360}function nae(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function rae(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}class Ss{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,n){this.isAdvancedMarker(e)?e.map=n:e.setMap(n)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class L_{constructor(e){var{markers:n,position:r}=e;this.markers=n,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var n of this.markers)e.extend(Ss.getPosition(n));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Ss.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Ss.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class sae{constructor(e){var{maxZoom:n=16}=e;this.maxZoom=n}noop(e){var{markers:n}=e;return aae(n)}}var aae=t=>{var e=t.map(n=>new L_({position:Ss.getPosition(n),markers:[n]}));return e};class iae extends sae{constructor(e){var{maxZoom:n,radius:r=60}=e,s=rae(e,["maxZoom","radius"]);super({maxZoom:n}),this.state={zoom:-1},this.superCluster=new eae(Object.assign({maxZoom:this.maxZoom,radius:r},s))}calculate(e){var n=!1,r={zoom:e.map.getZoom()};if(!BR(e.markers,this.markers)){n=!0,this.markers=[...e.markers];var s=this.markers.map(a=>{var l=Ss.getPosition(a),u=[l.lng(),l.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:u},properties:{marker:a}}});this.superCluster.load(s)}return n||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(n=!BR(this.state,r)),this.state=r,n&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:n}}cluster(e){var{map:n}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(n.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[n,r]},properties:s}=e;if(s.cluster)return new L_({markers:this.superCluster.getLeaves(s.cluster_id,1/0).map(l=>l.properties.marker),position:{lat:r,lng:n}});var a=s.marker;return new L_({markers:[a],position:Ss.getPosition(a)})}}class oae{constructor(e,n){this.markers={sum:e.length};var r=n.map(a=>a.count),s=r.reduce((a,l)=>a+l,0);this.clusters={count:n.length,markers:{mean:s/n.length,sum:s,min:Math.min(...r),max:Math.max(...r)}}}}class lae{render(e,n,r){var{count:s,position:a}=e,l=s>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff",u='<svg fill="'.concat(l,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(s,`</text>
</svg>`),d="Cluster of ".concat(s," markers"),f=Number(google.maps.Marker.MAX_ZINDEX)+s;if(Ss.isAdvancedMarkerAvailable(r)){var m=new DOMParser,g=m.parseFromString(u,"image/svg+xml").documentElement;g.setAttribute("transform","translate(0 25)");var y={map:r,position:a,zIndex:f,title:d,content:g};return new google.maps.marker.AdvancedMarkerElement(y)}var w={position:a,zIndex:f,title:d,icon:{url:"data:image/svg+xml;base64,".concat(btoa(u)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(w)}}function cae(t,e){for(var n in e.prototype)t.prototype[n]=e.prototype[n]}class rS{constructor(){cae(rS,google.maps.OverlayView)}}var Jf;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(Jf||(Jf={}));var uae=(t,e,n)=>{n.fitBounds(e.bounds)};class dae extends rS{constructor(e){var{map:n,markers:r=[],algorithmOptions:s={},algorithm:a=new iae(s),renderer:l=new lae,onClusterClick:u=uae}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=a,this.renderer=l,this.onClusterClick=u,n&&this.setMap(n)}addMarker(e,n){this.markers.includes(e)||(this.markers.push(e),n||this.render())}addMarkers(e,n){e.forEach(r=>{this.addMarker(r,!0)}),n||this.render()}removeMarker(e,n){var r=this.markers.indexOf(e);return r===-1?!1:(Ss.setMap(e,null),this.markers.splice(r,1),n||this.render(),!0)}removeMarkers(e,n){var r=!1;return e.forEach(s=>{r=this.removeMarker(s,!0)||r}),r&&!n&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Jf.CLUSTERING_BEGIN,this);var{clusters:n,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var s=new Set;for(var a of n)a.markers.length==1&&s.add(a.markers[0]);var l=[];for(var u of this.clusters)u.marker!=null&&(u.markers.length==1?s.has(u.marker)||Ss.setMap(u.marker,null):l.push(u.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>l.forEach(d=>Ss.setMap(d,null)))}google.maps.event.trigger(this,Jf.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Ss.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new oae(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,n),r.markers.forEach(s=>Ss.setMap(s,null)),this.onClusterClick&&r.marker.addListener("click",s=>{google.maps.event.trigger(this,Jf.CLUSTER_CLICK,r),this.onClusterClick(s,r,n)})),Ss.setMap(r.marker,n)})}}function YR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function WR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hae(t){var e=ise(),[n,r]=x.useState(null);return x.useEffect(()=>{if(e&&n===null){var s=new dae(WR(WR({},t),{},{map:e}));r(s)}},[e]),n}function fae(t){var{children:e,options:n}=t,r=hae(n);return r!==null?e(r):null}x.memo(fae);var GR={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},KR={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function mae(t){var{children:e,anchor:n,options:r,position:s,zIndex:a,onCloseClick:l,onDomReady:u,onContentChanged:d,onPositionChanged:f,onZindexChanged:m,onLoad:g,onUnmount:y}=t,w=x.useContext(lt),[_,C]=x.useState(null),[S,N]=x.useState(null),[k,R]=x.useState(null),[A,L]=x.useState(null),[F,P]=x.useState(null),[O,T]=x.useState(null),I=x.useRef(null);return x.useEffect(()=>{_!==null&&(_.close(),n?_.open(w,n):_.getPosition()&&_.open(w))},[w,_,n]),x.useEffect(()=>{r&&_!==null&&_.setOptions(r)},[_,r]),x.useEffect(()=>{s&&_!==null&&_.setPosition(s)},[s]),x.useEffect(()=>{typeof a=="number"&&_!==null&&_.setZIndex(a)},[a]),x.useEffect(()=>{_&&l&&(S!==null&&google.maps.event.removeListener(S),N(google.maps.event.addListener(_,"closeclick",l)))},[l]),x.useEffect(()=>{_&&u&&(k!==null&&google.maps.event.removeListener(k),R(google.maps.event.addListener(_,"domready",u)))},[u]),x.useEffect(()=>{_&&d&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(_,"content_changed",d)))},[d]),x.useEffect(()=>{_&&f&&(F!==null&&google.maps.event.removeListener(F),P(google.maps.event.addListener(_,"position_changed",f)))},[f]),x.useEffect(()=>{_&&m&&(O!==null&&google.maps.event.removeListener(O),T(google.maps.event.addListener(_,"zindex_changed",m)))},[m]),x.useEffect(()=>{var V=new google.maps.InfoWindow(r);return C(V),I.current=document.createElement("div"),l&&N(google.maps.event.addListener(V,"closeclick",l)),u&&R(google.maps.event.addListener(V,"domready",u)),d&&L(google.maps.event.addListener(V,"content_changed",d)),f&&P(google.maps.event.addListener(V,"position_changed",f)),m&&T(google.maps.event.addListener(V,"zindex_changed",m)),V.setContent(I.current),s&&V.setPosition(s),a&&V.setZIndex(a),n?V.open(w,n):V.getPosition()?V.open(w):or(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),g&&g(V),()=>{S&&google.maps.event.removeListener(S),A&&google.maps.event.removeListener(A),k&&google.maps.event.removeListener(k),F&&google.maps.event.removeListener(F),O&&google.maps.event.removeListener(O),y&&y(V),V.close()}},[]),I.current?Ll.createPortal(x.Children.only(e),I.current):null}x.memo(mae);class pae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"containerElement",null),pe(this,"state",{infoWindow:null}),pe(this,"open",(e,n)=>{n?e.open(this.context,n):e.getPosition()?e.open(this.context):or(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),pe(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=ht({updaterMap:KR,eventMap:GR,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:KR,eventMap:GR,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(pt(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Ll.createPortal(x.Children.only(this.props.children),this.containerElement):null}}pe(pae,"contextType",lt);function QR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function x0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var XR={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},ZR={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},gae={};function yae(t){var{options:e,draggable:n,editable:r,visible:s,path:a,onDblClick:l,onDragEnd:u,onDragStart:d,onMouseDown:f,onMouseMove:m,onMouseOut:g,onMouseOver:y,onMouseUp:w,onRightClick:_,onClick:C,onDrag:S,onLoad:N,onUnmount:k}=t,R=x.useContext(lt),[A,L]=x.useState(null),[F,P]=x.useState(null),[O,T]=x.useState(null),[I,V]=x.useState(null),[$,U]=x.useState(null),[G,W]=x.useState(null),[z,q]=x.useState(null),[K,X]=x.useState(null),[se,H]=x.useState(null),[Z,te]=x.useState(null),[J,ne]=x.useState(null),[ae,me]=x.useState(null);return x.useEffect(()=>{A!==null&&A.setMap(R)},[R]),x.useEffect(()=>{typeof e<"u"&&A!==null&&A.setOptions(e)},[A,e]),x.useEffect(()=>{typeof n<"u"&&A!==null&&A.setDraggable(n)},[A,n]),x.useEffect(()=>{typeof r<"u"&&A!==null&&A.setEditable(r)},[A,r]),x.useEffect(()=>{typeof s<"u"&&A!==null&&A.setVisible(s)},[A,s]),x.useEffect(()=>{typeof a<"u"&&A!==null&&A.setPath(a)},[A,a]),x.useEffect(()=>{A&&l&&(F!==null&&google.maps.event.removeListener(F),P(google.maps.event.addListener(A,"dblclick",l)))},[l]),x.useEffect(()=>{A&&u&&(O!==null&&google.maps.event.removeListener(O),T(google.maps.event.addListener(A,"dragend",u)))},[u]),x.useEffect(()=>{A&&d&&(I!==null&&google.maps.event.removeListener(I),V(google.maps.event.addListener(A,"dragstart",d)))},[d]),x.useEffect(()=>{A&&f&&($!==null&&google.maps.event.removeListener($),U(google.maps.event.addListener(A,"mousedown",f)))},[f]),x.useEffect(()=>{A&&m&&(G!==null&&google.maps.event.removeListener(G),W(google.maps.event.addListener(A,"mousemove",m)))},[m]),x.useEffect(()=>{A&&g&&(z!==null&&google.maps.event.removeListener(z),q(google.maps.event.addListener(A,"mouseout",g)))},[g]),x.useEffect(()=>{A&&y&&(K!==null&&google.maps.event.removeListener(K),X(google.maps.event.addListener(A,"mouseover",y)))},[y]),x.useEffect(()=>{A&&w&&(se!==null&&google.maps.event.removeListener(se),H(google.maps.event.addListener(A,"mouseup",w)))},[w]),x.useEffect(()=>{A&&_&&(Z!==null&&google.maps.event.removeListener(Z),te(google.maps.event.addListener(A,"rightclick",_)))},[_]),x.useEffect(()=>{A&&C&&(J!==null&&google.maps.event.removeListener(J),ne(google.maps.event.addListener(A,"click",C)))},[C]),x.useEffect(()=>{A&&S&&(ae!==null&&google.maps.event.removeListener(ae),me(google.maps.event.addListener(A,"drag",S)))},[S]),x.useEffect(()=>{var we=new google.maps.Polyline(x0(x0({},e||gae),{},{map:R}));return a&&we.setPath(a),typeof s<"u"&&we.setVisible(s),typeof r<"u"&&we.setEditable(r),typeof n<"u"&&we.setDraggable(n),l&&P(google.maps.event.addListener(we,"dblclick",l)),u&&T(google.maps.event.addListener(we,"dragend",u)),d&&V(google.maps.event.addListener(we,"dragstart",d)),f&&U(google.maps.event.addListener(we,"mousedown",f)),m&&W(google.maps.event.addListener(we,"mousemove",m)),g&&q(google.maps.event.addListener(we,"mouseout",g)),y&&X(google.maps.event.addListener(we,"mouseover",y)),w&&H(google.maps.event.addListener(we,"mouseup",w)),_&&te(google.maps.event.addListener(we,"rightclick",_)),C&&ne(google.maps.event.addListener(we,"click",C)),S&&me(google.maps.event.addListener(we,"drag",S)),L(we),N&&N(we),()=>{F!==null&&google.maps.event.removeListener(F),O!==null&&google.maps.event.removeListener(O),I!==null&&google.maps.event.removeListener(I),$!==null&&google.maps.event.removeListener($),G!==null&&google.maps.event.removeListener(G),z!==null&&google.maps.event.removeListener(z),K!==null&&google.maps.event.removeListener(K),se!==null&&google.maps.event.removeListener(se),Z!==null&&google.maps.event.removeListener(Z),J!==null&&google.maps.event.removeListener(J),k&&k(we),we.setMap(null)}},[]),null}x.memo(yae);class xae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{polyline:null}),pe(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(x0(x0({},this.props.options),{},{map:this.context}));this.registeredEvents=ht({updaterMap:ZR,eventMap:XR,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:ZR,eventMap:XR,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),pt(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}pe(xae,"contextType",lt);function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function e4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var t4={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},n4={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function vae(t){var{options:e,draggable:n,editable:r,visible:s,path:a,paths:l,onDblClick:u,onDragEnd:d,onDragStart:f,onMouseDown:m,onMouseMove:g,onMouseOut:y,onMouseOver:w,onMouseUp:_,onRightClick:C,onClick:S,onDrag:N,onLoad:k,onUnmount:R,onEdit:A}=t,L=x.useContext(lt),[F,P]=x.useState(null),[O,T]=x.useState(null),[I,V]=x.useState(null),[$,U]=x.useState(null),[G,W]=x.useState(null),[z,q]=x.useState(null),[K,X]=x.useState(null),[se,H]=x.useState(null),[Z,te]=x.useState(null),[J,ne]=x.useState(null),[ae,me]=x.useState(null),[we,Ne]=x.useState(null);return x.useEffect(()=>{F!==null&&F.setMap(L)},[L]),x.useEffect(()=>{typeof e<"u"&&F!==null&&F.setOptions(e)},[F,e]),x.useEffect(()=>{typeof n<"u"&&F!==null&&F.setDraggable(n)},[F,n]),x.useEffect(()=>{typeof r<"u"&&F!==null&&F.setEditable(r)},[F,r]),x.useEffect(()=>{typeof s<"u"&&F!==null&&F.setVisible(s)},[F,s]),x.useEffect(()=>{typeof a<"u"&&F!==null&&F.setPath(a)},[F,a]),x.useEffect(()=>{typeof l<"u"&&F!==null&&F.setPaths(l)},[F,l]),x.useEffect(()=>{F&&typeof u=="function"&&(O!==null&&google.maps.event.removeListener(O),T(google.maps.event.addListener(F,"dblclick",u)))},[u]),x.useEffect(()=>{F&&(google.maps.event.addListener(F.getPath(),"insert_at",()=>{A?.(F)}),google.maps.event.addListener(F.getPath(),"set_at",()=>{A?.(F)}),google.maps.event.addListener(F.getPath(),"remove_at",()=>{A?.(F)}))},[F,A]),x.useEffect(()=>{F&&typeof d=="function"&&(I!==null&&google.maps.event.removeListener(I),V(google.maps.event.addListener(F,"dragend",d)))},[d]),x.useEffect(()=>{F&&typeof f=="function"&&($!==null&&google.maps.event.removeListener($),U(google.maps.event.addListener(F,"dragstart",f)))},[f]),x.useEffect(()=>{F&&typeof m=="function"&&(G!==null&&google.maps.event.removeListener(G),W(google.maps.event.addListener(F,"mousedown",m)))},[m]),x.useEffect(()=>{F&&typeof g=="function"&&(z!==null&&google.maps.event.removeListener(z),q(google.maps.event.addListener(F,"mousemove",g)))},[g]),x.useEffect(()=>{F&&typeof y=="function"&&(K!==null&&google.maps.event.removeListener(K),X(google.maps.event.addListener(F,"mouseout",y)))},[y]),x.useEffect(()=>{F&&typeof w=="function"&&(se!==null&&google.maps.event.removeListener(se),H(google.maps.event.addListener(F,"mouseover",w)))},[w]),x.useEffect(()=>{F&&typeof _=="function"&&(Z!==null&&google.maps.event.removeListener(Z),te(google.maps.event.addListener(F,"mouseup",_)))},[_]),x.useEffect(()=>{F&&typeof C=="function"&&(J!==null&&google.maps.event.removeListener(J),ne(google.maps.event.addListener(F,"rightclick",C)))},[C]),x.useEffect(()=>{F&&typeof S=="function"&&(ae!==null&&google.maps.event.removeListener(ae),me(google.maps.event.addListener(F,"click",S)))},[S]),x.useEffect(()=>{F&&typeof N=="function"&&(we!==null&&google.maps.event.removeListener(we),Ne(google.maps.event.addListener(F,"drag",N)))},[N]),x.useEffect(()=>{var Se=new google.maps.Polygon(e4(e4({},e),{},{map:L}));return a&&Se.setPath(a),l&&Se.setPaths(l),typeof s<"u"&&Se.setVisible(s),typeof r<"u"&&Se.setEditable(r),typeof n<"u"&&Se.setDraggable(n),u&&T(google.maps.event.addListener(Se,"dblclick",u)),d&&V(google.maps.event.addListener(Se,"dragend",d)),f&&U(google.maps.event.addListener(Se,"dragstart",f)),m&&W(google.maps.event.addListener(Se,"mousedown",m)),g&&q(google.maps.event.addListener(Se,"mousemove",g)),y&&X(google.maps.event.addListener(Se,"mouseout",y)),w&&H(google.maps.event.addListener(Se,"mouseover",w)),_&&te(google.maps.event.addListener(Se,"mouseup",_)),C&&ne(google.maps.event.addListener(Se,"rightclick",C)),S&&me(google.maps.event.addListener(Se,"click",S)),N&&Ne(google.maps.event.addListener(Se,"drag",N)),P(Se),k&&k(Se),()=>{O!==null&&google.maps.event.removeListener(O),I!==null&&google.maps.event.removeListener(I),$!==null&&google.maps.event.removeListener($),G!==null&&google.maps.event.removeListener(G),z!==null&&google.maps.event.removeListener(z),K!==null&&google.maps.event.removeListener(K),se!==null&&google.maps.event.removeListener(se),Z!==null&&google.maps.event.removeListener(Z),J!==null&&google.maps.event.removeListener(J),ae!==null&&google.maps.event.removeListener(ae),R&&R(Se),Se.setMap(null)}},[]),null}x.memo(vae);class bae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=ht({updaterMap:n4,eventMap:t4,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:n4,eventMap:t4,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),pt(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}pe(bae,"contextType",lt);function r4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function v0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r4(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var s4={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},a4={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function wae(t){var{options:e,bounds:n,draggable:r,editable:s,visible:a,onDblClick:l,onDragEnd:u,onDragStart:d,onMouseDown:f,onMouseMove:m,onMouseOut:g,onMouseOver:y,onMouseUp:w,onRightClick:_,onClick:C,onDrag:S,onBoundsChanged:N,onLoad:k,onUnmount:R}=t,A=x.useContext(lt),[L,F]=x.useState(null),[P,O]=x.useState(null),[T,I]=x.useState(null),[V,$]=x.useState(null),[U,G]=x.useState(null),[W,z]=x.useState(null),[q,K]=x.useState(null),[X,se]=x.useState(null),[H,Z]=x.useState(null),[te,J]=x.useState(null),[ne,ae]=x.useState(null),[me,we]=x.useState(null),[Ne,Se]=x.useState(null);return x.useEffect(()=>{L!==null&&L.setMap(A)},[A]),x.useEffect(()=>{typeof e<"u"&&L!==null&&L.setOptions(e)},[L,e]),x.useEffect(()=>{typeof r<"u"&&L!==null&&L.setDraggable(r)},[L,r]),x.useEffect(()=>{typeof s<"u"&&L!==null&&L.setEditable(s)},[L,s]),x.useEffect(()=>{typeof a<"u"&&L!==null&&L.setVisible(a)},[L,a]),x.useEffect(()=>{typeof n<"u"&&L!==null&&L.setBounds(n)},[L,n]),x.useEffect(()=>{L&&l&&(P!==null&&google.maps.event.removeListener(P),O(google.maps.event.addListener(L,"dblclick",l)))},[l]),x.useEffect(()=>{L&&u&&(T!==null&&google.maps.event.removeListener(T),I(google.maps.event.addListener(L,"dragend",u)))},[u]),x.useEffect(()=>{L&&d&&(V!==null&&google.maps.event.removeListener(V),$(google.maps.event.addListener(L,"dragstart",d)))},[d]),x.useEffect(()=>{L&&f&&(U!==null&&google.maps.event.removeListener(U),G(google.maps.event.addListener(L,"mousedown",f)))},[f]),x.useEffect(()=>{L&&m&&(W!==null&&google.maps.event.removeListener(W),z(google.maps.event.addListener(L,"mousemove",m)))},[m]),x.useEffect(()=>{L&&g&&(q!==null&&google.maps.event.removeListener(q),K(google.maps.event.addListener(L,"mouseout",g)))},[g]),x.useEffect(()=>{L&&y&&(X!==null&&google.maps.event.removeListener(X),se(google.maps.event.addListener(L,"mouseover",y)))},[y]),x.useEffect(()=>{L&&w&&(H!==null&&google.maps.event.removeListener(H),Z(google.maps.event.addListener(L,"mouseup",w)))},[w]),x.useEffect(()=>{L&&_&&(te!==null&&google.maps.event.removeListener(te),J(google.maps.event.addListener(L,"rightclick",_)))},[_]),x.useEffect(()=>{L&&C&&(ne!==null&&google.maps.event.removeListener(ne),ae(google.maps.event.addListener(L,"click",C)))},[C]),x.useEffect(()=>{L&&S&&(me!==null&&google.maps.event.removeListener(me),we(google.maps.event.addListener(L,"drag",S)))},[S]),x.useEffect(()=>{L&&N&&(Ne!==null&&google.maps.event.removeListener(Ne),Se(google.maps.event.addListener(L,"bounds_changed",N)))},[N]),x.useEffect(()=>{var Ue=new google.maps.Rectangle(v0(v0({},e),{},{map:A}));return typeof a<"u"&&Ue.setVisible(a),typeof s<"u"&&Ue.setEditable(s),typeof r<"u"&&Ue.setDraggable(r),typeof n<"u"&&Ue.setBounds(n),l&&O(google.maps.event.addListener(Ue,"dblclick",l)),u&&I(google.maps.event.addListener(Ue,"dragend",u)),d&&$(google.maps.event.addListener(Ue,"dragstart",d)),f&&G(google.maps.event.addListener(Ue,"mousedown",f)),m&&z(google.maps.event.addListener(Ue,"mousemove",m)),g&&K(google.maps.event.addListener(Ue,"mouseout",g)),y&&se(google.maps.event.addListener(Ue,"mouseover",y)),w&&Z(google.maps.event.addListener(Ue,"mouseup",w)),_&&J(google.maps.event.addListener(Ue,"rightclick",_)),C&&ae(google.maps.event.addListener(Ue,"click",C)),S&&we(google.maps.event.addListener(Ue,"drag",S)),N&&Se(google.maps.event.addListener(Ue,"bounds_changed",N)),F(Ue),k&&k(Ue),()=>{P!==null&&google.maps.event.removeListener(P),T!==null&&google.maps.event.removeListener(T),V!==null&&google.maps.event.removeListener(V),U!==null&&google.maps.event.removeListener(U),W!==null&&google.maps.event.removeListener(W),q!==null&&google.maps.event.removeListener(q),X!==null&&google.maps.event.removeListener(X),H!==null&&google.maps.event.removeListener(H),te!==null&&google.maps.event.removeListener(te),ne!==null&&google.maps.event.removeListener(ne),me!==null&&google.maps.event.removeListener(me),Ne!==null&&google.maps.event.removeListener(Ne),R&&R(Ue),Ue.setMap(null)}},[]),null}x.memo(wae);class _ae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{rectangle:null}),pe(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(v0(v0({},this.props.options),{},{map:this.context}));this.registeredEvents=ht({updaterMap:a4,eventMap:s4,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:a4,eventMap:s4,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),pt(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}pe(_ae,"contextType",lt);function i4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function b0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i4(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var o4={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},l4={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},Eae={};function Cae(t){var{options:e,center:n,radius:r,draggable:s,editable:a,visible:l,onDblClick:u,onDragEnd:d,onDragStart:f,onMouseDown:m,onMouseMove:g,onMouseOut:y,onMouseOver:w,onMouseUp:_,onRightClick:C,onClick:S,onDrag:N,onCenterChanged:k,onRadiusChanged:R,onLoad:A,onUnmount:L}=t,F=x.useContext(lt),[P,O]=x.useState(null),[T,I]=x.useState(null),[V,$]=x.useState(null),[U,G]=x.useState(null),[W,z]=x.useState(null),[q,K]=x.useState(null),[X,se]=x.useState(null),[H,Z]=x.useState(null),[te,J]=x.useState(null),[ne,ae]=x.useState(null),[me,we]=x.useState(null),[Ne,Se]=x.useState(null),[Ue,jt]=x.useState(null),[Qe,on]=x.useState(null);return x.useEffect(()=>{P!==null&&P.setMap(F)},[F]),x.useEffect(()=>{typeof e<"u"&&P!==null&&P.setOptions(e)},[P,e]),x.useEffect(()=>{typeof s<"u"&&P!==null&&P.setDraggable(s)},[P,s]),x.useEffect(()=>{typeof a<"u"&&P!==null&&P.setEditable(a)},[P,a]),x.useEffect(()=>{typeof l<"u"&&P!==null&&P.setVisible(l)},[P,l]),x.useEffect(()=>{typeof r=="number"&&P!==null&&P.setRadius(r)},[P,r]),x.useEffect(()=>{typeof n<"u"&&P!==null&&P.setCenter(n)},[P,n]),x.useEffect(()=>{P&&u&&(T!==null&&google.maps.event.removeListener(T),I(google.maps.event.addListener(P,"dblclick",u)))},[u]),x.useEffect(()=>{P&&d&&(V!==null&&google.maps.event.removeListener(V),$(google.maps.event.addListener(P,"dragend",d)))},[d]),x.useEffect(()=>{P&&f&&(U!==null&&google.maps.event.removeListener(U),G(google.maps.event.addListener(P,"dragstart",f)))},[f]),x.useEffect(()=>{P&&m&&(W!==null&&google.maps.event.removeListener(W),z(google.maps.event.addListener(P,"mousedown",m)))},[m]),x.useEffect(()=>{P&&g&&(q!==null&&google.maps.event.removeListener(q),K(google.maps.event.addListener(P,"mousemove",g)))},[g]),x.useEffect(()=>{P&&y&&(X!==null&&google.maps.event.removeListener(X),se(google.maps.event.addListener(P,"mouseout",y)))},[y]),x.useEffect(()=>{P&&w&&(H!==null&&google.maps.event.removeListener(H),Z(google.maps.event.addListener(P,"mouseover",w)))},[w]),x.useEffect(()=>{P&&_&&(te!==null&&google.maps.event.removeListener(te),J(google.maps.event.addListener(P,"mouseup",_)))},[_]),x.useEffect(()=>{P&&C&&(ne!==null&&google.maps.event.removeListener(ne),ae(google.maps.event.addListener(P,"rightclick",C)))},[C]),x.useEffect(()=>{P&&S&&(me!==null&&google.maps.event.removeListener(me),we(google.maps.event.addListener(P,"click",S)))},[S]),x.useEffect(()=>{P&&N&&(Ne!==null&&google.maps.event.removeListener(Ne),Se(google.maps.event.addListener(P,"drag",N)))},[N]),x.useEffect(()=>{P&&k&&(Ue!==null&&google.maps.event.removeListener(Ue),jt(google.maps.event.addListener(P,"center_changed",k)))},[S]),x.useEffect(()=>{P&&R&&(Qe!==null&&google.maps.event.removeListener(Qe),on(google.maps.event.addListener(P,"radius_changed",R)))},[R]),x.useEffect(()=>{var Ee=new google.maps.Circle(b0(b0({},e||Eae),{},{map:F}));return typeof r=="number"&&Ee.setRadius(r),typeof n<"u"&&Ee.setCenter(n),typeof r=="number"&&Ee.setRadius(r),typeof l<"u"&&Ee.setVisible(l),typeof a<"u"&&Ee.setEditable(a),typeof s<"u"&&Ee.setDraggable(s),u&&I(google.maps.event.addListener(Ee,"dblclick",u)),d&&$(google.maps.event.addListener(Ee,"dragend",d)),f&&G(google.maps.event.addListener(Ee,"dragstart",f)),m&&z(google.maps.event.addListener(Ee,"mousedown",m)),g&&K(google.maps.event.addListener(Ee,"mousemove",g)),y&&se(google.maps.event.addListener(Ee,"mouseout",y)),w&&Z(google.maps.event.addListener(Ee,"mouseover",w)),_&&J(google.maps.event.addListener(Ee,"mouseup",_)),C&&ae(google.maps.event.addListener(Ee,"rightclick",C)),S&&we(google.maps.event.addListener(Ee,"click",S)),N&&Se(google.maps.event.addListener(Ee,"drag",N)),k&&jt(google.maps.event.addListener(Ee,"center_changed",k)),R&&on(google.maps.event.addListener(Ee,"radius_changed",R)),O(Ee),A&&A(Ee),()=>{T!==null&&google.maps.event.removeListener(T),V!==null&&google.maps.event.removeListener(V),U!==null&&google.maps.event.removeListener(U),W!==null&&google.maps.event.removeListener(W),q!==null&&google.maps.event.removeListener(q),X!==null&&google.maps.event.removeListener(X),H!==null&&google.maps.event.removeListener(H),te!==null&&google.maps.event.removeListener(te),ne!==null&&google.maps.event.removeListener(ne),me!==null&&google.maps.event.removeListener(me),Ue!==null&&google.maps.event.removeListener(Ue),Qe!==null&&google.maps.event.removeListener(Qe),L&&L(Ee),Ee.setMap(null)}},[]),null}x.memo(Cae);class Sae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{circle:null}),pe(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(b0(b0({},this.props.options),{},{map:this.context}));this.registeredEvents=ht({updaterMap:l4,eventMap:o4,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:l4,eventMap:o4,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),pt(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}pe(Sae,"contextType",lt);function c4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function w0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var u4={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},d4={add(t,e){t.add(e)},addgeojson(t,e,n){t.addGeoJson(e,n)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,n,r){t.loadGeoJson(e,n,r)},overridestyle(t,e,n){t.overrideStyle(e,n)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function Nae(t){var{options:e,onClick:n,onDblClick:r,onMouseDown:s,onMouseMove:a,onMouseOut:l,onMouseOver:u,onMouseUp:d,onRightClick:f,onAddFeature:m,onRemoveFeature:g,onRemoveProperty:y,onSetGeometry:w,onSetProperty:_,onLoad:C,onUnmount:S}=t,N=x.useContext(lt),[k,R]=x.useState(null),[A,L]=x.useState(null),[F,P]=x.useState(null),[O,T]=x.useState(null),[I,V]=x.useState(null),[$,U]=x.useState(null),[G,W]=x.useState(null),[z,q]=x.useState(null),[K,X]=x.useState(null),[se,H]=x.useState(null),[Z,te]=x.useState(null),[J,ne]=x.useState(null),[ae,me]=x.useState(null),[we,Ne]=x.useState(null);return x.useEffect(()=>{k!==null&&k.setMap(N)},[N]),x.useEffect(()=>{k&&r&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(k,"dblclick",r)))},[r]),x.useEffect(()=>{k&&s&&(F!==null&&google.maps.event.removeListener(F),P(google.maps.event.addListener(k,"mousedown",s)))},[s]),x.useEffect(()=>{k&&a&&(O!==null&&google.maps.event.removeListener(O),T(google.maps.event.addListener(k,"mousemove",a)))},[a]),x.useEffect(()=>{k&&l&&(I!==null&&google.maps.event.removeListener(I),V(google.maps.event.addListener(k,"mouseout",l)))},[l]),x.useEffect(()=>{k&&u&&($!==null&&google.maps.event.removeListener($),U(google.maps.event.addListener(k,"mouseover",u)))},[u]),x.useEffect(()=>{k&&d&&(G!==null&&google.maps.event.removeListener(G),W(google.maps.event.addListener(k,"mouseup",d)))},[d]),x.useEffect(()=>{k&&f&&(z!==null&&google.maps.event.removeListener(z),q(google.maps.event.addListener(k,"rightclick",f)))},[f]),x.useEffect(()=>{k&&n&&(K!==null&&google.maps.event.removeListener(K),X(google.maps.event.addListener(k,"click",n)))},[n]),x.useEffect(()=>{k&&m&&(se!==null&&google.maps.event.removeListener(se),H(google.maps.event.addListener(k,"addfeature",m)))},[m]),x.useEffect(()=>{k&&g&&(Z!==null&&google.maps.event.removeListener(Z),te(google.maps.event.addListener(k,"removefeature",g)))},[g]),x.useEffect(()=>{k&&y&&(J!==null&&google.maps.event.removeListener(J),ne(google.maps.event.addListener(k,"removeproperty",y)))},[y]),x.useEffect(()=>{k&&w&&(ae!==null&&google.maps.event.removeListener(ae),me(google.maps.event.addListener(k,"setgeometry",w)))},[w]),x.useEffect(()=>{k&&_&&(we!==null&&google.maps.event.removeListener(we),Ne(google.maps.event.addListener(k,"setproperty",_)))},[_]),x.useEffect(()=>{if(N!==null){var Se=new google.maps.Data(w0(w0({},e),{},{map:N}));r&&L(google.maps.event.addListener(Se,"dblclick",r)),s&&P(google.maps.event.addListener(Se,"mousedown",s)),a&&T(google.maps.event.addListener(Se,"mousemove",a)),l&&V(google.maps.event.addListener(Se,"mouseout",l)),u&&U(google.maps.event.addListener(Se,"mouseover",u)),d&&W(google.maps.event.addListener(Se,"mouseup",d)),f&&q(google.maps.event.addListener(Se,"rightclick",f)),n&&X(google.maps.event.addListener(Se,"click",n)),m&&H(google.maps.event.addListener(Se,"addfeature",m)),g&&te(google.maps.event.addListener(Se,"removefeature",g)),y&&ne(google.maps.event.addListener(Se,"removeproperty",y)),w&&me(google.maps.event.addListener(Se,"setgeometry",w)),_&&Ne(google.maps.event.addListener(Se,"setproperty",_)),R(Se),C&&C(Se)}return()=>{k&&(A!==null&&google.maps.event.removeListener(A),F!==null&&google.maps.event.removeListener(F),O!==null&&google.maps.event.removeListener(O),I!==null&&google.maps.event.removeListener(I),$!==null&&google.maps.event.removeListener($),G!==null&&google.maps.event.removeListener(G),z!==null&&google.maps.event.removeListener(z),K!==null&&google.maps.event.removeListener(K),se!==null&&google.maps.event.removeListener(se),Z!==null&&google.maps.event.removeListener(Z),J!==null&&google.maps.event.removeListener(J),ae!==null&&google.maps.event.removeListener(ae),we!==null&&google.maps.event.removeListener(we),S&&S(k),k.setMap(null))}},[]),null}x.memo(Nae);class jae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{data:null}),pe(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(w0(w0({},this.props.options),{},{map:this.context}));this.registeredEvents=ht({updaterMap:d4,eventMap:u4,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:d4,eventMap:u4,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),pt(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}pe(jae,"contextType",lt);function h4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function f4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h4(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var m4={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},p4={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class Tae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{kmlLayer:null}),pe(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(f4(f4({},this.props.options),{},{map:this.context}));this.registeredEvents=ht({updaterMap:p4,eventMap:m4,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:p4,eventMap:m4,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),pt(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}pe(Tae,"contextType",lt);function z5(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function kae(t,e){return new e(t.lat,t.lng)}function Dae(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function Aae(t,e,n){return t instanceof e?t:n(t,e)}function Rae(t,e,n){return t instanceof e?t:n(t,e)}function Pae(t,e,n){var r=t&&t.fromLatLngToDivPixel(n.getNorthEast()),s=t&&t.fromLatLngToDivPixel(n.getSouthWest());return r&&s?{left:"".concat(s.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-s.x-e.x,"px"),height:"".concat(s.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function Mae(t,e,n){var r=t&&t.fromLatLngToDivPixel(n);if(r){var{x:s,y:a}=r;return{left:"".concat(s+e.x,"px"),top:"".concat(a+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function H5(t,e,n,r){return n!==void 0?Pae(t,e,Rae(n,google.maps.LatLngBounds,Dae)):Mae(t,e,Aae(r,google.maps.LatLng,kae))}function Lae(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function g4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Oae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g4(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Iae(t,e,n,r,s){class a extends google.maps.OverlayView{constructor(u,d,f,m){super(),this.container=u,this.pane=d,this.position=f,this.bounds=m}onAdd(){var u,d=(u=this.getPanes())===null||u===void 0?void 0:u[this.pane];d?.appendChild(this.container)}draw(){var u=this.getProjection(),d=Oae({},this.container?z5(this.container,s):{x:0,y:0}),f=H5(u,d,this.bounds,this.position);for(var[m,g]of Object.entries(f))this.container.style[m]=g}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new a(t,e,n,r)}function y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Vae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x4(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function v4(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function Uae(t){var{position:e,bounds:n,mapPaneName:r,zIndex:s,onLoad:a,onUnmount:l,getPixelPositionOffset:u,children:d}=t,f=x.useContext(lt),m=x.useMemo(()=>{var y=document.createElement("div");return y.style.position="absolute",y},[]),g=x.useMemo(()=>Iae(m,r,e,n,u),[m,r,e,n]);return x.useEffect(()=>(a?.(g),g?.setMap(f),()=>{l?.(g),g?.setMap(null)}),[f,g]),x.useEffect(()=>{m.style.zIndex="".concat(s)},[s,m]),Ll.createPortal(d,m)}x.memo(Uae);class rh extends x.PureComponent{constructor(e){super(e),pe(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),pe(this,"updatePane",()=>{var r=this.props.mapPaneName,s=this.overlayView.getPanes();or(!!r,"OverlayView requires props.mapPaneName but got %s",r),s?this.setState({paneEl:s[r]}):this.setState({paneEl:null})}),pe(this,"onAdd",()=>{var r,s;this.updatePane(),(r=(s=this.props).onLoad)===null||r===void 0||r.call(s,this.overlayView)}),pe(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),s=Vae({x:0,y:0},this.containerRef.current?z5(this.containerRef.current,this.props.getPixelPositionOffset):{}),a=H5(r,s,this.props.bounds,this.props.position);if(!Lae(a,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var l,u,d,f;this.setState({containerStyle:{top:(l=a.top)!==null&&l!==void 0?l:0,left:(u=a.left)!==null&&u!==void 0?u:0,width:(d=a.width)!==null&&d!==void 0?d:0,height:(f=a.height)!==null&&f!==void 0?f:0,position:"absolute"}})}}),pe(this,"draw",()=>{this.onPositionElement()}),pe(this,"onRemove",()=>{var r,s;this.setState(()=>({paneEl:null})),(r=(s=this.props).onUnmount)===null||r===void 0||r.call(s,this.overlayView)}),this.containerRef=x.createRef();var n=new google.maps.OverlayView;n.onAdd=this.onAdd,n.draw=this.draw,n.onRemove=this.onRemove,this.overlayView=n}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var n=x4(e.position),r=x4(this.props.position),s=v4(e.bounds),a=v4(this.props.bounds);(n!==r||s!==a)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?Ll.createPortal(i.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:x.Children.only(this.props.children)}),e):null}}pe(rh,"FLOAT_PANE","floatPane");pe(rh,"MAP_PANE","mapPane");pe(rh,"MARKER_LAYER","markerLayer");pe(rh,"OVERLAY_LAYER","overlayLayer");pe(rh,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");pe(rh,"contextType",lt);function Fae(){}function b4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function w4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b4(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _4={onDblClick:"dblclick",onClick:"click"},E4={opacity(t,e){t.setOpacity(e)}};function Bae(t){var{url:e,bounds:n,options:r,visible:s}=t,a=x.useContext(lt),l=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),u=x.useMemo(()=>new google.maps.GroundOverlay(e,l,r),[]);return x.useEffect(()=>{u!==null&&u.setMap(a)},[a]),x.useEffect(()=>{typeof e<"u"&&u!==null&&(u.set("url",e),u.setMap(a))},[u,e]),x.useEffect(()=>{typeof s<"u"&&u!==null&&u.setOpacity(s?1:0)},[u,s]),x.useEffect(()=>{var d=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));typeof n<"u"&&u!==null&&(u.set("bounds",d),u.setMap(a))},[u,n]),null}x.memo(Bae);class $5 extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{groundOverlay:null}),pe(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){or(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,w4(w4({},this.props.options),{},{map:this.context}));this.registeredEvents=ht({updaterMap:E4,eventMap:_4,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:E4,eventMap:_4,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}pe($5,"defaultProps",{onLoad:Fae});pe($5,"contextType",lt);function C4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function _0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C4(Object(n),!0).forEach(function(r){pe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var S4={},N4={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function zae(t){var{data:e,onLoad:n,onUnmount:r,options:s}=t,a=x.useContext(lt),[l,u]=x.useState(null);return x.useEffect(()=>{google.maps.visualization||or(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),x.useEffect(()=>{or(!!e,"data property is required in HeatmapLayer %s",e)},[e]),x.useEffect(()=>{l!==null&&l.setMap(a)},[a]),x.useEffect(()=>{s&&l!==null&&l.setOptions(s)},[l,s]),x.useEffect(()=>{var d=new google.maps.visualization.HeatmapLayer(_0(_0({},s),{},{data:e,map:a}));return u(d),n&&n(d),()=>{l!==null&&(r&&r(l),l.setMap(null))}},[]),null}x.memo(zae);class Hae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{heatmapLayer:null}),pe(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){or(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),or(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(_0(_0({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=ht({updaterMap:N4,eventMap:S4,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:N4,eventMap:S4,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),pt(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}pe(Hae,"contextType",lt);var j4={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},T4={register(t,e,n){t.registerPanoProvider(e,n)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class $ae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{streetViewPanorama:null}),pe(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,n,r=(e=(n=this.context)===null||n===void 0?void 0:n.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=ht({updaterMap:T4,eventMap:j4,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:T4,eventMap:j4,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),pt(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}pe($ae,"contextType",lt);class qae extends x.PureComponent{constructor(){super(...arguments),pe(this,"state",{streetViewService:null}),pe(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}pe(qae,"contextType",lt);var k4={onDirectionsChanged:"directions_changed"},D4={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class Yae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{directionsRenderer:null}),pe(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=ht({updaterMap:D4,eventMap:k4,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:D4,eventMap:k4,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),pt(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}pe(Yae,"contextType",lt);var A4={onPlacesChanged:"places_changed"},R4={bounds(t,e){t.setBounds(e)}};class Wae extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"containerElement",x.createRef()),pe(this,"state",{searchBox:null}),pe(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(or(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var n=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=ht({updaterMap:R4,eventMap:A4,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{searchBox:n}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:R4,eventMap:A4,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),pt(this.registeredEvents))}render(){return i.jsx("div",{ref:this.containerElement,children:x.Children.only(this.props.children)})}}pe(Wae,"contextType",lt);var P4={onPlaceChanged:"place_changed"},M4={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class sS extends x.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"containerElement",x.createRef()),pe(this,"state",{autocomplete:null}),pe(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;or(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var n=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(n){var r=new google.maps.places.Autocomplete(n,this.props.options);this.registeredEvents=ht({updaterMap:M4,eventMap:P4,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){pt(this.registeredEvents),this.registeredEvents=ht({updaterMap:M4,eventMap:P4,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&pt(this.registeredEvents)}render(){return i.jsx("div",{ref:this.containerElement,className:this.props.className,children:x.Children.only(this.props.children)})}}pe(sS,"defaultProps",{className:""});pe(sS,"contextType",lt);const Gae=["places"];function Kae(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState({address:"",latitude:0,longitude:0,commune:""}),[a,l]=x.useState(!0),[u,d]=x.useState(!1),[f,m]=x.useState(null),g=dn.googleMapsApiKey,{isLoaded:y,loadError:w}=Ese({googleMapsApiKey:g,libraries:Gae});x.useEffect(()=>{_()},[]);const _=async()=>{if(!t?.company_id){l(!1);return}try{const N=await Vr(t.company_id);N&&s({address:N.address||"",latitude:N.latitude||-33.4489,longitude:N.longitude||-70.6693,commune:N.commune||""})}catch(N){n(N)}finally{l(!1)}},C=()=>{if(f){const N=f.getPlace();N.geometry?.location&&s({address:N.formatted_address||"",latitude:N.geometry.location.lat(),longitude:N.geometry.location.lng(),commune:r.commune})}},S=async N=>{N.preventDefault(),d(!0);try{t?.company_id&&(await Xc(t.company_id,{address:r.address,latitude:r.latitude,longitude:r.longitude,commune:r.commune}),ue.success("Ubicacin guardada"),e("/setup/company-info"))}catch(k){ue.error("Error al guardar"),n(k)}finally{d(!1)}};return a?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):g?i.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Paso 2: Ubicacin"})]}),i.jsxs("form",{onSubmit:S,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direccin *"}),y?i.jsx(sS,{onLoad:m,onPlaceChanged:C,children:i.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.address,onChange:N=>s({...r,address:N.target.value})})}):i.jsx("input",{type:"text",disabled:!0,className:"w-full px-3 py-2 border border-gray-200 rounded-md bg-gray-100 text-gray-500",value:r.address,placeholder:"Cargando Google Maps..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comuna / Ciudad"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.commune,onChange:N=>s({...r,commune:N.target.value}),placeholder:"Ej: Las Condes, Providencia, uoa"})]}),i.jsxs("div",{className:"h-64 w-full relative",children:[!y&&!w&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded-md",children:i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}),w&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50 text-red-700 border border-red-200 rounded-md text-sm text-center px-4",children:"Error cargando Google Maps. Revisa tu clave de API o la conexin."}),y&&i.jsx(R_,{mapContainerStyle:{width:"100%",height:"100%"},center:{lat:r.latitude,lng:r.longitude},zoom:15,onClick:N=>{N.latLng&&s({...r,latitude:N.latLng.lat(),longitude:N.latLng.lng()})},children:i.jsx(g0,{position:{lat:r.latitude,lng:r.longitude}})})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("button",{type:"button",onClick:()=>e("/setup/company-basic"),className:"px-6 py-2 bg-gray-200 text-blue-900 rounded-md hover:bg-gray-300",children:"Anterior"}),i.jsx("button",{type:"submit",disabled:u||!y,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:u?"Guardando...":"Siguiente"})]})]})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Paso 2: Ubicacin"}),i.jsx("div",{className:"bg-white shadow rounded-lg p-6 space-y-4 border border-yellow-200",children:i.jsx("p",{className:"text-yellow-800 font-medium",children:"Falta la clave de Google Maps (VITE_GOOGLE_MAPS_API_KEY). Agrgala en tu archivo de entorno para continuar."})}),i.jsx("div",{className:"mt-6 flex justify-between",children:i.jsx("button",{type:"button",onClick:()=>e("/setup/company-basic"),className:"px-6 py-2 bg-gray-200 text-blue-900 rounded-md hover:bg-gray-300",children:"Anterior"})})]})})}function Qae(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState({description:"",show_description:!0,mission:"",vision:"",show_mission_vision:!0,booking_message:""}),[a,l]=x.useState(!0),[u,d]=x.useState(!1);x.useEffect(()=>{f()},[]);const f=async()=>{if(!t?.company_id){l(!1);return}try{const g=await Vr(t.company_id);g&&s({description:g.description||"",show_description:g.show_description??!0,mission:g.mission||"",vision:g.vision||"",show_mission_vision:g.show_mission_vision??!0,booking_message:g.booking_message||""})}catch(g){n(g)}finally{l(!1)}},m=async g=>{g.preventDefault(),d(!0);try{t?.company_id&&(await Xc(t.company_id,{description:r.description,show_description:r.show_description,mission:r.mission,vision:r.vision,show_mission_vision:r.show_mission_vision,booking_message:r.booking_message}),ue.success("Informacin guardada"),e("/setup/business-type"))}catch(y){ue.error("Error al guardar"),n(y)}finally{d(!1)}};return a?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Paso 3: Informacin corporativa"})]}),i.jsxs("form",{onSubmit:m,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Descripcin de la empresa"}),i.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu empresa, qu hace, qu ofrece, su historia, valores, etc.",value:r.description,onChange:g=>s({...r,description:g.target.value})}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Esta descripcin aparecer en tu pgina pblica antes de la misin y visin"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"show-description",type:"checkbox",checked:r.show_description,onChange:g=>s({...r,show_description:g.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"show-description",className:"ml-2 block text-sm text-gray-700",children:"Mostrar descripcin en la pgina pblica"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Misin"}),i.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.mission,onChange:g=>s({...r,mission:g.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visin"}),i.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.vision,onChange:g=>s({...r,vision:g.target.value})})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"show-mission-vision",type:"checkbox",checked:r.show_mission_vision,onChange:g=>s({...r,show_mission_vision:g.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"show-mission-vision",className:"ml-2 block text-sm text-gray-700",children:"Mostrar misin y visin en la pgina pblica"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje para agendar/comprar"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Hola! Quiero agendar un servicio...",value:r.booking_message,onChange:g=>s({...r,booking_message:g.target.value})})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("button",{type:"button",onClick:()=>e("/setup/company-location"),className:"px-6 py-2 bg-gray-200 text-blue-900 rounded-md hover:bg-gray-300",children:"Anterior"}),i.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:u?"Guardando...":"Siguiente"})]})]})]})})}function Xae(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),{trackNamedEvent:r}=eu(),[s,a]=x.useState(""),[l,u]=x.useState(!0),[d,f]=x.useState(!1);x.useEffect(()=>{m()},[]);const m=async()=>{if(!t?.company_id){u(!1);return}try{const y=await Vr(t.company_id);y?.business_type&&a(y.business_type)}catch(y){n(y,{context:{action:"loadCompany"}})}finally{u(!1)}},g=async y=>{if(y.preventDefault(),!s){ue.error("Debes seleccionar un tipo de negocio");return}f(!0);try{t?.company_id&&(await Xc(t.company_id,{business_type:s,setup_completed:!0}),ue.success("Configuracin completada"),r("companies.setupCompleted",{company_id:t.company_id,business_type:s}),s===un.SERVICES?e("/dashboard/services"):e("/dashboard/products"))}catch(w){ue.error("Error al guardar"),n(w)}finally{f(!1)}};return l?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Paso 4: Tipo de negocio"})]}),i.jsxs("form",{onSubmit:g,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Tipo de negocio *"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition ${s===un.SERVICES?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 hover:bg-gray-50"}`,children:[i.jsx("input",{type:"radio",name:"businessType",value:un.SERVICES,checked:s===un.SERVICES,onChange:y=>a(y.target.value),className:"mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Servicios"}),i.jsx("div",{className:`text-sm ${s===un.SERVICES?"text-blue-900":"text-gray-600"}`,children:"Ofreces servicios que se agendan por horarios"})]})]}),i.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition ${s===un.PRODUCTS?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 hover:bg-gray-50"}`,children:[i.jsx("input",{type:"radio",name:"businessType",value:un.PRODUCTS,checked:s===un.PRODUCTS,onChange:y=>a(y.target.value),className:"mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Productos"}),i.jsx("div",{className:`text-sm ${s===un.PRODUCTS?"text-blue-900":"text-gray-600"}`,children:"Vendes productos fsicos o digitales"})]})]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("button",{type:"button",onClick:()=>e("/setup/company-info"),className:"px-6 py-2 bg-gray-200 text-blue-900 rounded-md hover:bg-gray-300",children:"Anterior"}),i.jsx("button",{type:"submit",disabled:d||!s,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Guardando...":"Finalizar"})]})]})]})})}const Lx=async t=>{const e=Ex(Sx,"sendAppointmentEmail");try{return(await e(t)).data}catch(n){return{success:!1,message:n.message||"Email service unavailable"}}},Zae=async(t,e,n,r,s,a)=>{try{await Lx({type:"created",appointmentId:t.id,companyId:t.company_id,recipientEmail:s,appointmentData:{clientName:t.client_name,serviceName:e,professionalName:n,date:t.appointment_date.toISOString(),startTime:t.start_time,endTime:t.end_time,notes:t.notes},companyData:{name:r,whatsapp:a}})}catch{}},q5=async(t,e,n,r,s,a)=>{s&&await Lx({type:"confirmed",appointmentId:t.id,companyId:t.company_id,recipientEmail:s,appointmentData:{clientName:t.client_name,serviceName:e,professionalName:n,date:t.appointment_date.toISOString(),startTime:t.start_time,endTime:t.end_time,notes:t.notes},companyData:{name:r,whatsapp:a}})},Jae=async(t,e,n,r,s,a)=>{await Lx({type:"cancelled",appointmentId:t.id,companyId:t.company_id,recipientEmail:s,appointmentData:{clientName:t.client_name,serviceName:e,professionalName:n,date:t.appointment_date.toISOString(),startTime:t.start_time,endTime:t.end_time,notes:t.notes},companyData:{name:r,whatsapp:a}})},$g=async(t,e,n,r,s,a)=>{if(s)try{await Lx({type:"reminder",appointmentId:t.id,companyId:t.company_id,recipientEmail:s,appointmentData:{clientName:t.client_name,serviceName:e,professionalName:n,date:t.appointment_date.toISOString(),startTime:t.start_time,endTime:t.end_time,notes:t.notes},companyData:{name:r,whatsapp:a}})}catch{}},eie=/<\s*\/?script[^>]*>.*?<\s*\/\s*script\s*>/gis,tie=/<\s*\/?script[^>]*>/gi;function Ks(t,e=500){return t.replace(eie,"").replace(tie,"").trim().slice(0,e)}function aS(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim()):!1}function O_(t){return t?/^\+?[\d\s\-()]{6,20}$/.test(t.trim()):!1}function Ox(t){if(!t)throw new Error("company_id is required for multi-tenant operations");return t}function by(t){return t??void 0}const Y5=async t=>{const e=fn(ct(Ie,"professionals"),Xe("company_id","==",t),Xe("status","==","ACTIVE"),go("name","asc"));return(await mn(e)).docs.map(r=>{const s=r.data();return{id:r.id,...s,created_at:s.created_at?.toDate?.()||new Date,updated_at:s.updated_at?.toDate?.()||new Date}})},iS=async t=>{const e=sn(Ie,"professionals",t),n=await Qc(e);if(!n.exists())return null;const r=n.data();return{id:n.id,...r,created_at:r.created_at?.toDate?.()||new Date,updated_at:r.updated_at?.toDate?.()||new Date}},nie=async(t,e)=>{const n=sn(Ie,"professionals",t);await Aa(n,{...e,updated_at:Ke.now()})},rie=async t=>{await eh(sn(Ie,"professionals",t))},sie=async t=>(await As(ct(Ie,"professional_availability"),{...t,created_at:Ke.now()})).id,W5=async t=>{const e=fn(ct(Ie,"professional_availability"),Xe("professional_id","==",t),go("day_of_week","asc"));return(await mn(e)).docs.map(r=>{const s=r.data();return{id:r.id,...s,created_at:s.created_at?.toDate?.()||new Date}})},aie=async t=>{await eh(sn(Ie,"professional_availability",t))},iie=async t=>{const n=(await W5(t)).map(r=>aie(r.id));await Promise.all(n)},G5=async t=>{console.log(" Creating appointment with company_id:",t.company_id);const n={company_id:Ox(t.company_id),service_id:t.service_id,professional_id:t.professional_id,client_name:Ks(t.client_name,120),client_phone:t.client_phone.trim(),appointment_date:Ke.fromDate(t.appointment_date),start_time:t.start_time,end_time:t.end_time,status:t.status,created_at:Ke.now(),updated_at:Ke.now()};return t.client_email&&(n.client_email=t.client_email.trim()),t.client_rut&&(n.client_rut=t.client_rut.trim()),t.notes&&(n.notes=Ks(t.notes,600)),t.created_by_user_id&&(n.created_by_user_id=t.created_by_user_id),(await As(ct(Ie,"appointments"),n)).id},oie=async(t,e)=>G5({...t,created_by_user_id:e,status:t.status||Le.CONFIRMED}),oS=async t=>{const e=sn(Ie,"appointments",t),n=await Qc(e);if(!n.exists())return null;const r=n.data();return{id:n.id,...r,appointment_date:r.appointment_date?.toDate?.()||new Date,created_at:r.created_at?.toDate?.()||new Date,updated_at:r.updated_at?.toDate?.()||new Date}},K5=async t=>{const e=fn(ct(Ie,"appointments"),Xe("company_id","==",t),go("appointment_date","desc"));return(await mn(e)).docs.map(r=>{const s=r.data();return{id:r.id,...s,appointment_date:s.appointment_date?.toDate?.()||new Date,created_at:s.created_at?.toDate?.()||new Date,updated_at:s.updated_at?.toDate?.()||new Date}})},Zw=async t=>{const e=fn(ct(Ie,"appointments"),Xe("company_id","==",t),Xe("status","==",Le.REQUESTED),go("appointment_date","asc"));return(await mn(e)).docs.map(r=>{const s=r.data();return{id:r.id,...s,appointment_date:s.appointment_date?.toDate?.()||new Date,created_at:s.created_at?.toDate?.()||new Date,updated_at:s.updated_at?.toDate?.()||new Date}})},E0=async(t,e)=>{const n=sn(Ie,"appointments",t),r={...e,updated_at:Ke.now()};e.appointment_date&&(r.appointment_date=Ke.fromDate(e.appointment_date)),await Aa(n,r)},Q5=async t=>{const e=await oS(t);if(!e)throw new Error("Cita no encontrada");await E0(t,{status:Le.CANCELLED});try{const[n,r,s]=await Promise.all([Vr(e.company_id),Ym(e.service_id),e.professional_id!=="unassigned"?iS(e.professional_id):Promise.resolve(null)]);if(!n||!r)return;const a=s?.name||"Sin asignar",l=n.whatsapp;e.client_email&&Jae(e,r.name,a,n.name,e.client_email,l).catch(()=>{})}catch{}},X5=async t=>{const e=await oS(t);if(!e)throw new Error("Cita no encontrada");await E0(t,{status:Le.CONFIRMED});try{const[n,r,s]=await Promise.all([Vr(e.company_id),Ym(e.service_id),e.professional_id!=="unassigned"?iS(e.professional_id):Promise.resolve(null)]);if(!n||!r)return;const a=s?.name||"Sin asignar",l=n.whatsapp;e.client_email&&q5(e,r.name,a,n.name,e.client_email,l).catch(()=>{})}catch{}},Z5=(t,e,n,r,s)=>{const a=[Xe("company_id","==",t),Xe("appointment_date",">=",Ke.fromDate(e)),Xe("appointment_date","<=",Ke.fromDate(n))];s?.professionalId&&a.push(Xe("professional_id","==",s.professionalId)),s?.status&&s.status.length>0&&a.push(Xe("status","in",s.status)),a.push(go("appointment_date","asc"));const l=fn(ct(Ie,"appointments"),...a);return vI(l,u=>{const d=u.docs.map(f=>{const m=f.data();return{id:f.id,...m,appointment_date:m.appointment_date?.toDate?.()||new Date,created_at:m.created_at?.toDate?.()||new Date,updated_at:m.updated_at?.toDate?.()||new Date}});r(d)},u=>{throw console.error("Error listening to appointments:",u),u})},lie=async(t,e,n,r,s)=>{const a=new Date(e);a.setHours(0,0,0,0);const l=new Date(e);l.setHours(23,59,59,999);const u=fn(ct(Ie,"appointments"),Xe("professional_id","==",t),Xe("appointment_date",">=",Ke.fromDate(a)),Xe("appointment_date","<=",Ke.fromDate(l)),Xe("status","in",[Le.CONFIRMED,Le.REQUESTED])),d=await mn(u);for(const f of d.docs){const m=f.data();if(n>=m.start_time&&n<m.end_time||r>m.start_time&&r<=m.end_time||n<=m.start_time&&r>=m.end_time)return!1}return!0},cie=async(t,e,n)=>{const r=e.trim().toLowerCase(),s=n?.trim().replace(/[^0-9kK-]/g,"").toUpperCase();let a=[];if(s){const g=fn(ct(Ie,"appointments"),Xe("company_id","==",t),Xe("client_rut","==",s),go("appointment_date","desc"));a=(await mn(g)).docs.map(w=>{const _=w.data();return{id:w.id,..._,appointment_date:_.appointment_date?.toDate?.()||new Date,created_at:_.created_at?.toDate?.()||new Date,updated_at:_.updated_at?.toDate?.()||new Date}})}const l=fn(ct(Ie,"appointments"),Xe("company_id","==",t),go("appointment_date","desc")),d=(await mn(l)).docs.map(g=>{const y=g.data();return{id:g.id,...y,appointment_date:y.appointment_date?.toDate?.()||new Date,created_at:y.created_at?.toDate?.()||new Date,updated_at:y.updated_at?.toDate?.()||new Date}}).filter(g=>{const y=g.client_name?.trim().toLowerCase()||"",w=y===r||y.includes(r)||r.includes(y);if(s&&a.length>0){const _=g.client_rut?.trim().replace(/[^0-9kK-]/g,"").toUpperCase();return w&&_!==s}return w}),f=[...a,...d];return Array.from(new Map(f.map(g=>[g.id,g])).values()).sort((g,y)=>{const w=g.appointment_date.getTime(),_=y.appointment_date.getTime();return w!==_?_-w:g.start_time.localeCompare(y.start_time)})},Ix=async t=>{const e=fn(ct(Ie,"professionals"),Xe("company_id","==",t),Xe("status","==","ACTIVE"),go("name","asc"));return(await mn(e)).docs.map(r=>{const s=r.data();return{id:r.id,company_id:s.company_id,name:s.name,email:s.email,phone:s.phone,avatar_url:s.avatar_url,specialties:s.specialties||[],status:s.status,created_at:s.created_at?.toDate?.()||new Date,updated_at:s.updated_at?.toDate?.()||new Date}})},J5=(t,e)=>{const n=fn(ct(Ie,"professionals"),Xe("company_id","==",t),Xe("status","==","ACTIVE"),go("name","asc"));return vI(n,r=>{const s=r.docs.map(a=>{const l=a.data();return{id:a.id,company_id:l.company_id,name:l.name,email:l.email,phone:l.phone,avatar_url:l.avatar_url,specialties:l.specialties||[],status:l.status,created_at:l.created_at?.toDate?.()||new Date,updated_at:l.updated_at?.toDate?.()||new Date}});e(s)},r=>{throw console.error("Error listening to professionals:",r),r})},e6=async t=>{const e=Ox(t.companyId),n=Ks(t.name,120);if(!n)throw new Error("Professional name is required");if(t.email&&!aS(t.email)){const s=new Error("Invalid email format");throw s.code="invalid-email",s}if(t.phone&&!O_(t.phone)){const s=new Error("Invalid phone format");throw s.code="invalid-phone",s}const r=Ex(Sx,"createProfessional");try{return(await r({...t,companyId:e,name:n,email:by(t.email),phone:by(t.phone),avatar_url:by(t.avatar_url),specialties:t.specialties?.map(a=>Ks(a,80))})).data}catch(s){if(s.code){const a=new Error(s.message||"Failed to create professional");throw a.code=s.code,a}throw s}};function t6(){const t=Ze(),e=async()=>{try{await qee(),t("/")}catch(n){console.error("Error al cerrar sesin:",n),ue.error("No se pudo cerrar sesin")}};return i.jsx("button",{type:"button",onClick:e,className:"fixed top-4 right-4 z-30 px-4 py-2 text-sm font-medium rounded-md border border-gray-200 bg-white hover:bg-gray-50 text-gray-700 shadow",children:"Cerrar sesin"})}function uie(){const{t}=Zc("dashboard"),e=Ze(),{trackClick:n}=eu(),{firestoreUser:r}=an(),[s,a]=x.useState(null),[l,u]=x.useState(!0);x.useEffect(()=>{(async()=>{if(r?.company_id)try{const C=await Vr(r.company_id);a(C?.business_type||null)}catch(C){console.error("Error loading business type:",C)}finally{u(!1)}else u(!1)})()},[r]);const d=()=>{n("quick_action_manual_booking")(),e("/dashboard/appointments/new")},f=()=>{n("quick_action_review_schedule")(),e("/dashboard/schedule")},m=()=>{n("quick_action_notifications")(),e("/dashboard/settings/notifications")},g=()=>{n("quick_action_create_professional")(),e("/dashboard/professionals/new")},w=[{icon:Ire,title:t("quickActions.manualBooking.title"),description:t("quickActions.manualBooking.description"),buttonText:t("quickActions.manualBooking.button"),ariaLabel:t("quickActions.manualBooking.ariaLabel"),onClick:d,colorClass:"bg-blue-600 hover:bg-blue-700",showFor:"SERVICES"},{icon:k5,title:t("quickActions.reviewSchedule.title"),description:t("quickActions.reviewSchedule.description"),buttonText:t("quickActions.reviewSchedule.button"),ariaLabel:t("quickActions.reviewSchedule.ariaLabel"),onClick:f,colorClass:"bg-green-600 hover:bg-green-700",showFor:"SERVICES"},{icon:vy,title:t("quickActions.createProfessional.title"),description:t("quickActions.createProfessional.description"),buttonText:t("quickActions.createProfessional.button"),ariaLabel:t("quickActions.createProfessional.ariaLabel"),onClick:g,colorClass:"bg-orange-600 hover:bg-orange-700",showFor:"SERVICES"},{icon:yre,title:t("quickActions.manageNotifications.title"),description:t("quickActions.manageNotifications.description"),buttonText:t("quickActions.manageNotifications.button"),ariaLabel:t("quickActions.manageNotifications.ariaLabel"),onClick:m,colorClass:"bg-purple-600 hover:bg-purple-700",showFor:"BOTH"}].filter(_=>_.showFor==="BOTH"||_.showFor===s);return l||w.length===0?null:i.jsxs("section",{"aria-labelledby":"quick-actions-title",className:"space-y-4",children:[i.jsx("h2",{id:"quick-actions-title",className:"text-xl font-semibold text-gray-900",children:t("quickActions.title")}),i.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${w.length>2?"lg:grid-cols-3":""} gap-4`,children:w.map((_,C)=>{const S=_.icon;return i.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-3 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${_.colorClass} text-white`,children:i.jsx(S,{className:"w-6 h-6","aria-hidden":"true"})}),i.jsx("h3",{className:"font-semibold text-gray-900",children:_.title})]}),i.jsx("p",{className:"text-sm text-gray-600",children:_.description}),i.jsx("button",{type:"button",onClick:_.onClick,className:`w-full px-4 py-2 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${_.colorClass}`,"aria-label":_.ariaLabel,children:_.buttonText})]},C)})})]})}function die(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState(null),[a,l]=x.useState({totalViews:0,last30DaysViews:0,totalWhatsAppClicks:0,last30DaysWhatsAppClicks:0,totalServiceBookClicks:0,last30DaysServiceBookClicks:0,totalProductOrderClicks:0,last30DaysProductOrderClicks:0,totalRequests:0,last30DaysRequests:0}),[u,d]=x.useState({total:0,topProfessionalName:"",topProfessionalCount:0}),[f,m]=x.useState(!0);x.useEffect(()=>{t?.company_id?g():t&&!t.company_id&&e("/setup/company-basic")},[t]);const g=async()=>{if(t?.company_id)try{const k=await Vr(t.company_id);if(s(k),!k?.setup_completed){e("/setup/company-basic");return}const[R,A,L,F,P]=await Promise.all([_J(t.company_id),vJ(t.company_id),wJ(t.company_id),K5(t.company_id),Ix(t.company_id)]),O=new Date,T=new Date(O.getTime()-720*60*60*1e3),I=R.filter(J=>J.event_type===_s.PAGE_VIEW).length,V=R.filter(J=>J.event_type===_s.PAGE_VIEW&&J.created_at>=T).length,$=R.filter(J=>J.event_type===_s.WHATSAPP_CLICK).length,U=R.filter(J=>J.event_type===_s.WHATSAPP_CLICK&&J.created_at>=T).length,G=R.filter(J=>J.event_type===_s.SERVICE_BOOK_CLICK).length,W=R.filter(J=>J.event_type===_s.SERVICE_BOOK_CLICK&&J.created_at>=T).length,z=R.filter(J=>J.event_type===_s.PRODUCT_ORDER_CLICK).length,q=R.filter(J=>J.event_type===_s.PRODUCT_ORDER_CLICK&&J.created_at>=T).length,K=A.length+L.length,X=[...A.filter(J=>J.created_at>=T),...L.filter(J=>J.created_at>=T)].length,se=F.filter(J=>J.professional_id).reduce((J,ne)=>(ne.professional_id&&(J[ne.professional_id]=(J[ne.professional_id]||0)+1),J),{}),H=Object.entries(se).sort((J,ne)=>ne[1]-J[1])[0]?.[0],Z=P.find(J=>J.id===H)?.name||"",te=H&&se[H]||0;d({total:Object.values(se).reduce((J,ne)=>J+ne,0),topProfessionalName:Z,topProfessionalCount:te}),l({totalViews:I,last30DaysViews:V,totalWhatsAppClicks:$,last30DaysWhatsAppClicks:U,totalServiceBookClicks:G,last30DaysServiceBookClicks:W,totalProductOrderClicks:z,last30DaysProductOrderClicks:q,totalRequests:K,last30DaysRequests:X})}catch(k){n(k)}finally{m(!1)}};if(f)return i.jsx(zn,{fullScreen:!0,size:"lg"});if(!r)return null;const y=`${window.location.origin}/${r.slug}`,w=async()=>{try{await navigator.clipboard.writeText(y),ue.success("URL pblica copiada al portapapeles")}catch{ue.error("No se pudo copiar. Intenta manualmente.")}},_=()=>{const k=encodeURIComponent(`Visita mi negocio! ${y}`);window.open(`https://wa.me/?text=${k}`,"_blank")},C=()=>{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(y)}`,"_blank")},S=()=>{const k=encodeURIComponent(`Visita ${r.name}!`);window.open(`https://x.com/intent/tweet?text=${k}&url=${encodeURIComponent(y)}`,"_blank")},N=()=>{window.open("https://instagram.com/pymerp","_blank")};return i.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:[i.jsx(t6,{}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100 transition-colors","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"})]}),i.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl shadow-lg p-6 mb-8 dark-url-card",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center text-white text-2xl shadow-md",children:""}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Tu Pgina Pblica"}),i.jsxs("p",{className:"text-gray-600 text-sm mb-4 leading-relaxed",children:["Comparte esta URL con tus clientes para que vean tus ",r.business_type==="SERVICES"?"servicios":"productos"," y puedan contactarte fcilmente"]}),i.jsx("div",{className:"bg-white rounded-lg p-4 mb-4 border-2 border-blue-200 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[i.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium break-all flex-1 min-w-0 transition-colors",children:y}),i.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium transition-all flex items-center gap-2 whitespace-nowrap shadow-sm hover:shadow-md",children:" Copiar URL"})]})}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs("button",{type:"button",onClick:_,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow-md","aria-label":"Compartir en WhatsApp",children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Compartir en WhatsApp"]}),i.jsxs("button",{type:"button",onClick:C,className:"px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow-md","aria-label":"Compartir en Facebook",children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Compartir en Facebook"]}),i.jsxs("button",{type:"button",onClick:S,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow-md","aria-label":"Compartir en X",children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Compartir en X"]}),i.jsxs("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow-md","aria-label":"Seguir en Instagram",children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"})}),"Seguir en Instagram"]})]})]})]})}),i.jsx("div",{className:"mb-8",children:i.jsx(uie,{})}),i.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 border border-gray-200",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Configuracin"}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsx("button",{type:"button",onClick:()=>e("/setup/company-basic"),className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 text-sm font-medium text-gray-700 transition-colors",children:" Editar datos bsicos"}),i.jsx(jn,{to:"/dashboard/branding/background",className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 text-sm font-medium transition-colors inline-flex items-center gap-2",children:" Fondo personalizado"}),i.jsx(jn,{to:"/dashboard/branding/video",className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 text-sm font-medium transition-colors inline-flex items-center gap-2",children:" Video promocional"})]})]}),i.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 border border-gray-200",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:r.business_type==="SERVICES"?"Gestin de Servicios":"Gestin de Productos"}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.business_type==="SERVICES"&&i.jsxs(i.Fragment,{children:[i.jsx(jn,{to:"/dashboard/services",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Servicios"}),i.jsx(jn,{to:"/dashboard/services/schedules",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Horarios disponibles"}),i.jsx(jn,{to:"/dashboard/services/settings",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Apariencia"})]}),r.business_type==="PRODUCTS"&&i.jsxs(i.Fragment,{children:[i.jsx(jn,{to:"/dashboard/products",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Productos"}),i.jsx(jn,{to:"/dashboard/products/settings",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Apariencia"})]})]})]}),r.business_type==="SERVICES"&&i.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 border border-gray-200",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Gestin de Profesionales"}),i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsx(jn,{to:"/dashboard/professionals",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-medium transition-colors",children:" Ver Profesionales"}),i.jsx(jn,{to:"/dashboard/professionals/new",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-medium transition-colors",children:" Nuevo Profesional"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsx(yf,{title:"Visitas a la ficha",total:a.totalViews,last30Days:a.last30DaysViews}),r.business_type==="SERVICES"&&i.jsx(hie,{total:u.total,topProfessionalName:u.topProfessionalName,topProfessionalCount:u.topProfessionalCount}),i.jsx(yf,{title:"Clics en WhatsApp",total:a.totalWhatsAppClicks,last30Days:a.last30DaysWhatsAppClicks}),r.business_type==="SERVICES"&&i.jsx(yf,{title:"Clics en Agendar",total:a.totalServiceBookClicks,last30Days:a.last30DaysServiceBookClicks}),r.business_type==="PRODUCTS"&&i.jsx(yf,{title:"Clics en Solicitar",total:a.totalProductOrderClicks,last30Days:a.last30DaysProductOrderClicks}),i.jsx(yf,{title:"Solicitudes registradas",total:a.totalRequests,last30Days:a.last30DaysRequests})]})]})]})}function yf({title:t,total:e,last30Days:n}){return i.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:t}),i.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e}),i.jsxs("div",{className:"text-sm text-gray-600",children:["ltimos 30 das: ",i.jsx("span",{className:"font-semibold text-blue-600",children:n})]})]})}function hie({total:t,topProfessionalName:e,topProfessionalCount:n}){return i.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Servicios agendados - profesional"}),i.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:t}),i.jsx("div",{className:"text-sm text-gray-600",children:e?i.jsxs(i.Fragment,{children:["Top: ",i.jsx("span",{className:"font-semibold text-blue-600",children:e})," (",n,")"]}):"Sin profesionales asignados"})]})}const n6=6048e5,fie=864e5,r6=6e4,s6=36e5,L4=Symbol.for("constructDateFrom");function aa(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&L4 in t?t[L4](e):t instanceof Date?new t.constructor(e):new Date(e)}function Bn(t,e){return aa(e||t,t)}function mie(t,e,n){const r=Bn(t,n?.in);return isNaN(e)?aa(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function pie(t,e,n){const r=Bn(t,n?.in);if(isNaN(e))return aa(t,NaN);if(!e)return r;const s=r.getDate(),a=aa(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const l=a.getDate();return s>=l?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}let gie={};function Qm(){return gie}function Ts(t,e){const n=Qm(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Bn(t,e?.in),a=s.getDay(),l=(a<r?7:0)+a-r;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function C0(t,e){return Ts(t,{...e,weekStartsOn:1})}function a6(t,e){const n=Bn(t,e?.in),r=n.getFullYear(),s=aa(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=C0(s),l=aa(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const u=C0(l);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function O4(t){const e=Bn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function i6(t,...e){const n=aa.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function S0(t,e){const n=Bn(t,e?.in);return n.setHours(0,0,0,0),n}function yie(t,e,n){const[r,s]=i6(n?.in,t,e),a=S0(r),l=S0(s),u=+a-O4(a),d=+l-O4(l);return Math.round((u-d)/fie)}function xie(t,e){const n=a6(t,e),r=aa(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),C0(r)}function I4(t,e,n){const[r,s]=i6(n?.in,t,e);return+S0(r)==+S0(s)}function vie(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function vc(t){return!(!vie(t)&&typeof t!="number"||isNaN(+Bn(t)))}function bie(t,e){const n=Bn(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function wie(t,e){const n=Bn(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function _ie(t,e){const n=Bn(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function fd(t,e){const n=Qm(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Bn(t,e?.in),a=s.getDay(),l=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}const Eie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Cie=(t,e,n)=>{let r;const s=Eie[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Cd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Sie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jie={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tie={date:Cd({formats:Sie,defaultWidth:"full"}),time:Cd({formats:Nie,defaultWidth:"full"}),dateTime:Cd({formats:jie,defaultWidth:"full"})},kie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Die=(t,e,n,r)=>kie[t];function Ja(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=n?.width?String(n.width):l;s=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=n?.width?String(n.width):t.defaultWidth;s=t.values[u]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const Aie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Rie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Pie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Lie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Oie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Iie=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Vie={ordinalNumber:Iie,era:Ja({values:Aie,defaultWidth:"wide"}),quarter:Ja({values:Rie,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ja({values:Pie,defaultWidth:"wide"}),day:Ja({values:Mie,defaultWidth:"wide"}),dayPeriod:Ja({values:Lie,defaultWidth:"wide",formattingValues:Oie,defaultFormattingWidth:"wide"})};function ei(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const l=a[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?Fie(u,g=>g.test(l)):Uie(u,g=>g.test(l));let f;f=t.valueCallback?t.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(l.length);return{value:f,rest:m}}}function Uie(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Fie(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function o6(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(s.length);return{value:l,rest:u}}}const Bie=/^(\d+)(th|st|nd|rd)?/i,zie=/\d+/i,Hie={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$ie={any:[/^b/i,/^(a|c)/i]},qie={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Yie={any:[/1/i,/2/i,/3/i,/4/i]},Wie={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Gie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Kie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Zie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Jie={ordinalNumber:o6({matchPattern:Bie,parsePattern:zie,valueCallback:t=>parseInt(t,10)}),era:ei({matchPatterns:Hie,defaultMatchWidth:"wide",parsePatterns:$ie,defaultParseWidth:"any"}),quarter:ei({matchPatterns:qie,defaultMatchWidth:"wide",parsePatterns:Yie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ei({matchPatterns:Wie,defaultMatchWidth:"wide",parsePatterns:Gie,defaultParseWidth:"any"}),day:ei({matchPatterns:Kie,defaultMatchWidth:"wide",parsePatterns:Qie,defaultParseWidth:"any"}),dayPeriod:ei({matchPatterns:Xie,defaultMatchWidth:"any",parsePatterns:Zie,defaultParseWidth:"any"})},eoe={code:"en-US",formatDistance:Cie,formatLong:Tie,formatRelative:Die,localize:Vie,match:Jie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function toe(t,e){const n=Bn(t,e?.in);return yie(n,_ie(n))+1}function noe(t,e){const n=Bn(t,e?.in),r=+C0(n)-+xie(n);return Math.round(r/n6)+1}function l6(t,e){const n=Bn(t,e?.in),r=n.getFullYear(),s=Qm(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=aa(e?.in||t,0);l.setFullYear(r+1,0,a),l.setHours(0,0,0,0);const u=Ts(l,e),d=aa(e?.in||t,0);d.setFullYear(r,0,a),d.setHours(0,0,0,0);const f=Ts(d,e);return+n>=+u?r+1:+n>=+f?r:r-1}function roe(t,e){const n=Qm(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=l6(t,e),a=aa(e?.in||t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Ts(a,e)}function soe(t,e){const n=Bn(t,e?.in),r=+Ts(n,e)-+roe(n,e);return Math.round(r/n6)+1}function zt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const el={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return zt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):zt(n+1,2)},d(t,e){return zt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return zt(t.getHours()%12||12,e.length)},H(t,e){return zt(t.getHours(),e.length)},m(t,e){return zt(t.getMinutes(),e.length)},s(t,e){return zt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return zt(s,e.length)}},Gu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},V4={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return el.y(t,e)},Y:function(t,e,n,r){const s=l6(t,r),a=s>0?s:1-s;if(e==="YY"){const l=a%100;return zt(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):zt(a,e.length)},R:function(t,e){const n=a6(t);return zt(n,e.length)},u:function(t,e){const n=t.getFullYear();return zt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return zt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return zt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return el.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return zt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=soe(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):zt(s,e.length)},I:function(t,e,n){const r=noe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):zt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):el.d(t,e)},D:function(t,e,n){const r=toe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):zt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return zt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return zt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return zt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Gu.noon:r===0?s=Gu.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Gu.evening:r>=12?s=Gu.afternoon:r>=4?s=Gu.morning:s=Gu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return el.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):el.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):zt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):zt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):el.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):el.s(t,e)},S:function(t,e){return el.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return F4(r);case"XXXX":case"XX":return gc(r);case"XXXXX":case"XXX":default:return gc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return F4(r);case"xxxx":case"xx":return gc(r);case"xxxxx":case"xxx":default:return gc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+U4(r,":");case"OOOO":default:return"GMT"+gc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+U4(r,":");case"zzzz":default:return"GMT"+gc(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return zt(r,e.length)},T:function(t,e,n){return zt(+t,e.length)}};function U4(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+zt(a,2)}function F4(t,e){return t%60===0?(t>0?"-":"+")+zt(Math.abs(t)/60,2):gc(t,e)}function gc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=zt(Math.trunc(r/60),2),a=zt(r%60,2);return n+s+e+a}const B4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},c6=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},aoe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return B4(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",B4(r,e)).replace("{{time}}",c6(s,e))},ioe={p:c6,P:aoe},ooe=/^D+$/,loe=/^Y+$/,coe=["D","DD","YY","YYYY"];function uoe(t){return ooe.test(t)}function doe(t){return loe.test(t)}function hoe(t,e,n){const r=foe(t,e,n);if(console.warn(r),coe.includes(t))throw new RangeError(r)}function foe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const moe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,poe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,goe=/^'([^]*?)'?$/,yoe=/''/g,xoe=/[a-zA-Z]/;function yn(t,e,n){const r=Qm(),s=n?.locale??r.locale??eoe,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,u=Bn(t,n?.in);if(!vc(u))throw new RangeError("Invalid time value");let d=e.match(poe).map(m=>{const g=m[0];if(g==="p"||g==="P"){const y=ioe[g];return y(m,s.formatLong)}return m}).join("").match(moe).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:voe(m)};if(V4[g])return{isToken:!0,value:m};if(g.match(xoe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(d=s.localize.preprocessor(u,d));const f={firstWeekContainsDate:a,weekStartsOn:l,locale:s};return d.map(m=>{if(!m.isToken)return m.value;const g=m.value;(!n?.useAdditionalWeekYearTokens&&doe(g)||!n?.useAdditionalDayOfYearTokens&&uoe(g))&&hoe(g,e,String(t));const y=V4[g[0]];return y(u,g,s.localize,f)}).join("")}function voe(t){const e=t.match(goe);return e?e[1].replace(yoe,"'"):t}function boe(t,e,n){const r=+Bn(t,n?.in),[s,a]=[+Bn(e.start,n?.in),+Bn(e.end,n?.in)].sort((l,u)=>l-u);return r>=s&&r<=a}function Af(t,e){const n=()=>aa(e?.in,NaN),s=Coe(t);let a;if(s.date){const f=Soe(s.date,2);a=Noe(f.restDateString,f.year)}if(!a||isNaN(+a))return n();const l=+a;let u=0,d;if(s.time&&(u=joe(s.time),isNaN(u)))return n();if(s.timezone){if(d=Toe(s.timezone),isNaN(d))return n()}else{const f=new Date(l+u),m=Bn(0,e?.in);return m.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),m.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),m}return Bn(l+u+d,e?.in)}const qg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},woe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,_oe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Eoe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Coe(t){const e={},n=t.split(qg.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],qg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(qg.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=qg.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function Soe(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function Noe(t,e){if(e===null)return new Date(NaN);const n=t.match(woe);if(!n)return new Date(NaN);const r=!!n[4],s=xf(n[1]),a=xf(n[2])-1,l=xf(n[3]),u=xf(n[4]),d=xf(n[5])-1;if(r)return Poe(e,u,d)?koe(e,u,d):new Date(NaN);{const f=new Date(0);return!Aoe(e,a,l)||!Roe(e,s)?new Date(NaN):(f.setUTCFullYear(e,a,Math.max(s,l)),f)}}function xf(t){return t?parseInt(t):1}function joe(t){const e=t.match(_oe);if(!e)return NaN;const n=Jw(e[1]),r=Jw(e[2]),s=Jw(e[3]);return Moe(n,r,s)?n*s6+r*r6+s*1e3:NaN}function Jw(t){return t&&parseFloat(t.replace(",","."))||0}function Toe(t){if(t==="Z")return 0;const e=t.match(Eoe);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return Loe(r,s)?n*(r*s6+s*r6):NaN}function koe(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,a=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}const Doe=[31,null,31,30,31,30,31,31,30,31,30,31];function u6(t){return t%400===0||t%4===0&&t%100!==0}function Aoe(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Doe[e]||(u6(t)?29:28))}function Roe(t,e){return e>=1&&e<=(u6(t)?366:365)}function Poe(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Moe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Loe(t,e){return e>=0&&e<=59}function Ooe(t,e,n){return pie(t,-e,n)}const lS=async(t,e)=>{const n=Ox(e),r=fn(ct(Ie,"notification_settings"),Xe("user_id","==",t),Xe("company_id","==",n));try{const s=await mn(r);if(s.empty)return null;const a=s.docs[0],l=a.data();return{id:a.id,user_id:l.user_id,company_id:l.company_id,email_notifications_enabled:l.email_notifications_enabled??!1,notification_email:l.notification_email,created_at:l.created_at?.toDate?.()||new Date,updated_at:l.updated_at?.toDate?.()||new Date}}catch(s){if(s.code==="permission-denied"||s.code==="unauthenticated")try{const u=(await Ex(Sx,"getNotificationSettingsSafe")({companyId:e,userId:t})).data;return u?{id:u.id,user_id:u.user_id,company_id:u.company_id,email_notifications_enabled:u.email_notifications_enabled??!1,notification_email:u.notification_email||void 0,created_at:u.created_at?.toDate?.()||new Date,updated_at:u.updated_at?.toDate?.()||new Date}:null}catch(a){return console.warn("No se pudo leer notification_settings ni va callable",a),null}throw s}},z4=async(t,e,n,r)=>{const s=Ox(e),a=by(r?.trim());if(a&&!aS(a))throw new Xs("El correo de notificacin no es vlido.",Gs.VALIDATION);try{const l=await lS(t,s);if(l){const u=sn(Ie,"notification_settings",l.id);await Aa(u,{email_notifications_enabled:n,notification_email:a||l.notification_email,updated_at:Ke.now()})}else await As(ct(Ie,"notification_settings"),{user_id:t,company_id:s,email_notifications_enabled:n,notification_email:a,created_at:Ke.now(),updated_at:Ke.now()})}catch(l){if(l.code==="permission-denied"||l.code==="unauthenticated")try{await Ex(Sx,"setNotificationSettingsSafe")({companyId:s,enabled:n,notificationEmail:a});return}catch(u){throw new Xs("No tienes permisos para editar las notificaciones de la empresa. Solicita al dueo de la URL que las active.",Gs.AUTHORIZATION,{original:l?.code,callableError:u?.code})}throw l}};async function d6(t){if(t.service_name||t.service||t.serviceName)return t.service_name||t.service||t.serviceName;try{const e=await Ym(t.service_id);return e?e.name:"Servicio no encontrado"}catch(e){return console.error("Error cargando servicio:",e),t.service_id}}function h6(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=h6(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function kr(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=h6(t))&&(r&&(r+=" "),r+=e);return r}function Ae(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function $t(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Ca(t,e){const n=Ae(t);return isNaN(e)?$t(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function ja(t,e){const n=Ae(t);if(isNaN(e))return $t(t,NaN);if(!e)return n;const r=n.getDate(),s=$t(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const a=s.getDate();return r>=a?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}function cS(t,e){const n=+Ae(t);return $t(t,n+e)}const f6=6048e5,Ioe=864e5,Vx=6e4,Ux=36e5,Voe=1e3;function Uoe(t,e){return cS(t,e*Ux)}let Foe={};function nu(){return Foe}function yo(t,e){const n=nu(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Ae(t),a=s.getDay(),l=(a<r?7:0)+a-r;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}function Id(t){return yo(t,{weekStartsOn:1})}function m6(t){const e=Ae(t),n=e.getFullYear(),r=$t(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Id(r),a=$t(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const l=Id(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=l.getTime()?n:n-1}function Hc(t){const e=Ae(t);return e.setHours(0,0,0,0),e}function N0(t){const e=Ae(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Vd(t,e){const n=Hc(t),r=Hc(e),s=+n-N0(n),a=+r-N0(r);return Math.round((s-a)/Ioe)}function Boe(t){const e=m6(t),n=$t(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Id(n)}function I_(t,e){return cS(t,e*Vx)}function uS(t,e){const n=e*3;return ja(t,n)}function zoe(t,e){return cS(t,e*1e3)}function j0(t,e){const n=e*7;return Ca(t,n)}function to(t,e){return ja(t,e*12)}function H4(t){let e;return t.forEach(function(n){const r=Ae(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function $4(t){let e;return t.forEach(n=>{const r=Ae(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Hoe(t,e){const n=Hc(t),r=Hc(e);return+n==+r}function no(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function T0(t){if(!no(t)&&typeof t!="number")return!1;const e=Ae(t);return!isNaN(Number(e))}function k0(t,e){const n=Ae(t),r=Ae(e),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function Dc(t){const e=Ae(t);return Math.trunc(e.getMonth()/3)+1}function D0(t,e){const n=Ae(t),r=Ae(e),s=n.getFullYear()-r.getFullYear(),a=Dc(n)-Dc(r);return s*4+a}function A0(t,e){const n=Ae(t),r=Ae(e);return n.getFullYear()-r.getFullYear()}function $oe(t,e){const n=Ae(t),r=Ae(e),s=q4(n,r),a=Math.abs(Vd(n,r));n.setDate(n.getDate()-s*a);const l=+(q4(n,r)===-s),u=s*(a-l);return u===0?0:u}function q4(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function p6(t){const e=Ae(t);return e.setHours(23,59,59,999),e}function g6(t){const e=Ae(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function V_(t){const e=Ae(t),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function y6(t){const e=Ae(t);return e.setDate(1),e.setHours(0,0,0,0),e}function x6(t){const e=Ae(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function Fx(t){const e=Ae(t),n=$t(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function qoe(t,e){const n=nu(),r=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Ae(t),a=s.getDay(),l=(a<r?-7:0)+6-(a-r);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}const Yoe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Woe=(t,e,n)=>{let r;const s=Yoe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function e1(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Goe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Koe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Qoe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xoe={date:e1({formats:Goe,defaultWidth:"full"}),time:e1({formats:Koe,defaultWidth:"full"}),dateTime:e1({formats:Qoe,defaultWidth:"full"})},Zoe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Joe=(t,e,n,r)=>Zoe[t];function vf(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=n?.width?String(n.width):l;s=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=n?.width?String(n.width):t.defaultWidth;s=t.values[u]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const ele={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tle={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nle={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rle={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},sle={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ale={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ile=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ole={ordinalNumber:ile,era:vf({values:ele,defaultWidth:"wide"}),quarter:vf({values:tle,defaultWidth:"wide",argumentCallback:t=>t-1}),month:vf({values:nle,defaultWidth:"wide"}),day:vf({values:rle,defaultWidth:"wide"}),dayPeriod:vf({values:sle,defaultWidth:"wide",formattingValues:ale,defaultFormattingWidth:"wide"})};function bf(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const l=a[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?cle(u,g=>g.test(l)):lle(u,g=>g.test(l));let f;f=t.valueCallback?t.valueCallback(d):d,f=n.valueCallback?n.valueCallback(f):f;const m=e.slice(l.length);return{value:f,rest:m}}}function lle(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function cle(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function ule(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(s.length);return{value:l,rest:u}}}const dle=/^(\d+)(th|st|nd|rd)?/i,hle=/\d+/i,fle={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mle={any:[/^b/i,/^(a|c)/i]},ple={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gle={any:[/1/i,/2/i,/3/i,/4/i]},yle={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xle={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vle={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ble={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wle={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_le={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ele={ordinalNumber:ule({matchPattern:dle,parsePattern:hle,valueCallback:t=>parseInt(t,10)}),era:bf({matchPatterns:fle,defaultMatchWidth:"wide",parsePatterns:mle,defaultParseWidth:"any"}),quarter:bf({matchPatterns:ple,defaultMatchWidth:"wide",parsePatterns:gle,defaultParseWidth:"any",valueCallback:t=>t+1}),month:bf({matchPatterns:yle,defaultMatchWidth:"wide",parsePatterns:xle,defaultParseWidth:"any"}),day:bf({matchPatterns:vle,defaultMatchWidth:"wide",parsePatterns:ble,defaultParseWidth:"any"}),dayPeriod:bf({matchPatterns:wle,defaultMatchWidth:"any",parsePatterns:_le,defaultParseWidth:"any"})},v6={code:"en-US",formatDistance:Woe,formatLong:Xoe,formatRelative:Joe,localize:ole,match:Ele,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Cle(t){const e=Ae(t);return Vd(e,Fx(e))+1}function dS(t){const e=Ae(t),n=+Id(e)-+Boe(e);return Math.round(n/f6)+1}function hS(t,e){const n=Ae(t),r=n.getFullYear(),s=nu(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=$t(t,0);l.setFullYear(r+1,0,a),l.setHours(0,0,0,0);const u=yo(l,e),d=$t(t,0);d.setFullYear(r,0,a),d.setHours(0,0,0,0);const f=yo(d,e);return n.getTime()>=u.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function Sle(t,e){const n=nu(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=hS(t,e),a=$t(t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),yo(a,e)}function b6(t,e){const n=Ae(t),r=+yo(n,e)-+Sle(n,e);return Math.round(r/f6)+1}function Ht(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const tl={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ht(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ht(n+1,2)},d(t,e){return Ht(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ht(t.getHours()%12||12,e.length)},H(t,e){return Ht(t.getHours(),e.length)},m(t,e){return Ht(t.getMinutes(),e.length)},s(t,e){return Ht(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Ht(s,e.length)}},Ku={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Y4={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return tl.y(t,e)},Y:function(t,e,n,r){const s=hS(t,r),a=s>0?s:1-s;if(e==="YY"){const l=a%100;return Ht(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ht(a,e.length)},R:function(t,e){const n=m6(t);return Ht(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ht(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ht(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ht(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return tl.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ht(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=b6(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):Ht(s,e.length)},I:function(t,e,n){const r=dS(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ht(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):tl.d(t,e)},D:function(t,e,n){const r=Cle(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ht(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ht(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ht(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ht(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ku.noon:r===0?s=Ku.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ku.evening:r>=12?s=Ku.afternoon:r>=4?s=Ku.morning:s=Ku.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return tl.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):tl.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ht(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ht(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):tl.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):tl.s(t,e)},S:function(t,e){return tl.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return G4(r);case"XXXX":case"XX":return yc(r);case"XXXXX":case"XXX":default:return yc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return G4(r);case"xxxx":case"xx":return yc(r);case"xxxxx":case"xxx":default:return yc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+W4(r,":");case"OOOO":default:return"GMT"+yc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+W4(r,":");case"zzzz":default:return"GMT"+yc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Ht(r,e.length)},T:function(t,e,n){const r=t.getTime();return Ht(r,e.length)}};function W4(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+Ht(a,2)}function G4(t,e){return t%60===0?(t>0?"-":"+")+Ht(Math.abs(t)/60,2):yc(t,e)}function yc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Ht(Math.trunc(r/60),2),a=Ht(r%60,2);return n+s+e+a}const K4=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},w6=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Nle=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return K4(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",K4(r,e)).replace("{{time}}",w6(s,e))},R0={p:w6,P:Nle},jle=/^D+$/,Tle=/^Y+$/,kle=["D","DD","YY","YYYY"];function _6(t){return jle.test(t)}function E6(t){return Tle.test(t)}function U_(t,e,n){const r=Dle(t,e,n);if(console.warn(r),kle.includes(t))throw new RangeError(r)}function Dle(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ale=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rle=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ple=/^'([^]*?)'?$/,Mle=/''/g,Lle=/[a-zA-Z]/;function Q4(t,e,n){const r=nu(),s=n?.locale??r.locale??v6,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,u=Ae(t);if(!T0(u))throw new RangeError("Invalid time value");let d=e.match(Rle).map(m=>{const g=m[0];if(g==="p"||g==="P"){const y=R0[g];return y(m,s.formatLong)}return m}).join("").match(Ale).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const g=m[0];if(g==="'")return{isToken:!1,value:Ole(m)};if(Y4[g])return{isToken:!0,value:m};if(g.match(Lle))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:m}});s.localize.preprocessor&&(d=s.localize.preprocessor(u,d));const f={firstWeekContainsDate:a,weekStartsOn:l,locale:s};return d.map(m=>{if(!m.isToken)return m.value;const g=m.value;(!n?.useAdditionalWeekYearTokens&&E6(g)||!n?.useAdditionalDayOfYearTokens&&_6(g))&&U_(g,e,String(t));const y=Y4[g[0]];return y(u,g,s.localize,f)}).join("")}function Ole(t){const e=t.match(Ple);return e?e[1].replace(Mle,"'"):t}function X4(t){return Ae(t).getDate()}function Ile(t){return Ae(t).getDay()}function Vle(t){const e=Ae(t),n=e.getFullYear(),r=e.getMonth(),s=$t(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Ule(){return Object.assign({},nu())}function gi(t){return Ae(t).getHours()}function Fle(t){let n=Ae(t).getDay();return n===0&&(n=7),n}function yi(t){return Ae(t).getMinutes()}function $r(t){return Ae(t).getMonth()}function ro(t){return Ae(t).getSeconds()}function F_(t){return Ae(t).getTime()}function dt(t){return Ae(t).getFullYear()}function Pl(t,e){const n=Ae(t),r=Ae(e);return n.getTime()>r.getTime()}function $c(t,e){const n=Ae(t),r=Ae(e);return+n<+r}function Ble(t,e){const n=Ae(t),r=Ae(e);return+n==+r}function zle(t,e){const n=e instanceof Date?$t(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const Hle=10;class C6{subPriority=0;validate(e,n){return!0}}class $le extends C6{constructor(e,n,r,s,a){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=s,a&&(this.subPriority=a)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class qle extends C6{priority=Hle;subPriority=-1;set(e,n){return n.timestampIsSet?e:$t(e,zle(e,Date))}}class Ot{run(e,n,r,s){const a=this.parse(e,n,r,s);return a?{setter:new $le(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,n,r){return!0}}class Yle extends Ot{priority=140;parse(e,n,r){switch(n){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,n,r){return n.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Vn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ti={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Un(t,e){return t&&{value:e(t.value),rest:t.rest}}function bn(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function ni(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,l=n[5]?parseInt(n[5],10):0;return{value:r*(s*Ux+a*Vx+l*Voe),rest:e.slice(n[0].length)}}function S6(t){return bn(Vn.anyDigitsSigned,t)}function Dn(t,e){switch(t){case 1:return bn(Vn.singleDigit,e);case 2:return bn(Vn.twoDigits,e);case 3:return bn(Vn.threeDigits,e);case 4:return bn(Vn.fourDigits,e);default:return bn(new RegExp("^\\d{1,"+t+"}"),e)}}function P0(t,e){switch(t){case 1:return bn(Vn.singleDigitSigned,e);case 2:return bn(Vn.twoDigitsSigned,e);case 3:return bn(Vn.threeDigitsSigned,e);case 4:return bn(Vn.fourDigitsSigned,e);default:return bn(new RegExp("^-?\\d{1,"+t+"}"),e)}}function fS(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function N6(t,e){const n=e>0,r=n?e:1-e;let s;if(r<=50)s=t||100;else{const a=r+50,l=Math.trunc(a/100)*100,u=t>=a%100;s=t+l-(u?100:0)}return n?s:1-s}function j6(t){return t%400===0||t%4===0&&t%100!==0}class Wle extends Ot{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,r){const s=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return Un(Dn(4,e),s);case"yo":return Un(r.ordinalNumber(e,{unit:"year"}),s);default:return Un(Dn(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r){const s=e.getFullYear();if(r.isTwoDigitYear){const l=N6(r.year,s);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const a=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}}class Gle extends Ot{priority=130;parse(e,n,r){const s=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Un(Dn(4,e),s);case"Yo":return Un(r.ordinalNumber(e,{unit:"year"}),s);default:return Un(Dn(n.length,e),s)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,r,s){const a=hS(e,s);if(r.isTwoDigitYear){const u=N6(r.year,a);return e.setFullYear(u,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),yo(e,s)}const l=!("era"in n)||n.era===1?r.year:1-r.year;return e.setFullYear(l,0,s.firstWeekContainsDate),e.setHours(0,0,0,0),yo(e,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Kle extends Ot{priority=130;parse(e,n){return P0(n==="R"?4:n.length,e)}set(e,n,r){const s=$t(e,0);return s.setFullYear(r,0,4),s.setHours(0,0,0,0),Id(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Qle extends Ot{priority=130;parse(e,n){return P0(n==="u"?4:n.length,e)}set(e,n,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Xle extends Ot{priority=120;parse(e,n,r){switch(n){case"Q":case"QQ":return Dn(n.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Zle extends Ot{priority=120;parse(e,n,r){switch(n){case"q":case"qq":return Dn(n.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Jle extends Ot{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,r){const s=a=>a-1;switch(n){case"M":return Un(bn(Vn.month,e),s);case"MM":return Un(Dn(2,e),s);case"Mo":return Un(r.ordinalNumber(e,{unit:"month"}),s);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class ece extends Ot{priority=110;parse(e,n,r){const s=a=>a-1;switch(n){case"L":return Un(bn(Vn.month,e),s);case"LL":return Un(Dn(2,e),s);case"Lo":return Un(r.ordinalNumber(e,{unit:"month"}),s);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function tce(t,e,n){const r=Ae(t),s=b6(r,n)-e;return r.setDate(r.getDate()-s*7),r}class nce extends Ot{priority=100;parse(e,n,r){switch(n){case"w":return bn(Vn.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Dn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r,s){return yo(tce(e,r,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function rce(t,e){const n=Ae(t),r=dS(n)-e;return n.setDate(n.getDate()-r*7),n}class sce extends Ot{priority=100;parse(e,n,r){switch(n){case"I":return bn(Vn.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Dn(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,r){return Id(rce(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const ace=[31,28,31,30,31,30,31,31,30,31,30,31],ice=[31,29,31,30,31,30,31,31,30,31,30,31];class oce extends Ot{priority=90;subPriority=1;parse(e,n,r){switch(n){case"d":return bn(Vn.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Dn(n.length,e)}}validate(e,n){const r=e.getFullYear(),s=j6(r),a=e.getMonth();return s?n>=1&&n<=ice[a]:n>=1&&n<=ace[a]}set(e,n,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class lce extends Ot{priority=90;subpriority=1;parse(e,n,r){switch(n){case"D":case"DD":return bn(Vn.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Dn(n.length,e)}}validate(e,n){const r=e.getFullYear();return j6(r)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function mS(t,e,n){const r=nu(),s=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Ae(t),l=a.getDay(),d=(e%7+7)%7,f=7-s,m=e<0||e>6?e-(l+f)%7:(d+f)%7-(l+f)%7;return Ca(a,m)}class cce extends Ot{priority=90;parse(e,n,r){switch(n){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=mS(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class uce extends Ot{priority=90;parse(e,n,r,s){const a=l=>{const u=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+u};switch(n){case"e":case"ee":return Un(Dn(n.length,e),a);case"eo":return Un(r.ordinalNumber(e,{unit:"day"}),a);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=mS(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class dce extends Ot{priority=90;parse(e,n,r,s){const a=l=>{const u=Math.floor((l-1)/7)*7;return(l+s.weekStartsOn+6)%7+u};switch(n){case"c":case"cc":return Un(Dn(n.length,e),a);case"co":return Un(r.ordinalNumber(e,{unit:"day"}),a);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,r,s){return e=mS(e,r,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function hce(t,e){const n=Ae(t),r=Fle(n),s=e-r;return Ca(n,s)}class fce extends Ot{priority=90;parse(e,n,r){const s=a=>a===0?7:a;switch(n){case"i":case"ii":return Dn(n.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Un(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiii":return Un(r.day(e,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Un(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Un(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),s)}}validate(e,n){return n>=1&&n<=7}set(e,n,r){return e=hce(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class mce extends Ot{priority=80;parse(e,n,r){switch(n){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(fS(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class pce extends Ot{priority=80;parse(e,n,r){switch(n){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(fS(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class gce extends Ot{priority=80;parse(e,n,r){switch(n){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,r){return e.setHours(fS(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class yce extends Ot{priority=70;parse(e,n,r){switch(n){case"h":return bn(Vn.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Dn(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,r){const s=e.getHours()>=12;return s&&r<12?e.setHours(r+12,0,0,0):!s&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class xce extends Ot{priority=70;parse(e,n,r){switch(n){case"H":return bn(Vn.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Dn(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class vce extends Ot{priority=70;parse(e,n,r){switch(n){case"K":return bn(Vn.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Dn(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class bce extends Ot{priority=70;parse(e,n,r){switch(n){case"k":return bn(Vn.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Dn(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,r){const s=r<=24?r%24:r;return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class wce extends Ot{priority=60;parse(e,n,r){switch(n){case"m":return bn(Vn.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Dn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class _ce extends Ot{priority=50;parse(e,n,r){switch(n){case"s":return bn(Vn.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Dn(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class Ece extends Ot{priority=30;parse(e,n){const r=s=>Math.trunc(s*Math.pow(10,-n.length+3));return Un(Dn(n.length,e),r)}set(e,n,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class Cce extends Ot{priority=10;parse(e,n){switch(n){case"X":return ni(ti.basicOptionalMinutes,e);case"XX":return ni(ti.basic,e);case"XXXX":return ni(ti.basicOptionalSeconds,e);case"XXXXX":return ni(ti.extendedOptionalSeconds,e);case"XXX":default:return ni(ti.extended,e)}}set(e,n,r){return n.timestampIsSet?e:$t(e,e.getTime()-N0(e)-r)}incompatibleTokens=["t","T","x"]}class Sce extends Ot{priority=10;parse(e,n){switch(n){case"x":return ni(ti.basicOptionalMinutes,e);case"xx":return ni(ti.basic,e);case"xxxx":return ni(ti.basicOptionalSeconds,e);case"xxxxx":return ni(ti.extendedOptionalSeconds,e);case"xxx":default:return ni(ti.extended,e)}}set(e,n,r){return n.timestampIsSet?e:$t(e,e.getTime()-N0(e)-r)}incompatibleTokens=["t","T","X"]}class Nce extends Ot{priority=40;parse(e){return S6(e)}set(e,n,r){return[$t(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class jce extends Ot{priority=20;parse(e){return S6(e)}set(e,n,r){return[$t(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const Tce={G:new Yle,y:new Wle,Y:new Gle,R:new Kle,u:new Qle,Q:new Xle,q:new Zle,M:new Jle,L:new ece,w:new nce,I:new sce,d:new oce,D:new lce,E:new cce,e:new uce,c:new dce,i:new fce,a:new mce,b:new pce,B:new gce,h:new yce,H:new xce,K:new vce,k:new bce,m:new wce,s:new _ce,S:new Ece,X:new Cce,x:new Sce,t:new Nce,T:new jce},kce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dce=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ace=/^'([^]*?)'?$/,Rce=/''/g,Pce=/\S/,Mce=/[a-zA-Z]/;function t1(t,e,n,r){const s=Ule(),a=r?.locale??s.locale??v6,l=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,u=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0;if(e==="")return t===""?Ae(n):$t(n,NaN);const d={firstWeekContainsDate:l,weekStartsOn:u,locale:a},f=[new qle],m=e.match(Dce).map(C=>{const S=C[0];if(S in R0){const N=R0[S];return N(C,a.formatLong)}return C}).join("").match(kce),g=[];for(let C of m){!r?.useAdditionalWeekYearTokens&&E6(C)&&U_(C,e,t),!r?.useAdditionalDayOfYearTokens&&_6(C)&&U_(C,e,t);const S=C[0],N=Tce[S];if(N){const{incompatibleTokens:k}=N;if(Array.isArray(k)){const A=g.find(L=>k.includes(L.token)||L.token===S);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${C}\` at the same time`)}else if(N.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);g.push({token:S,fullToken:C});const R=N.run(t,C,a.match,d);if(!R)return $t(n,NaN);f.push(R.setter),t=R.rest}else{if(S.match(Mce))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");if(C==="''"?C="'":S==="'"&&(C=Lce(C)),t.indexOf(C)===0)t=t.slice(C.length);else return $t(n,NaN)}}if(t.length>0&&Pce.test(t))return $t(n,NaN);const y=f.map(C=>C.priority).sort((C,S)=>S-C).filter((C,S,N)=>N.indexOf(C)===S).map(C=>f.filter(S=>S.priority===C).sort((S,N)=>N.subPriority-S.subPriority)).map(C=>C[0]);let w=Ae(n);if(isNaN(w.getTime()))return $t(n,NaN);const _={};for(const C of y){if(!C.validate(w,d))return $t(n,NaN);const S=C.set(w,_,d);Array.isArray(S)?(w=S[0],Object.assign(_,S[1])):w=S}return $t(n,w)}function Lce(t){return t.match(Ace)[1].replace(Rce,"'")}function Oce(t,e){const n=Ae(t),r=Ae(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Ice(t,e){const n=V_(t),r=V_(e);return+n==+r}function Vce(t,e){const n=Ae(t),r=Ae(e);return n.getFullYear()===r.getFullYear()}function Em(t,e){const n=+Ae(t),[r,s]=[+Ae(e.start),+Ae(e.end)].sort((a,l)=>a-l);return n>=r&&n<=s}function Uce(t,e){return Ca(t,-1)}function Fce(t,e){const r=$ce(t);let s;if(r.date){const d=qce(r.date,2);s=Yce(d.restDateString,d.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const a=s.getTime();let l=0,u;if(r.time&&(l=Wce(r.time),isNaN(l)))return new Date(NaN);if(r.timezone){if(u=Gce(r.timezone),isNaN(u))return new Date(NaN)}else{const d=new Date(a+l),f=new Date(0);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return new Date(a+l+u)}const Yg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Bce=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,zce=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Hce=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $ce(t){const e={},n=t.split(Yg.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Yg.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Yg.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const s=Yg.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function qce(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function Yce(t,e){if(e===null)return new Date(NaN);const n=t.match(Bce);if(!n)return new Date(NaN);const r=!!n[4],s=wf(n[1]),a=wf(n[2])-1,l=wf(n[3]),u=wf(n[4]),d=wf(n[5])-1;if(r)return Jce(e,u,d)?Kce(e,u,d):new Date(NaN);{const f=new Date(0);return!Xce(e,a,l)||!Zce(e,s)?new Date(NaN):(f.setUTCFullYear(e,a,Math.max(s,l)),f)}}function wf(t){return t?parseInt(t):1}function Wce(t){const e=t.match(zce);if(!e)return NaN;const n=n1(e[1]),r=n1(e[2]),s=n1(e[3]);return eue(n,r,s)?n*Ux+r*Vx+s*1e3:NaN}function n1(t){return t&&parseFloat(t.replace(",","."))||0}function Gce(t){if(t==="Z")return 0;const e=t.match(Hce);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return tue(r,s)?n*(r*Ux+s*Vx):NaN}function Kce(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const s=r.getUTCDay()||7,a=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}const Qce=[31,null,31,30,31,30,31,31,30,31,30,31];function T6(t){return t%400===0||t%4===0&&t%100!==0}function Xce(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Qce[e]||(T6(t)?29:28))}function Zce(t,e){return e>=1&&e<=(T6(t)?366:365)}function Jce(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function eue(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function tue(t,e){return e>=0&&e<=59}function Es(t,e){const n=Ae(t),r=n.getFullYear(),s=n.getDate(),a=$t(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const l=Vle(a);return n.setMonth(e,Math.min(s,l)),n}function nue(t,e){let n=Ae(t);return isNaN(+n)?$t(t,NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=Es(n,e.month)),e.date!=null&&n.setDate(e.date),e.hours!=null&&n.setHours(e.hours),e.minutes!=null&&n.setMinutes(e.minutes),e.seconds!=null&&n.setSeconds(e.seconds),e.milliseconds!=null&&n.setMilliseconds(e.milliseconds),n)}function wy(t,e){const n=Ae(t);return n.setHours(e),n}function _y(t,e){const n=Ae(t);return n.setMinutes(e),n}function rd(t,e){const n=Ae(t),r=Math.trunc(n.getMonth()/3)+1,s=e-r;return Es(n,n.getMonth()+s*3)}function Ey(t,e){const n=Ae(t);return n.setSeconds(e),n}function Xa(t,e){const n=Ae(t);return isNaN(+n)?$t(t,NaN):(n.setFullYear(e),n)}function Ac(t,e){return ja(t,-e)}function k6(t,e){return uS(t,-1)}function Z4(t,e){return j0(t,-1)}function Ud(t,e){return to(t,-e)}function Bx(){return typeof window<"u"}function sh(t){return D6(t)?(t.nodeName||"").toLowerCase():"#document"}function Ds(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Si(t){var e;return(e=(D6(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function D6(t){return Bx()?t instanceof Node||t instanceof Ds(t).Node:!1}function qr(t){return Bx()?t instanceof Element||t instanceof Ds(t).Element:!1}function _i(t){return Bx()?t instanceof HTMLElement||t instanceof Ds(t).HTMLElement:!1}function J4(t){return!Bx()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ds(t).ShadowRoot}const rue=new Set(["inline","contents"]);function Xm(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ia(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!rue.has(s)}const sue=new Set(["table","td","th"]);function aue(t){return sue.has(sh(t))}const iue=[":popover-open",":modal"];function zx(t){return iue.some(e=>{try{return t.matches(e)}catch{return!1}})}const oue=["transform","translate","scale","rotate","perspective"],lue=["transform","translate","scale","rotate","perspective","filter"],cue=["paint","layout","strict","content"];function pS(t){const e=gS(),n=qr(t)?ia(t):t;return oue.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||lue.some(r=>(n.willChange||"").includes(r))||cue.some(r=>(n.contain||"").includes(r))}function uue(t){let e=Ml(t);for(;_i(e)&&!Fd(e);){if(pS(e))return e;if(zx(e))return null;e=Ml(e)}return null}function gS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const due=new Set(["html","body","#document"]);function Fd(t){return due.has(sh(t))}function ia(t){return Ds(t).getComputedStyle(t)}function Hx(t){return qr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ml(t){if(sh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||J4(t)&&t.host||Si(t);return J4(e)?e.host:e}function A6(t){const e=Ml(t);return Fd(e)?t.ownerDocument?t.ownerDocument.body:t.body:_i(e)&&Xm(e)?e:A6(e)}function Cm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=A6(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),l=Ds(s);if(a){const u=B_(l);return e.concat(l,l.visualViewport||[],Xm(s)?s:[],u&&n?Cm(u):[])}return e.concat(s,Cm(s,[],n))}function B_(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const Bd=Math.min,Rc=Math.max,M0=Math.round,Wg=Math.floor,xi=t=>({x:t,y:t}),hue={left:"right",right:"left",bottom:"top",top:"bottom"},fue={start:"end",end:"start"};function mue(t,e,n){return Rc(t,Bd(e,n))}function $x(t,e){return typeof t=="function"?t(e):t}function zd(t){return t.split("-")[0]}function Zm(t){return t.split("-")[1]}function pue(t){return t==="x"?"y":"x"}function yS(t){return t==="y"?"height":"width"}const gue=new Set(["top","bottom"]);function Ec(t){return gue.has(zd(t))?"y":"x"}function xS(t){return pue(Ec(t))}function yue(t,e,n){n===void 0&&(n=!1);const r=Zm(t),s=xS(t),a=yS(s);let l=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=L0(l)),[l,L0(l)]}function xue(t){const e=L0(t);return[z_(t),e,z_(e)]}function z_(t){return t.replace(/start|end/g,e=>fue[e])}const eP=["left","right"],tP=["right","left"],vue=["top","bottom"],bue=["bottom","top"];function wue(t,e,n){switch(t){case"top":case"bottom":return n?e?tP:eP:e?eP:tP;case"left":case"right":return e?vue:bue;default:return[]}}function _ue(t,e,n,r){const s=Zm(t);let a=wue(zd(t),n==="start",r);return s&&(a=a.map(l=>l+"-"+s),e&&(a=a.concat(a.map(z_)))),a}function L0(t){return t.replace(/left|right|bottom|top/g,e=>hue[e])}function Eue(t){return{top:0,right:0,bottom:0,left:0,...t}}function R6(t){return typeof t!="number"?Eue(t):{top:t,right:t,bottom:t,left:t}}function O0(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}var Cue=typeof document<"u",Sue=function(){},I0=Cue?x.useLayoutEffect:Sue;const Nue={...q_},jue=Nue.useInsertionEffect,Tue=jue||(t=>t());function kue(t){const e=x.useRef(()=>{});return Tue(()=>{e.current=t}),x.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function nP(t,e,n){let{reference:r,floating:s}=t;const a=Ec(e),l=xS(e),u=yS(l),d=zd(e),f=a==="y",m=r.x+r.width/2-s.width/2,g=r.y+r.height/2-s.height/2,y=r[u]/2-s[u]/2;let w;switch(d){case"top":w={x:m,y:r.y-s.height};break;case"bottom":w={x:m,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:g};break;case"left":w={x:r.x-s.width,y:g};break;default:w={x:r.x,y:r.y}}switch(Zm(e)){case"start":w[l]-=y*(n&&f?-1:1);break;case"end":w[l]+=y*(n&&f?-1:1);break}return w}const Due=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:l}=n,u=a.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let f=await l.getElementRects({reference:t,floating:e,strategy:s}),{x:m,y:g}=nP(f,r,d),y=r,w={},_=0;for(let C=0;C<u.length;C++){const{name:S,fn:N}=u[C],{x:k,y:R,data:A,reset:L}=await N({x:m,y:g,initialPlacement:r,placement:y,strategy:s,middlewareData:w,rects:f,platform:l,elements:{reference:t,floating:e}});m=k??m,g=R??g,w={...w,[S]:{...w[S],...A}},L&&_<=50&&(_++,typeof L=="object"&&(L.placement&&(y=L.placement),L.rects&&(f=L.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:s}):L.rects),{x:m,y:g}=nP(f,y,d)),C=-1)}return{x:m,y:g,placement:y,strategy:s,middlewareData:w}};async function Aue(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:l,elements:u,strategy:d}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:y=!1,padding:w=0}=$x(e,t),_=R6(w),S=u[y?g==="floating"?"reference":"floating":g],N=O0(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(S)))==null||n?S:S.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:f,rootBoundary:m,strategy:d})),k=g==="floating"?{x:r,y:s,width:l.floating.width,height:l.floating.height}:l.reference,R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),A=await(a.isElement==null?void 0:a.isElement(R))?await(a.getScale==null?void 0:a.getScale(R))||{x:1,y:1}:{x:1,y:1},L=O0(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:k,offsetParent:R,strategy:d}):k);return{top:(N.top-L.top+_.top)/A.y,bottom:(L.bottom-N.bottom+_.bottom)/A.y,left:(N.left-L.left+_.left)/A.x,right:(L.right-N.right+_.right)/A.x}}const Rue=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:l,elements:u,middlewareData:d}=e,{element:f,padding:m=0}=$x(t,e)||{};if(f==null)return{};const g=R6(m),y={x:n,y:r},w=xS(s),_=yS(w),C=await l.getDimensions(f),S=w==="y",N=S?"top":"left",k=S?"bottom":"right",R=S?"clientHeight":"clientWidth",A=a.reference[_]+a.reference[w]-y[w]-a.floating[_],L=y[w]-a.reference[w],F=await(l.getOffsetParent==null?void 0:l.getOffsetParent(f));let P=F?F[R]:0;(!P||!await(l.isElement==null?void 0:l.isElement(F)))&&(P=u.floating[R]||a.floating[_]);const O=A/2-L/2,T=P/2-C[_]/2-1,I=Bd(g[N],T),V=Bd(g[k],T),$=I,U=P-C[_]-V,G=P/2-C[_]/2+O,W=mue($,G,U),z=!d.arrow&&Zm(s)!=null&&G!==W&&a.reference[_]/2-(G<$?I:V)-C[_]/2<0,q=z?G<$?G-$:G-U:0;return{[w]:y[w]+q,data:{[w]:W,centerOffset:G-W-q,...z&&{alignmentOffset:q}},reset:z}}}),Pue=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:l,initialPlacement:u,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:y,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:C=!0,...S}=$x(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const N=zd(s),k=Ec(u),R=zd(u)===u,A=await(d.isRTL==null?void 0:d.isRTL(f.floating)),L=y||(R||!C?[L0(u)]:xue(u)),F=_!=="none";!y&&F&&L.push(..._ue(u,C,_,A));const P=[u,...L],O=await Aue(e,S),T=[];let I=((r=a.flip)==null?void 0:r.overflows)||[];if(m&&T.push(O[N]),g){const G=yue(s,l,A);T.push(O[G[0]],O[G[1]])}if(I=[...I,{placement:s,overflows:T}],!T.every(G=>G<=0)){var V,$;const G=(((V=a.flip)==null?void 0:V.index)||0)+1,W=P[G];if(W&&(!(g==="alignment"?k!==Ec(W):!1)||I.every(K=>Ec(K.placement)===k?K.overflows[0]>0:!0)))return{data:{index:G,overflows:I},reset:{placement:W}};let z=($=I.filter(q=>q.overflows[0]<=0).sort((q,K)=>q.overflows[1]-K.overflows[1])[0])==null?void 0:$.placement;if(!z)switch(w){case"bestFit":{var U;const q=(U=I.filter(K=>{if(F){const X=Ec(K.placement);return X===k||X==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(X=>X>0).reduce((X,se)=>X+se,0)]).sort((K,X)=>K[1]-X[1])[0])==null?void 0:U[0];q&&(z=q);break}case"initialPlacement":z=u;break}if(s!==z)return{reset:{placement:z}}}return{}}}},Mue=new Set(["left","top"]);async function Lue(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),l=zd(n),u=Zm(n),d=Ec(n)==="y",f=Mue.has(l)?-1:1,m=a&&d?-1:1,g=$x(e,t);let{mainAxis:y,crossAxis:w,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return u&&typeof _=="number"&&(w=u==="end"?_*-1:_),d?{x:w*m,y:y*f}:{x:y*f,y:w*m}}const Oue=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:l,middlewareData:u}=e,d=await Lue(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:a+d.y,data:{...d,placement:l}}}}};function P6(t){const e=ia(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=_i(t),a=s?t.offsetWidth:n,l=s?t.offsetHeight:r,u=M0(n)!==a||M0(r)!==l;return u&&(n=a,r=l),{width:n,height:r,$:u}}function vS(t){return qr(t)?t:t.contextElement}function Sd(t){const e=vS(t);if(!_i(e))return xi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=P6(e);let l=(a?M0(n.width):n.width)/r,u=(a?M0(n.height):n.height)/s;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const Iue=xi(0);function M6(t){const e=Ds(t);return!gS()||!e.visualViewport?Iue:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vue(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ds(t)?!1:e}function qc(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=vS(t);let l=xi(1);e&&(r?qr(r)&&(l=Sd(r)):l=Sd(t));const u=Vue(a,n,r)?M6(a):xi(0);let d=(s.left+u.x)/l.x,f=(s.top+u.y)/l.y,m=s.width/l.x,g=s.height/l.y;if(a){const y=Ds(a),w=r&&qr(r)?Ds(r):r;let _=y,C=B_(_);for(;C&&r&&w!==_;){const S=Sd(C),N=C.getBoundingClientRect(),k=ia(C),R=N.left+(C.clientLeft+parseFloat(k.paddingLeft))*S.x,A=N.top+(C.clientTop+parseFloat(k.paddingTop))*S.y;d*=S.x,f*=S.y,m*=S.x,g*=S.y,d+=R,f+=A,_=Ds(C),C=B_(_)}}return O0({width:m,height:g,x:d,y:f})}function qx(t,e){const n=Hx(t).scrollLeft;return e?e.left+n:qc(Si(t)).left+n}function L6(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-qx(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function Uue(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",l=Si(r),u=e?zx(e.floating):!1;if(r===l||u&&a)return n;let d={scrollLeft:0,scrollTop:0},f=xi(1);const m=xi(0),g=_i(r);if((g||!g&&!a)&&((sh(r)!=="body"||Xm(l))&&(d=Hx(r)),_i(r))){const w=qc(r);f=Sd(r),m.x=w.x+r.clientLeft,m.y=w.y+r.clientTop}const y=l&&!g&&!a?L6(l,d):xi(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+m.x+y.x,y:n.y*f.y-d.scrollTop*f.y+m.y+y.y}}function Fue(t){return Array.from(t.getClientRects())}function Bue(t){const e=Si(t),n=Hx(t),r=t.ownerDocument.body,s=Rc(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Rc(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+qx(t);const u=-n.scrollTop;return ia(r).direction==="rtl"&&(l+=Rc(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:l,y:u}}const rP=25;function zue(t,e){const n=Ds(t),r=Si(t),s=n.visualViewport;let a=r.clientWidth,l=r.clientHeight,u=0,d=0;if(s){a=s.width,l=s.height;const m=gS();(!m||m&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const f=qx(r);if(f<=0){const m=r.ownerDocument,g=m.body,y=getComputedStyle(g),w=m.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,_=Math.abs(r.clientWidth-g.clientWidth-w);_<=rP&&(a-=_)}else f<=rP&&(a+=f);return{width:a,height:l,x:u,y:d}}const Hue=new Set(["absolute","fixed"]);function $ue(t,e){const n=qc(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=_i(t)?Sd(t):xi(1),l=t.clientWidth*a.x,u=t.clientHeight*a.y,d=s*a.x,f=r*a.y;return{width:l,height:u,x:d,y:f}}function sP(t,e,n){let r;if(e==="viewport")r=zue(t,n);else if(e==="document")r=Bue(Si(t));else if(qr(e))r=$ue(e,n);else{const s=M6(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return O0(r)}function O6(t,e){const n=Ml(t);return n===e||!qr(n)||Fd(n)?!1:ia(n).position==="fixed"||O6(n,e)}function que(t,e){const n=e.get(t);if(n)return n;let r=Cm(t,[],!1).filter(u=>qr(u)&&sh(u)!=="body"),s=null;const a=ia(t).position==="fixed";let l=a?Ml(t):t;for(;qr(l)&&!Fd(l);){const u=ia(l),d=pS(l);!d&&u.position==="fixed"&&(s=null),(a?!d&&!s:!d&&u.position==="static"&&!!s&&Hue.has(s.position)||Xm(l)&&!d&&O6(t,l))?r=r.filter(m=>m!==l):s=u,l=Ml(l)}return e.set(t,r),r}function Yue(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const l=[...n==="clippingAncestors"?zx(e)?[]:que(e,this._c):[].concat(n),r],u=l[0],d=l.reduce((f,m)=>{const g=sP(e,m,s);return f.top=Rc(g.top,f.top),f.right=Bd(g.right,f.right),f.bottom=Bd(g.bottom,f.bottom),f.left=Rc(g.left,f.left),f},sP(e,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Wue(t){const{width:e,height:n}=P6(t);return{width:e,height:n}}function Gue(t,e,n){const r=_i(e),s=Si(e),a=n==="fixed",l=qc(t,!0,a,e);let u={scrollLeft:0,scrollTop:0};const d=xi(0);function f(){d.x=qx(s)}if(r||!r&&!a)if((sh(e)!=="body"||Xm(s))&&(u=Hx(e)),r){const w=qc(e,!0,a,e);d.x=w.x+e.clientLeft,d.y=w.y+e.clientTop}else s&&f();a&&!r&&s&&f();const m=s&&!r&&!a?L6(s,u):xi(0),g=l.left+u.scrollLeft-d.x-m.x,y=l.top+u.scrollTop-d.y-m.y;return{x:g,y,width:l.width,height:l.height}}function r1(t){return ia(t).position==="static"}function aP(t,e){if(!_i(t)||ia(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Si(t)===n&&(n=n.ownerDocument.body),n}function I6(t,e){const n=Ds(t);if(zx(t))return n;if(!_i(t)){let s=Ml(t);for(;s&&!Fd(s);){if(qr(s)&&!r1(s))return s;s=Ml(s)}return n}let r=aP(t,e);for(;r&&aue(r)&&r1(r);)r=aP(r,e);return r&&Fd(r)&&r1(r)&&!pS(r)?n:r||uue(t)||n}const Kue=async function(t){const e=this.getOffsetParent||I6,n=this.getDimensions,r=await n(t.floating);return{reference:Gue(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Que(t){return ia(t).direction==="rtl"}const Xue={convertOffsetParentRelativeRectToViewportRelativeRect:Uue,getDocumentElement:Si,getClippingRect:Yue,getOffsetParent:I6,getElementRects:Kue,getClientRects:Fue,getDimensions:Wue,getScale:Sd,isElement:qr,isRTL:Que};function V6(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Zue(t,e){let n=null,r;const s=Si(t);function a(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),a();const f=t.getBoundingClientRect(),{left:m,top:g,width:y,height:w}=f;if(u||e(),!y||!w)return;const _=Wg(g),C=Wg(s.clientWidth-(m+y)),S=Wg(s.clientHeight-(g+w)),N=Wg(m),R={rootMargin:-_+"px "+-C+"px "+-S+"px "+-N+"px",threshold:Rc(0,Bd(1,d))||1};let A=!0;function L(F){const P=F[0].intersectionRatio;if(P!==d){if(!A)return l();P?l(!1,P):r=setTimeout(()=>{l(!1,1e-7)},1e3)}P===1&&!V6(f,t.getBoundingClientRect())&&l(),A=!1}try{n=new IntersectionObserver(L,{...R,root:s.ownerDocument})}catch{n=new IntersectionObserver(L,R)}n.observe(t)}return l(!0),a}function Jue(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,f=vS(t),m=s||a?[...f?Cm(f):[],...Cm(e)]:[];m.forEach(N=>{s&&N.addEventListener("scroll",n,{passive:!0}),a&&N.addEventListener("resize",n)});const g=f&&u?Zue(f,n):null;let y=-1,w=null;l&&(w=new ResizeObserver(N=>{let[k]=N;k&&k.target===f&&w&&(w.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var R;(R=w)==null||R.observe(e)})),n()}),f&&!d&&w.observe(f),w.observe(e));let _,C=d?qc(t):null;d&&S();function S(){const N=qc(t);C&&!V6(C,N)&&n(),C=N,_=requestAnimationFrame(S)}return n(),()=>{var N;m.forEach(k=>{s&&k.removeEventListener("scroll",n),a&&k.removeEventListener("resize",n)}),g?.(),(N=w)==null||N.disconnect(),w=null,d&&cancelAnimationFrame(_)}}const ede=Oue,tde=Pue,iP=Rue,nde=(t,e,n)=>{const r=new Map,s={platform:Xue,...n},a={...s.platform,_c:r};return Due(t,e,{...s,platform:a})};var rde=typeof document<"u",sde=function(){},Cy=rde?x.useLayoutEffect:sde;function V0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!V0(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!V0(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function U6(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function oP(t,e){const n=U6(t);return Math.round(e*n)/n}function s1(t){const e=x.useRef(t);return Cy(()=>{e.current=t}),e}function ade(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:d,open:f}=t,[m,g]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[y,w]=x.useState(r);V0(y,r)||w(r);const[_,C]=x.useState(null),[S,N]=x.useState(null),k=x.useCallback(K=>{K!==F.current&&(F.current=K,C(K))},[]),R=x.useCallback(K=>{K!==P.current&&(P.current=K,N(K))},[]),A=a||_,L=l||S,F=x.useRef(null),P=x.useRef(null),O=x.useRef(m),T=d!=null,I=s1(d),V=s1(s),$=s1(f),U=x.useCallback(()=>{if(!F.current||!P.current)return;const K={placement:e,strategy:n,middleware:y};V.current&&(K.platform=V.current),nde(F.current,P.current,K).then(X=>{const se={...X,isPositioned:$.current!==!1};G.current&&!V0(O.current,se)&&(O.current=se,Ll.flushSync(()=>{g(se)}))})},[y,e,n,V,$]);Cy(()=>{f===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,g(K=>({...K,isPositioned:!1})))},[f]);const G=x.useRef(!1);Cy(()=>(G.current=!0,()=>{G.current=!1}),[]),Cy(()=>{if(A&&(F.current=A),L&&(P.current=L),A&&L){if(I.current)return I.current(A,L,U);U()}},[A,L,U,I,T]);const W=x.useMemo(()=>({reference:F,floating:P,setReference:k,setFloating:R}),[k,R]),z=x.useMemo(()=>({reference:A,floating:L}),[A,L]),q=x.useMemo(()=>{const K={position:n,left:0,top:0};if(!z.floating)return K;const X=oP(z.floating,m.x),se=oP(z.floating,m.y);return u?{...K,transform:"translate("+X+"px, "+se+"px)",...U6(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:se}},[n,u,z.floating,m.x,m.y]);return x.useMemo(()=>({...m,update:U,refs:W,elements:z,floatingStyles:q}),[m,U,W,z,q])}const ide=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?iP({element:r.current,padding:s}).fn(n):{}:r?iP({element:r,padding:s}).fn(n):{}}}},ode=(t,e)=>({...ede(t),options:[t,e]}),lde=(t,e)=>({...tde(t),options:[t,e]}),cde=(t,e)=>({...ide(t),options:[t,e]}),ude={...q_};let lP=!1,dde=0;const cP=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+dde++;function hde(){const[t,e]=x.useState(()=>lP?cP():void 0);return I0(()=>{t==null&&e(cP())},[]),x.useEffect(()=>{lP=!0},[]),t}const fde=ude.useId,F6=fde||hde,mde=x.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:a,shift:l}},width:u=14,height:d=7,tipRadius:f=0,strokeWidth:m=0,staticOffset:g,stroke:y,d:w,style:{transform:_,...C}={},...S}=e,N=F6(),[k,R]=x.useState(!1);if(I0(()=>{if(!s)return;ia(s).direction==="rtl"&&R(!0)},[s]),!s)return null;const[A,L]=r.split("-"),F=A==="top"||A==="bottom";let P=g;(F&&l!=null&&l.x||!F&&l!=null&&l.y)&&(P=null);const O=m*2,T=O/2,I=u/2*(f/-8+1),V=d/2*f/4,$=!!w,U=P&&L==="end"?"bottom":"top";let G=P&&L==="end"?"right":"left";P&&k&&(G=L==="end"?"left":"right");const W=a?.x!=null?P||a.x:"",z=a?.y!=null?P||a.y:"",q=w||"M0,0"+(" H"+u)+(" L"+(u-I)+","+(d-V))+(" Q"+u/2+","+d+" "+I+","+(d-V))+" Z",K={top:$?"rotate(180deg)":"",left:$?"rotate(90deg)":"rotate(-90deg)",bottom:$?"":"rotate(180deg)",right:$?"rotate(-90deg)":"rotate(90deg)"}[A];return i.jsxs("svg",{...S,"aria-hidden":!0,ref:n,width:$?u:u+O,height:u,viewBox:"0 0 "+u+" "+(d>u?d:u),style:{position:"absolute",pointerEvents:"none",[G]:W,[U]:z,[A]:F||$?"100%":"calc(100% - "+O/2+"px)",transform:[K,_].filter(X=>!!X).join(" "),...C},children:[O>0&&i.jsx("path",{clipPath:"url(#"+N+")",fill:"none",stroke:y,strokeWidth:O+(w?0:1),d:q}),i.jsx("path",{stroke:O&&!w?S.fill:"none",d:q}),i.jsx("clipPath",{id:N,children:i.jsx("rect",{x:-T,y:T*($?-1:1),width:u+O,height:u})})]})});function pde(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(s=>s(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const gde=x.createContext(null),yde=x.createContext(null),xde=()=>{var t;return((t=x.useContext(gde))==null?void 0:t.id)||null},vde=()=>x.useContext(yde);function bde(t){const{open:e=!1,onOpenChange:n,elements:r}=t,s=F6(),a=x.useRef({}),[l]=x.useState(()=>pde()),u=xde()!=null,[d,f]=x.useState(r.reference),m=kue((w,_,C)=>{a.current.openEvent=w?_:void 0,l.emit("openchange",{open:w,event:_,reason:C,nested:u}),n?.(w,_,C)}),g=x.useMemo(()=>({setPositionReference:f}),[]),y=x.useMemo(()=>({reference:d||r.reference||null,floating:r.floating||null,domReference:r.reference}),[d,r.reference,r.floating]);return x.useMemo(()=>({dataRef:a,open:e,onOpenChange:m,elements:y,events:l,floatingId:s,refs:g}),[e,m,y,l,s,g])}function wde(t){t===void 0&&(t={});const{nodeId:e}=t,n=bde({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,s=r.elements,[a,l]=x.useState(null),[u,d]=x.useState(null),m=s?.domReference||a,g=x.useRef(null),y=vde();I0(()=>{m&&(g.current=m)},[m]);const w=ade({...t,elements:{...s,...u&&{reference:u}}}),_=x.useCallback(R=>{const A=qr(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),getClientRects:()=>R.getClientRects(),contextElement:R}:R;d(A),w.refs.setReference(A)},[w.refs]),C=x.useCallback(R=>{(qr(R)||R===null)&&(g.current=R,l(R)),(qr(w.refs.reference.current)||w.refs.reference.current===null||R!==null&&!qr(R))&&w.refs.setReference(R)},[w.refs]),S=x.useMemo(()=>({...w.refs,setReference:C,setPositionReference:_,domReference:g}),[w.refs,C,_]),N=x.useMemo(()=>({...w.elements,domReference:m}),[w.elements,m]),k=x.useMemo(()=>({...w,...r,refs:S,elements:N,nodeId:e}),[w,S,N,e,r]);return I0(()=>{r.dataRef.current.floatingContext=k;const R=y?.nodesRef.current.find(A=>A.id===e);R&&(R.context=k)}),x.useMemo(()=>({...w,context:k,refs:S,elements:N}),[w,S,N,k])}var H_=function(e,n){return H_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},H_(e,n)};function yr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");H_(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Nt=function(){return Nt=Object.assign||function(n){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n[l]=r[l])}return n},Nt.apply(this,arguments)};function ii(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var _de=function(t){var e=t.showTimeSelectOnly,n=e===void 0?!1:e,r=t.showTime,s=r===void 0?!1:r,a=t.className,l=t.children,u=n?"Choose Time":"Choose Date".concat(s?" and Time":"");return fe.createElement("div",{className:a,role:"dialog","aria-label":u,"aria-modal":"true"},l)},Ede=function(t,e){var n=x.useRef(null),r=x.useRef(t);r.current=t;var s=x.useCallback(function(a){var l;n.current&&!n.current.contains(a.target)&&(e&&a.target instanceof HTMLElement&&a.target.classList.contains(e)||(l=r.current)===null||l===void 0||l.call(r,a))},[e]);return x.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),n},Yx=function(t){var e=t.children,n=t.onClickOutside,r=t.className,s=t.containerRef,a=t.style,l=t.ignoreClass,u=Ede(n,l);return fe.createElement("div",{className:r,style:a,ref:function(d){u.current=d,s&&(s.current=d)}},e)},ke;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(ke||(ke={}));function bS(){var t=typeof window<"u"?window:globalThis;return t}var Jm=12,Cde=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function qt(t){if(t==null)return new Date;var e=typeof t=="string"?Fce(t):Ae(t);return Qi(e)?e:new Date}function a1(t,e,n,r,s){var a,l=null,u=Pc(n)||Pc(em()),d=!0;if(Array.isArray(e))return e.forEach(function(m){var g=t1(t,m,new Date,{locale:u,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(d=Qi(g,s)&&t===hn(g,m,n)),Qi(g,s)&&d&&(l=g)}),l;if(l=t1(t,e,new Date,{locale:u,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r)d=Qi(l)&&t===hn(l,e,n);else if(!Qi(l)){var f=((a=e.match(Cde))!==null&&a!==void 0?a:[]).map(function(m){var g=m[0];if(g==="p"||g==="P"){var y=R0[g];return u?y(m,u.formatLong):g}return m}).join("");t.length>0&&(l=t1(t,f.slice(0,t.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),Qi(l)||(l=new Date(t))}return Qi(l)&&d?l:null}function Qi(t,e){return T0(t)&&!$c(t,e??new Date("1/1/1800"))}function hn(t,e,n){if(n==="en")return Q4(t,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=n?Pc(n):void 0;return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&em()&&Pc(em())&&(r=Pc(em())),Q4(t,e,{locale:r,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Qs(t,e){var n=e.dateFormat,r=e.locale,s=Array.isArray(n)&&n.length>0?n[0]:n;return t&&hn(t,s,r)||""}function Sde(t,e,n){if(!t)return"";var r=Qs(t,n),s=e?Qs(e,n):"";return"".concat(r," - ").concat(s)}function Nde(t,e){if(!t?.length)return"";var n=t[0]?Qs(t[0],e):"";if(t.length===1)return n;if(t.length===2&&t[1]){var r=Qs(t[1],e);return"".concat(n,", ").concat(r)}var s=t.length-1;return"".concat(n," (+").concat(s,")")}function i1(t,e){var n=e.hour,r=n===void 0?0:n,s=e.minute,a=s===void 0?0:s,l=e.second,u=l===void 0?0:l;return wy(_y(Ey(t,u),a),r)}function jde(t){return dS(t)}function Tde(t,e){return hn(t,"ddd",e)}function Sy(t){return Hc(t)}function wl(t,e,n){var r=Pc(e||em());return yo(t,{locale:r,weekStartsOn:n})}function so(t){return y6(t)}function Rf(t){return Fx(t)}function uP(t){return V_(t)}function dP(){return Hc(qt())}function hP(t){return p6(t)}function kde(t){return qoe(t)}function Dde(t){return g6(t)}function Za(t,e){return t&&e?Vce(t,e):!t&&!e}function zr(t,e){return t&&e?Oce(t,e):!t&&!e}function U0(t,e){return t&&e?Ice(t,e):!t&&!e}function Ct(t,e){return t&&e?Hoe(t,e):!t&&!e}function Cc(t,e){return t&&e?Ble(t,e):!t&&!e}function Pf(t,e,n){var r,s=Hc(e),a=p6(n);try{r=Em(t,{start:s,end:a})}catch{r=!1}return r}function B6(t,e){var n=bS();n.__localeData__||(n.__localeData__={}),n.__localeData__[t]=e}function em(){var t=bS();return t.__localeId__}function Pc(t){if(typeof t=="string"){var e=bS();return e.__localeData__?e.__localeData__[t]:void 0}else return t}function Ade(t,e,n){return e(hn(t,"EEEE",n))}function Rde(t,e){return hn(t,"EEEEEE",e)}function Pde(t,e){return hn(t,"EEE",e)}function wS(t,e){return hn(Es(qt(),t),"LLLL",e)}function z6(t,e){return hn(Es(qt(),t),"LLL",e)}function Mde(t,e){return hn(rd(qt(),t),"QQQ",e)}function Zs(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,a=n.excludeDates,l=n.excludeDateIntervals,u=n.includeDates,d=n.includeDateIntervals,f=n.filterDate;return ep(t,{minDate:r,maxDate:s})||a&&a.some(function(m){return m instanceof Date?Ct(t,m):Ct(t,m.date)})||l&&l.some(function(m){var g=m.start,y=m.end;return Em(t,{start:g,end:y})})||u&&!u.some(function(m){return Ct(t,m)})||d&&!d.some(function(m){var g=m.start,y=m.end;return Em(t,{start:g,end:y})})||f&&!f(qt(t))||!1}function _S(t,e){var n=e===void 0?{}:e,r=n.excludeDates,s=n.excludeDateIntervals;return s&&s.length>0?s.some(function(a){var l=a.start,u=a.end;return Em(t,{start:l,end:u})}):r&&r.some(function(a){var l;return a instanceof Date?Ct(t,a):Ct(t,(l=a.date)!==null&&l!==void 0?l:new Date)})||!1}function H6(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,a=n.excludeDates,l=n.includeDates,u=n.filterDate;return ep(t,{minDate:r?y6(r):void 0,maxDate:s?g6(s):void 0})||a?.some(function(d){return zr(t,d instanceof Date?d:d.date)})||l&&!l.some(function(d){return zr(t,d)})||u&&!u(qt(t))||!1}function Gg(t,e,n,r){var s=dt(t),a=$r(t),l=dt(e),u=$r(e),d=dt(r);return s===l&&s===d?a<=n&&n<=u:s<l?d===s&&a<=n||d===l&&u>=n||d<l&&d>s:!1}function Lde(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,a=n.excludeDates,l=n.includeDates;return ep(t,{minDate:r,maxDate:s})||a&&a.some(function(u){return zr(u instanceof Date?u:u.date,t)})||l&&!l.some(function(u){return zr(u,t)})||!1}function Kg(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,a=n.excludeDates,l=n.includeDates,u=n.filterDate;return ep(t,{minDate:r,maxDate:s})||a?.some(function(d){return U0(t,d instanceof Date?d:d.date)})||l&&!l.some(function(d){return U0(t,d)})||u&&!u(qt(t))||!1}function Qg(t,e,n){if(!e||!n||!T0(e)||!T0(n))return!1;var r=dt(e),s=dt(n);return r<=t&&s>=t}function Ny(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.maxDate,a=n.excludeDates,l=n.includeDates,u=n.filterDate,d=new Date(t,0,1);return ep(d,{minDate:r?Fx(r):void 0,maxDate:s?x6(s):void 0})||a?.some(function(f){return Za(d,f instanceof Date?f:f.date)})||l&&!l.some(function(f){return Za(d,f)})||u&&!u(qt(d))||!1}function Xg(t,e,n,r){var s=dt(t),a=Dc(t),l=dt(e),u=Dc(e),d=dt(r);return s===l&&s===d?a<=n&&n<=u:s<l?d===s&&a<=n||d===l&&u>=n||d<l&&d>s:!1}function ep(t,e){var n,r=e===void 0?{}:e,s=r.minDate,a=r.maxDate;return(n=s&&Vd(t,s)<0||a&&Vd(t,a)>0)!==null&&n!==void 0?n:!1}function fP(t,e){return e.some(function(n){return gi(n)===gi(t)&&yi(n)===yi(t)&&ro(n)===ro(t)})}function mP(t,e){var n=e===void 0?{}:e,r=n.excludeTimes,s=n.includeTimes,a=n.filterTime;return r&&fP(t,r)||s&&!fP(t,s)||a&&!a(t)||!1}function pP(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s=qt();s=wy(s,gi(t)),s=_y(s,yi(t)),s=Ey(s,ro(t));var a=qt();a=wy(a,gi(n)),a=_y(a,yi(n)),a=Ey(a,ro(n));var l=qt();l=wy(l,gi(r)),l=_y(l,yi(r)),l=Ey(l,ro(r));var u;try{u=!Em(s,{start:a,end:l})}catch{u=!1}return u}function gP(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,a=Ac(t,1);return r&&k0(r,a)>0||s&&s.every(function(l){return k0(l,a)>0})||!1}function yP(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,a=ja(t,1);return r&&k0(a,r)>0||s&&s.every(function(l){return k0(a,l)>0})||!1}function Ode(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,a=Fx(t),l=k6(a);return r&&D0(r,l)>0||s&&s.every(function(u){return D0(u,l)>0})||!1}function Ide(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,a=x6(t),l=uS(a,1);return r&&D0(l,r)>0||s&&s.every(function(u){return D0(l,u)>0})||!1}function xP(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.includeDates,a=Ud(t,1);return r&&A0(r,a)>0||s&&s.every(function(l){return A0(l,a)>0})||!1}function Vde(t,e){var n=e===void 0?{}:e,r=n.minDate,s=n.yearItemNumber,a=s===void 0?Jm:s,l=Rf(Ud(t,a)),u=pl(l,a).endPeriod,d=r&&dt(r);return d&&d>u||!1}function vP(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.includeDates,a=to(t,1);return r&&A0(a,r)>0||s&&s.every(function(l){return A0(a,l)>0})||!1}function Ude(t,e){var n=e===void 0?{}:e,r=n.maxDate,s=n.yearItemNumber,a=s===void 0?Jm:s,l=to(t,a),u=pl(l,a).startPeriod,d=r&&dt(r);return d&&d<u||!1}function $6(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return Vd(s,e)>=0});return $4(r)}else return n?$4(n):e}function q6(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return Vd(s,e)<=0});return H4(r)}else return n?H4(n):e}function bP(t,e){var n;t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var r=new Map,s=0,a=t.length;s<a;s++){var l=t[s];if(no(l)){var u=hn(l,"MM.dd.yyyy"),d=r.get(u)||[];d.includes(e)||(d.push(e),r.set(u,d))}else if(typeof l=="object"){var f=Object.keys(l),m=(n=f[0])!==null&&n!==void 0?n:"",g=l[m];if(typeof m=="string"&&Array.isArray(g))for(var y=0,w=g.length;y<w;y++){var _=g[y];if(_){var u=hn(_,"MM.dd.yyyy"),d=r.get(u)||[];d.includes(m)||(d.push(m),r.set(u,d))}}}}return r}function Fde(t,e){return t.length!==e.length?!1:t.every(function(n,r){return n===e[r]})}function Bde(t,e){t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--holidays");var n=new Map;return t.forEach(function(r){var s=r.date,a=r.holidayName;if(no(s)){var l=hn(s,"MM.dd.yyyy"),u=n.get(l)||{className:"",holidayNames:[]};if(!("className"in u&&u.className===e&&Fde(u.holidayNames,[a]))){u.className=e;var d=u.holidayNames;u.holidayNames=d?ii(ii([],d,!0),[a],!1):[a],n.set(l,u)}}}),n}function zde(t,e,n,r,s){for(var a=s.length,l=[],u=0;u<a;u++){var d=t,f=s[u];f&&(d=Uoe(d,gi(f)),d=I_(d,yi(f)),d=zoe(d,ro(f)));var m=I_(t,(n+1)*r);Pl(d,e)&&$c(d,m)&&f!=null&&l.push(f)}return l}function wP(t){return t<10?"0".concat(t):"".concat(t)}function pl(t,e){e===void 0&&(e=Jm);var n=Math.ceil(dt(t)/e)*e,r=n-(e-1);return{startPeriod:r,endPeriod:n}}function Hde(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+n-+e)/36e5)}function _P(t){var e=t.getSeconds(),n=t.getMilliseconds();return Ae(t.getTime()-e*1e3-n)}function $de(t,e){return _P(t).getTime()===_P(e).getTime()}function EP(t){if(!no(t))throw new Error("Invalid date");var e=new Date(t);return e.setHours(0,0,0,0),e}function CP(t,e){if(!no(t)||!no(e))throw new Error("Invalid date received");var n=EP(t),r=EP(e);return $c(n,r)}function Y6(t){return t.key===ke.Space}var qde=(function(t){yr(e,t);function e(n){var r=t.call(this,n)||this;return r.inputRef=fe.createRef(),r.onTimeChange=function(s){var a,l;r.setState({time:s});var u=r.props.date,d=u instanceof Date&&!isNaN(+u),f=d?u:new Date;if(s?.includes(":")){var m=s.split(":"),g=m[0],y=m[1];f.setHours(Number(g)),f.setMinutes(Number(y))}(l=(a=r.props).onChange)===null||l===void 0||l.call(a,f)},r.renderTimeInput=function(){var s=r.state.time,a=r.props,l=a.date,u=a.timeString,d=a.customTimeInput;return d?x.cloneElement(d,{date:l,value:s,onChange:r.onTimeChange}):fe.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:r.inputRef,onClick:function(){var f;(f=r.inputRef.current)===null||f===void 0||f.focus()},required:!0,value:s,onChange:function(f){r.onTimeChange(f.target.value||u)}})},r.state={time:r.props.timeString},r}return e.getDerivedStateFromProps=function(n,r){return n.timeString!==r.time?{time:n.timeString}:null},e.prototype.render=function(){return fe.createElement("div",{className:"react-datepicker__input-time-container"},fe.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),fe.createElement("div",{className:"react-datepicker-time__input-container"},fe.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(x.Component),Yde=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.dayEl=x.createRef(),n.handleClick=function(r){!n.isDisabled()&&n.props.onClick&&n.props.onClick(r)},n.handleMouseEnter=function(r){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(r)},n.handleOnKeyDown=function(r){var s,a,l=r.key;l===ke.Space&&(r.preventDefault(),r.key=ke.Enter),(a=(s=n.props).handleOnKeyDown)===null||a===void 0||a.call(s,r)},n.isSameDay=function(r){return Ct(n.props.day,r)},n.isKeyboardSelected=function(){var r;if(n.props.disabledKeyboardNavigation)return!1;var s=n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(l){return n.isSameDayOrWeek(l)}):n.isSameDayOrWeek(n.props.selected),a=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!s&&n.isSameDayOrWeek(n.props.preSelection)&&!a},n.isDisabled=function(r){return r===void 0&&(r=n.props.day),Zs(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return _S(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return Ct(n.props.day,wl(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(r){return n.props.showWeekPicker&&Ct(r,wl(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(r){return n.isSameDay(r)||n.isSameWeek(r)},n.getHighLightedClass=function(){var r=n.props,s=r.day,a=r.highlightDates;if(!a)return!1;var l=hn(s,"MM.dd.yyyy");return a.get(l)},n.getHolidaysClass=function(){var r,s=n.props,a=s.day,l=s.holidays;if(!l)return[void 0];var u=hn(a,"MM.dd.yyyy");return l.has(u)?[(r=l.get(u))===null||r===void 0?void 0:r.className]:[void 0]},n.isInRange=function(){var r=n.props,s=r.day,a=r.startDate,l=r.endDate;return!a||!l?!1:Pf(s,a,l)},n.isInSelectingRange=function(){var r,s=n.props,a=s.day,l=s.selectsStart,u=s.selectsEnd,d=s.selectsRange,f=s.selectsDisabledDaysInRange,m=s.startDate,g=s.endDate,y=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(l||u||d)||!y||!f&&n.isDisabled()?!1:l&&g&&($c(y,g)||Cc(y,g))?Pf(a,y,g):u&&m&&(Pl(y,m)||Cc(y,m))||d&&m&&!g&&(Pl(y,m)||Cc(y,m))?Pf(a,m,y):!1},n.isSelectingRangeStart=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,a=s.day,l=s.startDate,u=s.selectsStart,d=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return u?Ct(a,d):Ct(a,l)},n.isSelectingRangeEnd=function(){var r;if(!n.isInSelectingRange())return!1;var s=n.props,a=s.day,l=s.endDate,u=s.selectsEnd,d=s.selectsRange,f=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return u||d?Ct(a,f):Ct(a,l)},n.isRangeStart=function(){var r=n.props,s=r.day,a=r.startDate,l=r.endDate;return!a||!l?!1:Ct(a,s)},n.isRangeEnd=function(){var r=n.props,s=r.day,a=r.startDate,l=r.endDate;return!a||!l?!1:Ct(l,s)},n.isWeekend=function(){var r=Ile(n.props.day);return r===0||r===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===$r(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&($r(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(qt())},n.isSelected=function(){var r;return n.props.selectsMultiple?(r=n.props.selectedDates)===null||r===void 0?void 0:r.some(function(s){return n.isSameDayOrWeek(s)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(r){var s=n.props.dayClassName?n.props.dayClassName(r):void 0;return kr("react-datepicker__day",s,"react-datepicker__day--"+Tde(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var r=n.props,s=r.day,a=r.ariaLabelPrefixWhenEnabled,l=a===void 0?"Choose":a,u=r.ariaLabelPrefixWhenDisabled,d=u===void 0?"Not available":u,f=n.isDisabled()||n.isExcluded()?d:l;return"".concat(f," ").concat(hn(s,"PPPP",n.props.locale))},n.getTitle=function(){var r=n.props,s=r.day,a=r.holidays,l=a===void 0?new Map:a,u=r.excludeDates,d=hn(s,"MM.dd.yyyy"),f=[];return l.has(d)&&f.push.apply(f,l.get(d).holidayNames),n.isExcluded()&&f.push(u?.filter(function(m){return m instanceof Date?Ct(m,s):Ct(m?.date,s)}).map(function(m){if(!(m instanceof Date))return m?.message})),f.join(", ")},n.getTabIndex=function(){var r=n.props.selected,s=n.props.preSelection,a=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(r)&&Ct(s,r))?0:-1;return a},n.handleFocusDay=function(){var r;n.shouldFocusDay()&&((r=n.dayEl.current)===null||r===void 0||r.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(X4(n.props.day),n.props.day):X4(n.props.day)},n.render=function(){return fe.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&fe.createElement("span",{className:"overlay"},n.getTitle()))},n}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},e.prototype.isDayActiveElement=function(){var n,r,s;return((r=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||r===void 0?void 0:r.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(x.Component),Wde=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.weekNumberEl=x.createRef(),n.handleClick=function(r){n.props.onClick&&n.props.onClick(r)},n.handleOnKeyDown=function(r){var s,a,l=r.key;l===ke.Space&&(r.preventDefault(),r.key=ke.Enter),(a=(s=n.props).handleOnKeyDown)===null||a===void 0||a.call(s,r)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Ct(n.props.date,n.props.selected)&&Ct(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||Ct(n.props.date,n.props.selected)&&Ct(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(r){var s=!1;n.getTabIndex()===0&&!r?.isInputFocused&&Ct(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(s=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},e.prototype.render=function(){var n=this.props,r=n.weekNumber,s=n.isWeekDisabled,a=n.ariaLabelPrefix,l=a===void 0?e.defaultProps.ariaLabelPrefix:a,u=n.onClick,d={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!u&&!s,"react-datepicker__week-number--selected":!!u&&Ct(this.props.date,this.props.selected)};return fe.createElement("div",{ref:this.weekNumberEl,className:kr(d),"aria-label":"".concat(l," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},r)},e})(x.Component),Gde=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDisabled=function(r){return Zs(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(r,s){n.props.onDayClick&&n.props.onDayClick(r,s)},n.handleDayMouseEnter=function(r){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(r)},n.handleWeekClick=function(r,s,a){for(var l,u,d,f=new Date(r),m=0;m<7;m++){var g=new Date(r);g.setDate(g.getDate()+m);var y=!n.isDisabled(g);if(y){f=g;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(f,s,a),n.props.showWeekPicker&&n.handleDayClick(f,a),((l=n.props.shouldCloseOnSelect)!==null&&l!==void 0?l:e.defaultProps.shouldCloseOnSelect)&&((d=(u=n.props).setOpen)===null||d===void 0||d.call(u,!1))},n.formatWeekNumber=function(r){return n.props.formatWeekNumber?n.props.formatWeekNumber(r):jde(r)},n.isWeekDisabled=function(){for(var r=n.startOfWeek(),s=Ca(r,6),a=new Date(r);a<=s;){if(!n.isDisabled(a))return!1;a=Ca(a,1)}return!0},n.renderDays=function(){var r=n.startOfWeek(),s=[],a=n.formatWeekNumber(r);if(n.props.showWeekNumber){var l=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,r,a):void 0;s.push(fe.createElement(Wde,Nt({key:"W"},e.defaultProps,n.props,{weekNumber:a,isWeekDisabled:n.isWeekDisabled(),date:r,onClick:l})))}return s.concat([0,1,2,3,4,5,6].map(function(u){var d=Ca(r,u);return fe.createElement(Yde,Nt({},e.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:d.valueOf(),day:d,onClick:n.handleDayClick.bind(n,d),onMouseEnter:n.handleDayMouseEnter.bind(n,d)}))}))},n.startOfWeek=function(){return wl(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!Ct(n.startOfWeek(),n.props.selected)&&Ct(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":Ct(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return fe.createElement("div",{className:kr(n)},this.renderDays())},e})(x.Component),_f,Kde=6,Nd={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},o1=(_f={},_f[Nd.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},_f[Nd.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},_f[Nd.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},_f),Zg=1;function SP(t,e){return t?Nd.FOUR_COLUMNS:e?Nd.TWO_COLUMNS:Nd.THREE_COLUMNS}var Qde=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.MONTH_REFS=ii([],Array(12),!0).map(function(){return x.createRef()}),n.QUARTER_REFS=ii([],Array(4),!0).map(function(){return x.createRef()}),n.isDisabled=function(r){return Zs(r,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(r){return _S(r,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(r,s){var a,l;(l=(a=n.props).onDayClick)===null||l===void 0||l.call(a,r,s,n.props.orderInDisplay)},n.handleDayMouseEnter=function(r){var s,a;(a=(s=n.props).onDayMouseEnter)===null||a===void 0||a.call(s,r)},n.handleMouseLeave=function(){var r,s;(s=(r=n.props).onMouseLeave)===null||s===void 0||s.call(r)},n.isRangeStartMonth=function(r){var s=n.props,a=s.day,l=s.startDate,u=s.endDate;return!l||!u?!1:zr(Es(a,r),l)},n.isRangeStartQuarter=function(r){var s=n.props,a=s.day,l=s.startDate,u=s.endDate;return!l||!u?!1:U0(rd(a,r),l)},n.isRangeEndMonth=function(r){var s=n.props,a=s.day,l=s.startDate,u=s.endDate;return!l||!u?!1:zr(Es(a,r),u)},n.isRangeEndQuarter=function(r){var s=n.props,a=s.day,l=s.startDate,u=s.endDate;return!l||!u?!1:U0(rd(a,r),u)},n.isInSelectingRangeMonth=function(r){var s,a=n.props,l=a.day,u=a.selectsStart,d=a.selectsEnd,f=a.selectsRange,m=a.startDate,g=a.endDate,y=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(u||d||f)||!y?!1:u&&g?Gg(y,g,r,l):d&&m||f&&m&&!g?Gg(m,y,r,l):!1},n.isSelectingMonthRangeStart=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var a=n.props,l=a.day,u=a.startDate,d=a.selectsStart,f=Es(l,r),m=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return d?zr(f,m):zr(f,u)},n.isSelectingMonthRangeEnd=function(r){var s;if(!n.isInSelectingRangeMonth(r))return!1;var a=n.props,l=a.day,u=a.endDate,d=a.selectsEnd,f=a.selectsRange,m=Es(l,r),g=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return d||f?zr(m,g):zr(m,u)},n.isInSelectingRangeQuarter=function(r){var s,a=n.props,l=a.day,u=a.selectsStart,d=a.selectsEnd,f=a.selectsRange,m=a.startDate,g=a.endDate,y=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(u||d||f)||!y?!1:u&&g?Xg(y,g,r,l):d&&m||f&&m&&!g?Xg(m,y,r,l):!1},n.isWeekInMonth=function(r){var s=n.props.day,a=Ca(r,6);return zr(r,s)||zr(a,s)},n.isCurrentMonth=function(r,s){return dt(r)===dt(qt())&&s===$r(qt())},n.isCurrentQuarter=function(r,s){return dt(r)===dt(qt())&&s===Dc(qt())},n.isSelectedMonth=function(r,s,a){return $r(a)===s&&dt(r)===dt(a)},n.isSelectMonthInList=function(r,s,a){return a.some(function(l){return n.isSelectedMonth(r,s,l)})},n.isSelectedQuarter=function(r,s,a){return Dc(r)===s&&dt(r)===dt(a)},n.renderWeeks=function(){for(var r=[],s=n.props.fixedHeight,a=0,l=!1,u=wl(so(n.props.day),n.props.locale,n.props.calendarStartDay),d=function(_){return n.props.showWeekPicker?wl(_,n.props.locale,n.props.calendarStartDay):n.props.preSelection},f=function(_){return n.props.showWeekPicker?wl(_,n.props.locale,n.props.calendarStartDay):n.props.selected},m=n.props.selected?f(n.props.selected):void 0,g=n.props.preSelection?d(n.props.preSelection):void 0;r.push(fe.createElement(Gde,Nt({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:a,day:u,month:$r(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:m,preSelection:g,showWeekNumber:n.props.showWeekNumbers}))),!l;){a++,u=j0(u,1);var y=s&&a>=Kde,w=!s&&!n.isWeekInMonth(u);if(y||w)if(n.props.peekNextMonth)l=!0;else break}return r},n.onMonthClick=function(r,s){var a=n.isMonthDisabledForLabelDate(s),l=a.isDisabled,u=a.labelDate;l||n.handleDayClick(so(u),r)},n.onMonthMouseEnter=function(r){var s=n.isMonthDisabledForLabelDate(r),a=s.isDisabled,l=s.labelDate;a||n.handleDayMouseEnter(so(l))},n.handleMonthNavigation=function(r,s){var a,l,u,d;(l=(a=n.props).setPreSelection)===null||l===void 0||l.call(a,s),(d=(u=n.MONTH_REFS[r])===null||u===void 0?void 0:u.current)===null||d===void 0||d.focus()},n.handleKeyboardNavigation=function(r,s,a){var l,u=n.props,d=u.selected,f=u.preSelection,m=u.setPreSelection,g=u.minDate,y=u.maxDate,w=u.showFourColumnMonthYearPicker,_=u.showTwoColumnMonthYearPicker;if(f){var C=SP(w,_),S=n.getVerticalOffset(C),N=(l=o1[C])===null||l===void 0?void 0:l.grid,k=function(P,O,T){var I,V,$=O,U=T;switch(P){case ke.ArrowRight:$=ja(O,Zg),U=T===11?0:T+Zg;break;case ke.ArrowLeft:$=Ac(O,Zg),U=T===0?11:T-Zg;break;case ke.ArrowUp:$=Ac(O,S),U=!((I=N?.[0])===null||I===void 0)&&I.includes(T)?T+12-S:T-S;break;case ke.ArrowDown:$=ja(O,S),U=!((V=N?.[N.length-1])===null||V===void 0)&&V.includes(T)?T-12+S:T+S;break}return{newCalculatedDate:$,newCalculatedMonth:U}},R=function(P,O,T){for(var I=40,V=P,$=!1,U=0,G=k(V,O,T),W=G.newCalculatedDate,z=G.newCalculatedMonth;!$;){if(U>=I){W=O,z=T;break}if(g&&W<g){V=ke.ArrowRight;var q=k(V,W,z);W=q.newCalculatedDate,z=q.newCalculatedMonth}if(y&&W>y){V=ke.ArrowLeft;var q=k(V,W,z);W=q.newCalculatedDate,z=q.newCalculatedMonth}if(Lde(W,n.props)){var q=k(V,W,z);W=q.newCalculatedDate,z=q.newCalculatedMonth}else $=!0;U++}return{newCalculatedDate:W,newCalculatedMonth:z}};if(s===ke.Enter){n.isMonthDisabled(a)||(n.onMonthClick(r,a),m?.(d));return}var A=R(s,f,a),L=A.newCalculatedDate,F=A.newCalculatedMonth;switch(s){case ke.ArrowRight:case ke.ArrowLeft:case ke.ArrowUp:case ke.ArrowDown:n.handleMonthNavigation(F,L);break}}},n.getVerticalOffset=function(r){var s,a;return(a=(s=o1[r])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&a!==void 0?a:0},n.onMonthKeyDown=function(r,s){var a=n.props,l=a.disabledKeyboardNavigation,u=a.handleOnMonthKeyDown,d=r.key;d!==ke.Tab&&r.preventDefault(),l||n.handleKeyboardNavigation(r,d,s),u&&u(r)},n.onQuarterClick=function(r,s){var a=rd(n.props.day,s);Kg(a,n.props)||n.handleDayClick(uP(a),r)},n.onQuarterMouseEnter=function(r){var s=rd(n.props.day,r);Kg(s,n.props)||n.handleDayMouseEnter(uP(s))},n.handleQuarterNavigation=function(r,s){var a,l,u,d;n.isDisabled(s)||n.isExcluded(s)||((l=(a=n.props).setPreSelection)===null||l===void 0||l.call(a,s),(d=(u=n.QUARTER_REFS[r-1])===null||u===void 0?void 0:u.current)===null||d===void 0||d.focus())},n.onQuarterKeyDown=function(r,s){var a,l,u=r.key;if(!n.props.disabledKeyboardNavigation)switch(u){case ke.Enter:n.onQuarterClick(r,s),(l=(a=n.props).setPreSelection)===null||l===void 0||l.call(a,n.props.selected);break;case ke.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===4?1:s+1,uS(n.props.preSelection,1));break;case ke.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(s===1?4:s-1,k6(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(r){var s,a=n.props,l=a.day,u=a.minDate,d=a.maxDate,f=a.excludeDates,m=a.includeDates,g=Es(l,r);return{isDisabled:(s=(u||d||f||m)&&H6(g,n.props))!==null&&s!==void 0?s:!1,labelDate:g}},n.isMonthDisabled=function(r){var s=n.isMonthDisabledForLabelDate(r).isDisabled;return s},n.getMonthClassNames=function(r){var s=n.props,a=s.day,l=s.startDate,u=s.endDate,d=s.preSelection,f=s.monthClassName,m=f?f(Es(a,r)):void 0,g=n.getSelection();return kr("react-datepicker__month-text","react-datepicker__month-".concat(r),m,{"react-datepicker__month-text--disabled":n.isMonthDisabled(r),"react-datepicker__month-text--selected":g?n.isSelectMonthInList(a,r,g):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&d&&n.isSelectedMonth(a,r,d)&&!n.isMonthDisabled(r),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(r),"react-datepicker__month-text--in-range":l&&u?Gg(l,u,r,a):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(r),"react-datepicker__month-text--range-end":n.isRangeEndMonth(r),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(r),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(r),"react-datepicker__month-text--today":n.isCurrentMonth(a,r)})},n.getTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=$r(n.props.preSelection),a=n.isMonthDisabledForLabelDate(s).isDisabled,l=r===s&&!(a||n.props.disabledKeyboardNavigation)?"0":"-1";return l},n.getQuarterTabIndex=function(r){if(n.props.preSelection==null)return"-1";var s=Dc(n.props.preSelection),a=Kg(n.props.day,n.props),l=r===s&&!(a||n.props.disabledKeyboardNavigation)?"0":"-1";return l},n.getAriaLabel=function(r){var s=n.props,a=s.chooseDayAriaLabelPrefix,l=a===void 0?"Choose":a,u=s.disabledDayAriaLabelPrefix,d=u===void 0?"Not available":u,f=s.day,m=s.locale,g=Es(f,r),y=n.isDisabled(g)||n.isExcluded(g)?d:l;return"".concat(y," ").concat(hn(g,"MMMM yyyy",m))},n.getQuarterClassNames=function(r){var s=n.props,a=s.day,l=s.startDate,u=s.endDate,d=s.selected,f=s.minDate,m=s.maxDate,g=s.excludeDates,y=s.includeDates,w=s.filterDate,_=s.preSelection,C=s.disabledKeyboardNavigation,S=(f||m||g||y||w)&&Kg(rd(a,r),n.props);return kr("react-datepicker__quarter-text","react-datepicker__quarter-".concat(r),{"react-datepicker__quarter-text--disabled":S,"react-datepicker__quarter-text--selected":d?n.isSelectedQuarter(a,r,d):void 0,"react-datepicker__quarter-text--keyboard-selected":!C&&_&&n.isSelectedQuarter(a,r,_)&&!S,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(r),"react-datepicker__quarter-text--in-range":l&&u?Xg(l,u,r,a):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(r),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(r)})},n.getMonthContent=function(r){var s=n.props,a=s.showFullMonthYearPicker,l=s.renderMonthContent,u=s.locale,d=s.day,f=z6(r,u),m=wS(r,u);return l?l(r,f,m,d):a?m:f},n.getQuarterContent=function(r){var s,a=n.props,l=a.renderQuarterContent,u=a.locale,d=Mde(r,u);return(s=l?.(r,d))!==null&&s!==void 0?s:d},n.renderMonths=function(){var r,s=n.props,a=s.showTwoColumnMonthYearPicker,l=s.showFourColumnMonthYearPicker,u=s.day,d=s.selected,f=(r=o1[SP(l,a)])===null||r===void 0?void 0:r.grid;return f?.map(function(m,g){return fe.createElement("div",{className:"react-datepicker__month-wrapper",key:g},m.map(function(y,w){return fe.createElement("div",{ref:n.MONTH_REFS[y],key:w,onClick:function(_){n.onMonthClick(_,y)},onKeyDown:function(_){Y6(_)&&(_.preventDefault(),_.key=ke.Enter),n.onMonthKeyDown(_,y)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(y)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(y)}:void 0,tabIndex:Number(n.getTabIndex(y)),className:n.getMonthClassNames(y),"aria-disabled":n.isMonthDisabled(y),role:"option","aria-label":n.getAriaLabel(y),"aria-current":n.isCurrentMonth(u,y)?"date":void 0,"aria-selected":d?n.isSelectedMonth(u,y,d):void 0},n.getMonthContent(y))}))})},n.renderQuarters=function(){var r=n.props,s=r.day,a=r.selected,l=[1,2,3,4];return fe.createElement("div",{className:"react-datepicker__quarter-wrapper"},l.map(function(u,d){return fe.createElement("div",{key:d,ref:n.QUARTER_REFS[d],role:"option",onClick:function(f){n.onQuarterClick(f,u)},onKeyDown:function(f){n.onQuarterKeyDown(f,u)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(u)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(u)}:void 0,className:n.getQuarterClassNames(u),"aria-selected":a?n.isSelectedQuarter(s,u,a):void 0,tabIndex:Number(n.getQuarterTabIndex(u)),"aria-current":n.isCurrentQuarter(s,u)?"date":void 0},n.getQuarterContent(u))}))},n.getClassNames=function(){var r=n.props,s=r.selectingDate,a=r.selectsStart,l=r.selectsEnd,u=r.showMonthYearPicker,d=r.showQuarterYearPicker,f=r.showWeekPicker;return kr("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(a||l)},{"react-datepicker__monthPicker":u},{"react-datepicker__quarterPicker":d},{"react-datepicker__weekPicker":f})},n}return e.prototype.getSelection=function(){var n=this.props,r=n.selected,s=n.selectedDates,a=n.selectsMultiple;if(a)return s;if(r)return[r]},e.prototype.render=function(){var n=this.props,r=n.showMonthYearPicker,s=n.showQuarterYearPicker,a=n.day,l=n.ariaLabelPrefix,u=l===void 0?"Month ":l,d=u?u.trim()+" ":"";return fe.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(d).concat(hn(a,"MMMM, yyyy",this.props.locale)),role:"listbox"},r?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},e})(x.Component),Xde=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isSelectedMonth=function(r){return n.props.month===r},n.renderOptions=function(){return n.props.monthNames.map(function(r,s){return fe.createElement("div",{className:n.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:r,onClick:n.onChange.bind(n,s),"aria-selected":n.isSelectedMonth(s)?"true":void 0},n.isSelectedMonth(s)?fe.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",r)})},n.onChange=function(r){return n.props.onChange(r)},n.handleClickOutside=function(){return n.props.onCancel()},n}return e.prototype.render=function(){return fe.createElement(Yx,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(x.Component),Zde=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(r){return r.map(function(s,a){return fe.createElement("option",{key:s,value:a},s)})},n.renderSelectMode=function(r){return fe.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(s){return n.onChange(parseInt(s.target.value))}},n.renderSelectOptions(r))},n.renderReadView=function(r,s){return fe.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},fe.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),fe.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[n.props.month]))},n.renderDropdown=function(r){return fe.createElement(Xde,Nt({key:"dropdown"},n.props,{monthNames:r,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(r){var s=n.state.dropdownVisible,a=[n.renderReadView(!s,r)];return s&&a.unshift(n.renderDropdown(r)),a},n.onChange=function(r){n.toggleDropdown(),r!==n.props.month&&n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n=this,r=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(a){return z6(a,n.props.locale)}:function(a){return wS(a,n.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(r);break;case"select":s=this.renderSelectMode(r);break}return fe.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},e})(x.Component);function Jde(t,e){for(var n=[],r=so(t),s=so(e);!Pl(r,s);)n.push(qt(r)),r=ja(r,1);return n}var ehe=(function(t){yr(e,t);function e(n){var r=t.call(this,n)||this;return r.renderOptions=function(){return r.state.monthYearsList.map(function(s){var a=F_(s),l=Za(r.props.date,s)&&zr(r.props.date,s);return fe.createElement("div",{className:l?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:a,onClick:r.onChange.bind(r,a),"aria-selected":l?"true":void 0},l?fe.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",hn(s,r.props.dateFormat,r.props.locale))})},r.onChange=function(s){return r.props.onChange(s)},r.handleClickOutside=function(){r.props.onCancel()},r.state={monthYearsList:Jde(r.props.minDate,r.props.maxDate)},r}return e.prototype.render=function(){var n=kr({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return fe.createElement(Yx,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(x.Component),the=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=so(n.props.minDate),s=so(n.props.maxDate),a=[];!Pl(r,s);){var l=F_(r);a.push(fe.createElement("option",{key:l,value:l},hn(r,n.props.dateFormat,n.props.locale))),r=ja(r,1)}return a},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return fe.createElement("select",{value:F_(so(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){var s=hn(n.props.date,n.props.dateFormat,n.props.locale);return fe.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},fe.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),fe.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},n.renderDropdown=function(){return fe.createElement(ehe,Nt({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown();var s=qt(r);Za(n.props.date,s)&&zr(n.props.date,s)||n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return fe.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(x.Component),nhe=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var r,s,a;n.list&&(n.list.scrollTop=(a=n.centerLi&&e.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((s=(r=n.header)===null||r===void 0?void 0:r.clientHeight)!==null&&s!==void 0?s:0):n.list.clientHeight,n.centerLi))!==null&&a!==void 0?a:0)})},n.handleClick=function(r){var s,a;(n.props.minTime||n.props.maxTime)&&pP(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&mP(r,n.props)||(a=(s=n.props).onChange)===null||a===void 0||a.call(s,r)},n.isSelectedTime=function(r){return n.props.selected&&$de(n.props.selected,r)},n.isDisabledTime=function(r){return(n.props.minTime||n.props.maxTime)&&pP(r,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&mP(r,n.props)},n.liClasses=function(r){var s,a=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(r):void 0];return n.isSelectedTime(r)&&a.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(r)&&a.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(gi(r)*3600+yi(r)*60+ro(r))%(((s=n.props.intervals)!==null&&s!==void 0?s:e.defaultProps.intervals)*60)!==0&&a.push("react-datepicker__time-list-item--injected"),a.join(" ")},n.handleOnKeyDown=function(r,s){var a,l;r.key===ke.Space&&(r.preventDefault(),r.key=ke.Enter),(r.key===ke.ArrowUp||r.key===ke.ArrowLeft)&&r.target instanceof HTMLElement&&r.target.previousSibling&&(r.preventDefault(),r.target.previousSibling instanceof HTMLElement&&r.target.previousSibling.focus()),(r.key===ke.ArrowDown||r.key===ke.ArrowRight)&&r.target instanceof HTMLElement&&r.target.nextSibling&&(r.preventDefault(),r.target.nextSibling instanceof HTMLElement&&r.target.nextSibling.focus()),r.key===ke.Enter&&n.handleClick(s),(l=(a=n.props).handleOnKeyDown)===null||l===void 0||l.call(a,r)},n.renderTimes=function(){for(var r,s=[],a=typeof n.props.format=="string"?n.props.format:"p",l=(r=n.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals,u=n.props.selected||n.props.openToDate||qt(),d=Sy(u),f=n.props.injectTimes&&n.props.injectTimes.sort(function(S,N){return S.getTime()-N.getTime()}),m=60*Hde(u),g=m/l,y=0;y<g;y++){var w=I_(d,y*l);if(s.push(w),f){var _=zde(d,w,y,l,f);s=s.concat(_)}}var C=s.reduce(function(S,N){return N.getTime()<=u.getTime()?N:S},s[0]);return s.map(function(S){return fe.createElement("li",{key:S.valueOf(),onClick:n.handleClick.bind(n,S),className:n.liClasses(S),ref:function(N){S===C&&(n.centerLi=N)},onKeyDown:function(N){n.handleOnKeyDown(N,S)},tabIndex:S===C?0:-1,role:"option","aria-selected":n.isSelectedTime(S)?"true":void 0,"aria-disabled":n.isDisabledTime(S)?"true":void 0},hn(S,a,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?fe.createElement(fe.Fragment,null):fe.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(r){n.header=r}},fe.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var n=this,r,s=this.state.height;return fe.createElement("div",{className:"react-datepicker__time-container ".concat(((r=this.props.todayButton)!==null&&r!==void 0?r:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),fe.createElement("div",{className:"react-datepicker__time"},fe.createElement("div",{className:"react-datepicker__time-box"},fe.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){n.list=a},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(n,r){return r.offsetTop-(n/2-r.clientHeight/2)},e})(x.Component),NP=3,rhe=(function(t){yr(e,t);function e(n){var r=t.call(this,n)||this;return r.YEAR_REFS=ii([],Array(r.props.yearItemNumber),!0).map(function(){return x.createRef()}),r.isDisabled=function(s){return Zs(s,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(s){return _S(s,{excludeDates:r.props.excludeDates})},r.selectingDate=function(){var s;return(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection},r.updateFocusOnPaginate=function(s){var a=function(){var l,u;(u=(l=r.YEAR_REFS[s])===null||l===void 0?void 0:l.current)===null||u===void 0||u.focus()};window.requestAnimationFrame(a)},r.handleYearClick=function(s,a){r.props.onDayClick&&r.props.onDayClick(s,a)},r.handleYearNavigation=function(s,a){var l,u,d,f,m=r.props,g=m.date,y=m.yearItemNumber;if(!(g===void 0||y===void 0)){var w=pl(g,y).startPeriod;r.isDisabled(a)||r.isExcluded(a)||((u=(l=r.props).setPreSelection)===null||u===void 0||u.call(l,a),s-w<0?r.updateFocusOnPaginate(y-(w-s)):s-w>=y?r.updateFocusOnPaginate(Math.abs(y-(s-w))):(f=(d=r.YEAR_REFS[s-w])===null||d===void 0?void 0:d.current)===null||f===void 0||f.focus())}},r.isSameDay=function(s,a){return Ct(s,a)},r.isCurrentYear=function(s){return s===dt(qt())},r.isRangeStart=function(s){return r.props.startDate&&r.props.endDate&&Za(Xa(qt(),s),r.props.startDate)},r.isRangeEnd=function(s){return r.props.startDate&&r.props.endDate&&Za(Xa(qt(),s),r.props.endDate)},r.isInRange=function(s){return Qg(s,r.props.startDate,r.props.endDate)},r.isInSelectingRange=function(s){var a=r.props,l=a.selectsStart,u=a.selectsEnd,d=a.selectsRange,f=a.startDate,m=a.endDate;return!(l||u||d)||!r.selectingDate()?!1:l&&m?Qg(s,r.selectingDate(),m):u&&f||d&&f&&!m?Qg(s,f,r.selectingDate()):!1},r.isSelectingRangeStart=function(s){var a;if(!r.isInSelectingRange(s))return!1;var l=r.props,u=l.startDate,d=l.selectsStart,f=Xa(qt(),s);return d?Za(f,(a=r.selectingDate())!==null&&a!==void 0?a:null):Za(f,u??null)},r.isSelectingRangeEnd=function(s){var a;if(!r.isInSelectingRange(s))return!1;var l=r.props,u=l.endDate,d=l.selectsEnd,f=l.selectsRange,m=Xa(qt(),s);return d||f?Za(m,(a=r.selectingDate())!==null&&a!==void 0?a:null):Za(m,u??null)},r.isKeyboardSelected=function(s){if(!(r.props.date===void 0||r.props.selected==null||r.props.preSelection==null)){var a=r.props,l=a.minDate,u=a.maxDate,d=a.excludeDates,f=a.includeDates,m=a.filterDate,g=Rf(Xa(r.props.date,s)),y=(l||u||d||f||m)&&Ny(s,r.props);return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!Ct(g,Rf(r.props.selected))&&Ct(g,Rf(r.props.preSelection))&&!y}},r.onYearClick=function(s,a){var l=r.props.date;l!==void 0&&r.handleYearClick(Rf(Xa(l,a)),s)},r.onYearKeyDown=function(s,a){var l,u,d=s.key,f=r.props,m=f.date,g=f.yearItemNumber,y=f.handleOnKeyDown;if(d!==ke.Tab&&s.preventDefault(),!r.props.disabledKeyboardNavigation)switch(d){case ke.Enter:if(r.props.selected==null)break;r.onYearClick(s,a),(u=(l=r.props).setPreSelection)===null||u===void 0||u.call(l,r.props.selected);break;case ke.ArrowRight:if(r.props.preSelection==null)break;r.handleYearNavigation(a+1,to(r.props.preSelection,1));break;case ke.ArrowLeft:if(r.props.preSelection==null)break;r.handleYearNavigation(a-1,Ud(r.props.preSelection,1));break;case ke.ArrowUp:{if(m===void 0||g===void 0||r.props.preSelection==null)break;var w=pl(m,g).startPeriod,_=NP,C=a-_;if(C<w){var S=g%_;a>=w&&a<w+S?_=S:_+=S,C=a-_}r.handleYearNavigation(C,Ud(r.props.preSelection,_));break}case ke.ArrowDown:{if(m===void 0||g===void 0||r.props.preSelection==null)break;var N=pl(m,g).endPeriod,_=NP,C=a+_;if(C>N){var S=g%_;a<=N&&a>N-S?_=S:_+=S,C=a+_}r.handleYearNavigation(C,to(r.props.preSelection,_));break}}y&&y(s)},r.getYearClassNames=function(s){var a=r.props,l=a.date,u=a.minDate,d=a.maxDate,f=a.selected,m=a.excludeDates,g=a.includeDates,y=a.filterDate,w=a.yearClassName;return kr("react-datepicker__year-text","react-datepicker__year-".concat(s),l?w?.(Xa(l,s)):void 0,{"react-datepicker__year-text--selected":f?s===dt(f):void 0,"react-datepicker__year-text--disabled":(u||d||m||g||y)&&Ny(s,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(s),"react-datepicker__year-text--range-start":r.isRangeStart(s),"react-datepicker__year-text--range-end":r.isRangeEnd(s),"react-datepicker__year-text--in-range":r.isInRange(s),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(s),"react-datepicker__year-text--today":r.isCurrentYear(s)})},r.getYearTabIndex=function(s){if(r.props.disabledKeyboardNavigation||r.props.preSelection==null)return"-1";var a=dt(r.props.preSelection),l=Ny(s,r.props);return s===a&&!l?"0":"-1"},r.getYearContent=function(s){return r.props.renderYearContent?r.props.renderYearContent(s):s},r}return e.prototype.render=function(){var n=this,r=[],s=this.props,a=s.date,l=s.yearItemNumber,u=s.onYearMouseEnter,d=s.onYearMouseLeave;if(a===void 0)return null;for(var f=pl(a,l),m=f.startPeriod,g=f.endPeriod,y=function(C){r.push(fe.createElement("div",{ref:w.YEAR_REFS[C-m],onClick:function(S){n.onYearClick(S,C)},onKeyDown:function(S){Y6(S)&&(S.preventDefault(),S.key=ke.Enter),n.onYearKeyDown(S,C)},tabIndex:Number(w.getYearTabIndex(C)),className:w.getYearClassNames(C),onMouseEnter:w.props.usePointerEvent?void 0:function(S){return u(S,C)},onPointerEnter:w.props.usePointerEvent?function(S){return u(S,C)}:void 0,onMouseLeave:w.props.usePointerEvent?void 0:function(S){return d(S,C)},onPointerLeave:w.props.usePointerEvent?function(S){return d(S,C)}:void 0,key:C,"aria-current":w.isCurrentYear(C)?"date":void 0},w.getYearContent(C)))},w=this,_=m;_<=g;_++)y(_);return fe.createElement("div",{className:"react-datepicker__year"},fe.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},r))},e})(x.Component);function she(t,e,n,r){for(var s=[],a=0;a<2*e+1;a++){var l=t+e-a,u=!0;n&&(u=dt(n)<=l),r&&u&&(u=dt(r)>=l),u&&s.push(l)}return s}var ahe=(function(t){yr(e,t);function e(n){var r=t.call(this,n)||this;r.renderOptions=function(){var u=r.props.year,d=r.state.yearsList.map(function(g){return fe.createElement("div",{className:u===g?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:g,onClick:r.onChange.bind(r,g),"aria-selected":u===g?"true":void 0},u===g?fe.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",g)}),f=r.props.minDate?dt(r.props.minDate):null,m=r.props.maxDate?dt(r.props.maxDate):null;return(!m||!r.state.yearsList.find(function(g){return g===m}))&&d.unshift(fe.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},fe.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!f||!r.state.yearsList.find(function(g){return g===f}))&&d.push(fe.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},fe.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),d},r.onChange=function(u){r.props.onChange(u)},r.handleClickOutside=function(){r.props.onCancel()},r.shiftYears=function(u){var d=r.state.yearsList.map(function(f){return f+u});r.setState({yearsList:d})},r.incrementYears=function(){return r.shiftYears(1)},r.decrementYears=function(){return r.shiftYears(-1)};var s=n.yearDropdownItemNumber,a=n.scrollableYearDropdown,l=s||(a?10:5);return r.state={yearsList:she(r.props.year,l,r.props.minDate,r.props.maxDate)},r.dropdownRef=x.createRef(),r}return e.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var r=n.children?Array.from(n.children):null,s=r?r.find(function(a){return a.ariaSelected}):null;n.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},e.prototype.render=function(){var n=kr({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return fe.createElement(Yx,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(x.Component),ihe=(function(t){yr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var r=n.props.minDate?dt(n.props.minDate):1900,s=n.props.maxDate?dt(n.props.maxDate):2100,a=[],l=r;l<=s;l++)a.push(fe.createElement("option",{key:l,value:l},l));return a},n.onSelectChange=function(r){n.onChange(parseInt(r.target.value))},n.renderSelectMode=function(){return fe.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(r){return fe.createElement("div",{key:"read",style:{visibility:r?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return n.toggleDropdown(s)}},fe.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),fe.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return fe.createElement(ahe,Nt({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var r=n.state.dropdownVisible,s=[n.renderReadView(!r)];return r&&s.unshift(n.renderDropdown()),s},n.onChange=function(r){n.toggleDropdown(),r!==n.props.year&&n.props.onChange(r)},n.toggleDropdown=function(r){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,r)})},n.handleYearChange=function(r,s){var a;(a=n.onSelect)===null||a===void 0||a.call(n,r,s),n.setOpen()},n.onSelect=function(r,s){var a,l;(l=(a=n.props).onSelect)===null||l===void 0||l.call(a,r,s)},n.setOpen=function(){var r,s;(s=(r=n.props).setOpen)===null||s===void 0||s.call(r,!0)},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return fe.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(x.Component),ohe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],lhe=function(t){var e=(t.className||"").split(/\s+/);return ohe.some(function(n){return e.indexOf(n)>=0})},che=(function(t){yr(e,t);function e(n){var r=t.call(this,n)||this;return r.monthContainer=void 0,r.handleClickOutside=function(s){r.props.onClickOutside(s)},r.setClickOutsideRef=function(){return r.containerRef.current},r.handleDropdownFocus=function(s){var a,l;lhe(s.target)&&((l=(a=r.props).onDropdownFocus)===null||l===void 0||l.call(a,s))},r.getDateInView=function(){var s=r.props,a=s.preSelection,l=s.selected,u=s.openToDate,d=$6(r.props),f=q6(r.props),m=qt(),g=u||l||a;return g||(d&&$c(m,d)?d:f&&Pl(m,f)?f:m)},r.increaseMonth=function(){r.setState(function(s){var a=s.date;return{date:ja(a,1)}},function(){return r.handleMonthChange(r.state.date)})},r.decreaseMonth=function(){r.setState(function(s){var a=s.date;return{date:Ac(a,1)}},function(){return r.handleMonthChange(r.state.date)})},r.handleDayClick=function(s,a,l){r.props.onSelect(s,a,l),r.props.setPreSelection&&r.props.setPreSelection(s)},r.handleDayMouseEnter=function(s){r.setState({selectingDate:s}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(s)},r.handleMonthMouseLeave=function(){r.setState({selectingDate:void 0}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()},r.handleYearMouseEnter=function(s,a){r.setState({selectingDate:Xa(qt(),a)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(s,a)},r.handleYearMouseLeave=function(s,a){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(s,a)},r.handleYearChange=function(s){var a,l,u,d;(l=(a=r.props).onYearChange)===null||l===void 0||l.call(a,s),r.setState({isRenderAriaLiveMessage:!0}),r.props.adjustDateOnChange&&(r.props.onSelect(s),(d=(u=r.props).setOpen)===null||d===void 0||d.call(u,!0)),r.props.setPreSelection&&r.props.setPreSelection(s)},r.getEnabledPreSelectionDateForMonth=function(s){if(!Zs(s,r.props))return s;for(var a=so(s),l=Dde(s),u=$oe(l,a),d=null,f=0;f<=u;f++){var m=Ca(a,f);if(!Zs(m,r.props)){d=m;break}}return d},r.handleMonthChange=function(s){var a,l,u,d=(a=r.getEnabledPreSelectionDateForMonth(s))!==null&&a!==void 0?a:s;r.handleCustomMonthChange(d),r.props.adjustDateOnChange&&(r.props.onSelect(d),(u=(l=r.props).setOpen)===null||u===void 0||u.call(l,!0)),r.props.setPreSelection&&r.props.setPreSelection(d)},r.handleCustomMonthChange=function(s){var a,l;(l=(a=r.props).onMonthChange)===null||l===void 0||l.call(a,s),r.setState({isRenderAriaLiveMessage:!0})},r.handleMonthYearChange=function(s){r.handleYearChange(s),r.handleMonthChange(s)},r.changeYear=function(s){r.setState(function(a){var l=a.date;return{date:Xa(l,Number(s))}},function(){return r.handleYearChange(r.state.date)})},r.changeMonth=function(s){r.setState(function(a){var l=a.date;return{date:Es(l,Number(s))}},function(){return r.handleMonthChange(r.state.date)})},r.changeMonthYear=function(s){r.setState(function(a){var l=a.date;return{date:Xa(Es(l,$r(s)),dt(s))}},function(){return r.handleMonthYearChange(r.state.date)})},r.header=function(s){s===void 0&&(s=r.state.date);var a=wl(s,r.props.locale,r.props.calendarStartDay),l=[];return r.props.showWeekNumbers&&l.push(fe.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),l.concat([0,1,2,3,4,5,6].map(function(u){var d=Ca(a,u),f=r.formatWeekday(d,r.props.locale),m=r.props.weekDayClassName?r.props.weekDayClassName(d):void 0;return fe.createElement("div",{key:u,"aria-label":hn(d,"EEEE",r.props.locale),className:kr("react-datepicker__day-name",m)},f)}))},r.formatWeekday=function(s,a){return r.props.formatWeekDay?Ade(s,r.props.formatWeekDay,a):r.props.useWeekdaysShort?Pde(s,a):Rde(s,a)},r.decreaseYear=function(){r.setState(function(s){var a,l=s.date;return{date:Ud(l,r.props.showYearPicker?(a=r.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.clearSelectingDate=function(){r.setState({selectingDate:void 0})},r.renderPreviousButton=function(){var s,a,l;if(!r.props.renderCustomHeader){var u=(s=r.props.monthsShown)!==null&&s!==void 0?s:e.defaultProps.monthsShown,d=r.props.showPreviousMonths?u-1:0,f=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:d,m=Ac(r.state.date,f),g;switch(!0){case r.props.showMonthYearPicker:g=xP(r.state.date,r.props);break;case r.props.showYearPicker:g=Vde(r.state.date,r.props);break;case r.props.showQuarterYearPicker:g=Ode(r.state.date,r.props);break;default:g=gP(m,r.props);break}if(!(!((l=r.props.forceShowMonthNavigation)!==null&&l!==void 0?l:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&g||r.props.showTimeSelectOnly)){var y=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],w=["react-datepicker__navigation","react-datepicker__navigation--previous"],_=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(_=r.decreaseYear),g&&r.props.showDisabledMonthNavigation&&(w.push("react-datepicker__navigation--previous--disabled"),_=void 0);var C=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,S=r.props,N=S.previousMonthButtonLabel,k=N===void 0?e.defaultProps.previousMonthButtonLabel:N,R=S.previousYearButtonLabel,A=R===void 0?e.defaultProps.previousYearButtonLabel:R,L=r.props,F=L.previousMonthAriaLabel,P=F===void 0?typeof k=="string"?k:"Previous Month":F,O=L.previousYearAriaLabel,T=O===void 0?typeof A=="string"?A:"Previous Year":O;return fe.createElement("button",{type:"button",className:w.join(" "),onClick:_,onKeyDown:r.props.handleOnKeyDown,"aria-label":C?T:P},fe.createElement("span",{className:y.join(" ")},C?A:k))}}},r.increaseYear=function(){r.setState(function(s){var a,l=s.date;return{date:to(l,r.props.showYearPicker?(a=r.props.yearItemNumber)!==null&&a!==void 0?a:e.defaultProps.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})},r.renderNextButton=function(){var s;if(!r.props.renderCustomHeader){var a;switch(!0){case r.props.showMonthYearPicker:a=vP(r.state.date,r.props);break;case r.props.showYearPicker:a=Ude(r.state.date,r.props);break;case r.props.showQuarterYearPicker:a=Ide(r.state.date,r.props);break;default:a=yP(r.state.date,r.props);break}if(!(!((s=r.props.forceShowMonthNavigation)!==null&&s!==void 0?s:e.defaultProps.forceShowMonthNavigation)&&!r.props.showDisabledMonthNavigation&&a||r.props.showTimeSelectOnly)){var l=["react-datepicker__navigation","react-datepicker__navigation--next"],u=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&l.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&l.push("react-datepicker__navigation--next--with-today-button");var d=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(d=r.increaseYear),a&&r.props.showDisabledMonthNavigation&&(l.push("react-datepicker__navigation--next--disabled"),d=void 0);var f=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,m=r.props,g=m.nextMonthButtonLabel,y=g===void 0?e.defaultProps.nextMonthButtonLabel:g,w=m.nextYearButtonLabel,_=w===void 0?e.defaultProps.nextYearButtonLabel:w,C=r.props,S=C.nextMonthAriaLabel,N=S===void 0?typeof y=="string"?y:"Next Month":S,k=C.nextYearAriaLabel,R=k===void 0?typeof _=="string"?_:"Next Year":k;return fe.createElement("button",{type:"button",className:l.join(" "),onClick:d,onKeyDown:r.props.handleOnKeyDown,"aria-label":f?R:N},fe.createElement("span",{className:u.join(" ")},f?_:y))}}},r.renderCurrentMonth=function(s){s===void 0&&(s=r.state.date);var a=["react-datepicker__current-month"];return r.props.showYearDropdown&&a.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&a.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&a.push("react-datepicker__current-month--hasMonthYearDropdown"),fe.createElement("h2",{className:a.join(" ")},hn(s,r.props.dateFormat,r.props.locale))},r.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showYearDropdown||s))return fe.createElement(ihe,Nt({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeYear,year:dt(r.state.date)}))},r.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthDropdown||s))return fe.createElement(Zde,Nt({},e.defaultProps,r.props,{month:$r(r.state.date),onChange:r.changeMonth}))},r.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!r.props.showMonthYearDropdown||s))return fe.createElement(the,Nt({},e.defaultProps,r.props,{date:r.state.date,onChange:r.changeMonthYear}))},r.handleTodayButtonClick=function(s){r.props.onSelect(dP(),s),r.props.setPreSelection&&r.props.setPreSelection(dP())},r.renderTodayButton=function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return fe.createElement("div",{className:"react-datepicker__today-button",onClick:r.handleTodayButtonClick},r.props.todayButton)},r.renderDefaultHeader=function(s){var a=s.monthDate,l=s.i;return fe.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(a),fe.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(l!==0),r.renderMonthYearDropdown(l!==0),r.renderYearDropdown(l!==0)),fe.createElement("div",{className:"react-datepicker__day-names"},r.header(a)))},r.renderCustomHeader=function(s){var a,l,u=s.monthDate,d=s.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var f=gP(r.state.date,r.props),m=yP(r.state.date,r.props),g=xP(r.state.date,r.props),y=vP(r.state.date,r.props),w=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return fe.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},(l=(a=r.props).renderCustomHeader)===null||l===void 0?void 0:l.call(a,Nt(Nt({},r.state),{customHeaderCount:d,monthDate:u,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:f,nextMonthButtonDisabled:m,prevYearButtonDisabled:g,nextYearButtonDisabled:y})),w&&fe.createElement("div",{className:"react-datepicker__day-names"},r.header(u)))},r.renderYearHeader=function(s){var a=s.monthDate,l=r.props,u=l.showYearPicker,d=l.yearItemNumber,f=d===void 0?e.defaultProps.yearItemNumber:d,m=pl(a,f),g=m.startPeriod,y=m.endPeriod;return fe.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},u?"".concat(g," - ").concat(y):dt(a))},r.renderHeader=function(s){var a=s.monthDate,l=s.i,u=l===void 0?0:l,d={monthDate:a,i:u};switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(d);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(d);default:return r.renderDefaultHeader(d)}},r.renderMonths=function(){var s,a;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var l=[],u=(s=r.props.monthsShown)!==null&&s!==void 0?s:e.defaultProps.monthsShown,d=r.props.showPreviousMonths?u-1:0,f=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?to(r.state.date,d):Ac(r.state.date,d),m=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:d,g=0;g<u;++g){var y=g-m+d,w=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?to(f,y):ja(f,y),_="month-".concat(g),C=g<u-1,S=g>0;l.push(fe.createElement("div",{key:_,ref:function(N){r.monthContainer=N??void 0},className:"react-datepicker__month-container"},r.renderHeader({monthDate:w,i:g}),fe.createElement(Qde,Nt({},e.defaultProps,r.props,{ariaLabelPrefix:r.props.monthAriaLabelPrefix,day:w,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,orderInDisplay:g,selectingDate:r.state.selectingDate,monthShowsDuplicateDaysEnd:C,monthShowsDuplicateDaysStart:S}))))}return l}},r.renderYears=function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return fe.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),fe.createElement(rhe,Nt({},e.defaultProps,r.props,{selectingDate:r.state.selectingDate,date:r.state.date,onDayClick:r.handleDayClick,clearSelectingDate:r.clearSelectingDate,onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))},r.renderTimeSection=function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return fe.createElement(nhe,Nt({},e.defaultProps,r.props,{onChange:r.props.onTimeChange,format:r.props.timeFormat,intervals:r.props.timeIntervals,monthRef:r.state.monthContainer}))},r.renderInputTimeSection=function(){var s=r.props.selected?new Date(r.props.selected):void 0,a=s&&Qi(s)&&!!r.props.selected,l=a?"".concat(wP(s.getHours()),":").concat(wP(s.getMinutes())):"";if(r.props.showTimeInput)return fe.createElement(qde,Nt({},e.defaultProps,r.props,{date:s,timeString:l,onChange:r.props.onTimeChange}))},r.renderAriaLiveRegion=function(){var s,a=pl(r.state.date,(s=r.props.yearItemNumber)!==null&&s!==void 0?s:e.defaultProps.yearItemNumber),l=a.startPeriod,u=a.endPeriod,d;return r.props.showYearPicker?d="".concat(l," - ").concat(u):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?d=dt(r.state.date):d="".concat(wS($r(r.state.date),r.props.locale)," ").concat(dt(r.state.date)),fe.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&d)},r.renderChildren=function(){if(r.props.children)return fe.createElement("div",{className:"react-datepicker__children-container"},r.props.children)},r.containerRef=x.createRef(),r.state={date:r.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},r}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:Jm}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){n.setState({monthContainer:n.monthContainer})})())},e.prototype.componentDidUpdate=function(n){var r=this;if(this.props.preSelection&&(!Ct(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var s=!zr(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&r.handleCustomMonthChange(r.state.date)})}else this.props.openToDate&&!Ct(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var n=this.props.container||_de;return fe.createElement(Yx,{onClickOutside:this.handleClickOutside,style:{display:"contents"},containerRef:this.containerRef,ignoreClass:this.props.outsideClickIgnoreClass},fe.createElement(n,{className:kr("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},e})(x.Component),uhe=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,s=t.onClick,a="react-datepicker__calendar-icon";return typeof e=="string"?fe.createElement("i",{className:"".concat(a," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:s}):fe.isValidElement(e)?fe.cloneElement(e,{className:"".concat(e.props.className||""," ").concat(a," ").concat(r),onClick:function(l){typeof e.props.onClick=="function"&&e.props.onClick(l),typeof s=="function"&&s(l)}}):fe.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},fe.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},W6=(function(t){yr(e,t);function e(n){var r=t.call(this,n)||this;return r.portalRoot=null,r.el=document.createElement("div"),r}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return w7.createPortal(this.props.children,this.el)},e})(x.Component),dhe="[tabindex], a, button, input, select, textarea",hhe=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},G6=(function(t){yr(e,t);function e(n){var r=t.call(this,n)||this;return r.getTabChildren=function(){var s;return Array.prototype.slice.call((s=r.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(dhe),1,-1).filter(hhe)},r.handleFocusStart=function(){var s=r.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},r.handleFocusEnd=function(){var s=r.getTabChildren();s&&s.length>1&&s[0].focus()},r.tabLoopRef=x.createRef(),r}return e.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:e.defaultProps.enableTabLoop)?fe.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},fe.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,fe.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(x.Component);function fhe(t){var e=function(n){var r,s=typeof n.hidePopper=="boolean"?n.hidePopper:!0,a=x.useRef(null),l=wde(Nt({open:!s,whileElementsMounted:Jue,placement:n.popperPlacement,middleware:ii([lde({padding:15}),ode(10),cde({element:a})],(r=n.popperModifiers)!==null&&r!==void 0?r:[],!0)},n.popperProps)),u=Nt(Nt({},n),{hidePopper:s,popperProps:Nt(Nt({},l),{arrowRef:a})});return fe.createElement(t,Nt({},u))};return e}var mhe=(function(t){yr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n=this.props,r=n.className,s=n.wrapperClassName,a=n.hidePopper,l=a===void 0?e.defaultProps.hidePopper:a,u=n.popperComponent,d=n.targetComponent,f=n.enableTabLoop,m=n.popperOnKeyDown,g=n.portalId,y=n.portalHost,w=n.popperProps,_=n.showArrow,C=void 0;if(!l){var S=kr("react-datepicker-popper",r);C=fe.createElement(G6,{enableTabLoop:f},fe.createElement("div",{ref:w.refs.setFloating,style:w.floatingStyles,className:S,"data-placement":w.placement,onKeyDown:m},u,_&&fe.createElement(mde,{ref:w.arrowRef,context:w.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(C=x.createElement(this.props.popperContainer,{},C)),g&&!l&&(C=fe.createElement(W6,{portalId:g,portalHost:y},C));var N=kr("react-datepicker-wrapper",s);return fe.createElement(fe.Fragment,null,fe.createElement("div",{ref:w.refs.setReference,className:N},d),C)},e})(x.Component),phe=fhe(mhe),jP="react-datepicker-ignore-onclickoutside";function ghe(t,e){return t&&e?$r(t)!==$r(e)||dt(t)!==dt(e):t!==e}var l1="Date input not valid.",F0=(function(t){yr(e,t);function e(n){var r=t.call(this,n)||this;return r.calendar=null,r.input=null,r.getPreSelection=function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:qt()},r.modifyHolidays=function(){var s;return(s=r.props.holidays)===null||s===void 0?void 0:s.reduce(function(a,l){var u=new Date(l.date);return Qi(u)?ii(ii([],a,!0),[Nt(Nt({},l),{date:u})],!1):a},[])},r.calcInitialState=function(){var s,a=r.getPreSelection(),l=$6(r.props),u=q6(r.props),d=l&&$c(a,Sy(l))?l:u&&Pl(a,hP(u))?u:a;return{open:r.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&s!==void 0?s:d,highlightDates:bP(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},r.resetHiddenStatus=function(){r.setState(Nt(Nt({},r.state),{wasHidden:!1}))},r.setHiddenStatus=function(){r.setState(Nt(Nt({},r.state),{wasHidden:!0}))},r.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&r.setHiddenStatus()},r.clearPreventFocusTimeout=function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)},r.safeFocus=function(){setTimeout(function(){var s,a;(a=(s=r.input)===null||s===void 0?void 0:s.focus)===null||a===void 0||a.call(s,{preventScroll:!0})},0)},r.safeBlur=function(){setTimeout(function(){var s,a;(a=(s=r.input)===null||s===void 0?void 0:s.blur)===null||a===void 0||a.call(s)},0)},r.setFocus=function(){r.safeFocus()},r.setBlur=function(){r.safeBlur(),r.cancelFocusInput()},r.setOpen=function(s,a){a===void 0&&(a=!1),r.setState({open:s,preSelection:s&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:c1},function(){s||r.setState(function(l){return{focused:a?l.focused:!1}},function(){!a&&r.setBlur(),r.setState({inputValue:null})})})},r.inputOk=function(){return no(r.state.preSelection)},r.isCalendarOpen=function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open},r.handleFocus=function(s){var a,l,u=r.state.wasHidden,d=u?r.state.open:!0;u&&r.resetHiddenStatus(),!r.state.preventFocus&&d&&((l=(a=r.props).onFocus)===null||l===void 0||l.call(a,s),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})},r.sendFocusBackToInput=function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})},r.cancelFocusInput=function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=void 0},r.deferFocusInput=function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)},r.handleDropdownFocus=function(){r.cancelFocusInput()},r.handleBlur=function(s){var a,l;(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&((l=(a=r.props).onBlur)===null||l===void 0||l.call(a,s)),r.setState({focused:!1})},r.handleCalendarClickOutside=function(s){var a,l;r.props.inline||r.setOpen(!1),(l=(a=r.props).onClickOutside)===null||l===void 0||l.call(a,s),r.props.withPortal&&s.preventDefault()},r.handleChange=function(){for(var s,a,l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var d=l[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,l),!d||typeof d.isDefaultPrevented!="function"||d.isDefaultPrevented()))){r.setState({inputValue:d?.target instanceof HTMLInputElement?d.target.value:null,lastPreSelectChange:yhe});var f=r.props,m=f.dateFormat,g=m===void 0?e.defaultProps.dateFormat:m,y=f.strictParsing,w=y===void 0?e.defaultProps.strictParsing:y,_=f.selectsRange,C=f.startDate,S=f.endDate,N=d?.target instanceof HTMLInputElement?d.target.value:"";if(_){var k=N.split("-",2).map(function(I){return I.trim()}),R=k[0],A=k[1],L=a1(R??"",g,r.props.locale,w),F=a1(A??"",g,r.props.locale,w),P=C?.getTime()!==L?.getTime(),O=S?.getTime()!==F?.getTime();if(!P&&!O||L&&Zs(L,r.props)||F&&Zs(F,r.props))return;(a=(s=r.props).onChange)===null||a===void 0||a.call(s,[L,F],d)}else{var T=a1(N,g,r.props.locale,w,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&T&&!Ct(T,r.props.selected)&&(T=nue(r.props.selected,{hours:gi(T),minutes:yi(T),seconds:ro(T)})),(T||!N)&&r.setSelected(T,d,!0)}}},r.handleSelect=function(s,a,l){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(a),r.setSelected(s,a,!1,l),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(s);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var u=r.props,d=u.startDate,f=u.endDate;d&&!f&&(r.props.swapRange||!CP(s,d))&&r.setOpen(!1)}},r.setSelected=function(s,a,l,u){var d,f,m=s;if(r.props.showYearPicker){if(m!==null&&Ny(dt(m),r.props))return}else if(r.props.showMonthYearPicker){if(m!==null&&H6(m,r.props))return}else if(m!==null&&Zs(m,r.props))return;var g=r.props,y=g.onChange,w=g.selectsRange,_=g.startDate,C=g.endDate,S=g.selectsMultiple,N=g.selectedDates,k=g.minTime,R=g.swapRange;if(!Cc(r.props.selected,m)||r.props.allowSameDay||w||S)if(m!==null&&(r.props.selected&&(!l||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(m=i1(m,{hour:gi(r.props.selected),minute:yi(r.props.selected),second:ro(r.props.selected)})),!l&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&k&&(m=i1(m,{hour:k.getHours(),minute:k.getMinutes(),second:k.getSeconds()})),r.props.inline||r.setState({preSelection:m}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:u})),w){var A=!_&&!C,L=_&&!C,F=_&&C;A?y?.([m,null],a):L&&(m===null?y?.([null,null],a):CP(m,_)?y?.(R?[m,_]:[m,null],a):y?.([_,m],a)),F&&y?.([m,null],a)}else if(S){if(m!==null)if(!N?.length)y?.([m],a);else{var P=N.some(function(T){return Ct(T,m)});if(P){var O=N.filter(function(T){return!Ct(T,m)});y?.(O,a)}else y?.(ii(ii([],N,!0),[m],!1),a)}}else y?.(m,a);l||((f=(d=r.props).onSelect)===null||f===void 0||f.call(d,m,a),r.setState({inputValue:null}))},r.setPreSelection=function(s){var a=no(r.props.minDate),l=no(r.props.maxDate),u=!0;if(s){var d=Sy(s);if(a&&l)u=Pf(s,r.props.minDate,r.props.maxDate);else if(a){var f=Sy(r.props.minDate);u=Pl(s,f)||Cc(d,f)}else if(l){var m=hP(r.props.maxDate);u=$c(s,m)||Cc(d,m)}}u&&r.setState({preSelection:s})},r.toggleCalendar=function(){r.setOpen(!r.state.open)},r.handleTimeChange=function(s){var a,l;if(!(r.props.selectsRange||r.props.selectsMultiple)){var u=r.props.selected?r.props.selected:r.getPreSelection(),d=r.props.selected?s:i1(u,{hour:gi(s),minute:yi(s)});r.setState({preSelection:d}),(l=(a=r.props).onChange)===null||l===void 0||l.call(a,d),r.props.shouldCloseOnSelect&&!r.props.showTimeInput&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}},r.onInputClick=function(){var s,a;!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),(a=(s=r.props).onInputClick)===null||a===void 0||a.call(s)},r.onInputKeyDown=function(s){var a,l,u,d,f,m;(l=(a=r.props).onKeyDown)===null||l===void 0||l.call(a,s);var g=s.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(g===ke.ArrowDown||g===ke.ArrowUp||g===ke.Enter)&&((u=r.onInputClick)===null||u===void 0||u.call(r));return}if(r.state.open){if(g===ke.ArrowDown||g===ke.ArrowUp){s.preventDefault();var y=r.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',w=((d=r.calendar)===null||d===void 0?void 0:d.containerRef.current)instanceof Element&&r.calendar.containerRef.current.querySelector(y);w instanceof HTMLElement&&w.focus({preventScroll:!0});return}var _=qt(r.state.preSelection);g===ke.Enter?(s.preventDefault(),s.target.blur(),r.inputOk()&&r.state.lastPreSelectChange===c1?(r.handleSelect(_,s),!r.props.shouldCloseOnSelect&&r.setPreSelection(_)):r.setOpen(!1)):g===ke.Escape?(s.preventDefault(),s.target.blur(),r.sendFocusBackToInput(),r.setOpen(!1)):g===ke.Tab&&r.setOpen(!1),r.inputOk()||(m=(f=r.props).onInputError)===null||m===void 0||m.call(f,{code:1,msg:l1})}},r.onPortalKeyDown=function(s){var a=s.key;a===ke.Escape&&(s.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))},r.onDayKeyDown=function(s){var a,l,u,d,f,m,g=r.props,y=g.minDate,w=g.maxDate,_=g.disabledKeyboardNavigation,C=g.showWeekPicker,S=g.shouldCloseOnSelect,N=g.locale,k=g.calendarStartDay,R=g.adjustDateOnChange,A=g.inline;if((l=(a=r.props).onKeyDown)===null||l===void 0||l.call(a,s),!_){var L=s.key,F=s.shiftKey,P=qt(r.state.preSelection),O=function(W,z){var q=z;switch(W){case ke.ArrowRight:q=C?j0(z,1):Ca(z,1);break;case ke.ArrowLeft:q=C?Z4(z):Uce(z);break;case ke.ArrowUp:q=Z4(z);break;case ke.ArrowDown:q=j0(z,1);break;case ke.PageUp:q=F?Ud(z,1):Ac(z,1);break;case ke.PageDown:q=F?to(z,1):ja(z,1);break;case ke.Home:q=wl(z,N,k);break;case ke.End:q=kde(z);break}return q},T=function(W,z){for(var q=40,K=W,X=!1,se=0,H=O(W,z);!X;){if(se>=q){H=z;break}y&&H<y&&(K=ke.ArrowRight,H=Zs(y,r.props)?O(K,H):y),w&&H>w&&(K=ke.ArrowLeft,H=Zs(w,r.props)?O(K,H):w),Zs(H,r.props)?((K===ke.PageUp||K===ke.Home)&&(K=ke.ArrowRight),(K===ke.PageDown||K===ke.End)&&(K=ke.ArrowLeft),H=O(K,H)):X=!0,se++}return H};if(L===ke.Enter){s.preventDefault(),r.handleSelect(P,s),!S&&r.setPreSelection(P);return}else if(L===ke.Escape){s.preventDefault(),r.setOpen(!1),r.inputOk()||(d=(u=r.props).onInputError)===null||d===void 0||d.call(u,{code:1,msg:l1});return}var I=null;switch(L){case ke.ArrowLeft:case ke.ArrowRight:case ke.ArrowUp:case ke.ArrowDown:case ke.PageUp:case ke.PageDown:case ke.Home:case ke.End:I=T(L,P);break}if(!I){(m=(f=r.props).onInputError)===null||m===void 0||m.call(f,{code:1,msg:l1});return}if(s.preventDefault(),r.setState({lastPreSelectChange:c1}),R&&r.setSelected(I),r.setPreSelection(I),A){var V=$r(P),$=$r(I),U=dt(P),G=dt(I);V!==$||U!==G?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}},r.onPopperKeyDown=function(s){var a=s.key;a===ke.Escape&&(s.preventDefault(),r.sendFocusBackToInput())},r.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),r.sendFocusBackToInput();var a=r.props,l=a.selectsRange,u=a.onChange;u?.(l?[null,null]:null,s),r.setState({inputValue:null})},r.clear=function(){r.onClearClick()},r.onScroll=function(s){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(s)&&r.setOpen(!1)},r.renderCalendar=function(){var s,a;return!r.props.inline&&!r.isCalendarOpen()?null:fe.createElement(che,Nt({showMonthYearDropdown:void 0,ref:function(l){r.calendar=l}},r.props,r.state,{setOpen:r.setOpen,dateFormat:(s=r.props.dateFormatCalendar)!==null&&s!==void 0?s:e.defaultProps.dateFormatCalendar,onSelect:r.handleSelect,onClickOutside:r.handleCalendarClickOutside,holidays:Bde(r.modifyHolidays()),outsideClickIgnoreClass:jP,onDropdownFocus:r.handleDropdownFocus,onTimeChange:r.handleTimeChange,className:r.props.calendarClassName,container:r.props.calendarContainer,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,setPreSelection:r.setPreSelection,dropdownMode:(a=r.props.dropdownMode)!==null&&a!==void 0?a:e.defaultProps.dropdownMode}),r.props.children)},r.renderAriaLiveRegion=function(){var s=r.props,a=s.dateFormat,l=a===void 0?e.defaultProps.dateFormat:a,u=s.locale,d=r.props.showTimeInput||r.props.showTimeSelect,f=d?"PPPPp":"PPPP",m;return r.props.selectsRange?m="Selected start date: ".concat(Qs(r.props.startDate,{dateFormat:f,locale:u}),". ").concat(r.props.endDate?"End date: "+Qs(r.props.endDate,{dateFormat:f,locale:u}):""):r.props.showTimeSelectOnly?m="Selected time: ".concat(Qs(r.props.selected,{dateFormat:l,locale:u})):r.props.showYearPicker?m="Selected year: ".concat(Qs(r.props.selected,{dateFormat:"yyyy",locale:u})):r.props.showMonthYearPicker?m="Selected month: ".concat(Qs(r.props.selected,{dateFormat:"MMMM yyyy",locale:u})):r.props.showQuarterYearPicker?m="Selected quarter: ".concat(Qs(r.props.selected,{dateFormat:"yyyy, QQQ",locale:u})):m="Selected date: ".concat(Qs(r.props.selected,{dateFormat:f,locale:u})),fe.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},m)},r.renderDateInput=function(){var s,a,l,u=kr(r.props.className,(s={},s[jP]=r.state.open,s)),d=r.props.customInput||fe.createElement("input",{type:"text"}),f=r.props.customInputRef||"ref",m=r.props,g=m.dateFormat,y=g===void 0?e.defaultProps.dateFormat:g,w=m.locale,_=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?Sde(r.props.startDate,r.props.endDate,{dateFormat:y,locale:w}):r.props.selectsMultiple?Nde((l=r.props.selectedDates)!==null&&l!==void 0?l:[],{dateFormat:y,locale:w}):Qs(r.props.selected,{dateFormat:y,locale:w});return x.cloneElement(d,(a={},a[f]=function(C){r.input=C},a.value=_,a.onBlur=r.handleBlur,a.onChange=r.handleChange,a.onClick=r.onInputClick,a.onFocus=r.handleFocus,a.onKeyDown=r.onInputKeyDown,a.id=r.props.id,a.name=r.props.name,a.form=r.props.form,a.autoFocus=r.props.autoFocus,a.placeholder=r.props.placeholderText,a.disabled=r.props.disabled,a.autoComplete=r.props.autoComplete,a.className=kr(d.props.className,u),a.title=r.props.title,a.readOnly=r.props.readOnly,a.required=r.props.required,a.tabIndex=r.props.tabIndex,a["aria-describedby"]=r.props.ariaDescribedBy,a["aria-invalid"]=r.props.ariaInvalid,a["aria-labelledby"]=r.props.ariaLabelledBy,a["aria-required"]=r.props.ariaRequired,a))},r.renderClearButton=function(){var s=r.props,a=s.isClearable,l=s.disabled,u=s.selected,d=s.startDate,f=s.endDate,m=s.clearButtonTitle,g=s.clearButtonClassName,y=g===void 0?"":g,w=s.ariaLabelClose,_=w===void 0?"Close":w,C=s.selectedDates;return a&&(u!=null||d!=null||f!=null||C?.length)?fe.createElement("button",{type:"button",className:kr("react-datepicker__close-icon",y,{"react-datepicker__close-icon--disabled":l}),disabled:l,"aria-label":_,onClick:r.onClearClick,title:m,tabIndex:-1}):null},r.state=r.calcInitialState(),r.preventFocusTimeout=void 0,r}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Jm,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(n,r){var s,a,l,u;n.inline&&ghe(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:bP(this.props.highlightDates)}),!r.focused&&!Cc(n.selected,this.props.selected)&&this.setState({inputValue:null}),r.open!==this.state.open&&(r.open===!1&&this.state.open===!0&&((a=(s=this.props).onCalendarOpen)===null||a===void 0||a.call(s)),r.open===!0&&this.state.open===!1&&((u=(l=this.props).onCalendarClose)===null||u===void 0||u.call(l)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var n=this.props,r=n.showIcon,s=n.icon,a=n.calendarIconClassname,l=n.calendarIconClassName,u=n.toggleCalendarOnIconClick,d=this.state.open;return a&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),fe.createElement("div",{className:"react-datepicker__input-container".concat(r?" react-datepicker__view-calendar-icon":"")},r&&fe.createElement(uhe,Nt({icon:s,className:kr(l,!l&&a,d&&"react-datepicker-ignore-onclickoutside")},u?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var r=this.state.open?fe.createElement(G6,{enableTabLoop:this.props.enableTabLoop},fe.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(r=fe.createElement(W6,Nt({portalId:this.props.portalId},this.props),r)),fe.createElement("div",null,this.renderInputContainer(),r)}return fe.createElement(phe,Nt({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(x.Component),yhe="input",c1="navigate";function xhe({date:t,onDateChange:e,mode:n,onModeChange:r,professionals:s,selectedProfessionalId:a,onProfessionalChange:l,isMobile:u,showGridToggle:d=!0,labels:f}){const[m,g]=x.useState(!1),y=x.useRef(null);return x.useEffect(()=>{const w=_=>{y.current&&!y.current.contains(_.target)&&g(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),i.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-indigo-50 via-white to-purple-50/60 backdrop-blur border-b border-indigo-100/70 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[i.jsxs("div",{className:"relative",ref:y,children:[i.jsx("span",{className:"text-sm font-medium text-gray-800",children:f.date}),i.jsxs("button",{type:"button",onClick:()=>g(w=>!w),className:"mt-1 inline-flex items-center gap-2 rounded-xl border border-indigo-100 bg-white px-4 py-2 text-base font-semibold text-gray-900 shadow-sm hover:border-indigo-200 focus-visible:ring-2 focus-visible:ring-indigo-500","aria-label":f.date,children:[i.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-indigo-100 text-indigo-700 font-bold",children:yn(t,"dd")}),i.jsxs("span",{className:"text-left",children:[i.jsx("span",{className:"block text-sm text-gray-500 uppercase tracking-wide",children:yn(t,"MMM yyyy")}),i.jsx("span",{className:"block leading-tight",children:yn(t,"EEEE")})]})]}),m&&i.jsx("div",{className:"absolute mt-2 w-[280px] rounded-2xl border border-gray-200 bg-white shadow-2xl p-2 z-[100]",children:i.jsx(F0,{inline:!0,selected:t,onChange:w=>{g(!1),w&&e(w)},calendarClassName:"compact-calendar",dayClassName:()=>"text-sm font-semibold",formatWeekDay:w=>w.slice(0,2)})})]}),i.jsxs("label",{className:"flex flex-col text-sm text-gray-700",children:[i.jsxs("span",{className:"font-medium text-gray-800",children:[f.professional,u&&n==="list"?" *":""]}),i.jsxs("select",{value:a,onChange:w=>l(w.target.value),className:"mt-1 w-full sm:w-auto rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base px-3 py-2 sm:min-w-[180px] max-w-[280px]","aria-label":f.professional,children:[(n==="grid"||!u)&&i.jsx("option",{value:"all",children:f.allProfessionals}),s.map(w=>i.jsx("option",{value:w.id,children:w.name},w.id))]})]})]}),d&&i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-gray-100 p-1 w-fit",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 px-2",children:f.mode}),i.jsx("button",{type:"button",onClick:()=>r("list"),"aria-pressed":n==="list","aria-label":f.list,className:`px-4 py-2 rounded-full text-sm font-semibold transition min-w-[96px] ${n==="list"?"bg-white shadow text-indigo-600":"text-gray-700 hover:text-indigo-600"}`,children:f.list}),i.jsx("button",{type:"button",onClick:()=>r("grid"),"aria-pressed":n==="grid","aria-label":f.viewInGrid||f.grid,className:`px-4 py-2 rounded-full text-sm font-semibold transition min-w-[96px] ${n==="grid"?"bg-white shadow text-indigo-600":"text-gray-700 hover:text-indigo-600"}`,children:f.grid})]})]})})}function Wx(t){const[e,n]=x.useState("Cargando...");return x.useEffect(()=>{if(!t){n("Sin servicio");return}(async()=>{if(t.service_name||t.service||t.serviceName){n(t.service_name||t.service||t.serviceName);return}try{const s=await Ym(t.service_id);n(s?s.name:"Servicio no encontrado")}catch(s){console.error("Error cargando servicio:",s),n(t.service_id)}})()},[t?.service_id]),e}const TP={[Le.REQUESTED]:{bg:"bg-yellow-50",border:"border-yellow-400",accent:"bg-yellow-500",text:"text-yellow-900"},[Le.CONFIRMED]:{bg:"bg-green-50",border:"border-green-500",accent:"bg-green-600",text:"text-green-900"},[Le.COMPLETED]:{bg:"bg-blue-50",border:"border-blue-500",accent:"bg-blue-600",text:"text-blue-900"},[Le.CANCELLED]:{bg:"bg-gray-100",border:"border-gray-400",accent:"bg-gray-500",text:"text-gray-800"},[Le.NO_SHOW]:{bg:"bg-orange-50",border:"border-orange-500",accent:"bg-orange-600",text:"text-orange-900"}};function vhe({appointment:t,professional:e,top:n,height:r,onSelect:s,timeLabel:a}){const l=TP[t.status]||TP[Le.CONFIRMED],u=Wx(t);return i.jsxs("button",{type:"button",onClick:()=>s(t),className:`absolute left-2 right-2 rounded-xl border-2 shadow-md text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 transition-all hover:shadow-lg hover:scale-[1.02] overflow-hidden cursor-pointer ${l.bg} ${l.border}`,style:{top:n,height:r,minHeight:"60px"},"aria-label":`${t.client_name} ${a}`,children:[i.jsx("span",{className:`absolute left-0 top-0 bottom-0 w-1.5 rounded-l-xl ${l.accent} shadow-sm`}),i.jsxs("div",{className:"px-3 py-2 h-full flex flex-col justify-between overflow-hidden",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-[13px] sm:text-sm font-bold text-gray-900 overflow-hidden break-words leading-tight",style:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:t.client_name}),i.jsx("p",{className:`text-[12px] sm:text-xs font-medium ${l.text} overflow-hidden break-words leading-snug`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:u||"Servicio"})]}),i.jsxs("div",{className:"flex items-center justify-between text-[11px] sm:text-xs text-gray-700 gap-2 min-w-0 leading-tight mt-1",children:[i.jsxs("span",{className:"font-semibold truncate flex items-center gap-1",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a]}),e&&i.jsxs("span",{className:"text-gray-500 truncate max-w-[50%] text-right flex items-center gap-1",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.name]})]})]})]})}function bhe({professionals:t,selectedProfessionalId:e}){return i.jsx("div",{className:"flex bg-gray-50 sticky top-0 z-10 border-b border-gray-200 shadow-sm",children:t.map(n=>i.jsxs("div",{className:`min-w-[220px] px-4 py-3 border-r border-gray-100 flex items-center gap-3 transition-colors ${e===n.id?"bg-indigo-50 border-indigo-200":"bg-white hover:bg-gray-50"}`,children:[i.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center font-bold text-sm shadow-sm transition-colors ${e===n.id?"bg-indigo-600 text-white":"bg-indigo-100 text-indigo-700"}`,children:n.name.slice(0,2).toUpperCase()}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("p",{className:`text-sm font-semibold truncate ${e===n.id?"text-indigo-900":"text-gray-900"}`,children:n.name}),n.specialties&&n.specialties.length>0&&i.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:n.specialties.join(", ")})]})]},n.id))})}function whe({timeSlots:t,slotHeight:e}){return i.jsx("div",{className:"sticky left-0 top-0 bg-gray-50 border-r border-gray-200 z-10 shadow-sm",children:t.map(n=>{const r=n.endsWith(":00");return i.jsx("div",{className:`flex items-start justify-end pr-3 border-b border-dashed border-gray-200 ${r?"text-sm font-semibold text-gray-700":"text-xs text-gray-500"}`,style:{height:e},"aria-hidden":!0,children:i.jsx("span",{className:"translate-y-[-6px]",children:n})},n)})})}const kP=t=>{const[e,n]=t.split(":").map(Number);return(e||0)*60+(n||0)};function _he({appointments:t,professionals:e,selectedProfessionalId:n,onSelectAppointment:r,timeSlots:s,slotHeight:a,dayStartMinutes:l,slotIntervalMinutes:u,labels:d,unavailableSlots:f={}}){const m=x.useMemo(()=>n==="all"?e:e.filter(_=>_.id===n),[e,n]),g=x.useMemo(()=>{const _={};return m.forEach(C=>{_[C.id]=t.filter(S=>S.professional_id===C.id)}),_},[t,m]),y=s.length*a,w=(_,C)=>{const S=Math.max(kP(_)-l,0),N=Math.max(kP(C)-l,0),k=Math.max(N-S,u),R=S/u*a,A=k/u*a;return{top:R,height:A}};return i.jsxs("div",{className:"border border-gray-200 rounded-2xl bg-white shadow-md overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-[80px,1fr] bg-gray-50",children:[i.jsx("div",{className:"bg-white border-r border-gray-200 px-3 py-3 text-xs font-semibold text-gray-700 sticky top-0 z-10 bg-gray-50",children:d.hours}),i.jsx("div",{className:"overflow-x-auto bg-gray-50",children:i.jsx("div",{className:"min-w-[640px]",children:i.jsx("div",{className:"relative z-10",children:i.jsx(bhe,{professionals:m,selectedProfessionalId:n==="all"?void 0:n})})})})]}),i.jsx("div",{className:"overflow-x-auto bg-white",children:i.jsx("div",{className:"min-w-[640px]",children:i.jsx("div",{className:"relative h-[70vh] max-h-[800px] overflow-y-auto",children:i.jsxs("div",{className:"grid grid-cols-[80px,1fr] relative",style:{minHeight:y},children:[i.jsx(whe,{timeSlots:s,slotHeight:a}),i.jsxs("div",{className:"relative bg-white",style:{minHeight:y},children:[i.jsx(Ehe,{timeSlots:s,slotHeight:a,totalHeight:y}),i.jsx("div",{className:"relative flex",style:{minHeight:y},children:m.map(_=>i.jsxs("div",{className:"relative min-w-[220px] border-r border-gray-100 last:border-r-0 bg-white",style:{minHeight:y},children:[(f[_.id]||[]).map(C=>{const{top:S,height:N}=w(C.start,C.end);return i.jsx(Che,{top:S,height:N,label:d.unavailable(`${C.start} - ${C.end}`)},`${C.start}-${C.end}`)}),(g[_.id]||[]).map(C=>{const{top:S,height:N}=w(C.start_time,C.end_time),k=`${C.start_time} - ${C.end_time}`;return i.jsx(vhe,{appointment:C,professional:_,top:S,height:N,onSelect:r,timeLabel:k},C.id)})]},_.id))})]})]})})})})]})}function Ehe({timeSlots:t,slotHeight:e,totalHeight:n}){return i.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{minHeight:n},children:t.map((r,s)=>i.jsx("div",{className:"absolute left-0 right-0 border-b border-dashed border-gray-200",style:{top:s*e,height:e,borderColor:s%2===0?"#e5e7eb":"#f3f4f6",borderWidth:s%2===0?"1px":"0.5px"}},r))})}function Che({top:t,height:e,label:n}){return i.jsx("div",{className:"absolute left-2 right-2 rounded-lg border border-gray-300 text-gray-700 text-xs px-3 py-2 flex items-center shadow-inner",style:{top:t,height:e,backgroundImage:"repeating-linear-gradient(45deg, #f3f4f6, #f3f4f6 12px, #e5e7eb 12px, #e5e7eb 24px)"},children:n})}const She=[Le.REQUESTED,Le.CONFIRMED,Le.COMPLETED,Le.CANCELLED,Le.NO_SHOW],Nhe=t=>t.replace(/[^0-9]/g,"");function K6({appointment:t,professional:e,labels:n,statusLabels:r,onStatusChange:s,onCancel:a,onClose:l,onViewRecord:u}){const d=Wx(t),f=`${yn(t.appointment_date,"dd MMM yyyy")}  ${t.start_time} - ${t.end_time}`,m=t.client_phone?`https://wa.me/${Nhe(t.client_phone)}?text=${encodeURIComponent(`Hola ${t.client_name}, hablo desde Pymerp acerca de tu cita.`)}`:void 0;return i.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm uppercase tracking-wide text-gray-500 font-semibold",children:n.client}),i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t.client_name}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d})]}),i.jsx("button",{type:"button",onClick:l,className:"text-gray-500 hover:text-gray-700 rounded-full p-2 focus-visible:ring-2 focus-visible:ring-indigo-500","aria-label":"Close",children:""})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx(Qu,{label:n.date,value:f}),i.jsx(Qu,{label:n.professional,value:e?.name||"-"}),i.jsx(Qu,{label:n.phone,value:t.client_phone||"-"}),i.jsx(Qu,{label:n.email,value:t.client_email||"-"}),i.jsx(Qu,{label:n.status,value:r[t.status]||t.status}),i.jsx(Qu,{label:n.timeRange,value:`${t.start_time} - ${t.end_time}`})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("label",{className:"text-sm font-semibold text-gray-800",children:n.changeStatus}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:She.map(g=>{const y=t.status===g,w={[Le.REQUESTED]:y?"bg-yellow-500 text-white border-yellow-600 shadow-lg shadow-yellow-200 ring-2 ring-yellow-300":"bg-yellow-50 text-yellow-700 border-yellow-300 hover:bg-yellow-100 hover:border-yellow-400",[Le.CONFIRMED]:y?"bg-green-500 text-white border-green-600 shadow-lg shadow-green-200 ring-2 ring-green-300":"bg-green-50 text-green-700 border-green-300 hover:bg-green-100 hover:border-green-400",[Le.CANCELLED]:y?"bg-red-500 text-white border-red-600 shadow-lg shadow-red-200 ring-2 ring-red-300":"bg-red-50 text-red-700 border-red-300 hover:bg-red-100 hover:border-red-400",[Le.COMPLETED]:y?"bg-blue-500 text-white border-blue-600 shadow-lg shadow-blue-200 ring-2 ring-blue-300":"bg-blue-50 text-blue-700 border-blue-300 hover:bg-blue-100 hover:border-blue-400",[Le.NO_SHOW]:y?"bg-gray-500 text-white border-gray-600 shadow-lg shadow-gray-200 ring-2 ring-gray-300":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100 hover:border-gray-400"};return i.jsx("button",{type:"button",onClick:()=>s(g),className:`px-4 py-3 rounded-lg border-2 text-sm font-semibold min-h-[44px] transition-all duration-200 ${w[g]} ${y?"scale-105 font-bold":"scale-100"}`,"aria-pressed":y,children:r[g]||g},g)})}),i.jsx("button",{type:"button",onClick:a,className:"px-4 py-3 rounded-xl border border-red-200 text-red-700 bg-red-50 hover:bg-red-100 font-semibold min-h-[44px]",children:n.cancel}),i.jsx("button",{type:"button",onClick:u,disabled:!t.client_name,className:"px-4 py-3 rounded-xl border border-gray-200 text-gray-800 bg-gray-50 hover:bg-gray-100 font-semibold min-h-[44px] disabled:opacity-50 disabled:cursor-not-allowed",title:t.client_name?"":"Nombre requerido para ver la ficha",children:n.viewRecord}),m&&i.jsx("a",{href:m,target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl border border-emerald-200 text-emerald-700 bg-emerald-50 hover:bg-emerald-100 font-semibold text-center min-h-[44px]",children:n.whatsapp})]})]})}function Qu({label:t,value:e}){return i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-100",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 font-semibold",children:t}),i.jsx("p",{className:"text-sm text-gray-900 mt-1 truncate",children:e})]})}function jhe({isOpen:t,appointment:e,professional:n,onClose:r,onStatusChange:s,onCancel:a,onViewRecord:l,labels:u,statusLabels:d}){const f=x.useRef(null),m=x.useRef(null);return x.useEffect(()=>(t?(m.current=document.activeElement,setTimeout(()=>f.current?.focus(),80),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",m.current?.focus()),()=>{document.body.style.overflow="unset"}),[t]),x.useEffect(()=>{const g=y=>{y.key==="Escape"&&t&&r()};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[t,r]),i.jsx(Ta,{children:t&&e&&i.jsx(_e.div,{className:"fixed inset-0 bg-black/40 z-50 flex items-end",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},role:"presentation",onClick:r,children:i.jsxs(_e.div,{ref:f,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:280},className:"bg-white w-full rounded-t-3xl shadow-2xl max-h-[85vh] overflow-y-auto focus:outline-none",role:"dialog","aria-modal":"true",tabIndex:-1,"aria-label":u.client,onClick:g=>g.stopPropagation(),children:[i.jsx("div",{className:"w-full h-1.5 bg-gray-200 rounded-full mx-auto my-3 max-w-[120px]"}),i.jsx(K6,{appointment:e,professional:n,labels:u,statusLabels:d,onStatusChange:s,onCancel:a,onClose:r,onViewRecord:l})]})})})}function The({isOpen:t,appointment:e,professional:n,onClose:r,onStatusChange:s,onCancel:a,onViewRecord:l,labels:u,statusLabels:d}){return e?i.jsx(tu,{isOpen:t,onClose:r,className:"max-w-3xl w-full",ariaLabel:u.client,children:i.jsx(K6,{appointment:e,professional:n,labels:u,statusLabels:d,onStatusChange:s,onCancel:a,onClose:r,onViewRecord:l})}):null}const khe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},Dhe=(t,e,n)=>{let r;const s=khe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},Ahe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Rhe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Phe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mhe={date:Cd({formats:Ahe,defaultWidth:"full"}),time:Cd({formats:Rhe,defaultWidth:"full"}),dateTime:Cd({formats:Phe,defaultWidth:"full"})},Lhe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Ohe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Ihe=(t,e,n,r)=>e.getHours()!==1?Ohe[t]:Lhe[t],Vhe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},Uhe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Fhe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Bhe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},zhe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},Hhe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},$he=(t,e)=>Number(t)+"",qhe={ordinalNumber:$he,era:Ja({values:Vhe,defaultWidth:"wide"}),quarter:Ja({values:Uhe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Ja({values:Fhe,defaultWidth:"wide"}),day:Ja({values:Bhe,defaultWidth:"wide"}),dayPeriod:Ja({values:zhe,defaultWidth:"wide",formattingValues:Hhe,defaultFormattingWidth:"wide"})},Yhe=/^(\d+)()?/i,Whe=/\d+/i,Ghe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},Khe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},Qhe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Xhe={any:[/1/i,/2/i,/3/i,/4/i]},Zhe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Jhe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},efe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},tfe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},nfe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},rfe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},sfe={ordinalNumber:o6({matchPattern:Yhe,parsePattern:Whe,valueCallback:function(t){return parseInt(t,10)}}),era:ei({matchPatterns:Ghe,defaultMatchWidth:"wide",parsePatterns:Khe,defaultParseWidth:"any"}),quarter:ei({matchPatterns:Qhe,defaultMatchWidth:"wide",parsePatterns:Xhe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ei({matchPatterns:Zhe,defaultMatchWidth:"wide",parsePatterns:Jhe,defaultParseWidth:"any"}),day:ei({matchPatterns:efe,defaultMatchWidth:"wide",parsePatterns:tfe,defaultParseWidth:"any"}),dayPeriod:ei({matchPatterns:nfe,defaultMatchWidth:"any",parsePatterns:rfe,defaultParseWidth:"any"})},Sa={code:"es",formatDistance:Dhe,formatLong:Mhe,formatRelative:Ihe,localize:qhe,match:sfe,options:{weekStartsOn:1,firstWeekContainsDate:1}};B6("es",Sa);const ns={current:"week"};function afe({appointments:t,professional:e,onSelectAppointment:n,emptyLabel:r,selectedDate:s=new Date,onDateRangeChange:a}){const[l,u]=x.useState(()=>(console.log("ScheduleList: Initializing dateRange from persistent ref:",ns.current),ns.current));x.useEffect(()=>{ns.current!==l&&(console.log("dateRange changed to:",l,"ref updated from",ns.current),ns.current=l)},[l]),x.useEffect(()=>{console.log("ScheduleList: Component mounted/remounted, dateRange:",l,"ref:",ns.current),ns.current!==l&&(console.log("ScheduleList: Restoring dateRange from ref:",ns.current),u(ns.current))},[]),x.useEffect(()=>{l==="week"&&ns.current!=="week"&&(console.log("ScheduleList: Detected unexpected reset to week, restoring from ref:",ns.current),u(ns.current))},[l]);const[d,f]=x.useState(()=>yn(Ts(s,{weekStartsOn:1}),"yyyy-MM-dd")),[m,g]=x.useState(()=>yn(fd(s,{weekStartsOn:1}),"yyyy-MM-dd")),[y,w]=x.useState([]),[_,C]=x.useState(null),[S,N]=x.useState(!1),[k,R]=x.useState(null),[A,L]=x.useState(null),F=x.useRef(a);x.useEffect(()=>{F.current=a},[a]),x.useEffect(()=>{if(l==="week"){const X=Ts(s,{weekStartsOn:1}),se=fd(s,{weekStartsOn:1});f(yn(X,"yyyy-MM-dd")),g(yn(se,"yyyy-MM-dd"))}},[s,l]);const P=x.useMemo(()=>{const X=new Date,se=new Date(X.getFullYear(),X.getMonth(),X.getDate());C(null);try{switch(l){case"week":const H=Ts(se,{weekStartsOn:1}),Z=fd(se,{weekStartsOn:1});return Z.setHours(23,59,59,999),{start:H,end:Z};case"month":const te=new Date(se.getFullYear(),se.getMonth(),1);te.setHours(0,0,0,0);const J=new Date(se.getFullYear(),se.getMonth()+1,0);return J.setHours(23,59,59,999),{start:te,end:J};case"custom":const ne=Af(d),ae=Af(m);return!vc(ne)||!vc(ae)?(C("Fechas invlidas"),{start:se,end:se}):ne>ae?(C("La fecha de inicio debe ser anterior a la fecha de fin"),{start:se,end:se}):(ne.setHours(0,0,0,0),ae.setHours(23,59,59,999),{start:ne,end:ae});default:return{start:se,end:se}}}catch{return C("Error al procesar las fechas"),{start:se,end:se}}},[l,d,m]),O=x.useRef(null),T=x.useRef(!1);x.useEffect(()=>{if(T.current){T.current=!1;return}if(F.current&&!_){const X={start:P.start,end:P.end};(!O.current||O.current.start.getTime()!==X.start.getTime()||O.current.end.getTime()!==X.end.getTime())&&(O.current=X,F.current(X.start,X.end))}},[P.start,P.end,_]);const I=x.useMemo(()=>{if(_)return[];let X=t;e&&(X=t.filter(H=>H.professional_id===e.id));let se=X.filter(H=>{try{let Z;if(H.appointment_date instanceof Date)Z=new Date(H.appointment_date);else if(typeof H.appointment_date=="string")Z=new Date(H.appointment_date);else if(H.appointment_date&&typeof H.appointment_date=="object"&&"toDate"in H.appointment_date)Z=H.appointment_date.toDate();else return!1;if(!vc(Z))return!1;const te=Z.getFullYear(),J=Z.getMonth(),ne=Z.getDate(),ae=new Date(te,J,ne,0,0,0,0),me=new Date(P.start),we=me.getFullYear(),Ne=me.getMonth(),Se=me.getDate(),Ue=new Date(we,Ne,Se,0,0,0,0),jt=new Date(P.end),Qe=jt.getFullYear(),on=jt.getMonth(),Ee=jt.getDate(),ut=new Date(Qe,on,Ee,23,59,59,999);return ae.getTime()>=Ue.getTime()&&ae.getTime()<=ut.getTime()}catch(Z){return console.error("Error al filtrar cita por fecha:",Z,H),!1}});return y.length>0&&(se=se.filter(H=>y.includes(H.status))),se.sort((H,Z)=>{const te=new Date(H.appointment_date).getTime(),J=new Date(Z.appointment_date).getTime();return te!==J?te-J:(H.start_time||"").localeCompare(Z.start_time||"")})},[t,e,P,y,_]),V=x.useCallback(X=>{w(se=>se.includes(X)?se.filter(H=>H!==X):[...se,X])},[]),$=x.useCallback(X=>{console.log("handleDateRangeChange called with:",X,"current dateRange:",ns.current),T.current=!0,u(H=>(console.log("setDateRange: prevRange =",H,"newRange =",X),ns.current=X,X)),C(null);const se=new Date;switch(se.setHours(0,0,0,0),X){case"week":const H=Ts(se,{weekStartsOn:1}),Z=fd(se,{weekStartsOn:1});Z.setHours(23,59,59,999),f(yn(H,"yyyy-MM-dd")),g(yn(Z,"yyyy-MM-dd")),F.current&&(O.current={start:H,end:Z},F.current(H,Z));break;case"month":const te=new Date(se.getFullYear(),se.getMonth(),1);te.setHours(0,0,0,0);const J=new Date(se.getFullYear(),se.getMonth()+1,0);J.setHours(23,59,59,999),f(yn(te,"yyyy-MM-dd")),g(yn(J,"yyyy-MM-dd")),F.current&&(O.current={start:te,end:J},F.current(te,J));break;case"custom":const ne=Af(d),ae=Af(m);R(vc(ne)?ne:se),L(vc(ae)?ae:se),N(!0);break}},[d,m]),U=x.useCallback(()=>{if(!k||!A){C("Por favor selecciona ambas fechas");return}if(k>A){C("La fecha de inicio debe ser anterior a la fecha de fin");return}f(yn(k,"yyyy-MM-dd")),g(yn(A,"yyyy-MM-dd")),C(null),N(!1),u("custom"),F.current&&(k.setHours(0,0,0,0),A.setHours(23,59,59,999),F.current(k,A))},[k,A]),G=x.useCallback(()=>{N(!1),C(null)},[]),W=[{value:Le.REQUESTED,label:"Solicitada",color:"bg-yellow-100 text-yellow-700 border-yellow-300"},{value:Le.CONFIRMED,label:"Confirmada",color:"bg-green-100 text-green-700 border-green-300"},{value:Le.COMPLETED,label:"Completada",color:"bg-blue-100 text-blue-700 border-blue-300"},{value:Le.CANCELLED,label:"Cancelada",color:"bg-gray-100 text-gray-700 border-gray-300"},{value:Le.NO_SHOW,label:"No asisti",color:"bg-red-100 text-red-700 border-red-300"}],z=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Filtros"}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("span",{className:"font-semibold text-indigo-600",children:I.length})," cita",I.length!==1?"s":""," encontrada",I.length!==1?"s":""]})]}),i.jsx(ife,{dateRange:l,onDateRangeChange:X=>{console.log("FiltersSection onDateRangeChange called with:",X,"current dateRange:",l),$(X)},customStartDate:d,customEndDate:m,selectedStatuses:y,onToggleStatus:V,onClearStatuses:()=>w([]),statusOptions:W,dateError:_})]}),i.jsx(tu,{isOpen:S,onClose:G,ariaLabel:"Seleccionar rango de fechas personalizado",className:"max-w-md",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Seleccionar Rango de Fechas"}),i.jsx("button",{onClick:G,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Cerrar",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de inicio"}),i.jsx(F0,{selected:k,onChange:X=>R(X),dateFormat:"dd/MM/yyyy",locale:"es",className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors dark:bg-gray-700 dark:text-white",maxDate:A||void 0,placeholderText:"dd/mm/aaaa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de fin"}),i.jsx(F0,{selected:A,onChange:X=>L(X),dateFormat:"dd/MM/yyyy",locale:"es",className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors dark:bg-gray-700 dark:text-white",minDate:k||void 0,placeholderText:"dd/mm/aaaa"})]}),_&&i.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400 font-medium flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),_]})}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{onClick:G,className:"flex-1 px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm font-semibold text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:U,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white rounded-lg text-sm font-semibold hover:bg-indigo-700 transition-colors shadow-md",children:"Aplicar"})]})]})]})})]}),q={REQUESTED:"bg-yellow-50 text-yellow-700 border-yellow-200",CONFIRMED:"bg-green-50 text-green-700 border-green-200",COMPLETED:"bg-blue-50 text-blue-700 border-blue-200",CANCELLED:"bg-gray-100 text-gray-700 border-gray-200",NO_SHOW:"bg-red-50 text-red-700 border-red-200"},K=I.length===0;return i.jsxs("div",{className:"space-y-4",children:[z(),I.length>0?i.jsx("div",{className:"space-y-3",children:I.map(X=>{const se=X.status||"REQUESTED";return i.jsx(ofe,{appointment:X,professional:e,status:se,statusColors:q,onSelectAppointment:n},X.id)})}):K?i.jsx("div",{className:"bg-white border border-dashed border-gray-300 rounded-xl p-8 text-center",children:t.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("p",{className:"text-lg font-semibold text-gray-900 mb-1",children:"No hay citas en el rango seleccionado"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Intenta ajustar los filtros de fecha o estado"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("p",{className:"text-lg font-semibold text-gray-900 mb-1",children:r})]})}):null]})}function ife({dateRange:t,onDateRangeChange:e,customStartDate:n,customEndDate:r,selectedStatuses:s,onToggleStatus:a,onClearStatuses:l,statusOptions:u,dateError:d}){const f=m=>{try{const g=Af(m);if(vc(g))return yn(g,"dd/MM/yyyy",{locale:Sa})}catch{}return m};return console.log("FiltersSection render - dateRange:",t),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-800 mb-3",children:"Rango de fechas"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{console.log("Week button clicked"),e("week")},className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 ${t==="week"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 ring-2 ring-indigo-300 ring-offset-2 scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300 hover:border-indigo-300 hover:scale-105 active:scale-95"}`,"aria-pressed":t==="week","aria-label":"Ver citas de esta semana",children:i.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Semana"]})}),i.jsx("button",{type:"button",onClick:()=>{console.log("Month button clicked, current dateRange:",t),e("month")},className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 ${t==="month"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 ring-2 ring-indigo-300 ring-offset-2 scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300 hover:border-indigo-300 hover:scale-105 active:scale-95"}`,"aria-pressed":t==="month","aria-label":"Ver citas de este mes",children:i.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Mes"]})}),i.jsx("button",{type:"button",onClick:()=>e("custom"),className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 ${t==="custom"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 ring-2 ring-indigo-300 ring-offset-2 scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300 hover:border-indigo-300 hover:scale-105 active:scale-95"}`,"aria-pressed":t==="custom","aria-label":"Seleccionar rango personalizado",children:i.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Personalizado"]})})]}),t==="custom"&&i.jsx("div",{className:"mt-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg",children:i.jsxs("p",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:[i.jsx("span",{className:"font-semibold",children:"Rango seleccionado:"})," ",f(n)," - ",f(r)]})}),d&&i.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-700 dark:text-red-400 font-medium",children:d})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("label",{className:"block text-sm font-bold text-gray-800",children:"Filtrar por estado"}),s.length>0&&i.jsxs("button",{type:"button",onClick:l,className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 underline",children:["Limpiar (",s.length,")"]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(m=>{const g=s.includes(m.value);return i.jsx("button",{type:"button",onClick:()=>a(m.value),className:`px-4 py-2 rounded-full text-xs font-semibold border-2 transition-all duration-200 ${g?`${m.color} ring-2 ring-offset-2 ring-indigo-300 shadow-md scale-105`:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400"}`,children:m.label},m.value)})})]})]})}function ofe({appointment:t,professional:e,status:n,statusColors:r,onSelectAppointment:s}){const a=Wx(t),l=new Date(t.appointment_date),u=l.toDateString()===new Date().toDateString(),d=l<new Date&&!u,f={REQUESTED:"Solicitada",CONFIRMED:"Confirmada",COMPLETED:"Completada",CANCELLED:"Cancelada",NO_SHOW:"No asisti"};return i.jsx("button",{type:"button",onClick:()=>s(t),className:"w-full text-left bg-white rounded-xl border-2 border-gray-200 shadow-sm hover:shadow-lg hover:border-indigo-400 transition-all duration-200 focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 group",children:i.jsxs("div",{className:"px-4 py-4 flex flex-col sm:flex-row sm:items-start gap-4",children:[i.jsxs("div",{className:"flex-shrink-0 flex items-start gap-3",children:[i.jsxs("div",{className:`text-xs sm:text-sm font-bold rounded-lg px-3 py-2.5 min-w-[100px] text-center border-2 ${u?"text-indigo-700 bg-indigo-50 border-indigo-300":d?"text-gray-600 bg-gray-50 border-gray-300":"text-indigo-700 bg-indigo-50 border-indigo-200"}`,children:[i.jsx("div",{className:"font-semibold",children:t.start_time}),i.jsxs("div",{className:"text-xs font-normal opacity-75",children:["- ",t.end_time]})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded-md ${u?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600"}`,children:yn(l,"EEE",{locale:Sa})}),i.jsx("div",{className:"text-xs text-gray-500 font-medium",children:yn(l,"d MMM",{locale:Sa})})]})]}),i.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 truncate group-hover:text-indigo-600 transition-colors",children:t.client_name}),t.client_rut&&i.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["RUT: ",t.client_rut]})]}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border flex-shrink-0 ${r[n]||r.REQUESTED}`,children:f[n]||n})]}),i.jsxs("div",{className:"space-y-1.5",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("span",{className:"truncate font-medium",children:a})]}),e&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),i.jsx("span",{className:"truncate",children:e.name})]}),t.client_phone&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[i.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{children:t.client_phone})]}),t.notes&&i.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:i.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:t.notes})})]})]}),i.jsx("div",{className:"flex-shrink-0 self-center opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})}const $_={[Le.REQUESTED]:"bg-yellow-50 text-yellow-700 border-yellow-200",[Le.CONFIRMED]:"bg-green-50 text-green-700 border-green-200",[Le.CANCELLED]:"bg-red-50 text-red-700 border-red-200",[Le.COMPLETED]:"bg-blue-50 text-blue-700 border-blue-200",[Le.NO_SHOW]:"bg-gray-50 text-gray-700 border-gray-200"},Q6={[Le.REQUESTED]:"Solicitada",[Le.CONFIRMED]:"Confirmada",[Le.CANCELLED]:"Cancelada",[Le.COMPLETED]:"Completada",[Le.NO_SHOW]:"No asisti"};function lfe({isOpen:t,appointment:e,companyId:n,onClose:r}){const[s,a]=x.useState([]),[l,u]=x.useState(!1),[d,f]=x.useState(null);return x.useEffect(()=>{if(!t||!e||!e.client_name){a([]);return}(async()=>{u(!0),f(null);try{const g=await cie(n,e.client_name,e.client_rut);a(g)}catch(g){console.error("Error loading patient history:",g),f("Error al cargar el historial del paciente")}finally{u(!1)}})()},[t,e,n]),e?i.jsxs(tu,{isOpen:t,onClose:r,className:"max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",ariaLabel:"Ficha del paciente",children:[i.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-b border-gray-200 bg-white rounded-t-lg",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ficha del Paciente"}),i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsx("p",{className:"text-lg font-semibold text-gray-800",children:e.client_name}),i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.client_rut&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"font-medium",children:"RUT:"}),e.client_rut]}),e.client_phone&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"font-medium",children:"Telfono:"}),e.client_phone]}),e.client_email&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"font-medium",children:"Email:"}),e.client_email]})]})]})]}),i.jsx("button",{type:"button",onClick:r,className:"text-gray-500 hover:text-gray-700 rounded-full p-2 focus-visible:ring-2 focus-visible:ring-indigo-500","aria-label":"Cerrar",children:""})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 bg-gray-50",children:l?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(zn,{size:"md"})}):d?i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:d}):s.length===0?i.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center text-gray-600",children:[i.jsx("p",{className:"text-lg font-semibold mb-2",children:"No hay historial de citas"}),i.jsx("p",{className:"text-sm",children:"Esta es la primera cita registrada para este paciente."})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Historial Completo de Citas (",s.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Todas las citas registradas para este cliente, incluyendo todos los estados"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(Q6).map(([m,g])=>{const y=s.filter(w=>w.status===m).length;return y===0?null:i.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${$_[m]||"bg-gray-50 text-gray-700 border-gray-200"}`,children:[g,": ",y]},m)})})]}),s.map(m=>{const g=m.id===e.id;return i.jsx(cfe,{appointment:m,isCurrent:g},m.id)})]})})]}):null}function cfe({appointment:t,isCurrent:e}){const n=Wx(t);return i.jsxs("div",{className:`bg-white rounded-lg border-2 p-4 transition-all ${e?"border-indigo-500 shadow-lg ring-2 ring-indigo-200":"border-gray-200 hover:border-gray-300"}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:"text-base font-semibold text-gray-900",children:yn(t.appointment_date,"EEEE, d 'de' MMMM 'de' yyyy",{locale:Sa})}),e&&i.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-full",children:"Cita actual"})]}),i.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[i.jsx("span",{className:"font-medium",children:"Horario:"})," ",t.start_time," - ",t.end_time]}),i.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[i.jsx("span",{className:"font-medium",children:"Servicio:"})," ",n]})]}),i.jsx("div",{className:"flex flex-col items-end gap-2",children:i.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${$_[t.status]||$_[Le.REQUESTED]}`,children:Q6[t.status]||t.status})})]}),t.notes&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:i.jsx("span",{className:"font-medium",children:"Notas:"})}),i.jsx("p",{className:"text-sm text-gray-700",children:t.notes})]})]})}const DP=9,ufe=20,AP=30,dfe=56,hfe=t=>(t||"").replace(/[^0-9]/g,""),ES=t=>{const e=new Date(t.appointment_date),[n=9,r=0]=(t.start_time||"09:00").split(":").map(d=>Number(d)),[s=n,a=r]=(t.end_time||t.start_time||"09:30").split(":").map(d=>Number(d)),l=new Date(e);l.setHours(n,r,0,0);const u=new Date(e);return u.setHours(s,a,0,0),{start:l,end:u}},RP=t=>t.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",ffe=async t=>{const{start:e,end:n}=ES(t),r=`Cita con ${t.client_name}`,a=`Servicio: ${await d6(t)}
Cliente: ${t.client_name}
Telfono: ${t.client_phone||""}`;return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(r)}&dates=${RP(e)}/${RP(n)}&details=${encodeURIComponent(a)}`},mfe=async(t,e)=>{if(!t.client_phone)return null;const n=hfe(t.client_phone),{start:r}=ES(t),s=await d6(t),a=r.toLocaleString("es-CL",{weekday:"long",day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}),u=`${e==="confirm"?"Tu cita ha sido confirmada":"Tu cita ha sido cancelada"} para ${s} el ${a}.`;return`https://wa.me/${n}?text=${encodeURIComponent(`Hola ${t.client_name}, ${u}`)}`};function pfe(t,e,n){const r=[],s=t*60,a=e*60;for(let l=s;l<=a;l+=n){const u=Math.floor(l/60),d=l%60;r.push(`${String(u).padStart(2,"0")}:${String(d).padStart(2,"0")}`)}return r}const gfe=()=>{const[t,e]=x.useState(!1),[n,r]=x.useState(!1);return x.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u")return;const a=window.matchMedia("(max-width: 767px)"),l=window.matchMedia("(min-width: 1024px)"),u=()=>{e(a.matches),r(l.matches)};return u(),a.addEventListener("change",u),l.addEventListener("change",u),()=>{a.removeEventListener("change",u),l.removeEventListener("change",u)}},[]),{isMobile:t,isTablet:!t&&!n,isDesktop:n}};function yfe(){const{t}=Zc(["schedule","appointments"]),e=Ze(),{firestoreUser:n}=an(),{handleError:r,handleAsyncError:s}=St(),{trackEvent:a}=eu(),{isMobile:l,isTablet:u,isDesktop:d}=gfe(),[f,m]=x.useState([]),[g,y]=x.useState([]),[w,_]=x.useState("all"),[C,S]=x.useState(new Date),[N,k]=x.useState(()=>typeof window<"u"?window.matchMedia("(max-width: 767px)").matches?"list":"grid":"list"),[R,A]=x.useState(!1),[L,F]=x.useState(!0),[P,O]=x.useState(!1),[T,I]=x.useState(null),[V,$]=x.useState(!1),[U,G]=x.useState(null),[W,z]=x.useState(null),[q,K]=x.useState(()=>{const Ee=Ts(new Date,{weekStartsOn:1});return Ee.setHours(0,0,0,0),Ee}),[X,se]=x.useState(()=>{const Ee=fd(new Date,{weekStartsOn:1});return Ee.setHours(23,59,59,999),Ee}),H=x.useMemo(()=>{const Ee=new Date(C);return Ee.setHours(0,0,0,0),Ee},[C]),Z=x.useMemo(()=>{const Ee=new Date(C);return Ee.setHours(23,59,59,999),Ee},[C]),te=x.useMemo(()=>pfe(DP,ufe,AP),[]);x.useEffect(()=>{a("view_schedule",{date:H.toISOString()})},[H,a]),x.useEffect(()=>{R?(w===""||!w)&&(N==="grid"||d||u?_("all"):l&&N==="list"&&g.length>0&&_(g[0]?.id||"all")):(d||u?(k("grid"),_(Ee=>Ee===""?"all":Ee)):l&&(k("list"),_(Ee=>Ee===""?g[0]?.id||"all":Ee)),A(!0))},[d,u,l,N,g,R,w]),x.useEffect(()=>{if(n?.company_id)try{const Ee=J5(n.company_id,ut=>{y(ut),ut.length>0&&_(Rt=>l&&N==="grid"?!Rt||Rt===""?"all":Rt:l?Rt||ut[0].id:!Rt||Rt===""?"all":Rt)});return()=>Ee()}catch(Ee){r(Ee)}},[n?.company_id,l,N,r]),x.useEffect(()=>{!n?.id||!n?.company_id||(async()=>{try{const Ee=await lS(n.id,n.company_id);if(!Ee){G(null),z(n.email||null);return}G(Ee.email_notifications_enabled??!1),z(Ee.notification_email||n.email||null)}catch(Ee){r(Ee)}})()},[n?.id,n?.company_id,n?.email,r]),x.useEffect(()=>{if(!n?.company_id||l&&N==="list"&&!w)return;F(!0);const Ee=w!=="all"?{professionalId:w}:void 0,ut=N==="list"?q:H,Rt=N==="list"?X:Z,cr=Z5(n.company_id,ut,Rt,_t=>{m(_t),F(!1)},Ee);return()=>cr()},[n?.company_id,H,Z,q,X,w,l,N]);const J=x.useCallback(Ee=>{I(Ee),O(!0),a("open_appointment_details",{appointment_id:Ee.id,professional_id:Ee.professional_id})},[a]),ne=x.useCallback((Ee,ut)=>{K(Ee),se(ut)},[]),ae=x.useMemo(()=>[...w==="all"?f:f.filter(ut=>ut.professional_id===w)].sort((ut,Rt)=>ut.start_time.localeCompare(Rt.start_time)),[f,w]),me=g.find(Ee=>Ee.id===w),we=x.useMemo(()=>{const Ee={};return g.forEach((ut,Rt)=>{Ee[ut.id]=Rt%2===0?[{start:"13:00",end:"14:00"}]:[]}),Ee},[g]),Ne={[Le.REQUESTED]:t("appointments:status.requested"),[Le.CONFIRMED]:t("appointments:status.confirmed"),[Le.CANCELLED]:t("appointments:status.cancelled"),[Le.COMPLETED]:t("appointments:status.completed"),[Le.NO_SHOW]:t("appointments:status.noShow")},Se=x.useCallback(async(Ee,ut)=>{const{start:Rt}=ES(Ee),cr=ut!=="complete"?await mfe(Ee,ut):null,_t=ut==="confirm"?await ffe(Ee):null,en={confirm:" Cita confirmada",cancel:" Cita cancelada",complete:" Cita completada"},nr={confirm:"",cancel:"",complete:""},us={confirm:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200"},cancel:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},complete:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"}},Wr=en[ut],_n=`${Ee.client_name}  ${Rt.toLocaleString("es-CL",{weekday:"long",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}`,ur=us[ut];ue.custom(ds=>i.jsxs("div",{className:`max-w-md w-full ${ur.bg} border ${ur.border} shadow-xl rounded-xl p-4 space-y-3 ${ds.visible?"animate-enter":"animate-leave"}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-2xl",children:nr[ut]}),i.jsxs("div",{children:[i.jsx("p",{className:`text-sm ${ur.text} font-semibold uppercase tracking-wide`,children:Wr}),i.jsx("p",{className:`text-base font-semibold ${ur.text} mt-1`,children:_n})]})]}),i.jsx("button",{type:"button",onClick:()=>ue.dismiss(ds.id),className:`${ur.text} hover:opacity-70 transition-opacity`,"aria-label":"Cerrar",children:""})]}),(cr||_t)&&i.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[cr&&i.jsx("a",{href:cr,target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg text-sm font-semibold hover:bg-emerald-100 transition-colors",children:"Enviar WhatsApp"}),_t&&i.jsx("a",{href:_t,target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-indigo-50 text-indigo-700 border border-indigo-200 rounded-lg text-sm font-semibold hover:bg-indigo-100 transition-colors",children:"Agregar a calendario"})]})]}),{duration:6e3})},[]),Ue=x.useCallback(async Ee=>{if(!T)return;const ut=T;await s(async()=>{Ee===Le.CONFIRMED?(await X5(T.id),Se(ut,"confirm")):Ee===Le.CANCELLED?(await Q5(T.id),Se(ut,"cancel")):Ee===Le.COMPLETED?(await E0(T.id,{status:Ee}),Se(ut,"complete")):await E0(T.id,{status:Ee}),a("change_appointment_status",{appointment_id:T.id,status:Ee})})},[T,s,a,Se]),jt=x.useCallback(async()=>{T&&confirm("Ests seguro de cancelar esta cita? Se enviar una notificacin al cliente.")&&await Ue(Le.CANCELLED)},[T,Ue]),Qe=N==="grid",on=N==="list";return n?.company_id?i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-10 relative",children:[i.jsx(t6,{}),i.jsx(xhe,{date:C,onDateChange:S,mode:N,onModeChange:k,professionals:g,selectedProfessionalId:w,onProfessionalChange:_,isMobile:l,showGridToggle:!0,labels:{date:t("schedule:toolbar.date"),professional:t("schedule:toolbar.professional"),allProfessionals:t("schedule:toolbar.allProfessionals"),mode:t("schedule:toolbar.mode"),list:t("schedule:toolbar.list"),grid:t("schedule:toolbar.grid"),viewInGrid:t("schedule:toolbar.viewInGrid")}}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 space-y-6",children:[i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"flex-shrink-0 inline-flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 hover:text-gray-900 transition-colors focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2","aria-label":"Volver al dashboard",title:"Volver al dashboard",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:t("schedule:title")}),i.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:t("schedule:subtitle")})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm",children:[i.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full bg-yellow-50 text-yellow-700 border border-yellow-200 font-medium",children:t("appointments:status.requested")}),i.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full bg-green-50 text-green-700 border border-green-200 font-medium",children:t("appointments:status.confirmed")}),i.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full bg-blue-50 text-blue-700 border border-blue-200 font-medium",children:t("appointments:status.completed")}),i.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full bg-gray-100 text-gray-700 border border-gray-200 font-medium",children:t("appointments:status.cancelled")})]})]})}),U===!1&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-900 rounded-xl p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-semibold",children:"Activa las notificaciones por correo"}),i.jsxs("p",{className:"text-sm",children:["El dueo de la URL debe activar las notificaciones en"," ",i.jsx("span",{className:"font-semibold",children:"https://www.pymerp.cl/dashboard/settings/notifications"})," ","para recibir los correos de cita solicitada/confirmada/cancelada."]}),W&&i.jsxs("p",{className:"text-xs text-amber-800",children:["Email configurado: ",W]})]}),i.jsx("button",{type:"button",onClick:()=>e("/dashboard/settings/notifications"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700",children:"Ir a notificaciones"})]}),L&&i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(zn,{size:"lg"})}),!L&&i.jsxs(i.Fragment,{children:[on&&i.jsx(afe,{appointments:f,professional:me,onSelectAppointment:J,emptyLabel:t("schedule:empty.title"),selectedDate:C,onDateRangeChange:ne},"schedule-list"),Qe&&i.jsxs(i.Fragment,{children:[ae.length===0&&i.jsxs("div",{className:"bg-white border border-dashed border-gray-300 rounded-2xl p-6 sm:p-8 text-center space-y-3 shadow-sm",children:[i.jsx("div",{className:"text-4xl mb-2",children:""}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t("schedule:empty.title")}),i.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-md mx-auto",children:t("schedule:empty.description")}),i.jsxs("button",{type:"button",className:"inline-flex justify-center items-center gap-2 px-4 py-3 rounded-xl bg-indigo-600 text-white font-semibold shadow-md hover:bg-indigo-700 hover:shadow-lg focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-indigo-500 min-h-[44px] transition-all",onClick:()=>e("/dashboard/appointments/new"),children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t("schedule:empty.cta")]})]}),ae.length>0&&i.jsx(_he,{appointments:f,professionals:g,selectedProfessionalId:w,onSelectAppointment:J,timeSlots:te,slotHeight:dfe,dayStartMinutes:DP*60,slotIntervalMinutes:AP,unavailableSlots:we,labels:{hours:t("schedule:labels.hours"),unavailable:Ee=>t("schedule:labels.unavailable",{range:Ee})}})]})]})]}),i.jsx(jhe,{isOpen:P&&l,appointment:T,professional:T?g.find(Ee=>Ee.id===T.professional_id):void 0,onClose:()=>O(!1),onStatusChange:Ue,onCancel:jt,onViewRecord:()=>{O(!1),$(!0)},labels:{client:t("schedule:details.client"),service:t("schedule:details.service"),date:t("schedule:details.date"),professional:t("schedule:details.professional"),phone:t("schedule:details.phone"),email:t("schedule:details.email"),status:t("schedule:details.status"),changeStatus:t("schedule:details.changeStatus"),cancel:t("schedule:details.cancel"),viewRecord:t("schedule:details.viewRecord"),whatsapp:t("schedule:details.whatsapp"),timeRange:t("schedule:details.timeRange")},statusLabels:Ne}),i.jsx(The,{isOpen:P&&!l,appointment:T,professional:T?g.find(Ee=>Ee.id===T.professional_id):void 0,onClose:()=>O(!1),onStatusChange:Ue,onCancel:jt,onViewRecord:()=>{O(!1),$(!0)},labels:{client:t("schedule:details.client"),service:t("schedule:details.service"),date:t("schedule:details.date"),professional:t("schedule:details.professional"),phone:t("schedule:details.phone"),email:t("schedule:details.email"),status:t("schedule:details.status"),changeStatus:t("schedule:details.changeStatus"),cancel:t("schedule:details.cancel"),viewRecord:t("schedule:details.viewRecord"),whatsapp:t("schedule:details.whatsapp"),timeRange:t("schedule:details.timeRange")},statusLabels:Ne}),i.jsx(lfe,{isOpen:V,appointment:T,companyId:n.company_id||"",onClose:()=>$(!1)})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx("p",{className:"text-gray-600",children:"No company selected"})})}const X6=async t=>(await As(ct(Ie,"calendarInventory"),{...t,created_at:Ke.now()})).id,Z6=async(t,e,n,r,s)=>{const a=n.toISOString().split("T")[0],l=fn(ct(Ie,"calendarInventory"),Xe("company_id","==",t),Xe("professional_id","==",e),Xe("date","==",a),Xe("status","in",["BOOKED","REQUESTED"])),u=await mn(l);for(const d of u.docs){const f=d.data();if(r>=f.start_time&&r<f.end_time||s>f.start_time&&s<=f.end_time||r<=f.start_time&&s>=f.end_time)return!1}return!0},xfe=async(t,e)=>{const n=e.toISOString().split("T")[0],r=fn(ct(Ie,"calendarInventory"),Xe("company_id","==",t),Xe("date","==",n),Xe("status","in",["BOOKED","REQUESTED"]));return(await mn(r)).docs.map(a=>({id:a.id,...a.data(),created_at:a.data().created_at?.toDate()||new Date}))},vfe=async(t,e,n)=>{const r=e.toISOString().split("T")[0],s=n.toISOString().split("T")[0],a=fn(ct(Ie,"calendarInventory"),Xe("company_id","==",t),Xe("date",">=",r),Xe("date","<=",s),Xe("status","in",["BOOKED","REQUESTED"]));return(await mn(a)).docs.map(u=>({id:u.id,...u.data(),created_at:u.data().created_at?.toDate()||new Date}))},Mf=(t,e)=>e.some(n=>t.start_time>=n.start_time&&t.start_time<n.end_time||t.end_time>n.start_time&&t.end_time<=n.end_time||t.start_time<=n.start_time&&t.end_time>=n.end_time),bfe=(t,e,n)=>{if(e.length===0)return!1;const r=n.filter(s=>s.professional_id===t||s.professional_id==="unassigned");return e.some(s=>!Mf(s,r))},Ef=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],Jg={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"},PP=["places"];B6("es",Sa);function J6({isOpen:t,theme:e,serviceName:n,availableSchedules:r,selectedDate:s,selectedSchedule:a,bookingForm:l,onClose:u,onDateChange:d,onScheduleChange:f,onFormChange:m,onSubmit:g,professionals:y=[],selectedProfessionalId:w=null,onProfessionalChange:_,requireProfessional:C=!1,contactLabel:S="Tu WhatsApp *",contactPlaceholder:N="912345678",contactPrefix:k="+56",submitLabel:R="AGENDAR",showWhatsappIcon:A=!0,enableEmailField:L=!1,emailLabel:F="Correo (opcional)",emailPlaceholder:P="cliente@correo.com",requireEmail:O=!1,companyId:T}){const[I,V]=x.useState(1),[$,U]=x.useState([]),G=new Date;G.setHours(0,0,0,0);const W=new Date(Date.now()+840*60*60*1e3);W.setHours(0,0,0,0),x.useEffect(()=>{t&&(V(1),U([]))},[t]),x.useEffect(()=>{(async()=>{if(!t||!T){U([]);return}try{const me=await vfe(T,G,W);U(me)}catch(me){console.error("Error loading occupied slots:",me),U([])}})()},[t,T,G,W]),x.useEffect(()=>{s&&(async()=>{if(!(!s||!T))try{const me=await xfe(T,s);U(we=>{const Ne=s.toISOString().split("T")[0];return[...we.filter(Ue=>new Date(Ue.date).toISOString().split("T")[0]!==Ne),...me]})}catch(me){console.error("Error loading occupied slots:",me)}})()},[s,T]);const z=ae=>{if(ae){const me=Ef[ae.getDay()],we=r.filter(Ne=>Ne.days_of_week?.includes(me));d(ae,we[0]?.id||null)}else d(null,null)},q=ae=>{const me=Ef[ae.getDay()];return r.some(we=>we.days_of_week?.includes(me))},K=()=>{if(!s)return r;const ae=Ef[s.getDay()],me=r.filter(we=>we.days_of_week?.includes(ae));return $.length===0?me:me.filter(we=>{if(w){const Ne=$.filter(Se=>Se.professional_id===w||Se.professional_id==="unassigned");return!Mf(we,Ne)}return!Mf(we,$)})},X=()=>{if(!s||y.length===0||$.length===0)return y;const ae=r.filter(me=>{const we=Ef[s.getDay()];return me.days_of_week?.includes(we)});return y.filter(me=>bfe(me.id,ae,$))},se=ae=>{const me=Ef[ae.getDay()],we=r.filter(Ne=>Ne.days_of_week?.includes(me));if(we.length===0)return 0;if($.length>0){const Ne=ae.toISOString().split("T")[0],Se=$.filter(Ue=>new Date(Ue.date).toISOString().split("T")[0]===Ne);if(Se.length>0)return we.filter(jt=>{if(w){const Qe=Se.filter(on=>on.professional_id===w||on.professional_id==="unassigned");return!Mf(jt,Qe)}return!Mf(jt,Se)}).length}return we.length},H=ae=>{if(!q(ae))return"booking-day-blocked";const me=se(ae);return me===0?"booking-day-no-slots":me>=1&&me<=3?"booking-day-low-slots":"booking-day-available"},Z=ae=>{const me=new Date(ae);me.setHours(0,0,0,0);for(let we=0;we<=35;we+=1){const Ne=new Date(me);if(Ne.setDate(me.getDate()+we),Ne>W)break;if(q(Ne)){z(Ne);return}}},te=()=>{const ae=[],me=new Date;for(me.setHours(0,0,0,0);ae.length<3&&me<=W;)q(me)&&ae.push(new Date(me)),me.setDate(me.getDate()+1);return ae},J=!!(s&&a),ne=()=>{!l.client_name||!l.client_whatsapp||!l.client_rut||O&&!l.client_email||C&&!w||g()};return i.jsxs(tu,{isOpen:t,onClose:u,className:"p-0 w-full max-w-4xl",ariaLabel:`Agendar servicio: ${n}`,children:[i.jsxs("div",{className:"px-4 sm:px-6 py-3 border-b border-gray-200 dark:border-gray-600",style:{backgroundColor:(e.calendarButtonColor||e.buttonColor)+"10"},children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("h3",{className:"text-lg sm:text-xl font-bold dark:text-white truncate",style:{color:e.calendarTitleColor||e.titleColor},children:[" Agendar: ",n]}),i.jsx("p",{className:"text-xs sm:text-sm dark:text-gray-300 mt-0.5",style:{color:e.calendarTextColor||e.textColor},children:I===1?"Paso 1 de 2: Selecciona fecha y horario":"Paso 2 de 2: Tus datos de contacto"})]}),i.jsx("button",{onClick:u,className:"text-gray-400 dark:text-gray-400 hover:text-gray-600 dark:hover:text-white text-2xl leading-none flex-shrink-0 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors","aria-label":"Cerrar ventana de agendamiento",children:""})]}),i.jsxs("div",{className:"mt-3 flex gap-1.5",children:[i.jsx("div",{className:`flex-1 h-1 rounded-full transition-colors ${I>=1?"bg-current":"bg-gray-200"}`,style:{color:e.calendarButtonColor||e.buttonColor}}),i.jsx("div",{className:`flex-1 h-1 rounded-full transition-colors ${I>=2?"bg-current":"bg-gray-200"}`,style:{color:e.calendarButtonColor||e.buttonColor}})]})]}),i.jsx("div",{className:"px-4 sm:px-6 py-4 sm:py-5",children:I===1?i.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-4 sm:space-y-5",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsxs("label",{className:"block text-base sm:text-lg font-bold dark:text-white",style:{color:e.calendarTitleColor||e.titleColor},children:[i.jsx("span",{className:"mr-2 text-xl",children:""}),"Selecciona una fecha"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Hoy",offset:0},{label:"Maana",offset:1},{label:"Prxima semana",offset:7},{label:"Prx. disponible",offset:null}].map(ae=>i.jsx("button",{type:"button",onClick:()=>{if(ae.offset===null){const[we]=te();we&&z(we);return}const me=new Date;me.setDate(me.getDate()+ae.offset),Z(me)},className:"px-3 py-1.5 rounded-full border text-xs sm:text-sm font-medium transition-all hover:shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:border-gray-500",style:{borderColor:(e.calendarButtonColor||e.buttonColor)+"70",color:e.calendarTitleColor||e.titleColor,backgroundColor:e.calendarCardColor||e.cardColor},children:ae.label},ae.label))})]}),i.jsx("div",{className:"w-full flex justify-center",children:i.jsxs("div",{className:"border rounded-lg sm:rounded-xl p-2 sm:p-3 md:p-4 shadow-sm hover:shadow-md transition-all w-full max-w-full sm:max-w-md mx-auto flex flex-col items-center dark:border-gray-600",style:{backgroundColor:e.calendarCardColor||e.cardColor,borderColor:e.calendarButtonColor||e.buttonColor+"35",boxShadow:"0 8px 20px rgba(0,0,0,0.05)"},children:[i.jsx("style",{children:`
                  .react-datepicker {
                    font-family: inherit !important;
                    border: 1px solid ${(e.calendarButtonColor||e.buttonColor)+"30"} !important;
                    background: ${e.calendarCardColor||e.cardColor||"#ffffff"} !important;
                    box-shadow: 0 16px 40px rgba(0,0,0,0.08) !important;
                    border-radius: 0.75rem !important;
                    color: ${e.calendarTextColor||e.textColor||"#111827"} !important;
                    margin: 0 auto !important;
                    width: 100% !important;
                    max-width: 100% !important;
                    font-size: 0.875rem !important;
                  }
                  @media (max-width: 640px) {
                    .react-datepicker {
                      font-size: 0.75rem !important;
                    }
                  }
                  .react-datepicker__month-container {
                    width: 100% !important;
                    margin: 0 auto !important;
                  }
                  .react-datepicker__header {
                    background: ${e.calendarCardColor||e.cardColor} !important;
                    border: none !important;
                    padding: 0.5rem 0.75rem 0.25rem !important;
                    border-bottom: 1px solid ${(e.calendarButtonColor||e.buttonColor)+"30"} !important;
                  }
                  @media (max-width: 640px) {
                    .react-datepicker__header {
                      padding: 0.4rem 0.5rem 0.2rem !important;
                    }
                  }
                  .react-datepicker__month-container {
                    padding: 0 !important;
                  }
                  .react-datepicker__month {
                    border: none !important;
                    border-radius: 0.5rem !important;
                    padding: 0.25rem 0.5rem 0.5rem !important;
                    background: ${e.calendarCardColor||e.cardColor||"transparent"} !important;
                  }
                  @media (max-width: 640px) {
                    .react-datepicker__month {
                      padding: 0.2rem 0.4rem 0.4rem !important;
                    }
                  }
                  .react-datepicker__current-month {
                    font-size: 1rem !important;
                    font-weight: 700 !important;
                    color: ${e.calendarTitleColor||e.titleColor} !important;
                    padding-bottom: 0.25rem !important;
                    letter-spacing: 0.01em !important;
                  }
                  @media (max-width: 640px) {
                    .react-datepicker__current-month {
                      font-size: 0.875rem !important;
                    }
                  }
                  .react-datepicker__day-names {
                    margin-top: 0.5rem !important;
                    display: grid !important;
                    grid-template-columns: repeat(7, minmax(0, 1fr)) !important;
                    border-bottom: 1px solid ${(e.calendarButtonColor||e.buttonColor)+"20"} !important;
                    gap: 0.125rem !important;
                  }
                  .react-datepicker__day-name {
                    color: ${e.calendarTextColor||e.textColor} !important;
                    font-weight: 700 !important;
                    font-size: 0.75rem !important;
                    width: auto !important;
                    line-height: 1.5rem !important;
                    text-transform: uppercase !important;
                    padding: 0.25rem !important;
                  }
                  @media (max-width: 640px) {
                    .react-datepicker__day-name {
                      font-size: 0.625rem !important;
                      line-height: 1.25rem !important;
                      padding: 0.125rem !important;
                    }
                  }
                  .react-datepicker__day {
                    width: auto !important;
                    height: auto !important;
                    min-height: 2rem !important;
                    line-height: 2rem !important;
                    margin: 0.125rem !important;
                    border-radius: 0.5rem !important;
                    font-size: 0.875rem !important;
                    font-weight: 700 !important;
                    transition: all 0.2s !important;
                    position: relative !important;
                    border: 2px solid #e5e7eb !important;
                    color: ${e.calendarTextColor||e.textColor||"#0f172a"} !important;
                    display: inline-flex !important;
                    align-items: center !important;
                    justify-content: center !important;
                    padding: 0.25rem !important;
                    background-color: ${e.calendarCardColor||e.cardColor||"#ffffff"} !important;
                  }
                  /* Asegurar que los bordes de disponibilidad siempre se muestren */
                  .react-datepicker__day.booking-day-available,
                  .react-datepicker__day.booking-day-low-slots,
                  .react-datepicker__day.booking-day-no-slots {
                    border-style: solid !important;
                  }
                  @media (max-width: 640px) {
                    .react-datepicker__day {
                      min-height: 1.75rem !important;
                      line-height: 1.75rem !important;
                      font-size: 0.75rem !important;
                      margin: 0.1rem !important;
                      padding: 0.125rem !important;
                    }
                  }
                  .react-datepicker__day:hover {
                    background-color: ${e.calendarButtonColor||e.buttonColor}25 !important;
                    transform: translateY(-1px) scale(1.02) !important;
                  }
                  .react-datepicker__day--selected {
                    background-color: ${e.calendarSelectedDayColor||e.calendarButtonColor||e.buttonColor} !important;
                    color: ${e.calendarButtonTextColor||e.buttonTextColor||"#ffffff"} !important;
                    font-weight: 700 !important;
                    box-shadow: 0 2px 8px ${e.calendarSelectedDayColor||e.calendarButtonColor||e.buttonColor}40 !important;
                    border-color: ${e.calendarSelectedDayColor||e.calendarButtonColor||e.buttonColor} !important;
                  }
                  .react-datepicker__day--keyboard-selected {
                    background-color: ${e.calendarButtonColor||e.buttonColor}30 !important;
                    border-color: ${e.calendarButtonColor||e.buttonColor}50 !important;
                  }
                  .react-datepicker__day--disabled {
                    color: #94a3b8 !important;
                    cursor: not-allowed !important;
                    background: #f8fafc !important;
                    border-color: #e5e7eb !important;
                    border-style: dashed !important;
                  }
                  .react-datepicker__day--disabled:hover {
                    background-color: transparent !important;
                    transform: none !important;
                    border-color: #e5e7eb !important;
                  }
                  .react-datepicker__day--outside-month {
                    color: #e2e8f0 !important;
                  }
                  .react-datepicker__day--today {
                    font-weight: 700 !important;
                    border-color: ${e.calendarButtonColor||e.buttonColor} !important;
                    color: ${e.calendarTextColor||e.textColor||"#0f172a"} !important;
                  }
                  .react-datepicker__navigation {
                    top: 0.4rem !important;
                    padding: 0.25rem !important;
                    border-radius: 999px !important;
                    transition: all 0.15s !important;
                    color: ${e.calendarTitleColor||e.titleColor} !important;
                  }
                  @media (max-width: 640px) {
                    .react-datepicker__navigation {
                      top: 0.3rem !important;
                      padding: 0.2rem !important;
                    }
                  }
                  .react-datepicker__navigation-icon::before {
                    border-color: ${e.calendarButtonColor||e.buttonColor} !important;
                    border-width: 2px 2px 0 0 !important;
                  }
                  @media (max-width: 640px) {
                    .react-datepicker__navigation-icon::before {
                      border-width: 1.5px 1.5px 0 0 !important;
                    }
                  }
                  .react-datepicker__navigation:hover *::before {
                    border-color: ${e.calendarTitleColor||e.titleColor} !important;
                  }
                  .react-datepicker__navigation:hover {
                    background: ${e.calendarButtonColor||e.buttonColor}15 !important;
                  }
                  .react-datepicker__week {
                    display: grid !important;
                    grid-template-columns: repeat(7, minmax(0, 1fr)) !important;
                    gap: 0.125rem !important;
                  }
                  /* Bordes de disponibilidad - Mayor especificidad para sobrescribir estilos por defecto */
                  .react-datepicker__day.booking-day-available {
                    border-color: ${e.calendarAvailableDayColor||"#22c55e"} !important;
                    border-width: 2px !important;
                  }
                  .react-datepicker__day.booking-day-available:hover {
                    border-color: ${e.calendarAvailableDayColor||"#22c55e"} !important;
                  }
                  .react-datepicker__day.booking-day-low-slots {
                    border-color: ${e.calendarLowSlotsColor||"#eab308"} !important;
                    border-width: 2px !important;
                  }
                  .react-datepicker__day.booking-day-low-slots:hover {
                    border-color: ${e.calendarLowSlotsColor||"#eab308"} !important;
                  }
                  .react-datepicker__day.booking-day-no-slots {
                    border-color: ${e.calendarNoSlotsColor||"#ef4444"} !important;
                    border-width: 2px !important;
                    background-color: ${(e.calendarNoSlotsColor||"#ef4444")+"15"} !important;
                  }
                  .react-datepicker__day.booking-day-no-slots:hover {
                    border-color: ${e.calendarNoSlotsColor||"#ef4444"} !important;
                    background-color: ${(e.calendarNoSlotsColor||"#ef4444")+"20"} !important;
                  }
                  /* Sobrescribir estilos cuando el da sin slots est seleccionado */
                  .react-datepicker__day.booking-day-no-slots.react-datepicker__day--selected {
                    border-color: ${e.calendarNoSlotsColor||"#ef4444"} !important;
                    background-color: ${e.calendarNoSlotsColor||"#ef4444"} !important;
                    color: ${e.calendarButtonTextColor||e.buttonTextColor||"#ffffff"} !important;
                  }
                  .react-datepicker__day.booking-day-no-slots.react-datepicker__day--keyboard-selected {
                    border-color: ${e.calendarNoSlotsColor||"#ef4444"} !important;
                    background-color: ${(e.calendarNoSlotsColor||"#ef4444")+"30"} !important;
                  }
                  .react-datepicker__day.booking-day-blocked {
                    color: #cbd5e0 !important;
                    border-color: #e5e7eb !important;
                    border-style: dashed !important;
                    cursor: not-allowed !important;
                  }
                  .react-datepicker__day.booking-day-blocked:hover {
                    background-color: transparent !important;
                    transform: none !important;
                  }
                `}),i.jsx(F0,{selected:s,onChange:z,minDate:G,maxDate:W,filterDate:ae=>q(ae),inline:!0,locale:"es",dateFormat:"dd/MM/yyyy",formatWeekDay:ae=>ae.slice(0,1).toUpperCase(),renderCustomHeader:({date:ae,decreaseMonth:me,increaseMonth:we,prevMonthButtonDisabled:Ne,nextMonthButtonDisabled:Se})=>i.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3 px-1 gap-1",children:[i.jsx("button",{type:"button",onClick:me,disabled:Ne,className:"p-1 sm:p-1.5 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 disabled:opacity-40 text-black dark:text-gray-200 dark:bg-gray-700 transition-colors text-sm sm:text-base flex-shrink-0","aria-label":"Mes anterior",children:""}),i.jsx("div",{className:"text-xs sm:text-sm md:text-base font-bold uppercase px-2 sm:px-3 md:px-4 py-1 sm:py-1.5 md:py-2 border-2 rounded-md text-center flex-1 mx-1 sm:mx-2 md:mx-3 dark:border-gray-600",style:{borderColor:e.calendarButtonColor||e.buttonColor,backgroundColor:e.calendarCardColor||e.cardColor,color:e.calendarTitleColor||e.titleColor},children:ae.toLocaleDateString("es-CL",{month:"long",year:"numeric"})}),i.jsx("button",{type:"button",onClick:we,disabled:Se,className:"p-1 sm:p-1.5 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 disabled:opacity-40 text-black dark:text-gray-200 dark:bg-gray-700 transition-colors text-sm sm:text-base flex-shrink-0","aria-label":"Mes siguiente",children:""})]}),dayClassName:ae=>H(ae),monthsShown:1,fixedHeight:!0})]})}),i.jsxs("div",{className:"mt-2 sm:mt-3 flex flex-wrap gap-2 text-xs sm:text-sm dark:text-gray-300",style:{color:e.calendarTextColor||e.textColor},children:[i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-lg dark:bg-gray-700",style:{backgroundColor:(e.calendarCardColor||e.cardColor)+"80"},children:[i.jsx("span",{className:"w-3 h-3 rounded border-2 flex-shrink-0",style:{borderColor:e.calendarAvailableDayColor||"#22c55e"}}),i.jsx("span",{className:"hidden sm:inline",children:"Disponible"})]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-lg dark:bg-gray-700",style:{backgroundColor:(e.calendarCardColor||e.cardColor)+"80"},children:[i.jsx("span",{className:"w-3 h-3 rounded border-2 flex-shrink-0",style:{borderColor:e.calendarLowSlotsColor||"#eab308"}}),i.jsx("span",{className:"hidden sm:inline",children:"1-3 citas"})]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-lg dark:bg-gray-700",style:{backgroundColor:(e.calendarCardColor||e.cardColor)+"80"},children:[i.jsx("span",{className:"w-3 h-3 rounded border-2 flex-shrink-0",style:{borderColor:e.calendarNoSlotsColor||"#ef4444"}}),i.jsx("span",{className:"hidden sm:inline",children:"Sin horas"})]}),i.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-1 rounded-lg bg-gray-100 dark:bg-gray-700",children:[G.toLocaleDateString("es-CL",{day:"numeric",month:"short"})," - ",W.toLocaleDateString("es-CL",{day:"numeric",month:"short"})]})]}),s&&i.jsx(_e.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-2 sm:mt-3 p-3 sm:p-4 rounded-lg sm:rounded-xl shadow-sm",style:{backgroundColor:(e.calendarButtonColor||e.buttonColor)+"10",borderLeft:`3px solid ${e.calendarButtonColor||e.buttonColor}`},children:i.jsxs("p",{className:"text-xs sm:text-sm font-semibold flex items-center gap-2",style:{color:e.calendarTitleColor||e.titleColor},children:[i.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})})]}),s&&i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 sm:mt-5",children:[i.jsxs("label",{className:"block text-sm sm:text-base font-semibold dark:text-white mb-2.5 sm:mb-3 flex items-center gap-2",style:{color:e.calendarTitleColor||e.titleColor},children:[i.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Selecciona un horario"]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2.5 sm:gap-3",children:K().map(ae=>i.jsx(_e.button,{type:"button",onClick:()=>f(ae.id),whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},className:`p-3 sm:p-4 rounded-lg sm:rounded-xl border-2 transition-all text-left shadow-sm hover:shadow-md dark:bg-gray-800 ${a===ae.id?"border-current":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,style:{borderColor:a===ae.id?e.calendarButtonColor||e.buttonColor:void 0,backgroundColor:a===ae.id?(e.calendarButtonColor||e.buttonColor)+"15":e.calendarCardColor||e.cardColor},children:i.jsxs("div",{className:"flex items-center gap-2.5 sm:gap-3",children:[i.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center font-bold shadow-sm flex-shrink-0 ${a===ae.id?"text-white":"text-gray-800 dark:text-gray-300 bg-white dark:bg-gray-700"}`,style:{backgroundColor:a===ae.id?e.calendarButtonColor||e.buttonColor:void 0,color:a===ae.id?e.calendarButtonTextColor||e.buttonTextColor:void 0},children:a===ae.id?i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold dark:text-white text-base sm:text-lg truncate",style:{color:e.calendarTextColor||e.textColor},children:ae.start_time}),i.jsxs("p",{className:"text-xs sm:text-sm dark:text-gray-300 font-medium",style:{color:e.calendarTextColor||e.textColor},children:["Hasta ",ae.end_time]})]})]})},ae.id))}),K().length===0&&i.jsxs("div",{className:"text-center py-6 sm:py-8 text-gray-500 dark:text-gray-400",children:[i.jsx("p",{className:"text-xs sm:text-sm",children:"No hay horarios disponibles para esta fecha"}),i.jsx("p",{className:"text-xs mt-1",children:"Por favor selecciona otro da"})]})]}),!s&&i.jsxs("div",{className:"text-center py-6 sm:py-8 text-gray-400 dark:text-gray-500",children:[i.jsx("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-2 sm:mb-3 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("p",{className:"text-xs sm:text-sm px-4",children:"Selecciona una fecha en el calendario para ver los horarios disponibles"})]})]}):i.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-600 dark:bg-blue-900/30 border border-blue-500 dark:border-blue-700 rounded-lg p-4 mb-6",children:[i.jsx("h4",{className:"font-semibold text-white mb-2",children:" Resumen de tu reserva"}),i.jsxs("div",{className:"space-y-1 text-sm text-white",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Servicio:"})," ",n]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Fecha:"})," ",s?.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Horario:"})," ",r.find(ae=>ae.id===a)?.start_time," - ",r.find(ae=>ae.id===a)?.end_time]}),w&&i.jsxs("p",{children:[i.jsx("strong",{children:"Profesional:"})," ",y.find(ae=>ae.id===w)?.name]})]})]}),X().length>0&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:["Selecciona un profesional ",C&&i.jsx("span",{className:"text-red-500 dark:text-red-400",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:X().map(ae=>i.jsxs("button",{type:"button",onClick:()=>_?.(ae.id),className:`w-full text-left px-4 py-3 rounded-lg border-2 transition dark:bg-gray-800 ${w===ae.id?"border-current bg-blue-50 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,style:{borderColor:w===ae.id?e.buttonColor:void 0},children:[i.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:ae.name}),(ae.email||ae.phone)&&i.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:[ae.email,ae.phone].filter(Boolean).join("  ")})]},ae.id))})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"client-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Tu nombre completo *"}),i.jsx("input",{id:"client-name",type:"text",required:!0,placeholder:"Ej: Juan Prez",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all dark:placeholder-gray-500",style:{"--tw-ring-color":e.buttonColor},value:l.client_name,onChange:ae=>m("client_name",ae.target.value)})]}),L&&i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"client-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:[F," ",O&&i.jsx("span",{className:"text-red-500 dark:text-red-400",children:"*"})]}),i.jsx("input",{id:"client-email",type:"email",required:O,placeholder:P,className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all dark:placeholder-gray-500",style:{"--tw-ring-color":e.buttonColor},value:l.client_email||"",onChange:ae=>m("client_email",ae.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"client-rut",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"RUT *"}),i.jsx("input",{id:"client-rut",type:"text",required:!0,placeholder:"Ej: 12.345.678-9",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all dark:placeholder-gray-500",style:{"--tw-ring-color":e.buttonColor},value:l.client_rut||"",onChange:ae=>m("client_rut",ae.target.value)}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Requerido para generar tu ficha de paciente"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"client-whatsapp",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:S}),i.jsxs("div",{className:"relative",children:[k&&i.jsx("span",{className:"absolute left-4 top-3.5 text-gray-500 dark:text-gray-400",children:k}),i.jsx("input",{id:"client-whatsapp",type:"tel",required:!0,placeholder:N,maxLength:k?9:15,className:`w-full ${k?"pl-14":"pl-4"} pr-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all dark:placeholder-gray-500`,style:{"--tw-ring-color":e.buttonColor},value:l.client_whatsapp,onChange:ae=>{const me=ae.target.value.replace(/\D/g,"");m("client_whatsapp",me)}})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Ingresa tu dato de contacto para confirmar la cita"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"client-comment",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Comentarios o solicitudes especiales (opcional)"}),i.jsx("textarea",{id:"client-comment",rows:4,placeholder:"Ej: Prefiero atencin en la maana...",className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all resize-none dark:placeholder-gray-500",style:{"--tw-ring-color":e.buttonColor},value:l.client_comment,onChange:ae=>m("client_comment",ae.target.value)}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[l.client_comment.length,"/500 caracteres"]})]})]})}),i.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row justify-between gap-2 sm:gap-0",children:I===1?i.jsxs(i.Fragment,{children:[i.jsx(xn,{onClick:u,className:"px-4 sm:px-5 py-2 sm:py-2.5 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 font-medium text-sm sm:text-base order-2 sm:order-1",children:"Cancelar"}),i.jsxs(xn,{onClick:()=>V(2),disabled:!J,style:{backgroundColor:e.calendarButtonColor||e.buttonColor,color:e.calendarButtonTextColor||e.buttonTextColor},className:"px-5 sm:px-6 py-2 sm:py-2.5 rounded-lg hover:opacity-90 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base order-1 sm:order-2",children:["Continuar",i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs(xn,{onClick:()=>V(1),className:"px-5 py-2.5 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 font-medium flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),i.jsxs(xn,{onClick:ne,disabled:!l.client_name||!l.client_whatsapp||!l.client_rut||O&&!l.client_email||C&&!w,style:{backgroundColor:e.calendarButtonColor||e.buttonColor,color:e.calendarButtonTextColor||e.buttonTextColor},className:"px-6 py-2.5 rounded-lg hover:opacity-90 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[A&&i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),R]})]})})]})}const wfe={bgColor:"#ffffff",cardColor:"#ffffff",bgOpacity:1,cardOpacity:1,buttonColor:"#2563eb",buttonTextColor:"#ffffff",titleColor:"#111827",subtitleColor:"#4b5563",textColor:"#4b5563",fontTitle:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif',fontBody:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif',fontButton:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif'};function _fe(){const t=Ze(),{t:e}=Zc("appointments"),{firestoreUser:n}=an(),{handleError:r}=St(),[s,a]=x.useState([]),[l,u]=x.useState([]),[d,f]=x.useState([]),[m,g]=x.useState([]),[y,w]=x.useState(null),[_,C]=x.useState(null),[S,N]=x.useState(null),[k,R]=x.useState(null),[A,L]=x.useState({client_name:"",client_whatsapp:"",client_email:"",client_rut:"",client_comment:""}),[F,P]=x.useState(!1),[O,T]=x.useState(!0),[I,V]=x.useState(!1);x.useEffect(()=>{U()},[n]);const $=x.useMemo(()=>s.filter(q=>q.status==="ACTIVE"),[s]),U=async()=>{if(n?.company_id){T(!0);try{const[q,K]=await Promise.all([th(n.company_id),Ix(n.company_id)]);a(q.filter(X=>X.status==="ACTIVE")),u(K)}catch(q){r(q)}finally{T(!1)}}},G=()=>{w(null),C(null),f([]),g([]),N(null),R(null),L({client_name:"",client_whatsapp:"",client_email:"",client_rut:"",client_comment:""}),P(!1)},W=async q=>{if(!n?.company_id)return;w(q),P(!0),N(null),R(null);const K=q.professional_ids&&q.professional_ids.length>0?l.filter(X=>q.professional_ids?.includes(X.id)):l;f(K),C(K[0]?.id||null);try{const[X,se]=await Promise.all([kx(q.id),Tx(n.company_id)]),H=se.filter(Z=>Z.status==="ACTIVE"&&X.some(te=>te.schedule_slot_id===Z.id));g(H)}catch(X){ue.error("No pudimos cargar los horarios"),r(X)}},z=async()=>{if(!y||!k||!S||!n?.company_id){ue.error("Completa todos los datos de la cita");return}if(!A.client_name||!A.client_whatsapp||!A.client_rut){ue.error("Completa el nombre, telfono y RUT del cliente");return}if(d.length>0&&!_){ue.error("Selecciona un profesional");return}const q=m.find(H=>H.id===k);if(!q){ue.error("Horario no encontrado");return}const K=_||d[0]?.id;if(!K){ue.error("Debes asignar un profesional");return}if(!await lie(K,S,q.start_time,q.end_time)){ue.error("El horario seleccionado ya est ocupado");return}if(!await Z6(n.company_id,K,S,q.start_time,q.end_time)){ue.error("El profesional no tiene cupos disponibles en ese horario");return}V(!0);try{const H={company_id:n.company_id,service_id:y.id,professional_id:K,client_name:A.client_name,client_phone:A.client_whatsapp,appointment_date:S,start_time:q.start_time,end_time:q.end_time,status:Le.CONFIRMED};A.client_email?.trim()&&(H.client_email=A.client_email.trim()),A.client_rut?.trim()&&(H.client_rut=A.client_rut.trim()),A.client_comment?.trim()&&(H.notes=A.client_comment.trim());const Z=await oie(H,n.id);await X6({company_id:n.company_id,service_id:y.id,professional_id:K,schedule_slot_id:k,date:S.toISOString().split("T")[0],start_time:q.start_time,end_time:q.end_time,status:"BOOKED"});try{const te=await oS(Z),J=await Vr(n.company_id),ne=d.find(me=>me.id===K)?.name||"Profesional",ae=J?.notifications?.toEmail||n.email||"";if(te&&(ae&&await Zae(te,y.name,ne,J?.name||"Tu negocio",ae,J?.whatsapp),A.client_email)){await q5(te,y.name,ne,J?.name||"Tu negocio",A.client_email,J?.whatsapp);const me=new Date(S),we=new Date(me.getTime()-1440*60*1e3),Ne=new Date(me.getTime()-720*60*1e3),Se=new Date;we<=Se?await $g(te,y.name,ne,J?.name||"Tu negocio",A.client_email,J?.whatsapp):setTimeout(async()=>{try{await $g(te,y.name,ne,J?.name||"Tu negocio",A.client_email,J?.whatsapp)}catch(Ue){console.warn("No se pudo enviar recordatorio 24h:",Ue)}},we.getTime()-Se.getTime()),Ne<=Se?await $g(te,y.name,ne,J?.name||"Tu negocio",A.client_email,J?.whatsapp):setTimeout(async()=>{try{await $g(te,y.name,ne,J?.name||"Tu negocio",A.client_email,J?.whatsapp)}catch(Ue){console.warn("No se pudo enviar recordatorio 12h:",Ue)}},Ne.getTime()-Se.getTime())}}catch(te){console.warn("No se pudieron enviar correos/recordatorios de cita:",te)}ue.success("Cita creada exitosamente"),G(),t("/dashboard/schedule")}catch(H){r(H)}finally{V(!1)}};return O?i.jsx(zn,{fullScreen:!0,size:"lg"}):$.length===0?i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("button",{onClick:()=>t(-1),className:"mb-4 flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":"Go back",children:[i.jsx(Km,{className:"w-4 h-4"}),e("form.buttons.cancel")]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-8 text-center",children:[i.jsx("p",{className:"text-gray-700 mb-3",children:"Primero debes crear un servicio."}),i.jsx("button",{type:"button",onClick:()=>t("/dashboard/services/new"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Crear servicio"})]})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx("button",{type:"button",onClick:()=>t(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Agenda manual"})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[i.jsx(vre,{className:"w-5 h-5 text-blue-600"}),"Selecciona el servicio que quieres agendar"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$.map(q=>i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:q.name}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:q.description}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Duracin: ",q.estimated_duration_minutes," min"]}),q.professional_ids&&q.professional_ids.length>0&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Profesionales asignados: ",q.professional_ids.length]})]}),i.jsx("button",{type:"button",onClick:()=>W(q),className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Abrir calendario"})]})},q.id))})]})]}),i.jsx(J6,{isOpen:F,serviceName:y?.name,availableSchedules:m,selectedDate:S,selectedSchedule:k,bookingForm:A,onClose:G,onDateChange:(q,K)=>{N(q),R(K)},onScheduleChange:q=>R(q),onFormChange:(q,K)=>L({...A,[q]:K}),onSubmit:z,professionals:d,selectedProfessionalId:_,onProfessionalChange:q=>C(q),requireProfessional:d.length>0,contactLabel:"Telfono / WhatsApp *",contactPlaceholder:"Ej: +56912345678",contactPrefix:"",submitLabel:I?"Guardando...":"Crear cita",enableEmailField:!0,requireEmail:!0,emailLabel:"Correo del cliente *",emailPlaceholder:"cliente@correo.com",showWhatsappIcon:!1,theme:wfe})]})}function Efe(){const{t}=Zc("notifications"),{firestoreUser:e}=an(),{trackEvent:n}=eu(),{handleAsyncError:r}=St(),[s,a]=x.useState(!0),[l,u]=x.useState(!1),[d,f]=x.useState(!1),[m,g]=x.useState(""),[y,w]=x.useState(!0);x.useEffect(()=>{e?.id&&e?.company_id&&_()},[e]);const _=async()=>{if(!(!e?.id||!e?.company_id)){a(!0);try{const N=await lS(e.id,e.company_id);N?(w(!0),f(N.email_notifications_enabled??!1),g(N.notification_email||e.email)):(w(!0),f(!1),g(e.email))}catch(N){r(async()=>{throw N})}finally{a(!1)}}},C=async N=>{if(!(!e?.id||!e?.company_id)){u(!0);try{await r(async()=>{await z4(e.id,e.company_id,N,m||e.email),n(N?"notifications_toggle_on":"notifications_toggle_off",{company_id:e.company_id}),f(N),ue.success(t(N?"messages.enabledSuccess":"messages.disabledSuccess")),await _()})}catch{ue.error(t("messages.error"))}finally{u(!1)}}},S=async()=>{if(!(!e?.id||!e?.company_id||!m)){u(!0);try{await r(async()=>{await z4(e.id,e.company_id,d,m),ue.success(t("messages.saved")),await _()})}catch{ue.error(t("messages.error"))}finally{u(!1)}}};return s?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx(zn,{})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"bg-white shadow rounded-lg",children:[i.jsxs("div",{className:"px-6 py-5 border-b border-gray-200",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("title")}),i.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t("description")})]}),i.jsxs("div",{className:"px-6 py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t("emailNotifications.title")}),i.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t("emailNotifications.description")})]}),i.jsx("button",{type:"button",role:"switch","aria-checked":d,"aria-label":t("emailNotifications.toggleLabel"),onClick:()=>C(!d),disabled:l||!y,className:`${d?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:i.jsx("span",{"aria-hidden":"true",className:`${d?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]}),d&&i.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[i.jsx("label",{htmlFor:"notificationEmail",className:"block text-sm font-medium text-gray-700",children:t("emailNotifications.emailLabel")}),i.jsxs("div",{className:"mt-1 flex gap-3",children:[i.jsx("input",{type:"email",id:"notificationEmail",value:m,onChange:N=>g(N.target.value),placeholder:t("emailNotifications.emailPlaceholder"),className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),i.jsx("button",{type:"button",onClick:S,disabled:l||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t("buttons.save")})]}),i.jsx("p",{className:"mt-2 text-sm text-gray-500",children:t("emailNotifications.emailHelp")})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:t("types.newAppointment")}),i.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[i.jsxs("li",{children:[" ",t("types.newAppointment")]}),i.jsxs("li",{children:[" ",t("types.appointmentConfirmed")]}),i.jsxs("li",{children:[" ",t("types.appointmentCancelled")]}),i.jsxs("li",{children:[" ",t("types.appointmentReminder")]})]})]})]})]})})})}function Cfe({companyId:t,onUpgradeClick:e}){const{handleError:n}=St(),[r,s]=x.useState(!0),[a,l]=x.useState("BASIC"),[u,d]=x.useState(null);x.useEffect(()=>{f()},[t]);const f=async()=>{try{s(!0);const _=await qre(t);l(_.currentPlan),d(_.limits)}catch(_){n(_)}finally{s(!1)}};if(r)return i.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:i.jsx(zn,{size:"sm"})});const m=wd[a],g=Wre(a),y=_=>({BASIC:"bg-gray-100 text-gray-800 border-gray-300",STANDARD:"bg-blue-100 text-blue-800 border-blue-300",PRO:"bg-purple-100 text-purple-800 border-purple-300",APPROVED25:"bg-green-100 text-green-800 border-green-300"})[_],w=_=>_==="PRO"?i.jsx(A_,{className:"w-5 h-5"}):i.jsx(xR,{className:"w-5 h-5"});return i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[i.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${y(a)}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[w(a),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:m.name}),i.jsx("p",{className:"text-sm opacity-80",children:m.description})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("p",{className:"text-2xl font-bold",children:m.price})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Caractersticas incluidas:"}),i.jsx("ul",{className:"space-y-2",children:m.features.map((_,C)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[i.jsx(xR,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:_})]},C))})]}),u&&i.jsxs("div",{className:"px-6 pb-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Lmites de tu plan:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Profesionales"}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.professionals===1/0?"":u.professionals})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Servicios"}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.services===1/0?"":u.services})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Productos"}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.products===1/0?"":u.products})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Horarios"}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:u.serviceSchedules===1/0?"":u.serviceSchedules})]})]})]}),g&&e&&i.jsxs("div",{className:"px-6 pb-6",children:[i.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg",children:[i.jsx(Nre,{className:"w-5 h-5"}),"Actualizar a ",wd[g].name]}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Desbloquea ms funciones y lmites superiores"})]}),!g&&a==="PRO"&&i.jsx("div",{className:"px-6 pb-6",children:i.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 flex items-start gap-3",children:[i.jsx(A_,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-purple-900",children:"Tienes el plan ms completo!"}),i.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Disfrutas de todas las funciones sin lmites."})]})]})})]})}function Sfe(){const{firestoreUser:t}=an(),e=Ze(),n=()=>{const r=encodeURIComponent("Hola, me gustara actualizar mi plan de suscripcin.");window.open(`https://wa.me/56912345678?text=${r}`,"_blank")};return t?.company_id?i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[i.jsx(Km,{className:"w-5 h-5"}),"Volver al dashboard"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mi Suscripcin"}),i.jsx("p",{className:"text-gray-600",children:"Gestiona tu plan y lmites de recursos"})]}),i.jsx(Cfe,{companyId:t.company_id,onUpgradeClick:n}),i.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Necesitas ms recursos?"}),i.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"Si has alcanzado los lmites de tu plan actual, puedes actualizar a un plan superior para obtener ms profesionales, servicios y productos."}),i.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Ver opciones de actualizacin"})]}),i.jsxs("div",{className:"mt-6 bg-gray-100 border border-gray-200 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tienes preguntas?"}),i.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Nuestro equipo est disponible para ayudarte con cualquier consulta sobre planes y facturacin."}),i.jsx("a",{href:"https://wa.me/56912345678?text=Hola,%20tengo%20una%20consulta%20sobre%20mi%20plan",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Contactar por WhatsApp"})]})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No se encontr informacin de la empresa"}),i.jsx("button",{onClick:()=>e("/dashboard"),className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Volver al dashboard"})]})})}const Nfe=async(t,e)=>{const{width:n,height:r,maxSizeKB:s=1e3,format:a="image/jpeg",quality:l=.9}=e,u=await new Promise((k,R)=>{const A=new FileReader;A.onload=()=>k(A.result),A.onerror=R,A.readAsDataURL(t)}),d=await new Promise((k,R)=>{const A=new Image;A.onload=()=>k(A),A.onerror=R,A.src=u}),f=document.createElement("canvas");f.width=n,f.height=r;const m=f.getContext("2d");if(!m)throw new Error("No se pudo obtener contexto de canvas");a==="image/jpeg"?(m.fillStyle="#ffffff",m.fillRect(0,0,n,r)):m.clearRect(0,0,n,r);const g=Math.min(n/d.width,r/d.height),y=d.width*g,w=d.height*g,_=(n-y)/2,C=(r-w)/2;m.drawImage(d,_,C,y,w);let S=l,N=null;for(let k=0;k<3&&(N=await new Promise(A=>f.toBlob(A,a,S)),!(!N||N.size/1024<=s));k++)S=Math.max(.5,S-.15);if(!N)throw new Error("No se pudo generar la imagen procesada");return new File([N],t.name,{type:a,lastModified:Date.now()})},tp=async(t,e,n)=>{const r=n?await Nfe(t,n):t,s=wZ(nJ,e);return await vZ(s,r),await bZ(s)},Gi=[{label:"Sans (Inter/Segoe)",value:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif'},{label:"Serif (Georgia)",value:'Georgia, "Times New Roman", serif'},{label:"Rounded (Nunito)",value:'"Nunito", "Segoe UI Rounded", system-ui, sans-serif'},{label:"Century Gothic",value:'"Century Gothic", "Apple Gothic", sans-serif'},{label:"Graffiti",value:'"Rock Salt", "Comic Sans MS", cursive'},{label:"Code",value:'"Source Code Pro", "Fira Code", monospace'},{label:"Display (Oswald)",value:'"Oswald", "Arial Narrow", sans-serif'},{label:"Grotesk (Space Grotesk)",value:'"Space Grotesk", "Inter", system-ui, sans-serif'},{label:"Humanist (Gill Sans)",value:'"Gill Sans", "Trebuchet MS", sans-serif'}];function jfe(){const{firestoreUser:t}=an(),{handleError:e}=St(),[n,r]=x.useState({logo_url:"",banner_url:"",logo_position:"center",background_color:"#ffffff",card_color:"#ffffff",background_opacity:1,card_opacity:1,button_color:"#2563eb",button_text_color:"#ffffff",title_color:"#111827",subtitle_color:"#4b5563",text_color:"#4b5563",font_title:Gi[0].value,font_body:Gi[0].value,font_button:Gi[0].value,card_layout:1,show_whatsapp_fab:!1,calendar_card_color:"#ffffff",calendar_card_opacity:100,calendar_text_color:"#111827",calendar_title_color:"#111827",calendar_button_color:"#2563eb",calendar_button_text_color:"#ffffff",calendar_available_day_color:"#22c55e",calendar_low_slots_color:"#eab308",calendar_no_slots_color:"#ef4444",calendar_selected_day_color:"#2563eb"}),[s,a]=x.useState(!0),[l,u]=x.useState(!1);x.useEffect(()=>{d()},[]);const d=async()=>{if(t?.company_id)try{const g=await jx(t.company_id,un.SERVICES);g&&r({logo_url:g.logo_url||"",banner_url:g.banner_url||"",logo_position:g.logo_position||"center",background_color:g.background_color||"#ffffff",card_color:g.card_color||"#ffffff",background_opacity:g.background_opacity??1,card_opacity:g.card_opacity??1,button_color:g.button_color||"#2563eb",button_text_color:g.button_text_color||"#ffffff",title_color:g.title_color||"#111827",subtitle_color:g.subtitle_color||"#4b5563",text_color:g.text_color||"#4b5563",font_title:g.font_title||Gi[0].value,font_body:g.font_body||Gi[0].value,font_button:g.font_button||Gi[0].value,card_layout:g.card_layout||1,show_whatsapp_fab:g.show_whatsapp_fab||!1,calendar_card_color:g.calendar_card_color||"#ffffff",calendar_card_opacity:g.calendar_card_opacity??100,calendar_text_color:g.calendar_text_color||"#111827",calendar_title_color:g.calendar_title_color||"#111827",calendar_button_color:g.calendar_button_color||"#2563eb",calendar_button_text_color:g.calendar_button_text_color||"#ffffff",calendar_available_day_color:g.calendar_available_day_color||"#22c55e",calendar_low_slots_color:g.calendar_low_slots_color||"#eab308",calendar_no_slots_color:g.calendar_no_slots_color||"#ef4444",calendar_selected_day_color:g.calendar_selected_day_color||"#2563eb"})}catch(g){e(g)}finally{a(!1)}},f=async(g,y)=>{if(t?.company_id)try{const w=`companies/${t.company_id}/${y}_${Date.now()}`,_=await tp(g,w,y==="logo"?{width:512,height:512,maxSizeKB:500,format:"image/png",quality:.95}:{width:1600,height:600,maxSizeKB:1e3,format:"image/jpeg",quality:.9});r(y==="logo"?{...n,logo_url:_}:{...n,banner_url:_}),ue.success("Imagen subida correctamente")}catch(w){ue.error("Error al subir imagen"),e(w)}},m=async g=>{if(g.preventDefault(),!!t?.company_id){u(!0);try{await $I(t.company_id,un.SERVICES,n),ue.success("Configuracin guardada")}catch(y){ue.error("Error al guardar"),e(y)}finally{u(!1)}}};return s?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuracin Visual - Servicios"})]}),i.jsxs("form",{onSubmit:m,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Recomendado: 512x512 px, PNG transparente o JPG, mx ~500KB."}),n.logo_url&&i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("img",{src:n.logo_url,alt:"Logo",className:"h-24"}),i.jsx("button",{type:"button",onClick:()=>r({...n,logo_url:""}),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Eliminar logo"})]}),i.jsx("input",{type:"file",accept:"image/*",onChange:g=>{const y=g.target.files?.[0];y&&f(y,"logo")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),n.logo_url&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Posicin del logo"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsx("button",{type:"button",onClick:()=>r({...n,logo_position:"left"}),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${n.logo_position==="left"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg mb-1",children:""}),i.jsx("div",{className:"text-sm",children:"Izquierda"})]})}),i.jsx("button",{type:"button",onClick:()=>r({...n,logo_position:"center"}),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${n.logo_position==="center"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg mb-1",children:""}),i.jsx("div",{className:"text-sm",children:"Centro"})]})}),i.jsx("button",{type:"button",onClick:()=>r({...n,logo_position:"right"}),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${n.logo_position==="right"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg mb-1",children:""}),i.jsx("div",{className:"text-sm",children:"Derecha"})]})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"El logo se mostrar ms grande cuando est centrado para mayor visibilidad."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner"}),i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Recomendado: 1600x600 px, JPG o PNG, mx ~1MB."}),n.banner_url&&i.jsxs("div",{className:"mb-2",children:[i.jsx("img",{src:n.banner_url,alt:"Banner",className:"w-full h-48 object-cover rounded mb-2"}),i.jsx("button",{type:"button",onClick:()=>r({...n,banner_url:""}),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Eliminar banner"})]}),i.jsx("input",{type:"file",accept:"image/*",onChange:g=>{const y=g.target.files?.[0];y&&f(y,"banner")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de fondo"}),i.jsx("input",{type:"color",value:n.background_color,onChange:g=>r({...n,background_color:g.target.value}),className:"h-10 w-full"}),i.jsx("label",{className:"block text-sm font-medium text-gray-700 mt-2",children:"Transparencia de fondo"}),i.jsx("input",{type:"range",min:0,max:100,value:Math.round((n.background_opacity??1)*100),onChange:g=>r({...n,background_opacity:Number(g.target.value)/100}),className:"w-full"}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Opacidad: ",Math.round((n.background_opacity??1)*100),"%"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de tarjetas"}),i.jsx("input",{type:"color",value:n.card_color,onChange:g=>r({...n,card_color:g.target.value}),className:"h-10 w-full"}),i.jsx("label",{className:"block text-sm font-medium text-gray-700 mt-2",children:"Transparencia de tarjetas"}),i.jsx("input",{type:"range",min:0,max:100,value:Math.round((n.card_opacity??1)*100),onChange:g=>r({...n,card_opacity:Number(g.target.value)/100}),className:"w-full"}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Opacidad: ",Math.round((n.card_opacity??1)*100),"%"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de botones"}),i.jsx("input",{type:"color",value:n.button_color,onChange:g=>r({...n,button_color:g.target.value}),className:"h-10 w-full"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texto de botones"}),i.jsx("input",{type:"color",value:n.button_text_color,onChange:g=>r({...n,button_text_color:g.target.value}),className:"h-10 w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de ttulos"}),i.jsx("input",{type:"color",value:n.title_color,onChange:g=>r({...n,title_color:g.target.value}),className:"h-10 w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de subttulos"}),i.jsx("input",{type:"color",value:n.subtitle_color,onChange:g=>r({...n,subtitle_color:g.target.value}),className:"h-10 w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de texto"}),i.jsx("input",{type:"color",value:n.text_color,onChange:g=>r({...n,text_color:g.target.value}),className:"h-10 w-full"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente ttulos"}),i.jsx("select",{value:n.font_title,onChange:g=>r({...n,font_title:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Gi.map(g=>i.jsx("option",{value:g.value,children:g.label},g.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente cuerpo"}),i.jsx("select",{value:n.font_body,onChange:g=>r({...n,font_body:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Gi.map(g=>i.jsx("option",{value:g.value,children:g.label},g.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente botones"}),i.jsx("select",{value:n.font_button,onChange:g=>r({...n,font_button:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Gi.map(g=>i.jsx("option",{value:g.value,children:g.label},g.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Layout Premium de Tarjetas"}),i.jsxs("select",{value:n.card_layout,onChange:g=>r({...n,card_layout:Number(g.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:1,children:"Layout 1: Grid Clsico"}),i.jsx("option",{value:2,children:"Layout 2: Lista con Imagen Circular"}),i.jsx("option",{value:3,children:"Layout 3: Carrusel Fullscreen"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecciona el diseo premium para las tarjetas de servicios en tu pgina pblica."})]}),i.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4",children:[i.jsx("input",{id:"whatsappFab",type:"checkbox",className:"mt-1 h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:n.show_whatsapp_fab,onChange:g=>r({...n,show_whatsapp_fab:g.target.checked})}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"whatsappFab",className:"text-sm font-medium text-gray-900",children:"Mostrar botn flotante de WhatsApp"}),i.jsx("p",{className:"text-xs text-gray-600",children:"Agrega un acceso rpido en la esquina inferior para que los clientes escriban por WhatsApp desde la pgina pblica."})]})]}),i.jsxs("div",{className:"border-t pt-6 mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:" Personalizacin del Calendario de Agenda"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Personaliza los colores y estilos del calendario de reservas en tu pgina pblica."}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de fondo de tarjetas"}),i.jsx("input",{type:"color",value:n.calendar_card_color,onChange:g=>r({...n,calendar_card_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Opacidad de tarjetas: ",n.calendar_card_opacity,"%"]}),i.jsx("input",{type:"range",min:"0",max:"100",value:n.calendar_card_opacity,onChange:g=>r({...n,calendar_card_opacity:Number(g.target.value)}),className:"w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de texto"}),i.jsx("input",{type:"color",value:n.calendar_text_color,onChange:g=>r({...n,calendar_text_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de ttulos"}),i.jsx("input",{type:"color",value:n.calendar_title_color,onChange:g=>r({...n,calendar_title_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de botones"}),i.jsx("input",{type:"color",value:n.calendar_button_color,onChange:g=>r({...n,calendar_button_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de texto de botones"}),i.jsx("input",{type:"color",value:n.calendar_button_text_color,onChange:g=>r({...n,calendar_button_text_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]})]}),i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-3",children:"Colores de disponibilidad de das"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Das disponibles (verde)"}),i.jsx("input",{type:"color",value:n.calendar_available_day_color,onChange:g=>r({...n,calendar_available_day_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pocos slots (amarillo)"}),i.jsx("input",{type:"color",value:n.calendar_low_slots_color,onChange:g=>r({...n,calendar_low_slots_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sin slots (rojo)"}),i.jsx("input",{type:"color",value:n.calendar_no_slots_color,onChange:g=>r({...n,calendar_no_slots_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Da seleccionado"}),i.jsx("input",{type:"color",value:n.calendar_selected_day_color,onChange:g=>r({...n,calendar_selected_day_color:g.target.value}),className:"h-10 w-full rounded border border-gray-300"})]})]})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:l?"Guardando...":"Guardar"})})]})]})})}const Tfe=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],MP={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"};function kfe(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState([]),[a,l]=x.useState(null),[u,d]=x.useState(!0),[f,m]=x.useState(!1),[g,y]=x.useState(null),[w,_]=x.useState({days_of_week:[],start_time:"",end_time:"",status:"ACTIVE"});x.useEffect(()=>{C()},[]);const C=async()=>{if(t?.company_id)try{const[L,F]=await Promise.all([Vr(t.company_id),Tx(t.company_id)]);l(L),s(F)}catch(L){n(L)}finally{d(!1)}},S=()=>KZ("serviceSchedules",a?.subscription_plan),N=async L=>{if(L.preventDefault(),w.days_of_week.length===0){ue.error("Selecciona al menos un da");return}if(t?.company_id){if(r.length>=S()&&!g){const F=QZ(a?.subscription_plan);ue.error(`Tu plan ${F} no permite ms horarios`);return}try{g?(await dJ(g.id,{...w,company_id:t.company_id}),ue.success("Horario actualizado")):(await uJ({...w,company_id:t.company_id}),ue.success("Horario creado")),m(!1),y(null),_({days_of_week:[],start_time:"",end_time:"",status:"ACTIVE"}),await C()}catch(F){ue.error("Error al guardar"),n(F)}}},k=L=>{y(L),_({days_of_week:L.days_of_week||[],start_time:L.start_time||"",end_time:L.end_time||"",status:L.status||"ACTIVE"}),m(!0)},R=async L=>{if(confirm("Ests seguro de eliminar este horario?"))try{await hJ(L),ue.success("Horario eliminado"),await C()}catch(F){ue.error("Error al eliminar"),n(F)}},A=L=>{w.days_of_week.includes(L)?_({...w,days_of_week:w.days_of_week.filter(F=>F!==L)}):_({...w,days_of_week:[...w.days_of_week,L]})};return u?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Horarios"})]}),!f&&r.length<S()&&i.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Nuevo horario"})]}),r.length>=S()&&S()!==1/0&&i.jsxs("div",{className:"mb-4 text-sm text-red-600",children:["Alcanzaste el mximo de horarios para tu plan ",a?.subscription_plan||"actual","."]}),f&&i.jsxs("form",{onSubmit:N,className:"bg-white shadow rounded-lg p-6 mb-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Das de la semana *"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Tfe.map(L=>i.jsx("button",{type:"button",onClick:()=>A(L),className:`px-4 py-2 rounded-md ${w.days_of_week.includes(L)?"bg-blue-600 text-white":"bg-gray-200 text-blue-800 hover:bg-gray-300"}`,children:MP[L]},L))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora inicio *"}),i.jsx("input",{type:"time",required:!0,step:xA,value:w.start_time,onChange:L=>_({...w,start_time:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora fin *"}),i.jsx("input",{type:"time",required:!0,step:xA,value:w.end_time,onChange:L=>_({...w,end_time:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsxs("select",{value:w.status,onChange:L=>_({...w,status:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"ACTIVE",children:"Activo"}),i.jsx("option",{value:"INACTIVE",children:"Inactivo"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:()=>{m(!1),y(null),_({days_of_week:[],start_time:"",end_time:"",status:"ACTIVE"})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:g?"Actualizar":"Crear"})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsxs("p",{className:"text-sm text-gray-600",children:[r.length," / ",S()===1/0?"":S()," horarios creados"]})}),i.jsxs("div",{className:"divide-y",children:[r.map(L=>i.jsxs("div",{className:"p-6 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:L.days_of_week?.map(F=>MP[F]).join(", ")}),i.jsxs("div",{className:"text-sm text-gray-600",children:[L.start_time," - ",L.end_time]}),i.jsx("span",{className:`inline-block mt-2 px-2 py-1 text-xs rounded badge-light ${L.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>k(L),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Editar"}),i.jsx("button",{onClick:()=>R(L.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Eliminar"})]})]},L.id)),r.length===0&&i.jsx("div",{className:"p-6 text-center text-gray-500",children:"No hay horarios configurados"})]})]})]})})}function Dfe(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState(null);x.useEffect(()=>{f()},[]);const f=async()=>{if(t?.company_id)try{const y=await th(t.company_id);s(y)}catch(y){n(y)}finally{l(!1)}},m=async y=>{if(confirm("Ests seguro de eliminar este servicio?"))try{await mJ(y),ue.success("Servicio eliminado"),await f()}catch(w){ue.error("Error al eliminar"),n(w)}},g=async(y,w)=>{try{await qI(y,{hide_price:!w}),ue.success(w?"Precio visible":"Precio oculto - consulta por WhatsApp"),await f()}catch(_){ue.error("Error al actualizar"),n(_)}};return a?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Servicios"})]}),i.jsx(jn,{to:"/dashboard/services/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Nuevo servicio"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.map(y=>i.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden border border-gray-100 hover:shadow-lg transition",children:[i.jsxs("button",{type:"button",onClick:()=>d(y.image_url||""),className:"w-full h-48 bg-gray-100 flex items-center justify-center group relative",children:[i.jsx("img",{src:y.image_url||"https://placehold.co/600x400/EEF2FF/1F2937?text=Sin+imagen",alt:y.name,className:"max-h-full max-w-full object-contain"}),i.jsx("span",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/15 transition flex items-center justify-center text-white text-lg opacity-0 group-hover:opacity-100",children:""})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-lg mb-2",children:y.name}),i.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:y.description}),i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["$",y.price.toLocaleString()]}),i.jsxs("span",{className:"text-sm text-gray-500",children:[y.estimated_duration_minutes," min"]})]}),i.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:`hide-price-${y.id}`,checked:y.hide_price||!1,onChange:()=>g(y.id,y.hide_price||!1),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("label",{htmlFor:`hide-price-${y.id}`,className:"text-sm text-gray-700 cursor-pointer",children:"Consulta precio por WhatsApp"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(jn,{to:`/dashboard/services/edit/${y.id}`,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm text-center hover:bg-blue-700",children:"Editar"}),i.jsx("button",{onClick:()=>m(y.id),className:"px-3 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Eliminar"})]}),i.jsx("div",{className:"mt-2",children:i.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded badge-light ${y.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.status})})]})]},y.id)),r.length===0&&i.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:["No hay servicios creados. ",i.jsx(jn,{to:"/dashboard/services/new",className:"text-blue-600 hover:underline",children:"Crear uno"})]})]})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative max-w-3xl w-full",children:[i.jsx("button",{onClick:()=>d(null),className:"absolute -top-10 right-0 text-white text-2xl","aria-label":"Cerrar",children:""}),i.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-lg max-h-[80vh] flex items-center justify-center",children:i.jsx("img",{src:u,alt:"Vista previa",className:"max-h-[80vh] max-w-full object-contain"})})]})})]})}function LP(){const{id:t}=Sm(),{firestoreUser:e}=an(),n=Ze(),{handleError:r}=St(),s=x.useMemo(()=>!e?.company_id||t?null:`service-form-draft-${e.company_id}`,[e?.company_id,t]),[a,l]=x.useState({name:"",description:"",price:"",image_url:"",estimated_duration_minutes:"",status:"ACTIVE"}),[u,d]=x.useState([]),[f,m]=x.useState([]),[g,y]=x.useState([]),[w,_]=x.useState([]),[C,S]=x.useState(!0),[N,k]=x.useState(!1);x.useEffect(()=>{R()},[t,e?.company_id]),x.useEffect(()=>{if(!s)return;const T=localStorage.getItem(s);if(T)try{const{formData:I,selectedSlots:V}=JSON.parse(T);I&&l(I),V&&m(V)}catch(I){r(I,{customMessage:"Error leyendo borrador de servicio"})}},[s]),x.useEffect(()=>{s&&localStorage.setItem(s,JSON.stringify({formData:a,selectedSlots:f}))},[s,a,f]);const R=async()=>{if(e?.company_id){S(!0);try{const[T,I]=await Promise.all([Tx(e.company_id),Ix(e.company_id)]);if(d(T),y(I),t){const V=await Ym(t);if(V){l({name:V.name,description:V.description,price:V.price.toString(),image_url:V.image_url,estimated_duration_minutes:V.estimated_duration_minutes.toString(),status:V.status});const $=await kx(t);m($.map(U=>U.schedule_slot_id)),_(V.professional_ids||[])}}}catch(T){r(T)}finally{S(!1)}}},A=async T=>{if(e?.company_id)try{const I=`companies/${e.company_id}/services/${Date.now()}`,V=await tp(T,I,Wf);l({...a,image_url:V}),ue.success("Imagen subida correctamente")}catch(I){ue.error("Error al subir imagen"),r(I)}},L=async T=>{if(T.preventDefault(),!!e?.company_id){if(f.length===0){ue.error("Debes seleccionar al menos un horario");return}if(w.length===0){ue.error("Debes asignar al menos un profesional");return}k(!0);try{const I={company_id:e.company_id,name:a.name,description:a.description,price:parseFloat(a.price),image_url:a.image_url,estimated_duration_minutes:parseInt(a.estimated_duration_minutes),status:a.status,professional_ids:w};console.log(" SERVICE DATA:",I),console.log(" FIRESTORE USER:",e);let V;t?(console.log(" Updating service:",t),await qI(t,I),V=t,ue.success("Servicio actualizado")):(console.log(" Creating new service..."),V=await fJ(I),console.log(" Service created with ID:",V),ue.success("Servicio creado"),s&&localStorage.removeItem(s)),console.log(" Setting schedules for service:",V,f),await pJ(V,f),n("/dashboard/services")}catch(I){console.error(" ERROR AL GUARDAR:",I),console.error(" ERROR CODE:",I?.code),console.error(" ERROR MESSAGE:",I?.message),ue.error("Error al guardar"),r(I)}finally{k(!1)}}},F=T=>{f.includes(T)?m(f.filter(I=>I!==T)):m([...f,T])},P=T=>{w.includes(T)?_(w.filter(I=>I!==T)):_([...w,T])};if(C)return i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const O={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"};return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx("button",{type:"button",onClick:()=>n(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Editar servicio":"Nuevo servicio"})]}),i.jsxs("form",{onSubmit:L,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"service-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),i.jsx("input",{id:"service-name",name:"name",type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:a.name,onChange:T=>l({...a,name:T.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"service-description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin *"}),i.jsx("textarea",{id:"service-description",name:"description",rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:a.description,onChange:T=>l({...a,description:T.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"service-price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor *"}),i.jsx("input",{id:"service-price",name:"price",type:"number",required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:a.price,onChange:T=>l({...a,price:T.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"service-duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Duracin estimada (minutos) *"}),i.jsx("input",{id:"service-duration",name:"estimated_duration_minutes",type:"number",required:!0,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:a.estimated_duration_minutes,onChange:T=>l({...a,estimated_duration_minutes:T.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"service-image",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagen *"}),i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:BI}),a.image_url&&i.jsx("img",{src:a.image_url,alt:"Preview",className:"h-48 mb-2 rounded"}),i.jsx("input",{id:"service-image",name:"image",type:"file",accept:"image/*",onChange:T=>{const I=T.target.files?.[0];I&&A(I)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"service-status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsxs("select",{id:"service-status",name:"status",value:a.status,onChange:T=>l({...a,status:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"ACTIVE",children:"Activo"}),i.jsx("option",{value:"INACTIVE",children:"Inactivo"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Profesionales asignados *"}),i.jsx("button",{type:"button",onClick:()=>n("/dashboard/professionals/new"),className:"text-sm text-blue-700 hover:underline",children:"Crear profesional"})]}),i.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto border rounded-md p-4",children:[g.map(T=>i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:w.includes(T.id),onChange:()=>P(T.id),className:"accent-blue-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:T.name}),(T.email||T.phone)&&i.jsx("div",{className:"text-xs text-gray-600",children:[T.email,T.phone].filter(Boolean).join("  ")})]})]},T.id)),g.length===0&&i.jsx("p",{className:"text-gray-500 text-sm",children:"No hay profesionales registrados. Puedes crearlos aqu mismo."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horarios disponibles * (selecciona al menos uno)"}),i.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto border rounded-md p-4",children:[u.filter(T=>T.status==="ACTIVE").map(T=>i.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 cursor-pointer schedule-slot",children:[i.jsx("input",{type:"checkbox",checked:f.includes(T.id),onChange:()=>F(T.id),className:"mr-2"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:T.days_of_week?.map(I=>O[I]).join(", ")}),i.jsxs("div",{className:"text-sm text-gray-600",children:[T.start_time," - ",T.end_time]})]})]},T.id)),u.filter(T=>T.status==="ACTIVE").length===0&&i.jsxs("p",{className:"text-gray-500 text-sm",children:["No hay horarios activos."," ",i.jsx("button",{type:"button",onClick:()=>n("/dashboard/services/schedules"),className:"text-blue-600 hover:underline",children:"Crear horarios"})]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:()=>n("/dashboard/services/schedules"),className:"px-6 py-2 bg-blue-100 text-blue-800 border border-blue-200 rounded-md hover:bg-blue-200 w-full sm:w-auto",children:"Nuevo horario"}),i.jsx("button",{type:"button",onClick:()=>{s&&localStorage.removeItem(s),n("/dashboard/services")},className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 w-full sm:w-auto",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:N,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 w-full sm:w-auto",children:N?"Guardando...":"Guardar"})]})]})]})})}const Ki=[{label:"Sans (Inter/Segoe)",value:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif'},{label:"Serif (Georgia)",value:'Georgia, "Times New Roman", serif'},{label:"Rounded (Nunito)",value:'"Nunito", "Segoe UI Rounded", system-ui, sans-serif'},{label:"Century Gothic",value:'"Century Gothic", "Apple Gothic", sans-serif'},{label:"Graffiti",value:'"Rock Salt", "Comic Sans MS", cursive'},{label:"Code",value:'"Source Code Pro", "Fira Code", monospace'},{label:"Display (Oswald)",value:'"Oswald", "Arial Narrow", sans-serif'},{label:"Grotesk (Space Grotesk)",value:'"Space Grotesk", "Inter", system-ui, sans-serif'},{label:"Humanist (Gill Sans)",value:'"Gill Sans", "Trebuchet MS", sans-serif'}];function Afe(){const{firestoreUser:t}=an(),{handleError:e}=St(),[n,r]=x.useState({logo_url:"",banner_url:"",logo_position:"center",background_color:"#ffffff",card_color:"#ffffff",background_opacity:1,card_opacity:1,button_color:"#2563eb",button_text_color:"#ffffff",title_color:"#111827",subtitle_color:"#4b5563",text_color:"#4b5563",font_title:Ki[0].value,font_body:Ki[0].value,font_button:Ki[0].value,layout:"GRID",card_layout:1,show_whatsapp_fab:!1}),[s,a]=x.useState({weekday_days:[],weekday_open_time:"",weekday_close_time:"",weekend_days:[],weekend_open_time:"",weekend_close_time:""}),[l,u]=x.useState(!1),[d,f]=x.useState(!0),[m,g]=x.useState(!1),y=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],w={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"};x.useEffect(()=>{_()},[]);const _=async()=>{if(t?.company_id)try{const[N,k]=await Promise.all([jx(t.company_id,un.PRODUCTS),Vr(t.company_id)]);N&&r({logo_url:N.logo_url||"",banner_url:N.banner_url||"",logo_position:N.logo_position||"center",background_color:N.background_color||"#ffffff",card_color:N.card_color||"#ffffff",background_opacity:N.background_opacity??1,card_opacity:N.card_opacity??1,button_color:N.button_color||"#2563eb",button_text_color:N.button_text_color||"#ffffff",title_color:N.title_color||"#111827",subtitle_color:N.subtitle_color||"#4b5563",text_color:N.text_color||"#4b5563",font_title:N.font_title||Ki[0].value,font_body:N.font_body||Ki[0].value,font_button:N.font_button||Ki[0].value,layout:N.layout||"GRID",card_layout:N.card_layout||1,show_whatsapp_fab:N.show_whatsapp_fab||!1}),k&&(a({weekday_days:k.weekday_days||[],weekday_open_time:k.weekday_open_time||"",weekday_close_time:k.weekday_close_time||"",weekend_days:k.weekend_days||[],weekend_open_time:k.weekend_open_time||"",weekend_close_time:k.weekend_close_time||""}),u(k.delivery_enabled||!1))}catch(N){e(N)}finally{f(!1)}},C=async(N,k)=>{if(t?.company_id)try{const R=`companies/${t.company_id}/${k}_${Date.now()}`,A=await tp(N,R,k==="logo"?{width:512,height:512,maxSizeKB:500,format:"image/png",quality:.95}:{width:1600,height:600,maxSizeKB:1e3,format:"image/jpeg",quality:.9});r(k==="logo"?{...n,logo_url:A}:{...n,banner_url:A}),ue.success("Imagen subida correctamente")}catch(R){ue.error("Error al subir imagen"),e(R)}},S=async N=>{if(N.preventDefault(),!!t?.company_id){g(!0);try{await Promise.all([$I(t.company_id,un.PRODUCTS,n),Xc(t.company_id,{weekday_days:s.weekday_days,weekday_open_time:s.weekday_open_time,weekday_close_time:s.weekday_close_time,weekend_days:s.weekend_days,weekend_open_time:s.weekend_open_time,weekend_close_time:s.weekend_close_time,delivery_enabled:l})]),ue.success("Configuracin guardada")}catch(k){ue.error("Error al guardar"),e(k)}finally{g(!1)}}};return d?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuracin Visual - Productos"})]}),i.jsxs("form",{onSubmit:S,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Recomendado: 512x512 px, PNG transparente o JPG, mx ~500KB."}),n.logo_url&&i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("img",{src:n.logo_url,alt:"Logo",className:"h-24"}),i.jsx("button",{type:"button",onClick:()=>r({...n,logo_url:""}),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Eliminar logo"})]}),i.jsx("input",{type:"file",accept:"image/*",onChange:N=>{const k=N.target.files?.[0];k&&C(k,"logo")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),n.logo_url&&i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Posicin del logo"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsx("button",{type:"button",onClick:()=>r({...n,logo_position:"left"}),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${n.logo_position==="left"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg mb-1",children:""}),i.jsx("div",{className:"text-sm",children:"Izquierda"})]})}),i.jsx("button",{type:"button",onClick:()=>r({...n,logo_position:"center"}),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${n.logo_position==="center"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg mb-1",children:""}),i.jsx("div",{className:"text-sm",children:"Centro"})]})}),i.jsx("button",{type:"button",onClick:()=>r({...n,logo_position:"right"}),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${n.logo_position==="right"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg mb-1",children:""}),i.jsx("div",{className:"text-sm",children:"Derecha"})]})})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"El logo se mostrar ms grande cuando est centrado para mayor visibilidad."})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banner"}),i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Recomendado: 1600x600 px, JPG o PNG, mx ~1MB."}),n.banner_url&&i.jsxs("div",{className:"mb-2",children:[i.jsx("img",{src:n.banner_url,alt:"Banner",className:"w-full h-48 object-cover rounded mb-2"}),i.jsx("button",{type:"button",onClick:()=>r({...n,banner_url:""}),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Eliminar banner"})]}),i.jsx("input",{type:"file",accept:"image/*",onChange:N=>{const k=N.target.files?.[0];k&&C(k,"banner")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de fondo"}),i.jsx("input",{type:"color",value:n.background_color,onChange:N=>r({...n,background_color:N.target.value}),className:"h-10 w-full"}),i.jsx("label",{className:"block text-sm font-medium text-gray-700 mt-2",children:"Transparencia de fondo"}),i.jsx("input",{type:"range",min:0,max:100,value:Math.round((n.background_opacity??1)*100),onChange:N=>r({...n,background_opacity:Number(N.target.value)/100}),className:"w-full"}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Opacidad: ",Math.round((n.background_opacity??1)*100),"%"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de tarjetas"}),i.jsx("input",{type:"color",value:n.card_color,onChange:N=>r({...n,card_color:N.target.value}),className:"h-10 w-full"}),i.jsx("label",{className:"block text-sm font-medium text-gray-700 mt-2",children:"Transparencia de tarjetas"}),i.jsx("input",{type:"range",min:0,max:100,value:Math.round((n.card_opacity??1)*100),onChange:N=>r({...n,card_opacity:Number(N.target.value)/100}),className:"w-full"}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Opacidad: ",Math.round((n.card_opacity??1)*100),"%"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de botones"}),i.jsx("input",{type:"color",value:n.button_color,onChange:N=>r({...n,button_color:N.target.value}),className:"h-10 w-full"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texto de botones"}),i.jsx("input",{type:"color",value:n.button_text_color,onChange:N=>r({...n,button_text_color:N.target.value}),className:"h-10 w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de ttulos"}),i.jsx("input",{type:"color",value:n.title_color,onChange:N=>r({...n,title_color:N.target.value}),className:"h-10 w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de subttulos"}),i.jsx("input",{type:"color",value:n.subtitle_color,onChange:N=>r({...n,subtitle_color:N.target.value}),className:"h-10 w-full"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de texto"}),i.jsx("input",{type:"color",value:n.text_color,onChange:N=>r({...n,text_color:N.target.value}),className:"h-10 w-full"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Horario semana"}),i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-sm font-medium mb-2 text-gray-700",children:"Das"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(N=>i.jsx("button",{type:"button",onClick:()=>a(k=>({...k,weekday_days:k.weekday_days.includes(N)?k.weekday_days.filter(R=>R!==N):[...k.weekday_days,N]})),className:`px-3 py-1 rounded-md text-sm ${s.weekday_days.includes(N)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:w[N]},N))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),i.jsx("input",{type:"time",value:s.weekday_open_time,onChange:N=>a(k=>({...k,weekday_open_time:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),i.jsx("input",{type:"time",value:s.weekday_close_time,onChange:N=>a(k=>({...k,weekday_close_time:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Horario fin de semana"}),i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-sm font-medium mb-2 text-gray-700",children:"Das"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(N=>i.jsx("button",{type:"button",onClick:()=>a(k=>({...k,weekend_days:k.weekend_days.includes(N)?k.weekend_days.filter(R=>R!==N):[...k.weekend_days,N]})),className:`px-3 py-1 rounded-md text-sm ${s.weekend_days.includes(N)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:w[N]},N))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),i.jsx("input",{type:"time",value:s.weekend_open_time,onChange:N=>a(k=>({...k,weekend_open_time:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),i.jsx("input",{type:"time",value:s.weekend_close_time,onChange:N=>a(k=>({...k,weekend_close_time:N.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente ttulos"}),i.jsx("select",{value:n.font_title,onChange:N=>r({...n,font_title:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Ki.map(N=>i.jsx("option",{value:N.value,children:N.label},N.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente cuerpo"}),i.jsx("select",{value:n.font_body,onChange:N=>r({...n,font_body:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Ki.map(N=>i.jsx("option",{value:N.value,children:N.label},N.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente botones"}),i.jsx("select",{value:n.font_button,onChange:N=>r({...n,font_button:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Ki.map(N=>i.jsx("option",{value:N.value,children:N.label},N.value))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Layout"}),i.jsxs("select",{value:n.layout,onChange:N=>r({...n,layout:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"GRID",children:"Grid"}),i.jsx("option",{value:"LIST",children:"Lista"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Layout Premium de Tarjetas"}),i.jsxs("select",{value:n.card_layout,onChange:N=>r({...n,card_layout:Number(N.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:1,children:"Layout 1: Grid Clsico"}),i.jsx("option",{value:2,children:"Layout 2: Lista con Imagen Circular"}),i.jsx("option",{value:3,children:"Layout 3: Carrusel Fullscreen"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecciona el diseo premium para las tarjetas de productos en tu pgina pblica."})]}),i.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4",children:[i.jsx("input",{id:"whatsappFab",type:"checkbox",className:"mt-1 h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:n.show_whatsapp_fab,onChange:N=>r({...n,show_whatsapp_fab:N.target.checked})}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"whatsappFab",className:"text-sm font-medium text-gray-900",children:"Mostrar botn flotante de WhatsApp"}),i.jsx("p",{className:"text-xs text-gray-600",children:"Permite a los clientes abrir WhatsApp desde la esquina inferior de la pgina pblica de productos."})]})]}),i.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4 bg-green-50",children:[i.jsx("input",{id:"deliveryEnabled",type:"checkbox",className:"mt-1 h-5 w-5 text-green-600 border-gray-300 rounded focus:ring-green-500",checked:l,onChange:N=>u(N.target.checked)}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"deliveryEnabled",className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:" Recibir pedidos a domicilio"}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Al activar esta opcin, los clientes podrn solicitar entrega a domicilio en el carrito de compras. Se les pedir que compartan su direccin y ubicacin por WhatsApp."})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Guardando...":"Guardar"})})]})]})})}function Gx({children:t,className:e="",style:n,delay:r=0}){return i.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:r},whileHover:{y:-4,transition:{duration:.2}},className:e,style:n,children:t})}function Rfe(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState(null);x.useEffect(()=>{f()},[]);const f=async()=>{if(t?.company_id)try{const y=await FC(t.company_id);s(y)}catch(y){n(y)}finally{l(!1)}},m=async y=>{if(confirm("Ests seguro de eliminar este producto?"))try{await xJ(y),ue.success("Producto eliminado"),await f()}catch(w){ue.error("Error al eliminar"),n(w)}},g=async(y,w)=>{try{await YI(y,{hide_price:!w}),ue.success(w?"Precio visible":"Precio oculto - consulta por WhatsApp"),await f()}catch(_){ue.error("Error al actualizar"),n(_)}};return a?i.jsx(zn,{fullScreen:!0,size:"lg"}):i.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-8",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Productos"})]}),i.jsx(jn,{to:"/dashboard/products/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Nuevo producto"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.map((y,w)=>i.jsxs(Gx,{delay:w*.1,className:"bg-white shadow rounded-lg overflow-hidden border border-gray-100",children:[i.jsxs("button",{type:"button",onClick:()=>d(y.image_url||""),className:"w-full h-48 bg-gray-100 flex items-center justify-center group relative",children:[i.jsx("img",{src:y.image_url||"https://placehold.co/600x400/EEF2FF/1F2937?text=Sin+imagen",alt:y.name,className:"max-h-full max-w-full object-contain"}),i.jsx("span",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/15 transition flex items-center justify-center text-white text-lg opacity-0 group-hover:opacity-100",children:""})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-lg mb-2",children:y.name}),i.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:y.description}),i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["$",y.price.toLocaleString()]}),y.weight&&i.jsxs("span",{className:"text-sm text-gray-500",children:[y.weight,"g"]})]}),i.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:`hide-price-${y.id}`,checked:y.hide_price||!1,onChange:()=>g(y.id,y.hide_price||!1),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsx("label",{htmlFor:`hide-price-${y.id}`,className:"text-sm text-gray-700 cursor-pointer",children:"Consulta precio por WhatsApp"})]}),y.tags&&y.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:y.tags.map((_,C)=>i.jsx("span",{className:"px-2 py-1 text-xs rounded border",style:{backgroundColor:"#f8fafc",color:"#0f172a",borderColor:"#cbd5e1"},children:_},C))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(jn,{to:`/dashboard/products/edit/${y.id}`,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm text-center hover:bg-blue-700",children:"Editar"}),i.jsx(xn,{onClick:()=>m(y.id),className:"px-3 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Eliminar"})]}),i.jsx("div",{className:"mt-2",children:i.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded badge-light ${y.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:y.status})})]})]},y.id)),r.length===0&&i.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:["No hay productos creados. ",i.jsx(jn,{to:"/dashboard/products/new",className:"text-blue-600 hover:underline",children:"Crear uno"})]})]})]}),i.jsxs(tu,{isOpen:!!u,onClose:()=>d(null),className:"relative max-w-3xl p-0 bg-transparent shadow-none",children:[i.jsx("button",{onClick:()=>d(null),className:"absolute -top-10 right-0 text-white text-2xl z-10","aria-label":"Cerrar",children:""}),i.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-lg max-h-[80vh] flex items-center justify-center",children:i.jsx("img",{src:u||"",alt:"Vista previa",className:"max-h-[80vh] max-w-full object-contain"})})]})]})}function OP(){const{id:t}=Sm(),{firestoreUser:e}=an(),n=Ze(),{handleError:r}=St(),[s,a]=x.useState({name:"",description:"",price:"",image_url:"",weight:"",kcal:"",tags:"",status:"ACTIVE"}),[l,u]=x.useState(!0),[d,f]=x.useState(!1);x.useEffect(()=>{m()},[t]);const m=async()=>{if(!e?.company_id){u(!1);return}try{if(t){const w=await gJ(t);w&&a({name:w.name,description:w.description,price:w.price.toString(),image_url:w.image_url,weight:w.weight?.toString()||"",kcal:w.kcal?.toString()||"",tags:w.tags?.join(", ")||"",status:w.status})}}catch(w){r(w)}finally{u(!1)}},g=async w=>{if(e?.company_id)try{const _=`companies/${e.company_id}/products/${Date.now()}`,C=await tp(w,_,Wf);a({...s,image_url:C}),ue.success("Imagen subida correctamente")}catch(_){ue.error("Error al subir imagen"),r(_)}},y=async w=>{if(w.preventDefault(),!!e?.company_id){f(!0);try{const _={company_id:e.company_id,name:s.name,description:s.description,price:parseFloat(s.price),image_url:s.image_url,status:s.status};s.weight&&(_.weight=parseFloat(s.weight)),s.kcal&&(_.kcal=parseFloat(s.kcal)),s.tags&&(_.tags=s.tags.split(",").map(C=>C.trim()).filter(C=>C)),t?(await YI(t,_),ue.success("Producto actualizado")):(await yJ(_),ue.success("Producto creado")),n("/dashboard/products")}catch(_){ue.error("Error al guardar"),r(_)}finally{f(!1)}}};return l?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx("button",{type:"button",onClick:()=>n(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Editar producto":"Nuevo producto"})]}),i.jsxs("form",{onSubmit:y,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),i.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:s.name,onChange:w=>a({...s,name:w.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin *"}),i.jsx("textarea",{rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:s.description,onChange:w=>a({...s,description:w.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio *"}),i.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:s.price,onChange:w=>a({...s,price:w.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso (g)"}),i.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:s.weight,onChange:w=>a({...s,weight:w.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kcal"}),i.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:s.kcal,onChange:w=>a({...s,kcal:w.target.value})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiquetas (separadas por comas)"}),i.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"vegano, sin gluten, orgnico",value:s.tags,onChange:w=>a({...s,tags:w.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagen *"}),i.jsx("p",{className:"text-xs text-gray-500 mb-1",children:BI}),s.image_url&&i.jsx("img",{src:s.image_url,alt:"Preview",className:"h-48 mb-2 rounded"}),i.jsx("input",{type:"file",accept:"image/*",onChange:w=>{const _=w.target.files?.[0];_&&g(_)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsxs("select",{value:s.status,onChange:w=>a({...s,status:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[i.jsx("option",{value:"ACTIVE",children:"Activo"}),i.jsx("option",{value:"INACTIVE",children:"Inactivo"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[i.jsx("button",{type:"button",onClick:()=>n("/dashboard/products"),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 w-full sm:w-auto",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 w-full sm:w-auto",children:d?"Guardando...":"Guardar"})]})]})]})})}function Pfe(){const{firestoreUser:t}=an(),{handleError:e}=St(),n=Ze(),[r,s]=x.useState(!0),[a,l]=x.useState(!1),[u,d]=x.useState(!1),[f,m]=x.useState(""),[g,y]=x.useState("VERTICAL"),[w,_]=x.useState("cover"),[C,S]=x.useState(!1),[N,k]=x.useState(""),[R,A]=x.useState(null),[L,F]=x.useState(100),P=x.useRef(null),O=x.useRef(null),T=x.useRef(!0),I=x.useRef(null);x.useEffect(()=>(T.current=!0,()=>{T.current=!1,I.current&&(URL.revokeObjectURL(I.current),I.current=null),S(!1),l(!1)}),[]),x.useEffect(()=>{(async()=>{if(!t?.company_id){T.current&&s(!1);return}try{const W=await Vr(t.company_id);W&&T.current&&(d(!!W.background_enabled),m(W.background_url||""),y("VERTICAL"),_(W.background_fit||"cover"),F(W.background_opacity??100),W.background_url&&(k(W.background_url),V(W.background_url)))}catch(W){T.current&&e(W,{customMessage:"No se pudo cargar el fondo"})}finally{T.current&&s(!1)}})()},[t?.company_id,e]);const V=G=>{const W=new Image;W.crossOrigin="anonymous",W.onload=()=>{if(!T.current)return;const z=W.width/W.height;A({width:W.width,height:W.height,aspectRatio:z,sizeKB:0,format:G.split(".").pop()?.toUpperCase()||"UNKNOWN"})},W.onerror=()=>{T.current&&A(null)},W.src=G},$=async G=>{if(!G||!t?.company_id)return;if(!["image/jpeg","image/jpg","image/png","image/webp","image/avif"].includes(G.type)){ue.error("Formato no soportado. Usa JPG, PNG, WebP o AVIF");return}const z=10;if(G.size>z*1024*1024){ue.error(`La imagen es muy grande. Mximo ${z}MB`);return}const q=new FileReader;q.onload=K=>{if(!T.current)return;const X=K.target?.result;k(X);const se=new Image;se.onload=()=>{if(!T.current)return;const H=se.width/se.height;A({width:se.width,height:se.height,aspectRatio:H,sizeKB:Math.round(G.size/1024),format:G.type.split("/")[1].toUpperCase()})},se.src=X},q.readAsDataURL(G),S(!0);try{const K=`backgrounds/${t.company_id}/${Date.now()}-${G.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`;I.current&&URL.revokeObjectURL(I.current);const X=new Image,se=URL.createObjectURL(G);I.current=se,X.onload=()=>{if(!T.current){URL.revokeObjectURL(se);return}const Z=X.width/X.height>1;let te=Z?2560:1440,J=Z?1440:2560;X.width<te?(te=X.width,J=Math.round(X.height*(te/X.width))):X.height<J&&(J=X.height,te=Math.round(X.width*(J/X.height)));const ne=X.width>2e3?.85:.92;tp(G,K,{width:te,height:J,maxSizeKB:2e3,format:"image/jpeg",quality:ne}).then(me=>{T.current&&(m(me),k(me),ue.success("Imagen subida y optimizada correctamente"))}).catch(me=>{T.current&&(ue.error("No se pudo subir la imagen"),e(me))}).finally(()=>{T.current&&(S(!1),P.current&&(P.current.value="")),URL.revokeObjectURL(se),I.current===se&&(I.current=null)})},X.onerror=()=>{URL.revokeObjectURL(se),I.current===se&&(I.current=null),T.current&&(S(!1),ue.error("Error al cargar la imagen"))},X.src=se}catch(K){T.current&&(ue.error("Error al procesar la imagen"),e(K),S(!1))}},U=async G=>{if(G.preventDefault(),!!t?.company_id){l(!0);try{await Xc(t.company_id,{background_enabled:u,background_url:f.trim(),background_orientation:g,background_fit:w,background_opacity:L}),ue.success(" Fondo actualizado correctamente")}catch(W){ue.error(" No se pudo guardar el fondo"),e(W)}finally{l(!1)}}};return r?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-5xl mx-auto",children:[i.jsxs("div",{className:"bg-white shadow-lg rounded-xl p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Fondo de la Ficha Pblica"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Personaliza el fondo de tu pgina pblica con una imagen de alta calidad. El sistema optimizar automticamente la imagen para mantener la mejor resolucin en todos los dispositivos."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:()=>n(-1),className:"px-4 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:" Volver"}),i.jsx("button",{type:"button",onClick:()=>n("/dashboard"),className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Dashboard"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("h3",{className:"font-semibold text-blue-900",children:"Formatos Soportados"})]}),i.jsx("p",{className:"text-xs text-blue-700",children:"JPG, PNG, WebP, AVIF. Hasta 10MB. Se optimizar automticamente."})]}),i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("h3",{className:"font-semibold text-green-900",children:"Resoluciones Recomendadas"})]}),i.jsx("p",{className:"text-xs text-green-700",children:"Horizontal: 2560x1440px (2K) o superior. Vertical: 1440x2560px o superior."})]}),i.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("h3",{className:"font-semibold text-purple-900",children:"Optimizacin Automtica"})]}),i.jsx("p",{className:"text-xs text-purple-700",children:"La imagen se redimensiona y comprime manteniendo la mxima calidad visual."})]})]})]}),i.jsx("div",{className:"bg-white shadow-lg rounded-xl p-6",children:i.jsxs("form",{className:"space-y-6",onSubmit:U,children:[i.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border-2 border-gray-200",children:i.jsxs("label",{className:"inline-flex items-center gap-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:u,onChange:G=>d(G.target.checked),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-base font-semibold text-gray-900 block",children:"Mostrar fondo en la ficha pblica"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Activa esta opcin para mostrar la imagen de fondo"})]})]})}),u&&i.jsxs("div",{className:"space-y-6",children:[N&&i.jsxs("div",{className:"relative bg-gray-100 rounded-xl overflow-hidden border-2 border-gray-300",children:[i.jsxs("div",{className:"relative h-64 sm:h-96 overflow-hidden",children:[i.jsx("img",{ref:O,src:N,alt:"Preview del fondo",className:"w-full h-full transition-all duration-300",style:{opacity:L/100,objectFit:w,objectPosition:"center"},onError:()=>{T.current&&(k(""),ue.error("No se pudo cargar la imagen"))}}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]}),R&&i.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/70 text-white text-xs p-2 rounded backdrop-blur-sm",children:i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-300",children:"Dimensiones:"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[R.width,"  ",R.height,"px"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-300",children:"Aspect Ratio:"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[R.aspectRatio.toFixed(2),":1"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-300",children:"Formato:"}),i.jsx("span",{className:"ml-1 font-semibold",children:R.format})]}),R.sizeKB>0&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-300",children:"Tamao:"}),i.jsxs("span",{className:"ml-1 font-semibold",children:[R.sizeKB," KB"]})]})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"URL de la imagen"}),i.jsx("input",{type:"url",placeholder:"https://ejemplo.com/imagen.jpg",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",value:f,onChange:G=>{if(!T.current)return;const W=G.target.value.trim();x.startTransition(()=>{m(W),W?(k(W),V(W)):(k(""),A(null))})},disabled:C}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Ingresa una URL directa a la imagen. Asegrate de que sea accesible pblicamente."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"O sube una imagen desde tu dispositivo"}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("label",{className:"flex-1 cursor-pointer",children:[i.jsx("input",{ref:P,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/avif",disabled:C,onChange:G=>{const W=G.target.files?.[0];W&&$(W)},className:"hidden"}),i.jsx("div",{className:"px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:C?i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Subiendo y optimizando..."})]}):i.jsxs("div",{children:[i.jsx("span",{className:"text-blue-600 font-medium",children:" Click para seleccionar"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, WebP, AVIF (mx 10MB)"})]})})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Ajuste de la imagen"}),i.jsxs("select",{value:w,onChange:G=>{T.current&&x.startTransition(()=>{_(G.target.value)})},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[i.jsx("option",{value:"cover",children:" Cover - Cubre todo el espacio (puede recortar)"}),i.jsx("option",{value:"contain",children:" Contain - Muestra toda la imagen (puede dejar espacios)"}),i.jsx("option",{value:"fill",children:" Fill - Estira para llenar (puede distorsionar)"}),i.jsx("option",{value:"scale-down",children:" Scale Down - Reduce si es necesario (mantiene proporcin)"})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[i.jsx("strong",{children:"Cover:"})," Mejor para fondos decorativos.",i.jsx("strong",{children:" Contain:"})," Mejor para preservar toda la imagen."]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Opacidad: ",L,"%"]}),i.jsx("input",{type:"range",min:"10",max:"100",value:L,onChange:G=>{T.current&&x.startTransition(()=>{F(Number(G.target.value))})},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[i.jsx("span",{children:"10% (Muy transparente)"}),i.jsx("span",{children:"100% (Completamente opaco)"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Ajusta la opacidad para que el contenido sea ms legible sobre el fondo."})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[i.jsx("button",{type:"button",onClick:()=>n(-1),className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:a||u&&!f.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:a?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"animate-spin inline-block rounded-full h-4 w-4 border-b-2 border-white"}),"Guardando..."]}):i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{children:""}),"Guardar Configuracin"]})})]})]})})]})})}function Kx(t){if(!t||typeof t!="string")return null;const e=t.trim();if(/^[a-zA-Z0-9_-]{11}$/.test(e))return e;const n=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/^https?:\/\/(?:www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})/,/^https?:\/\/youtu\.be\/([a-zA-Z0-9_-]{11})/,/^https?:\/\/(?:www\.)?youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/];for(const s of n){const a=e.match(s);if(a&&a[1])return a[1]}const r=e.match(/src=["']([^"']+)["']/);return r?Kx(r[1]):null}function IP(t){if(!t||typeof t!="string"||!t.trim())return{videoId:"",embedUrl:"",isValid:!1,error:"URL vaca"};const e=Kx(t.trim());if(!e)return{videoId:"",embedUrl:"",isValid:!1,error:"URL de YouTube no vlida. Acepta enlaces como: https://youtu.be/VIDEO_ID o https://www.youtube.com/watch?v=VIDEO_ID"};const n=`https://www.youtube.com/embed/${e}?rel=0&modestbranding=1`;return{videoId:e,embedUrl:n,isValid:!0}}function Mfe(t,e="high"){return`https://img.youtube.com/vi/${t}/${{default:"default.jpg",medium:"mqdefault.jpg",high:"hqdefault.jpg",maxres:"maxresdefault.jpg"}[e]}`}function Lfe(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState(!0),[a,l]=x.useState(!1),[u,d]=x.useState(!1),[f,m]=x.useState(""),[g,y]=x.useState("HERO"),[w,_]=x.useState(null);x.useEffect(()=>{if(!f.trim()){_(null);return}const N=IP(f);_(N)},[f]),x.useEffect(()=>{(async()=>{if(!t?.company_id){s(!1);return}try{const k=await Vr(t.company_id);if(k){d(!!k.video_enabled);const R=k.video_url||"";if(m(R),R){const A=IP(R);_(A)}y(k.video_placement||"HERO")}}catch(k){n(k,{customMessage:"No se pudo cargar el video"})}finally{s(!1)}})()},[t?.company_id,n]);const C=async N=>{if(N.preventDefault(),!!t?.company_id){if(u){if(!f.trim()){ue.error("Por favor ingresa una URL de YouTube");return}if(!w?.isValid){ue.error(w?.error||"URL de YouTube no vlida");return}}l(!0);try{let k;w?.isValid&&w.videoId?k=w.embedUrl:k=f.trim(),console.log("[BrandingVideo] Saving video:",{enabled:u,placement:g,urlToSave:k,videoInfo:w}),await Xc(t.company_id,{video_enabled:u,video_url:k,video_placement:g}),ue.success("Video actualizado correctamente")}catch(k){ue.error("No se pudo guardar el video"),n(k)}finally{l(!1)}}},S=x.useMemo(()=>w?.isValid&&w.videoId?Mfe(w.videoId,"high"):null,[w]);return r?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:i.jsx(zn,{size:"lg"})}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsx("div",{className:"bg-white shadow rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Video en ficha pblica"}),i.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Agrega un enlace de YouTube para mostrar en tu ficha pblica. Puedes activar/desactivar el video y elegir cmo se presenta."})]}),i.jsxs("button",{type:"button",onClick:()=>e("/dashboard"),className:"px-4 py-2 text-sm font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]})]})}),i.jsxs("form",{className:"bg-white shadow rounded-xl p-6 space-y-6",onSubmit:C,children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"checkbox",id:"video-enabled",checked:u,onChange:N=>d(N.target.checked),className:"h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),i.jsx("label",{htmlFor:"video-enabled",className:"text-sm font-semibold text-gray-900 cursor-pointer",children:"Mostrar video en la ficha pblica"})]}),u&&i.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold",children:"Activo"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Enlace de YouTube"}),i.jsx("input",{type:"text",placeholder:"https://youtu.be/VIDEO_ID o https://www.youtube.com/watch?v=VIDEO_ID",className:`w-full px-4 py-3 border-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors ${w&&!w.isValid&&f.trim()?"border-red-300 focus:border-red-500":w?.isValid?"border-green-300 focus:border-green-500":"border-gray-300 focus:border-indigo-500"}`,value:f,onChange:N=>m(N.target.value),disabled:!u,required:u}),w&&!w.isValid&&f.trim()&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),w.error]}),w?.isValid&&i.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"URL de YouTube vlida"]}),i.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Acepta enlaces de YouTube en formato: ",i.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"youtu.be/VIDEO_ID"})," o ",i.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"youtube.com/watch?v=VIDEO_ID"})]})]}),u&&w?.isValid&&w.embedUrl&&i.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-gray-50",children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Vista previa del video"}),i.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:i.jsx("iframe",{src:w.embedUrl,className:"absolute top-0 left-0 w-full h-full rounded-lg",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Vista previa del video"})}),S&&i.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Video ID: ",i.jsx("code",{className:"bg-gray-200 px-1 rounded",children:w.videoId})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Ubicacin del video"}),i.jsxs("select",{value:g,onChange:N=>y(N.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",disabled:!u,children:[i.jsx("option",{value:"MODAL",children:"Ventana emergente al iniciar (con botn cerrar)"}),i.jsx("option",{value:"HERO",children:"Tarjeta destacada al inicio del contenido"}),i.jsx("option",{value:"FOOTER",children:"Tarjeta al final del contenido"})]}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Elige dnde se mostrar el video en tu ficha pblica"})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[i.jsx("button",{type:"button",onClick:()=>{m(""),_(null),d(!1)},className:"px-4 py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpiar"}),i.jsx("button",{type:"submit",disabled:a||u&&!w?.isValid,className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx(zn,{size:"sm"}),"Guardando..."]}):"Guardar video"})]})]})]})})}function e9({appointment:t,serviceName:e,professionalName:n,onConfirm:r,onCancel:s,onEdit:a,showActions:l=!0}){const u={[Le.REQUESTED]:"bg-yellow-100 text-yellow-800 border-yellow-300",[Le.CONFIRMED]:"bg-green-100 text-green-800 border-green-300",[Le.CANCELLED]:"bg-red-100 text-red-800 border-red-300",[Le.COMPLETED]:"bg-blue-100 text-blue-800 border-blue-300",[Le.NO_SHOW]:"bg-gray-100 text-gray-800 border-gray-300"},d={[Le.REQUESTED]:"Solicitada",[Le.CONFIRMED]:"Confirmada",[Le.CANCELLED]:"Cancelada",[Le.COMPLETED]:"Completada",[Le.NO_SHOW]:"No asisti"};return i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border-2 border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.client_name}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",t.client_phone]}),t.client_email&&i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",t.client_email]}),t.client_rut&&i.jsxs("p",{className:"text-sm text-gray-600",children:[" RUT: ",t.client_rut]})]})]}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${u[t.status]}`,children:d[t.status]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4 p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium text-base",children:""}),i.jsx("span",{className:"font-medium",children:yn(t.appointment_date,"EEEE d 'de' MMMM",{locale:Sa})})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium text-base",children:""}),i.jsxs("span",{className:"font-medium",children:[t.start_time," - ",t.end_time]})]}),e&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium text-base",children:""}),i.jsx("span",{children:e})]}),n&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium text-base",children:""}),i.jsxs("span",{className:"font-medium text-blue-700",children:["Profesional: ",n]})]})]}),t.notes&&i.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700",children:[i.jsx("span",{className:"font-medium text-base",children:""}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Notas:"}),i.jsx("p",{className:"mt-1",children:t.notes})]})]})}),l&&t.status!==Le.CANCELLED&&i.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[t.status===Le.REQUESTED&&r&&i.jsx("button",{type:"button",onClick:()=>r(t.id),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium",children:"Confirmar"}),a&&i.jsx("button",{type:"button",onClick:()=>a(t.id),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium",children:"Editar"}),s&&i.jsx("button",{type:"button",onClick:()=>s(t.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium",children:"Cancelar"})]})]})}function Ofe({appointments:t,services:e,professionals:n,onConfirm:r,onCancel:s,loading:a=!1}){return a?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(zn,{size:"lg"})}):t.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500 text-lg",children:" No hay citas pendientes"})}):i.jsx("div",{className:"space-y-4",children:t.map(l=>{const u=e.find(f=>f.id===l.service_id),d=n.find(f=>f.id===l.professional_id);return i.jsx(e9,{appointment:l,serviceName:u?.name,professionalName:d?.name,onConfirm:r,onCancel:s,showActions:!0},l.id)})})}function Ife(){const t=Ze(),{firestoreUser:e}=an(),{handleError:n}=St(),[r,s]=x.useState(!0),[a,l]=x.useState([]),[u,d]=x.useState([]),[f,m]=x.useState([]),[g,y]=x.useState([]),[w,_]=x.useState(new Date),[C,S]=x.useState("day"),[N,k]=x.useState("all"),[R,A]=x.useState(!1);x.useEffect(()=>{L()},[]),x.useEffect(()=>{if(!e?.company_id)return;const V=C==="day"?new Date(w.setHours(0,0,0,0)):Ts(w,{weekStartsOn:1}),$=C==="day"?new Date(w.setHours(23,59,59,999)):fd(w,{weekStartsOn:1}),U=Z5(e.company_id,V,$,G=>{m(N==="all"?G:G.filter(W=>W.professional_id===N))});return()=>U()},[e?.company_id,w,C,N]);const L=async()=>{if(e?.company_id)try{const[V,$,U]=await Promise.all([th(e.company_id),Y5(e.company_id),Zw(e.company_id)]);l(V),d($),y(U)}catch(V){n(V)}finally{s(!1)}},F=async V=>{try{if(await X5(V),ue.success("Cita confirmada. Se enviaron notificaciones al cliente."),e?.company_id){const $=await Zw(e.company_id);y($)}}catch($){n($)}},P=async V=>{if(confirm("Ests seguro de cancelar esta cita? Se enviar una notificacin al cliente."))try{if(await Q5(V),ue.success("Cita cancelada. Se enviaron notificaciones al cliente."),e?.company_id){const $=await Zw(e.company_id);y($)}}catch($){n($)}},O=V=>f.filter($=>I4($.appointment_date,V)),T=()=>{const V=O(w);return V.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500 text-lg",children:"No hay citas para este da"})}):i.jsx("div",{className:"space-y-4",children:V.map($=>{const U=a.find(W=>W.id===$.service_id),G=u.find(W=>W.id===$.professional_id);return i.jsx(e9,{appointment:$,serviceName:U?.name,professionalName:G?.name,onConfirm:F,onCancel:P,showActions:!0},$.id)})})},I=()=>{const V=Ts(w,{weekStartsOn:1}),$=Array.from({length:7},(U,G)=>mie(V,G));return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:$.map(U=>{const G=O(U),W=I4(U,new Date);return i.jsxs("div",{className:`border-2 rounded-lg p-3 ${W?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[i.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:yn(U,"EEE d",{locale:Sa})}),G.length===0?i.jsx("p",{className:"text-xs text-gray-500",children:"Sin citas"}):i.jsx("div",{className:"space-y-2",children:G.map(z=>i.jsxs("div",{className:"text-xs bg-white border border-gray-200 rounded p-2 cursor-pointer hover:shadow",onClick:()=>_(U),children:[i.jsx("p",{className:"font-medium text-gray-900",children:z.start_time}),i.jsx("p",{className:"text-gray-600 truncate",children:z.client_name})]},z.id))})]},U.toISOString())})})};return r?i.jsx(zn,{fullScreen:!0,size:"lg"}):i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Horarios y Citas"})]}),i.jsx("button",{type:"button",onClick:()=>t("/dashboard/appointments/new"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:"+ Nueva cita"})]}),g.length>0&&i.jsx("div",{className:"mb-4",children:i.jsxs("button",{type:"button",onClick:()=>A(!R),className:"flex items-center gap-2 px-4 py-2 bg-yellow-100 border-2 border-yellow-300 rounded-lg hover:bg-yellow-200 transition-colors",children:[i.jsxs("span",{className:"text-yellow-900 font-semibold",children:[" ",g.length," citas pendientes de confirmar"]}),i.jsx("span",{className:"text-yellow-700",children:R?"":""})]})}),R&&g.length>0&&i.jsxs(_e.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white shadow rounded-lg p-6 mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Citas pendientes"}),i.jsx(Ofe,{appointments:g,services:a,professionals:u,onConfirm:F,onCancel:P})]}),i.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>_(new Date(w.getTime()-(C==="day"?864e5:6048e5))),className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100",children:""}),i.jsx("span",{className:"text-lg font-semibold text-gray-900 min-w-[200px] text-center",children:C==="day"?yn(w,"d 'de' MMMM, yyyy",{locale:Sa}):`Semana del ${yn(Ts(w,{weekStartsOn:1}),"d MMM",{locale:Sa})}`}),i.jsx("button",{type:"button",onClick:()=>_(new Date(w.getTime()+(C==="day"?864e5:6048e5))),className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100",children:""}),i.jsx("button",{type:"button",onClick:()=>_(new Date),className:"px-3 py-2 bg-gray-200 rounded-md hover:bg-gray-300 text-sm font-medium",children:"Hoy"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>S("day"),className:`px-4 py-2 rounded-md text-sm font-medium ${C==="day"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Da"}),i.jsx("button",{type:"button",onClick:()=>S("week"),className:`px-4 py-2 rounded-md text-sm font-medium ${C==="week"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Semana"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"professional_filter",className:"sr-only",children:"Filtrar por profesional"}),i.jsxs("select",{id:"professional_filter",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:N,onChange:V=>k(V.target.value),children:[i.jsx("option",{value:"all",children:"Todos los profesionales"}),u.map(V=>i.jsx("option",{value:V.id,children:V.name},V.id))]})]})]})}),i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:C==="day"?T():I()})]})})})}const u1=[{value:0,label:"Domingo"},{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Mircoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"Sbado"}];function Vfe({professional:t,isOpen:e,onClose:n}){const{firestoreUser:r}=an(),{handleError:s}=St(),[a,l]=x.useState(!1),[u,d]=x.useState(!1),[f,m]=x.useState([]);x.useEffect(()=>{if(e&&t.id){const C=u1.map(S=>({day_of_week:S.value,enabled:!1,start_time:"09:00",end_time:"18:00"}));m(C),g()}else m([])},[e,t.id]);const g=async()=>{if(t.id){l(!0);try{const S=(await W5(t.id)).filter(k=>k.is_available),N=u1.map(k=>{const R=S.find(A=>A.day_of_week===k.value);return{day_of_week:k.value,enabled:!!R,start_time:R?.start_time||"09:00",end_time:R?.end_time||"18:00"}});m(N)}catch(C){C?.code==="permission-denied"||C?.message?.includes("permissions")?console.warn("No se pudieron cargar los horarios existentes. Continuando con valores por defecto."):s(C)}finally{l(!1)}}},y=C=>{if(C<0||C>=f.length){console.error("Invalid index:",C,"availabilities length:",f.length);return}const S=[...f];S[C]&&(S[C].enabled=!S[C].enabled,m(S))},w=(C,S,N)=>{if(C<0||C>=f.length||!f[C]){console.error("Invalid index:",C,"availabilities length:",f.length);return}const k=[...f];if(k[C]){if(k[C][S]=N,S==="start_time"&&k[C].end_time&&N>=k[C].end_time){ue.error("La hora de inicio debe ser menor que la hora de fin");return}if(S==="end_time"&&k[C].start_time&&N<=k[C].start_time){ue.error("La hora de fin debe ser mayor que la hora de inicio");return}m(k)}},_=async()=>{if(!r?.company_id){ue.error("Error de autenticacin");return}const C=r.company_id;if(!C){ue.error("Error: No se encontr el ID de la empresa");return}d(!0);try{await iie(t.id);const S=f.filter(k=>k.enabled);if(S.length===0){ue.success("Horarios actualizados (sin das disponibles)"),n();return}const N=S.map(k=>sie({professional_id:t.id,company_id:C,day_of_week:k.day_of_week,start_time:k.start_time,end_time:k.end_time,is_available:!0}));await Promise.all(N),ue.success("Horarios disponibles guardados exitosamente"),n()}catch(S){s(S)}finally{d(!1)}};return e?i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:n,"aria-hidden":"true"}),i.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[i.jsxs("div",{className:"bg-indigo-600 px-4 py-5 sm:px-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(k5,{className:"w-6 h-6 text-white"}),i.jsxs("h3",{className:"text-lg font-medium text-white",children:["Horarios disponibles - ",t.name]})]}),i.jsx("button",{type:"button",onClick:n,className:"text-white hover:text-gray-200 focus:outline-none","aria-label":"Cerrar",children:i.jsx($re,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:a?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(zn,{size:"lg"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Selecciona los das y horarios en los que ",t.name," est disponible para recibir citas."]}),i.jsx("div",{className:"space-y-3",children:u1.map((C,S)=>{const N=f[S]||{day_of_week:C.value,enabled:!1,start_time:"09:00",end_time:"18:00"};return i.jsxs("div",{className:`border rounded-lg p-4 ${N.enabled?"border-indigo-300 bg-indigo-50":"border-gray-200 bg-gray-50"}`,children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:N.enabled,onChange:()=>y(S),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),i.jsx("span",{className:"font-medium text-gray-900",children:C.label})]})}),N.enabled&&i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.jsx(D_,{className:"w-4 h-4 inline mr-1"}),"Hora inicio"]}),i.jsx("input",{type:"time",value:N.start_time,onChange:k=>w(S,"start_time",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[i.jsx(D_,{className:"w-4 h-4 inline mr-1"}),"Hora fin"]}),i.jsx("input",{type:"time",value:N.end_time,onChange:k=>w(S,"end_time",k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]})]},C.value)})})]})}),i.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[i.jsx("button",{type:"button",onClick:_,disabled:u||a,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Guardando...":"Guardar horarios"}),i.jsx("button",{type:"button",onClick:n,disabled:u,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"})]})]})]})}):null}function Ufe(){const{firestoreUser:t}=an(),e=Ze(),{handleError:n}=St(),[r,s]=x.useState([]),[a,l]=x.useState(!0),[u,d]=x.useState(null);x.useEffect(()=>{if(!t?.company_id)return;const m=J5(t.company_id,g=>{s(g),l(!1)});return()=>m()},[t]);const f=async(m,g)=>{if(confirm(`Ests seguro de eliminar a ${g}? Esta accin no se puede deshacer.`))try{await rie(m),ue.success("Profesional eliminado")}catch(y){n(y)}};return a?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx(zn,{})}):i.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>e("/dashboard"),className:"p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"Volver al dashboard",children:i.jsx(Km,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profesionales"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestiona tu equipo de profesionales"})]})]}),i.jsxs(jn,{to:"/dashboard/professionals/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors",children:[i.jsx(vy,{className:"w-4 h-4"}),"Nuevo Profesional"]})]}),r.length===0?i.jsx("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4",children:[i.jsx("div",{className:"p-4 bg-orange-100 rounded-full",children:i.jsx(vy,{className:"w-12 h-12 text-orange-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay profesionales registrados"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Crea tu primer profesional para comenzar a asignar servicios"}),i.jsxs(jn,{to:"/dashboard/professionals/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors",children:[i.jsx(vy,{className:"w-4 h-4"}),"Crear Profesional"]})]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(m=>i.jsxs("div",{className:"bg-white shadow rounded-lg p-6 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:m.name}),m.specialties&&m.specialties.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:m.specialties.map((g,y)=>i.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:g},y))})]}),i.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${m.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:m.status==="ACTIVE"?"Activo":"Inactivo"})]}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[m.email&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pre,{className:"w-4 h-4 text-gray-400"}),i.jsx("a",{href:`mailto:${m.email}`,className:"hover:text-blue-600 transition-colors",children:m.email})]}),m.phone&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lre,{className:"w-4 h-4 text-gray-400"}),i.jsx("a",{href:`tel:${m.phone}`,className:"hover:text-blue-600 transition-colors",children:m.phone})]})]}),!m.email&&!m.phone&&i.jsx("p",{className:"text-sm text-gray-400 italic mt-2",children:"Sin informacin de contacto"}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>d(m),className:"w-full px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx(D_,{className:"w-4 h-4"}),"Seleccionar horarios disponibles"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>e(`/dashboard/professionals/edit/${m.id}`),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx(Ure,{className:"w-4 h-4"}),"Editar"]}),i.jsxs("button",{type:"button",onClick:()=>f(m.id,m.name),className:"flex-1 px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx(Bre,{className:"w-4 h-4"}),"Eliminar"]})]})]}),i.jsxs("div",{className:"mt-2 text-xs text-gray-500 text-center",children:["Creado: ",m.created_at.toLocaleDateString()]})]})]},m.id))})]}),u&&i.jsx(Vfe,{professional:u,isOpen:!!u,onClose:()=>d(null)})]})}function Ffe({onSuccess:t,onCancel:e}){const{firestoreUser:n}=an(),{handleAsyncError:r}=St(),{trackEvent:s}=eu(),[a,l]=x.useState(!1),[u,d]=x.useState({name:"",email:"",phone:"",specialties:""}),[f,m]=x.useState({});if(!n?.company_id)return i.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:i.jsx("p",{className:"text-gray-600",children:"Cargando..."})});const g=()=>{const _={};return u.name.trim()||(_.name="El nombre es obligatorio"),u.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)&&(_.email="Email invlido"),u.phone&&!/^\+?[\d\s-()]+$/.test(u.phone)&&(_.phone="Formato de telfono invlido"),m(_),Object.keys(_).length===0},y=async _=>{if(_.preventDefault(),!(!g()||!n?.company_id)){l(!0);try{await r(async()=>{const C=u.specialties.split(",").map(S=>S.trim()).filter(S=>S.length>0);await e6({companyId:n.company_id,name:u.name,email:u.email||void 0,phone:u.phone||void 0,specialties:C.length>0?C:void 0}),s("professional_created",{company_id:n.company_id,has_email:!!u.email,has_phone:!!u.phone,specialties_count:C.length}),ue.success("Profesional creado exitosamente"),t?.()})}catch(C){Xre(C,D5.PRO_LIMIT_REACHED)?ue.error("Has alcanzado el lmite de profesionales de tu plan. Actualiza para agregar ms.",{duration:5e3}):ue.error("Error al crear profesional. Intenta nuevamente.")}finally{l(!1)}}},w=(_,C)=>{d(S=>({...S,[_]:C})),f[_]&&m(S=>{const N={...S};return delete N[_],N})};return i.jsxs("form",{onSubmit:y,noValidate:!0,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Nuevo Profesional"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Nombre completo ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"name",value:u.name,onChange:_=>w("name",_.target.value),placeholder:"Dr. Juan Prez",className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${f.name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-invalid":!!f.name,"aria-describedby":f.name?"name-error":void 0}),f.name&&i.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",role:"alert",children:f.name})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email (opcional)"}),i.jsx("input",{type:"email",id:"email",value:u.email,onChange:_=>w("email",_.target.value),placeholder:"juan@ejemplo.cl",className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${f.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-invalid":!!f.email,"aria-describedby":f.email?"email-error":void 0}),f.email&&i.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",role:"alert",children:f.email})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Telfono (opcional)"}),i.jsx("input",{type:"tel",id:"phone",value:u.phone,onChange:_=>w("phone",_.target.value),placeholder:"+56912345678",className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${f.phone?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-invalid":!!f.phone,"aria-describedby":f.phone?"phone-error":void 0}),f.phone&&i.jsx("p",{id:"phone-error",className:"mt-1 text-sm text-red-600",role:"alert",children:f.phone})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"specialties",className:"block text-sm font-medium text-gray-700",children:"Especialidades (opcional)"}),i.jsx("input",{type:"text",id:"specialties",value:u.specialties,onChange:_=>w("specialties",_.target.value),placeholder:"Corte, Peinado, Manicure (separadas por comas)",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Separa mltiples especialidades con comas"})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[e&&i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),i.jsxs("button",{type:"submit",disabled:a,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2",children:[i.jsx(Are,{className:`w-4 h-4 ${a?"animate-spin":"hidden"}`}),i.jsx("span",{children:a?"Creando...":"Crear Profesional"})]})]})]})}function Bfe(){const t=Ze(),e=()=>{t("/dashboard/professionals")},n=()=>{t("/dashboard")};return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.jsxs("button",{onClick:()=>t(-1),className:"mb-4 flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":"Volver",children:[i.jsx(Km,{className:"w-4 h-4"}),"Volver"]}),i.jsx(Ffe,{onSuccess:e,onCancel:n})]})})}function zfe(){const t=Ze(),{id:e}=Sm(),{firestoreUser:n}=an(),{handleError:r}=St(),[s,a]=x.useState(!!e),[l,u]=x.useState(!1),[d,f]=x.useState({name:"",email:"",phone:"",avatar_url:"",specialties:[],status:"ACTIVE"}),[m,g]=x.useState("");x.useEffect(()=>{e&&y()},[e]);const y=async()=>{if(e)try{const S=await iS(e);S&&f({name:S.name,email:S.email||"",phone:S.phone||"",avatar_url:S.avatar_url||"",specialties:S.specialties||[],status:S.status})}catch(S){r(S),t("/dashboard/professionals")}finally{a(!1)}},w=()=>{const S=m.trim();if(S){if(d.specialties.includes(S)){ue.error("Esta especialidad ya est agregada");return}f({...d,specialties:[...d.specialties,S]}),g("")}},_=S=>{f({...d,specialties:d.specialties.filter((N,k)=>k!==S)})},C=async S=>{if(S.preventDefault(),!n?.company_id){ue.error("Error de autenticacin");return}if(!d.name.trim()){ue.error("El nombre es obligatorio");return}u(!0);try{const N={company_id:n.company_id,name:d.name.trim(),email:d.email.trim()||void 0,phone:d.phone.trim()||void 0,avatar_url:d.avatar_url.trim()||void 0,specialties:d.specialties.length>0?d.specialties:void 0,status:d.status};e?(await nie(e,N),ue.success("Profesional actualizado")):(await e6({companyId:n.company_id,name:d.name.trim(),email:d.email.trim()||void 0,phone:d.phone.trim()||void 0,avatar_url:d.avatar_url.trim()||void 0,specialties:d.specialties.length>0?d.specialties:void 0,status:d.status}),ue.success("Profesional creado")),t("/dashboard/professionals")}catch(N){const k=N?.code||"",R=N?.message||"";R.startsWith("LIMIT_REACHED:")?ue.error(R.replace("LIMIT_REACHED:","")):k==="PRO_LIMIT_REACHED"?ue.error("Alcanzaste el lmite de profesionales de tu plan. Actualiza tu suscripcin para agregar ms."):r(N)}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white shadow rounded-lg p-6",children:s?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(zn,{size:"lg"})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx("button",{type:"button",onClick:()=>t("/dashboard/professionals"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Editar profesional":"Nuevo profesional"})]}),i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Informacin bsica"}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),i.jsx("input",{type:"text",id:"name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:d.name,onChange:S=>f({...d,name:S.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",id:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:d.email,onChange:S=>f({...d,email:S.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),i.jsx("input",{type:"tel",id:"phone",placeholder:"+56912345678",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:d.phone,onChange:S=>f({...d,phone:S.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"avatar_url",className:"block text-sm font-medium text-gray-700 mb-1",children:"URL de avatar (opcional)"}),i.jsx("input",{type:"url",id:"avatar_url",placeholder:"https://example.com/avatar.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:d.avatar_url,onChange:S=>f({...d,avatar_url:S.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),i.jsxs("select",{id:"status",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:d.status,onChange:S=>f({...d,status:S.target.value}),children:[i.jsx("option",{value:"ACTIVE",children:"Activo"}),i.jsx("option",{value:"INACTIVE",children:"Inactivo"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Los profesionales inactivos no aparecern en el sistema de citas"})]})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Especialidades"}),i.jsxs("div",{className:"flex gap-2 mb-3",children:[i.jsx("input",{type:"text",placeholder:"Ej: Corte de cabello, Manicure, etc.",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:m,onChange:S=>g(S.target.value),onKeyPress:S=>{S.key==="Enter"&&(S.preventDefault(),w())}}),i.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium",children:"Agregar"})]}),d.specialties.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:d.specialties.map((S,N)=>i.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[S,i.jsx("button",{type:"button",onClick:()=>_(N),className:"hover:text-blue-900","aria-label":`Eliminar ${S}`,children:""})]},N))})]}),i.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[i.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:l?"Guardando...":e?"Actualizar":"Crear profesional"}),i.jsx("button",{type:"button",onClick:()=>t("/dashboard/professionals"),className:"px-6 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium",children:"Cancelar"})]})]})]})})})})}function Hfe(){const t=Ze(),{firestoreUser:e}=an(),{handleError:n}=St(),[r,s]=x.useState(!0),[a,l]=x.useState([]),[u,d]=x.useState([]),[f,m]=x.useState([]),[g,y]=x.useState(null),[w,_]=x.useState(new Date);x.useEffect(()=>{C()},[]),x.useEffect(()=>{a.length>0&&S()},[a,w]);const C=async()=>{if(e?.company_id)try{const[A,L,F]=await Promise.all([K5(e.company_id),th(e.company_id),Y5(e.company_id)]);l(A),d(L),m(F)}catch(A){n(A)}finally{s(!1)}},S=()=>{const A=wie(w),L=bie(w),F=a.filter(U=>boe(U.appointment_date,{start:A,end:L}));if(F.length===0){y({total:0,requested:0,confirmed:0,completed:0,cancelled:0,noShow:0,byService:{},byProfessional:{},byDay:{},averageDuration:0,completionRate:0,cancellationRate:0});return}const P={requested:F.filter(U=>U.status===Le.REQUESTED).length,confirmed:F.filter(U=>U.status===Le.CONFIRMED).length,completed:F.filter(U=>U.status===Le.COMPLETED).length,cancelled:F.filter(U=>U.status===Le.CANCELLED).length,noShow:F.filter(U=>U.status===Le.NO_SHOW).length},O={},T={},I={};F.forEach(U=>{O[U.service_id]=(O[U.service_id]||0)+1,T[U.professional_id]=(T[U.professional_id]||0)+1;const G=yn(U.appointment_date,"yyyy-MM-dd");I[G]=(I[G]||0)+1});const V=P.completed>0?P.completed/(P.completed+P.noShow+P.cancelled)*100:0,$=P.cancelled>0?P.cancelled/F.length*100:0;y({total:F.length,requested:P.requested,confirmed:P.confirmed,completed:P.completed,cancelled:P.cancelled,noShow:P.noShow,byService:O,byProfessional:T,byDay:I,averageDuration:0,completionRate:V,cancellationRate:$})},N=A=>u.find(L=>L.id===A)?.name||"Desconocido",k=A=>f.find(L=>L.id===A)?.name||"Sin asignar",R=A=>{_(L=>Ooe(L,-A))};return r?i.jsx(zn,{fullScreen:!0,size:"lg"}):g?i.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reporte de Citas"})]})}),i.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{type:"button",onClick:()=>R(-1),className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100",children:""}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:yn(w,"MMMM yyyy",{locale:Sa})}),i.jsx("button",{type:"button",onClick:()=>R(1),className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100",children:""})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[i.jsx(ey,{title:"Total de citas",value:g.total,icon:"",color:"blue"}),i.jsx(ey,{title:"Completadas",value:g.completed,icon:"",color:"green",subtitle:`${g.completionRate.toFixed(1)}% tasa de xito`}),i.jsx(ey,{title:"Canceladas",value:g.cancelled,icon:"",color:"red",subtitle:`${g.cancellationRate.toFixed(1)}% tasa cancelacin`}),i.jsx(ey,{title:"No asistieron",value:g.noShow,icon:"",color:"yellow"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Por estado"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Xu,{label:"Solicitadas",count:g.requested,total:g.total,color:"yellow"}),i.jsx(Xu,{label:"Confirmadas",count:g.confirmed,total:g.total,color:"blue"}),i.jsx(Xu,{label:"Completadas",count:g.completed,total:g.total,color:"green"}),i.jsx(Xu,{label:"Canceladas",count:g.cancelled,total:g.total,color:"red"}),i.jsx(Xu,{label:"No asistieron",count:g.noShow,total:g.total,color:"gray"})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Por servicio"}),i.jsxs("div",{className:"space-y-3",children:[Object.entries(g.byService).sort(([,A],[,L])=>L-A).map(([A,L])=>i.jsx(Xu,{label:N(A),count:L,total:g.total,color:"blue"},A)),Object.keys(g.byService).length===0&&i.jsx("p",{className:"text-gray-500 text-sm",children:"No hay datos"})]})]})]}),i.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Por profesional"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object.entries(g.byProfessional).sort(([,A],[,L])=>L-A).map(([A,L])=>i.jsxs("div",{className:"p-4 border-2 border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-medium text-gray-900",children:k(A)}),i.jsx("span",{className:"text-2xl font-bold text-blue-600",children:L})]}),i.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[(L/g.total*100).toFixed(1),"% del total"]})]},A)),Object.keys(g.byProfessional).length===0&&i.jsx("p",{className:"text-gray-500 text-sm col-span-2",children:"No hay datos"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>ue.error("Exportacin prximamente disponible"),className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium",children:" Exportar a CSV"})})]})})}):i.jsx(zn,{fullScreen:!0,size:"lg"})}function ey({title:t,value:e,icon:n,color:r,subtitle:s}){const a={blue:"bg-blue-50 border-blue-200",green:"bg-green-50 border-green-200",red:"bg-red-50 border-red-200",yellow:"bg-yellow-50 border-yellow-200"};return i.jsxs("div",{className:`border-2 rounded-lg p-6 ${a[r]}`,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-3xl",role:"img","aria-hidden":"true",children:n}),i.jsx("h3",{className:"text-sm font-medium text-gray-600",children:t})]}),i.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e}),s&&i.jsx("div",{className:"text-sm text-gray-600",children:s})]})}function Xu({label:t,count:e,total:n,color:r}){const s=n>0?e/n*100:0,a={blue:"bg-blue-600",green:"bg-green-600",red:"bg-red-600",yellow:"bg-yellow-600",gray:"bg-gray-600"};return i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[i.jsx("span",{className:"font-medium text-gray-700",children:t}),i.jsxs("span",{className:"text-gray-600",children:[e," (",s.toFixed(1),"%)"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:`${a[r]} h-2 rounded-full transition-all duration-300`,style:{width:`${s}%`}})})]})}function $fe({company:t,appearance:e,theme:n}){const r=!!e?.banner_url,s=e?.logo_position||"center",a=s==="center",l=a?"h-[8rem] sm:h-[12rem]":"h-[5rem] sm:h-[6.5rem]",u=s==="left"?"justify-start":s==="right"?"justify-end":"justify-center";return i.jsxs("header",{id:"navigation",className:r?"relative w-full":"w-full",children:[r&&e?.banner_url&&i.jsx("div",{className:"w-full h-36 sm:h-64 overflow-hidden",children:i.jsx("img",{src:e.banner_url,alt:`Banner de ${t.name}`,className:"w-full h-full object-cover",loading:"lazy"})}),i.jsx("div",{className:`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ${r?"absolute inset-0 flex items-center":"py-8"}`,style:{color:n.textColor,fontFamily:n.fontBody},children:i.jsx("div",{className:`w-full ${r?"px-4 py-4 sm:px-6 sm:py-6":""} ${a?"text-center":""}`,style:r?{marginTop:"1rem",backgroundColor:"transparent"}:void 0,children:e?.logo_url?i.jsx("div",{className:`flex ${u} ${r?"mt-1 sm:mt-3":"mb-4"}`,children:i.jsx("img",{src:e.logo_url,alt:`Logo de ${t.name}`,className:`object-contain ${l}`,loading:"eager"})}):i.jsxs("div",{className:a?"text-center":"",children:[i.jsx("h1",{className:"text-xl sm:text-4xl font-bold mb-1 sm:mb-2",style:{color:n.titleColor,fontFamily:n.fontTitle},children:t.name}),i.jsx("p",{className:"text-sm sm:text-xl",style:{color:n.subtitleColor,fontFamily:n.fontBody},children:t.industry})]})})})]})}function t9({company:t,theme:e,isCarousel:n=!1}){return!t.description||t.show_description===!1?null:n?i.jsx("div",{className:"w-full h-full flex flex-col rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 lg:p-10 xl:p-12 shadow-lg overflow-hidden",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:i.jsxs("div",{className:"flex-1 flex flex-col min-h-0 space-y-3 sm:space-y-4 md:space-y-5 lg:space-y-6",children:[i.jsxs("h2",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl flex-shrink-0",style:{color:e.titleColor,fontFamily:e.fontTitle},children:[" Acerca de ",t.name]}),i.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:i.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed sm:leading-loose md:leading-loose whitespace-pre-line break-words hyphens-auto",style:{color:e.textColor},children:t.description})})]})}):i.jsx("div",{className:"mb-4 sm:mb-6 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm sm:shadow-md overflow-hidden",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:i.jsxs("div",{className:"space-y-2 sm:space-y-2.5 md:space-y-3",children:[i.jsxs("h2",{className:"font-semibold text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl mb-1.5 sm:mb-2 md:mb-2.5 flex-shrink-0",style:{color:e.titleColor,fontFamily:e.fontTitle},children:[" Acerca de ",t.name]}),i.jsx("div",{className:"overflow-hidden",children:i.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-base leading-relaxed sm:leading-relaxed md:leading-loose whitespace-pre-line break-words hyphens-auto line-clamp-none",style:{color:e.textColor},children:t.description})})]})})}function n9({company:t,theme:e,isCarousel:n=!1}){return!t.mission&&!t.vision||t.show_mission_vision===!1?null:n?i.jsx("div",{className:"w-full h-full flex flex-col rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 lg:p-10 xl:p-12 shadow-lg overflow-hidden",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:i.jsxs("div",{className:"flex-1 flex flex-col min-h-0 space-y-4 sm:space-y-5 md:space-y-6 lg:space-y-8 overflow-y-auto",children:[t.mission&&i.jsxs("div",{className:"flex-shrink-0 space-y-2 sm:space-y-3 md:space-y-4",children:[i.jsx("h2",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Misin"}),i.jsx("div",{className:"overflow-hidden",children:i.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed sm:leading-loose md:leading-loose break-words hyphens-auto",style:{color:e.textColor},children:t.mission})})]}),t.vision&&i.jsxs("div",{className:"flex-shrink-0 space-y-2 sm:space-y-3 md:space-y-4",children:[i.jsx("h2",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Visin"}),i.jsx("div",{className:"overflow-hidden",children:i.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed sm:leading-loose md:leading-loose break-words hyphens-auto",style:{color:e.textColor},children:t.vision})})]})]})}):i.jsxs("div",{className:"mb-4 sm:mb-6 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm sm:shadow-md overflow-hidden",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[t.mission&&i.jsxs("div",{className:"space-y-1.5 sm:space-y-2 mb-3 sm:mb-4 md:mb-5 last:mb-0",children:[i.jsx("h2",{className:"font-semibold text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl mb-1.5 sm:mb-2 md:mb-2.5 flex-shrink-0",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Misin"}),i.jsx("div",{className:"overflow-hidden",children:i.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-base leading-relaxed sm:leading-relaxed md:leading-loose break-words hyphens-auto",style:{color:e.textColor},children:t.mission})})]}),t.vision&&i.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[i.jsx("h2",{className:"font-semibold text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl mb-1.5 sm:mb-2 md:mb-2.5 flex-shrink-0",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Visin"}),i.jsx("div",{className:"overflow-hidden",children:i.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-base leading-relaxed sm:leading-relaxed md:leading-loose break-words hyphens-auto",style:{color:e.textColor},children:t.vision})})]})]})}function r9({company:t,theme:e,isCarousel:n=!1}){const r=t.weekday_days?.length||t.weekend_days?.length;return t.business_type!==un.PRODUCTS||!r?null:n?i.jsxs("div",{className:"w-full h-full flex flex-col justify-center rounded-2xl sm:rounded-3xl p-6 sm:p-8 md:p-10 lg:p-12 shadow-lg",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[i.jsx("h2",{className:"font-bold text-2xl sm:text-3xl md:text-4xl lg:text-5xl mb-6 sm:mb-8 md:mb-10",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Horario de atencin"}),i.jsxs("div",{className:"space-y-6 sm:space-y-8 md:space-y-10 flex-1 flex flex-col justify-center",children:[t.weekday_days?.length?i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl mb-3 sm:mb-4 md:mb-5",style:{color:e.subtitleColor,fontFamily:e.fontTitle},children:"Semana"}),i.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl leading-relaxed sm:leading-loose",children:[t.weekday_days.map(s=>Jg[s]||s).join(", ")," ",t.weekday_open_time&&t.weekday_close_time?` ${t.weekday_open_time} - ${t.weekday_close_time}`:""]})]}):null,t.weekend_days?.length?i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl mb-3 sm:mb-4 md:mb-5",style:{color:e.subtitleColor,fontFamily:e.fontTitle},children:"Fin de semana"}),i.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl leading-relaxed sm:leading-loose",children:[t.weekend_days.map(s=>Jg[s]||s).join(", ")," ",t.weekend_open_time&&t.weekend_close_time?` ${t.weekend_open_time} - ${t.weekend_close_time}`:""]})]}):null]})]}):i.jsxs("div",{className:"mb-4 sm:mb-6 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm sm:shadow-md",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[i.jsx("h2",{className:"font-semibold text-sm sm:text-base md:text-lg lg:text-xl mb-3 sm:mb-4",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Horario de atencin"}),i.jsxs("div",{className:"space-y-2.5 sm:space-y-3",children:[t.weekday_days?.length?i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-xs sm:text-sm md:text-base mb-1.5 sm:mb-2",style:{color:e.subtitleColor,fontFamily:e.fontTitle},children:"Semana"}),i.jsxs("p",{className:"text-xs sm:text-sm md:text-base leading-relaxed sm:leading-loose",children:[t.weekday_days.map(s=>Jg[s]||s).join(", ")," ",t.weekday_open_time&&t.weekday_close_time?` ${t.weekday_open_time} - ${t.weekday_close_time}`:""]})]}):null,t.weekend_days?.length?i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-xs sm:text-sm md:text-base mb-1.5 sm:mb-2",style:{color:e.subtitleColor,fontFamily:e.fontTitle},children:"Fin de semana"}),i.jsxs("p",{className:"text-xs sm:text-sm md:text-base leading-relaxed sm:leading-loose",children:[t.weekend_days.map(s=>Jg[s]||s).join(", ")," ",t.weekend_open_time&&t.weekend_close_time?` ${t.weekend_open_time} - ${t.weekend_close_time}`:""]})]}):null]})]})}function s9({company:t,theme:e,googleMapsApiKey:n,isCarousel:r=!1}){if(!t.latitude||!t.longitude)return null;const s=!!n;return r?i.jsxs("div",{className:"w-full h-full flex flex-col rounded-2xl sm:rounded-3xl p-6 sm:p-8 md:p-10 lg:p-12 shadow-lg",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[i.jsx("h2",{className:"font-bold text-2xl sm:text-3xl md:text-4xl lg:text-5xl mb-4 sm:mb-6",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Ubicacin"}),i.jsx("p",{className:"mb-4 sm:mb-6 text-lg sm:text-xl md:text-2xl leading-relaxed",children:t.address}),i.jsx("div",{className:"flex-1 min-h-0 w-full rounded-xl sm:rounded-2xl overflow-hidden shadow-lg",children:s?i.jsx(P_,{googleMapsApiKey:n,libraries:PP,loadingElement:i.jsx("div",{className:"h-full w-full bg-gray-100 animate-pulse"}),children:i.jsx(R_,{mapContainerStyle:{width:"100%",height:"100%"},center:{lat:t.latitude,lng:t.longitude},zoom:15,children:i.jsx(g0,{position:{lat:t.latitude,lng:t.longitude}})})}):i.jsx("div",{className:"h-full w-full bg-gray-100 flex items-center justify-center text-sm sm:text-base text-gray-600",children:"Mapa no disponible: falta la clave de Google Maps"})})]}):i.jsxs("div",{className:"mb-6 rounded-lg p-4 sm:p-5 shadow",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[i.jsx("h2",{className:"font-semibold text-base sm:text-lg mb-2",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Ubicacin"}),i.jsx("p",{className:"mb-3 text-sm leading-relaxed",children:t.address}),i.jsx("div",{className:"h-40 sm:h-56 w-full rounded overflow-hidden",children:s?i.jsx(P_,{googleMapsApiKey:n,libraries:PP,loadingElement:i.jsx("div",{className:"h-full w-full bg-gray-100 animate-pulse"}),children:i.jsx(R_,{mapContainerStyle:{width:"100%",height:"100%"},center:{lat:t.latitude,lng:t.longitude},zoom:15,children:i.jsx(g0,{position:{lat:t.latitude,lng:t.longitude}})})}):i.jsx("div",{className:"h-full w-full bg-gray-100 flex items-center justify-center text-xs text-gray-600",children:"Mapa no disponible: falta la clave de Google Maps"})})]})}function VP({service:t,theme:e,onBook:n,onServiceClick:r}){return i.jsxs("div",{onClick:()=>r(t),className:"rounded-lg sm:rounded-xl shadow-md overflow-hidden flex flex-col border border-gray-200/50 hover:shadow-xl hover:scale-[1.02] transition-all cursor-pointer h-full",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"w-full h-32 xs:h-36 sm:h-40 md:h-44 flex items-center justify-center group relative flex-shrink-0",style:{backgroundColor:e.cardColor+"20"},children:[i.jsx("img",{src:t.image_url,alt:`Imagen del servicio ${t.name}`,className:"max-h-full max-w-full object-contain",loading:"lazy"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold bg-black/50 px-2 sm:px-3 py-1 rounded-full opacity-0 group-hover:opacity-100 transition",children:"Ver detalles"})})]})}),i.jsxs("div",{className:"p-2.5 sm:p-3 md:p-4 flex flex-col flex-1",children:[i.jsx("h3",{className:"font-semibold text-xs sm:text-sm md:text-base mb-1 sm:mb-1.5 line-clamp-2",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),i.jsx("p",{className:"text-xs sm:text-sm mb-2 sm:mb-2.5 line-clamp-2 flex-1 leading-relaxed",style:{color:e.textColor},children:t.description}),i.jsxs("div",{className:"flex justify-between items-center mb-2 sm:mb-2.5 text-xs sm:text-sm",children:[t.hide_price?i.jsxs("span",{className:"text-xs sm:text-sm font-medium flex items-center gap-1",style:{color:"#25D366",fontFamily:e.fontBody},children:[i.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio"]}):i.jsxs("span",{className:"text-sm sm:text-base md:text-lg font-bold",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),i.jsxs("span",{className:"flex items-center gap-1",style:{color:e.subtitleColor},children:[i.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("span",{className:"text-xs sm:text-sm",children:[t.estimated_duration_minutes," min"]})]})]}),i.jsx("div",{onClick:s=>s.stopPropagation(),children:i.jsx(xn,{onClick:()=>n(t),style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full py-1.5 sm:py-2 text-xs sm:text-sm rounded-md hover:opacity-90 font-medium",ariaLabel:`Agendar servicio ${t.name}`,children:" Agendar"})})]})]})}function qfe({service:t,theme:e,onBook:n,onServiceClick:r}){return i.jsxs("div",{onClick:()=>r(t),className:"rounded-xl sm:rounded-2xl overflow-hidden flex flex-col border hover:shadow-2xl hover:scale-[1.01] transition-all cursor-pointer relative group h-full",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:e.buttonColor+"20",boxShadow:`0 8px 32px ${e.buttonColor}08`},children:[i.jsxs("div",{className:"relative h-36 xs:h-40 sm:h-44 md:h-48 lg:h-52 overflow-hidden",children:[i.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${e.buttonColor}08 0%, ${e.buttonColor}02 100%)`},children:i.jsx("img",{src:t.image_url,alt:`Imagen del servicio ${t.name}`,className:"max-h-full max-w-full object-contain transition-transform duration-500 group-hover:scale-105",loading:"lazy"})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/5"})]}),i.jsxs("div",{className:"p-3 sm:p-4 md:p-5 lg:p-6 flex flex-col flex-1 relative",children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5",style:{background:`linear-gradient(90deg, ${e.buttonColor} 0%, ${e.buttonColor}80 50%, transparent 100%)`}}),i.jsx("h3",{className:"font-bold text-sm sm:text-base md:text-lg lg:text-xl mb-1.5 sm:mb-2 mt-1 line-clamp-2",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),i.jsx("p",{className:"text-xs sm:text-sm md:text-base mb-3 sm:mb-4 line-clamp-2 flex-1 leading-relaxed sm:leading-loose",style:{color:e.textColor,opacity:.8},children:t.description}),i.jsx("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:i.jsxs("div",{children:[t.hide_price?i.jsxs("span",{className:"text-sm sm:text-base md:text-lg font-medium flex items-center gap-1.5",style:{color:"#25D366",fontFamily:e.fontBody},children:[i.jsx("svg",{className:"w-4 sm:w-5 h-4 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio por WhatsApp"]}):i.jsxs("span",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-extrabold block",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),i.jsxs("span",{className:"text-xs sm:text-sm font-light mt-0.5",style:{color:e.subtitleColor},children:["Duracin: ",t.estimated_duration_minutes," min"]})]})}),i.jsx("div",{onClick:s=>s.stopPropagation(),children:i.jsx(xn,{onClick:()=>n(t),style:{background:`linear-gradient(135deg, ${e.buttonColor} 0%, ${e.buttonColor}ee 100%)`,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full py-2 sm:py-2.5 md:py-3 text-xs sm:text-sm md:text-base rounded-lg sm:rounded-xl hover:opacity-90 font-semibold shadow-md hover:shadow-lg transition-all",ariaLabel:`Agendar servicio ${t.name}`,children:" Reservar"})})]})]})}function Yfe({service:t,theme:e,onBook:n,onServiceClick:r}){return i.jsxs("div",{onClick:()=>r(t),className:"rounded-lg sm:rounded-xl overflow-hidden flex flex-col sm:flex-row items-center gap-2 sm:gap-3 md:gap-4 p-2.5 sm:p-3 md:p-4 border hover:shadow-lg hover:scale-[1.01] transition-all cursor-pointer group",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:e.buttonColor+"20",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[i.jsx("div",{className:"relative flex-shrink-0",children:i.jsx("div",{className:"w-16 h-16 xs:w-18 xs:h-18 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full overflow-hidden flex items-center justify-center",style:{backgroundColor:e.buttonColor+"15",border:`2px solid ${e.buttonColor}30`},children:i.jsx("img",{src:t.image_url,alt:`Imagen del servicio ${t.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:"lazy"})})}),i.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[i.jsx("h3",{className:"font-bold text-xs sm:text-sm md:text-base lg:text-lg mb-0.5 sm:mb-1 line-clamp-1 sm:line-clamp-2 text-center sm:text-left",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),i.jsx("p",{className:"text-xs sm:text-sm mb-1.5 sm:mb-2 line-clamp-2 leading-relaxed text-center sm:text-left",style:{color:e.textColor,opacity:.85},children:t.description}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 sm:gap-3 flex-wrap",children:[t.hide_price?i.jsxs("span",{className:"text-xs sm:text-sm font-medium flex items-center gap-1",style:{color:"#25D366",fontFamily:e.fontBody},children:[i.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio"]}):i.jsxs("span",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-extrabold",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),i.jsxs("span",{className:"flex items-center gap-1 text-xs sm:text-sm",style:{color:e.subtitleColor},children:[i.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.estimated_duration_minutes," min"]})]})]}),i.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",onClick:s=>s.stopPropagation(),children:i.jsx(xn,{onClick:()=>n(t),style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full sm:w-auto px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base rounded-lg hover:opacity-90 font-semibold shadow-md hover:shadow-lg transition-all whitespace-nowrap",ariaLabel:`Agendar servicio ${t.name}`,children:" Agendar"})})]})}function Wfe(t){return{1:VP,2:Yfe,3:qfe}[t]||VP}function a9({services:t,theme:e,onBook:n,onServiceClick:r}){if(t.length===0)return null;const s=e.cardLayout||1,a=Wfe(s),u=s===2?"grid grid-cols-1 gap-3 sm:gap-4":"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4";return i.jsxs("div",{className:"h-full flex flex-col",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-3 sm:mb-4 sticky top-0 z-10 pb-2",style:{color:e.titleColor,fontFamily:e.fontTitle,backgroundColor:"transparent"},children:"Servicios"}),i.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent pr-1",children:i.jsx("div",{className:u,children:t.map((d,f)=>i.jsx(a,{service:d,theme:e,onBook:n,onServiceClick:r,index:f},d.id))})})]})}function UP({product:t,theme:e,quantity:n,onAddToCart:r,onUpdateQuantity:s,onProductClick:a,index:l}){const u=f=>{f.stopPropagation(),s(t.id,n+1)},d=f=>{f.stopPropagation(),n>0&&s(t.id,n-1)};return i.jsx("div",{onClick:()=>a(t),className:"cursor-pointer group h-full",children:i.jsxs(Gx,{delay:l*.1,className:"rounded-lg sm:rounded-xl shadow-md overflow-hidden flex flex-col hover:shadow-xl hover:scale-[1.02] transition-all border border-gray-200/50 h-full",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[i.jsxs("div",{className:"w-full h-32 xs:h-36 sm:h-40 md:h-44 flex items-center justify-center relative overflow-hidden flex-shrink-0",style:{backgroundColor:e.cardColor+"20"},children:[i.jsx("img",{src:t.image_url||"https://placehold.co/400x400/EEF2FF/1F2937?text=Sin+imagen",alt:t.image_url?`Imagen del producto ${t.name}`:`Imagen no disponible para ${t.name}`,className:"max-h-full max-w-full object-contain transition-transform group-hover:scale-105",loading:"lazy"}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold opacity-0 group-hover:opacity-100 bg-black/60 px-2 sm:px-3 py-1 rounded-full transition",children:"Ver +"})}),t.stock!==void 0&&t.stock<10&&t.stock>0&&i.jsxs("div",{className:"absolute top-1.5 sm:top-2 right-1.5 sm:right-2 bg-orange-500 text-white text-xs px-1.5 sm:px-2 py-0.5 rounded-full font-bold shadow-md",children:["ltimos ",t.stock,"!"]}),t.stock===0&&i.jsx("div",{className:"absolute top-1.5 sm:top-2 right-1.5 sm:right-2 bg-red-500 text-white text-xs px-1.5 sm:px-2 py-0.5 rounded-full font-bold shadow-md",children:"Agotado"})]}),i.jsxs("div",{className:"p-2.5 sm:p-3 md:p-4 flex-1 flex flex-col min-h-0",children:[i.jsx("h3",{className:"font-semibold text-xs sm:text-sm md:text-base mb-1 sm:mb-1.5 line-clamp-2 leading-tight",style:{color:e.titleColor,fontFamily:e.fontTitle},title:t.name,children:t.name}),t.description&&i.jsx("p",{className:"text-xs sm:text-sm mb-1.5 sm:mb-2 line-clamp-2 flex-1 leading-relaxed",style:{color:e.textColor,opacity:.85},children:t.description}),t.tags&&t.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mb-1.5 sm:mb-2",children:t.tags.slice(0,2).map((f,m)=>i.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-xs rounded-full border",style:{backgroundColor:"rgba(255, 255, 255, 0.8)",color:e.titleColor,borderColor:e.subtitleColor||"#d1d5db",fontSize:"0.65rem"},children:f},m))}),i.jsxs("div",{className:"flex justify-between items-center mb-1.5 sm:mb-2",children:[t.hide_price?i.jsxs("span",{className:"text-xs sm:text-sm font-medium flex items-center gap-1",style:{color:"#25D366",fontFamily:e.fontBody},children:[i.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio"]}):i.jsxs("span",{className:"text-sm sm:text-base md:text-lg font-bold",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),t.weight&&i.jsxs("span",{className:"text-xs sm:text-sm flex items-center gap-0.5",style:{color:e.subtitleColor},children:[i.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),t.weight,"g"]})]}),i.jsx("div",{className:"mt-auto",onClick:f=>f.stopPropagation(),children:n>0?i.jsxs("div",{className:"flex items-center justify-between gap-1 sm:gap-1.5 rounded-lg p-1 sm:p-1.5",style:{backgroundColor:e.cardColor+"40"},children:[i.jsx("button",{onClick:d,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-bold text-sm sm:text-base hover:opacity-80 transition shadow-sm",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor},"aria-label":"Disminuir cantidad",children:""}),i.jsx("span",{className:"text-sm sm:text-base font-bold min-w-[1.75rem] sm:min-w-[2rem] text-center",style:{color:e.titleColor},children:n}),i.jsx("button",{onClick:u,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-bold text-sm sm:text-base hover:opacity-80 transition shadow-sm",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor},"aria-label":"Aumentar cantidad",children:"+"})]}):i.jsx(xn,{onClick:()=>r(t,1),style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full py-1.5 sm:py-2 text-xs sm:text-sm rounded-lg hover:opacity-90 font-medium shadow-sm hover:shadow-md transition-all",ariaLabel:`Agregar ${t.name} al carrito`,children:i.jsxs("span",{className:"flex items-center justify-center gap-1",children:[i.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar"]})})})]})]})})}function Gfe({product:t,theme:e,quantity:n,onAddToCart:r,onUpdateQuantity:s,onProductClick:a,index:l}){const u=f=>{f.stopPropagation(),s(t.id,n+1)},d=f=>{f.stopPropagation(),n>0&&s(t.id,n-1)};return i.jsx("div",{onClick:()=>a(t),className:"cursor-pointer group",children:i.jsxs(Gx,{delay:l*.1,className:"rounded-lg sm:rounded-xl overflow-hidden flex flex-col sm:flex-row items-center gap-2 sm:gap-3 md:gap-4 p-2.5 sm:p-3 md:p-4 border hover:shadow-lg hover:scale-[1.01] transition-all",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:e.buttonColor+"20",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[i.jsx("div",{className:"w-16 h-16 xs:w-18 xs:h-18 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full overflow-hidden flex items-center justify-center relative",style:{backgroundColor:e.buttonColor+"15",border:`2px solid ${e.buttonColor}30`},children:i.jsx("img",{src:t.image_url||"https://placehold.co/400x400/EEF2FF/1F2937?text=Sin+imagen",alt:t.image_url?`Imagen del producto ${t.name}`:`Imagen no disponible para ${t.name}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:"lazy"})}),t.stock!==void 0&&t.stock<10&&t.stock>0&&i.jsx("div",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 bg-orange-500 text-white text-xs px-1 sm:px-1.5 py-0.5 rounded-full font-bold shadow-md",children:t.stock}),t.stock===0&&i.jsx("div",{className:"absolute -top-0.5 -right-0.5 sm:-top-1 sm:-right-1 bg-red-500 text-white text-xs px-1 sm:px-1.5 py-0.5 rounded-full font-bold shadow-md",children:""})]}),i.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[i.jsx("h3",{className:"font-bold text-xs sm:text-sm md:text-base lg:text-lg mb-0.5 sm:mb-1 line-clamp-1 sm:line-clamp-2 text-center sm:text-left",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),t.description&&i.jsx("p",{className:"text-xs sm:text-sm mb-1.5 sm:mb-2 line-clamp-2 leading-relaxed text-center sm:text-left",style:{color:e.textColor,opacity:.85},children:t.description}),t.tags&&t.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mb-1.5 sm:mb-2 justify-center sm:justify-start",children:t.tags.slice(0,2).map((f,m)=>i.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:e.buttonColor+"20",color:e.buttonColor},children:f},m))}),i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 sm:gap-3 flex-wrap",children:[t.hide_price?i.jsxs("span",{className:"text-xs sm:text-sm font-medium flex items-center gap-1",style:{color:"#25D366",fontFamily:e.fontBody},children:[i.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio"]}):i.jsxs("span",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-extrabold",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),t.weight&&i.jsxs("span",{className:"text-xs sm:text-sm",style:{color:e.subtitleColor},children:[t.weight,"g"]})]})]}),i.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",onClick:f=>f.stopPropagation(),children:n>0?i.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1.5 sm:gap-2 rounded-lg p-1 sm:p-1.5",style:{backgroundColor:e.cardColor+"40"},children:[i.jsx("button",{onClick:d,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-bold text-sm sm:text-base hover:opacity-80 transition shadow-sm",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor},"aria-label":"Disminuir cantidad",children:""}),i.jsx("span",{className:"text-sm sm:text-base font-bold min-w-[1.75rem] sm:min-w-[2rem] text-center",style:{color:e.titleColor},children:n}),i.jsx("button",{onClick:u,className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-bold text-sm sm:text-base hover:opacity-80 transition shadow-sm",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor},"aria-label":"Aumentar cantidad",children:"+"})]}):i.jsx(xn,{onClick:()=>r(t,1),style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full sm:w-auto px-3 sm:px-4 md:px-6 py-2 sm:py-2.5 text-xs sm:text-sm md:text-base rounded-lg hover:opacity-90 font-semibold shadow-md hover:shadow-lg transition-all whitespace-nowrap",ariaLabel:`Agregar ${t.name} al carrito`,children:i.jsxs("span",{className:"flex items-center justify-center gap-1",children:[i.jsx("svg",{className:"w-3 sm:w-4 h-3 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar"]})})})]})})}function Kfe({product:t,theme:e,quantity:n,onAddToCart:r,onUpdateQuantity:s,onProductClick:a,index:l}){const u=f=>{f.stopPropagation(),s(t.id,n+1)},d=f=>{f.stopPropagation(),n>0&&s(t.id,n-1)};return i.jsx("div",{onClick:()=>a(t),className:"cursor-pointer group h-full",children:i.jsxs(Gx,{delay:l*.1,className:"rounded-xl sm:rounded-2xl overflow-hidden flex flex-col border hover:shadow-2xl hover:scale-[1.01] transition-all relative h-full",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:e.buttonColor+"20",boxShadow:`0 8px 32px ${e.buttonColor}08`},children:[i.jsxs("div",{className:"relative h-36 xs:h-40 sm:h-44 md:h-48 lg:h-52 overflow-hidden",children:[i.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${e.buttonColor}08 0%, ${e.buttonColor}02 100%)`},children:i.jsx("img",{src:t.image_url||"https://placehold.co/400x400/EEF2FF/1F2937?text=Sin+imagen",alt:t.image_url?`Imagen del producto ${t.name}`:`Imagen no disponible para ${t.name}`,className:"max-h-full max-w-full object-contain transition-transform duration-500 group-hover:scale-105",loading:"lazy"})}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/5"}),t.stock!==void 0&&t.stock<10&&t.stock>0&&i.jsxs("div",{className:"absolute top-2 sm:top-3 right-2 sm:right-3 bg-orange-500 text-white text-xs px-2 sm:px-3 py-0.5 sm:py-1 rounded-full font-bold shadow-lg z-10",children:["ltimos ",t.stock,"!"]}),t.stock===0&&i.jsx("div",{className:"absolute top-2 sm:top-3 right-2 sm:right-3 bg-red-500 text-white text-xs px-2 sm:px-3 py-0.5 sm:py-1 rounded-full font-bold shadow-lg z-10",children:"Agotado"})]}),i.jsxs("div",{className:"p-3 sm:p-4 md:p-5 lg:p-6 flex flex-col flex-1 relative",children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-0.5",style:{background:`linear-gradient(90deg, ${e.buttonColor} 0%, ${e.buttonColor}80 50%, transparent 100%)`}}),i.jsx("h3",{className:"font-bold text-sm sm:text-base md:text-lg lg:text-xl mb-1.5 sm:mb-2 mt-1 line-clamp-2",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),t.description&&i.jsx("p",{className:"text-xs sm:text-sm md:text-base mb-3 sm:mb-4 line-clamp-2 flex-1 leading-relaxed sm:leading-loose",style:{color:e.textColor,opacity:.8},children:t.description}),t.tags&&t.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-1.5 mb-2 sm:mb-3",children:t.tags.slice(0,3).map((f,m)=>i.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-xs rounded-full",style:{backgroundColor:e.buttonColor+"20",color:e.buttonColor},children:f},m))}),i.jsx("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:i.jsxs("div",{children:[t.hide_price?i.jsxs("span",{className:"text-sm sm:text-base md:text-lg font-medium flex items-center gap-1.5",style:{color:"#25D366",fontFamily:e.fontBody},children:[i.jsx("svg",{className:"w-4 sm:w-5 h-4 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio por WhatsApp"]}):i.jsxs("span",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-extrabold block",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),t.weight&&i.jsxs("span",{className:"text-xs sm:text-sm font-light mt-0.5",style:{color:e.subtitleColor},children:["Peso: ",t.weight,"g"]})]})}),i.jsx("div",{className:"mt-auto",onClick:f=>f.stopPropagation(),children:n>0?i.jsxs("div",{className:"flex items-center justify-between gap-1.5 sm:gap-2 rounded-lg sm:rounded-xl p-1 sm:p-1.5",style:{backgroundColor:e.cardColor+"40"},children:[i.jsx("button",{onClick:d,className:"w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center font-bold text-base sm:text-lg hover:opacity-80 transition shadow-md",style:{background:`linear-gradient(135deg, ${e.buttonColor} 0%, ${e.buttonColor}ee 100%)`,color:e.buttonTextColor},"aria-label":"Disminuir cantidad",children:""}),i.jsx("span",{className:"text-base sm:text-lg font-bold min-w-[2rem] sm:min-w-[2.5rem] text-center",style:{color:e.titleColor},children:n}),i.jsx("button",{onClick:u,className:"w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center font-bold text-base sm:text-lg hover:opacity-80 transition shadow-md",style:{background:`linear-gradient(135deg, ${e.buttonColor} 0%, ${e.buttonColor}ee 100%)`,color:e.buttonTextColor},"aria-label":"Aumentar cantidad",children:"+"})]}):i.jsx(xn,{onClick:()=>r(t,1),style:{background:`linear-gradient(135deg, ${e.buttonColor} 0%, ${e.buttonColor}ee 100%)`,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full py-2 sm:py-2.5 md:py-3 text-xs sm:text-sm md:text-base rounded-lg sm:rounded-xl hover:opacity-90 font-semibold shadow-md hover:shadow-lg transition-all",ariaLabel:`Agregar ${t.name} al carrito`,children:i.jsxs("span",{className:"flex items-center justify-center gap-1",children:[i.jsx("svg",{className:"w-3 sm:w-4 h-3 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Agregar al carrito"]})})})]})]})})}function Qfe(t){return{1:UP,2:Gfe,3:Kfe}[t]||UP}function i9({products:t,theme:e,layout:n,cart:r,onAddToCart:s,onUpdateQuantity:a,onOpenCart:l,onProductClick:u}){if(t.length===0)return null;const d=e.cardLayout||1,f=r.reduce((_,C)=>_+C.quantity,0),m=_=>{const C=r.find(S=>S.product.id===_);return C?C.quantity:0},g=Qfe(d),w=n==="LIST"||d===2?"grid grid-cols-1 gap-3 sm:gap-4":"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4";return i.jsxs("div",{className:"mb-10",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[i.jsx("h2",{className:"text-xl sm:text-2xl font-bold",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Productos"}),i.jsxs("button",{onClick:l,style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"px-4 py-2 rounded-lg hover:opacity-90 transition-all shadow-md hover:shadow-lg relative w-full sm:w-auto font-medium text-sm flex items-center justify-center gap-2","aria-label":`Ver carrito con ${f} artculos`,children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),i.jsxs("span",{children:["Carrito (",f,")"]}),f>0&&i.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center shadow-lg animate-pulse",children:f})]})]}),i.jsx("div",{className:w,children:t.map((_,C)=>{const S=m(_.id);return i.jsx(g,{product:_,theme:e,quantity:S,onAddToCart:s,onUpdateQuantity:a,onProductClick:u,index:C},_.id)})})]})}function Xfe({isOpen:t,onClose:e,children:n}){const r=x.useRef(null),s=x.useRef(null);return x.useEffect(()=>(t?(s.current=document.activeElement,setTimeout(()=>{r.current?.focus()},100),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",s.current&&s.current.focus()),()=>{document.body.style.overflow="unset"}),[t]),x.useEffect(()=>{const a=l=>{l.key==="Escape"&&t&&e()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,e]),i.jsx(Ta,{children:t&&i.jsxs(i.Fragment,{children:[i.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e,role:"presentation","aria-hidden":"true"}),i.jsx(_e.div,{ref:r,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed right-0 top-0 h-full w-full sm:w-96 bg-white shadow-2xl z-50 overflow-hidden flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Carrito de compras",tabIndex:-1,children:n})]})})}function Zfe({count:t}){return i.jsx(Ta,{mode:"wait",children:t>0&&i.jsx(_e.span,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",stiffness:500,damping:15},className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:t},t)})}function FP({theme:t,onWhatsApp:e,onOpenCart:n,cartItems:r=0,showCartCta:s}){return i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-center gap-3 sm:gap-4 items-center w-full",children:[i.jsxs(xn,{onClick:e,style:{backgroundColor:"#25D366",color:"#ffffff",fontFamily:t.fontButton},className:"px-6 sm:px-8 py-3 sm:py-3.5 rounded-lg font-semibold hover:opacity-90 w-full sm:w-auto min-w-[200px] sm:min-w-[240px] text-sm sm:text-base shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2",ariaLabel:"Contactar por WhatsApp",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M20.52 3.48A11.82 11.82 0 0 0 12.07 0 11.86 11.86 0 0 0 1.07 12.17 11.7 11.7 0 0 0 3.5 20.5l-1 3.48 3.6-.94a11.93 11.93 0 0 0 5.94 1.52h.05A11.83 11.83 0 0 0 24 12.07 11.8 11.8 0 0 0 20.52 3.48ZM12.1 21a9.9 9.9 0 0 1-5.05-1.38l-.36-.22-2.14.55.57-2.08-.24-.34a9.83 9.83 0 0 1-1.7-5.54A10.08 10.08 0 0 1 12.06 2a9.92 9.92 0 0 1 7.07 2.93 9.92 9.92 0 0 1 2.92 7.12A10 10 0 0 1 12.1 21Zm5.47-7.3c-.3-.15-1.77-.87-2.04-.97s-.47-.15-.67.15-.77.97-.94 1.17-.35.22-.64.07A8.14 8.14 0 0 1 10 11.8a9.18 9.18 0 0 1-1.65-2 .55.55 0 0 1 .13-.76c.13-.14.3-.37.45-.55a2.54 2.54 0 0 0 .3-.52.67.67 0 0 0-.03-.63c-.08-.15-.67-1.62-.92-2.22-.24-.58-.5-.5-.67-.51H6.8a1.3 1.3 0 0 0-.94.44 3.93 3.93 0 0 0-1.24 2.9c0 1.7 1.26 3.34 1.43 3.57.17.22 2.47 3.78 5.98 5.13a19.4 19.4 0 0 0 2.02.6 4.86 4.86 0 0 0 2.25.14c.69-.1 2.1-.86 2.4-1.7a3 3 0 0 0 .21-1.7c-.09-.14-.27-.22-.57-.37Z"})}),"Contactar por WhatsApp"]}),s&&n&&i.jsxs(xn,{onClick:n,className:"px-6 sm:px-8 py-3 sm:py-3.5 text-blue-700 border-2 border-blue-300 rounded-lg font-semibold hover:bg-blue-50 w-full sm:w-auto min-w-[200px] sm:min-w-[240px] relative text-sm sm:text-base shadow-md hover:shadow-lg transition-all duration-300",ariaLabel:`Ver carrito con ${r} productos`,children:[" Ver carrito (",r,")",i.jsx(Zfe,{count:r})]})]})}function Jfe({isOpen:t,cart:e,orderForm:n,theme:r,deliveryEnabled:s=!1,onClose:a,onQuantityChange:l,onRemove:u,onFormChange:d,onSubmit:f}){const m=e.reduce((w,_)=>w+_.quantity,0),g=e.reduce((w,_)=>w+_.product.price*_.quantity,0),y=e.some(w=>w.product.hide_price===!0);return i.jsxs(Xfe,{isOpen:t,onClose:a,children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Carrito"}),i.jsxs("h3",{className:"text-xl font-bold",children:["Productos (",m,")"]})]}),i.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-3xl leading-none","aria-label":"Cerrar carrito",children:""})]}),i.jsx("div",{className:"p-6 max-h-[calc(100%-200px)] overflow-y-auto",children:e.length===0?i.jsx("p",{className:"text-gray-500 text-center py-8",children:"El carrito est vaco"}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"space-y-4 mb-6",children:e.map(w=>i.jsxs("div",{className:"flex items-center gap-4 border-b pb-4",children:[i.jsx("img",{src:w.product.image_url,alt:`${w.product.name} en el carrito`,className:"w-16 h-16 object-cover rounded",loading:"lazy"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold",children:w.product.name}),!w.product.hide_price&&i.jsxs("p",{className:"text-sm text-gray-600",children:["$",w.product.price.toLocaleString()]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>l(w.product.id,w.quantity-1),className:"px-2 py-1 bg-gray-200 rounded","aria-label":`Reducir cantidad de ${w.product.name}`,children:"-"}),i.jsx("span",{"aria-label":`Cantidad: ${w.quantity}`,children:w.quantity}),i.jsx("button",{onClick:()=>l(w.product.id,w.quantity+1),className:"px-2 py-1 bg-gray-200 rounded","aria-label":`Aumentar cantidad de ${w.product.name}`,children:"+"})]}),i.jsx("button",{onClick:()=>u(w.product.id),className:"text-red-600 hover:text-red-800","aria-label":`Eliminar ${w.product.name} del carrito`,children:""})]},w.product.id))}),!y&&i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex justify-between font-bold text-lg mb-4",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",g.toLocaleString()]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),i.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:n.client_name,onChange:w=>d("client_name",w.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WhatsApp *"}),i.jsx("input",{type:"tel",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:n.client_whatsapp,onChange:w=>d("client_whatsapp",w.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comentario"}),i.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:n.client_comment,onChange:w=>d("client_comment",w.target.value)})]}),s&&i.jsxs("div",{className:"border-t pt-4 mt-4 space-y-4 bg-blue-50 -mx-4 px-4 py-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("span",{className:"text-sm font-bold text-gray-900 block",children:"TIPO DE ENTREGA *"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("button",{type:"button",onClick:()=>d("delivery_type","PICKUP"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${n.delivery_type==="PICKUP"||!n.delivery_type?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg mb-1",children:""}),i.jsx("div",{className:"text-sm",children:"Retiro en local"})]})}),i.jsx("button",{type:"button",onClick:()=>d("delivery_type","DELIVERY"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${n.delivery_type==="DELIVERY"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg mb-1",children:""}),i.jsx("div",{className:"text-sm",children:"A Domicilio"})]})})]})]}),n.delivery_type==="DELIVERY"&&i.jsxs("div",{className:"space-y-4 pt-3 border-t border-blue-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:" DIRECCION DE ENTREGA *"}),i.jsx("textarea",{rows:2,required:!0,placeholder:"Ej: Av. Principal 123, Dpto 45, Comuna",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_address||"",onChange:w=>d("delivery_address",w.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:" UBICACION (Google Maps) - Opcional"}),i.jsx("input",{type:"url",placeholder:"https://maps.google.com/...",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_location||"",onChange:w=>d("delivery_location",w.target.value)}),i.jsx("p",{className:"text-xs text-gray-600 mt-1 bg-yellow-50 p-2 rounded",children:" Tip: Comparte tu ubicacin desde Google Maps para una entrega ms precisa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:" NOTAS DE ENTREGA - Opcional"}),i.jsx("textarea",{rows:2,placeholder:"Ej: Timbre en el 2do piso, horario preferido entre 14:00 y 18:00",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_notes||"",onChange:w=>d("delivery_notes",w.target.value)})]})]})]})]}),i.jsxs("div",{className:"flex flex-col gap-2 mt-6",children:[i.jsx(xn,{onClick:f,style:{backgroundColor:r.buttonColor},className:"px-4 py-3 text-white rounded-md hover:opacity-90",children:"Solicitar disponibilidad por WhatsApp"}),i.jsx(xn,{onClick:a,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Seguir comprando"})]})]})})]})}function eme({children:t,theme:e}){const[n,r]=x.useState(0),[s,a]=x.useState(!1),[l,u]=x.useState(!0),d=x.useRef(null),f=x.useRef([]),m=AE(0);GH(m,{damping:30,stiffness:300});const y=x.Children.toArray(t).filter(Boolean),w=y.length;x.useEffect(()=>{const N=d.current;if(!N)return;const k=()=>{const{scrollLeft:A,scrollWidth:L,clientWidth:F}=N;a(A>0),u(A<L-F-10)};k(),N.addEventListener("scroll",k);const R=new ResizeObserver(k);return R.observe(N),()=>{N.removeEventListener("scroll",k),R.disconnect()}},[y.length]);const _=N=>{const k=d.current,R=f.current[N];if(!k||!R)return;const A=k.getBoundingClientRect(),L=R.getBoundingClientRect(),F=k.scrollLeft+(L.left-A.left)-A.width/2+L.width/2;k.scrollTo({left:F,behavior:"smooth"}),r(N)},C=N=>{const k=d.current;if(!k)return;const R=k.clientWidth*.8,A=k.scrollLeft+(N==="left"?-R:R);k.scrollTo({left:A,behavior:"smooth"})},S=()=>{const N=d.current;if(!N)return;const{scrollLeft:k,scrollWidth:R,clientWidth:A}=N;m.set(k);let L=0,F=1/0;f.current.forEach((P,O)=>{if(!P)return;const T=P.getBoundingClientRect(),I=N.getBoundingClientRect(),V=T.left+T.width/2,$=I.left+I.width/2,U=Math.abs(V-$);U<F&&(F=U,L=O)}),r(L),a(k>0),u(k<R-A-10)};return i.jsxs("div",{className:"relative w-full",children:[s&&i.jsx(_e.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>C("left"),className:"hidden md:flex absolute left-4 top-1/2 -translate-y-1/2 z-30 h-12 w-12 items-center justify-center rounded-full shadow-lg backdrop-blur-sm bg-white/90 hover:bg-white transition-colors",style:{color:e.buttonColor},"aria-label":"Deslizar hacia la izquierda",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l&&i.jsx(_e.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>C("right"),className:"hidden md:flex absolute right-4 top-1/2 -translate-y-1/2 z-30 h-12 w-12 items-center justify-center rounded-full shadow-lg backdrop-blur-sm bg-white/90 hover:bg-white transition-colors",style:{color:e.buttonColor},"aria-label":"Deslizar hacia la derecha",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),i.jsx("div",{ref:d,onScroll:S,className:"flex gap-4 md:gap-6 overflow-x-auto snap-x snap-mandatory pb-6 scrollbar-hide scroll-smooth px-2 md:px-0",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:y.map((N,k)=>i.jsx(_e.div,{ref:R=>{f.current[k]=R},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.1},whileHover:{scale:1.02,y:-4},className:"snap-start min-w-[80vw] sm:min-w-[65vw] md:min-w-[42vw] lg:min-w-[34vw] xl:min-w-[28vw] 2xl:min-w-[24vw] max-w-[80vw] sm:max-w-[65vw] md:max-w-[42vw] lg:max-w-[34vw] xl:max-w-[28vw] 2xl:max-w-[24vw] flex-shrink-0",children:i.jsx("div",{className:"h-full aspect-square bg-white/70 dark:bg-gray-900/70 backdrop-blur-md rounded-xl shadow-lg p-3 sm:p-4 md:p-5 transition-all duration-300 hover:shadow-xl border border-white/30 dark:border-gray-700/30 hover:border-white/50 dark:hover:border-gray-600/50 overflow-hidden",children:i.jsx("div",{className:"h-full overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:N})})},k))}),w>1&&i.jsx("div",{className:"flex justify-center items-center gap-2 mt-6",children:y.map((N,k)=>i.jsx("button",{onClick:()=>_(k),className:`transition-all duration-300 rounded-full ${k===n?"w-8 h-3":"w-3 h-3 opacity-40 hover:opacity-60"}`,style:{backgroundColor:k===n?e.buttonColor:e.subtitleColor},"aria-label":`Ir a seccin ${k+1}`},k))}),l&&i.jsx(_e.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:2,repeat:1/0},className:"md:hidden absolute right-4 top-1/2 -translate-y-1/2 z-20 pointer-events-none",children:i.jsxs("div",{className:"flex flex-col items-center gap-1 text-gray-400",children:[i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),i.jsx("span",{className:"text-xs font-medium",children:"Desliza"})]})})]})}function B0({company:t,theme:e}){if(!t.video_enabled||!t.video_url)return null;let n;if(t.video_url.includes("youtube.com/embed/"))n=`${t.video_url.split("?")[0]}?rel=0&modestbranding=1&enablejsapi=1&origin=${encodeURIComponent(window.location.origin)}`;else{const r=Kx(t.video_url);if(!r)return console.warn("[VideoCard] Could not extract video ID from:",t.video_url),null;const s=typeof window<"u"?window.location.origin:"https://pymerp.cl";n=`https://www.youtube.com/embed/${r}?rel=0&modestbranding=1&enablejsapi=1&origin=${encodeURIComponent(s)}`}return i.jsx("div",{className:"mb-4 sm:mb-6 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm sm:shadow-md w-full",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:i.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[i.jsx("h2",{className:"font-semibold text-sm sm:text-base md:text-lg lg:text-xl mb-2 sm:mb-3",style:{color:e.titleColor,fontFamily:e.fontTitle},children:" Video"}),i.jsx("div",{className:"relative w-full rounded-lg overflow-hidden",style:{paddingBottom:"56.25%"},children:i.jsx("iframe",{src:n,className:"absolute top-0 left-0 w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,title:`Video de ${t.name}`,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})})}function tme({company:t,theme:e,services:n=[],products:r=[],cart:s=[],googleMapsApiKey:a,onBook:l,onServiceClick:u,onAddToCart:d,onUpdateQuantity:f,onProductClick:m,onOpenCart:g}){const[y,w]=x.useState(0),[_,C]=x.useState(!1),S=x.useRef(null),N=[t?.video_enabled&&t.video_placement==="HERO"&&t.video_url&&{type:"video-hero",component:i.jsx(B0,{company:t,theme:e})},t?.description&&t?.show_description!==!1&&{type:"description",component:i.jsx(t9,{company:t,theme:e,isCarousel:!0})},(t?.mission||t?.vision)&&t?.show_mission_vision!==!1&&{type:"mission",component:i.jsx(n9,{company:t,theme:e,isCarousel:!0})},(t?.weekday_days&&t.weekday_days.length>0||t?.weekend_days&&t.weekend_days.length>0)&&{type:"hours",component:i.jsx(r9,{company:t,theme:e,isCarousel:!0})},t?.address&&a&&{type:"location",component:i.jsx(s9,{company:t,theme:e,googleMapsApiKey:a,isCarousel:!0})},n.length>0&&{type:"services",component:i.jsx(a9,{services:n,theme:e,onBook:l||(()=>{}),onServiceClick:u||(()=>{})})},r.length>0&&{type:"products",component:i.jsx(i9,{products:r,theme:e,cart:s,onAddToCart:d||(()=>{}),onUpdateQuantity:f||(()=>{}),onOpenCart:g||(()=>{}),onProductClick:m||(()=>{})})},t?.video_enabled&&t.video_placement==="FOOTER"&&t.video_url&&{type:"video-footer",component:i.jsx(B0,{company:t,theme:e})}].filter(Boolean),k=()=>{_||N.length===0||(C(!0),S.current&&(clearTimeout(S.current),S.current=null),w(F=>(F+1)%N.length),setTimeout(()=>C(!1),700))},R=()=>{_||N.length===0||(C(!0),S.current&&(clearTimeout(S.current),S.current=null),w(F=>(F-1+N.length)%N.length),setTimeout(()=>C(!1),700))},A=F=>{_||N.length===0||(C(!0),S.current&&(clearTimeout(S.current),S.current=null),w(F),setTimeout(()=>C(!1),700))},L=N[y]?.type==="video-hero"||N[y]?.type==="video-footer";return x.useEffect(()=>{if(N.length===0)return;S.current&&(clearTimeout(S.current),S.current=null);const O=setTimeout(()=>{L?S.current=setTimeout(()=>{w(T=>(T+1)%N.length)},18e4):S.current=setTimeout(()=>{w(T=>(T+1)%N.length)},6e3)},_?700:0);return()=>{S.current&&(clearTimeout(S.current),S.current=null),clearTimeout(O)}},[y,_,N.length,L]),N.length===0?null:i.jsxs("div",{className:"relative w-full h-[85vh] min-h-[600px] overflow-hidden rounded-3xl mb-8",children:[i.jsx("div",{className:"absolute inset-0 flex transition-transform duration-700 ease-in-out",style:{transform:`translateX(-${y*100}%)`},children:N.map((F,P)=>i.jsx("div",{className:"min-w-full h-full flex items-center justify-center p-6 sm:p-12 overflow-y-auto",style:{backgroundColor:e.cardColor+"95",backdropFilter:"blur(10px)"},children:i.jsx(Ta,{mode:"wait",children:i.jsx(_e.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.95},transition:{duration:.6,ease:"easeOut"},className:"w-full h-full max-w-6xl",children:F.component},y)})},P))}),N.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:R,disabled:_,className:"absolute left-4 top-1/2 -translate-y-1/2 w-14 h-14 rounded-full bg-transparent flex items-center justify-center transition-all z-10 disabled:opacity-50 hover:opacity-80","aria-label":"Anterior",children:i.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"#4B5563",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),i.jsx("button",{onClick:k,disabled:_,className:"absolute right-4 top-1/2 -translate-y-1/2 w-14 h-14 rounded-full bg-transparent flex items-center justify-center transition-all z-10 disabled:opacity-50 hover:opacity-80","aria-label":"Siguiente",children:i.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"#4B5563",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})}),i.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:N.map((F,P)=>i.jsx("button",{onClick:()=>A(P),disabled:_,className:`h-3 rounded-full transition-all duration-300 ${P===y?"w-10 bg-white shadow-lg":"w-3 bg-white/50 hover:bg-white/75"}`,"aria-label":`Ir a slide ${P+1}`},P))}),i.jsx("div",{className:"absolute top-6 right-6 z-10 px-4 py-2 rounded-full bg-transparent",children:i.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[y+1," / ",N.length]})})]})]})}function nme({url:t,onClose:e}){return i.jsxs(tu,{isOpen:!!t,onClose:e,className:"relative max-w-4xl p-0 bg-transparent shadow-none",ariaLabel:"Vista previa de imagen",children:[i.jsx("button",{onClick:e,className:"absolute -top-10 right-0 text-white text-3xl z-10","aria-label":"Cerrar vista previa",children:""}),i.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-lg max-h-[80vh] flex items-center justify-center",children:t?i.jsx("img",{src:t,alt:"Vista previa ampliada de la imagen",className:"max-h-[80vh] max-w-full object-contain"}):null})]})}function rme({company:t,isOpen:e,onClose:n}){const[r,s]=x.useState(!1);if(x.useEffect(()=>{const d=`video_modal_seen_${t.id}`;sessionStorage.getItem(d)==="true"&&s(!0)},[t.id]),x.useEffect(()=>{if(e&&!r){const d=`video_modal_seen_${t.id}`;sessionStorage.setItem(d,"true"),s(!0)}},[e,r,t.id]),!e||!t.video_enabled||!t.video_url)return null;const a=Kx(t.video_url);if(!a)return null;const l=typeof window<"u"?window.location.origin:"https://pymerp.cl",u=`https://www.youtube.com/embed/${a}?rel=0&modestbranding=1&autoplay=1&enablejsapi=1&origin=${encodeURIComponent(l)}`;return i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 animate-fadeIn",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"video-modal-title",children:i.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4",onClick:d=>d.stopPropagation(),children:[i.jsx("button",{type:"button",onClick:n,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-black bg-opacity-30 hover:bg-opacity-50 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black","aria-label":"Cerrar video",children:i.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white opacity-80 hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("div",{className:"relative w-full h-full max-w-[95vw] max-h-[95vh]",children:i.jsx("iframe",{src:u,className:"w-full h-full rounded-lg",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,title:`Video de ${t.name}`,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})})}function sme({product:t,theme:e,quantity:n,onClose:r,onIncrement:s,onDecrement:a,onAddToCart:l}){return t?i.jsx(Ta,{children:i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),i.jsxs(_e.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"relative bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",style:{backgroundColor:e.cardColor,color:e.textColor},onClick:u=>u.stopPropagation(),children:[i.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-10 w-8 h-8 flex items-center justify-center rounded-full bg-white/90 hover:bg-white shadow-lg transition","aria-label":"Cerrar",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("div",{className:"w-full h-64 sm:h-96 bg-gray-100 flex items-center justify-center",children:i.jsx("img",{src:t.image_url||"https://placehold.co/600x400/EEF2FF/1F2937?text=Sin+imagen",alt:t.name,className:"max-h-full max-w-full object-contain"})}),i.jsxs("div",{className:"p-6 sm:p-8",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("span",{className:"text-3xl font-bold",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:t.hide_price?i.jsxs("span",{className:"text-base font-medium flex items-center gap-2",style:{color:"#25D366"},children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio por WhatsApp"]}):`$${t.price.toLocaleString()}`}),t.weight&&i.jsxs("span",{className:"text-lg",style:{color:e.subtitleColor},children:[t.weight,"g"]})]}),t.tags&&t.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.tags.map((u,d)=>i.jsx("span",{className:"px-3 py-1 text-sm rounded-full border",style:{backgroundColor:"#f3f4f6",color:e.titleColor,borderColor:e.subtitleColor||"#d1d5db"},children:u},d))}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Descripcin"}),i.jsx("p",{className:"text-base leading-relaxed whitespace-pre-wrap",style:{color:e.textColor},children:t.description})]}),i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("span",{className:"text-sm font-medium",style:{color:e.titleColor},children:"Cantidad:"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:a,disabled:n===0,className:"w-10 h-10 rounded-full flex items-center justify-center border-2 font-bold text-lg hover:opacity-80 transition disabled:opacity-30 disabled:cursor-not-allowed",style:{borderColor:e.buttonColor,color:e.buttonColor},"aria-label":"Disminuir cantidad",children:""}),i.jsx("span",{className:"text-xl font-bold min-w-[2rem] text-center",style:{color:e.titleColor},children:n}),i.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full flex items-center justify-center border-2 font-bold text-lg hover:opacity-80 transition",style:{borderColor:e.buttonColor,color:e.buttonColor},"aria-label":"Aumentar cantidad",children:"+"})]})]}),i.jsx("button",{onClick:l,disabled:n===0,className:"w-full py-3 rounded-lg font-semibold text-lg hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},children:n===0?"Selecciona una cantidad":`Agregar ${n} al carrito`})]})]})]})}):null}function ame({service:t,professionals:e,theme:n,onClose:r,onBook:s}){if(!t)return null;const a=t.professional_ids&&t.professional_ids.length>0?e.filter(l=>t.professional_ids?.includes(l.id)):e;return i.jsx(Ta,{children:i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx(_e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),i.jsxs(_e.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"relative bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",style:{backgroundColor:n.cardColor,color:n.textColor},onClick:l=>l.stopPropagation(),children:[i.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-10 w-8 h-8 flex items-center justify-center rounded-full bg-white/90 hover:bg-white shadow-lg transition","aria-label":"Cerrar",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.image_url&&i.jsx("div",{className:"w-full h-64 sm:h-96 bg-gray-100 flex items-center justify-center",children:i.jsx("img",{src:t.image_url,alt:t.name,className:"max-h-full max-w-full object-contain"})}),i.jsxs("div",{className:"p-6 sm:p-8",children:[i.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",style:{color:n.titleColor,fontFamily:n.fontTitle},children:t.name}),i.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[i.jsx("span",{className:"text-3xl font-bold",style:{color:n.buttonColor,fontFamily:n.fontTitle},children:t.hide_price?i.jsxs("span",{className:"text-base font-medium flex items-center gap-2",style:{color:"#25D366"},children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio por WhatsApp"]}):`$${t.price.toLocaleString()}`}),i.jsx("div",{className:"flex items-center gap-4 text-sm",style:{color:n.subtitleColor},children:i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.estimated_duration_minutes," minutos"]})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:n.titleColor,fontFamily:n.fontTitle},children:" Descripcin"}),i.jsx("p",{className:"text-base leading-relaxed whitespace-pre-wrap",style:{color:n.textColor},children:t.description})]}),a.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:n.titleColor,fontFamily:n.fontTitle},children:" Profesionales disponibles"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:a.map(l=>i.jsx("div",{className:"p-4 rounded-lg border shadow-sm hover:shadow-md transition-shadow",style:{backgroundColor:n.cardColor+"80",borderColor:n.subtitleColor+"40"||"#e5e7eb"},children:i.jsxs("div",{className:"flex items-start gap-3",children:[l.avatar_url?i.jsx("img",{src:l.avatar_url,alt:l.name,className:"w-12 h-12 rounded-full object-cover flex-shrink-0"}):i.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",style:{backgroundColor:n.buttonColor},children:l.name.charAt(0).toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-semibold text-sm mb-1",style:{color:n.titleColor},children:l.name}),l.specialties&&l.specialties.length>0&&i.jsx("p",{className:"text-xs mb-2 line-clamp-1",style:{color:n.subtitleColor},children:l.specialties.join(", ")}),l.email&&i.jsxs("div",{className:"flex items-center gap-1.5 mt-2",children:[i.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:n.subtitleColor},children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("a",{href:`mailto:${l.email}`,className:"text-xs truncate hover:underline",style:{color:n.buttonColor},onClick:u=>u.stopPropagation(),children:l.email})]})]})]})},l.id))})]}),i.jsx("button",{onClick:()=>{r(),s()},className:"w-full py-3 rounded-lg font-semibold text-lg hover:opacity-90 transition",style:{backgroundColor:n.buttonColor,color:n.buttonTextColor,fontFamily:n.fontButton},children:" Agendar este servicio"})]})]})]})})}const d1=(t,e)=>{const n=Math.min(1,Math.max(0,e)),r=t?.trim();if(!r)return`rgba(255,255,255,${n})`;if(r.startsWith("rgba")||r.startsWith("rgb"))return r.replace(/rgba?\(([^)]+)\)/,(m,g)=>{const y=g.split(",").map(S=>S.trim()),[w,_,C]=y;return`rgba(${w}, ${_}, ${C}, ${n})`});const s=r.replace("#",""),a=s.length===3?s.split("").map(m=>m+m).join(""):s,l=parseInt(a.substring(0,6),16),u=l>>16&255,d=l>>8&255,f=l&255;return`rgba(${u}, ${d}, ${f}, ${n})`},Cr={bgColor:"#ffffff",bgOpacity:1,cardColor:"#ffffff",cardOpacity:1,buttonColor:"#2563eb",buttonTextColor:"#ffffff",titleColor:"#111827",subtitleColor:"#4b5563",textColor:"#4b5563",fontTitle:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif',fontBody:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif',fontButton:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif'};function ime(){const{slug:t}=Sm(),{trackConversion:e,trackClick:n,trackNamedEvent:r}=eu(),{handleError:s}=St(),a=x.useMemo(()=>typeof navigator<"u"&&/iPhone|iPad|iPod|Android/i.test(navigator.userAgent||""),[]),[l,u]=x.useState(null),[d,f]=x.useState(null),[m,g]=x.useState([]),[y,w]=x.useState([]),[_,C]=x.useState([]),[S,N]=x.useState(null),[k,R]=x.useState([]),[A,L]=x.useState([]),[F,P]=x.useState(!0),[O,T]=x.useState(!1),[I,V]=x.useState(null),[$,U]=x.useState(null),[G,W]=x.useState(null),[z,q]=x.useState([]),[K,X]=x.useState({client_name:"",client_whatsapp:"",client_email:"",client_rut:"",client_comment:""}),[se,H]=x.useState(null),[Z,te]=x.useState(!1),[J,ne]=x.useState({client_name:"",client_whatsapp:"",client_comment:"",delivery_type:"PICKUP",delivery_address:"",delivery_location:"",delivery_notes:""}),[ae,me]=x.useState(null),[we,Ne]=x.useState(0),[Se,Ue]=x.useState(!1),jt=!!(d?.show_whatsapp_fab&&l?.whatsapp);x.useEffect(()=>{t&&ut(t)},[t]),x.useEffect(()=>{l?.id&&Ee(l.id)},[l]),x.useEffect(()=>{if(l?.video_enabled&&l.video_placement==="MODAL"&&l.video_url){const Te=setTimeout(()=>{Ue(!0)},500);return()=>clearTimeout(Te)}},[l?.video_enabled,l?.video_placement,l?.video_url]);const Qe=x.useMemo(()=>{const Te=d?.background_color||Cr.bgColor,Re=d?.card_color||Cr.cardColor,$e=d?.background_opacity??Cr.bgOpacity,st=d?.card_opacity??Cr.cardOpacity,Xt=d?.calendar_card_color||d?.card_color||"#ffffff",tt=d?.calendar_card_opacity??100;return{bgColor:d1(Te,$e),bgOpacity:$e,cardColor:d1(Re,st),cardOpacity:st,buttonColor:d?.button_color||Cr.buttonColor,buttonTextColor:d?.button_text_color||Cr.buttonTextColor,titleColor:d?.title_color||Cr.titleColor,subtitleColor:d?.subtitle_color||Cr.subtitleColor,textColor:d?.text_color||Cr.textColor,fontTitle:d?.font_title||Cr.fontTitle,fontBody:d?.font_body||Cr.fontBody,fontButton:d?.font_button||Cr.fontButton,cardLayout:d?.card_layout||1,calendarCardColor:d1(Xt,tt/100),calendarCardOpacity:tt,calendarTextColor:d?.calendar_text_color||d?.text_color||Cr.textColor,calendarTitleColor:d?.calendar_title_color||d?.title_color||Cr.titleColor,calendarButtonColor:d?.calendar_button_color||d?.button_color||Cr.buttonColor,calendarButtonTextColor:d?.calendar_button_text_color||d?.button_text_color||Cr.buttonTextColor,calendarAvailableDayColor:d?.calendar_available_day_color||"#22c55e",calendarLowSlotsColor:d?.calendar_low_slots_color||"#eab308",calendarNoSlotsColor:d?.calendar_no_slots_color||"#ef4444",calendarSelectedDayColor:d?.calendar_selected_day_color||d?.button_color||Cr.buttonColor}},[d]),on=x.useMemo(()=>({position:"relative",minHeight:"100vh",backgroundColor:"transparent"}),[]),Ee=async Te=>{try{await Vg(Te,_s.PAGE_VIEW)}catch{}},ut=async Te=>{P(!0);try{const Re=await lJ(Te);if(!Re){P(!1);return}if(u(Re),Re.business_type)try{const $e=await jx(Re.id,Re.business_type);f($e)}catch{}if(Re.business_type===un.SERVICES){try{const st=(await th(Re.id)).filter(Xt=>!Xt.status||Xt.status==="ACTIVE");g(st)}catch($e){s($e)}try{const $e=await Ix(Re.id);w($e)}catch($e){s($e)}}else if(Re.business_type===un.PRODUCTS)try{const st=(await FC(Re.id)).filter(Xt=>!Xt.status||Xt.status==="ACTIVE");R(st)}catch($e){s($e)}}catch(Re){s(Re)}finally{P(!1)}},Rt=()=>{if(l?.whatsapp){const Te=l.booking_message||"Hola, quiero contactarte",Re=`https://wa.me/${l.whatsapp}?text=${encodeURIComponent(Te)}`;window.open(Re,"_blank"),l?.id&&(Vg(l.id,_s.WHATSAPP_CLICK),r("contact.whatsappClick",{company_id:l.id,company_name:l.name}),e()(pi.WHATSAPP_CLICK,void 0,{company_id:l.id,company_name:l.name}))}},cr=async Te=>{if(!l?.id)return;V(Te),U(null),W(null);const Re=Te.professional_ids&&Te.professional_ids.length>0?y.filter($e=>Te.professional_ids?.includes($e.id)):y;C(Re),N(Re[0]?.id||null);try{const $e=await kx(Te.id),Xt=(await Tx(l.id)).filter(tt=>tt.status==="ACTIVE"&&$e.some(Zt=>Zt.schedule_slot_id===tt.id));q(Xt),T(!0),Vg(l.id,_s.SERVICE_BOOK_CLICK)}catch($e){ue.error("No pudimos cargar los horarios"),s($e)}},_t=()=>{T(!1),V(null),U(null),W(null),C([]),N(null),X({client_name:"",client_whatsapp:"",client_email:"",client_rut:"",client_comment:""})},en=async()=>{if(!I||!$||!G||!l){ue.error("Completa todos los campos");return}if(_.length>0&&!S){ue.error("Selecciona un profesional");return}const Te=Ks(K.client_name,120),Re=K.client_whatsapp.replace(/\D/g,""),$e=K.client_email?.trim()||"",st=Ks(K.client_rut||"",20),Xt=K.client_comment?Ks(K.client_comment,600):void 0;if(!Te||!Re||!st){ue.error("Completa nombre, WhatsApp y RUT");return}if(!O_(Re)){ue.error("Ingresa un WhatsApp vlido");return}if($e&&!aS($e)){ue.error("Ingresa un correo vlido");return}try{const tt=z.find(hs=>hs.id===G);if(!tt){ue.error("Horario no encontrado");return}const Zt=S||"unassigned";if(!await Z6(l.id,Zt,$,tt.start_time,tt.end_time)){ue.error("El horario ya no est disponible, elige otra opcin");return}await G5({company_id:l.id,service_id:I.id,professional_id:Zt,client_name:Te,client_phone:Re,client_email:$e||void 0,client_rut:st||void 0,appointment_date:$,start_time:tt.start_time,end_time:tt.end_time,status:Le.REQUESTED,notes:Xt}),await X6({company_id:l.id,service_id:I.id,professional_id:Zt,schedule_slot_id:G,date:$.toISOString().split("T")[0],start_time:tt.start_time,end_time:tt.end_time,status:"REQUESTED"}),e()(pi.SERVICE_BOOKING,I.price,{service_id:I.id,service_name:I.name,company_id:l.id,company_name:l.name}),r("appointments.publicRequested",{service_id:I.id,professional_id:Zt,company_id:l.id});const $n=$.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),xr=`${tt.start_time} - ${tt.end_time}`;ue.success(` Cita solicitada exitosamente!

 ${$n}
 ${xr}

Te notificaremos cuando sea confirmada.`,{duration:6e3}),_t()}catch(tt){ue.error("Error al procesar la solicitud. Por favor, intenta nuevamente."),s(tt)}},nr=(Te,Re=1)=>{const $e=A.find(st=>st.product.id===Te.id);L($e?A.map(st=>st.product.id===Te.id?{...st,quantity:st.quantity+Re}:st):[...A,{product:Te,quantity:Re}]),n("add_to_cart")({product_id:Te.id,product_name:Te.name,product_price:Te.price,company_id:l?.id}),ue.success(`${Re>1?`${Re} productos agregados`:"Producto agregado"} al carrito`)},us=(Te,Re)=>{if(Re===0)L(A.filter($e=>$e.product.id!==Te)),ue.success("Producto eliminado del carrito");else if(A.find(st=>st.product.id===Te))L(A.map(st=>st.product.id===Te?{...st,quantity:Re}:st));else{const st=k.find(Xt=>Xt.id===Te);st&&L([...A,{product:st,quantity:Re}])}},Wr=Te=>{const Re=A.find($e=>$e.product.id===Te.id);Ne(Re?Re.quantity:0),me(Te)},_n=()=>{ae&&we>0&&(A.find(Re=>Re.product.id===ae.id)?(us(ae.id,we),ue.success("Carrito actualizado")):nr(ae,we),me(null),Ne(0))},ur=Te=>{L(A.filter(Re=>Re.product.id!==Te)),ue.success("Producto eliminado del carrito")},ds=async()=>{if(!l)return;const Te=Ks(J.client_name,120),Re=J.client_whatsapp.replace(/\D/g,""),$e=J.client_comment?Ks(J.client_comment,400):"";if(!Te||!Re){ue.error("Completa nombre y WhatsApp");return}if(!O_(Re)){ue.error("Ingresa un WhatsApp vlido (9 a 20 dgitos)");return}if(A.length===0){ue.error("El carrito est vaco");return}if(l.delivery_enabled&&J.delivery_type==="DELIVERY"&&(!J.delivery_address||J.delivery_address.trim()==="")){ue.error("Por favor ingresa la direccin de entrega");return}const st=J.delivery_address?Ks(J.delivery_address,200):"",Xt=J.delivery_location?Ks(J.delivery_location,300):"",tt=J.delivery_notes?Ks(J.delivery_notes,300):"";try{const Zt=A.map(Tt=>({product_id:Tt.product.id,quantity:Tt.quantity,unit_price:Tt.product.price})),Pn=A.reduce((Tt,Ar)=>Tt+Ar.product.price*Ar.quantity,0),$n=A.some(Tt=>Tt.product.hide_price===!0);let xr=`Hola, quiero consultar disponibilidad de estos productos:

${A.map(Tt=>`${Tt.product.name} x ${Tt.quantity}`).join(`
`)}`;if($n||(xr+=`

Total estimado: $${Pn.toLocaleString()}`),xr+=`

Mi nombre es ${Te} y mi WhatsApp es ${Re}.`,l.delivery_enabled){const Tt=J.delivery_type==="DELIVERY"?">> DOMICILIO <<":">> RETIRO EN LOCAL <<";xr+=`


*TIPO DE ENTREGA:*
${Tt}
`,J.delivery_type==="DELIVERY"&&(xr+=`

*DIRECCION DE ENTREGA:*
${st}`,Xt&&(xr+=`

*UBICACION (Google Maps):*
${Xt}`),tt&&(xr+=`

*NOTAS DE ENTREGA:*
${tt}`))}$e&&(xr+=`

*COMENTARIOS:*
${$e}`);try{await bJ({company_id:l.id,items:Zt,total_estimated:Pn,client_name:Te,client_whatsapp:Re,client_comment:$e}),Vg(l.id,_s.PRODUCT_ORDER_CLICK),e()(pi.PRODUCT_ORDER,Pn,{product_count:A.length,total_items:A.reduce((Tt,Ar)=>Tt+Ar.quantity,0),company_id:l.id,company_name:l.name}),r("products.orderSubmitted",{product_count:A.length,total_items:A.reduce((Tt,Ar)=>Tt+Ar.quantity,0),company_id:l.id,company_name:l.name,total_estimated:Pn})}catch(Tt){De.warn("No se pudo registrar el pedido en Firestore, continuando con WhatsApp.",Tt)}const hs=`https://wa.me/${l.whatsapp}?text=${encodeURIComponent(xr)}`;window.open(hs,"_blank"),te(!1),L([]),ne({client_name:"",client_whatsapp:"",client_comment:""}),ue.success("Redirigiendo a WhatsApp...")}catch(Zt){if(De.error("Error al procesar la solicitud de productos:",Zt),ue.error("Error al procesar la solicitud. Intentando abrir WhatsApp..."),l?.whatsapp){const Pn=`Hola, quiero consultar disponibilidad. Mi nombre es ${Te}. WhatsApp: ${Re}. Comentarios: ${$e||"Ninguno"}.`;window.open(`https://wa.me/${l.whatsapp}?text=${encodeURIComponent(Pn)}`,"_blank")}s(Zt,{showToast:!1,context:{action:"submitProductOrder"}})}},Rs=l?`${l.name} | ${l.sector||l.industry||"PYM-ERP"}`:"Ficha pblica | PYM-ERP",Gr=l?.mission||l?.booking_message||"Descubre servicios y productos locales en PYM-ERP.",la=d?.banner_url||d?.logo_url||"/logopymerp.png",Ni=typeof window<"u"?window.location.href:"",ca=l?Ene({name:l.name,description:Gr,image:la,url:Ni,phone:l.whatsapp,priceRange:"$$",address:{street:l.address||"",city:l.city||l.comuna||"",region:l.region||"",postalCode:l.postal_code||"",country:"CL"},geo:l.latitude&&l.longitude?{latitude:l.latitude,longitude:l.longitude}:void 0}):null,Ra=A.reduce((Te,Re)=>Te+Re.quantity,0),Hn=dn.googleMapsApiKey;if(F)return i.jsx(zn,{fullScreen:!0,size:"lg"});if(!l)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Emprendimiento no encontrado"}),i.jsx("p",{className:"text-gray-600",children:"La pgina que buscas no existe."})]})});const En=!!(l?.background_enabled&&l.background_orientation!=="VERTICAL"),Rn=[l?.video_enabled&&l.video_placement==="HERO"&&l.video_url?i.jsx(B0,{company:l,theme:Qe},"video-hero"):null,l?.description&&l?.show_description!==!1?i.jsx(t9,{company:l,theme:Qe},"description"):null,(l?.mission||l?.vision)&&l?.show_mission_vision!==!1?i.jsx(n9,{company:l,theme:Qe},"mission"):null,l?.weekday_days&&l.weekday_days.length>0||l?.weekend_days&&l.weekend_days.length>0?i.jsx(r9,{company:l,theme:Qe},"hours"):null,l?.address&&Hn?i.jsx(s9,{company:l,theme:Qe,googleMapsApiKey:Hn},"location"):null,...l.business_type===un.SERVICES&&m.length>0?[i.jsx(a9,{services:m,theme:Qe,onBook:cr,onServiceClick:Te=>{V(Te);const Re=Te.professional_ids&&Te.professional_ids.length>0?y.filter($e=>Te.professional_ids?.includes($e.id)):y;C(Re)}},"services")]:[],...l.business_type===un.PRODUCTS&&k.length>0?[i.jsx(i9,{products:k,theme:Qe,layout:d?.layout,cart:A,onAddToCart:nr,onUpdateQuantity:us,onOpenCart:()=>te(!0),onProductClick:Wr},"products")]:[],l?.video_enabled&&l.video_placement==="FOOTER"&&l.video_url?i.jsx(B0,{company:l,theme:Qe},"video-footer"):null].filter(Boolean),tn=i.jsxs(i.Fragment,{children:[Rn,i.jsx(FP,{theme:Qe,onWhatsApp:Rt,onOpenCart:()=>te(!0),cartItems:Ra,showCartCta:l.business_type===un.PRODUCTS})]});return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:Rs,description:Gr,keywords:`${l.name}, ${l.sector||""}, ${l.industry||""}, ${l.comuna||""}, servicios, productos`,ogImage:la,ogImageAlt:`${l.name} - ${l.sector||"Negocio local"}`,ogType:"website",schema:ca||void 0,robots:"index, follow"}),i.jsxs("div",{className:"min-h-screen relative background-container",style:on,"data-orientation":l?.background_orientation?.toLowerCase()||"horizontal","data-fit":l?.background_fit||"cover",children:[l?.background_enabled&&l.background_url&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:l.background_url,alt:"",className:"background-preload",loading:"eager",decoding:"async","aria-hidden":"true"}),i.jsx("div",{className:"fixed inset-0 -z-10",style:{backgroundImage:`url(${l.background_url})`,backgroundSize:l.background_fit||"cover",backgroundRepeat:"no-repeat",backgroundPosition:l.background_orientation==="VERTICAL"?"center top":"center center",backgroundAttachment:a?"scroll":"fixed",opacity:(l.background_opacity??100)/100,imageRendering:"high-quality",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",transform:"translateZ(0)",willChange:"transform",objectFit:l.background_fit||"cover",transition:"opacity 0.3s ease-in-out",backgroundColor:"transparent",WebkitBackgroundColor:"transparent"},"aria-hidden":"true"})]}),(!l?.background_enabled||!l.background_url)&&i.jsx("div",{className:"fixed inset-0 -z-20",style:{backgroundColor:Qe.bgColor},"aria-hidden":"true"}),i.jsx($fe,{company:l,appearance:d,theme:Qe}),i.jsx("main",{id:"main-content",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",style:{color:Qe.textColor,fontFamily:Qe.fontBody},children:Qe.cardLayout===3?i.jsx(tme,{company:l,theme:Qe,services:m,products:k,cart:A,googleMapsApiKey:Hn,onBook:cr,onServiceClick:Te=>{V(Te);const Re=Te.professional_ids&&Te.professional_ids.length>0?y.filter($e=>Te.professional_ids?.includes($e.id)):y;C(Re)},onAddToCart:nr,onUpdateQuantity:us,onProductClick:Wr,onOpenCart:()=>te(!0)}):En?i.jsxs(i.Fragment,{children:[Rn.length>0&&i.jsx(eme,{theme:Qe,children:Rn}),i.jsx("div",{className:"mt-12 mb-8 flex justify-center",children:i.jsx(FP,{theme:Qe,onWhatsApp:Rt,onOpenCart:()=>te(!0),cartItems:Ra,showCartCta:l.business_type===un.PRODUCTS})})]}):i.jsx("div",{className:"space-y-6",children:tn})}),jt&&i.jsx("button",{type:"button",onClick:Rt,className:"fixed bottom-6 right-6 z-40 flex items-center justify-center h-14 w-14 rounded-full shadow-lg text-white hover:opacity-90 transition",style:{backgroundColor:"#25D366",color:"#ffffff"},"aria-label":"Contactar por WhatsApp",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:i.jsx("path",{d:"M20.52 3.48A11.82 11.82 0 0 0 12.07 0 11.86 11.86 0 0 0 1.07 12.17 11.7 11.7 0 0 0 3.5 20.5l-1 3.48 3.6-.94a11.93 11.93 0 0 0 5.94 1.52h.05A11.83 11.83 0 0 0 24 12.07 11.8 11.8 0 0 0 20.52 3.48ZM12.1 21a9.9 9.9 0 0 1-5.05-1.38l-.36-.22-2.14.55.57-2.08-.24-.34a9.83 9.83 0 0 1-1.7-5.54A10.08 10.08 0 0 1 12.06 2a9.92 9.92 0 0 1 7.07 2.93 9.92 9.92 0 0 1 2.92 7.12A10 10 0 0 1 12.1 21Zm5.47-7.3c-.3-.15-1.77-.87-2.04-.97s-.47-.15-.67.15-.77.97-.94 1.17-.35.22-.64.07A8.14 8.14 0 0 1 10 11.8a9.18 9.18 0 0 1-1.65-2 .55.55 0 0 1 .13-.76c.13-.14.3-.37.45-.55a2.54 2.54 0 0 0 .3-.52.67.67 0 0 0-.03-.63c-.08-.15-.67-1.62-.92-2.22-.24-.58-.5-.5-.67-.51H6.8a1.3 1.3 0 0 0-.94.44 3.93 3.93 0 0 0-1.24 2.9c0 1.7 1.26 3.34 1.43 3.57.17.22 2.47 3.78 5.98 5.13a19.4 19.4 0 0 0 2.02.6 4.86 4.86 0 0 0 2.25.14c.69-.1 2.1-.86 2.4-1.7a3 3 0 0 0 .21-1.7c-.09-.14-.27-.22-.57-.37Z"})})}),i.jsxs("footer",{id:"footer",className:"text-center py-6 text-sm",style:{color:Qe.textColor},children:["Desarrollado por"," ",i.jsx("a",{href:"https://www.pymerp.cl",className:"text-blue-600 hover:underline",style:{fontFamily:Qe.fontBody},target:"_blank",rel:"noopener noreferrer","aria-label":"Visitar sitio web de PymERP (se abre en nueva ventana)",children:"pymerp.cl"})]}),i.jsx(J6,{isOpen:O,serviceName:I?.name,availableSchedules:z,selectedDate:$,selectedSchedule:G,bookingForm:K,onClose:_t,onDateChange:(Te,Re)=>{U(Te),W(Re)},onScheduleChange:Te=>W(Te),onFormChange:(Te,Re)=>X({...K,[Te]:Re}),onSubmit:en,professionals:_,selectedProfessionalId:S,onProfessionalChange:Te=>N(Te),requireProfessional:_.length>0,enableEmailField:!0,emailLabel:"Correo del cliente (opcional)",emailPlaceholder:"cliente@correo.com",theme:Qe,companyId:l?.id}),i.jsx(Jfe,{isOpen:Z,cart:A,orderForm:J,deliveryEnabled:l?.delivery_enabled,onClose:()=>te(!1),onQuantityChange:us,onRemove:ur,onFormChange:(Te,Re)=>ne({...J,[Te]:Re}),onSubmit:ds,theme:Qe}),i.jsx(nme,{url:se,onClose:()=>H(null)}),l&&i.jsx(rme,{company:l,theme:Qe,isOpen:Se,onClose:()=>Ue(!1)}),ae&&i.jsx(sme,{product:ae,theme:Qe,quantity:we,onClose:()=>{me(null),Ne(0)},onIncrement:()=>Ne(we+1),onDecrement:()=>Ne(Math.max(0,we-1)),onAddToCart:_n}),I&&!O&&i.jsx(ame,{service:I,professionals:_.length>0?_:y,theme:Qe,onClose:()=>{V(null),C([])},onBook:()=>cr(I)})]})]})}function ome(){return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center space-y-2 p-6",children:[i.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pgina deshabilitada"}),i.jsx("p",{className:"text-gray-600",children:"El contenido de Transparencia ya no est disponible."})]})})}function BP(){const t=Ze(),e=[{icon:"",title:"Simplicidad",description:"Creemos que la tecnologa debe ser accesible para todos. Sin complicaciones, sin barreras tcnicas."},{icon:"",title:"Innovacin",description:"Estamos constantemente mejorando y agregando nuevas funcionalidades basadas en las necesidades reales de nuestros usuarios."},{icon:"",title:"Compromiso",description:"Tu xito es nuestro xito. Trabajamos da a da para que tu negocio crezca y prospere."},{icon:"",title:"Seguridad",description:"Protegemos tus datos con tecnologa de nivel empresarial y cumplimos con todas las normativas chilenas."}],n=[{year:"2024",title:"Nacimiento de PyM-ERP",description:"Identificamos la necesidad de digitalizar las PYMEs chilenas con una solucin simple y accesible."},{year:"2024 Q4",title:"Lanzamiento Beta",description:"Lanzamos nuestra plataforma bsica con funcionalidades esenciales para emprendedores y pequeas empresas."},{year:"2026",title:"Expansin y Crecimiento",description:"Lanzamiento de planes avanzados y funcionalidades ERP completas para empresas en crecimiento."}];return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Acerca de Nosotros | PyM-ERP",description:"Conoce la historia, misin y valores de PyM-ERP. Somos una plataforma diseada para digitalizar y hacer crecer tu negocio.",canonical:"/about"}),i.jsx("div",{className:"min-h-screen bg-white",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[i.jsx(_e.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[i.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"Acerca de PyM-ERP"}),i.jsx("p",{className:"text-xl md:text-2xl text-gray-700 max-w-4xl mx-auto leading-relaxed mb-8",children:"Somos una plataforma tecnolgica diseada especficamente para emprendedores y PYMEs chilenas. Nuestra misin es democratizar el acceso a herramientas profesionales de gestin empresarial."}),i.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-8 md:p-12 max-w-4xl mx-auto",children:i.jsx("p",{className:"text-lg md:text-xl text-gray-800 leading-relaxed font-medium",children:'"Creemos que cada negocio, sin importar su tamao, merece tener acceso a tecnologa de clase mundial para competir y crecer en el mercado digital actual."'})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:[i.jsxs(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"bg-white border-2 border-indigo-100 rounded-2xl p-8 shadow-lg",children:[i.jsx("div",{className:"text-5xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:"Nuestra Misin"}),i.jsx("p",{className:"text-base md:text-lg text-gray-700 leading-relaxed",children:"Facilitar la transformacin digital de emprendedores y PYMEs en Chile, proporcionando herramientas intuitivas, accesibles y poderosas que les permitan gestionar su negocio de manera profesional sin necesidad de conocimientos tcnicos avanzados ni grandes inversiones."})]}),i.jsxs(_e.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},className:"bg-white border-2 border-purple-100 rounded-2xl p-8 shadow-lg",children:[i.jsx("div",{className:"text-5xl mb-4",children:""}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:"Nuestra Visin"}),i.jsx("p",{className:"text-base md:text-lg text-gray-700 leading-relaxed",children:"Ser la plataforma lder en Chile para la gestin empresarial de PYMEs, reconocida por su simplicidad, innovacin y compromiso con el xito de nuestros usuarios. Aspiramos a ser el socio tecnolgico de confianza que impulsa el crecimiento de miles de negocios chilenos."})]})]}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-16",children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-12",children:"Nuestros Valores"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((r,s)=>i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5+s*.1},className:"bg-white rounded-xl p-6 shadow-md border border-gray-200 hover:shadow-lg transition-shadow text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:r.icon}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:r.title}),i.jsx("p",{className:"text-gray-700 leading-relaxed",children:r.description})]},r.title))})]}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 md:p-12 text-white mb-16",children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center",children:"Nuestra Historia"}),i.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[i.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"PyM-ERP naci de la observacin de una realidad: miles de emprendedores y pequeas empresas en Chile luchan por competir en un mercado cada vez ms digitalizado, pero carecen de acceso a herramientas profesionales de gestin debido a su complejidad y costo."}),i.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Decidimos crear una solucin que combinara la potencia de un ERP empresarial con la simplicidad que necesita un emprendedor. Utilizamos tecnologa de punta (Firebase, React, Cloud Computing) para ofrecer una plataforma robusta, segura y escalable, pero con una interfaz intuitiva que cualquiera puede usar."}),i.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Hoy, PyM-ERP est ayudando a cientos de negocios a digitalizarse, gestionar sus operaciones y crecer. Nuestro compromiso es seguir innovando y mejorando para ser el mejor aliado tecnolgico de tu negocio."})]})]}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"mb-16",children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-12",children:"Hitos Importantes"}),i.jsx("div",{className:"space-y-6",children:n.map((r,s)=>i.jsx(_e.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.8+s*.1},className:"bg-white border-2 border-gray-200 rounded-xl p-6 md:p-8 shadow-md hover:shadow-lg transition-shadow",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"inline-block px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg font-bold text-lg",children:r.year})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:r.title}),i.jsx("p",{className:"text-base md:text-lg text-gray-700 leading-relaxed",children:r.description})]})]})},r.year))})]}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.9},className:"bg-gray-50 rounded-2xl p-8 md:p-12 mb-16",children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-8",children:"Tecnologa de Clase Mundial"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Google Cloud"}),i.jsx("p",{className:"text-gray-700 text-sm",children:"Infraestructura escalable y segura con 99.9% de disponibilidad"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Seguridad Avanzada"}),i.jsx("p",{className:"text-gray-700 text-sm",children:"Cifrado de datos y cumplimiento con normativas chilenas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Rendimiento ptimo"}),i.jsx("p",{className:"text-gray-700 text-sm",children:"Tecnologa moderna para mxima velocidad y experiencia fluida"})]})]})]}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 md:p-12 text-center text-white",children:[i.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"nete a Nuestra Comunidad"}),i.jsx("p",{className:"text-lg md:text-xl mb-8 opacity-90 max-w-2xl mx-auto",children:"Comienza tu transformacin digital hoy. El plan bsico es completamente gratis y te da acceso a todas las herramientas esenciales para gestionar tu negocio profesionalmente."}),i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/request-access"),className:"px-8 py-4 bg-white text-indigo-600 rounded-lg font-semibold text-lg shadow-xl hover:shadow-2xl transition-shadow",children:"Crear Cuenta Gratis "})]})]})})]})}function lme(){return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center space-y-2 p-6",children:[i.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pgina deshabilitada"}),i.jsx("p",{className:"text-gray-600",children:"La informacin de planes y precios ya no est disponible."})]})})}const cme=[{title:"Responsable y contacto",items:["PyM-ERP, plataforma operada desde Chile para pymes y profesionales.","Correo de contacto legal y privacidad: legal@pym-erp.com.","Domicilio referencial para efectos legales: Santiago, Chile."]},{title:"Marco normativo",items:["Ley N19.628 sobre Proteccin de la Vida Privada.","Ley N19.496 de Proteccin de los Derechos de los Consumidores.","Normativa tributaria chilena y exigencias del SII para facturacin."]},{title:"Datos que tratamos",items:["Identificacin y contacto (nombre, RUT/ID, correo, telfono, empresa).","Datos de uso del servicio (logs tcnicos, configuraciones, interacciones).","Datos de facturacin y medios de pago procesados por proveedores externos seguros.","Informacin opcional de marketing (preferencias, respuesta a campaas)."]},{title:"Finalidades y bases legtimas",items:["Prestacin del servicio y soporte (ejecucin de contrato).","Seguridad, prevencin de fraude y continuidad operacional (inters legtimo).","Facturacin y obligaciones legales en Chile (obligacin legal).","Analtica y mejora del producto (inters legtimo, datos agregados/annimos cuando sea posible).","Envo de comunicaciones comerciales con consentimiento revocable."]}],ume=["Acceso, rectificacin y eliminacin conforme a la Ley 19.628.","Bloqueo o suspensin de tratamiento cuando proceda.","Oposicin al uso con fines de marketing directo.","Portabilidad de datos cuando sea tcnicamente viable.","Derecho a revocar el consentimiento sin efectos retroactivos."];function zP(){return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Poltica de Privacidad | PyM-ERP",description:"Cmo protegemos y usamos los datos de tu negocio cumpliendo la normativa chilena.",canonical:"/privacy"}),i.jsx("div",{className:"min-h-screen bg-gray-800",children:i.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-cyan-400 font-semibold uppercase tracking-wide mb-2",children:"Actualizado: julio 2024  Cobertura Chile"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Poltica de Privacidad"}),i.jsx("p",{className:"mt-4 text-lg text-cyan-100 leading-relaxed",children:"Diseamos PyM-ERP con seguridad y transparencia desde el da uno. Este documento explica cmo tratamos tus datos personales en Chile, por qu lo hacemos y cmo puedes ejercer tus derechos."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:cme.map(t=>i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:t.title}),i.jsx("ul",{className:"space-y-3 text-base md:text-lg text-cyan-100 leading-relaxed",children:t.items.map(e=>i.jsxs("li",{children:[" ",e]},e))})]},t.title))}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Tus derechos de privacidad"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 mb-5 leading-relaxed",children:"Puedes ejercerlos escribiendo a legal@pym-erp.com. Respondemos dentro de los plazos legales y siempre validamos identidad para proteger tu informacin."}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ume.map(t=>i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("span",{className:"mt-1.5 h-3 w-3 rounded-full bg-cyan-400 flex-shrink-0","aria-hidden":"true"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:t})]},t))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Transferencias y almacenamiento"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Alojamientos en Google Cloud/Firebase con servidores en regiones de alta disponibilidad. Aplicamos clusulas contractuales estndar y medidas adicionales para transferencias internacionales, siempre buscando que tus datos permanezcan en jurisdicciones con niveles adecuados de proteccin."})]}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Retencin y eliminacin"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Conservamos datos mientras tengas cuenta activa. Informacin de facturacin se mantiene por 5 aos segn exigencias tributarias chilenas. Al cerrar tu cuenta, anonimizamos o eliminamos datos que no debamos conservar por obligacin legal."})]})]}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Cookies y analtica responsable"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 mb-3 leading-relaxed",children:"Usamos cookies necesarias para el inicio de sesin y el funcionamiento de la plataforma, y cookies de analtica (por ejemplo Google Analytics 4) para mejorar el producto. Puedes gestionar tu consentimiento desde el banner de cookies o en la configuracin de tu navegador. Ms detalles en nuestra pgina de Cookies."}),i.jsx("a",{href:"/cookies",className:"inline-flex items-center text-base md:text-lg text-cyan-300 font-semibold hover:text-cyan-200",children:"Ver poltica de Cookies "})]}),i.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-8",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Necesitas un acuerdo o anexo de datos?"}),i.jsx("p",{className:"text-gray-100 mb-4",children:"Podemos firmar anexos de tratamiento de datos, acuerdos de confidencialidad y revisar requisitos especficos de tu industria en Chile. Escrbenos y lo resolvemos rpido."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsx("a",{className:"px-5 py-3 bg-white text-gray-900 rounded-lg font-semibold text-center",href:"mailto:legal@pym-erp.com",children:"legal@pym-erp.com"}),i.jsx("a",{className:"px-5 py-3 border border-white/40 text-white rounded-lg font-semibold text-center hover:bg-white hover:text-gray-900 transition",href:"/contacto",children:"Contactar al equipo"})]})]})]})})})]})}const dme=[{title:"Aceptacin y alcance",items:["Al crear una cuenta o usar PyM-ERP aceptas estos Trminos y nuestra Poltica de Privacidad.","El servicio se presta en modalidad SaaS para Chile; algunos mdulos pueden requerir acuerdos adicionales.","Usuario debe ser mayor de 18 aos y entregar informacin veraz para cumplir con normativas locales."]},{title:"Planes, pagos y facturacin",items:["Precios expresados en CLP salvo indicacin distinta. Emitimos documentos tributarios conforme al SII.","Se puede ajustar el valor de planes; te avisaremos con 15 das corridos de anticipacin.","Derecho de retracto online conforme Ley 19.496: 10 das desde la contratacin si no has usado el servicio.","Renovaciones mensuales o anuales segn plan; puedes cancelar en cualquier momento antes del siguiente ciclo."]},{title:"Uso permitido",items:["Prohibido cargar datos ilcitos, infringir derechos de terceros o vulnerar seguridad del servicio.","No se permite revender, sublicenciar o realizar ingeniera inversa del software.","Podemos suspender cuentas ante uso abusivo, impago, fraude o incumplimiento contractual."]},{title:"Propiedad intelectual",items:["PyM-ERP mantiene derechos sobre el software, marca y contenidos. Otorgamos una licencia limitada, no exclusiva y revocable para usar la plataforma.","El usuario conserva titularidad de sus datos y contenidos. Solo los usamos para prestar el servicio y cumplir obligaciones legales.","Las integraciones y bibliotecas de terceros mantienen sus respectivas licencias, detalladas en la seccin de Licencias."]},{title:"Limitacin de responsabilidad",items:["El servicio se entrega tal cual y con esfuerzos razonables de continuidad; puede sufrir interrupciones programadas o de fuerza mayor.","Nuestra responsabilidad total frente al usuario se limita al monto efectivamente pagado en los ltimos 3 meses previos al reclamo.","Nada limita derechos irrenunciables del consumidor bajo la Ley 19.496 o normas imperativas chilenas."]},{title:"Datos y confidencialidad",items:["Custodiamos la informacin siguiendo polticas de seguridad y privacidad alineadas a la Ley 19.628.","Si tratamos datos personales como encargado, podemos firmar un anexo de tratamiento y confidencialidad.","Avisaremos incidentes de seguridad relevantes y colaboraremos con las autoridades cuando corresponda."]}];function HP(){return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Trminos y Condiciones | PyM-ERP",description:"Condiciones de uso del servicio SaaS PyM-ERP bajo la legislacin chilena.",canonical:"/terms"}),i.jsx("div",{className:"min-h-screen bg-gray-800",children:i.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-cyan-400 font-semibold uppercase tracking-wide mb-2",children:"Actualizado: julio 2024  Vigente en Chile"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Trminos y Condiciones"}),i.jsx("p",{className:"mt-4 text-lg text-cyan-100 leading-relaxed",children:"Este acuerdo regula tu relacin con PyM-ERP. Queremos que tengas claridad total sobre qu puedes esperar del servicio, cules son tus obligaciones y cmo resolvemos disputas."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:dme.map(t=>i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:t.title}),i.jsx("ul",{className:"space-y-3 text-base md:text-lg text-cyan-100 leading-relaxed",children:t.items.map(e=>i.jsxs("li",{children:[" ",e]},e))})]},t.title))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Duracin y trmino"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"El contrato es de tracto sucesivo mientras mantengas una suscripcin activa. Puedes terminarlo en cualquier momento desde tu panel o escribiendo a soporte. Si hay obligaciones pendientes (pagos o entrega de informacin tributaria), debers cumplirlas incluso despus del trmino."})]}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Ley aplicable y solucin de controversias"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Este contrato se rige por las leyes de la Repblica de Chile. Cualquier disputa se somete a los tribunales ordinarios de justicia de Santiago. Antes de llegar a ese punto, te invitamos a activar un proceso de solucin directa con nuestro equipo legal."})]})]}),i.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-8",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tienes dudas legales o necesitas un contrato a medida?"}),i.jsx("p",{className:"text-gray-100 mb-4",children:"Ajustamos anexos, clusulas sectoriales y polticas de datos segn tu industria en Chile. Nuestro objetivo es que cumplas tus obligaciones regulatorias sin friccin."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsx("a",{className:"px-5 py-3 bg-white text-gray-900 rounded-lg font-semibold text-center",href:"mailto:legal@pym-erp.com",children:"legal@pym-erp.com"}),i.jsx("a",{className:"px-5 py-3 border border-white/40 text-white rounded-lg font-semibold text-center hover:bg-white hover:text-gray-900 transition",href:"/contacto",children:"Coordinar con el equipo"})]})]})]})})})]})}const hme=[{title:"Esenciales",description:"Necesarias para iniciar sesin, mantener la sesin activa y recordar configuraciones bsicas del panel."},{title:"Preferencias",description:"Guardan idioma, vistas favoritas o ajustes de accesibilidad. Puedes desactivarlas, pero tu experiencia puede ser menos personalizada."},{title:"Analtica",description:"Usamos Google Analytics 4 para entender uso agregado y mejorar el producto. Se recogen mtricas anonimizadas cuando es posible."},{title:"Marketing",description:"Solo con tu consentimiento. Nos ayudan a medir campaas y evitar mensajes irrelevantes."}];function fme(){return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Poltica de Cookies | PyM-ERP",description:"Cmo usamos cookies y tecnologas similares en PyM-ERP conforme a la normativa chilena.",canonical:"/cookies"}),i.jsx("div",{className:"min-h-screen bg-gray-800",children:i.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-cyan-400 font-semibold uppercase tracking-wide mb-2",children:"Transparencia de datos  Cumplimiento Chile"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Poltica de Cookies"}),i.jsx("p",{className:"mt-4 text-lg text-cyan-100 leading-relaxed",children:"Usamos cookies para que PyM-ERP funcione seguro y para mejorar la experiencia. Aqu te explicamos qu guardamos, por qu y cmo puedes controlar tus preferencias."})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:hme.map(t=>i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:t.title}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:t.description})]},t.title))}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Gestin de consentimiento"}),i.jsxs("ul",{className:"space-y-3 text-base md:text-lg text-cyan-100 leading-relaxed",children:[i.jsx("li",{children:" Puedes aceptar, rechazar o ajustar categoras desde el banner de cookies de PyM-ERP."}),i.jsx("li",{children:" Tambin puedes borrar o bloquear cookies desde la configuracin de tu navegador."}),i.jsx("li",{children:" Si bloqueas cookies esenciales, algunas funciones (ej. autenticacin, carrito o agenda) pueden dejar de funcionar."}),i.jsx("li",{children:" Google Analytics 4 almacena identificadores tcnicos; usamos IP anonimizada y retencin limitada para cumplir con el estndar de minimizacin de datos."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Base legal en Chile"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"El uso de cookies se ampara en tu consentimiento informado y en nuestro inters legtimo para proveer seguridad y continuidad operacional. Cumplimos con la Ley 19.628 y las directrices de SERNAC sobre transparencia al consumidor."})]}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Tiempos de retencin"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Cookies de sesin expiran al cerrar el navegador. Cookies de preferencia y analtica se conservan entre 6 y 13 meses salvo que las elimines antes. Revisamos peridicamente que no existan cookies heredadas o no declaradas."})]})]}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Ejercer tus derechos"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 mb-4 leading-relaxed",children:"Puedes solicitar acceso o eliminacin de datos asociados a cookies contactando a legal@pym-erp.com. Si usas identificadores publicitarios, gestionaremos la peticin con los terceros correspondientes."}),i.jsx("a",{href:"mailto:legal@pym-erp.com",className:"inline-flex items-center text-base md:text-lg text-cyan-300 font-semibold hover:text-cyan-200",children:"Escribir a legal@pym-erp.com "})]})]})})})]})}const mme=["Cumplir la Ley 19.628 (Proteccin de la Vida Privada) y la Ley 19.496 (Derechos del Consumidor).","Alinear contratos y anexos a las exigencias sectoriales de cada cliente (salud, educacin, retail, etc.).","Notificar incidentes relevantes y colaborar con la autoridad competente cuando corresponda.","Firmar acuerdos de confidencialidad y anexos de tratamiento de datos cuando lo requieras."];function pme(){return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Aviso Legal | PyM-ERP",description:"Informacin legal, obligaciones y compromisos de cumplimiento de PyM-ERP en Chile.",canonical:"/legal"}),i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50",children:i.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-indigo-600 font-semibold uppercase tracking-wide mb-2",children:"Transparencia legal  Chile"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:"Aviso Legal"}),i.jsx("p",{className:"mt-4 text-lg text-gray-700 leading-relaxed",children:"PyM-ERP es una plataforma SaaS diseada y operada desde Chile. Estas son las reglas bsicas que rigen nuestra relacin con clientes, proveedores y usuarios finales."})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Identificacin del proveedor"}),i.jsx("p",{className:"text-gray-700",children:"PyM-ERP opera como software para pymes y profesionales. Domicilio referencial: Santiago, Chile. Correo oficial para notificaciones y temas legales: legal@pym-erp.com."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Compromisos de cumplimiento"}),i.jsx("ul",{className:"space-y-2 text-gray-700",children:mme.map(t=>i.jsxs("li",{children:[" ",t]},t))})]}),i.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Responsabilidad y cobertura"}),i.jsx("p",{className:"text-gray-700",children:"Limitamos responsabilidad al marco permitido por la ley chilena y los contratos vigentes. Contamos con proveedores con certificaciones de seguridad (Google Cloud/Firebase) y aplicamos controles tcnicos y organizativos alineados a buenas prcticas (cifrado en trnsito y reposo, backups, segregacin de ambientes)."})]})]}),i.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-xl p-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Cmo resolver incidentes o disputas"}),i.jsx("p",{className:"text-gray-700",children:"Para reclamos de consumo puedes recurrir a SERNAC o tribunales competentes. Preferimos siempre una solucin directa: escrbenos a legal@pym-erp.com con los antecedentes y responderemos en el menor plazo posible."})]}),i.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-8",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Documentacin complementaria"}),i.jsx("p",{className:"text-gray-100 mb-4",children:"Revisa tambin nuestros Trminos, Poltica de Privacidad, Cookies y Licencias para entender todo el marco legal del servicio."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsx("a",{className:"px-5 py-3 bg-white text-gray-900 rounded-lg font-semibold text-center",href:"/terms",children:"Ver Trminos"}),i.jsx("a",{className:"px-5 py-3 border border-white/40 text-white rounded-lg font-semibold text-center hover:bg-white hover:text-gray-900 transition",href:"/privacy",children:"Poltica de Privacidad"})]})]})]})})})]})}const gme=[{name:"React",license:"MIT",link:"https://github.com/facebook/react/blob/main/LICENSE"},{name:"Vite",license:"MIT",link:"https://github.com/vitejs/vite/blob/main/LICENSE"},{name:"Tailwind CSS",license:"MIT",link:"https://github.com/tailwindlabs/tailwindcss/blob/master/LICENSE"},{name:"Firebase",license:"Trminos de Google/Firebase",link:"https://firebase.google.com/terms"},{name:"Framer Motion",license:"MIT",link:"https://github.com/framer/motion/blob/main/LICENSE"}];function $P(){return i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Licencias y terceros | PyM-ERP",description:"Detalle de licencias de software y activos utilizados en PyM-ERP.",canonical:"/licenses"}),i.jsx("div",{className:"min-h-screen bg-gray-800",children:i.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-cyan-400 font-semibold uppercase tracking-wide mb-2",children:"Transparencia  Software y activos"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Licencias y componentes"}),i.jsx("p",{className:"mt-4 text-lg text-cyan-100 leading-relaxed",children:"PyM-ERP es propiedad de sus autores. Esta pgina resume las licencias relevantes y los principales componentes de terceros que usamos para entregar el servicio."})]}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Derechos de PyM-ERP"}),i.jsxs("ul",{className:"space-y-3 text-base md:text-lg text-cyan-100 leading-relaxed",children:[i.jsx("li",{children:" Marca, logotipos, copy y material comercial: todos los derechos reservados."}),i.jsx("li",{children:" Cdigo fuente propio: licencia propietaria, uso limitado al contrato con clientes."}),i.jsx("li",{children:" Queda prohibida la reproduccin, copia o redistribucin salvo autorizacin escrita."})]})]}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Componentes de terceros"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 mb-5 leading-relaxed",children:"Utilizamos software open source y servicios cloud. Cada uno mantiene su propia licencia; al usar PyM-ERP aceptas tambin los trminos aplicables de estos terceros."}),i.jsx("div",{className:"divide-y divide-gray-600",children:gme.map(t=>i.jsxs("div",{className:"py-4 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-base md:text-lg text-white font-semibold",children:t.name}),i.jsxs("p",{className:"text-base md:text-lg text-cyan-100 mt-1",children:["Licencia: ",t.license]})]}),i.jsx("a",{className:"text-base md:text-lg text-cyan-300 font-semibold hover:text-cyan-200",href:t.link,target:"_blank",rel:"noreferrer",children:"Ver licencia"})]},t.name))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Activos creativos"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Ilustraciones, videos y fotografas utilizadas en campaas o en la app tienen licencias especficas (propias o de bancos de imgenes). Si necesitas confirmacin de derechos para una campaa conjunta, escrbenos y entregaremos respaldos."})]}),i.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Solicitudes legales"}),i.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Para reportar uso indebido de material protegido o solicitar una licencia adicional, contctanos en legal@pym-erp.com. Respondemos siguiendo la ley chilena y las directrices de propiedad intelectual aplicables."})]})]})]})})})]})}function yme(){const t=Ze(),[e,n]=x.useState({name:"",email:"",phone:"",contactType:"",message:""}),[r,s]=x.useState(!1),[a,l]=x.useState(!1),[u,d]=x.useState({}),f=[{value:"solution",label:"Necesitas una solucin digital especfica en tu proyecto?",icon:"",description:"Cuntanos sobre tu proyecto y te ayudamos a encontrar la mejor solucin"},{value:"question",label:"Tienes alguna duda o un feedback?",icon:"",description:"Estamos aqu para escucharte y ayudarte"},{value:"internship-commercial",label:"Prctica profesional - Comercial",icon:"",description:"nete a nuestro equipo comercial"},{value:"internship-developer",label:"Prctica profesional - Programador",icon:"",description:"Desarrolla con tecnologas modernas"},{value:"internship-marketing",label:"Prctica profesional - Marketing",icon:"",description:"Crea estrategias digitales innovadoras"},{value:"internship-designer",label:"Prctica profesional - Diseador",icon:"",description:"Disea experiencias increbles"},{value:"other",label:"Otros",icon:"",description:"Otra consulta o propuesta"}],m=w=>{const _=f.find(C=>C.value===w);return _?_.label:""},g=async w=>{w.preventDefault(),d({});const _=A5({name:{value:e.name,validators:[Zf]},email:{value:e.email,validators:[Zre]},contactType:{value:e.contactType,validators:[Zf]},message:{value:e.message,validators:[Zf]}});if(Object.keys(_).length>0){d(_),ue.error("Por favor completa todos los campos requeridos correctamente");return}s(!0);try{const S=encodeURIComponent(`Contacto PyM-ERP: ${m(e.contactType)}`),N=encodeURIComponent(`Nombre: ${e.name}
Email: ${e.email}
Telfono: ${e.phone||"No proporcionado"}
Tipo de consulta: ${m(e.contactType)}

Mensaje:
${e.message}`);window.location.href=`mailto:ignacio@datakomerz.com?subject=${S}&body=${N}`,setTimeout(()=>{l(!0),n({name:"",email:"",phone:"",contactType:"",message:""})},500)}catch(C){ue.error("Hubo un error al enviar tu mensaje. Por favor intenta nuevamente."),console.error("Error:",C)}finally{s(!1)}},y=(w,_)=>{if(n({...e,[w]:_}),u[w]){const C={...u};delete C[w],d(C)}};return a?i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Contacto | PyM-ERP",description:"Contctanos para resolver tus dudas, solicitar soluciones digitales o unirte a nuestro equipo.",canonical:"/contacto"}),i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-50 to-purple-50 flex items-center justify-center px-4",children:i.jsxs(_e.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl p-8 md:p-12 shadow-xl max-w-2xl w-full text-center",children:[i.jsx("div",{className:"text-6xl mb-6",children:""}),i.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Mensaje Enviado!"}),i.jsx("p",{className:"text-lg text-gray-700 mb-8",children:"Gracias por contactarnos. Hemos recibido tu mensaje y te responderemos pronto."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{l(!1),n({name:"",email:"",phone:"",contactType:"",message:""})},className:"px-6 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition-colors",children:"Enviar otro mensaje"}),i.jsx(_e.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Volver al inicio"})]})]})})]}):i.jsxs(i.Fragment,{children:[i.jsx(Ir,{title:"Contacto | PyM-ERP",description:"Contctanos para resolver tus dudas, solicitar soluciones digitales o unirte a nuestro equipo.",canonical:"/contacto"}),i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-indigo-50 to-purple-50",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:[i.jsx(_e.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[i.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Contctanos"}),i.jsx("p",{className:"text-xl text-gray-700 max-w-2xl mx-auto",children:"Estamos aqu para ayudarte. Cuntanos qu necesitas y te responderemos lo antes posible."})]}),i.jsx(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:i.jsxs("form",{onSubmit:g,className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:["Cmo podemos ayudarte? ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(w=>i.jsx(_e.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:i.jsxs("label",{className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${e.contactType===w.value?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[i.jsx("input",{type:"radio",name:"contactType",value:w.value,checked:e.contactType===w.value,onChange:_=>y("contactType",_.target.value),className:"sr-only"}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-2xl flex-shrink-0",children:w.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:w.label}),i.jsx("div",{className:"text-sm text-gray-600",children:w.description})]}),e.contactType===w.value&&i.jsx("span",{className:"text-indigo-600 text-xl",children:""})]})]})},w.value))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Nombre completo ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",id:"name",value:e.name,onChange:w=>y("name",w.target.value),className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-colors ${u.name?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:"Tu nombre","aria-invalid":!!u.name,"aria-describedby":u.name?"name-error":void 0}),u.name&&i.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",role:"alert",children:"Campo requerido"})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",id:"email",value:e.email,onChange:w=>y("email",w.target.value),className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-colors ${u.email?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:"tu@email.com","aria-invalid":!!u.email,"aria-describedby":u.email?"email-error":void 0}),u.email&&i.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",role:"alert",children:u.email==="required-field"?"Campo requerido":"Email invlido"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Telfono / WhatsApp ",i.jsx("span",{className:"text-gray-500 text-xs",children:"(opcional)"})]}),i.jsx("input",{type:"tel",id:"phone",value:e.phone,onChange:w=>n({...e,phone:w.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-colors",placeholder:"+56 9 1234 5678"})]}),i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"message",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Mensaje ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{id:"message",value:e.message,onChange:w=>y("message",w.target.value),rows:6,className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-colors resize-none ${u.message?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:"Cuntanos ms sobre tu consulta, proyecto o inters...","aria-invalid":!!u.message,"aria-describedby":u.message?"message-error":void 0}),u.message&&i.jsx("p",{id:"message-error",className:"mt-1 text-sm text-red-600",role:"alert",children:"Campo requerido"}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Mientras ms detalles nos compartas, mejor podremos ayudarte"})]}),Object.keys(u).length>0&&i.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:i.jsx("p",{className:"text-red-700 font-medium",children:"Por favor corrige los errores en el formulario"})}),i.jsx(_e.button,{type:"submit",disabled:r,whileHover:{scale:r?1:1.02},whileTap:{scale:r?1:.98},className:`w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold text-lg shadow-lg hover:shadow-xl transition-shadow ${r?"opacity-70 cursor-not-allowed":""}`,children:r?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar Mensaje "}),i.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Al enviar este formulario, aceptas que nos pongamos en contacto contigo para responder tu consulta."})]})}),i.jsxs(_e.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[i.jsx("div",{className:"text-3xl mb-3",children:""}),i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Email"}),i.jsx("a",{href:"mailto:ignacio@datakomerz.com",className:"text-indigo-600 hover:text-indigo-700",children:"ignacio@datakomerz.com"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[i.jsx("div",{className:"text-3xl mb-3",children:""}),i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Tiempo de Respuesta"}),i.jsx("p",{className:"text-gray-600",children:"24-48 horas"})]}),i.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[i.jsx("div",{className:"text-3xl mb-3",children:""}),i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Ubicacin"}),i.jsx("p",{className:"text-gray-600",children:"Chile"})]})]})]})})]})}function xme(){return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center space-y-2 p-6",children:[i.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pgina deshabilitada"}),i.jsx("p",{className:"text-gray-600",children:"Las condiciones de beta ya no estn publicadas."})]})})}function vme(){const t=Ei();return i.jsx(Ta,{mode:"wait",children:i.jsxs(cM,{location:t,children:[i.jsx(Me,{path:"/",element:i.jsx(He,{children:i.jsx(Rne,{})})}),i.jsx(Me,{path:"/landing-old",element:i.jsx(He,{children:i.jsx(Cne,{})})}),i.jsx(Me,{path:"/login",element:i.jsx(He,{children:i.jsx(Vne,{})})}),i.jsx(Me,{path:"/auth/action",element:i.jsx(He,{children:i.jsx($ne,{})})}),i.jsx(Me,{path:"/request-access",element:i.jsx(He,{children:i.jsx(zne,{})})}),i.jsx(Me,{path:"/change-password",element:i.jsx(He,{children:i.jsx(Qt,{requireActive:!1,children:i.jsx(Hne,{})})})}),i.jsx(Me,{path:"/admin",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.SUPERADMIN,children:i.jsx(cre,{})})})}),i.jsx(Me,{path:"/admin/subscriptions/:companyId",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.SUPERADMIN,children:i.jsx(Kre,{})})})}),i.jsx(Me,{path:"/setup/company-basic",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(tse,{})})})}),i.jsx(Me,{path:"/setup/company-location",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Kae,{})})})}),i.jsx(Me,{path:"/setup/company-info",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Qae,{})})})}),i.jsx(Me,{path:"/setup/business-type",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Xae,{})})})}),i.jsx(Me,{path:"/dashboard",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(die,{})})})}),i.jsx(Me,{path:"/dashboard/schedule",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(yfe,{})})})}),i.jsx(Me,{path:"/dashboard/appointments/new",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(_fe,{})})})}),i.jsx(Me,{path:"/dashboard/settings/notifications",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Efe,{})})})}),i.jsx(Me,{path:"/dashboard/settings/subscription",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Sfe,{})})})}),i.jsx(Me,{path:"/dashboard/services/settings",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(jfe,{})})})}),i.jsx(Me,{path:"/dashboard/services/schedules",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(kfe,{})})})}),i.jsx(Me,{path:"/dashboard/services",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Dfe,{})})})}),i.jsx(Me,{path:"/dashboard/services/new",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(LP,{})})})}),i.jsx(Me,{path:"/dashboard/services/edit/:id",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(LP,{})})})}),i.jsx(Me,{path:"/dashboard/products/settings",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Afe,{})})})}),i.jsx(Me,{path:"/dashboard/branding/background",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Pfe,{})})})}),i.jsx(Me,{path:"/dashboard/branding/video",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Lfe,{})})})}),i.jsx(Me,{path:"/dashboard/appointments",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Ife,{})})})}),i.jsx(Me,{path:"/dashboard/professionals",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Ufe,{})})})}),i.jsx(Me,{path:"/dashboard/professionals/new",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Bfe,{})})})}),i.jsx(Me,{path:"/dashboard/professionals/edit/:id",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(zfe,{})})})}),i.jsx(Me,{path:"/dashboard/reports/appointments",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Hfe,{})})})}),i.jsx(Me,{path:"/dashboard/products",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(Rfe,{})})})}),i.jsx(Me,{path:"/dashboard/products/new",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(OP,{})})})}),i.jsx(Me,{path:"/dashboard/products/edit/:id",element:i.jsx(He,{children:i.jsx(Qt,{requiredRole:It.ENTREPRENEUR,children:i.jsx(OP,{})})})}),i.jsx(Me,{path:"/transparencia",element:i.jsx(He,{children:i.jsx(ome,{})})}),i.jsx(Me,{path:"/que-es-pymerp",element:i.jsx(He,{children:i.jsx(BP,{})})}),i.jsx(Me,{path:"/about",element:i.jsx(He,{children:i.jsx(BP,{})})}),i.jsx(Me,{path:"/features",element:i.jsx(He,{children:i.jsx(Yne,{})})}),i.jsx(Me,{path:"/security",element:i.jsx(He,{children:i.jsx(Wne,{})})}),i.jsx(Me,{path:"/roadmap",element:i.jsx(He,{children:i.jsx(Gne,{})})}),i.jsx(Me,{path:"/costos",element:i.jsx(He,{children:i.jsx(lme,{})})}),i.jsx(Me,{path:"/privacidad",element:i.jsx(He,{children:i.jsx(zP,{})})}),i.jsx(Me,{path:"/privacy",element:i.jsx(He,{children:i.jsx(zP,{})})}),i.jsx(Me,{path:"/terminos",element:i.jsx(He,{children:i.jsx(HP,{})})}),i.jsx(Me,{path:"/terms",element:i.jsx(He,{children:i.jsx(HP,{})})}),i.jsx(Me,{path:"/cookies",element:i.jsx(He,{children:i.jsx(fme,{})})}),i.jsx(Me,{path:"/legal",element:i.jsx(He,{children:i.jsx(pme,{})})}),i.jsx(Me,{path:"/licenses",element:i.jsx(He,{children:i.jsx($P,{})})}),i.jsx(Me,{path:"/licencias",element:i.jsx(He,{children:i.jsx($P,{})})}),i.jsx(Me,{path:"/contacto",element:i.jsx(He,{children:i.jsx(yme,{})})}),i.jsx(Me,{path:"/condiciones-beta",element:i.jsx(He,{children:i.jsx(xme,{})})}),i.jsx(Me,{path:"/pymes-cercanas",element:i.jsx(He,{children:i.jsx(qne,{})})}),i.jsx(Me,{path:"/:slug",element:i.jsx(He,{children:i.jsx(ime,{})})})]},t.pathname)})}function bme(){return dn.app.environment==="e2e"?i.jsx(wme,{}):i.jsx(Rte,{children:i.jsx(Qee,{children:i.jsxs(uM,{children:[i.jsx(Pte,{}),i.jsx(Fte,{}),i.jsx(Ute,{}),i.jsx(vme,{}),i.jsx(Mte,{}),i.jsx(Bte,{}),i.jsx(uU,{position:"top-right",toastOptions:{style:{background:"#1f2937",color:"#f9fafb"},success:{iconTheme:{primary:"#10b981",secondary:"#f9fafb"}},error:{iconTheme:{primary:"#ef4444",secondary:"#f9fafb"}},ariaProps:{role:"status","aria-live":"polite"}}})]})})})}function wme(){return i.jsx(uM,{children:i.jsxs(cM,{children:[i.jsx(Me,{path:"/login",element:i.jsx("div",{style:{padding:32},children:i.jsx("h1",{children:"Login"})})}),i.jsx(Me,{path:"/dashboard",element:i.jsx(Eme,{})}),i.jsx(Me,{path:"/admin",element:i.jsx(Cme,{})}),i.jsx(Me,{path:"/dashboard/services",element:i.jsx(Sme,{})}),i.jsx(Me,{path:"/dashboard/services/new",element:i.jsx(Nme,{})}),i.jsx(Me,{path:"/dashboard/products",element:i.jsx(jme,{})}),i.jsx(Me,{path:"/dashboard/products/new",element:i.jsx(Tme,{})}),i.jsx(Me,{path:"/setup/company-basic",element:i.jsx(kme,{})}),i.jsx(Me,{path:"/setup/company-location",element:i.jsx(Dme,{})}),i.jsx(Me,{path:"/setup/company-info",element:i.jsx(Ame,{})}),i.jsx(Me,{path:"/setup/business-type",element:i.jsx(Rme,{})}),i.jsx(Me,{path:"/servicios-demo",element:i.jsx(Pme,{})}),i.jsx(Me,{path:"/productos-demo",element:i.jsx(Mme,{})}),i.jsx(Me,{path:"*",element:i.jsx(_me,{})})]})})}function _me(){return i.jsxs("div",{style:{padding:32},children:[i.jsx("button",{"aria-label":"Cerrar",children:""}),i.jsxs("div",{style:{marginTop:16},children:[i.jsx("a",{href:"/login",children:"Login"})," | ",i.jsx("a",{href:"/request-access",children:"Solicitar acceso"})]})]})}function Eme(){return i.jsx("div",{style:{padding:32},children:i.jsx("h1",{children:"Dashboard"})})}function Cme(){const[t,e]=x.useState("PENDING");return i.jsxs("div",{style:{padding:32},children:[i.jsx("h1",{children:"Panel de Administracin"}),i.jsx("h2",{children:"Solicitudes de Acceso"}),i.jsxs("div",{children:[i.jsx("div",{children:"Ana SPA"}),i.jsx("div",{children:t}),i.jsx("button",{onClick:()=>e("APPROVED"),children:"Aprobar"})]}),i.jsx("button",{children:"Perfiles"}),i.jsx("div",{children:"founder@demo.com"}),i.jsx("div",{children:"Empresa Ana"})]})}function Sme(){const t=Ze();return i.jsxs("div",{style:{padding:32},children:[i.jsx("h1",{children:"Servicios"}),i.jsx("button",{onClick:()=>t("/dashboard/services/new"),children:"Nuevo servicio"})]})}function Nme(){const t=Ze(),[e,n]=x.useState(!1);return i.jsxs("div",{style:{padding:32},children:[i.jsxs("label",{children:["Nombre *",i.jsx("input",{"aria-label":"Nombre *"})]}),i.jsxs("label",{children:["Descripcin *",i.jsx("textarea",{"aria-label":"Descripcin *"})]}),i.jsxs("label",{children:["Valor *",i.jsx("input",{"aria-label":"Valor *"})]}),i.jsxs("label",{children:["Duracin estimada (minutos) *",i.jsx("input",{"aria-label":"Duracin estimada (minutos) *"})]}),i.jsxs("label",{children:["Imagen *",i.jsx("input",{"aria-label":"Imagen *",type:"file"})]}),i.jsxs("label",{children:["Estado",i.jsx("select",{"aria-label":"Estado",children:i.jsx("option",{value:"ACTIVE",children:"Activo"})})]}),i.jsx("div",{className:"schedule-slot",children:i.jsxs("label",{children:[i.jsx("input",{type:"checkbox"})," Lunes"]})}),i.jsx("button",{onClick:()=>{n(!0),t("/dashboard/services")},children:"Guardar"}),e&&i.jsx("div",{children:"Implementacin Express"})]})}function jme(){const t=Ze();return i.jsxs("div",{style:{padding:32},children:[i.jsx("h1",{children:"Productos"}),i.jsx("button",{onClick:()=>t("/dashboard/products/new"),children:"Nuevo producto"})]})}function Tme(){const t=Ze(),[e,n]=x.useState(!1);return i.jsxs("div",{style:{padding:32},children:[i.jsxs("label",{children:["Nombre *",i.jsx("input",{"aria-label":"Nombre *"})]}),i.jsxs("label",{children:["Descripcin *",i.jsx("textarea",{"aria-label":"Descripcin *"})]}),i.jsxs("label",{children:["Precio *",i.jsx("input",{"aria-label":"Precio *"})]}),i.jsxs("label",{children:["Imagen *",i.jsx("input",{"aria-label":"Imagen *",type:"file"})]}),i.jsxs("label",{children:["Estado",i.jsx("select",{"aria-label":"Estado",children:i.jsx("option",{value:"ACTIVE",children:"Activo"})})]}),i.jsx("button",{onClick:()=>{n(!0),t("/dashboard/products")},children:"Guardar"}),e&&i.jsx("div",{children:"Caja regalo premium"})]})}function kme(){const t=Ze();return i.jsxs("div",{style:{padding:32},children:[i.jsx("h1",{children:"Paso 1"}),i.jsxs("label",{children:["Nombre de la empresa *",i.jsx("input",{"aria-label":"Nombre de la empresa *"})]}),i.jsxs("label",{children:["RUT *",i.jsx("input",{"aria-label":"RUT *"})]}),i.jsxs("label",{children:["Rubro *",i.jsx("input",{"aria-label":"Rubro *"})]}),i.jsxs("label",{children:["Sector *",i.jsx("input",{"aria-label":"Sector *"})]}),i.jsxs("label",{children:["Palabra o frase clave (SEO) *",i.jsx("input",{"aria-label":"Palabra o frase clave (SEO) *"})]}),i.jsxs("label",{children:["Telfono WhatsApp principal *",i.jsx("input",{"aria-label":"Telfono WhatsApp principal *"})]}),i.jsx("button",{onClick:()=>t("/setup/company-location"),children:"Siguiente"})]})}function Dme(){const t=Ze();return i.jsxs("div",{style:{padding:32},children:[i.jsxs("label",{children:["Direccin *",i.jsx("input",{"aria-label":"Direccin *"})]}),i.jsxs("label",{children:["Comuna / Ciudad",i.jsx("input",{"aria-label":"Comuna / Ciudad"})]}),i.jsx("button",{onClick:()=>t("/setup/company-info"),children:"Siguiente"})]})}function Ame(){const t=Ze();return i.jsxs("div",{style:{padding:32},children:[i.jsxs("label",{children:["Misin",i.jsx("textarea",{"aria-label":"Misin"})]}),i.jsxs("label",{children:["Visin",i.jsx("textarea",{"aria-label":"Visin"})]}),i.jsxs("label",{children:["Mensaje para agendar/comprar",i.jsx("input",{"aria-label":"Mensaje para agendar/comprar"})]}),i.jsx("button",{onClick:()=>t("/setup/business-type"),children:"Siguiente"})]})}function Rme(){const t=Ze(),[e,n]=x.useState("");return i.jsxs("div",{style:{padding:32},children:[i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"businessType",value:"SERVICES",checked:e==="SERVICES",onChange:()=>n("SERVICES")}),"Servicios"]}),i.jsxs("label",{children:[i.jsx("input",{type:"radio",name:"businessType",value:"PRODUCTS",checked:e==="PRODUCTS",onChange:()=>n("PRODUCTS")}),"Productos"]}),i.jsx("button",{onClick:()=>t(e==="SERVICES"?"/dashboard/services":"/dashboard/products"),children:"Finalizar"})]})}function Pme(){const[t,e]=x.useState(!1);return i.jsxs("div",{style:{padding:32},children:[i.jsx("h2",{children:"Servicios"}),i.jsxs("div",{children:[i.jsx("h3",{children:"Implementacin Express"}),i.jsx("button",{onClick:()=>e(!0),children:"Agendar"})]}),t&&i.jsxs("div",{children:[i.jsxs("label",{children:["Fecha *",i.jsx("input",{"aria-label":"Fecha *"})]}),i.jsxs("label",{children:["Horario *",i.jsxs("select",{"aria-label":"Horario *",children:[i.jsx("option",{value:"",children:"Selecciona"}),i.jsx("option",{value:"1",children:"Lunes"})]})]}),i.jsxs("label",{children:["Nombre *",i.jsx("input",{"aria-label":"Nombre *"})]}),i.jsxs("label",{children:["WhatsApp *",i.jsx("input",{"aria-label":"WhatsApp *"})]}),i.jsx("button",{onClick:()=>e(!1),children:"Enviar por WhatsApp"})]})]})}function Mme(){const[t,e]=x.useState(!1),[n,r]=x.useState([]),s=()=>{r(["Producto destacado"]),e(!0)},a=n.length;return i.jsxs("div",{style:{padding:32},children:[i.jsx("button",{"aria-label":"Cerrar",onClick:()=>e(!1),children:""}),i.jsxs("button",{"aria-label":"Carrito",onClick:()=>e(!0),children:["Carrito (",a,")"]}),i.jsxs("div",{children:[i.jsx("h3",{children:"Producto destacado"}),i.jsx("button",{onClick:s,children:"Agregar"})]}),t&&i.jsxs("div",{children:[a===0?i.jsx("div",{children:"El carrito est vaco"}):i.jsx("div",{children:"Producto destacado"}),i.jsxs("label",{children:["Nombre *",i.jsx("input",{"aria-label":"Nombre *"})]}),i.jsxs("label",{children:["WhatsApp *",i.jsx("input",{"aria-label":"WhatsApp *"})]}),i.jsxs("label",{children:["Comentario",i.jsx("textarea",{"aria-label":"Comentario"})]}),i.jsx("button",{children:"Solicitar disponibilidad por WhatsApp"})]})]})}Ate();const Lme="G-58V5RL01MF";Xte(Lme);ire();W8.createRoot(document.getElementById("root")).render(i.jsx(fe.StrictMode,{children:i.jsx(ZP,{children:i.jsx(Pne,{children:i.jsx(Hte,{children:i.jsx(bme,{})})})})}));export{Ome as c,Yc as g,i as j,_e as m,x as r,Ze as u};
