const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HowItWorks-xb2XYBEL.js","assets/mockData-Cv4a0RFp.js","assets/Features-DQQCi_c8.js","assets/Segmentation-DHU23QaU.js","assets/AgendaProfesionalesPublicLayout-BCLrtmdO.js","assets/BarberiasPublicLayout-CoCj3NGa.js","assets/InmobiliariaTerrenosCasasPublicLayout-BWOMINhz.js","assets/security-BJOWf2ke.js","assets/ConstruccionPublicLayout-NhXMd-sw.js"])))=>i.map(i=>d[i]);
function eB(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const tB="modulepreload",nB=function(t){return"/"+t},$k={},tn=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let u=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");r=u(n.map(h=>{if(h=nB(h),h in $k)return;$k[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":tB,f||(x.as="script"),x.crossOrigin="",x.href=h,d&&x.setAttribute("nonce",d),document.head.appendChild(x),f)return new Promise((b,_)=>{x.addEventListener("load",b),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return r.then(l=>{for(const d of l||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})};var qbe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function su(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o_={exports:{}},nf={};var zk;function sB(){if(zk)return nf;zk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,r,i){var l=null;if(i!==void 0&&(l=""+i),r.key!==void 0&&(l=""+r.key),"key"in r){i={};for(var d in r)d!=="key"&&(i[d]=r[d])}else i=r;return r=i.ref,{$$typeof:t,type:s,key:l,ref:r!==void 0?r:null,props:i}}return nf.Fragment=e,nf.jsx=n,nf.jsxs=n,nf}var Hk;function rB(){return Hk||(Hk=1,o_.exports=sB()),o_.exports}var a=rB(),l_={exports:{}},bt={};var qk;function aB(){if(qk)return bt;qk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),x=Symbol.iterator;function b(H){return H===null||typeof H!="object"?null:(H=x&&H[x]||H["@@iterator"],typeof H=="function"?H:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,v={};function T(H,Y,X){this.props=H,this.context=Y,this.refs=v,this.updater=X||_}T.prototype.isReactComponent={},T.prototype.setState=function(H,Y){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Y,"setState")},T.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function P(){}P.prototype=T.prototype;function A(H,Y,X){this.props=H,this.context=Y,this.refs=v,this.updater=X||_}var C=A.prototype=new P;C.constructor=A,j(C,T.prototype),C.isPureReactComponent=!0;var M=Array.isArray;function L(){}var k={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function S(H,Y,X){var ie=X.ref;return{$$typeof:t,type:H,key:Y,ref:ie!==void 0?ie:null,props:X}}function O(H,Y){return S(H.type,Y,H.props)}function I(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function F(H){var Y={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(X){return Y[X]})}var $=/\/+/g;function Q(H,Y){return typeof H=="object"&&H!==null&&H.key!=null?F(""+H.key):Y.toString(36)}function G(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(L,L):(H.status="pending",H.then(function(Y){H.status==="pending"&&(H.status="fulfilled",H.value=Y)},function(Y){H.status==="pending"&&(H.status="rejected",H.reason=Y)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function B(H,Y,X,ie,te){var be=typeof H;(be==="undefined"||be==="boolean")&&(H=null);var ve=!1;if(H===null)ve=!0;else switch(be){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(H.$$typeof){case t:case e:ve=!0;break;case f:return ve=H._init,B(ve(H._payload),Y,X,ie,te)}}if(ve)return te=te(H),ve=ie===""?"."+Q(H,0):ie,M(te)?(X="",ve!=null&&(X=ve.replace($,"$&/")+"/"),B(te,Y,X,"",function(Ie){return Ie})):te!=null&&(I(te)&&(te=O(te,X+(te.key==null||H&&H.key===te.key?"":(""+te.key).replace($,"$&/")+"/")+ve)),Y.push(te)),1;ve=0;var Se=ie===""?".":ie+":";if(M(H))for(var Pe=0;Pe<H.length;Pe++)ie=H[Pe],be=Se+Q(ie,Pe),ve+=B(ie,Y,X,be,te);else if(Pe=b(H),typeof Pe=="function")for(H=Pe.call(H),Pe=0;!(ie=H.next()).done;)ie=ie.value,be=Se+Q(ie,Pe++),ve+=B(ie,Y,X,be,te);else if(be==="object"){if(typeof H.then=="function")return B(G(H),Y,X,ie,te);throw Y=String(H),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return ve}function z(H,Y,X){if(H==null)return H;var ie=[],te=0;return B(H,ie,"","",function(be){return Y.call(X,be,te++)}),ie}function q(H){if(H._status===-1){var Y=H._result;Y=Y(),Y.then(function(X){(H._status===0||H._status===-1)&&(H._status=1,H._result=X)},function(X){(H._status===0||H._status===-1)&&(H._status=2,H._result=X)}),H._status===-1&&(H._status=0,H._result=Y)}if(H._status===1)return H._result.default;throw H._result}var Z=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},ee={map:z,forEach:function(H,Y,X){z(H,function(){Y.apply(this,arguments)},X)},count:function(H){var Y=0;return z(H,function(){Y++}),Y},toArray:function(H){return z(H,function(Y){return Y})||[]},only:function(H){if(!I(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return bt.Activity=p,bt.Children=ee,bt.Component=T,bt.Fragment=n,bt.Profiler=r,bt.PureComponent=A,bt.StrictMode=s,bt.Suspense=u,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,bt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return k.H.useMemoCache(H)}},bt.cache=function(H){return function(){return H.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(H,Y,X){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ie=j({},H.props),te=H.key;if(Y!=null)for(be in Y.key!==void 0&&(te=""+Y.key),Y)!R.call(Y,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&Y.ref===void 0||(ie[be]=Y[be]);var be=arguments.length-2;if(be===1)ie.children=X;else if(1<be){for(var ve=Array(be),Se=0;Se<be;Se++)ve[Se]=arguments[Se+2];ie.children=ve}return S(H.type,te,ie)},bt.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:i,_context:H},H},bt.createElement=function(H,Y,X){var ie,te={},be=null;if(Y!=null)for(ie in Y.key!==void 0&&(be=""+Y.key),Y)R.call(Y,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(te[ie]=Y[ie]);var ve=arguments.length-2;if(ve===1)te.children=X;else if(1<ve){for(var Se=Array(ve),Pe=0;Pe<ve;Pe++)Se[Pe]=arguments[Pe+2];te.children=Se}if(H&&H.defaultProps)for(ie in ve=H.defaultProps,ve)te[ie]===void 0&&(te[ie]=ve[ie]);return S(H,be,te)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(H){return{$$typeof:d,render:H}},bt.isValidElement=I,bt.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:q}},bt.memo=function(H,Y){return{$$typeof:h,type:H,compare:Y===void 0?null:Y}},bt.startTransition=function(H){var Y=k.T,X={};k.T=X;try{var ie=H(),te=k.S;te!==null&&te(X,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(L,Z)}catch(be){Z(be)}finally{Y!==null&&X.types!==null&&(Y.types=X.types),k.T=Y}},bt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},bt.use=function(H){return k.H.use(H)},bt.useActionState=function(H,Y,X){return k.H.useActionState(H,Y,X)},bt.useCallback=function(H,Y){return k.H.useCallback(H,Y)},bt.useContext=function(H){return k.H.useContext(H)},bt.useDebugValue=function(){},bt.useDeferredValue=function(H,Y){return k.H.useDeferredValue(H,Y)},bt.useEffect=function(H,Y){return k.H.useEffect(H,Y)},bt.useEffectEvent=function(H){return k.H.useEffectEvent(H)},bt.useId=function(){return k.H.useId()},bt.useImperativeHandle=function(H,Y,X){return k.H.useImperativeHandle(H,Y,X)},bt.useInsertionEffect=function(H,Y){return k.H.useInsertionEffect(H,Y)},bt.useLayoutEffect=function(H,Y){return k.H.useLayoutEffect(H,Y)},bt.useMemo=function(H,Y){return k.H.useMemo(H,Y)},bt.useOptimistic=function(H,Y){return k.H.useOptimistic(H,Y)},bt.useReducer=function(H,Y,X){return k.H.useReducer(H,Y,X)},bt.useRef=function(H){return k.H.useRef(H)},bt.useState=function(H){return k.H.useState(H)},bt.useSyncExternalStore=function(H,Y,X){return k.H.useSyncExternalStore(H,Y,X)},bt.useTransition=function(){return k.H.useTransition()},bt.version="19.2.3",bt}var Wk;function rb(){return Wk||(Wk=1,l_.exports=aB()),l_.exports}var y=rb();const he=su(y),S2=eB({__proto__:null,default:he},[y]);var c_={exports:{}},sf={},d_={exports:{}},u_={};var Yk;function iB(){return Yk||(Yk=1,(function(t){function e(B,z){var q=B.length;B.push(z);e:for(;0<q;){var Z=q-1>>>1,ee=B[Z];if(0<r(ee,z))B[Z]=z,B[q]=ee,q=Z;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var z=B[0],q=B.pop();if(q!==z){B[0]=q;e:for(var Z=0,ee=B.length,H=ee>>>1;Z<H;){var Y=2*(Z+1)-1,X=B[Y],ie=Y+1,te=B[ie];if(0>r(X,q))ie<ee&&0>r(te,X)?(B[Z]=te,B[ie]=q,Z=ie):(B[Z]=X,B[Y]=q,Z=Y);else if(ie<ee&&0>r(te,q))B[Z]=te,B[ie]=q,Z=ie;else break e}}return z}function r(B,z){var q=B.sortIndex-z.sortIndex;return q!==0?q:B.id-z.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var u=[],h=[],f=1,p=null,x=3,b=!1,_=!1,j=!1,v=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function C(B){for(var z=n(h);z!==null;){if(z.callback===null)s(h);else if(z.startTime<=B)s(h),z.sortIndex=z.expirationTime,e(u,z);else break;z=n(h)}}function M(B){if(j=!1,C(B),!_)if(n(u)!==null)_=!0,L||(L=!0,F());else{var z=n(h);z!==null&&G(M,z.startTime-B)}}var L=!1,k=-1,R=5,S=-1;function O(){return v?!0:!(t.unstable_now()-S<R)}function I(){if(v=!1,L){var B=t.unstable_now();S=B;var z=!0;try{e:{_=!1,j&&(j=!1,P(k),k=-1),b=!0;var q=x;try{t:{for(C(B),p=n(u);p!==null&&!(p.expirationTime>B&&O());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,x=p.priorityLevel;var ee=Z(p.expirationTime<=B);if(B=t.unstable_now(),typeof ee=="function"){p.callback=ee,C(B),z=!0;break t}p===n(u)&&s(u),C(B)}else s(u);p=n(u)}if(p!==null)z=!0;else{var H=n(h);H!==null&&G(M,H.startTime-B),z=!1}}break e}finally{p=null,x=q,b=!1}z=void 0}}finally{z?F():L=!1}}}var F;if(typeof A=="function")F=function(){A(I)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=I,F=function(){Q.postMessage(null)}}else F=function(){T(I,0)};function G(B,z){k=T(function(){B(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(B){switch(x){case 1:case 2:case 3:var z=3;break;default:z=x}var q=x;x=z;try{return B()}finally{x=q}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(B,z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=x;x=B;try{return z()}finally{x=q}},t.unstable_scheduleCallback=function(B,z,q){var Z=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Z+q:Z):q=Z,B){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=q+ee,B={id:f++,callback:z,priorityLevel:B,startTime:q,expirationTime:ee,sortIndex:-1},q>Z?(B.sortIndex=q,e(h,B),n(u)===null&&B===n(h)&&(j?(P(k),k=-1):j=!0,G(M,q-Z))):(B.sortIndex=ee,e(u,B),_||b||(_=!0,L||(L=!0,F()))),B},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(B){var z=x;return function(){var q=x;x=z;try{return B.apply(this,arguments)}finally{x=q}}}})(u_)),u_}var Gk;function oB(){return Gk||(Gk=1,d_.exports=iB()),d_.exports}var h_={exports:{}},jr={};var Kk;function lB(){if(Kk)return jr;Kk=1;var t=rb();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(u,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:u,containerInfo:h,implementation:f}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return jr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jr.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(u,h,null,f)},jr.flushSync=function(u){var h=l.T,f=s.p;try{if(l.T=null,s.p=2,u)return u()}finally{l.T=h,s.p=f,s.d.f()}},jr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(u,h))},jr.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},jr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,p=d(f,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?s.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:b}):f==="script"&&s.d.X(u,{crossOrigin:p,integrity:x,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},jr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=d(h.as,h.crossOrigin);s.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(u)},jr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=d(f,h.crossOrigin);s.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},jr.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=d(h.as,h.crossOrigin);s.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(u)},jr.requestFormReset=function(u){s.d.r(u)},jr.unstable_batchedUpdates=function(u,h){return u(h)},jr.useFormState=function(u,h,f){return l.H.useFormState(u,h,f)},jr.useFormStatus=function(){return l.H.useHostTransitionStatus()},jr.version="19.2.3",jr}var Qk;function hL(){if(Qk)return h_.exports;Qk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),h_.exports=lB(),h_.exports}var Xk;function cB(){if(Xk)return sf;Xk=1;var t=oB(),e=rb(),n=hL();function s(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function i(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function l(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function d(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(i(o)!==o)throw Error(s(188))}function h(o){var c=o.alternate;if(!c){if(c=i(o),c===null)throw Error(s(188));return c!==o?null:o}for(var m=o,g=c;;){var E=m.return;if(E===null)break;var N=E.alternate;if(N===null){if(g=E.return,g!==null){m=g;continue}break}if(E.child===N.child){for(N=E.child;N;){if(N===m)return u(E),o;if(N===g)return u(E),c;N=N.sibling}throw Error(s(188))}if(m.return!==g.return)m=E,g=N;else{for(var V=!1,W=E.child;W;){if(W===m){V=!0,m=E,g=N;break}if(W===g){V=!0,g=E,m=N;break}W=W.sibling}if(!V){for(W=N.child;W;){if(W===m){V=!0,m=N,g=E;break}if(W===g){V=!0,g=N,m=E;break}W=W.sibling}if(!V)throw Error(s(189))}}if(m.alternate!==g)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=I&&o[I]||o["@@iterator"],typeof o=="function"?o:null)}var $=Symbol.for("react.client.reference");function Q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===$?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case T:return"Profiler";case v:return"StrictMode";case M:return"Suspense";case L:return"SuspenseList";case S:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case _:return"Portal";case A:return o.displayName||"Context";case P:return(o._context.displayName||"Context")+".Consumer";case C:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case k:return c=o.displayName||null,c!==null?c:Q(o.type)||"Memo";case R:c=o._payload,o=o._init;try{return Q(o(c))}catch{}}return null}var G=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},Z=[],ee=-1;function H(o){return{current:o}}function Y(o){0>ee||(o.current=Z[ee],Z[ee]=null,ee--)}function X(o,c){ee++,Z[ee]=o.current,o.current=c}var ie=H(null),te=H(null),be=H(null),ve=H(null);function Se(o,c){switch(X(be,c),X(te,o),X(ie,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?uk(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=uk(c),o=hk(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Y(ie),X(ie,o)}function Pe(){Y(ie),Y(te),Y(be)}function Ie(o){o.memoizedState!==null&&X(ve,o);var c=ie.current,m=hk(c,o.type);c!==m&&(X(te,o),X(ie,m))}function Fe(o){te.current===o&&(Y(ie),Y(te)),ve.current===o&&(Y(ve),Zm._currentValue=q)}var We,kt;function nn(o){if(We===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);We=c&&c[1]||"",kt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+o+kt}var Ze=!1;function cn(o,c){if(!o||Ze)return"";Ze=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var Ne=function(){throw Error()};if(Object.defineProperty(Ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ne,[])}catch(fe){var ue=fe}Reflect.construct(o,[],Ne)}else{try{Ne.call()}catch(fe){ue=fe}o.call(Ne.prototype)}}else{try{throw Error()}catch(fe){ue=fe}(Ne=o())&&typeof Ne.catch=="function"&&Ne.catch(function(){})}}catch(fe){if(fe&&ue&&typeof fe.stack=="string")return[fe.stack,ue.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=g.DetermineComponentFrameRoot(),V=N[0],W=N[1];if(V&&W){var ne=V.split(`
`),de=W.split(`
`);for(E=g=0;g<ne.length&&!ne[g].includes("DetermineComponentFrameRoot");)g++;for(;E<de.length&&!de[E].includes("DetermineComponentFrameRoot");)E++;if(g===ne.length||E===de.length)for(g=ne.length-1,E=de.length-1;1<=g&&0<=E&&ne[g]!==de[E];)E--;for(;1<=g&&0<=E;g--,E--)if(ne[g]!==de[E]){if(g!==1||E!==1)do if(g--,E--,0>E||ne[g]!==de[E]){var ge=`
`+ne[g].replace(" at new "," at ");return o.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",o.displayName)),ge}while(1<=g&&0<=E);break}}}finally{Ze=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?nn(m):""}function zt(o,c){switch(o.tag){case 26:case 27:case 5:return nn(o.type);case 16:return nn("Lazy");case 13:return o.child!==c&&c!==null?nn("Suspense Fallback"):nn("Suspense");case 19:return nn("SuspenseList");case 0:case 15:return cn(o.type,!1);case 11:return cn(o.type.render,!1);case 1:return cn(o.type,!0);case 31:return nn("Activity");default:return""}}function _n(o){try{var c="",m=null;do c+=zt(o,m),m=o,o=o.return;while(o);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var _t=Object.prototype.hasOwnProperty,oe=t.unstable_scheduleCallback,ae=t.unstable_cancelCallback,Ee=t.unstable_shouldYield,Te=t.unstable_requestPaint,ze=t.unstable_now,rt=t.unstable_getCurrentPriorityLevel,lt=t.unstable_ImmediatePriority,At=t.unstable_UserBlockingPriority,Ht=t.unstable_NormalPriority,Ln=t.unstable_LowPriority,Ot=t.unstable_IdlePriority,tt=t.log,Fs=t.unstable_setDisableYieldValue,vn=null,Xn=null;function $n(o){if(typeof tt=="function"&&Fs(o),Xn&&typeof Xn.setStrictMode=="function")try{Xn.setStrictMode(vn,o)}catch{}}var An=Math.clz32?Math.clz32:Gr,Lr=Math.log,$s=Math.LN2;function Gr(o){return o>>>=0,o===0?32:31-(Lr(o)/$s|0)|0}var ks=256,Ir=262144,In=4194304;function As(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ar(o,c,m){var g=o.pendingLanes;if(g===0)return 0;var E=0,N=o.suspendedLanes,V=o.pingedLanes;o=o.warmLanes;var W=g&134217727;return W!==0?(g=W&~N,g!==0?E=As(g):(V&=W,V!==0?E=As(V):m||(m=W&~o,m!==0&&(E=As(m))))):(W=g&~N,W!==0?E=As(W):V!==0?E=As(V):m||(m=g&~o,m!==0&&(E=As(m)))),E===0?0:c!==0&&c!==E&&(c&N)===0&&(N=E&-E,m=c&-c,N>=m||N===32&&(m&4194048)!==0)?c:E}function ls(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Aa(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vr(){var o=In;return In<<=1,(In&62914560)===0&&(In=4194304),o}function ns(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function zs(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Qs(o,c,m,g,E,N){var V=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var W=o.entanglements,ne=o.expirationTimes,de=o.hiddenUpdates;for(m=V&~m;0<m;){var ge=31-An(m),Ne=1<<ge;W[ge]=0,ne[ge]=-1;var ue=de[ge];if(ue!==null)for(de[ge]=null,ge=0;ge<ue.length;ge++){var fe=ue[ge];fe!==null&&(fe.lane&=-536870913)}m&=~Ne}g!==0&&Je(o,g,0),N!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=N&~(V&~c))}function Je(o,c,m){o.pendingLanes|=c,o.suspendedLanes&=~c;var g=31-An(c);o.entangledLanes|=c,o.entanglements[g]=o.entanglements[g]|1073741824|m&261930}function ko(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var g=31-An(m),E=1<<g;E&c|o[g]&c&&(o[g]|=c),m&=~E}}function ri(o,c){var m=c&-c;return m=(m&42)!==0?1:ai(m),(m&(o.suspendedLanes|c))!==0?0:m}function ai(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Kr(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Ao(){var o=z.p;return o!==0?o:(o=window.event,o===void 0?32:Lk(o.type))}function wr(o,c){var m=z.p;try{return z.p=o,c()}finally{z.p=m}}var ir=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ir,On="__reactProps$"+ir,Or="__reactContainer$"+ir,Ri="__reactEvents$"+ir,Ro="__reactListeners$"+ir,Do="__reactHandles$"+ir,ma="__reactResources$"+ir,Qr="__reactMarker$"+ir;function Di(o){delete o[Wn],delete o[On],delete o[Ri],delete o[Ro],delete o[Do]}function _e(o){var c=o[Wn];if(c)return c;for(var m=o.parentNode;m;){if(c=m[Or]||m[Wn]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=bk(o);o!==null;){if(m=o[Wn])return m;o=bk(o)}return c}o=m,m=o.parentNode}return null}function Xe(o){if(o=o[Wn]||o[Or]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function Vt(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(s(33))}function sn(o){var c=o[ma];return c||(c=o[ma]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Zt(o){o[Qr]=!0}var Vr=new Set,Pi={};function Xs(o,c){or(o,c),or(o+"Capture",c)}function or(o,c){for(Pi[o]=c,o=0;o<c.length;o++)Vr.add(c[o])}var Al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xc={},Rl={};function Rs(o){return _t.call(Rl,o)?!0:_t.call(Xc,o)?!1:Al.test(o)?Rl[o]=!0:(Xc[o]=!0,!1)}function Mi(o,c,m){if(Rs(c))if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+m)}}function _r(o,c,m){if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+m)}}function cs(o,c,m,g){if(g===null)o.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(c,m,""+g)}}function Vn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Li(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function fa(o,c,m){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,N=g.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return E.call(this)},set:function(V){m=""+V,N.call(this,V)}}),Object.defineProperty(o,c,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function(V){m=""+V},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function qt(o){if(!o._valueTracker){var c=Li(o)?"checked":"value";o._valueTracker=fa(o,c,""+o[c])}}function Po(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),g="";return o&&(g=Li(o)?o.checked?"true":"false":o.value),o=g,o!==m?(c.setValue(o),!0):!1}function Ra(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Mo=/[\n"\\]/g;function ye(o){return o.replace(Mo,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ae(o,c,m,g,E,N,V,W){o.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?o.type=V:o.removeAttribute("type"),c!=null?V==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Vn(c)):o.value!==""+Vn(c)&&(o.value=""+Vn(c)):V!=="submit"&&V!=="reset"||o.removeAttribute("value"),c!=null?ft(o,V,Vn(c)):m!=null?ft(o,V,Vn(m)):g!=null&&o.removeAttribute("value"),E==null&&N!=null&&(o.defaultChecked=!!N),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?o.name=""+Vn(W):o.removeAttribute("name")}function ut(o,c,m,g,E,N,V,W){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),c!=null||m!=null){if(!(N!=="submit"&&N!=="reset"||c!=null)){qt(o);return}m=m!=null?""+Vn(m):"",c=c!=null?""+Vn(c):m,W||c===o.value||(o.value=c),o.defaultValue=c}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=W?o.checked:!!g,o.defaultChecked=!!g,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(o.name=V),qt(o)}function ft(o,c,m){c==="number"&&Ra(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function En(o,c,m,g){if(o=o.options,c){c={};for(var E=0;E<m.length;E++)c["$"+m[E]]=!0;for(m=0;m<o.length;m++)E=c.hasOwnProperty("$"+o[m].value),o[m].selected!==E&&(o[m].selected=E),E&&g&&(o[m].defaultSelected=!0)}else{for(m=""+Vn(m),c=null,E=0;E<o.length;E++){if(o[E].value===m){o[E].selected=!0,g&&(o[E].defaultSelected=!0);return}c!==null||o[E].disabled||(c=o[E])}c!==null&&(c.selected=!0)}}function fn(o,c,m){if(c!=null&&(c=""+Vn(c),c!==o.value&&(o.value=c),m==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=m!=null?""+Vn(m):""}function zn(o,c,m,g){if(c==null){if(g!=null){if(m!=null)throw Error(s(92));if(G(g)){if(1<g.length)throw Error(s(93));g=g[0]}m=g}m==null&&(m=""),c=m}m=Vn(c),o.defaultValue=m,g=o.textContent,g===m&&g!==""&&g!==null&&(o.value=g),qt(o)}function ds(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var Zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ur(o,c,m){var g=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?g?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":g?o.setProperty(c,m):typeof m!="number"||m===0||Zs.has(c)?c==="float"?o.cssFloat=m:o[c]=(""+m).trim():o[c]=m+"px"}function Er(o,c,m){if(c!=null&&typeof c!="object")throw Error(s(62));if(o=o.style,m!=null){for(var g in m)!m.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var E in c)g=c[E],c.hasOwnProperty(E)&&m[E]!==g&&Ur(o,E,g)}else for(var N in c)c.hasOwnProperty(N)&&Ur(o,N,c[N])}function Xr(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ds=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ii=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pt(o){return ii.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ss(){}var Rt=null;function Zn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Nr=null,lr=null;function Ii(o){var c=Xe(o);if(c&&(o=c.stateNode)){var m=o[On]||null;e:switch(o=c.stateNode,c.type){case"input":if(Ae(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+ye(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var g=m[c];if(g!==o&&g.form===o.form){var E=g[On]||null;if(!E)throw Error(s(90));Ae(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<m.length;c++)g=m[c],g.form===o.form&&Po(g)}break e;case"textarea":fn(o,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&En(o,!!m.multiple,c,!1)}}}var Lo=!1;function Dl(o,c,m){if(Lo)return o(c,m);Lo=!0;try{var g=o(c);return g}finally{if(Lo=!1,(Nr!==null||lr!==null)&&(d0(),Nr&&(c=Nr,o=lr,lr=Nr=null,Ii(c),o)))for(c=0;c<o.length;c++)Ii(o[c])}}function oi(o,c){var m=o.stateNode;if(m===null)return null;var g=m[On]||null;if(g===null)return null;m=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(s(231,c,typeof m));return m}var Da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zc=!1;if(Da)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){Zc=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch{Zc=!1}var Oi=null,pm=null,Jc=null;function gm(){if(Jc)return Jc;var o,c=pm,m=c.length,g,E="value"in Oi?Oi.value:Oi.textContent,N=E.length;for(o=0;o<m&&c[o]===E[o];o++);var V=m-o;for(g=1;g<=V&&c[m-g]===E[N-g];g++);return Jc=E.slice(o,1<g?1-g:void 0)}function ed(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Io(){return!0}function li(){return!1}function cr(o){function c(m,g,E,N,V){this._reactName=m,this._targetInst=E,this.type=g,this.nativeEvent=N,this.target=V,this.currentTarget=null;for(var W in o)o.hasOwnProperty(W)&&(m=o[W],this[W]=m?m(N):N[W]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Io:li,this.isPropagationStopped=li,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),c}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=cr(Oo),Pl=p({},Oo,{view:0,detail:0}),xm=cr(Pl),Ml,du,Ui,uu=p({},Pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ui&&(Ui&&o.type==="mousemove"?(Ml=o.screenX-Ui.screenX,du=o.screenY-Ui.screenY):du=Ml=0,Ui=o),Ml)},movementY:function(o){return"movementY"in o?o.movementY:du}}),ym=cr(uu),td=p({},uu,{dataTransfer:0}),yg=cr(td),bg=p({},Pl,{relatedTarget:0}),nd=cr(bg),bm=p({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),vg=cr(bm),hu=p({},Oo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),wg=cr(hu),_g=p({},Oo,{data:0}),Bi=cr(_g),Eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ng={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cg(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=jg[o])?!!c[o]:!1}function Ll(){return Cg}var Br=p({},Pl,{key:function(o){if(o.key){var c=Eg[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=ed(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ng[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(o){return o.type==="keypress"?ed(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ed(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Sg=cr(Br),Tg=p({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=cr(Tg),w=p({},Pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),D=cr(w),U=p({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),K=cr(U),le=p({},uu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),me=cr(le),Me=p({},Oo,{newState:0,oldState:0}),Et=cr(Me),bs=[9,13,27,32],pn=Da&&"CompositionEvent"in window,Jn=null;Da&&"documentMode"in document&&(Jn=document.documentMode);var Pa=Da&&"TextEvent"in window&&!Jn,Fi=Da&&(!pn||Jn&&8<Jn&&11>=Jn),ci=" ",di=!1;function sd(o,c){switch(o){case"keyup":return bs.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mu(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var fu=!1;function NV(o,c){switch(o){case"compositionend":return mu(c);case"keypress":return c.which!==32?null:(di=!0,ci);case"textInput":return o=c.data,o===ci&&di?null:o;default:return null}}function jV(o,c){if(fu)return o==="compositionend"||!pn&&sd(o,c)?(o=gm(),Jc=pm=Oi=null,fu=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Fi&&c.locale!=="ko"?null:c.data;default:return null}}var CV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _C(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!CV[o.type]:c==="textarea"}function EC(o,c,m,g){Nr?lr?lr.push(g):lr=[g]:Nr=g,c=x0(c,"onChange"),0<c.length&&(m=new Vi("onChange","change",null,m,g),o.push({event:m,listeners:c}))}var vm=null,wm=null;function SV(o){ak(o,0)}function kg(o){var c=Vt(o);if(Po(c))return o}function NC(o,c){if(o==="change")return c}var jC=!1;if(Da){var fv;if(Da){var pv="oninput"in document;if(!pv){var CC=document.createElement("div");CC.setAttribute("oninput","return;"),pv=typeof CC.oninput=="function"}fv=pv}else fv=!1;jC=fv&&(!document.documentMode||9<document.documentMode)}function SC(){vm&&(vm.detachEvent("onpropertychange",TC),wm=vm=null)}function TC(o){if(o.propertyName==="value"&&kg(wm)){var c=[];EC(c,wm,o,Zn(o)),Dl(SV,c)}}function TV(o,c,m){o==="focusin"?(SC(),vm=c,wm=m,vm.attachEvent("onpropertychange",TC)):o==="focusout"&&SC()}function kV(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return kg(wm)}function AV(o,c){if(o==="click")return kg(c)}function RV(o,c){if(o==="input"||o==="change")return kg(c)}function DV(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var pa=typeof Object.is=="function"?Object.is:DV;function _m(o,c){if(pa(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),g=Object.keys(c);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var E=m[g];if(!_t.call(c,E)||!pa(o[E],c[E]))return!1}return!0}function kC(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function AC(o,c){var m=kC(o);o=0;for(var g;m;){if(m.nodeType===3){if(g=o+m.textContent.length,o<=c&&g>=c)return{node:m,offset:c-o};o=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=kC(m)}}function RC(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?RC(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function DC(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Ra(o.document);c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)o=c.contentWindow;else break;c=Ra(o.document)}return c}function gv(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var PV=Da&&"documentMode"in document&&11>=document.documentMode,pu=null,xv=null,Em=null,yv=!1;function PC(o,c,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;yv||pu==null||pu!==Ra(g)||(g=pu,"selectionStart"in g&&gv(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Em&&_m(Em,g)||(Em=g,g=x0(xv,"onSelect"),0<g.length&&(c=new Vi("onSelect","select",null,c,m),o.push({event:c,listeners:g}),c.target=pu)))}function rd(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var gu={animationend:rd("Animation","AnimationEnd"),animationiteration:rd("Animation","AnimationIteration"),animationstart:rd("Animation","AnimationStart"),transitionrun:rd("Transition","TransitionRun"),transitionstart:rd("Transition","TransitionStart"),transitioncancel:rd("Transition","TransitionCancel"),transitionend:rd("Transition","TransitionEnd")},bv={},MC={};Da&&(MC=document.createElement("div").style,"AnimationEvent"in window||(delete gu.animationend.animation,delete gu.animationiteration.animation,delete gu.animationstart.animation),"TransitionEvent"in window||delete gu.transitionend.transition);function ad(o){if(bv[o])return bv[o];if(!gu[o])return o;var c=gu[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in MC)return bv[o]=c[m];return o}var LC=ad("animationend"),IC=ad("animationiteration"),OC=ad("animationstart"),MV=ad("transitionrun"),LV=ad("transitionstart"),IV=ad("transitioncancel"),VC=ad("transitionend"),UC=new Map,vv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vv.push("scrollEnd");function ui(o,c){UC.set(o,c),Xs(c,[o])}var Ag=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Ma=[],xu=0,wv=0;function Rg(){for(var o=xu,c=wv=xu=0;c<o;){var m=Ma[c];Ma[c++]=null;var g=Ma[c];Ma[c++]=null;var E=Ma[c];Ma[c++]=null;var N=Ma[c];if(Ma[c++]=null,g!==null&&E!==null){var V=g.pending;V===null?E.next=E:(E.next=V.next,V.next=E),g.pending=E}N!==0&&BC(m,E,N)}}function Dg(o,c,m,g){Ma[xu++]=o,Ma[xu++]=c,Ma[xu++]=m,Ma[xu++]=g,wv|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function _v(o,c,m,g){return Dg(o,c,m,g),Pg(o)}function id(o,c){return Dg(o,null,null,c),Pg(o)}function BC(o,c,m){o.lanes|=m;var g=o.alternate;g!==null&&(g.lanes|=m);for(var E=!1,N=o.return;N!==null;)N.childLanes|=m,g=N.alternate,g!==null&&(g.childLanes|=m),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(E=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,E&&c!==null&&(E=31-An(m),o=N.hiddenUpdates,g=o[E],g===null?o[E]=[c]:g.push(c),c.lane=m|536870912),N):null}function Pg(o){if(50<qm)throw qm=0,Rw=null,Error(s(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var yu={};function OV(o,c,m,g){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ga(o,c,m,g){return new OV(o,c,m,g)}function Ev(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Uo(o,c){var m=o.alternate;return m===null?(m=ga(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function FC(o,c){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,c=m.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Mg(o,c,m,g,E,N){var V=0;if(g=o,typeof o=="function")Ev(o)&&(V=1);else if(typeof o=="string")V=$U(o,m,ie.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case S:return o=ga(31,m,c,E),o.elementType=S,o.lanes=N,o;case j:return od(m.children,E,N,c);case v:V=8,E|=24;break;case T:return o=ga(12,m,c,E|2),o.elementType=T,o.lanes=N,o;case M:return o=ga(13,m,c,E),o.elementType=M,o.lanes=N,o;case L:return o=ga(19,m,c,E),o.elementType=L,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case A:V=10;break e;case P:V=9;break e;case C:V=11;break e;case k:V=14;break e;case R:V=16,g=null;break e}V=29,m=Error(s(130,o===null?"null":typeof o,"")),g=null}return c=ga(V,m,c,E),c.elementType=o,c.type=g,c.lanes=N,c}function od(o,c,m,g){return o=ga(7,o,g,c),o.lanes=m,o}function Nv(o,c,m){return o=ga(6,o,null,c),o.lanes=m,o}function $C(o){var c=ga(18,null,null,0);return c.stateNode=o,c}function jv(o,c,m){return c=ga(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var zC=new WeakMap;function La(o,c){if(typeof o=="object"&&o!==null){var m=zC.get(o);return m!==void 0?m:(c={value:o,source:c,stack:_n(c)},zC.set(o,c),c)}return{value:o,source:c,stack:_n(c)}}var bu=[],vu=0,Lg=null,Nm=0,Ia=[],Oa=0,Il=null,$i=1,zi="";function Bo(o,c){bu[vu++]=Nm,bu[vu++]=Lg,Lg=o,Nm=c}function HC(o,c,m){Ia[Oa++]=$i,Ia[Oa++]=zi,Ia[Oa++]=Il,Il=o;var g=$i;o=zi;var E=32-An(g)-1;g&=~(1<<E),m+=1;var N=32-An(c)+E;if(30<N){var V=E-E%5;N=(g&(1<<V)-1).toString(32),g>>=V,E-=V,$i=1<<32-An(c)+E|m<<E|g,zi=N+o}else $i=1<<N|m<<E|g,zi=o}function Cv(o){o.return!==null&&(Bo(o,1),HC(o,1,0))}function Sv(o){for(;o===Lg;)Lg=bu[--vu],bu[vu]=null,Nm=bu[--vu],bu[vu]=null;for(;o===Il;)Il=Ia[--Oa],Ia[Oa]=null,zi=Ia[--Oa],Ia[Oa]=null,$i=Ia[--Oa],Ia[Oa]=null}function qC(o,c){Ia[Oa++]=$i,Ia[Oa++]=zi,Ia[Oa++]=Il,$i=c.id,zi=c.overflow,Il=o}var dr=null,Yn=null,Xt=!1,Ol=null,Va=!1,Tv=Error(s(519));function Vl(o){var c=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jm(La(c,o)),Tv}function WC(o){var c=o.stateNode,m=o.type,g=o.memoizedProps;switch(c[Wn]=o,c[On]=g,m){case"dialog":Bt("cancel",c),Bt("close",c);break;case"iframe":case"object":case"embed":Bt("load",c);break;case"video":case"audio":for(m=0;m<Ym.length;m++)Bt(Ym[m],c);break;case"source":Bt("error",c);break;case"img":case"image":case"link":Bt("error",c),Bt("load",c);break;case"details":Bt("toggle",c);break;case"input":Bt("invalid",c),ut(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Bt("invalid",c);break;case"textarea":Bt("invalid",c),zn(c,g.value,g.defaultValue,g.children)}m=g.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||g.suppressHydrationWarning===!0||ck(c.textContent,m)?(g.popover!=null&&(Bt("beforetoggle",c),Bt("toggle",c)),g.onScroll!=null&&Bt("scroll",c),g.onScrollEnd!=null&&Bt("scrollend",c),g.onClick!=null&&(c.onclick=ss),c=!0):c=!1,c||Vl(o,!0)}function YC(o){for(dr=o.return;dr;)switch(dr.tag){case 5:case 31:case 13:Va=!1;return;case 27:case 3:Va=!0;return;default:dr=dr.return}}function wu(o){if(o!==dr)return!1;if(!Xt)return YC(o),Xt=!0,!1;var c=o.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||Ww(o.type,o.memoizedProps)),m=!m),m&&Yn&&Vl(o),YC(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Yn=yk(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));Yn=yk(o)}else c===27?(c=Yn,Zl(o.type)?(o=Xw,Xw=null,Yn=o):Yn=c):Yn=dr?Ba(o.stateNode.nextSibling):null;return!0}function ld(){Yn=dr=null,Xt=!1}function kv(){var o=Ol;return o!==null&&(ta===null?ta=o:ta.push.apply(ta,o),Ol=null),o}function jm(o){Ol===null?Ol=[o]:Ol.push(o)}var Av=H(null),cd=null,Fo=null;function Ul(o,c,m){X(Av,c._currentValue),c._currentValue=m}function $o(o){o._currentValue=Av.current,Y(Av)}function Rv(o,c,m){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===m)break;o=o.return}}function Dv(o,c,m,g){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var N=E.dependencies;if(N!==null){var V=E.child;N=N.firstContext;e:for(;N!==null;){var W=N;N=E;for(var ne=0;ne<c.length;ne++)if(W.context===c[ne]){N.lanes|=m,W=N.alternate,W!==null&&(W.lanes|=m),Rv(N.return,m,o),g||(V=null);break e}N=W.next}}else if(E.tag===18){if(V=E.return,V===null)throw Error(s(341));V.lanes|=m,N=V.alternate,N!==null&&(N.lanes|=m),Rv(V,m,o),V=null}else V=E.child;if(V!==null)V.return=E;else for(V=E;V!==null;){if(V===o){V=null;break}if(E=V.sibling,E!==null){E.return=V.return,V=E;break}V=V.return}E=V}}function _u(o,c,m,g){o=null;for(var E=c,N=!1;E!==null;){if(!N){if((E.flags&524288)!==0)N=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var V=E.alternate;if(V===null)throw Error(s(387));if(V=V.memoizedProps,V!==null){var W=E.type;pa(E.pendingProps.value,V.value)||(o!==null?o.push(W):o=[W])}}else if(E===ve.current){if(V=E.alternate,V===null)throw Error(s(387));V.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(Zm):o=[Zm])}E=E.return}o!==null&&Dv(c,o,m,g),c.flags|=262144}function Ig(o){for(o=o.firstContext;o!==null;){if(!pa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function dd(o){cd=o,Fo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function ur(o){return GC(cd,o)}function Og(o,c){return cd===null&&dd(o),GC(o,c)}function GC(o,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},Fo===null){if(o===null)throw Error(s(308));Fo=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Fo=Fo.next=c;return m}var VV=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(m,g){o.push(g)}};this.abort=function(){c.aborted=!0,o.forEach(function(m){return m()})}},UV=t.unstable_scheduleCallback,BV=t.unstable_NormalPriority,Ps={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pv(){return{controller:new VV,data:new Map,refCount:0}}function Cm(o){o.refCount--,o.refCount===0&&UV(BV,function(){o.controller.abort()})}var Sm=null,Mv=0,Eu=0,Nu=null;function FV(o,c){if(Sm===null){var m=Sm=[];Mv=0,Eu=Ow(),Nu={status:"pending",value:void 0,then:function(g){m.push(g)}}}return Mv++,c.then(KC,KC),c}function KC(){if(--Mv===0&&Sm!==null){Nu!==null&&(Nu.status="fulfilled");var o=Sm;Sm=null,Eu=0,Nu=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function $V(o,c){var m=[],g={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return o.then(function(){g.status="fulfilled",g.value=c;for(var E=0;E<m.length;E++)(0,m[E])(c)},function(E){for(g.status="rejected",g.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),g}var QC=B.S;B.S=function(o,c){PT=ze(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&FV(o,c),QC!==null&&QC(o,c)};var ud=H(null);function Lv(){var o=ud.current;return o!==null?o:Un.pooledCache}function Vg(o,c){c===null?X(ud,ud.current):X(ud,c.pool)}function XC(){var o=Lv();return o===null?null:{parent:Ps._currentValue,pool:o}}var ju=Error(s(460)),Iv=Error(s(474)),Ug=Error(s(542)),Bg={then:function(){}};function ZC(o){return o=o.status,o==="fulfilled"||o==="rejected"}function JC(o,c,m){switch(m=o[m],m===void 0?o.push(c):m!==c&&(c.then(ss,ss),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,tS(o),o;default:if(typeof c.status=="string")c.then(ss,ss);else{if(o=Un,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=c,o.status="pending",o.then(function(g){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=g}},function(g){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,tS(o),o}throw md=c,ju}}function hd(o){try{var c=o._init;return c(o._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(md=m,ju):m}}var md=null;function eS(){if(md===null)throw Error(s(459));var o=md;return md=null,o}function tS(o){if(o===ju||o===Ug)throw Error(s(483))}var Cu=null,Tm=0;function Fg(o){var c=Tm;return Tm+=1,Cu===null&&(Cu=[]),JC(Cu,o,c)}function km(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function $g(o,c){throw c.$$typeof===x?Error(s(525)):(o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function nS(o){function c(re,se){if(o){var ce=re.deletions;ce===null?(re.deletions=[se],re.flags|=16):ce.push(se)}}function m(re,se){if(!o)return null;for(;se!==null;)c(re,se),se=se.sibling;return null}function g(re){for(var se=new Map;re!==null;)re.key!==null?se.set(re.key,re):se.set(re.index,re),re=re.sibling;return se}function E(re,se){return re=Uo(re,se),re.index=0,re.sibling=null,re}function N(re,se,ce){return re.index=ce,o?(ce=re.alternate,ce!==null?(ce=ce.index,ce<se?(re.flags|=67108866,se):ce):(re.flags|=67108866,se)):(re.flags|=1048576,se)}function V(re){return o&&re.alternate===null&&(re.flags|=67108866),re}function W(re,se,ce,we){return se===null||se.tag!==6?(se=Nv(ce,re.mode,we),se.return=re,se):(se=E(se,ce),se.return=re,se)}function ne(re,se,ce,we){var st=ce.type;return st===j?ge(re,se,ce.props.children,we,ce.key):se!==null&&(se.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===R&&hd(st)===se.type)?(se=E(se,ce.props),km(se,ce),se.return=re,se):(se=Mg(ce.type,ce.key,ce.props,null,re.mode,we),km(se,ce),se.return=re,se)}function de(re,se,ce,we){return se===null||se.tag!==4||se.stateNode.containerInfo!==ce.containerInfo||se.stateNode.implementation!==ce.implementation?(se=jv(ce,re.mode,we),se.return=re,se):(se=E(se,ce.children||[]),se.return=re,se)}function ge(re,se,ce,we,st){return se===null||se.tag!==7?(se=od(ce,re.mode,we,st),se.return=re,se):(se=E(se,ce),se.return=re,se)}function Ne(re,se,ce){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=Nv(""+se,re.mode,ce),se.return=re,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case b:return ce=Mg(se.type,se.key,se.props,null,re.mode,ce),km(ce,se),ce.return=re,ce;case _:return se=jv(se,re.mode,ce),se.return=re,se;case R:return se=hd(se),Ne(re,se,ce)}if(G(se)||F(se))return se=od(se,re.mode,ce,null),se.return=re,se;if(typeof se.then=="function")return Ne(re,Fg(se),ce);if(se.$$typeof===A)return Ne(re,Og(re,se),ce);$g(re,se)}return null}function ue(re,se,ce,we){var st=se!==null?se.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return st!==null?null:W(re,se,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:return ce.key===st?ne(re,se,ce,we):null;case _:return ce.key===st?de(re,se,ce,we):null;case R:return ce=hd(ce),ue(re,se,ce,we)}if(G(ce)||F(ce))return st!==null?null:ge(re,se,ce,we,null);if(typeof ce.then=="function")return ue(re,se,Fg(ce),we);if(ce.$$typeof===A)return ue(re,se,Og(re,ce),we);$g(re,ce)}return null}function fe(re,se,ce,we,st){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return re=re.get(ce)||null,W(se,re,""+we,st);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case b:return re=re.get(we.key===null?ce:we.key)||null,ne(se,re,we,st);case _:return re=re.get(we.key===null?ce:we.key)||null,de(se,re,we,st);case R:return we=hd(we),fe(re,se,ce,we,st)}if(G(we)||F(we))return re=re.get(ce)||null,ge(se,re,we,st,null);if(typeof we.then=="function")return fe(re,se,ce,Fg(we),st);if(we.$$typeof===A)return fe(re,se,ce,Og(se,we),st);$g(se,we)}return null}function Ye(re,se,ce,we){for(var st=null,dn=null,Qe=se,St=se=0,Yt=null;Qe!==null&&St<ce.length;St++){Qe.index>St?(Yt=Qe,Qe=null):Yt=Qe.sibling;var un=ue(re,Qe,ce[St],we);if(un===null){Qe===null&&(Qe=Yt);break}o&&Qe&&un.alternate===null&&c(re,Qe),se=N(un,se,St),dn===null?st=un:dn.sibling=un,dn=un,Qe=Yt}if(St===ce.length)return m(re,Qe),Xt&&Bo(re,St),st;if(Qe===null){for(;St<ce.length;St++)Qe=Ne(re,ce[St],we),Qe!==null&&(se=N(Qe,se,St),dn===null?st=Qe:dn.sibling=Qe,dn=Qe);return Xt&&Bo(re,St),st}for(Qe=g(Qe);St<ce.length;St++)Yt=fe(Qe,re,St,ce[St],we),Yt!==null&&(o&&Yt.alternate!==null&&Qe.delete(Yt.key===null?St:Yt.key),se=N(Yt,se,St),dn===null?st=Yt:dn.sibling=Yt,dn=Yt);return o&&Qe.forEach(function(sc){return c(re,sc)}),Xt&&Bo(re,St),st}function it(re,se,ce,we){if(ce==null)throw Error(s(151));for(var st=null,dn=null,Qe=se,St=se=0,Yt=null,un=ce.next();Qe!==null&&!un.done;St++,un=ce.next()){Qe.index>St?(Yt=Qe,Qe=null):Yt=Qe.sibling;var sc=ue(re,Qe,un.value,we);if(sc===null){Qe===null&&(Qe=Yt);break}o&&Qe&&sc.alternate===null&&c(re,Qe),se=N(sc,se,St),dn===null?st=sc:dn.sibling=sc,dn=sc,Qe=Yt}if(un.done)return m(re,Qe),Xt&&Bo(re,St),st;if(Qe===null){for(;!un.done;St++,un=ce.next())un=Ne(re,un.value,we),un!==null&&(se=N(un,se,St),dn===null?st=un:dn.sibling=un,dn=un);return Xt&&Bo(re,St),st}for(Qe=g(Qe);!un.done;St++,un=ce.next())un=fe(Qe,re,St,un.value,we),un!==null&&(o&&un.alternate!==null&&Qe.delete(un.key===null?St:un.key),se=N(un,se,St),dn===null?st=un:dn.sibling=un,dn=un);return o&&Qe.forEach(function(JU){return c(re,JU)}),Xt&&Bo(re,St),st}function Mn(re,se,ce,we){if(typeof ce=="object"&&ce!==null&&ce.type===j&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:e:{for(var st=ce.key;se!==null;){if(se.key===st){if(st=ce.type,st===j){if(se.tag===7){m(re,se.sibling),we=E(se,ce.props.children),we.return=re,re=we;break e}}else if(se.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===R&&hd(st)===se.type){m(re,se.sibling),we=E(se,ce.props),km(we,ce),we.return=re,re=we;break e}m(re,se);break}else c(re,se);se=se.sibling}ce.type===j?(we=od(ce.props.children,re.mode,we,ce.key),we.return=re,re=we):(we=Mg(ce.type,ce.key,ce.props,null,re.mode,we),km(we,ce),we.return=re,re=we)}return V(re);case _:e:{for(st=ce.key;se!==null;){if(se.key===st)if(se.tag===4&&se.stateNode.containerInfo===ce.containerInfo&&se.stateNode.implementation===ce.implementation){m(re,se.sibling),we=E(se,ce.children||[]),we.return=re,re=we;break e}else{m(re,se);break}else c(re,se);se=se.sibling}we=jv(ce,re.mode,we),we.return=re,re=we}return V(re);case R:return ce=hd(ce),Mn(re,se,ce,we)}if(G(ce))return Ye(re,se,ce,we);if(F(ce)){if(st=F(ce),typeof st!="function")throw Error(s(150));return ce=st.call(ce),it(re,se,ce,we)}if(typeof ce.then=="function")return Mn(re,se,Fg(ce),we);if(ce.$$typeof===A)return Mn(re,se,Og(re,ce),we);$g(re,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,se!==null&&se.tag===6?(m(re,se.sibling),we=E(se,ce),we.return=re,re=we):(m(re,se),we=Nv(ce,re.mode,we),we.return=re,re=we),V(re)):m(re,se)}return function(re,se,ce,we){try{Tm=0;var st=Mn(re,se,ce,we);return Cu=null,st}catch(Qe){if(Qe===ju||Qe===Ug)throw Qe;var dn=ga(29,Qe,null,re.mode);return dn.lanes=we,dn.return=re,dn}finally{}}}var fd=nS(!0),sS=nS(!1),Bl=!1;function Ov(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vv(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Fl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function $l(o,c,m){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(gn&2)!==0){var E=g.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),g.pending=c,c=Pg(o),BC(o,null,m),c}return Dg(o,g,c,m),Pg(o)}function Am(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var g=c.lanes;g&=o.pendingLanes,m|=g,c.lanes=m,ko(o,m)}}function Uv(o,c){var m=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var E=null,N=null;if(m=m.firstBaseUpdate,m!==null){do{var V={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};N===null?E=N=V:N=N.next=V,m=m.next}while(m!==null);N===null?E=N=c:N=N.next=c}else E=N=c;m={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:N,shared:g.shared,callbacks:g.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}var Bv=!1;function Rm(){if(Bv){var o=Nu;if(o!==null)throw o}}function Dm(o,c,m,g){Bv=!1;var E=o.updateQueue;Bl=!1;var N=E.firstBaseUpdate,V=E.lastBaseUpdate,W=E.shared.pending;if(W!==null){E.shared.pending=null;var ne=W,de=ne.next;ne.next=null,V===null?N=de:V.next=de,V=ne;var ge=o.alternate;ge!==null&&(ge=ge.updateQueue,W=ge.lastBaseUpdate,W!==V&&(W===null?ge.firstBaseUpdate=de:W.next=de,ge.lastBaseUpdate=ne))}if(N!==null){var Ne=E.baseState;V=0,ge=de=ne=null,W=N;do{var ue=W.lane&-536870913,fe=ue!==W.lane;if(fe?(Wt&ue)===ue:(g&ue)===ue){ue!==0&&ue===Eu&&(Bv=!0),ge!==null&&(ge=ge.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var Ye=o,it=W;ue=c;var Mn=m;switch(it.tag){case 1:if(Ye=it.payload,typeof Ye=="function"){Ne=Ye.call(Mn,Ne,ue);break e}Ne=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=it.payload,ue=typeof Ye=="function"?Ye.call(Mn,Ne,ue):Ye,ue==null)break e;Ne=p({},Ne,ue);break e;case 2:Bl=!0}}ue=W.callback,ue!==null&&(o.flags|=64,fe&&(o.flags|=8192),fe=E.callbacks,fe===null?E.callbacks=[ue]:fe.push(ue))}else fe={lane:ue,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ge===null?(de=ge=fe,ne=Ne):ge=ge.next=fe,V|=ue;if(W=W.next,W===null){if(W=E.shared.pending,W===null)break;fe=W,W=fe.next,fe.next=null,E.lastBaseUpdate=fe,E.shared.pending=null}}while(!0);ge===null&&(ne=Ne),E.baseState=ne,E.firstBaseUpdate=de,E.lastBaseUpdate=ge,N===null&&(E.shared.lanes=0),Yl|=V,o.lanes=V,o.memoizedState=Ne}}function rS(o,c){if(typeof o!="function")throw Error(s(191,o));o.call(c)}function aS(o,c){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)rS(m[o],c)}var Su=H(null),zg=H(0);function iS(o,c){o=Xo,X(zg,o),X(Su,c),Xo=o|c.baseLanes}function Fv(){X(zg,Xo),X(Su,Su.current)}function $v(){Xo=zg.current,Y(Su),Y(zg)}var xa=H(null),Ua=null;function zl(o){var c=o.alternate;X(vs,vs.current&1),X(xa,o),Ua===null&&(c===null||Su.current!==null||c.memoizedState!==null)&&(Ua=o)}function zv(o){X(vs,vs.current),X(xa,o),Ua===null&&(Ua=o)}function oS(o){o.tag===22?(X(vs,vs.current),X(xa,o),Ua===null&&(Ua=o)):Hl()}function Hl(){X(vs,vs.current),X(xa,xa.current)}function ya(o){Y(xa),Ua===o&&(Ua=null),Y(vs)}var vs=H(0);function Hg(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Kw(m)||Qw(m)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var zo=0,Nt=null,Dn=null,Ms=null,qg=!1,Tu=!1,pd=!1,Wg=0,Pm=0,ku=null,zV=0;function us(){throw Error(s(321))}function Hv(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!pa(o[m],c[m]))return!1;return!0}function qv(o,c,m,g,E,N){return zo=N,Nt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,B.H=o===null||o.memoizedState===null?HS:iw,pd=!1,N=m(g,E),pd=!1,Tu&&(N=cS(c,m,g,E)),lS(o),N}function lS(o){B.H=Im;var c=Dn!==null&&Dn.next!==null;if(zo=0,Ms=Dn=Nt=null,qg=!1,Pm=0,ku=null,c)throw Error(s(300));o===null||Ls||(o=o.dependencies,o!==null&&Ig(o)&&(Ls=!0))}function cS(o,c,m,g){Nt=o;var E=0;do{if(Tu&&(ku=null),Pm=0,Tu=!1,25<=E)throw Error(s(301));if(E+=1,Ms=Dn=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}B.H=qS,N=c(m,g)}while(Tu);return N}function HV(){var o=B.H,c=o.useState()[0];return c=typeof c.then=="function"?Mm(c):c,o=o.useState()[0],(Dn!==null?Dn.memoizedState:null)!==o&&(Nt.flags|=1024),c}function Wv(){var o=Wg!==0;return Wg=0,o}function Yv(o,c,m){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~m}function Gv(o){if(qg){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}qg=!1}zo=0,Ms=Dn=Nt=null,Tu=!1,Pm=Wg=0,ku=null}function Fr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ms===null?Nt.memoizedState=Ms=o:Ms=Ms.next=o,Ms}function ws(){if(Dn===null){var o=Nt.alternate;o=o!==null?o.memoizedState:null}else o=Dn.next;var c=Ms===null?Nt.memoizedState:Ms.next;if(c!==null)Ms=c,Dn=o;else{if(o===null)throw Nt.alternate===null?Error(s(467)):Error(s(310));Dn=o,o={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Ms===null?Nt.memoizedState=Ms=o:Ms=Ms.next=o}return Ms}function Yg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mm(o){var c=Pm;return Pm+=1,ku===null&&(ku=[]),o=JC(ku,o,c),c=Nt,(Ms===null?c.memoizedState:Ms.next)===null&&(c=c.alternate,B.H=c===null||c.memoizedState===null?HS:iw),o}function Gg(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Mm(o);if(o.$$typeof===A)return ur(o)}throw Error(s(438,String(o)))}function Kv(o){var c=null,m=Nt.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var g=Nt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=Yg(),Nt.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(o),g=0;g<o;g++)m[g]=O;return c.index++,m}function Ho(o,c){return typeof c=="function"?c(o):c}function Kg(o){var c=ws();return Qv(c,Dn,o)}function Qv(o,c,m){var g=o.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=m;var E=o.baseQueue,N=g.pending;if(N!==null){if(E!==null){var V=E.next;E.next=N.next,N.next=V}c.baseQueue=E=N,g.pending=null}if(N=o.baseState,E===null)o.memoizedState=N;else{c=E.next;var W=V=null,ne=null,de=c,ge=!1;do{var Ne=de.lane&-536870913;if(Ne!==de.lane?(Wt&Ne)===Ne:(zo&Ne)===Ne){var ue=de.revertLane;if(ue===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),Ne===Eu&&(ge=!0);else if((zo&ue)===ue){de=de.next,ue===Eu&&(ge=!0);continue}else Ne={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},ne===null?(W=ne=Ne,V=N):ne=ne.next=Ne,Nt.lanes|=ue,Yl|=ue;Ne=de.action,pd&&m(N,Ne),N=de.hasEagerState?de.eagerState:m(N,Ne)}else ue={lane:Ne,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},ne===null?(W=ne=ue,V=N):ne=ne.next=ue,Nt.lanes|=Ne,Yl|=Ne;de=de.next}while(de!==null&&de!==c);if(ne===null?V=N:ne.next=W,!pa(N,o.memoizedState)&&(Ls=!0,ge&&(m=Nu,m!==null)))throw m;o.memoizedState=N,o.baseState=V,o.baseQueue=ne,g.lastRenderedState=N}return E===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function Xv(o){var c=ws(),m=c.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=o;var g=m.dispatch,E=m.pending,N=c.memoizedState;if(E!==null){m.pending=null;var V=E=E.next;do N=o(N,V.action),V=V.next;while(V!==E);pa(N,c.memoizedState)||(Ls=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),m.lastRenderedState=N}return[N,g]}function dS(o,c,m){var g=Nt,E=ws(),N=Xt;if(N){if(m===void 0)throw Error(s(407));m=m()}else m=c();var V=!pa((Dn||E).memoizedState,m);if(V&&(E.memoizedState=m,Ls=!0),E=E.queue,ew(mS.bind(null,g,E,o),[o]),E.getSnapshot!==c||V||Ms!==null&&Ms.memoizedState.tag&1){if(g.flags|=2048,Au(9,{destroy:void 0},hS.bind(null,g,E,m,c),null),Un===null)throw Error(s(349));N||(zo&127)!==0||uS(g,c,m)}return m}function uS(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=Nt.updateQueue,c===null?(c=Yg(),Nt.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function hS(o,c,m,g){c.value=m,c.getSnapshot=g,fS(c)&&pS(o)}function mS(o,c,m){return m(function(){fS(c)&&pS(o)})}function fS(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!pa(o,m)}catch{return!0}}function pS(o){var c=id(o,2);c!==null&&na(c,o,2)}function Zv(o){var c=Fr();if(typeof o=="function"){var m=o;if(o=m(),pd){$n(!0);try{m()}finally{$n(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:o},c}function gS(o,c,m,g){return o.baseState=m,Qv(o,Dn,typeof g=="function"?g:Ho)}function qV(o,c,m,g,E){if(Zg(o))throw Error(s(485));if(o=c.action,o!==null){var N={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){N.listeners.push(V)}};B.T!==null?m(!0):N.isTransition=!1,g(N),m=c.pending,m===null?(N.next=c.pending=N,xS(c,N)):(N.next=m.next,c.pending=m.next=N)}}function xS(o,c){var m=c.action,g=c.payload,E=o.state;if(c.isTransition){var N=B.T,V={};B.T=V;try{var W=m(E,g),ne=B.S;ne!==null&&ne(V,W),yS(o,c,W)}catch(de){Jv(o,c,de)}finally{N!==null&&V.types!==null&&(N.types=V.types),B.T=N}}else try{N=m(E,g),yS(o,c,N)}catch(de){Jv(o,c,de)}}function yS(o,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(g){bS(o,c,g)},function(g){return Jv(o,c,g)}):bS(o,c,m)}function bS(o,c,m){c.status="fulfilled",c.value=m,vS(c),o.state=m,c=o.pending,c!==null&&(m=c.next,m===c?o.pending=null:(m=m.next,c.next=m,xS(o,m)))}function Jv(o,c,m){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=m,vS(c),c=c.next;while(c!==g)}o.action=null}function vS(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function wS(o,c){return c}function _S(o,c){if(Xt){var m=Un.formState;if(m!==null){e:{var g=Nt;if(Xt){if(Yn){t:{for(var E=Yn,N=Va;E.nodeType!==8;){if(!N){E=null;break t}if(E=Ba(E.nextSibling),E===null){E=null;break t}}N=E.data,E=N==="F!"||N==="F"?E:null}if(E){Yn=Ba(E.nextSibling),g=E.data==="F!";break e}}Vl(g)}g=!1}g&&(c=m[0])}}return m=Fr(),m.memoizedState=m.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wS,lastRenderedState:c},m.queue=g,m=FS.bind(null,Nt,g),g.dispatch=m,g=Zv(!1),N=aw.bind(null,Nt,!1,g.queue),g=Fr(),E={state:c,dispatch:null,action:o,pending:null},g.queue=E,m=qV.bind(null,Nt,E,N,m),E.dispatch=m,g.memoizedState=o,[c,m,!1]}function ES(o){var c=ws();return NS(c,Dn,o)}function NS(o,c,m){if(c=Qv(o,c,wS)[0],o=Kg(Ho)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=Mm(c)}catch(V){throw V===ju?Ug:V}else g=c;c=ws();var E=c.queue,N=E.dispatch;return m!==c.memoizedState&&(Nt.flags|=2048,Au(9,{destroy:void 0},WV.bind(null,E,m),null)),[g,N,o]}function WV(o,c){o.action=c}function jS(o){var c=ws(),m=Dn;if(m!==null)return NS(c,m,o);ws(),c=c.memoizedState,m=ws();var g=m.queue.dispatch;return m.memoizedState=o,[c,g,!1]}function Au(o,c,m,g){return o={tag:o,create:m,deps:g,inst:c,next:null},c=Nt.updateQueue,c===null&&(c=Yg(),Nt.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=o.next=o:(g=m.next,m.next=o,o.next=g,c.lastEffect=o),o}function CS(){return ws().memoizedState}function Qg(o,c,m,g){var E=Fr();Nt.flags|=o,E.memoizedState=Au(1|c,{destroy:void 0},m,g===void 0?null:g)}function Xg(o,c,m,g){var E=ws();g=g===void 0?null:g;var N=E.memoizedState.inst;Dn!==null&&g!==null&&Hv(g,Dn.memoizedState.deps)?E.memoizedState=Au(c,N,m,g):(Nt.flags|=o,E.memoizedState=Au(1|c,N,m,g))}function SS(o,c){Qg(8390656,8,o,c)}function ew(o,c){Xg(2048,8,o,c)}function YV(o){Nt.flags|=4;var c=Nt.updateQueue;if(c===null)c=Yg(),Nt.updateQueue=c,c.events=[o];else{var m=c.events;m===null?c.events=[o]:m.push(o)}}function TS(o){var c=ws().memoizedState;return YV({ref:c,nextImpl:o}),function(){if((gn&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}function kS(o,c){return Xg(4,2,o,c)}function AS(o,c){return Xg(4,4,o,c)}function RS(o,c){if(typeof c=="function"){o=o();var m=c(o);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function DS(o,c,m){m=m!=null?m.concat([o]):null,Xg(4,4,RS.bind(null,c,o),m)}function tw(){}function PS(o,c){var m=ws();c=c===void 0?null:c;var g=m.memoizedState;return c!==null&&Hv(c,g[1])?g[0]:(m.memoizedState=[o,c],o)}function MS(o,c){var m=ws();c=c===void 0?null:c;var g=m.memoizedState;if(c!==null&&Hv(c,g[1]))return g[0];if(g=o(),pd){$n(!0);try{o()}finally{$n(!1)}}return m.memoizedState=[g,c],g}function nw(o,c,m){return m===void 0||(zo&1073741824)!==0&&(Wt&261930)===0?o.memoizedState=c:(o.memoizedState=m,o=LT(),Nt.lanes|=o,Yl|=o,m)}function LS(o,c,m,g){return pa(m,c)?m:Su.current!==null?(o=nw(o,m,g),pa(o,c)||(Ls=!0),o):(zo&42)===0||(zo&1073741824)!==0&&(Wt&261930)===0?(Ls=!0,o.memoizedState=m):(o=LT(),Nt.lanes|=o,Yl|=o,c)}function IS(o,c,m,g,E){var N=z.p;z.p=N!==0&&8>N?N:8;var V=B.T,W={};B.T=W,aw(o,!1,c,m);try{var ne=E(),de=B.S;if(de!==null&&de(W,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var ge=$V(ne,g);Lm(o,c,ge,wa(o))}else Lm(o,c,g,wa(o))}catch(Ne){Lm(o,c,{then:function(){},status:"rejected",reason:Ne},wa())}finally{z.p=N,V!==null&&W.types!==null&&(V.types=W.types),B.T=V}}function GV(){}function sw(o,c,m,g){if(o.tag!==5)throw Error(s(476));var E=OS(o).queue;IS(o,E,c,q,m===null?GV:function(){return VS(o),m(g)})}function OS(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:q},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:m},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function VS(o){var c=OS(o);c.next===null&&(c=o.alternate.memoizedState),Lm(o,c.next.queue,{},wa())}function rw(){return ur(Zm)}function US(){return ws().memoizedState}function BS(){return ws().memoizedState}function KV(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var m=wa();o=Fl(m);var g=$l(c,o,m);g!==null&&(na(g,c,m),Am(g,c,m)),c={cache:Pv()},o.payload=c;return}c=c.return}}function QV(o,c,m){var g=wa();m={lane:g,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Zg(o)?$S(c,m):(m=_v(o,c,m,g),m!==null&&(na(m,o,g),zS(m,c,g)))}function FS(o,c,m){var g=wa();Lm(o,c,m,g)}function Lm(o,c,m,g){var E={lane:g,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Zg(o))$S(c,E);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var V=c.lastRenderedState,W=N(V,m);if(E.hasEagerState=!0,E.eagerState=W,pa(W,V))return Dg(o,c,E,0),Un===null&&Rg(),!1}catch{}finally{}if(m=_v(o,c,E,g),m!==null)return na(m,o,g),zS(m,c,g),!0}return!1}function aw(o,c,m,g){if(g={lane:2,revertLane:Ow(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Zg(o)){if(c)throw Error(s(479))}else c=_v(o,m,g,2),c!==null&&na(c,o,2)}function Zg(o){var c=o.alternate;return o===Nt||c!==null&&c===Nt}function $S(o,c){Tu=qg=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function zS(o,c,m){if((m&4194048)!==0){var g=c.lanes;g&=o.pendingLanes,m|=g,c.lanes=m,ko(o,m)}}var Im={readContext:ur,use:Gg,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useLayoutEffect:us,useInsertionEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useSyncExternalStore:us,useId:us,useHostTransitionStatus:us,useFormState:us,useActionState:us,useOptimistic:us,useMemoCache:us,useCacheRefresh:us};Im.useEffectEvent=us;var HS={readContext:ur,use:Gg,useCallback:function(o,c){return Fr().memoizedState=[o,c===void 0?null:c],o},useContext:ur,useEffect:SS,useImperativeHandle:function(o,c,m){m=m!=null?m.concat([o]):null,Qg(4194308,4,RS.bind(null,c,o),m)},useLayoutEffect:function(o,c){return Qg(4194308,4,o,c)},useInsertionEffect:function(o,c){Qg(4,2,o,c)},useMemo:function(o,c){var m=Fr();c=c===void 0?null:c;var g=o();if(pd){$n(!0);try{o()}finally{$n(!1)}}return m.memoizedState=[g,c],g},useReducer:function(o,c,m){var g=Fr();if(m!==void 0){var E=m(c);if(pd){$n(!0);try{m(c)}finally{$n(!1)}}}else E=c;return g.memoizedState=g.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},g.queue=o,o=o.dispatch=QV.bind(null,Nt,o),[g.memoizedState,o]},useRef:function(o){var c=Fr();return o={current:o},c.memoizedState=o},useState:function(o){o=Zv(o);var c=o.queue,m=FS.bind(null,Nt,c);return c.dispatch=m,[o.memoizedState,m]},useDebugValue:tw,useDeferredValue:function(o,c){var m=Fr();return nw(m,o,c)},useTransition:function(){var o=Zv(!1);return o=IS.bind(null,Nt,o.queue,!0,!1),Fr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,m){var g=Nt,E=Fr();if(Xt){if(m===void 0)throw Error(s(407));m=m()}else{if(m=c(),Un===null)throw Error(s(349));(Wt&127)!==0||uS(g,c,m)}E.memoizedState=m;var N={value:m,getSnapshot:c};return E.queue=N,SS(mS.bind(null,g,N,o),[o]),g.flags|=2048,Au(9,{destroy:void 0},hS.bind(null,g,N,m,c),null),m},useId:function(){var o=Fr(),c=Un.identifierPrefix;if(Xt){var m=zi,g=$i;m=(g&~(1<<32-An(g)-1)).toString(32)+m,c="_"+c+"R_"+m,m=Wg++,0<m&&(c+="H"+m.toString(32)),c+="_"}else m=zV++,c="_"+c+"r_"+m.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:rw,useFormState:_S,useActionState:_S,useOptimistic:function(o){var c=Fr();c.memoizedState=c.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=aw.bind(null,Nt,!0,m),m.dispatch=c,[o,c]},useMemoCache:Kv,useCacheRefresh:function(){return Fr().memoizedState=KV.bind(null,Nt)},useEffectEvent:function(o){var c=Fr(),m={impl:o};return c.memoizedState=m,function(){if((gn&2)!==0)throw Error(s(440));return m.impl.apply(void 0,arguments)}}},iw={readContext:ur,use:Gg,useCallback:PS,useContext:ur,useEffect:ew,useImperativeHandle:DS,useInsertionEffect:kS,useLayoutEffect:AS,useMemo:MS,useReducer:Kg,useRef:CS,useState:function(){return Kg(Ho)},useDebugValue:tw,useDeferredValue:function(o,c){var m=ws();return LS(m,Dn.memoizedState,o,c)},useTransition:function(){var o=Kg(Ho)[0],c=ws().memoizedState;return[typeof o=="boolean"?o:Mm(o),c]},useSyncExternalStore:dS,useId:US,useHostTransitionStatus:rw,useFormState:ES,useActionState:ES,useOptimistic:function(o,c){var m=ws();return gS(m,Dn,o,c)},useMemoCache:Kv,useCacheRefresh:BS};iw.useEffectEvent=TS;var qS={readContext:ur,use:Gg,useCallback:PS,useContext:ur,useEffect:ew,useImperativeHandle:DS,useInsertionEffect:kS,useLayoutEffect:AS,useMemo:MS,useReducer:Xv,useRef:CS,useState:function(){return Xv(Ho)},useDebugValue:tw,useDeferredValue:function(o,c){var m=ws();return Dn===null?nw(m,o,c):LS(m,Dn.memoizedState,o,c)},useTransition:function(){var o=Xv(Ho)[0],c=ws().memoizedState;return[typeof o=="boolean"?o:Mm(o),c]},useSyncExternalStore:dS,useId:US,useHostTransitionStatus:rw,useFormState:jS,useActionState:jS,useOptimistic:function(o,c){var m=ws();return Dn!==null?gS(m,Dn,o,c):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:Kv,useCacheRefresh:BS};qS.useEffectEvent=TS;function ow(o,c,m,g){c=o.memoizedState,m=m(g,c),m=m==null?c:p({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var lw={enqueueSetState:function(o,c,m){o=o._reactInternals;var g=wa(),E=Fl(g);E.payload=c,m!=null&&(E.callback=m),c=$l(o,E,g),c!==null&&(na(c,o,g),Am(c,o,g))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var g=wa(),E=Fl(g);E.tag=1,E.payload=c,m!=null&&(E.callback=m),c=$l(o,E,g),c!==null&&(na(c,o,g),Am(c,o,g))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=wa(),g=Fl(m);g.tag=2,c!=null&&(g.callback=c),c=$l(o,g,m),c!==null&&(na(c,o,m),Am(c,o,m))}};function WS(o,c,m,g,E,N,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,N,V):c.prototype&&c.prototype.isPureReactComponent?!_m(m,g)||!_m(E,N):!0}function YS(o,c,m,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,g),c.state!==o&&lw.enqueueReplaceState(c,c.state,null)}function gd(o,c){var m=c;if("ref"in c){m={};for(var g in c)g!=="ref"&&(m[g]=c[g])}if(o=o.defaultProps){m===c&&(m=p({},m));for(var E in o)m[E]===void 0&&(m[E]=o[E])}return m}function GS(o){Ag(o)}function KS(o){console.error(o)}function QS(o){Ag(o)}function Jg(o,c){try{var m=o.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function XS(o,c,m){try{var g=o.onCaughtError;g(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function cw(o,c,m){return m=Fl(m),m.tag=3,m.payload={element:null},m.callback=function(){Jg(o,c)},m}function ZS(o){return o=Fl(o),o.tag=3,o}function JS(o,c,m,g){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var N=g.value;o.payload=function(){return E(N)},o.callback=function(){XS(c,m,g)}}var V=m.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(o.callback=function(){XS(c,m,g),typeof E!="function"&&(Gl===null?Gl=new Set([this]):Gl.add(this));var W=g.stack;this.componentDidCatch(g.value,{componentStack:W!==null?W:""})})}function XV(o,c,m,g,E){if(m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=m.alternate,c!==null&&_u(c,m,E,!0),m=xa.current,m!==null){switch(m.tag){case 31:case 13:return Ua===null?u0():m.alternate===null&&hs===0&&(hs=3),m.flags&=-257,m.flags|=65536,m.lanes=E,g===Bg?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([g]):c.add(g),Mw(o,g,E)),!1;case 22:return m.flags|=65536,g===Bg?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([g]):m.add(g)),Mw(o,g,E)),!1}throw Error(s(435,m.tag))}return Mw(o,g,E),u0(),!1}if(Xt)return c=xa.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,g!==Tv&&(o=Error(s(422),{cause:g}),jm(La(o,m)))):(g!==Tv&&(c=Error(s(423),{cause:g}),jm(La(c,m))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,g=La(g,m),E=cw(o.stateNode,g,E),Uv(o,E),hs!==4&&(hs=2)),!1;var N=Error(s(520),{cause:g});if(N=La(N,m),Hm===null?Hm=[N]:Hm.push(N),hs!==4&&(hs=2),c===null)return!0;g=La(g,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,o=E&-E,m.lanes|=o,o=cw(m.stateNode,g,o),Uv(m,o),!1;case 1:if(c=m.type,N=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Gl===null||!Gl.has(N))))return m.flags|=65536,E&=-E,m.lanes|=E,E=ZS(E),JS(E,o,m,g),Uv(m,E),!1}m=m.return}while(m!==null);return!1}var dw=Error(s(461)),Ls=!1;function hr(o,c,m,g){c.child=o===null?sS(c,null,m,g):fd(c,o.child,m,g)}function eT(o,c,m,g,E){m=m.render;var N=c.ref;if("ref"in g){var V={};for(var W in g)W!=="ref"&&(V[W]=g[W])}else V=g;return dd(c),g=qv(o,c,m,V,N,E),W=Wv(),o!==null&&!Ls?(Yv(o,c,E),qo(o,c,E)):(Xt&&W&&Cv(c),c.flags|=1,hr(o,c,g,E),c.child)}function tT(o,c,m,g,E){if(o===null){var N=m.type;return typeof N=="function"&&!Ev(N)&&N.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=N,nT(o,c,N,g,E)):(o=Mg(m.type,null,g,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(N=o.child,!yw(o,E)){var V=N.memoizedProps;if(m=m.compare,m=m!==null?m:_m,m(V,g)&&o.ref===c.ref)return qo(o,c,E)}return c.flags|=1,o=Uo(N,g),o.ref=c.ref,o.return=c,c.child=o}function nT(o,c,m,g,E){if(o!==null){var N=o.memoizedProps;if(_m(N,g)&&o.ref===c.ref)if(Ls=!1,c.pendingProps=g=N,yw(o,E))(o.flags&131072)!==0&&(Ls=!0);else return c.lanes=o.lanes,qo(o,c,E)}return uw(o,c,m,g,E)}function sT(o,c,m,g){var E=g.children,N=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((c.flags&128)!==0){if(N=N!==null?N.baseLanes|m:m,o!==null){for(g=c.child=o.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;g=E&~N}else g=0,c.child=null;return rT(o,c,N,m,g)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Vg(c,N!==null?N.cachePool:null),N!==null?iS(c,N):Fv(),oS(c);else return g=c.lanes=536870912,rT(o,c,N!==null?N.baseLanes|m:m,m,g)}else N!==null?(Vg(c,N.cachePool),iS(c,N),Hl(),c.memoizedState=null):(o!==null&&Vg(c,null),Fv(),Hl());return hr(o,c,E,m),c.child}function Om(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function rT(o,c,m,g,E){var N=Lv();return N=N===null?null:{parent:Ps._currentValue,pool:N},c.memoizedState={baseLanes:m,cachePool:N},o!==null&&Vg(c,null),Fv(),oS(c),o!==null&&_u(o,c,g,!0),c.childLanes=E,null}function e0(o,c){return c=n0({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function aT(o,c,m){return fd(c,o.child,null,m),o=e0(c,c.pendingProps),o.flags|=2,ya(c),c.memoizedState=null,o}function ZV(o,c,m){var g=c.pendingProps,E=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(Xt){if(g.mode==="hidden")return o=e0(c,g),c.lanes=536870912,Om(null,o);if(zv(c),(o=Yn)?(o=xk(o,Va),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Il!==null?{id:$i,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},m=$C(o),m.return=c,c.child=m,dr=c,Yn=null)):o=null,o===null)throw Vl(c);return c.lanes=536870912,null}return e0(c,g)}var N=o.memoizedState;if(N!==null){var V=N.dehydrated;if(zv(c),E)if(c.flags&256)c.flags&=-257,c=aT(o,c,m);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(s(558));else if(Ls||_u(o,c,m,!1),E=(m&o.childLanes)!==0,Ls||E){if(g=Un,g!==null&&(V=ri(g,m),V!==0&&V!==N.retryLane))throw N.retryLane=V,id(o,V),na(g,o,V),dw;u0(),c=aT(o,c,m)}else o=N.treeContext,Yn=Ba(V.nextSibling),dr=c,Xt=!0,Ol=null,Va=!1,o!==null&&qC(c,o),c=e0(c,g),c.flags|=4096;return c}return o=Uo(o.child,{mode:g.mode,children:g.children}),o.ref=c.ref,c.child=o,o.return=c,o}function t0(o,c){var m=c.ref;if(m===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(s(284));(o===null||o.ref!==m)&&(c.flags|=4194816)}}function uw(o,c,m,g,E){return dd(c),m=qv(o,c,m,g,void 0,E),g=Wv(),o!==null&&!Ls?(Yv(o,c,E),qo(o,c,E)):(Xt&&g&&Cv(c),c.flags|=1,hr(o,c,m,E),c.child)}function iT(o,c,m,g,E,N){return dd(c),c.updateQueue=null,m=cS(c,g,m,E),lS(o),g=Wv(),o!==null&&!Ls?(Yv(o,c,N),qo(o,c,N)):(Xt&&g&&Cv(c),c.flags|=1,hr(o,c,m,N),c.child)}function oT(o,c,m,g,E){if(dd(c),c.stateNode===null){var N=yu,V=m.contextType;typeof V=="object"&&V!==null&&(N=ur(V)),N=new m(g,N),c.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=lw,c.stateNode=N,N._reactInternals=c,N=c.stateNode,N.props=g,N.state=c.memoizedState,N.refs={},Ov(c),V=m.contextType,N.context=typeof V=="object"&&V!==null?ur(V):yu,N.state=c.memoizedState,V=m.getDerivedStateFromProps,typeof V=="function"&&(ow(c,m,V,g),N.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(V=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),V!==N.state&&lw.enqueueReplaceState(N,N.state,null),Dm(c,g,N,E),Rm(),N.state=c.memoizedState),typeof N.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(o===null){N=c.stateNode;var W=c.memoizedProps,ne=gd(m,W);N.props=ne;var de=N.context,ge=m.contextType;V=yu,typeof ge=="object"&&ge!==null&&(V=ur(ge));var Ne=m.getDerivedStateFromProps;ge=typeof Ne=="function"||typeof N.getSnapshotBeforeUpdate=="function",W=c.pendingProps!==W,ge||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(W||de!==V)&&YS(c,N,g,V),Bl=!1;var ue=c.memoizedState;N.state=ue,Dm(c,g,N,E),Rm(),de=c.memoizedState,W||ue!==de||Bl?(typeof Ne=="function"&&(ow(c,m,Ne,g),de=c.memoizedState),(ne=Bl||WS(c,m,ne,g,ue,de,V))?(ge||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(c.flags|=4194308)):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=de),N.props=g,N.state=de,N.context=V,g=ne):(typeof N.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{N=c.stateNode,Vv(o,c),V=c.memoizedProps,ge=gd(m,V),N.props=ge,Ne=c.pendingProps,ue=N.context,de=m.contextType,ne=yu,typeof de=="object"&&de!==null&&(ne=ur(de)),W=m.getDerivedStateFromProps,(de=typeof W=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V!==Ne||ue!==ne)&&YS(c,N,g,ne),Bl=!1,ue=c.memoizedState,N.state=ue,Dm(c,g,N,E),Rm();var fe=c.memoizedState;V!==Ne||ue!==fe||Bl||o!==null&&o.dependencies!==null&&Ig(o.dependencies)?(typeof W=="function"&&(ow(c,m,W,g),fe=c.memoizedState),(ge=Bl||WS(c,m,ge,g,ue,fe,ne)||o!==null&&o.dependencies!==null&&Ig(o.dependencies))?(de||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(g,fe,ne),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(g,fe,ne)),typeof N.componentDidUpdate=="function"&&(c.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof N.componentDidUpdate!="function"||V===o.memoizedProps&&ue===o.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&ue===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=fe),N.props=g,N.state=fe,N.context=ne,g=ge):(typeof N.componentDidUpdate!="function"||V===o.memoizedProps&&ue===o.memoizedState||(c.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&ue===o.memoizedState||(c.flags|=1024),g=!1)}return N=g,t0(o,c),g=(c.flags&128)!==0,N||g?(N=c.stateNode,m=g&&typeof m.getDerivedStateFromError!="function"?null:N.render(),c.flags|=1,o!==null&&g?(c.child=fd(c,o.child,null,E),c.child=fd(c,null,m,E)):hr(o,c,m,E),c.memoizedState=N.state,o=c.child):o=qo(o,c,E),o}function lT(o,c,m,g){return ld(),c.flags|=256,hr(o,c,m,g),c.child}var hw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mw(o){return{baseLanes:o,cachePool:XC()}}function fw(o,c,m){return o=o!==null?o.childLanes&~m:0,c&&(o|=va),o}function cT(o,c,m){var g=c.pendingProps,E=!1,N=(c.flags&128)!==0,V;if((V=N)||(V=o!==null&&o.memoizedState===null?!1:(vs.current&2)!==0),V&&(E=!0,c.flags&=-129),V=(c.flags&32)!==0,c.flags&=-33,o===null){if(Xt){if(E?zl(c):Hl(),(o=Yn)?(o=xk(o,Va),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Il!==null?{id:$i,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},m=$C(o),m.return=c,c.child=m,dr=c,Yn=null)):o=null,o===null)throw Vl(c);return Qw(o)?c.lanes=32:c.lanes=536870912,null}var W=g.children;return g=g.fallback,E?(Hl(),E=c.mode,W=n0({mode:"hidden",children:W},E),g=od(g,E,m,null),W.return=c,g.return=c,W.sibling=g,c.child=W,g=c.child,g.memoizedState=mw(m),g.childLanes=fw(o,V,m),c.memoizedState=hw,Om(null,g)):(zl(c),pw(c,W))}var ne=o.memoizedState;if(ne!==null&&(W=ne.dehydrated,W!==null)){if(N)c.flags&256?(zl(c),c.flags&=-257,c=gw(o,c,m)):c.memoizedState!==null?(Hl(),c.child=o.child,c.flags|=128,c=null):(Hl(),W=g.fallback,E=c.mode,g=n0({mode:"visible",children:g.children},E),W=od(W,E,m,null),W.flags|=2,g.return=c,W.return=c,g.sibling=W,c.child=g,fd(c,o.child,null,m),g=c.child,g.memoizedState=mw(m),g.childLanes=fw(o,V,m),c.memoizedState=hw,c=Om(null,g));else if(zl(c),Qw(W)){if(V=W.nextSibling&&W.nextSibling.dataset,V)var de=V.dgst;V=de,g=Error(s(419)),g.stack="",g.digest=V,jm({value:g,source:null,stack:null}),c=gw(o,c,m)}else if(Ls||_u(o,c,m,!1),V=(m&o.childLanes)!==0,Ls||V){if(V=Un,V!==null&&(g=ri(V,m),g!==0&&g!==ne.retryLane))throw ne.retryLane=g,id(o,g),na(V,o,g),dw;Kw(W)||u0(),c=gw(o,c,m)}else Kw(W)?(c.flags|=192,c.child=o.child,c=null):(o=ne.treeContext,Yn=Ba(W.nextSibling),dr=c,Xt=!0,Ol=null,Va=!1,o!==null&&qC(c,o),c=pw(c,g.children),c.flags|=4096);return c}return E?(Hl(),W=g.fallback,E=c.mode,ne=o.child,de=ne.sibling,g=Uo(ne,{mode:"hidden",children:g.children}),g.subtreeFlags=ne.subtreeFlags&65011712,de!==null?W=Uo(de,W):(W=od(W,E,m,null),W.flags|=2),W.return=c,g.return=c,g.sibling=W,c.child=g,Om(null,g),g=c.child,W=o.child.memoizedState,W===null?W=mw(m):(E=W.cachePool,E!==null?(ne=Ps._currentValue,E=E.parent!==ne?{parent:ne,pool:ne}:E):E=XC(),W={baseLanes:W.baseLanes|m,cachePool:E}),g.memoizedState=W,g.childLanes=fw(o,V,m),c.memoizedState=hw,Om(o.child,g)):(zl(c),m=o.child,o=m.sibling,m=Uo(m,{mode:"visible",children:g.children}),m.return=c,m.sibling=null,o!==null&&(V=c.deletions,V===null?(c.deletions=[o],c.flags|=16):V.push(o)),c.child=m,c.memoizedState=null,m)}function pw(o,c){return c=n0({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function n0(o,c){return o=ga(22,o,null,c),o.lanes=0,o}function gw(o,c,m){return fd(c,o.child,null,m),o=pw(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function dT(o,c,m){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Rv(o.return,c,m)}function xw(o,c,m,g,E,N){var V=o.memoizedState;V===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:E,treeForkCount:N}:(V.isBackwards=c,V.rendering=null,V.renderingStartTime=0,V.last=g,V.tail=m,V.tailMode=E,V.treeForkCount=N)}function uT(o,c,m){var g=c.pendingProps,E=g.revealOrder,N=g.tail;g=g.children;var V=vs.current,W=(V&2)!==0;if(W?(V=V&1|2,c.flags|=128):V&=1,X(vs,V),hr(o,c,g,m),g=Xt?Nm:0,!W&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&dT(o,m,c);else if(o.tag===19)dT(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(E){case"forwards":for(m=c.child,E=null;m!==null;)o=m.alternate,o!==null&&Hg(o)===null&&(E=m),m=m.sibling;m=E,m===null?(E=c.child,c.child=null):(E=m.sibling,m.sibling=null),xw(c,!1,E,m,N,g);break;case"backwards":case"unstable_legacy-backwards":for(m=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&Hg(o)===null){c.child=E;break}o=E.sibling,E.sibling=m,m=E,E=o}xw(c,!0,m,null,N,g);break;case"together":xw(c,!1,null,null,void 0,g);break;default:c.memoizedState=null}return c.child}function qo(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),Yl|=c.lanes,(m&c.childLanes)===0)if(o!==null){if(_u(o,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,m=Uo(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=Uo(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function yw(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Ig(o)))}function JV(o,c,m){switch(c.tag){case 3:Se(c,c.stateNode.containerInfo),Ul(c,Ps,o.memoizedState.cache),ld();break;case 27:case 5:Ie(c);break;case 4:Se(c,c.stateNode.containerInfo);break;case 10:Ul(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,zv(c),null;break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(zl(c),c.flags|=128,null):(m&c.child.childLanes)!==0?cT(o,c,m):(zl(c),o=qo(o,c,m),o!==null?o.sibling:null);zl(c);break;case 19:var E=(o.flags&128)!==0;if(g=(m&c.childLanes)!==0,g||(_u(o,c,m,!1),g=(m&c.childLanes)!==0),E){if(g)return uT(o,c,m);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),X(vs,vs.current),g)break;return null;case 22:return c.lanes=0,sT(o,c,m,c.pendingProps);case 24:Ul(c,Ps,o.memoizedState.cache)}return qo(o,c,m)}function hT(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps)Ls=!0;else{if(!yw(o,m)&&(c.flags&128)===0)return Ls=!1,JV(o,c,m);Ls=(o.flags&131072)!==0}else Ls=!1,Xt&&(c.flags&1048576)!==0&&HC(c,Nm,c.index);switch(c.lanes=0,c.tag){case 16:e:{var g=c.pendingProps;if(o=hd(c.elementType),c.type=o,typeof o=="function")Ev(o)?(g=gd(o,g),c.tag=1,c=oT(null,c,o,g,m)):(c.tag=0,c=uw(null,c,o,g,m));else{if(o!=null){var E=o.$$typeof;if(E===C){c.tag=11,c=eT(null,c,o,g,m);break e}else if(E===k){c.tag=14,c=tT(null,c,o,g,m);break e}}throw c=Q(o)||o,Error(s(306,c,""))}}return c;case 0:return uw(o,c,c.type,c.pendingProps,m);case 1:return g=c.type,E=gd(g,c.pendingProps),oT(o,c,g,E,m);case 3:e:{if(Se(c,c.stateNode.containerInfo),o===null)throw Error(s(387));g=c.pendingProps;var N=c.memoizedState;E=N.element,Vv(o,c),Dm(c,g,null,m);var V=c.memoizedState;if(g=V.cache,Ul(c,Ps,g),g!==N.cache&&Dv(c,[Ps],m,!0),Rm(),g=V.element,N.isDehydrated)if(N={element:g,isDehydrated:!1,cache:V.cache},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){c=lT(o,c,g,m);break e}else if(g!==E){E=La(Error(s(424)),c),jm(E),c=lT(o,c,g,m);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Yn=Ba(o.firstChild),dr=c,Xt=!0,Ol=null,Va=!0,m=sS(c,null,g,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(ld(),g===E){c=qo(o,c,m);break e}hr(o,c,g,m)}c=c.child}return c;case 26:return t0(o,c),o===null?(m=Ek(c.type,null,c.pendingProps,null))?c.memoizedState=m:Xt||(m=c.type,o=c.pendingProps,g=y0(be.current).createElement(m),g[Wn]=c,g[On]=o,mr(g,m,o),Zt(g),c.stateNode=g):c.memoizedState=Ek(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Ie(c),o===null&&Xt&&(g=c.stateNode=vk(c.type,c.pendingProps,be.current),dr=c,Va=!0,E=Yn,Zl(c.type)?(Xw=E,Yn=Ba(g.firstChild)):Yn=E),hr(o,c,c.pendingProps.children,m),t0(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Xt&&((E=g=Yn)&&(g=kU(g,c.type,c.pendingProps,Va),g!==null?(c.stateNode=g,dr=c,Yn=Ba(g.firstChild),Va=!1,E=!0):E=!1),E||Vl(c)),Ie(c),E=c.type,N=c.pendingProps,V=o!==null?o.memoizedProps:null,g=N.children,Ww(E,N)?g=null:V!==null&&Ww(E,V)&&(c.flags|=32),c.memoizedState!==null&&(E=qv(o,c,HV,null,null,m),Zm._currentValue=E),t0(o,c),hr(o,c,g,m),c.child;case 6:return o===null&&Xt&&((o=m=Yn)&&(m=AU(m,c.pendingProps,Va),m!==null?(c.stateNode=m,dr=c,Yn=null,o=!0):o=!1),o||Vl(c)),null;case 13:return cT(o,c,m);case 4:return Se(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=fd(c,null,g,m):hr(o,c,g,m),c.child;case 11:return eT(o,c,c.type,c.pendingProps,m);case 7:return hr(o,c,c.pendingProps,m),c.child;case 8:return hr(o,c,c.pendingProps.children,m),c.child;case 12:return hr(o,c,c.pendingProps.children,m),c.child;case 10:return g=c.pendingProps,Ul(c,c.type,g.value),hr(o,c,g.children,m),c.child;case 9:return E=c.type._context,g=c.pendingProps.children,dd(c),E=ur(E),g=g(E),c.flags|=1,hr(o,c,g,m),c.child;case 14:return tT(o,c,c.type,c.pendingProps,m);case 15:return nT(o,c,c.type,c.pendingProps,m);case 19:return uT(o,c,m);case 31:return ZV(o,c,m);case 22:return sT(o,c,m,c.pendingProps);case 24:return dd(c),g=ur(Ps),o===null?(E=Lv(),E===null&&(E=Un,N=Pv(),E.pooledCache=N,N.refCount++,N!==null&&(E.pooledCacheLanes|=m),E=N),c.memoizedState={parent:g,cache:E},Ov(c),Ul(c,Ps,E)):((o.lanes&m)!==0&&(Vv(o,c),Dm(c,null,null,m),Rm()),E=o.memoizedState,N=c.memoizedState,E.parent!==g?(E={parent:g,cache:g},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),Ul(c,Ps,g)):(g=N.cache,Ul(c,Ps,g),g!==E.cache&&Dv(c,[Ps],m,!0))),hr(o,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}function Wo(o){o.flags|=4}function bw(o,c,m,g,E){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(E&335544128)===E)if(o.stateNode.complete)o.flags|=8192;else if(UT())o.flags|=8192;else throw md=Bg,Iv}else o.flags&=-16777217}function mT(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Tk(c))if(UT())o.flags|=8192;else throw md=Bg,Iv}function s0(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?vr():536870912,o.lanes|=c,Mu|=c)}function Vm(o,c){if(!Xt)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Gn(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,g=0;if(c)for(var E=o.child;E!==null;)m|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)m|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=g,o.childLanes=m,c}function eU(o,c,m){var g=c.pendingProps;switch(Sv(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(c),null;case 1:return Gn(c),null;case 3:return m=c.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),$o(Ps),Pe(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(wu(c)?Wo(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,kv())),Gn(c),null;case 26:var E=c.type,N=c.memoizedState;return o===null?(Wo(c),N!==null?(Gn(c),mT(c,N)):(Gn(c),bw(c,E,null,g,m))):N?N!==o.memoizedState?(Wo(c),Gn(c),mT(c,N)):(Gn(c),c.flags&=-16777217):(o=o.memoizedProps,o!==g&&Wo(c),Gn(c),bw(c,E,o,g,m)),null;case 27:if(Fe(c),m=be.current,E=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&Wo(c);else{if(!g){if(c.stateNode===null)throw Error(s(166));return Gn(c),null}o=ie.current,wu(c)?WC(c):(o=vk(E,g,m),c.stateNode=o,Wo(c))}return Gn(c),null;case 5:if(Fe(c),E=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&Wo(c);else{if(!g){if(c.stateNode===null)throw Error(s(166));return Gn(c),null}if(N=ie.current,wu(c))WC(c);else{var V=y0(be.current);switch(N){case 1:N=V.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:N=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":N=V.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":N=V.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":N=V.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof g.is=="string"?V.createElement("select",{is:g.is}):V.createElement("select"),g.multiple?N.multiple=!0:g.size&&(N.size=g.size);break;default:N=typeof g.is=="string"?V.createElement(E,{is:g.is}):V.createElement(E)}}N[Wn]=c,N[On]=g;e:for(V=c.child;V!==null;){if(V.tag===5||V.tag===6)N.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===c)break e;for(;V.sibling===null;){if(V.return===null||V.return===c)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}c.stateNode=N;e:switch(mr(N,E,g),E){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Wo(c)}}return Gn(c),bw(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,m),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==g&&Wo(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(s(166));if(o=be.current,wu(c)){if(o=c.stateNode,m=c.memoizedProps,g=null,E=dr,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}o[Wn]=c,o=!!(o.nodeValue===m||g!==null&&g.suppressHydrationWarning===!0||ck(o.nodeValue,m)),o||Vl(c,!0)}else o=y0(o).createTextNode(g),o[Wn]=c,c.stateNode=o}return Gn(c),null;case 31:if(m=c.memoizedState,o===null||o.memoizedState!==null){if(g=wu(c),m!==null){if(o===null){if(!g)throw Error(s(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(557));o[Wn]=c}else ld(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Gn(c),o=!1}else m=kv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),o=!0;if(!o)return c.flags&256?(ya(c),c):(ya(c),null);if((c.flags&128)!==0)throw Error(s(558))}return Gn(c),null;case 13:if(g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=wu(c),g!==null&&g.dehydrated!==null){if(o===null){if(!E)throw Error(s(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(s(317));E[Wn]=c}else ld(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Gn(c),E=!1}else E=kv(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(ya(c),c):(ya(c),null)}return ya(c),(c.flags&128)!==0?(c.lanes=m,c):(m=g!==null,o=o!==null&&o.memoizedState!==null,m&&(g=c.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool),N=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(N=g.memoizedState.cachePool.pool),N!==E&&(g.flags|=2048)),m!==o&&m&&(c.child.flags|=8192),s0(c,c.updateQueue),Gn(c),null);case 4:return Pe(),o===null&&Fw(c.stateNode.containerInfo),Gn(c),null;case 10:return $o(c.type),Gn(c),null;case 19:if(Y(vs),g=c.memoizedState,g===null)return Gn(c),null;if(E=(c.flags&128)!==0,N=g.rendering,N===null)if(E)Vm(g,!1);else{if(hs!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(N=Hg(o),N!==null){for(c.flags|=128,Vm(g,!1),o=N.updateQueue,c.updateQueue=o,s0(c,o),c.subtreeFlags=0,o=m,m=c.child;m!==null;)FC(m,o),m=m.sibling;return X(vs,vs.current&1|2),Xt&&Bo(c,g.treeForkCount),c.child}o=o.sibling}g.tail!==null&&ze()>l0&&(c.flags|=128,E=!0,Vm(g,!1),c.lanes=4194304)}else{if(!E)if(o=Hg(N),o!==null){if(c.flags|=128,E=!0,o=o.updateQueue,c.updateQueue=o,s0(c,o),Vm(g,!0),g.tail===null&&g.tailMode==="hidden"&&!N.alternate&&!Xt)return Gn(c),null}else 2*ze()-g.renderingStartTime>l0&&m!==536870912&&(c.flags|=128,E=!0,Vm(g,!1),c.lanes=4194304);g.isBackwards?(N.sibling=c.child,c.child=N):(o=g.last,o!==null?o.sibling=N:c.child=N,g.last=N)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=ze(),o.sibling=null,m=vs.current,X(vs,E?m&1|2:m&1),Xt&&Bo(c,g.treeForkCount),o):(Gn(c),null);case 22:case 23:return ya(c),$v(),g=c.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(m&536870912)!==0&&(c.flags&128)===0&&(Gn(c),c.subtreeFlags&6&&(c.flags|=8192)):Gn(c),m=c.updateQueue,m!==null&&s0(c,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048),o!==null&&Y(ud),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),$o(Ps),Gn(c),null;case 25:return null;case 30:return null}throw Error(s(156,c.tag))}function tU(o,c){switch(Sv(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return $o(Ps),Pe(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Fe(c),null;case 31:if(c.memoizedState!==null){if(ya(c),c.alternate===null)throw Error(s(340));ld()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if(ya(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));ld()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Y(vs),null;case 4:return Pe(),null;case 10:return $o(c.type),null;case 22:case 23:return ya(c),$v(),o!==null&&Y(ud),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return $o(Ps),null;case 25:return null;default:return null}}function fT(o,c){switch(Sv(c),c.tag){case 3:$o(Ps),Pe();break;case 26:case 27:case 5:Fe(c);break;case 4:Pe();break;case 31:c.memoizedState!==null&&ya(c);break;case 13:ya(c);break;case 19:Y(vs);break;case 10:$o(c.type);break;case 22:case 23:ya(c),$v(),o!==null&&Y(ud);break;case 24:$o(Ps)}}function Um(o,c){try{var m=c.updateQueue,g=m!==null?m.lastEffect:null;if(g!==null){var E=g.next;m=E;do{if((m.tag&o)===o){g=void 0;var N=m.create,V=m.inst;g=N(),V.destroy=g}m=m.next}while(m!==E)}}catch(W){jn(c,c.return,W)}}function ql(o,c,m){try{var g=c.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var N=E.next;g=N;do{if((g.tag&o)===o){var V=g.inst,W=V.destroy;if(W!==void 0){V.destroy=void 0,E=c;var ne=m,de=W;try{de()}catch(ge){jn(E,ne,ge)}}}g=g.next}while(g!==N)}}catch(ge){jn(c,c.return,ge)}}function pT(o){var c=o.updateQueue;if(c!==null){var m=o.stateNode;try{aS(c,m)}catch(g){jn(o,o.return,g)}}}function gT(o,c,m){m.props=gd(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(g){jn(o,c,g)}}function Bm(o,c){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof m=="function"?o.refCleanup=m(g):m.current=g}}catch(E){jn(o,c,E)}}function Hi(o,c){var m=o.ref,g=o.refCleanup;if(m!==null)if(typeof g=="function")try{g()}catch(E){jn(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){jn(o,c,E)}else m.current=null}function xT(o){var c=o.type,m=o.memoizedProps,g=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&g.focus();break e;case"img":m.src?g.src=m.src:m.srcSet&&(g.srcset=m.srcSet)}}catch(E){jn(o,o.return,E)}}function vw(o,c,m){try{var g=o.stateNode;EU(g,o.type,m,c),g[On]=c}catch(E){jn(o,o.return,E)}}function yT(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Zl(o.type)||o.tag===4}function ww(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||yT(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Zl(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function _w(o,c,m){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(o),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=ss));else if(g!==4&&(g===27&&Zl(o.type)&&(m=o.stateNode,c=null),o=o.child,o!==null))for(_w(o,c,m),o=o.sibling;o!==null;)_w(o,c,m),o=o.sibling}function r0(o,c,m){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(g!==4&&(g===27&&Zl(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(r0(o,c,m),o=o.sibling;o!==null;)r0(o,c,m),o=o.sibling}function bT(o){var c=o.stateNode,m=o.memoizedProps;try{for(var g=o.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);mr(c,g,m),c[Wn]=o,c[On]=m}catch(N){jn(o,o.return,N)}}var Yo=!1,Is=!1,Ew=!1,vT=typeof WeakSet=="function"?WeakSet:Set,Js=null;function nU(o,c){if(o=o.containerInfo,Hw=j0,o=DC(o),gv(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var E=g.anchorOffset,N=g.focusNode;g=g.focusOffset;try{m.nodeType,N.nodeType}catch{m=null;break e}var V=0,W=-1,ne=-1,de=0,ge=0,Ne=o,ue=null;t:for(;;){for(var fe;Ne!==m||E!==0&&Ne.nodeType!==3||(W=V+E),Ne!==N||g!==0&&Ne.nodeType!==3||(ne=V+g),Ne.nodeType===3&&(V+=Ne.nodeValue.length),(fe=Ne.firstChild)!==null;)ue=Ne,Ne=fe;for(;;){if(Ne===o)break t;if(ue===m&&++de===E&&(W=V),ue===N&&++ge===g&&(ne=V),(fe=Ne.nextSibling)!==null)break;Ne=ue,ue=Ne.parentNode}Ne=fe}m=W===-1||ne===-1?null:{start:W,end:ne}}else m=null}m=m||{start:0,end:0}}else m=null;for(qw={focusedElem:o,selectionRange:m},j0=!1,Js=c;Js!==null;)if(c=Js,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Js=o;else for(;Js!==null;){switch(c=Js,N=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(m=0;m<o.length;m++)E=o[m],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,m=c,E=N.memoizedProps,N=N.memoizedState,g=m.stateNode;try{var Ye=gd(m.type,E);o=g.getSnapshotBeforeUpdate(Ye,N),g.__reactInternalSnapshotBeforeUpdate=o}catch(it){jn(m,m.return,it)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,m=o.nodeType,m===9)Gw(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Gw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(s(163))}if(o=c.sibling,o!==null){o.return=c.return,Js=o;break}Js=c.return}}function wT(o,c,m){var g=m.flags;switch(m.tag){case 0:case 11:case 15:Ko(o,m),g&4&&Um(5,m);break;case 1:if(Ko(o,m),g&4)if(o=m.stateNode,c===null)try{o.componentDidMount()}catch(V){jn(m,m.return,V)}else{var E=gd(m.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(V){jn(m,m.return,V)}}g&64&&pT(m),g&512&&Bm(m,m.return);break;case 3:if(Ko(o,m),g&64&&(o=m.updateQueue,o!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{aS(o,c)}catch(V){jn(m,m.return,V)}}break;case 27:c===null&&g&4&&bT(m);case 26:case 5:Ko(o,m),c===null&&g&4&&xT(m),g&512&&Bm(m,m.return);break;case 12:Ko(o,m);break;case 31:Ko(o,m),g&4&&NT(o,m);break;case 13:Ko(o,m),g&4&&jT(o,m),g&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=uU.bind(null,m),RU(o,m))));break;case 22:if(g=m.memoizedState!==null||Yo,!g){c=c!==null&&c.memoizedState!==null||Is,E=Yo;var N=Is;Yo=g,(Is=c)&&!N?Qo(o,m,(m.subtreeFlags&8772)!==0):Ko(o,m),Yo=E,Is=N}break;case 30:break;default:Ko(o,m)}}function _T(o){var c=o.alternate;c!==null&&(o.alternate=null,_T(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&Di(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var es=null,Zr=!1;function Go(o,c,m){for(m=m.child;m!==null;)ET(o,c,m),m=m.sibling}function ET(o,c,m){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(vn,m)}catch{}switch(m.tag){case 26:Is||Hi(m,c),Go(o,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Is||Hi(m,c);var g=es,E=Zr;Zl(m.type)&&(es=m.stateNode,Zr=!1),Go(o,c,m),Km(m.stateNode),es=g,Zr=E;break;case 5:Is||Hi(m,c);case 6:if(g=es,E=Zr,es=null,Go(o,c,m),es=g,Zr=E,es!==null)if(Zr)try{(es.nodeType===9?es.body:es.nodeName==="HTML"?es.ownerDocument.body:es).removeChild(m.stateNode)}catch(N){jn(m,c,N)}else try{es.removeChild(m.stateNode)}catch(N){jn(m,c,N)}break;case 18:es!==null&&(Zr?(o=es,pk(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),$u(o)):pk(es,m.stateNode));break;case 4:g=es,E=Zr,es=m.stateNode.containerInfo,Zr=!0,Go(o,c,m),es=g,Zr=E;break;case 0:case 11:case 14:case 15:ql(2,m,c),Is||ql(4,m,c),Go(o,c,m);break;case 1:Is||(Hi(m,c),g=m.stateNode,typeof g.componentWillUnmount=="function"&&gT(m,c,g)),Go(o,c,m);break;case 21:Go(o,c,m);break;case 22:Is=(g=Is)||m.memoizedState!==null,Go(o,c,m),Is=g;break;default:Go(o,c,m)}}function NT(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{$u(o)}catch(m){jn(c,c.return,m)}}}function jT(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{$u(o)}catch(m){jn(c,c.return,m)}}function sU(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new vT),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new vT),c;default:throw Error(s(435,o.tag))}}function a0(o,c){var m=sU(o);c.forEach(function(g){if(!m.has(g)){m.add(g);var E=hU.bind(null,o,g);g.then(E,E)}})}function Jr(o,c){var m=c.deletions;if(m!==null)for(var g=0;g<m.length;g++){var E=m[g],N=o,V=c,W=V;e:for(;W!==null;){switch(W.tag){case 27:if(Zl(W.type)){es=W.stateNode,Zr=!1;break e}break;case 5:es=W.stateNode,Zr=!1;break e;case 3:case 4:es=W.stateNode.containerInfo,Zr=!0;break e}W=W.return}if(es===null)throw Error(s(160));ET(N,V,E),es=null,Zr=!1,N=E.alternate,N!==null&&(N.return=null),E.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)CT(c,o),c=c.sibling}var hi=null;function CT(o,c){var m=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Jr(c,o),ea(o),g&4&&(ql(3,o,o.return),Um(3,o),ql(5,o,o.return));break;case 1:Jr(c,o),ea(o),g&512&&(Is||m===null||Hi(m,m.return)),g&64&&Yo&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?g:m.concat(g))));break;case 26:var E=hi;if(Jr(c,o),ea(o),g&512&&(Is||m===null||Hi(m,m.return)),g&4){var N=m!==null?m.memoizedState:null;if(g=o.memoizedState,m===null)if(g===null)if(o.stateNode===null){e:{g=o.type,m=o.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":N=E.getElementsByTagName("title")[0],(!N||N[Qr]||N[Wn]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=E.createElement(g),E.head.insertBefore(N,E.querySelector("head > title"))),mr(N,g,m),N[Wn]=o,Zt(N),g=N;break e;case"link":var V=Ck("link","href",E).get(g+(m.href||""));if(V){for(var W=0;W<V.length;W++)if(N=V[W],N.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&N.getAttribute("rel")===(m.rel==null?null:m.rel)&&N.getAttribute("title")===(m.title==null?null:m.title)&&N.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){V.splice(W,1);break t}}N=E.createElement(g),mr(N,g,m),E.head.appendChild(N);break;case"meta":if(V=Ck("meta","content",E).get(g+(m.content||""))){for(W=0;W<V.length;W++)if(N=V[W],N.getAttribute("content")===(m.content==null?null:""+m.content)&&N.getAttribute("name")===(m.name==null?null:m.name)&&N.getAttribute("property")===(m.property==null?null:m.property)&&N.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&N.getAttribute("charset")===(m.charSet==null?null:m.charSet)){V.splice(W,1);break t}}N=E.createElement(g),mr(N,g,m),E.head.appendChild(N);break;default:throw Error(s(468,g))}N[Wn]=o,Zt(N),g=N}o.stateNode=g}else Sk(E,o.type,o.stateNode);else o.stateNode=jk(E,g,o.memoizedProps);else N!==g?(N===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):N.count--,g===null?Sk(E,o.type,o.stateNode):jk(E,g,o.memoizedProps)):g===null&&o.stateNode!==null&&vw(o,o.memoizedProps,m.memoizedProps)}break;case 27:Jr(c,o),ea(o),g&512&&(Is||m===null||Hi(m,m.return)),m!==null&&g&4&&vw(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Jr(c,o),ea(o),g&512&&(Is||m===null||Hi(m,m.return)),o.flags&32){E=o.stateNode;try{ds(E,"")}catch(Ye){jn(o,o.return,Ye)}}g&4&&o.stateNode!=null&&(E=o.memoizedProps,vw(o,E,m!==null?m.memoizedProps:E)),g&1024&&(Ew=!0);break;case 6:if(Jr(c,o),ea(o),g&4){if(o.stateNode===null)throw Error(s(162));g=o.memoizedProps,m=o.stateNode;try{m.nodeValue=g}catch(Ye){jn(o,o.return,Ye)}}break;case 3:if(w0=null,E=hi,hi=b0(c.containerInfo),Jr(c,o),hi=E,ea(o),g&4&&m!==null&&m.memoizedState.isDehydrated)try{$u(c.containerInfo)}catch(Ye){jn(o,o.return,Ye)}Ew&&(Ew=!1,ST(o));break;case 4:g=hi,hi=b0(o.stateNode.containerInfo),Jr(c,o),ea(o),hi=g;break;case 12:Jr(c,o),ea(o);break;case 31:Jr(c,o),ea(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,a0(o,g)));break;case 13:Jr(c,o),ea(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(o0=ze()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,a0(o,g)));break;case 22:E=o.memoizedState!==null;var ne=m!==null&&m.memoizedState!==null,de=Yo,ge=Is;if(Yo=de||E,Is=ge||ne,Jr(c,o),Is=ge,Yo=de,ea(o),g&8192)e:for(c=o.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(m===null||ne||Yo||Is||xd(o)),m=null,c=o;;){if(c.tag===5||c.tag===26){if(m===null){ne=m=c;try{if(N=ne.stateNode,E)V=N.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{W=ne.stateNode;var Ne=ne.memoizedProps.style,ue=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null;W.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ye){jn(ne,ne.return,Ye)}}}else if(c.tag===6){if(m===null){ne=c;try{ne.stateNode.nodeValue=E?"":ne.memoizedProps}catch(Ye){jn(ne,ne.return,Ye)}}}else if(c.tag===18){if(m===null){ne=c;try{var fe=ne.stateNode;E?gk(fe,!0):gk(ne.stateNode,!1)}catch(Ye){jn(ne,ne.return,Ye)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=o.updateQueue,g!==null&&(m=g.retryQueue,m!==null&&(g.retryQueue=null,a0(o,m))));break;case 19:Jr(c,o),ea(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,a0(o,g)));break;case 30:break;case 21:break;default:Jr(c,o),ea(o)}}function ea(o){var c=o.flags;if(c&2){try{for(var m,g=o.return;g!==null;){if(yT(g)){m=g;break}g=g.return}if(m==null)throw Error(s(160));switch(m.tag){case 27:var E=m.stateNode,N=ww(o);r0(o,N,E);break;case 5:var V=m.stateNode;m.flags&32&&(ds(V,""),m.flags&=-33);var W=ww(o);r0(o,W,V);break;case 3:case 4:var ne=m.stateNode.containerInfo,de=ww(o);_w(o,de,ne);break;default:throw Error(s(161))}}catch(ge){jn(o,o.return,ge)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function ST(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;ST(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function Ko(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)wT(o,c.alternate,c),c=c.sibling}function xd(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:ql(4,c,c.return),xd(c);break;case 1:Hi(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&gT(c,c.return,m),xd(c);break;case 27:Km(c.stateNode);case 26:case 5:Hi(c,c.return),xd(c);break;case 22:c.memoizedState===null&&xd(c);break;case 30:xd(c);break;default:xd(c)}o=o.sibling}}function Qo(o,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,E=o,N=c,V=N.flags;switch(N.tag){case 0:case 11:case 15:Qo(E,N,m),Um(4,N);break;case 1:if(Qo(E,N,m),g=N,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(de){jn(g,g.return,de)}if(g=N,E=g.updateQueue,E!==null){var W=g.stateNode;try{var ne=E.shared.hiddenCallbacks;if(ne!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ne.length;E++)rS(ne[E],W)}catch(de){jn(g,g.return,de)}}m&&V&64&&pT(N),Bm(N,N.return);break;case 27:bT(N);case 26:case 5:Qo(E,N,m),m&&g===null&&V&4&&xT(N),Bm(N,N.return);break;case 12:Qo(E,N,m);break;case 31:Qo(E,N,m),m&&V&4&&NT(E,N);break;case 13:Qo(E,N,m),m&&V&4&&jT(E,N);break;case 22:N.memoizedState===null&&Qo(E,N,m),Bm(N,N.return);break;case 30:break;default:Qo(E,N,m)}c=c.sibling}}function Nw(o,c){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&Cm(m))}function jw(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Cm(o))}function mi(o,c,m,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)TT(o,c,m,g),c=c.sibling}function TT(o,c,m,g){var E=c.flags;switch(c.tag){case 0:case 11:case 15:mi(o,c,m,g),E&2048&&Um(9,c);break;case 1:mi(o,c,m,g);break;case 3:mi(o,c,m,g),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Cm(o)));break;case 12:if(E&2048){mi(o,c,m,g),o=c.stateNode;try{var N=c.memoizedProps,V=N.id,W=N.onPostCommit;typeof W=="function"&&W(V,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ne){jn(c,c.return,ne)}}else mi(o,c,m,g);break;case 31:mi(o,c,m,g);break;case 13:mi(o,c,m,g);break;case 23:break;case 22:N=c.stateNode,V=c.alternate,c.memoizedState!==null?N._visibility&2?mi(o,c,m,g):Fm(o,c):N._visibility&2?mi(o,c,m,g):(N._visibility|=2,Ru(o,c,m,g,(c.subtreeFlags&10256)!==0||!1)),E&2048&&Nw(V,c);break;case 24:mi(o,c,m,g),E&2048&&jw(c.alternate,c);break;default:mi(o,c,m,g)}}function Ru(o,c,m,g,E){for(E=E&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var N=o,V=c,W=m,ne=g,de=V.flags;switch(V.tag){case 0:case 11:case 15:Ru(N,V,W,ne,E),Um(8,V);break;case 23:break;case 22:var ge=V.stateNode;V.memoizedState!==null?ge._visibility&2?Ru(N,V,W,ne,E):Fm(N,V):(ge._visibility|=2,Ru(N,V,W,ne,E)),E&&de&2048&&Nw(V.alternate,V);break;case 24:Ru(N,V,W,ne,E),E&&de&2048&&jw(V.alternate,V);break;default:Ru(N,V,W,ne,E)}c=c.sibling}}function Fm(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=o,g=c,E=g.flags;switch(g.tag){case 22:Fm(m,g),E&2048&&Nw(g.alternate,g);break;case 24:Fm(m,g),E&2048&&jw(g.alternate,g);break;default:Fm(m,g)}c=c.sibling}}var $m=8192;function Du(o,c,m){if(o.subtreeFlags&$m)for(o=o.child;o!==null;)kT(o,c,m),o=o.sibling}function kT(o,c,m){switch(o.tag){case 26:Du(o,c,m),o.flags&$m&&o.memoizedState!==null&&zU(m,hi,o.memoizedState,o.memoizedProps);break;case 5:Du(o,c,m);break;case 3:case 4:var g=hi;hi=b0(o.stateNode.containerInfo),Du(o,c,m),hi=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=$m,$m=16777216,Du(o,c,m),$m=g):Du(o,c,m));break;default:Du(o,c,m)}}function AT(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function zm(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var g=c[m];Js=g,DT(g,o)}AT(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)RT(o),o=o.sibling}function RT(o){switch(o.tag){case 0:case 11:case 15:zm(o),o.flags&2048&&ql(9,o,o.return);break;case 3:zm(o);break;case 12:zm(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,i0(o)):zm(o);break;default:zm(o)}}function i0(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var g=c[m];Js=g,DT(g,o)}AT(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:ql(8,c,c.return),i0(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,i0(c));break;default:i0(c)}o=o.sibling}}function DT(o,c){for(;Js!==null;){var m=Js;switch(m.tag){case 0:case 11:case 15:ql(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var g=m.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Cm(m.memoizedState.cache)}if(g=m.child,g!==null)g.return=m,Js=g;else e:for(m=o;Js!==null;){g=Js;var E=g.sibling,N=g.return;if(_T(g),g===m){Js=null;break e}if(E!==null){E.return=N,Js=E;break e}Js=N}}}var rU={getCacheForType:function(o){var c=ur(Ps),m=c.data.get(o);return m===void 0&&(m=o(),c.data.set(o,m)),m},cacheSignal:function(){return ur(Ps).controller.signal}},aU=typeof WeakMap=="function"?WeakMap:Map,gn=0,Un=null,Ut=null,Wt=0,Nn=0,ba=null,Wl=!1,Pu=!1,Cw=!1,Xo=0,hs=0,Yl=0,yd=0,Sw=0,va=0,Mu=0,Hm=null,ta=null,Tw=!1,o0=0,PT=0,l0=1/0,c0=null,Gl=null,Hs=0,Kl=null,Lu=null,Zo=0,kw=0,Aw=null,MT=null,qm=0,Rw=null;function wa(){return(gn&2)!==0&&Wt!==0?Wt&-Wt:B.T!==null?Ow():Ao()}function LT(){if(va===0)if((Wt&536870912)===0||Xt){var o=Ir;Ir<<=1,(Ir&3932160)===0&&(Ir=262144),va=o}else va=536870912;return o=xa.current,o!==null&&(o.flags|=32),va}function na(o,c,m){(o===Un&&(Nn===2||Nn===9)||o.cancelPendingCommit!==null)&&(Iu(o,0),Ql(o,Wt,va,!1)),zs(o,m),((gn&2)===0||o!==Un)&&(o===Un&&((gn&2)===0&&(yd|=m),hs===4&&Ql(o,Wt,va,!1)),qi(o))}function IT(o,c,m){if((gn&6)!==0)throw Error(s(327));var g=!m&&(c&127)===0&&(c&o.expiredLanes)===0||ls(o,c),E=g?lU(o,c):Pw(o,c,!0),N=g;do{if(E===0){Pu&&!g&&Ql(o,c,0,!1);break}else{if(m=o.current.alternate,N&&!iU(m)){E=Pw(o,c,!1),N=!1;continue}if(E===2){if(N=c,o.errorRecoveryDisabledLanes&N)var V=0;else V=o.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){c=V;e:{var W=o;E=Hm;var ne=W.current.memoizedState.isDehydrated;if(ne&&(Iu(W,V).flags|=256),V=Pw(W,V,!1),V!==2){if(Cw&&!ne){W.errorRecoveryDisabledLanes|=N,yd|=N,E=4;break e}N=ta,ta=E,N!==null&&(ta===null?ta=N:ta.push.apply(ta,N))}E=V}if(N=!1,E!==2)continue}}if(E===1){Iu(o,0),Ql(o,c,0,!0);break}e:{switch(g=o,N=E,N){case 0:case 1:throw Error(s(345));case 4:if((c&4194048)!==c)break;case 6:Ql(g,c,va,!Wl);break e;case 2:ta=null;break;case 3:case 5:break;default:throw Error(s(329))}if((c&62914560)===c&&(E=o0+300-ze(),10<E)){if(Ql(g,c,va,!Wl),ar(g,0,!0)!==0)break e;Zo=c,g.timeoutHandle=mk(OT.bind(null,g,m,ta,c0,Tw,c,va,yd,Mu,Wl,N,"Throttled",-0,0),E);break e}OT(g,m,ta,c0,Tw,c,va,yd,Mu,Wl,N,null,-0,0)}}break}while(!0);qi(o)}function OT(o,c,m,g,E,N,V,W,ne,de,ge,Ne,ue,fe){if(o.timeoutHandle=-1,Ne=c.subtreeFlags,Ne&8192||(Ne&16785408)===16785408){Ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},kT(c,N,Ne);var Ye=(N&62914560)===N?o0-ze():(N&4194048)===N?PT-ze():0;if(Ye=HU(Ne,Ye),Ye!==null){Zo=N,o.cancelPendingCommit=Ye(qT.bind(null,o,c,N,m,g,E,V,W,ne,ge,Ne,null,ue,fe)),Ql(o,N,V,!de);return}}qT(o,c,N,m,g,E,V,W,ne)}function iU(o){for(var c=o;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var g=0;g<m.length;g++){var E=m[g],N=E.getSnapshot;E=E.value;try{if(!pa(N(),E))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ql(o,c,m,g){c&=~Sw,c&=~yd,o.suspendedLanes|=c,o.pingedLanes&=~c,g&&(o.warmLanes|=c),g=o.expirationTimes;for(var E=c;0<E;){var N=31-An(E),V=1<<N;g[N]=-1,E&=~V}m!==0&&Je(o,m,c)}function d0(){return(gn&6)===0?(Wm(0),!1):!0}function Dw(){if(Ut!==null){if(Nn===0)var o=Ut.return;else o=Ut,Fo=cd=null,Gv(o),Cu=null,Tm=0,o=Ut;for(;o!==null;)fT(o.alternate,o),o=o.return;Ut=null}}function Iu(o,c){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,CU(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),Zo=0,Dw(),Un=o,Ut=m=Uo(o.current,null),Wt=c,Nn=0,ba=null,Wl=!1,Pu=ls(o,c),Cw=!1,Mu=va=Sw=yd=Yl=hs=0,ta=Hm=null,Tw=!1,(c&8)!==0&&(c|=c&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=c;0<g;){var E=31-An(g),N=1<<E;c|=o[E],g&=~N}return Xo=c,Rg(),m}function VT(o,c){Nt=null,B.H=Im,c===ju||c===Ug?(c=eS(),Nn=3):c===Iv?(c=eS(),Nn=4):Nn=c===dw?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ba=c,Ut===null&&(hs=1,Jg(o,La(c,o.current)))}function UT(){var o=xa.current;return o===null?!0:(Wt&4194048)===Wt?Ua===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?o===Ua:!1}function BT(){var o=B.H;return B.H=Im,o===null?Im:o}function FT(){var o=B.A;return B.A=rU,o}function u0(){hs=4,Wl||(Wt&4194048)!==Wt&&xa.current!==null||(Pu=!0),(Yl&134217727)===0&&(yd&134217727)===0||Un===null||Ql(Un,Wt,va,!1)}function Pw(o,c,m){var g=gn;gn|=2;var E=BT(),N=FT();(Un!==o||Wt!==c)&&(c0=null,Iu(o,c)),c=!1;var V=hs;e:do try{if(Nn!==0&&Ut!==null){var W=Ut,ne=ba;switch(Nn){case 8:Dw(),V=6;break e;case 3:case 2:case 9:case 6:xa.current===null&&(c=!0);var de=Nn;if(Nn=0,ba=null,Ou(o,W,ne,de),m&&Pu){V=0;break e}break;default:de=Nn,Nn=0,ba=null,Ou(o,W,ne,de)}}oU(),V=hs;break}catch(ge){VT(o,ge)}while(!0);return c&&o.shellSuspendCounter++,Fo=cd=null,gn=g,B.H=E,B.A=N,Ut===null&&(Un=null,Wt=0,Rg()),V}function oU(){for(;Ut!==null;)$T(Ut)}function lU(o,c){var m=gn;gn|=2;var g=BT(),E=FT();Un!==o||Wt!==c?(c0=null,l0=ze()+500,Iu(o,c)):Pu=ls(o,c);e:do try{if(Nn!==0&&Ut!==null){c=Ut;var N=ba;t:switch(Nn){case 1:Nn=0,ba=null,Ou(o,c,N,1);break;case 2:case 9:if(ZC(N)){Nn=0,ba=null,zT(c);break}c=function(){Nn!==2&&Nn!==9||Un!==o||(Nn=7),qi(o)},N.then(c,c);break e;case 3:Nn=7;break e;case 4:Nn=5;break e;case 7:ZC(N)?(Nn=0,ba=null,zT(c)):(Nn=0,ba=null,Ou(o,c,N,7));break;case 5:var V=null;switch(Ut.tag){case 26:V=Ut.memoizedState;case 5:case 27:var W=Ut;if(V?Tk(V):W.stateNode.complete){Nn=0,ba=null;var ne=W.sibling;if(ne!==null)Ut=ne;else{var de=W.return;de!==null?(Ut=de,h0(de)):Ut=null}break t}}Nn=0,ba=null,Ou(o,c,N,5);break;case 6:Nn=0,ba=null,Ou(o,c,N,6);break;case 8:Dw(),hs=6;break e;default:throw Error(s(462))}}cU();break}catch(ge){VT(o,ge)}while(!0);return Fo=cd=null,B.H=g,B.A=E,gn=m,Ut!==null?0:(Un=null,Wt=0,Rg(),hs)}function cU(){for(;Ut!==null&&!Ee();)$T(Ut)}function $T(o){var c=hT(o.alternate,o,Xo);o.memoizedProps=o.pendingProps,c===null?h0(o):Ut=c}function zT(o){var c=o,m=c.alternate;switch(c.tag){case 15:case 0:c=iT(m,c,c.pendingProps,c.type,void 0,Wt);break;case 11:c=iT(m,c,c.pendingProps,c.type.render,c.ref,Wt);break;case 5:Gv(c);default:fT(m,c),c=Ut=FC(c,Xo),c=hT(m,c,Xo)}o.memoizedProps=o.pendingProps,c===null?h0(o):Ut=c}function Ou(o,c,m,g){Fo=cd=null,Gv(c),Cu=null,Tm=0;var E=c.return;try{if(XV(o,E,c,m,Wt)){hs=1,Jg(o,La(m,o.current)),Ut=null;return}}catch(N){if(E!==null)throw Ut=E,N;hs=1,Jg(o,La(m,o.current)),Ut=null;return}c.flags&32768?(Xt||g===1?o=!0:Pu||(Wt&536870912)!==0?o=!1:(Wl=o=!0,(g===2||g===9||g===3||g===6)&&(g=xa.current,g!==null&&g.tag===13&&(g.flags|=16384))),HT(c,o)):h0(c)}function h0(o){var c=o;do{if((c.flags&32768)!==0){HT(c,Wl);return}o=c.return;var m=eU(c.alternate,c,Xo);if(m!==null){Ut=m;return}if(c=c.sibling,c!==null){Ut=c;return}Ut=c=o}while(c!==null);hs===0&&(hs=5)}function HT(o,c){do{var m=tU(o.alternate,o);if(m!==null){m.flags&=32767,Ut=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(o=o.sibling,o!==null)){Ut=o;return}Ut=o=m}while(o!==null);hs=6,Ut=null}function qT(o,c,m,g,E,N,V,W,ne){o.cancelPendingCommit=null;do m0();while(Hs!==0);if((gn&6)!==0)throw Error(s(327));if(c!==null){if(c===o.current)throw Error(s(177));if(N=c.lanes|c.childLanes,N|=wv,Qs(o,m,N,V,W,ne),o===Un&&(Ut=Un=null,Wt=0),Lu=c,Kl=o,Zo=m,kw=N,Aw=E,MT=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,mU(Ht,function(){return QT(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=B.T,B.T=null,E=z.p,z.p=2,V=gn,gn|=4;try{nU(o,c,m)}finally{gn=V,z.p=E,B.T=g}}Hs=1,WT(),YT(),GT()}}function WT(){if(Hs===1){Hs=0;var o=Kl,c=Lu,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=B.T,B.T=null;var g=z.p;z.p=2;var E=gn;gn|=4;try{CT(c,o);var N=qw,V=DC(o.containerInfo),W=N.focusedElem,ne=N.selectionRange;if(V!==W&&W&&W.ownerDocument&&RC(W.ownerDocument.documentElement,W)){if(ne!==null&&gv(W)){var de=ne.start,ge=ne.end;if(ge===void 0&&(ge=de),"selectionStart"in W)W.selectionStart=de,W.selectionEnd=Math.min(ge,W.value.length);else{var Ne=W.ownerDocument||document,ue=Ne&&Ne.defaultView||window;if(ue.getSelection){var fe=ue.getSelection(),Ye=W.textContent.length,it=Math.min(ne.start,Ye),Mn=ne.end===void 0?it:Math.min(ne.end,Ye);!fe.extend&&it>Mn&&(V=Mn,Mn=it,it=V);var re=AC(W,it),se=AC(W,Mn);if(re&&se&&(fe.rangeCount!==1||fe.anchorNode!==re.node||fe.anchorOffset!==re.offset||fe.focusNode!==se.node||fe.focusOffset!==se.offset)){var ce=Ne.createRange();ce.setStart(re.node,re.offset),fe.removeAllRanges(),it>Mn?(fe.addRange(ce),fe.extend(se.node,se.offset)):(ce.setEnd(se.node,se.offset),fe.addRange(ce))}}}}for(Ne=[],fe=W;fe=fe.parentNode;)fe.nodeType===1&&Ne.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<Ne.length;W++){var we=Ne[W];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}j0=!!Hw,qw=Hw=null}finally{gn=E,z.p=g,B.T=m}}o.current=c,Hs=2}}function YT(){if(Hs===2){Hs=0;var o=Kl,c=Lu,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=B.T,B.T=null;var g=z.p;z.p=2;var E=gn;gn|=4;try{wT(o,c.alternate,c)}finally{gn=E,z.p=g,B.T=m}}Hs=3}}function GT(){if(Hs===4||Hs===3){Hs=0,Te();var o=Kl,c=Lu,m=Zo,g=MT;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Hs=5:(Hs=0,Lu=Kl=null,KT(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Gl=null),Kr(m),c=c.stateNode,Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(vn,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=B.T,E=z.p,z.p=2,B.T=null;try{for(var N=o.onRecoverableError,V=0;V<g.length;V++){var W=g[V];N(W.value,{componentStack:W.stack})}}finally{B.T=c,z.p=E}}(Zo&3)!==0&&m0(),qi(o),E=o.pendingLanes,(m&261930)!==0&&(E&42)!==0?o===Rw?qm++:(qm=0,Rw=o):qm=0,Wm(0)}}function KT(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Cm(c)))}function m0(){return WT(),YT(),GT(),QT()}function QT(){if(Hs!==5)return!1;var o=Kl,c=kw;kw=0;var m=Kr(Zo),g=B.T,E=z.p;try{z.p=32>m?32:m,B.T=null,m=Aw,Aw=null;var N=Kl,V=Zo;if(Hs=0,Lu=Kl=null,Zo=0,(gn&6)!==0)throw Error(s(331));var W=gn;if(gn|=4,RT(N.current),TT(N,N.current,V,m),gn=W,Wm(0,!1),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(vn,N)}catch{}return!0}finally{z.p=E,B.T=g,KT(o,c)}}function XT(o,c,m){c=La(m,c),c=cw(o.stateNode,c,2),o=$l(o,c,2),o!==null&&(zs(o,2),qi(o))}function jn(o,c,m){if(o.tag===3)XT(o,o,m);else for(;c!==null;){if(c.tag===3){XT(c,o,m);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Gl===null||!Gl.has(g))){o=La(m,o),m=ZS(2),g=$l(c,m,2),g!==null&&(JS(m,g,c,o),zs(g,2),qi(g));break}}c=c.return}}function Mw(o,c,m){var g=o.pingCache;if(g===null){g=o.pingCache=new aU;var E=new Set;g.set(c,E)}else E=g.get(c),E===void 0&&(E=new Set,g.set(c,E));E.has(m)||(Cw=!0,E.add(m),o=dU.bind(null,o,c,m),c.then(o,o))}function dU(o,c,m){var g=o.pingCache;g!==null&&g.delete(c),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,Un===o&&(Wt&m)===m&&(hs===4||hs===3&&(Wt&62914560)===Wt&&300>ze()-o0?(gn&2)===0&&Iu(o,0):Sw|=m,Mu===Wt&&(Mu=0)),qi(o)}function ZT(o,c){c===0&&(c=vr()),o=id(o,c),o!==null&&(zs(o,c),qi(o))}function uU(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),ZT(o,m)}function hU(o,c){var m=0;switch(o.tag){case 31:case 13:var g=o.stateNode,E=o.memoizedState;E!==null&&(m=E.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(c),ZT(o,m)}function mU(o,c){return oe(o,c)}var f0=null,Vu=null,Lw=!1,p0=!1,Iw=!1,Xl=0;function qi(o){o!==Vu&&o.next===null&&(Vu===null?f0=Vu=o:Vu=Vu.next=o),p0=!0,Lw||(Lw=!0,pU())}function Wm(o,c){if(!Iw&&p0){Iw=!0;do for(var m=!1,g=f0;g!==null;){if(o!==0){var E=g.pendingLanes;if(E===0)var N=0;else{var V=g.suspendedLanes,W=g.pingedLanes;N=(1<<31-An(42|o)+1)-1,N&=E&~(V&~W),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(m=!0,nk(g,N))}else N=Wt,N=ar(g,g===Un?N:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(N&3)===0||ls(g,N)||(m=!0,nk(g,N));g=g.next}while(m);Iw=!1}}function fU(){JT()}function JT(){p0=Lw=!1;var o=0;Xl!==0&&jU()&&(o=Xl);for(var c=ze(),m=null,g=f0;g!==null;){var E=g.next,N=ek(g,c);N===0?(g.next=null,m===null?f0=E:m.next=E,E===null&&(Vu=m)):(m=g,(o!==0||(N&3)!==0)&&(p0=!0)),g=E}Hs!==0&&Hs!==5||Wm(o),Xl!==0&&(Xl=0)}function ek(o,c){for(var m=o.suspendedLanes,g=o.pingedLanes,E=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var V=31-An(N),W=1<<V,ne=E[V];ne===-1?((W&m)===0||(W&g)!==0)&&(E[V]=Aa(W,c)):ne<=c&&(o.expiredLanes|=W),N&=~W}if(c=Un,m=Wt,m=ar(o,o===c?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,m===0||o===c&&(Nn===2||Nn===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&ae(g),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||ls(o,m)){if(c=m&-m,c===o.callbackPriority)return c;switch(g!==null&&ae(g),Kr(m)){case 2:case 8:m=At;break;case 32:m=Ht;break;case 268435456:m=Ot;break;default:m=Ht}return g=tk.bind(null,o),m=oe(m,g),o.callbackPriority=c,o.callbackNode=m,c}return g!==null&&g!==null&&ae(g),o.callbackPriority=2,o.callbackNode=null,2}function tk(o,c){if(Hs!==0&&Hs!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(m0()&&o.callbackNode!==m)return null;var g=Wt;return g=ar(o,o===Un?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(IT(o,g,c),ek(o,ze()),o.callbackNode!=null&&o.callbackNode===m?tk.bind(null,o):null)}function nk(o,c){if(m0())return null;IT(o,c,!0)}function pU(){SU(function(){(gn&6)!==0?oe(lt,fU):JT()})}function Ow(){if(Xl===0){var o=Eu;o===0&&(o=ks,ks<<=1,(ks&261888)===0&&(ks=256)),Xl=o}return Xl}function sk(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:pt(""+o)}function rk(o,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,o.id&&m.setAttribute("form",o.id),c.parentNode.insertBefore(m,c),o=new FormData(o),m.parentNode.removeChild(m),o}function gU(o,c,m,g,E){if(c==="submit"&&m&&m.stateNode===E){var N=sk((E[On]||null).action),V=g.submitter;V&&(c=(c=V[On]||null)?sk(c.formAction):V.getAttribute("formAction"),c!==null&&(N=c,V=null));var W=new Vi("action","action",null,g,E);o.push({event:W,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Xl!==0){var ne=V?rk(E,V):new FormData(E);sw(m,{pending:!0,data:ne,method:E.method,action:N},null,ne)}}else typeof N=="function"&&(W.preventDefault(),ne=V?rk(E,V):new FormData(E),sw(m,{pending:!0,data:ne,method:E.method,action:N},N,ne))},currentTarget:E}]})}}for(var Vw=0;Vw<vv.length;Vw++){var Uw=vv[Vw],xU=Uw.toLowerCase(),yU=Uw[0].toUpperCase()+Uw.slice(1);ui(xU,"on"+yU)}ui(LC,"onAnimationEnd"),ui(IC,"onAnimationIteration"),ui(OC,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(MV,"onTransitionRun"),ui(LV,"onTransitionStart"),ui(IV,"onTransitionCancel"),ui(VC,"onTransitionEnd"),or("onMouseEnter",["mouseout","mouseover"]),or("onMouseLeave",["mouseout","mouseover"]),or("onPointerEnter",["pointerout","pointerover"]),or("onPointerLeave",["pointerout","pointerover"]),Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ym="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ym));function ak(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var g=o[m],E=g.event;g=g.listeners;e:{var N=void 0;if(c)for(var V=g.length-1;0<=V;V--){var W=g[V],ne=W.instance,de=W.currentTarget;if(W=W.listener,ne!==N&&E.isPropagationStopped())break e;N=W,E.currentTarget=de;try{N(E)}catch(ge){Ag(ge)}E.currentTarget=null,N=ne}else for(V=0;V<g.length;V++){if(W=g[V],ne=W.instance,de=W.currentTarget,W=W.listener,ne!==N&&E.isPropagationStopped())break e;N=W,E.currentTarget=de;try{N(E)}catch(ge){Ag(ge)}E.currentTarget=null,N=ne}}}}function Bt(o,c){var m=c[Ri];m===void 0&&(m=c[Ri]=new Set);var g=o+"__bubble";m.has(g)||(ik(c,o,2,!1),m.add(g))}function Bw(o,c,m){var g=0;c&&(g|=4),ik(m,o,g,c)}var g0="_reactListening"+Math.random().toString(36).slice(2);function Fw(o){if(!o[g0]){o[g0]=!0,Vr.forEach(function(m){m!=="selectionchange"&&(bU.has(m)||Bw(m,!1,o),Bw(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[g0]||(c[g0]=!0,Bw("selectionchange",!1,c))}}function ik(o,c,m,g){switch(Lk(c)){case 2:var E=YU;break;case 8:E=GU;break;default:E=n_}m=E.bind(null,c,m,o),E=void 0,!Zc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),g?E!==void 0?o.addEventListener(c,m,{capture:!0,passive:E}):o.addEventListener(c,m,!0):E!==void 0?o.addEventListener(c,m,{passive:E}):o.addEventListener(c,m,!1)}function $w(o,c,m,g,E){var N=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var V=g.tag;if(V===3||V===4){var W=g.stateNode.containerInfo;if(W===E)break;if(V===4)for(V=g.return;V!==null;){var ne=V.tag;if((ne===3||ne===4)&&V.stateNode.containerInfo===E)return;V=V.return}for(;W!==null;){if(V=_e(W),V===null)return;if(ne=V.tag,ne===5||ne===6||ne===26||ne===27){g=N=V;continue e}W=W.parentNode}}g=g.return}Dl(function(){var de=N,ge=Zn(m),Ne=[];e:{var ue=UC.get(o);if(ue!==void 0){var fe=Vi,Ye=o;switch(o){case"keypress":if(ed(m)===0)break e;case"keydown":case"keyup":fe=Sg;break;case"focusin":Ye="focus",fe=nd;break;case"focusout":Ye="blur",fe=nd;break;case"beforeblur":case"afterblur":fe=nd;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=ym;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=yg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=D;break;case LC:case IC:case OC:fe=vg;break;case VC:fe=K;break;case"scroll":case"scrollend":fe=xm;break;case"wheel":fe=me;break;case"copy":case"cut":case"paste":fe=wg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=Vo;break;case"toggle":case"beforetoggle":fe=Et}var it=(c&4)!==0,Mn=!it&&(o==="scroll"||o==="scrollend"),re=it?ue!==null?ue+"Capture":null:ue;it=[];for(var se=de,ce;se!==null;){var we=se;if(ce=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ce===null||re===null||(we=oi(se,re),we!=null&&it.push(Gm(se,we,ce))),Mn)break;se=se.return}0<it.length&&(ue=new fe(ue,Ye,null,m,ge),Ne.push({event:ue,listeners:it}))}}if((c&7)===0){e:{if(ue=o==="mouseover"||o==="pointerover",fe=o==="mouseout"||o==="pointerout",ue&&m!==Rt&&(Ye=m.relatedTarget||m.fromElement)&&(_e(Ye)||Ye[Or]))break e;if((fe||ue)&&(ue=ge.window===ge?ge:(ue=ge.ownerDocument)?ue.defaultView||ue.parentWindow:window,fe?(Ye=m.relatedTarget||m.toElement,fe=de,Ye=Ye?_e(Ye):null,Ye!==null&&(Mn=i(Ye),it=Ye.tag,Ye!==Mn||it!==5&&it!==27&&it!==6)&&(Ye=null)):(fe=null,Ye=de),fe!==Ye)){if(it=ym,we="onMouseLeave",re="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(it=Vo,we="onPointerLeave",re="onPointerEnter",se="pointer"),Mn=fe==null?ue:Vt(fe),ce=Ye==null?ue:Vt(Ye),ue=new it(we,se+"leave",fe,m,ge),ue.target=Mn,ue.relatedTarget=ce,we=null,_e(ge)===de&&(it=new it(re,se+"enter",Ye,m,ge),it.target=ce,it.relatedTarget=Mn,we=it),Mn=we,fe&&Ye)t:{for(it=vU,re=fe,se=Ye,ce=0,we=re;we;we=it(we))ce++;we=0;for(var st=se;st;st=it(st))we++;for(;0<ce-we;)re=it(re),ce--;for(;0<we-ce;)se=it(se),we--;for(;ce--;){if(re===se||se!==null&&re===se.alternate){it=re;break t}re=it(re),se=it(se)}it=null}else it=null;fe!==null&&ok(Ne,ue,fe,it,!1),Ye!==null&&Mn!==null&&ok(Ne,Mn,Ye,it,!0)}}e:{if(ue=de?Vt(de):window,fe=ue.nodeName&&ue.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ue.type==="file")var dn=NC;else if(_C(ue))if(jC)dn=RV;else{dn=kV;var Qe=TV}else fe=ue.nodeName,!fe||fe.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?de&&Xr(de.elementType)&&(dn=NC):dn=AV;if(dn&&(dn=dn(o,de))){EC(Ne,dn,m,ge);break e}Qe&&Qe(o,ue,de),o==="focusout"&&de&&ue.type==="number"&&de.memoizedProps.value!=null&&ft(ue,"number",ue.value)}switch(Qe=de?Vt(de):window,o){case"focusin":(_C(Qe)||Qe.contentEditable==="true")&&(pu=Qe,xv=de,Em=null);break;case"focusout":Em=xv=pu=null;break;case"mousedown":yv=!0;break;case"contextmenu":case"mouseup":case"dragend":yv=!1,PC(Ne,m,ge);break;case"selectionchange":if(PV)break;case"keydown":case"keyup":PC(Ne,m,ge)}var St;if(pn)e:{switch(o){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else fu?sd(o,m)&&(Yt="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Yt="onCompositionStart");Yt&&(Fi&&m.locale!=="ko"&&(fu||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&fu&&(St=gm()):(Oi=ge,pm="value"in Oi?Oi.value:Oi.textContent,fu=!0)),Qe=x0(de,Yt),0<Qe.length&&(Yt=new Bi(Yt,o,null,m,ge),Ne.push({event:Yt,listeners:Qe}),St?Yt.data=St:(St=mu(m),St!==null&&(Yt.data=St)))),(St=Pa?NV(o,m):jV(o,m))&&(Yt=x0(de,"onBeforeInput"),0<Yt.length&&(Qe=new Bi("onBeforeInput","beforeinput",null,m,ge),Ne.push({event:Qe,listeners:Yt}),Qe.data=St)),gU(Ne,o,de,m,ge)}ak(Ne,c)})}function Gm(o,c,m){return{instance:o,listener:c,currentTarget:m}}function x0(o,c){for(var m=c+"Capture",g=[];o!==null;){var E=o,N=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||N===null||(E=oi(o,m),E!=null&&g.unshift(Gm(o,E,N)),E=oi(o,c),E!=null&&g.push(Gm(o,E,N))),o.tag===3)return g;o=o.return}return[]}function vU(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function ok(o,c,m,g,E){for(var N=c._reactName,V=[];m!==null&&m!==g;){var W=m,ne=W.alternate,de=W.stateNode;if(W=W.tag,ne!==null&&ne===g)break;W!==5&&W!==26&&W!==27||de===null||(ne=de,E?(de=oi(m,N),de!=null&&V.unshift(Gm(m,de,ne))):E||(de=oi(m,N),de!=null&&V.push(Gm(m,de,ne)))),m=m.return}V.length!==0&&o.push({event:c,listeners:V})}var wU=/\r\n?/g,_U=/\u0000|\uFFFD/g;function lk(o){return(typeof o=="string"?o:""+o).replace(wU,`
`).replace(_U,"")}function ck(o,c){return c=lk(c),lk(o)===c}function Pn(o,c,m,g,E,N){switch(m){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||ds(o,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&ds(o,""+g);break;case"className":_r(o,"class",g);break;case"tabIndex":_r(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(o,m,g);break;case"style":Er(o,g,N);break;case"data":if(c!=="object"){_r(o,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||m!=="href")){o.removeAttribute(m);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(m);break}g=pt(""+g),o.setAttribute(m,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(m==="formAction"?(c!=="input"&&Pn(o,c,"name",E.name,E,null),Pn(o,c,"formEncType",E.formEncType,E,null),Pn(o,c,"formMethod",E.formMethod,E,null),Pn(o,c,"formTarget",E.formTarget,E,null)):(Pn(o,c,"encType",E.encType,E,null),Pn(o,c,"method",E.method,E,null),Pn(o,c,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(m);break}g=pt(""+g),o.setAttribute(m,g);break;case"onClick":g!=null&&(o.onclick=ss);break;case"onScroll":g!=null&&Bt("scroll",o);break;case"onScrollEnd":g!=null&&Bt("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(m=g.__html,m!=null){if(E.children!=null)throw Error(s(60));o.innerHTML=m}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}m=pt(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,""+g):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":g===!0?o.setAttribute(m,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,g):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(m,g):o.removeAttribute(m);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(m):o.setAttribute(m,g);break;case"popover":Bt("beforetoggle",o),Bt("toggle",o),Mi(o,"popover",g);break;case"xlinkActuate":cs(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":cs(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":cs(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":cs(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":cs(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":cs(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":cs(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":cs(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":cs(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Mi(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Ds.get(m)||m,Mi(o,m,g))}}function zw(o,c,m,g,E,N){switch(m){case"style":Er(o,g,N);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(m=g.__html,m!=null){if(E.children!=null)throw Error(s(60));o.innerHTML=m}}break;case"children":typeof g=="string"?ds(o,g):(typeof g=="number"||typeof g=="bigint")&&ds(o,""+g);break;case"onScroll":g!=null&&Bt("scroll",o);break;case"onScrollEnd":g!=null&&Bt("scrollend",o);break;case"onClick":g!=null&&(o.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pi.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),c=m.slice(2,E?m.length-7:void 0),N=o[On]||null,N=N!=null?N[m]:null,typeof N=="function"&&o.removeEventListener(c,N,E),typeof g=="function")){typeof N!="function"&&N!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(c,g,E);break e}m in o?o[m]=g:g===!0?o.setAttribute(m,""):Mi(o,m,g)}}}function mr(o,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",o),Bt("load",o);var g=!1,E=!1,N;for(N in m)if(m.hasOwnProperty(N)){var V=m[N];if(V!=null)switch(N){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:Pn(o,c,N,V,m,null)}}E&&Pn(o,c,"srcSet",m.srcSet,m,null),g&&Pn(o,c,"src",m.src,m,null);return;case"input":Bt("invalid",o);var W=N=V=E=null,ne=null,de=null;for(g in m)if(m.hasOwnProperty(g)){var ge=m[g];if(ge!=null)switch(g){case"name":E=ge;break;case"type":V=ge;break;case"checked":ne=ge;break;case"defaultChecked":de=ge;break;case"value":N=ge;break;case"defaultValue":W=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,c));break;default:Pn(o,c,g,ge,m,null)}}ut(o,N,W,ne,de,V,E,!1);return;case"select":Bt("invalid",o),g=V=N=null;for(E in m)if(m.hasOwnProperty(E)&&(W=m[E],W!=null))switch(E){case"value":N=W;break;case"defaultValue":V=W;break;case"multiple":g=W;default:Pn(o,c,E,W,m,null)}c=N,m=V,o.multiple=!!g,c!=null?En(o,!!g,c,!1):m!=null&&En(o,!!g,m,!0);return;case"textarea":Bt("invalid",o),N=E=g=null;for(V in m)if(m.hasOwnProperty(V)&&(W=m[V],W!=null))switch(V){case"value":g=W;break;case"defaultValue":E=W;break;case"children":N=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(91));break;default:Pn(o,c,V,W,m,null)}zn(o,g,E,N);return;case"option":for(ne in m)if(m.hasOwnProperty(ne)&&(g=m[ne],g!=null))switch(ne){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Pn(o,c,ne,g,m,null)}return;case"dialog":Bt("beforetoggle",o),Bt("toggle",o),Bt("cancel",o),Bt("close",o);break;case"iframe":case"object":Bt("load",o);break;case"video":case"audio":for(g=0;g<Ym.length;g++)Bt(Ym[g],o);break;case"image":Bt("error",o),Bt("load",o);break;case"details":Bt("toggle",o);break;case"embed":case"source":case"link":Bt("error",o),Bt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in m)if(m.hasOwnProperty(de)&&(g=m[de],g!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:Pn(o,c,de,g,m,null)}return;default:if(Xr(c)){for(ge in m)m.hasOwnProperty(ge)&&(g=m[ge],g!==void 0&&zw(o,c,ge,g,m,void 0));return}}for(W in m)m.hasOwnProperty(W)&&(g=m[W],g!=null&&Pn(o,c,W,g,m,null))}function EU(o,c,m,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,N=null,V=null,W=null,ne=null,de=null,ge=null;for(fe in m){var Ne=m[fe];if(m.hasOwnProperty(fe)&&Ne!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":ne=Ne;default:g.hasOwnProperty(fe)||Pn(o,c,fe,null,g,Ne)}}for(var ue in g){var fe=g[ue];if(Ne=m[ue],g.hasOwnProperty(ue)&&(fe!=null||Ne!=null))switch(ue){case"type":N=fe;break;case"name":E=fe;break;case"checked":de=fe;break;case"defaultChecked":ge=fe;break;case"value":V=fe;break;case"defaultValue":W=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,c));break;default:fe!==Ne&&Pn(o,c,ue,fe,g,Ne)}}Ae(o,V,W,ne,de,ge,N,E);return;case"select":fe=V=W=ue=null;for(N in m)if(ne=m[N],m.hasOwnProperty(N)&&ne!=null)switch(N){case"value":break;case"multiple":fe=ne;default:g.hasOwnProperty(N)||Pn(o,c,N,null,g,ne)}for(E in g)if(N=g[E],ne=m[E],g.hasOwnProperty(E)&&(N!=null||ne!=null))switch(E){case"value":ue=N;break;case"defaultValue":W=N;break;case"multiple":V=N;default:N!==ne&&Pn(o,c,E,N,g,ne)}c=W,m=V,g=fe,ue!=null?En(o,!!m,ue,!1):!!g!=!!m&&(c!=null?En(o,!!m,c,!0):En(o,!!m,m?[]:"",!1));return;case"textarea":fe=ue=null;for(W in m)if(E=m[W],m.hasOwnProperty(W)&&E!=null&&!g.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:Pn(o,c,W,null,g,E)}for(V in g)if(E=g[V],N=m[V],g.hasOwnProperty(V)&&(E!=null||N!=null))switch(V){case"value":ue=E;break;case"defaultValue":fe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:E!==N&&Pn(o,c,V,E,g,N)}fn(o,ue,fe);return;case"option":for(var Ye in m)if(ue=m[Ye],m.hasOwnProperty(Ye)&&ue!=null&&!g.hasOwnProperty(Ye))switch(Ye){case"selected":o.selected=!1;break;default:Pn(o,c,Ye,null,g,ue)}for(ne in g)if(ue=g[ne],fe=m[ne],g.hasOwnProperty(ne)&&ue!==fe&&(ue!=null||fe!=null))switch(ne){case"selected":o.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:Pn(o,c,ne,ue,g,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in m)ue=m[it],m.hasOwnProperty(it)&&ue!=null&&!g.hasOwnProperty(it)&&Pn(o,c,it,null,g,ue);for(de in g)if(ue=g[de],fe=m[de],g.hasOwnProperty(de)&&ue!==fe&&(ue!=null||fe!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,c));break;default:Pn(o,c,de,ue,g,fe)}return;default:if(Xr(c)){for(var Mn in m)ue=m[Mn],m.hasOwnProperty(Mn)&&ue!==void 0&&!g.hasOwnProperty(Mn)&&zw(o,c,Mn,void 0,g,ue);for(ge in g)ue=g[ge],fe=m[ge],!g.hasOwnProperty(ge)||ue===fe||ue===void 0&&fe===void 0||zw(o,c,ge,ue,g,fe);return}}for(var re in m)ue=m[re],m.hasOwnProperty(re)&&ue!=null&&!g.hasOwnProperty(re)&&Pn(o,c,re,null,g,ue);for(Ne in g)ue=g[Ne],fe=m[Ne],!g.hasOwnProperty(Ne)||ue===fe||ue==null&&fe==null||Pn(o,c,Ne,ue,g,fe)}function dk(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NU(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,m=performance.getEntriesByType("resource"),g=0;g<m.length;g++){var E=m[g],N=E.transferSize,V=E.initiatorType,W=E.duration;if(N&&W&&dk(V)){for(V=0,W=E.responseEnd,g+=1;g<m.length;g++){var ne=m[g],de=ne.startTime;if(de>W)break;var ge=ne.transferSize,Ne=ne.initiatorType;ge&&dk(Ne)&&(ne=ne.responseEnd,V+=ge*(ne<W?1:(W-de)/(ne-de)))}if(--g,c+=8*(N+V)/(E.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Hw=null,qw=null;function y0(o){return o.nodeType===9?o:o.ownerDocument}function uk(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hk(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Ww(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Yw=null;function jU(){var o=window.event;return o&&o.type==="popstate"?o===Yw?!1:(Yw=o,!0):(Yw=null,!1)}var mk=typeof setTimeout=="function"?setTimeout:void 0,CU=typeof clearTimeout=="function"?clearTimeout:void 0,fk=typeof Promise=="function"?Promise:void 0,SU=typeof queueMicrotask=="function"?queueMicrotask:typeof fk<"u"?function(o){return fk.resolve(null).then(o).catch(TU)}:mk;function TU(o){setTimeout(function(){throw o})}function Zl(o){return o==="head"}function pk(o,c){var m=c,g=0;do{var E=m.nextSibling;if(o.removeChild(m),E&&E.nodeType===8)if(m=E.data,m==="/$"||m==="/&"){if(g===0){o.removeChild(E),$u(c);return}g--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")g++;else if(m==="html")Km(o.ownerDocument.documentElement);else if(m==="head"){m=o.ownerDocument.head,Km(m);for(var N=m.firstChild;N;){var V=N.nextSibling,W=N.nodeName;N[Qr]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&N.rel.toLowerCase()==="stylesheet"||m.removeChild(N),N=V}}else m==="body"&&Km(o.ownerDocument.body);m=E}while(m);$u(c)}function gk(o,c){var m=o;o=0;do{var g=m.nextSibling;if(m.nodeType===1?c?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(c?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),g&&g.nodeType===8)if(m=g.data,m==="/$"){if(o===0)break;o--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||o++;m=g}while(m)}function Gw(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Gw(m),Di(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function kU(o,c,m,g){for(;o.nodeType===1;){var E=m;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[Qr])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(N!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var N=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=Ba(o.nextSibling),o===null)break}return null}function AU(o,c,m){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Ba(o.nextSibling),o===null))return null;return o}function xk(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Ba(o.nextSibling),o===null))return null;return o}function Kw(o){return o.data==="$?"||o.data==="$~"}function Qw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function RU(o,c){var m=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||m.readyState!=="loading")c();else{var g=function(){c(),m.removeEventListener("DOMContentLoaded",g)};m.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function Ba(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var Xw=null;function yk(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"||m==="/&"){if(c===0)return Ba(o.nextSibling);c--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||c++}o=o.nextSibling}return null}function bk(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(c===0)return o;c--}else m!=="/$"&&m!=="/&"||c++}o=o.previousSibling}return null}function vk(o,c,m){switch(c=y0(m),o){case"html":if(o=c.documentElement,!o)throw Error(s(452));return o;case"head":if(o=c.head,!o)throw Error(s(453));return o;case"body":if(o=c.body,!o)throw Error(s(454));return o;default:throw Error(s(451))}}function Km(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);Di(o)}var Fa=new Map,wk=new Set;function b0(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Jo=z.d;z.d={f:DU,r:PU,D:MU,C:LU,L:IU,m:OU,X:UU,S:VU,M:BU};function DU(){var o=Jo.f(),c=d0();return o||c}function PU(o){var c=Xe(o);c!==null&&c.tag===5&&c.type==="form"?VS(c):Jo.r(o)}var Uu=typeof document>"u"?null:document;function _k(o,c,m){var g=Uu;if(g&&typeof c=="string"&&c){var E=ye(c);E='link[rel="'+o+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),wk.has(E)||(wk.add(E),o={rel:o,crossOrigin:m,href:c},g.querySelector(E)===null&&(c=g.createElement("link"),mr(c,"link",o),Zt(c),g.head.appendChild(c)))}}function MU(o){Jo.D(o),_k("dns-prefetch",o,null)}function LU(o,c){Jo.C(o,c),_k("preconnect",o,c)}function IU(o,c,m){Jo.L(o,c,m);var g=Uu;if(g&&o&&c){var E='link[rel="preload"][as="'+ye(c)+'"]';c==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+ye(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+ye(m.imageSizes)+'"]')):E+='[href="'+ye(o)+'"]';var N=E;switch(c){case"style":N=Bu(o);break;case"script":N=Fu(o)}Fa.has(N)||(o=p({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:o,as:c},m),Fa.set(N,o),g.querySelector(E)!==null||c==="style"&&g.querySelector(Qm(N))||c==="script"&&g.querySelector(Xm(N))||(c=g.createElement("link"),mr(c,"link",o),Zt(c),g.head.appendChild(c)))}}function OU(o,c){Jo.m(o,c);var m=Uu;if(m&&o){var g=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+ye(g)+'"][href="'+ye(o)+'"]',N=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Fu(o)}if(!Fa.has(N)&&(o=p({rel:"modulepreload",href:o},c),Fa.set(N,o),m.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Xm(N)))return}g=m.createElement("link"),mr(g,"link",o),Zt(g),m.head.appendChild(g)}}}function VU(o,c,m){Jo.S(o,c,m);var g=Uu;if(g&&o){var E=sn(g).hoistableStyles,N=Bu(o);c=c||"default";var V=E.get(N);if(!V){var W={loading:0,preload:null};if(V=g.querySelector(Qm(N)))W.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":c},m),(m=Fa.get(N))&&Zw(o,m);var ne=V=g.createElement("link");Zt(ne),mr(ne,"link",o),ne._p=new Promise(function(de,ge){ne.onload=de,ne.onerror=ge}),ne.addEventListener("load",function(){W.loading|=1}),ne.addEventListener("error",function(){W.loading|=2}),W.loading|=4,v0(V,c,g)}V={type:"stylesheet",instance:V,count:1,state:W},E.set(N,V)}}}function UU(o,c){Jo.X(o,c);var m=Uu;if(m&&o){var g=sn(m).hoistableScripts,E=Fu(o),N=g.get(E);N||(N=m.querySelector(Xm(E)),N||(o=p({src:o,async:!0},c),(c=Fa.get(E))&&Jw(o,c),N=m.createElement("script"),Zt(N),mr(N,"link",o),m.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},g.set(E,N))}}function BU(o,c){Jo.M(o,c);var m=Uu;if(m&&o){var g=sn(m).hoistableScripts,E=Fu(o),N=g.get(E);N||(N=m.querySelector(Xm(E)),N||(o=p({src:o,async:!0,type:"module"},c),(c=Fa.get(E))&&Jw(o,c),N=m.createElement("script"),Zt(N),mr(N,"link",o),m.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},g.set(E,N))}}function Ek(o,c,m,g){var E=(E=be.current)?b0(E):null;if(!E)throw Error(s(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=Bu(m.href),m=sn(E).hoistableStyles,g=m.get(c),g||(g={type:"style",instance:null,count:0,state:null},m.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=Bu(m.href);var N=sn(E).hoistableStyles,V=N.get(o);if(V||(E=E.ownerDocument||E,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,V),(N=E.querySelector(Qm(o)))&&!N._p&&(V.instance=N,V.state.loading=5),Fa.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Fa.set(o,m),N||FU(E,o,m,V.state))),c&&g===null)throw Error(s(528,""));return V}if(c&&g!==null)throw Error(s(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Fu(m),m=sn(E).hoistableScripts,g=m.get(c),g||(g={type:"script",instance:null,count:0,state:null},m.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,o))}}function Bu(o){return'href="'+ye(o)+'"'}function Qm(o){return'link[rel="stylesheet"]['+o+"]"}function Nk(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function FU(o,c,m,g){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=o.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),mr(c,"link",m),Zt(c),o.head.appendChild(c))}function Fu(o){return'[src="'+ye(o)+'"]'}function Xm(o){return"script[async]"+o}function jk(o,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var g=o.querySelector('style[data-href~="'+ye(m.href)+'"]');if(g)return c.instance=g,Zt(g),g;var E=p({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),Zt(g),mr(g,"style",E),v0(g,m.precedence,o),c.instance=g;case"stylesheet":E=Bu(m.href);var N=o.querySelector(Qm(E));if(N)return c.state.loading|=4,c.instance=N,Zt(N),N;g=Nk(m),(E=Fa.get(E))&&Zw(g,E),N=(o.ownerDocument||o).createElement("link"),Zt(N);var V=N;return V._p=new Promise(function(W,ne){V.onload=W,V.onerror=ne}),mr(N,"link",g),c.state.loading|=4,v0(N,m.precedence,o),c.instance=N;case"script":return N=Fu(m.src),(E=o.querySelector(Xm(N)))?(c.instance=E,Zt(E),E):(g=m,(E=Fa.get(N))&&(g=p({},m),Jw(g,E)),o=o.ownerDocument||o,E=o.createElement("script"),Zt(E),mr(E,"link",g),o.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(s(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,v0(g,m.precedence,o));return c.instance}function v0(o,c,m){for(var g=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,N=E,V=0;V<g.length;V++){var W=g[V];if(W.dataset.precedence===c)N=W;else if(N!==E)break}N?N.parentNode.insertBefore(o,N.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(o,c.firstChild))}function Zw(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Jw(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var w0=null;function Ck(o,c,m){if(w0===null){var g=new Map,E=w0=new Map;E.set(m,g)}else E=w0,g=E.get(m),g||(g=new Map,E.set(m,g));if(g.has(o))return g;for(g.set(o,null),m=m.getElementsByTagName(o),E=0;E<m.length;E++){var N=m[E];if(!(N[Qr]||N[Wn]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var V=N.getAttribute(c)||"";V=o+V;var W=g.get(V);W?W.push(N):g.set(V,[N])}}return g}function Sk(o,c,m){o=o.ownerDocument||o,o.head.insertBefore(m,c==="title"?o.querySelector("head > title"):null)}function $U(o,c,m){if(m===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Tk(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function zU(o,c,m,g){if(m.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var E=Bu(g.href),N=c.querySelector(Qm(E));if(N){c=N._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=_0.bind(o),c.then(o,o)),m.state.loading|=4,m.instance=N,Zt(N);return}N=c.ownerDocument||c,g=Nk(g),(E=Fa.get(E))&&Zw(g,E),N=N.createElement("link"),Zt(N);var V=N;V._p=new Promise(function(W,ne){V.onload=W,V.onerror=ne}),mr(N,"link",g),m.instance=N}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(m,c),(c=m.state.preload)&&(m.state.loading&3)===0&&(o.count++,m=_0.bind(o),c.addEventListener("load",m),c.addEventListener("error",m))}}var e_=0;function HU(o,c){return o.stylesheets&&o.count===0&&N0(o,o.stylesheets),0<o.count||0<o.imgCount?function(m){var g=setTimeout(function(){if(o.stylesheets&&N0(o,o.stylesheets),o.unsuspend){var N=o.unsuspend;o.unsuspend=null,N()}},6e4+c);0<o.imgBytes&&e_===0&&(e_=62500*NU());var E=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&N0(o,o.stylesheets),o.unsuspend)){var N=o.unsuspend;o.unsuspend=null,N()}},(o.imgBytes>e_?50:800)+c);return o.unsuspend=m,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(E)}}:null}function _0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)N0(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var E0=null;function N0(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,E0=new Map,c.forEach(qU,o),E0=null,_0.call(o))}function qU(o,c){if(!(c.state.loading&4)){var m=E0.get(o);if(m)var g=m.get(null);else{m=new Map,E0.set(o,m);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<E.length;N++){var V=E[N];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(m.set(V.dataset.precedence,V),g=V)}g&&m.set(null,g)}E=c.instance,V=E.getAttribute("data-precedence"),N=m.get(V)||g,N===g&&m.set(null,E),m.set(V,E),this.count++,g=_0.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),N?N.parentNode.insertBefore(E,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),c.state.loading|=4}}var Zm={$$typeof:A,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function WU(o,c,m,g,E,N,V,W,ne){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.hiddenUpdates=ns(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=N,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function kk(o,c,m,g,E,N,V,W,ne,de,ge,Ne){return o=new WU(o,c,m,V,ne,de,ge,Ne,W),c=1,N===!0&&(c|=24),N=ga(3,null,null,c),o.current=N,N.stateNode=o,c=Pv(),c.refCount++,o.pooledCache=c,c.refCount++,N.memoizedState={element:g,isDehydrated:m,cache:c},Ov(N),o}function Ak(o){return o?(o=yu,o):yu}function Rk(o,c,m,g,E,N){E=Ak(E),g.context===null?g.context=E:g.pendingContext=E,g=Fl(c),g.payload={element:m},N=N===void 0?null:N,N!==null&&(g.callback=N),m=$l(o,g,c),m!==null&&(na(m,o,c),Am(m,o,c))}function Dk(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function t_(o,c){Dk(o,c),(o=o.alternate)&&Dk(o,c)}function Pk(o){if(o.tag===13||o.tag===31){var c=id(o,67108864);c!==null&&na(c,o,67108864),t_(o,67108864)}}function Mk(o){if(o.tag===13||o.tag===31){var c=wa();c=ai(c);var m=id(o,c);m!==null&&na(m,o,c),t_(o,c)}}var j0=!0;function YU(o,c,m,g){var E=B.T;B.T=null;var N=z.p;try{z.p=2,n_(o,c,m,g)}finally{z.p=N,B.T=E}}function GU(o,c,m,g){var E=B.T;B.T=null;var N=z.p;try{z.p=8,n_(o,c,m,g)}finally{z.p=N,B.T=E}}function n_(o,c,m,g){if(j0){var E=s_(g);if(E===null)$w(o,c,g,C0,m),Ik(o,g);else if(QU(E,o,c,m,g))g.stopPropagation();else if(Ik(o,g),c&4&&-1<KU.indexOf(o)){for(;E!==null;){var N=Xe(E);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var V=As(N.pendingLanes);if(V!==0){var W=N;for(W.pendingLanes|=2,W.entangledLanes|=2;V;){var ne=1<<31-An(V);W.entanglements[1]|=ne,V&=~ne}qi(N),(gn&6)===0&&(l0=ze()+500,Wm(0))}}break;case 31:case 13:W=id(N,2),W!==null&&na(W,N,2),d0(),t_(N,2)}if(N=s_(g),N===null&&$w(o,c,g,C0,m),N===E)break;E=N}E!==null&&g.stopPropagation()}else $w(o,c,g,null,m)}}function s_(o){return o=Zn(o),r_(o)}var C0=null;function r_(o){if(C0=null,o=_e(o),o!==null){var c=i(o);if(c===null)o=null;else{var m=c.tag;if(m===13){if(o=l(c),o!==null)return o;o=null}else if(m===31){if(o=d(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return C0=o,null}function Lk(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case lt:return 2;case At:return 8;case Ht:case Ln:return 32;case Ot:return 268435456;default:return 32}default:return 32}}var a_=!1,Jl=null,ec=null,tc=null,Jm=new Map,ef=new Map,nc=[],KU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ik(o,c){switch(o){case"focusin":case"focusout":Jl=null;break;case"dragenter":case"dragleave":ec=null;break;case"mouseover":case"mouseout":tc=null;break;case"pointerover":case"pointerout":Jm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(c.pointerId)}}function tf(o,c,m,g,E,N){return o===null||o.nativeEvent!==N?(o={blockedOn:c,domEventName:m,eventSystemFlags:g,nativeEvent:N,targetContainers:[E]},c!==null&&(c=Xe(c),c!==null&&Pk(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),o)}function QU(o,c,m,g,E){switch(c){case"focusin":return Jl=tf(Jl,o,c,m,g,E),!0;case"dragenter":return ec=tf(ec,o,c,m,g,E),!0;case"mouseover":return tc=tf(tc,o,c,m,g,E),!0;case"pointerover":var N=E.pointerId;return Jm.set(N,tf(Jm.get(N)||null,o,c,m,g,E)),!0;case"gotpointercapture":return N=E.pointerId,ef.set(N,tf(ef.get(N)||null,o,c,m,g,E)),!0}return!1}function Ok(o){var c=_e(o.target);if(c!==null){var m=i(c);if(m!==null){if(c=m.tag,c===13){if(c=l(m),c!==null){o.blockedOn=c,wr(o.priority,function(){Mk(m)});return}}else if(c===31){if(c=d(m),c!==null){o.blockedOn=c,wr(o.priority,function(){Mk(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function S0(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=s_(o.nativeEvent);if(m===null){m=o.nativeEvent;var g=new m.constructor(m.type,m);Rt=g,m.target.dispatchEvent(g),Rt=null}else return c=Xe(m),c!==null&&Pk(c),o.blockedOn=m,!1;c.shift()}return!0}function Vk(o,c,m){S0(o)&&m.delete(c)}function XU(){a_=!1,Jl!==null&&S0(Jl)&&(Jl=null),ec!==null&&S0(ec)&&(ec=null),tc!==null&&S0(tc)&&(tc=null),Jm.forEach(Vk),ef.forEach(Vk)}function T0(o,c){o.blockedOn===c&&(o.blockedOn=null,a_||(a_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,XU)))}var k0=null;function Uk(o){k0!==o&&(k0=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){k0===o&&(k0=null);for(var c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],E=o[c+2];if(typeof g!="function"){if(r_(g||m)===null)continue;break}var N=Xe(m);N!==null&&(o.splice(c,3),c-=3,sw(N,{pending:!0,data:E,method:m.method,action:g},g,E))}}))}function $u(o){function c(ne){return T0(ne,o)}Jl!==null&&T0(Jl,o),ec!==null&&T0(ec,o),tc!==null&&T0(tc,o),Jm.forEach(c),ef.forEach(c);for(var m=0;m<nc.length;m++){var g=nc[m];g.blockedOn===o&&(g.blockedOn=null)}for(;0<nc.length&&(m=nc[0],m.blockedOn===null);)Ok(m),m.blockedOn===null&&nc.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(g=0;g<m.length;g+=3){var E=m[g],N=m[g+1],V=E[On]||null;if(typeof N=="function")V||Uk(m);else if(V){var W=null;if(N&&N.hasAttribute("formAction")){if(E=N,V=N[On]||null)W=V.formAction;else if(r_(E)!==null)continue}else W=V.action;typeof W=="function"?m[g+1]=W:(m.splice(g,3),g-=3),Uk(m)}}}function Bk(){function o(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(V){return E=V})},focusReset:"manual",scroll:"manual"})}function c(){E!==null&&(E(),E=null),g||setTimeout(m,20)}function m(){if(!g&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,E=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(m,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),E!==null&&(E(),E=null)}}}function i_(o){this._internalRoot=o}A0.prototype.render=i_.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(s(409));var m=c.current,g=wa();Rk(m,g,o,c,null,null)},A0.prototype.unmount=i_.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Rk(o.current,2,null,o,null,null),d0(),c[Or]=null}};function A0(o){this._internalRoot=o}A0.prototype.unstable_scheduleHydration=function(o){if(o){var c=Ao();o={blockedOn:null,target:o,priority:c};for(var m=0;m<nc.length&&c!==0&&c<nc[m].priority;m++);nc.splice(m,0,o),m===0&&Ok(o)}};var Fk=e.version;if(Fk!=="19.2.3")throw Error(s(527,Fk,"19.2.3"));z.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=h(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var ZU={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var R0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!R0.isDisabled&&R0.supportsFiber)try{vn=R0.inject(ZU),Xn=R0}catch{}}return sf.createRoot=function(o,c){if(!r(o))throw Error(s(299));var m=!1,g="",E=GS,N=KS,V=QS;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(N=c.onCaughtError),c.onRecoverableError!==void 0&&(V=c.onRecoverableError)),c=kk(o,1,!1,null,null,m,g,null,E,N,V,Bk),o[Or]=c.current,Fw(o),new i_(c)},sf.hydrateRoot=function(o,c,m){if(!r(o))throw Error(s(299));var g=!1,E="",N=GS,V=KS,W=QS,ne=null;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(N=m.onUncaughtError),m.onCaughtError!==void 0&&(V=m.onCaughtError),m.onRecoverableError!==void 0&&(W=m.onRecoverableError),m.formState!==void 0&&(ne=m.formState)),c=kk(o,1,!0,c,m??null,g,E,ne,N,V,W,Bk),c.context=Ak(null),m=c.current,g=wa(),g=ai(g),E=Fl(g),E.callback=null,$l(m,E,g),m=g,c.current.lanes=m,zs(c,m),qi(c),o[Or]=c.current,Fw(o),new A0(c)},sf.version="19.2.3",sf}var Zk;function dB(){if(Zk)return c_.exports;Zk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),c_.exports=cB(),c_.exports}var uB=dB();const hB=su(uB);var m_,Jk;function mB(){if(Jk)return m_;Jk=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",s=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function r(i,l){if(i===l)return!0;if(i&&l&&typeof i=="object"&&typeof l=="object"){if(i.constructor!==l.constructor)return!1;var d,u,h;if(Array.isArray(i)){if(d=i.length,d!=l.length)return!1;for(u=d;u--!==0;)if(!r(i[u],l[u]))return!1;return!0}var f;if(e&&i instanceof Map&&l instanceof Map){if(i.size!==l.size)return!1;for(f=i.entries();!(u=f.next()).done;)if(!l.has(u.value[0]))return!1;for(f=i.entries();!(u=f.next()).done;)if(!r(u.value[1],l.get(u.value[0])))return!1;return!0}if(n&&i instanceof Set&&l instanceof Set){if(i.size!==l.size)return!1;for(f=i.entries();!(u=f.next()).done;)if(!l.has(u.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(l)){if(d=i.length,d!=l.length)return!1;for(u=d;u--!==0;)if(i[u]!==l[u])return!1;return!0}if(i.constructor===RegExp)return i.source===l.source&&i.flags===l.flags;if(i.valueOf!==Object.prototype.valueOf&&typeof i.valueOf=="function"&&typeof l.valueOf=="function")return i.valueOf()===l.valueOf();if(i.toString!==Object.prototype.toString&&typeof i.toString=="function"&&typeof l.toString=="function")return i.toString()===l.toString();if(h=Object.keys(i),d=h.length,d!==Object.keys(l).length)return!1;for(u=d;u--!==0;)if(!Object.prototype.hasOwnProperty.call(l,h[u]))return!1;if(t&&i instanceof Element)return!1;for(u=d;u--!==0;)if(!((h[u]==="_owner"||h[u]==="__v"||h[u]==="__o")&&i.$$typeof)&&!r(i[h[u]],l[h[u]]))return!1;return!0}return i!==i&&l!==l}return m_=function(l,d){try{return r(l,d)}catch(u){if((u.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw u}},m_}var fB=mB();const pB=su(fB);var f_,eA;function gB(){if(eA)return f_;eA=1;var t=function(e,n,s,r,i,l,d,u){if(!e){var h;if(n===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[s,r,i,l,d,u],p=0;h=new Error(n.replace(/%s/g,function(){return f[p++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return f_=t,f_}var xB=gB();const tA=su(xB);var p_,nA;function yB(){return nA||(nA=1,p_=function(e,n,s,r){var i=s?s.call(r,e,n):void 0;if(i!==void 0)return!!i;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var l=Object.keys(e),d=Object.keys(n);if(l.length!==d.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(n),h=0;h<l.length;h++){var f=l[h];if(!u(f))return!1;var p=e[f],x=n[f];if(i=s?s.call(r,p,x,f):void 0,i===!1||i===void 0&&p!==x)return!1}return!0}),p_}var bB=yB();const vB=su(bB);var mL=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(mL||{}),g_={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},sA=Object.values(mL),T2={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},wB=Object.entries(T2).reduce((t,[e,n])=>(t[n]=e,t),{}),xi="data-rh",gh={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},xh=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const s=t[n];if(Object.prototype.hasOwnProperty.call(s,e))return s[e]}return null},_B=t=>{let e=xh(t,"title");const n=xh(t,gh.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const s=xh(t,gh.DEFAULT_TITLE);return e||s||void 0},EB=t=>xh(t,gh.ON_CHANGE_CLIENT_STATE)||(()=>{}),x_=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,s)=>({...n,...s}),{}),NB=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,s)=>{if(!n.length){const r=Object.keys(s);for(let i=0;i<r.length;i+=1){const d=r[i].toLowerCase();if(t.indexOf(d)!==-1&&s[d])return n.concat(s)}}return n},[]),jB=t=>console&&typeof console.warn=="function"&&console.warn(t),rf=(t,e,n)=>{const s={};return n.filter(r=>Array.isArray(r[t])?!0:(typeof r[t]<"u"&&jB(`Helmet: ${t} should be of type "Array". Instead found type "${typeof r[t]}"`),!1)).map(r=>r[t]).reverse().reduce((r,i)=>{const l={};i.filter(u=>{let h;const f=Object.keys(u);for(let x=0;x<f.length;x+=1){const b=f[x],_=b.toLowerCase();e.indexOf(_)!==-1&&!(h==="rel"&&u[h].toLowerCase()==="canonical")&&!(_==="rel"&&u[_].toLowerCase()==="stylesheet")&&(h=_),e.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(h=b)}if(!h||!u[h])return!1;const p=u[h].toLowerCase();return s[h]||(s[h]={}),l[h]||(l[h]={}),s[h][p]?!1:(l[h][p]=!0,!0)}).reverse().forEach(u=>r.push(u));const d=Object.keys(l);for(let u=0;u<d.length;u+=1){const h=d[u],f={...s[h],...l[h]};s[h]=f}return r},[]).reverse()},CB=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},SB=t=>({baseTag:NB(["href"],t),bodyAttributes:x_("bodyAttributes",t),defer:xh(t,gh.DEFER),encode:xh(t,gh.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:x_("htmlAttributes",t),linkTags:rf("link",["rel","href"],t),metaTags:rf("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:rf("noscript",["innerHTML"],t),onChangeClientState:EB(t),scriptTags:rf("script",["src","innerHTML"],t),styleTags:rf("style",["cssText"],t),title:_B(t),titleAttributes:x_("titleAttributes",t),prioritizeSeoTags:CB(t,gh.PRIORITIZE_SEO_TAGS)}),fL=t=>Array.isArray(t)?t.join(""):t,TB=(t,e)=>{const n=Object.keys(t);for(let s=0;s<n.length;s+=1)if(e[n[s]]&&e[n[s]].includes(t[n[s]]))return!0;return!1},y_=(t,e)=>Array.isArray(t)?t.reduce((n,s)=>(TB(s,e)?n.priority.push(s):n.default.push(s),n),{priority:[],default:[]}):{default:t,priority:[]},rA=(t,e)=>({...t,[e]:void 0}),kB=["noscript","script","style"],I1=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),pL=t=>Object.keys(t).reduce((e,n)=>{const s=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${s}`:s},""),AB=(t,e,n,s)=>{const r=pL(n),i=fL(e);return r?`<${t} ${xi}="true" ${r}>${I1(i,s)}</${t}>`:`<${t} ${xi}="true">${I1(i,s)}</${t}>`},RB=(t,e,n=!0)=>e.reduce((s,r)=>{const i=r,l=Object.keys(i).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,f)=>{const p=typeof i[f]>"u"?f:`${f}="${I1(i[f],n)}"`;return h?`${h} ${p}`:p},""),d=i.innerHTML||i.cssText||"",u=kB.indexOf(t)===-1;return`${s}<${t} ${xi}="true" ${l}${u?"/>":`>${d}</${t}>`}`},""),gL=(t,e={})=>Object.keys(t).reduce((n,s)=>{const r=T2[s];return n[r||s]=t[s],n},e),DB=(t,e,n)=>{const s={key:e,[xi]:!0},r=gL(n,s);return[he.createElement("title",r,e)]},mx=(t,e)=>e.map((n,s)=>{const r={key:s,[xi]:!0};return Object.keys(n).forEach(i=>{const d=T2[i]||i;if(d==="innerHTML"||d==="cssText"){const u=n.innerHTML||n.cssText;r.dangerouslySetInnerHTML={__html:u}}else r[d]=n[i]}),he.createElement(t,r)}),Ha=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>DB(t,e.title,e.titleAttributes),toString:()=>AB(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>gL(e),toString:()=>pL(e)};default:return{toComponent:()=>mx(t,e),toString:()=>RB(t,e,n)}}},PB=({metaTags:t,linkTags:e,scriptTags:n,encode:s})=>{const r=y_(t,g_.meta),i=y_(e,g_.link),l=y_(n,g_.script);return{priorityMethods:{toComponent:()=>[...mx("meta",r.priority),...mx("link",i.priority),...mx("script",l.priority)],toString:()=>`${Ha("meta",r.priority,s)} ${Ha("link",i.priority,s)} ${Ha("script",l.priority,s)}`},metaTags:r.default,linkTags:i.default,scriptTags:l.default}},MB=t=>{const{baseTag:e,bodyAttributes:n,encode:s=!0,htmlAttributes:r,noscriptTags:i,styleTags:l,title:d="",titleAttributes:u,prioritizeSeoTags:h}=t;let{linkTags:f,metaTags:p,scriptTags:x}=t,b={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:b,linkTags:f,metaTags:p,scriptTags:x}=PB(t)),{priority:b,base:Ha("base",e,s),bodyAttributes:Ha("bodyAttributes",n,s),htmlAttributes:Ha("htmlAttributes",r,s),link:Ha("link",f,s),meta:Ha("meta",p,s),noscript:Ha("noscript",i,s),script:Ha("script",x,s),style:Ha("style",l,s),title:Ha("title",{title:d,titleAttributes:u},s)}},O1=MB,D0=[],xL=!!(typeof window<"u"&&window.document&&window.document.createElement),V1=class{instances=[];canUseDOM=xL;context;value={setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?D0:this.instances,add:t=>{(this.canUseDOM?D0:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?D0:this.instances).indexOf(t);(this.canUseDOM?D0:this.instances).splice(e,1)}}};constructor(t,e){this.context=t,this.canUseDOM=e||!1,e||(t.helmet=O1({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},LB={},yL=he.createContext(LB),bL=class vL extends y.Component{static canUseDOM=xL;helmetData;constructor(e){super(e),this.helmetData=new V1(this.props.context||{},vL.canUseDOM)}render(){return he.createElement(yL.Provider,{value:this.helmetData.value},this.props.children)}},zu=(t,e)=>{const n=document.head||document.querySelector("head"),s=n.querySelectorAll(`${t}[${xi}]`),r=[].slice.call(s),i=[];let l;return e&&e.length&&e.forEach(d=>{const u=document.createElement(t);for(const h in d)if(Object.prototype.hasOwnProperty.call(d,h))if(h==="innerHTML")u.innerHTML=d.innerHTML;else if(h==="cssText")u.styleSheet?u.styleSheet.cssText=d.cssText:u.appendChild(document.createTextNode(d.cssText));else{const f=h,p=typeof d[f]>"u"?"":d[f];u.setAttribute(h,p)}u.setAttribute(xi,"true"),r.some((h,f)=>(l=f,u.isEqualNode(h)))?r.splice(l,1):i.push(u)}),r.forEach(d=>d.parentNode?.removeChild(d)),i.forEach(d=>n.appendChild(d)),{oldTags:r,newTags:i}},U1=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const s=n.getAttribute(xi),r=s?s.split(","):[],i=[...r],l=Object.keys(e);for(const d of l){const u=e[d]||"";n.getAttribute(d)!==u&&n.setAttribute(d,u),r.indexOf(d)===-1&&r.push(d);const h=i.indexOf(d);h!==-1&&i.splice(h,1)}for(let d=i.length-1;d>=0;d-=1)n.removeAttribute(i[d]);r.length===i.length?n.removeAttribute(xi):n.getAttribute(xi)!==l.join(",")&&n.setAttribute(xi,l.join(","))},IB=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=fL(t)),U1("title",e)},aA=(t,e)=>{const{baseTag:n,bodyAttributes:s,htmlAttributes:r,linkTags:i,metaTags:l,noscriptTags:d,onChangeClientState:u,scriptTags:h,styleTags:f,title:p,titleAttributes:x}=t;U1("body",s),U1("html",r),IB(p,x);const b={baseTag:zu("base",n),linkTags:zu("link",i),metaTags:zu("meta",l),noscriptTags:zu("noscript",d),scriptTags:zu("script",h),styleTags:zu("style",f)},_={},j={};Object.keys(b).forEach(v=>{const{newTags:T,oldTags:P}=b[v];T.length&&(_[v]=T),P.length&&(j[v]=b[v].oldTags)}),e&&e(),u(t,_,j)},af=null,OB=t=>{af&&cancelAnimationFrame(af),t.defer?af=requestAnimationFrame(()=>{aA(t,()=>{af=null})}):(aA(t),af=null)},VB=OB,iA=class extends y.Component{rendered=!1;shouldComponentUpdate(t){return!vB(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:e}=this.props.context;let n=null;const s=SB(t.get().map(r=>{const i={...r.props};return delete i.context,i}));bL.canUseDOM?VB(s):O1&&(n=O1(s)),e(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},wL=class extends y.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(t){return!pB(rA(this.props,"helmetData"),rA(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,s){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,s)}]}}mapObjectTypeChildren(t,e,n,s){switch(t.type){case"title":return{...e,[t.type]:s,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(s=>{n={...n,[s]:t[s]}}),n}warnOnInvalidChildren(t,e){return tA(sA.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${sA.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),tA(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return he.Children.forEach(t,s=>{if(!s||!s.props)return;const{children:r,...i}=s.props,l=Object.keys(i).reduce((u,h)=>(u[wB[h]||h]=i[h],u),{});let{type:d}=s;switch(typeof d=="symbol"?d=d.toString():this.warnOnInvalidChildren(s,r),d){case"Symbol(react.fragment)":e=this.mapChildrenToProps(r,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(s,n,l,r);break;default:e=this.mapObjectTypeChildren(s,e,l,r);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:s}=e;if(t&&(n=this.mapChildrenToProps(t,n)),s&&!(s instanceof V1)){const r=s;s=new V1(r.context,!0),delete n.helmetData}return s?he.createElement(iA,{...n,context:s.value}):he.createElement(yL.Consumer,null,r=>he.createElement(iA,{...n,context:r}))}},zc=hL();const UB=su(zc);function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},hp.apply(this,arguments)}var xc;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xc||(xc={}));const oA="popstate";function BB(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:l,hash:d}=s.location;return B1("",{pathname:i,search:l,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Ux(r)}return $B(e,n,null,t)}function js(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function k2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FB(){return Math.random().toString(36).substr(2,8)}function lA(t,e){return{usr:t.state,key:t.key,idx:e}}function B1(t,e,n,s){return n===void 0&&(n=null),hp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Jh(e):e,{state:n,key:e&&e.key||s||FB()})}function Ux(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Jh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function $B(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,l=r.history,d=xc.Pop,u=null,h=f();h==null&&(h=0,l.replaceState(hp({},l.state,{idx:h}),""));function f(){return(l.state||{idx:null}).idx}function p(){d=xc.Pop;let v=f(),T=v==null?null:v-h;h=v,u&&u({action:d,location:j.location,delta:T})}function x(v,T){d=xc.Push;let P=B1(j.location,v,T);h=f()+1;let A=lA(P,h),C=j.createHref(P);try{l.pushState(A,"",C)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(C)}i&&u&&u({action:d,location:j.location,delta:1})}function b(v,T){d=xc.Replace;let P=B1(j.location,v,T);h=f();let A=lA(P,h),C=j.createHref(P);l.replaceState(A,"",C),i&&u&&u({action:d,location:j.location,delta:0})}function _(v){let T=r.location.origin!=="null"?r.location.origin:r.location.href,P=typeof v=="string"?v:Ux(v);return P=P.replace(/ $/,"%20"),js(T,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,T)}let j={get action(){return d},get location(){return t(r,l)},listen(v){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(oA,p),u=v,()=>{r.removeEventListener(oA,p),u=null}},createHref(v){return e(r,v)},createURL:_,encodeLocation(v){let T=_(v);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:x,replace:b,go(v){return l.go(v)}};return j}var cA;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cA||(cA={}));function zB(t,e,n){return n===void 0&&(n="/"),HB(t,e,n)}function HB(t,e,n,s){let r=typeof e=="string"?Jh(e):e,i=A2(r.pathname||"/",n);if(i==null)return null;let l=_L(t);qB(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=sF(i);d=eF(l[u],h)}return d}function _L(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,l,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(js(u.relativePath.startsWith(s),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(s.length));let h=wc([s,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(js(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),_L(i.children,e,f,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:ZB(h,i.index),routesMeta:f})};return t.forEach((i,l)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))r(i,l);else for(let u of EL(i.path))r(i,l,u)}),e}function EL(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let l=EL(s.join("/")),d=[];return d.push(...l.map(u=>u===""?i:[i,u].join("/"))),r&&d.push(...l),d.map(u=>t.startsWith("/")&&u===""?"/":u)}function qB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:JB(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const WB=/^:[\w-]+$/,YB=3,GB=2,KB=1,QB=10,XB=-2,dA=t=>t==="*";function ZB(t,e){let n=t.split("/"),s=n.length;return n.some(dA)&&(s+=XB),e&&(s+=GB),n.filter(r=>!dA(r)).reduce((r,i)=>r+(WB.test(i)?YB:i===""?KB:QB),s)}function JB(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function eF(t,e,n){let{routesMeta:s}=t,r={},i="/",l=[];for(let d=0;d<s.length;++d){let u=s[d],h=d===s.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=tF({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),x=u.route;if(!p)return null;Object.assign(r,p.params),l.push({params:r,pathname:wc([i,p.pathname]),pathnameBase:lF(wc([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=wc([i,p.pathnameBase]))}return l}function tF(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=nF(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],l=i.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:s.reduce((h,f,p)=>{let{paramName:x,isOptional:b}=f;if(x==="*"){let j=d[p]||"";l=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const _=d[p];return b&&!_?h[x]=void 0:h[x]=(_||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:t}}function nF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),k2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(s.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function sF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return k2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function A2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}const rF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aF=t=>rF.test(t);function iF(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Jh(t):t,i;if(n)if(aF(n))i=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),k2(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+n))}n.startsWith("/")?i=uA(n.substring(1),"/"):i=uA(n,e)}else i=e;return{pathname:i,search:cF(s),hash:dF(r)}}function uA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function b_(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function R2(t,e){let n=oF(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function D2(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=Jh(t):(r=hp({},t),js(!r.pathname||!r.pathname.includes("?"),b_("?","pathname","search",r)),js(!r.pathname||!r.pathname.includes("#"),b_("#","pathname","hash",r)),js(!r.search||!r.search.includes("#"),b_("#","search","hash",r)));let i=t===""||r.pathname==="",l=i?"/":r.pathname,d;if(l==null)d=n;else{let p=e.length-1;if(!s&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;r.pathname=x.join("/")}d=p>=0?e[p]:"/"}let u=iF(r,d),h=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const wc=t=>t.join("/").replace(/\/\/+/g,"/"),lF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const NL=["post","put","patch","delete"];new Set(NL);const hF=["get",...NL];new Set(hF);function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},mp.apply(this,arguments)}const P2=y.createContext(null),mF=y.createContext(null),Hc=y.createContext(null),ab=y.createContext(null),kl=y.createContext({outlet:null,matches:[],isDataRoute:!1}),jL=y.createContext(null);function fF(t,e){let{relative:n}=e===void 0?{}:e;em()||js(!1);let{basename:s,navigator:r}=y.useContext(Hc),{hash:i,pathname:l,search:d}=SL(t,{relative:n}),u=l;return s!=="/"&&(u=l==="/"?s:wc([s,l])),r.createHref({pathname:u,search:d,hash:i})}function em(){return y.useContext(ab)!=null}function ka(){return em()||js(!1),y.useContext(ab).location}function CL(t){y.useContext(Hc).static||y.useLayoutEffect(t)}function qe(){let{isDataRoute:t}=y.useContext(kl);return t?SF():pF()}function pF(){em()||js(!1);let t=y.useContext(P2),{basename:e,future:n,navigator:s}=y.useContext(Hc),{matches:r}=y.useContext(kl),{pathname:i}=ka(),l=JSON.stringify(R2(r,n.v7_relativeSplatPath)),d=y.useRef(!1);return CL(()=>{d.current=!0}),y.useCallback(function(h,f){if(f===void 0&&(f={}),!d.current)return;if(typeof h=="number"){s.go(h);return}let p=D2(h,JSON.parse(l),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:wc([e,p.pathname])),(f.replace?s.replace:s.push)(p,f.state,f)},[e,s,l,i,t])}function Mr(){let{matches:t}=y.useContext(kl),e=t[t.length-1];return e?e.params:{}}function SL(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=y.useContext(Hc),{matches:r}=y.useContext(kl),{pathname:i}=ka(),l=JSON.stringify(R2(r,s.v7_relativeSplatPath));return y.useMemo(()=>D2(t,JSON.parse(l),i,n==="path"),[t,l,i,n])}function gF(t,e){return xF(t,e)}function xF(t,e,n,s){em()||js(!1);let{navigator:r}=y.useContext(Hc),{matches:i}=y.useContext(kl),l=i[i.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let h=ka(),f;if(e){var p;let v=typeof e=="string"?Jh(e):e;u==="/"||(p=v.pathname)!=null&&p.startsWith(u)||js(!1),f=v}else f=h;let x=f.pathname||"/",b=x;if(u!=="/"){let v=u.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(v.length).join("/")}let _=zB(t,{pathname:b}),j=_F(_&&_.map(v=>Object.assign({},v,{params:Object.assign({},d,v.params),pathname:wc([u,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:wc([u,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,s);return e&&j?y.createElement(ab.Provider,{value:{location:mp({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:xc.Pop}},j):j}function yF(){let t=CF(),e=uF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:r},n):null,null)}const bF=y.createElement(yF,null);class vF extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(kl.Provider,{value:this.props.routeContext},y.createElement(jL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wF(t){let{routeContext:e,match:n,children:s}=t,r=y.useContext(P2);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(kl.Provider,{value:e},s)}function _F(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,d=(r=n)==null?void 0:r.errors;if(d!=null){let f=l.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);f>=0||js(!1),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,h=-1;if(n&&s&&s.v7_partialHydration)for(let f=0;f<l.length;f++){let p=l[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:x,errors:b}=n,_=p.route.loader&&x[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||_){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((f,p,x)=>{let b,_=!1,j=null,v=null;n&&(b=d&&p.route.id?d[p.route.id]:void 0,j=p.route.errorElement||bF,u&&(h<0&&x===0?(TF("route-fallback"),_=!0,v=null):h===x&&(_=!0,v=p.route.hydrateFallbackElement||null)));let T=e.concat(l.slice(0,x+1)),P=()=>{let A;return b?A=j:_?A=v:p.route.Component?A=y.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=f,y.createElement(wF,{match:p,routeContext:{outlet:f,matches:T,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?y.createElement(vF,{location:n.location,revalidation:n.revalidation,component:j,error:b,children:P(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):P()},null)}var TL=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(TL||{}),kL=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(kL||{});function EF(t){let e=y.useContext(P2);return e||js(!1),e}function NF(t){let e=y.useContext(mF);return e||js(!1),e}function jF(t){let e=y.useContext(kl);return e||js(!1),e}function AL(t){let e=jF(),n=e.matches[e.matches.length-1];return n.route.id||js(!1),n.route.id}function CF(){var t;let e=y.useContext(jL),n=NF(),s=AL();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function SF(){let{router:t}=EF(TL.UseNavigateStable),e=AL(kL.UseNavigateStable),n=y.useRef(!1);return CL(()=>{n.current=!0}),y.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,mp({fromRouteId:e},i)))},[t,e])}const hA={};function TF(t,e,n){hA[t]||(hA[t]=!0)}function kF(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function v_(t){let{to:e,replace:n,state:s,relative:r}=t;em()||js(!1);let{future:i,static:l}=y.useContext(Hc),{matches:d}=y.useContext(kl),{pathname:u}=ka(),h=qe(),f=D2(e,R2(d,i.v7_relativeSplatPath),u,r==="path"),p=JSON.stringify(f);return y.useEffect(()=>h(JSON.parse(p),{replace:n,state:s,relative:r}),[h,p,r,n,s]),null}function De(t){js(!1)}function AF(t){let{basename:e="/",children:n=null,location:s,navigationType:r=xc.Pop,navigator:i,static:l=!1,future:d}=t;em()&&js(!1);let u=e.replace(/^\/*/,"/"),h=y.useMemo(()=>({basename:u,navigator:i,static:l,future:mp({v7_relativeSplatPath:!1},d)}),[u,d,i,l]);typeof s=="string"&&(s=Jh(s));let{pathname:f="/",search:p="",hash:x="",state:b=null,key:_="default"}=s,j=y.useMemo(()=>{let v=A2(f,u);return v==null?null:{location:{pathname:v,search:p,hash:x,state:b,key:_},navigationType:r}},[u,f,p,x,b,_,r]);return j==null?null:y.createElement(Hc.Provider,{value:h},y.createElement(ab.Provider,{children:n,value:j}))}function RL(t){let{children:e,location:n}=t;return gF(F1(e),n)}new Promise(()=>{});function F1(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(s,r)=>{if(!y.isValidElement(s))return;let i=[...e,r];if(s.type===y.Fragment){n.push.apply(n,F1(s.props.children,i));return}s.type!==De&&js(!1),!s.props.index||!s.props.children||js(!1);let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=F1(s.props.children,i)),n.push(l)}),n}function $1(){return $1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},$1.apply(this,arguments)}function RF(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function DF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function PF(t,e){return t.button===0&&(!e||e==="_self")&&!DF(t)}function z1(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let s=t[n];return e.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function MF(t,e){let n=z1(t);return e&&e.forEach((s,r)=>{n.has(r)||e.getAll(r).forEach(i=>{n.append(r,i)})}),n}const LF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IF="6";try{window.__reactRouterVersion=IF}catch{}const OF="startTransition",mA=S2[OF];function DL(t){let{basename:e,children:n,future:s,window:r}=t,i=y.useRef();i.current==null&&(i.current=BB({window:r,v5Compat:!0}));let l=i.current,[d,u]=y.useState({action:l.action,location:l.location}),{v7_startTransition:h}=s||{},f=y.useCallback(p=>{h&&mA?mA(()=>u(p)):u(p)},[u,h]);return y.useLayoutEffect(()=>l.listen(f),[l,f]),y.useEffect(()=>kF(s),[s]),y.createElement(AF,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:l,future:s})}const VF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jt=y.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:l,state:d,target:u,to:h,preventScrollReset:f,viewTransition:p}=e,x=RF(e,LF),{basename:b}=y.useContext(Hc),_,j=!1;if(typeof h=="string"&&UF.test(h)&&(_=h,VF))try{let A=new URL(window.location.href),C=h.startsWith("//")?new URL(A.protocol+h):new URL(h),M=A2(C.pathname,b);C.origin===A.origin&&M!=null?h=M+C.search+C.hash:j=!0}catch{}let v=fF(h,{relative:r}),T=BF(h,{replace:l,state:d,target:u,preventScrollReset:f,relative:r,viewTransition:p});function P(A){s&&s(A),A.defaultPrevented||T(A)}return y.createElement("a",$1({},x,{href:_||v,onClick:j||i?s:P,ref:n,target:u}))});var fA;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fA||(fA={}));var pA;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pA||(pA={}));function BF(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:l,viewTransition:d}=e===void 0?{}:e,u=qe(),h=ka(),f=SL(t,{relative:l});return y.useCallback(p=>{if(PF(p,n)){p.preventDefault();let x=s!==void 0?s:Ux(h)===Ux(f);u(t,{replace:x,state:r,preventScrollReset:i,relative:l,viewTransition:d})}},[h,u,f,s,r,n,t,i,l,d])}function M2(t){let e=y.useRef(z1(t)),n=y.useRef(!1),s=ka(),r=y.useMemo(()=>MF(s.search,n.current?null:e.current),[s.search]),i=qe(),l=y.useCallback((d,u)=>{const h=z1(typeof d=="function"?d(r):d);n.current=!0,i("?"+h,u)},[i,r]);return[r,l]}let FF={data:""},$F=t=>{if(typeof window=="object"){let e=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(t||document.head).appendChild(e),e.firstChild}return t||FF},zF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,HF=/\/\*[^]*?\*\/|  +/g,gA=/\n+/g,hc=(t,e)=>{let n="",s="",r="";for(let i in t){let l=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+l+";":s+=i[1]=="f"?hc(l,i):i+"{"+hc(l,i[1]=="k"?"":e)+"}":typeof l=="object"?s+=hc(l,e?e.replace(/([^,])+/g,d=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,d):d?d+" "+u:u)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=hc.p?hc.p(i,l):i+":"+l+";")}return n+(e&&r?e+"{"+r+"}":r)+s},el={},PL=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+PL(t[n]);return e}return t},qF=(t,e,n,s,r)=>{let i=PL(t),l=el[i]||(el[i]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(i));if(!el[l]){let u=i!==t?t:(h=>{let f,p,x=[{}];for(;f=zF.exec(h.replace(HF,""));)f[4]?x.shift():f[3]?(p=f[3].replace(gA," ").trim(),x.unshift(x[0][p]=x[0][p]||{})):x[0][f[1]]=f[2].replace(gA," ").trim();return x[0]})(t);el[l]=hc(r?{["@keyframes "+l]:u}:u,n?"":"."+l)}let d=n&&el.g?el.g:null;return n&&(el.g=el[l]),((u,h,f,p)=>{p?h.data=h.data.replace(p,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(el[l],e,s,d),l},WF=(t,e,n)=>t.reduce((s,r,i)=>{let l=e[i];if(l&&l.call){let d=l(n),u=d&&d.props&&d.props.className||/^go/.test(d)&&d;l=u?"."+u:d&&typeof d=="object"?d.props?"":hc(d,""):d===!1?"":d}return s+r+(l??"")},"");function ib(t){let e=this||{},n=t.call?t(e.p):t;return qF(n.unshift?n.raw?WF(n,[].slice.call(arguments,1),e.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(e.p):r),{}):n,$F(e.target),e.g,e.o,e.k)}let ML,H1,q1;ib.bind({g:1});let xl=ib.bind({k:1});function YF(t,e,n,s){hc.p=e,ML=t,H1=n,q1=s}function qc(t,e){let n=this||{};return function(){let s=arguments;function r(i,l){let d=Object.assign({},i),u=d.className||r.className;n.p=Object.assign({theme:H1&&H1()},d),n.o=/ *go\d+/.test(u),d.className=ib.apply(n,s)+(u?" "+u:"");let h=t;return t[0]&&(h=d.as||t,delete d.as),q1&&h[0]&&q1(d),ML(h,d)}return r}}var GF=t=>typeof t=="function",Bx=(t,e)=>GF(t)?t(e):t,KF=(()=>{let t=0;return()=>(++t).toString()})(),LL=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),QF=20,L2="default",IL=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===e.toast.id?{...l,...e.toast}:l)};case 2:let{toast:s}=e;return IL(t,{type:t.toasts.find(l=>l.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},fx=[],OL={toasts:[],pausedAt:void 0,settings:{toastLimit:QF}},so={},VL=(t,e=L2)=>{so[e]=IL(so[e]||OL,t),fx.forEach(([n,s])=>{n===e&&s(so[e])})},UL=t=>Object.keys(so).forEach(e=>VL(t,e)),XF=t=>Object.keys(so).find(e=>so[e].toasts.some(n=>n.id===t)),ob=(t=L2)=>e=>{VL(e,t)},ZF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},JF=(t={},e=L2)=>{let[n,s]=y.useState(so[e]||OL),r=y.useRef(so[e]);y.useEffect(()=>(r.current!==so[e]&&s(so[e]),fx.push([e,s]),()=>{let l=fx.findIndex(([d])=>d===e);l>-1&&fx.splice(l,1)}),[e]);let i=n.toasts.map(l=>{var d,u,h;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((d=t[l.type])==null?void 0:d.removeDelay)||t?.removeDelay,duration:l.duration||((u=t[l.type])==null?void 0:u.duration)||t?.duration||ZF[l.type],style:{...t.style,...(h=t[l.type])==null?void 0:h.style,...l.style}}});return{...n,toasts:i}},e$=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:n?.id||KF()}),Up=t=>(e,n)=>{let s=e$(e,t,n);return ob(s.toasterId||XF(s.id))({type:2,toast:s}),s.id},Ws=(t,e)=>Up("blank")(t,e);Ws.error=Up("error");Ws.success=Up("success");Ws.loading=Up("loading");Ws.custom=Up("custom");Ws.dismiss=(t,e)=>{let n={type:3,toastId:t};e?ob(e)(n):UL(n)};Ws.dismissAll=t=>Ws.dismiss(void 0,t);Ws.remove=(t,e)=>{let n={type:4,toastId:t};e?ob(e)(n):UL(n)};Ws.removeAll=t=>Ws.remove(void 0,t);Ws.promise=(t,e,n)=>{let s=Ws.loading(e.loading,{...n,...n?.loading});return typeof t=="function"&&(t=t()),t.then(r=>{let i=e.success?Bx(e.success,r):void 0;return i?Ws.success(i,{id:s,...n,...n?.success}):Ws.dismiss(s),r}).catch(r=>{let i=e.error?Bx(e.error,r):void 0;i?Ws.error(i,{id:s,...n,...n?.error}):Ws.dismiss(s)}),t};var t$=1e3,n$=(t,e="default")=>{let{toasts:n,pausedAt:s}=JF(t,e),r=y.useRef(new Map).current,i=y.useCallback((p,x=t$)=>{if(r.has(p))return;let b=setTimeout(()=>{r.delete(p),l({type:4,toastId:p})},x);r.set(p,b)},[]);y.useEffect(()=>{if(s)return;let p=Date.now(),x=n.map(b=>{if(b.duration===1/0)return;let _=(b.duration||0)+b.pauseDuration-(p-b.createdAt);if(_<0){b.visible&&Ws.dismiss(b.id);return}return setTimeout(()=>Ws.dismiss(b.id,e),_)});return()=>{x.forEach(b=>b&&clearTimeout(b))}},[n,s,e]);let l=y.useCallback(ob(e),[e]),d=y.useCallback(()=>{l({type:5,time:Date.now()})},[l]),u=y.useCallback((p,x)=>{l({type:1,toast:{id:p,height:x}})},[l]),h=y.useCallback(()=>{s&&l({type:6,time:Date.now()})},[s,l]),f=y.useCallback((p,x)=>{let{reverseOrder:b=!1,gutter:_=8,defaultPosition:j}=x||{},v=n.filter(A=>(A.position||j)===(p.position||j)&&A.height),T=v.findIndex(A=>A.id===p.id),P=v.filter((A,C)=>C<T&&A.visible).length;return v.filter(A=>A.visible).slice(...b?[P+1]:[0,P]).reduce((A,C)=>A+(C.height||0)+_,0)},[n]);return y.useEffect(()=>{n.forEach(p=>{if(p.dismissed)i(p.id,p.removeDelay);else{let x=r.get(p.id);x&&(clearTimeout(x),r.delete(p.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:u,startPause:d,endPause:h,calculateOffset:f}}},s$=xl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,r$=xl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,a$=xl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,i$=qc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${s$} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${r$} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${a$} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,o$=xl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,l$=qc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${o$} 1s linear infinite;
`,c$=xl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,d$=xl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,u$=qc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${c$} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${d$} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,h$=qc("div")`
  position: absolute;
`,m$=qc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,f$=xl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,p$=qc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${f$} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,g$=({toast:t})=>{let{icon:e,type:n,iconTheme:s}=t;return e!==void 0?typeof e=="string"?y.createElement(p$,null,e):e:n==="blank"?null:y.createElement(m$,null,y.createElement(l$,{...s}),n!=="loading"&&y.createElement(h$,null,n==="error"?y.createElement(i$,{...s}):y.createElement(u$,{...s})))},x$=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,y$=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,b$="0%{opacity:0;} 100%{opacity:1;}",v$="0%{opacity:1;} 100%{opacity:0;}",w$=qc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,_$=qc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,E$=(t,e)=>{let n=t.includes("top")?1:-1,[s,r]=LL()?[b$,v$]:[x$(n),y$(n)];return{animation:e?`${xl(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xl(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},N$=y.memo(({toast:t,position:e,style:n,children:s})=>{let r=t.height?E$(t.position||e||"top-center",t.visible):{opacity:0},i=y.createElement(g$,{toast:t}),l=y.createElement(_$,{...t.ariaProps},Bx(t.message,t));return y.createElement(w$,{className:t.className,style:{...r,...n,...t.style}},typeof s=="function"?s({icon:i,message:l}):y.createElement(y.Fragment,null,i,l))});YF(y.createElement);var j$=({id:t,className:e,style:n,onHeightUpdate:s,children:r})=>{let i=y.useCallback(l=>{if(l){let d=()=>{let u=l.getBoundingClientRect().height;s(t,u)};d(),new MutationObserver(d).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return y.createElement("div",{ref:i,className:e,style:n},r)},C$=(t,e)=>{let n=t.includes("top"),s=n?{top:0}:{bottom:0},r=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:LL()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...s,...r}},S$=ib`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,P0=16,T$=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:s,children:r,toasterId:i,containerStyle:l,containerClassName:d})=>{let{toasts:u,handlers:h}=n$(n,i);return y.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:P0,left:P0,right:P0,bottom:P0,pointerEvents:"none",...l},className:d,onMouseEnter:h.startPause,onMouseLeave:h.endPause},u.map(f=>{let p=f.position||e,x=h.calculateOffset(f,{reverseOrder:t,gutter:s,defaultPosition:e}),b=C$(p,x);return y.createElement(j$,{id:f.id,key:f.id,onHeightUpdate:h.updateHeight,className:f.visible?S$:"",style:b},f.type==="custom"?Bx(f.message,f):r?r(f):y.createElement(N$,{toast:f,position:p}))}))},J=Ws;const I2=y.createContext({});function Bp(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const O2=typeof window<"u",V2=O2?y.useLayoutEffect:y.useEffect,lb=y.createContext(null);function U2(t,e){t.indexOf(e)===-1&&t.push(e)}function B2(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const yl=(t,e,n)=>n>e?e:n<t?t:n;let F2=()=>{};const bl={},BL=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function FL(t){return typeof t=="object"&&t!==null}const $L=t=>/^0[^.\s]+$/u.test(t);function $2(t){let e;return()=>(e===void 0&&(e=t()),e)}const Qa=t=>t,k$=(t,e)=>n=>e(t(n)),Fp=(...t)=>t.reduce(k$),fp=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};let z2=class{constructor(){this.subscriptions=[]}add(e){return U2(this.subscriptions,e),()=>B2(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const l=this.subscriptions[i];l&&l(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};const oo=t=>t*1e3,Ga=t=>t/1e3;function zL(t,e){return e?t*(1e3/e):0}const HL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,A$=1e-7,R$=12;function D$(t,e,n,s,r){let i,l,d=0;do l=e+(n-e)/2,i=HL(l,s,r)-t,i>0?n=l:e=l;while(Math.abs(i)>A$&&++d<R$);return l}function $p(t,e,n,s){if(t===e&&n===s)return Qa;const r=i=>D$(i,0,1,t,n);return i=>i===0||i===1?i:HL(r(i),e,s)}const qL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,WL=t=>e=>1-t(1-e),YL=$p(.33,1.53,.69,.99),H2=WL(YL),GL=qL(H2),KL=t=>(t*=2)<1?.5*H2(t):.5*(2-Math.pow(2,-10*(t-1))),q2=t=>1-Math.sin(Math.acos(t)),QL=WL(q2),XL=qL(q2),P$=$p(.42,0,1,1),M$=$p(0,0,.58,1),ZL=$p(.42,0,.58,1),L$=t=>Array.isArray(t)&&typeof t[0]!="number",JL=t=>Array.isArray(t)&&typeof t[0]=="number",I$={linear:Qa,easeIn:P$,easeInOut:ZL,easeOut:M$,circIn:q2,circInOut:XL,circOut:QL,backIn:H2,backInOut:GL,backOut:YL,anticipate:KL},O$=t=>typeof t=="string",xA=t=>{if(JL(t)){F2(t.length===4);const[e,n,s,r]=t;return $p(e,n,s,r)}else if(O$(t))return I$[t];return t},M0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function V$(t,e){let n=new Set,s=new Set,r=!1,i=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function u(f){l.has(f)&&(h.schedule(f),t()),f(d)}const h={schedule:(f,p=!1,x=!1)=>{const _=x&&r?n:s;return p&&l.add(f),_.has(f)||_.add(f),f},cancel:f=>{s.delete(f),l.delete(f)},process:f=>{if(d=f,r){i=!0;return}r=!0,[n,s]=[s,n],n.forEach(u),n.clear(),r=!1,i&&(i=!1,h.process(f))}};return h}const U$=40;function eI(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,l=M0.reduce((A,C)=>(A[C]=V$(i),A),{}),{setup:d,read:u,resolveKeyframes:h,preUpdate:f,update:p,preRender:x,render:b,postRender:_}=l,j=()=>{const A=bl.useManualTiming?r.timestamp:performance.now();n=!1,bl.useManualTiming||(r.delta=s?1e3/60:Math.max(Math.min(A-r.timestamp,U$),1)),r.timestamp=A,r.isProcessing=!0,d.process(r),u.process(r),h.process(r),f.process(r),p.process(r),x.process(r),b.process(r),_.process(r),r.isProcessing=!1,n&&e&&(s=!1,t(j))},v=()=>{n=!0,s=!0,r.isProcessing||t(j)};return{schedule:M0.reduce((A,C)=>{const M=l[C];return A[C]=(L,k=!1,R=!1)=>(n||v(),M.schedule(L,k,R)),A},{}),cancel:A=>{for(let C=0;C<M0.length;C++)l[M0[C]].cancel(A)},state:r,steps:l}}const{schedule:Hn,cancel:vl,state:fr,steps:w_}=eI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qa,!0);let px;function B$(){px=void 0}const la={now:()=>(px===void 0&&la.set(fr.isProcessing||bl.useManualTiming?fr.timestamp:performance.now()),px),set:t=>{px=t,queueMicrotask(B$)}},tI=t=>e=>typeof e=="string"&&e.startsWith(t),W2=tI("--"),F$=tI("var(--"),Y2=t=>F$(t)?$$.test(t.split("/*")[0].trim()):!1,$$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},pp={...tm,transform:t=>yl(0,1,t)},L0={...tm,default:1},$f=t=>Math.round(t*1e5)/1e5,G2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function z$(t){return t==null}const H$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,K2=(t,e)=>n=>!!(typeof n=="string"&&H$.test(n)&&n.startsWith(t)||e&&!z$(n)&&Object.prototype.hasOwnProperty.call(n,e)),nI=(t,e,n)=>s=>{if(typeof s!="string")return s;const[r,i,l,d]=s.match(G2);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},q$=t=>yl(0,255,t),__={...tm,transform:t=>Math.round(q$(t))},kd={test:K2("rgb","red"),parse:nI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+__.transform(t)+", "+__.transform(e)+", "+__.transform(n)+", "+$f(pp.transform(s))+")"};function W$(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const W1={test:K2("#"),parse:W$,transform:kd.transform},zp=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),lc=zp("deg"),lo=zp("%"),dt=zp("px"),Y$=zp("vh"),G$=zp("vw"),yA={...lo,parse:t=>lo.parse(t)/100,transform:t=>lo.transform(t*100)},ih={test:K2("hsl","hue"),parse:nI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+lo.transform($f(e))+", "+lo.transform($f(n))+", "+$f(pp.transform(s))+")"},Vs={test:t=>kd.test(t)||W1.test(t)||ih.test(t),parse:t=>kd.test(t)?kd.parse(t):ih.test(t)?ih.parse(t):W1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?kd.transform(t):ih.transform(t),getAnimatableNone:t=>{const e=Vs.parse(t);return e.alpha=0,Vs.transform(e)}},K$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Q$(t){return isNaN(t)&&typeof t=="string"&&(t.match(G2)?.length||0)+(t.match(K$)?.length||0)>0}const sI="number",rI="color",X$="var",Z$="var(",bA="${}",J$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gp(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},r=[];let i=0;const d=e.replace(J$,u=>(Vs.test(u)?(s.color.push(i),r.push(rI),n.push(Vs.parse(u))):u.startsWith(Z$)?(s.var.push(i),r.push(X$),n.push(u)):(s.number.push(i),r.push(sI),n.push(parseFloat(u))),++i,bA)).split(bA);return{values:n,split:d,indexes:s,types:r}}function aI(t){return gp(t).values}function iI(t){const{split:e,types:n}=gp(t),s=e.length;return r=>{let i="";for(let l=0;l<s;l++)if(i+=e[l],r[l]!==void 0){const d=n[l];d===sI?i+=$f(r[l]):d===rI?i+=Vs.transform(r[l]):i+=r[l]}return i}}const ez=t=>typeof t=="number"?0:Vs.test(t)?Vs.getAnimatableNone(t):t;function tz(t){const e=aI(t);return iI(t)(e.map(ez))}const Sc={test:Q$,parse:aI,createTransformer:iI,getAnimatableNone:tz};function E_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function nz({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,l=0;if(!e)r=i=l=n;else{const d=n<.5?n*(1+e):n+e-n*e,u=2*n-d;r=E_(u,d,t+1/3),i=E_(u,d,t),l=E_(u,d,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(l*255),alpha:s}}function Fx(t,e){return n=>n>0?e:t}const rs=(t,e,n)=>t+(e-t)*n,N_=(t,e,n)=>{const s=t*t,r=n*(e*e-s)+s;return r<0?0:Math.sqrt(r)},sz=[W1,kd,ih],rz=t=>sz.find(e=>e.test(t));function vA(t){const e=rz(t);if(!e)return!1;let n=e.parse(t);return e===ih&&(n=nz(n)),n}const wA=(t,e)=>{const n=vA(t),s=vA(e);if(!n||!s)return Fx(t,e);const r={...n};return i=>(r.red=N_(n.red,s.red,i),r.green=N_(n.green,s.green,i),r.blue=N_(n.blue,s.blue,i),r.alpha=rs(n.alpha,s.alpha,i),kd.transform(r))},Y1=new Set(["none","hidden"]);function az(t,e){return Y1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function iz(t,e){return n=>rs(t,e,n)}function Q2(t){return typeof t=="number"?iz:typeof t=="string"?Y2(t)?Fx:Vs.test(t)?wA:cz:Array.isArray(t)?oI:typeof t=="object"?Vs.test(t)?wA:oz:Fx}function oI(t,e){const n=[...t],s=n.length,r=t.map((i,l)=>Q2(i)(i,e[l]));return i=>{for(let l=0;l<s;l++)n[l]=r[l](i);return n}}function oz(t,e){const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=Q2(t[r])(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}}function lz(t,e){const n=[],s={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const i=e.types[r],l=t.indexes[i][s[i]],d=t.values[l]??0;n[r]=d,s[i]++}return n}const cz=(t,e)=>{const n=Sc.createTransformer(e),s=gp(t),r=gp(e);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?Y1.has(t)&&!r.values.length||Y1.has(e)&&!s.values.length?az(t,e):Fp(oI(lz(s,r),r.values),n):Fx(t,e)};function lI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?rs(t,e,n):Q2(t)(t,e)}const dz=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Hn.update(e,n),stop:()=>vl(e),now:()=>fr.isProcessing?fr.timestamp:la.now()}},cI=(t,e,n=10)=>{let s="";const r=Math.max(Math.round(e/n),2);for(let i=0;i<r;i++)s+=Math.round(t(i/(r-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},$x=2e4;function X2(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<$x;)e+=n,s=t.next(e);return e>=$x?1/0:e}function uz(t,e=100,n){const s=n({...t,keyframes:[0,e]}),r=Math.min(X2(s),$x);return{type:"keyframes",ease:i=>s.next(r*i).value/e,duration:Ga(r)}}const hz=5;function dI(t,e,n){const s=Math.max(e-hz,0);return zL(n-t(s),e-s)}const fs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},j_=.001;function mz({duration:t=fs.duration,bounce:e=fs.bounce,velocity:n=fs.velocity,mass:s=fs.mass}){let r,i,l=1-e;l=yl(fs.minDamping,fs.maxDamping,l),t=yl(fs.minDuration,fs.maxDuration,Ga(t)),l<1?(r=h=>{const f=h*l,p=f*t,x=f-n,b=G1(h,l),_=Math.exp(-p);return j_-x/b*_},i=h=>{const p=h*l*t,x=p*n+n,b=Math.pow(l,2)*Math.pow(h,2)*t,_=Math.exp(-p),j=G1(Math.pow(h,2),l);return(-r(h)+j_>0?-1:1)*((x-b)*_)/j}):(r=h=>{const f=Math.exp(-h*t),p=(h-n)*t+1;return-j_+f*p},i=h=>{const f=Math.exp(-h*t),p=(n-h)*(t*t);return f*p});const d=5/t,u=pz(r,i,d);if(t=oo(t),isNaN(u))return{stiffness:fs.stiffness,damping:fs.damping,duration:t};{const h=Math.pow(u,2)*s;return{stiffness:h,damping:l*2*Math.sqrt(s*h),duration:t}}}const fz=12;function pz(t,e,n){let s=n;for(let r=1;r<fz;r++)s=s-t(s)/e(s);return s}function G1(t,e){return t*Math.sqrt(1-e*e)}const gz=["duration","bounce"],xz=["stiffness","damping","mass"];function _A(t,e){return e.some(n=>t[n]!==void 0)}function yz(t){let e={velocity:fs.velocity,stiffness:fs.stiffness,damping:fs.damping,mass:fs.mass,isResolvedFromDuration:!1,...t};if(!_A(t,xz)&&_A(t,gz))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,i=2*yl(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:fs.mass,stiffness:r,damping:i}}else{const n=mz(t);e={...e,...n,mass:fs.mass},e.isResolvedFromDuration=!0}return e}function zx(t=fs.visualDuration,e=fs.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:r}=n;const i=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],d={done:!1,value:i},{stiffness:u,damping:h,mass:f,duration:p,velocity:x,isResolvedFromDuration:b}=yz({...n,velocity:-Ga(n.velocity||0)}),_=x||0,j=h/(2*Math.sqrt(u*f)),v=l-i,T=Ga(Math.sqrt(u/f)),P=Math.abs(v)<5;s||(s=P?fs.restSpeed.granular:fs.restSpeed.default),r||(r=P?fs.restDelta.granular:fs.restDelta.default);let A;if(j<1){const M=G1(T,j);A=L=>{const k=Math.exp(-j*T*L);return l-k*((_+j*T*v)/M*Math.sin(M*L)+v*Math.cos(M*L))}}else if(j===1)A=M=>l-Math.exp(-T*M)*(v+(_+T*v)*M);else{const M=T*Math.sqrt(j*j-1);A=L=>{const k=Math.exp(-j*T*L),R=Math.min(M*L,300);return l-k*((_+j*T*v)*Math.sinh(R)+M*v*Math.cosh(R))/M}}const C={calculatedDuration:b&&p||null,next:M=>{const L=A(M);if(b)d.done=M>=p;else{let k=M===0?_:0;j<1&&(k=M===0?oo(_):dI(A,M,L));const R=Math.abs(k)<=s,S=Math.abs(l-L)<=r;d.done=R&&S}return d.value=d.done?l:L,d},toString:()=>{const M=Math.min(X2(C),$x),L=cI(k=>C.next(M*k).value,M,30);return M+"ms "+L},toTransition:()=>{}};return C}zx.applyToOptions=t=>{const e=uz(t,100,zx);return t.ease=e.ease,t.duration=oo(e.duration),t.type="keyframes",t};function K1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:l,min:d,max:u,restDelta:h=.5,restSpeed:f}){const p=t[0],x={done:!1,value:p},b=R=>d!==void 0&&R<d||u!==void 0&&R>u,_=R=>d===void 0?u:u===void 0||Math.abs(d-R)<Math.abs(u-R)?d:u;let j=n*e;const v=p+j,T=l===void 0?v:l(v);T!==v&&(j=T-p);const P=R=>-j*Math.exp(-R/s),A=R=>T+P(R),C=R=>{const S=P(R),O=A(R);x.done=Math.abs(S)<=h,x.value=x.done?T:O};let M,L;const k=R=>{b(x.value)&&(M=R,L=zx({keyframes:[x.value,_(x.value)],velocity:dI(A,R,x.value),damping:r,stiffness:i,restDelta:h,restSpeed:f}))};return k(0),{calculatedDuration:null,next:R=>{let S=!1;return!L&&M===void 0&&(S=!0,C(R),k(R)),M!==void 0&&R>=M?L.next(R-M):(!S&&C(R),x)}}}function bz(t,e,n){const s=[],r=n||bl.mix||lI,i=t.length-1;for(let l=0;l<i;l++){let d=r(t[l],t[l+1]);if(e){const u=Array.isArray(e)?e[l]||Qa:e;d=Fp(u,d)}s.push(d)}return s}function uI(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(F2(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=bz(e,s,r),u=d.length,h=f=>{if(l&&f<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const x=fp(t[p],t[p+1],f);return d[p](x)};return n?f=>h(yl(t[0],t[i-1],f)):h}function vz(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=fp(0,e,s);t.push(rs(n,1,r))}}function wz(t){const e=[0];return vz(e,t.length-1),e}function _z(t,e){return t.map(n=>n*e)}function Ez(t,e){return t.map(()=>e||ZL).splice(0,t.length-1)}function zf({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=L$(s)?s.map(xA):xA(s),i={done:!1,value:e[0]},l=_z(n&&n.length===e.length?n:wz(e),t),d=uI(l,e,{ease:Array.isArray(r)?r:Ez(e,r)});return{calculatedDuration:t,next:u=>(i.value=d(u),i.done=u>=t,i)}}const Nz=t=>t!==null;function Z2(t,{repeat:e,repeatType:n="loop"},s,r=1){const i=t.filter(Nz),d=r<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!d||s===void 0?i[d]:s}const jz={decay:K1,inertia:K1,tween:zf,keyframes:zf,spring:zx};function hI(t){typeof t.type=="string"&&(t.type=jz[t.type])}class J2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Cz=t=>t/100;class cb extends J2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==la.now()&&this.tick(la.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;hI(e);const{type:n=zf,repeat:s=0,repeatDelay:r=0,repeatType:i,velocity:l=0}=e;let{keyframes:d}=e;const u=n||zf;u!==zf&&typeof d[0]!="number"&&(this.mixKeyframes=Fp(Cz,lI(d[0],d[1])),d=[0,100]);const h=u({...e,keyframes:d});i==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...d].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=X2(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+r,this.totalDuration=this.resolvedDuration*(s+1)-r,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:r,mixKeyframes:i,mirroredGenerator:l,resolvedDuration:d,calculatedDuration:u}=this;if(this.startTime===null)return s.next(0);const{delay:h=0,keyframes:f,repeat:p,repeatType:x,repeatDelay:b,type:_,onUpdate:j,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-h*(this.playbackSpeed>=0?1:-1),P=this.playbackSpeed>=0?T<0:T>r;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let A=this.currentTime,C=s;if(p){const R=Math.min(this.currentTime,r)/d;let S=Math.floor(R),O=R%1;!O&&R>=1&&(O=1),O===1&&S--,S=Math.min(S,p+1),!!(S%2)&&(x==="reverse"?(O=1-O,b&&(O-=b/d)):x==="mirror"&&(C=l)),A=yl(0,1,O)*d}const M=P?{done:!1,value:f[0]}:C.next(A);i&&(M.value=i(M.value));let{done:L}=M;!P&&u!==null&&(L=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return k&&_!==K1&&(M.value=Z2(f,this.options,v,this.speed)),j&&j(M.value),k&&this.finish(),M}then(e,n){return this.finished.then(e,n)}get duration(){return Ga(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ga(e)}get time(){return Ga(this.currentTime)}set time(e){e=oo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(la.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ga(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=dz,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(la.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Sz(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ad=t=>t*180/Math.PI,Q1=t=>{const e=Ad(Math.atan2(t[1],t[0]));return X1(e)},Tz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Q1,rotateZ:Q1,skewX:t=>Ad(Math.atan(t[1])),skewY:t=>Ad(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},X1=t=>(t=t%360,t<0&&(t+=360),t),EA=Q1,NA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),jA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:NA,scaleY:jA,scale:t=>(NA(t)+jA(t))/2,rotateX:t=>X1(Ad(Math.atan2(t[6],t[5]))),rotateY:t=>X1(Ad(Math.atan2(-t[2],t[0]))),rotateZ:EA,rotate:EA,skewX:t=>Ad(Math.atan(t[4])),skewY:t=>Ad(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Z1(t){return t.includes("scale")?1:0}function J1(t,e){if(!t||t==="none")return Z1(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,r;if(n)s=kz,r=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=Tz,r=d}if(!r)return Z1(e);const i=s[e],l=r[1].split(",").map(Rz);return typeof i=="function"?i(l):l[i]}const Az=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return J1(n,e)};function Rz(t){return parseFloat(t.trim())}const nm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sm=new Set(nm),CA=t=>t===tm||t===dt,Dz=new Set(["x","y","z"]),Pz=nm.filter(t=>!Dz.has(t));function Mz(t){const e=[];return Pz.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Ld={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>J1(e,"x"),y:(t,{transform:e})=>J1(e,"y")};Ld.translateX=Ld.x;Ld.translateY=Ld.y;const Id=new Set;let eE=!1,tE=!1,nE=!1;function mI(){if(tE){const t=Array.from(Id).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const r=Mz(s);r.length&&(n.set(s,r),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([i,l])=>{s.getValue(i)?.set(l)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}tE=!1,eE=!1,Id.forEach(t=>t.complete(nE)),Id.clear()}function fI(){Id.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(tE=!0)})}function Lz(){nE=!0,fI(),mI(),nE=!1}class eN{constructor(e,n,s,r,i,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=r,this.element=i,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Id.add(this),eE||(eE=!0,Hn.read(fI),Hn.resolveKeyframes(mI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:r}=this;if(e[0]===null){const i=r?.get(),l=e[e.length-1];if(i!==void 0)e[0]=i;else if(s&&n){const d=s.readValue(n,l);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=l),r&&i===void 0&&r.set(e[0])}Sz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Id.delete(this)}cancel(){this.state==="scheduled"&&(Id.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Iz=t=>t.startsWith("--");function Oz(t,e,n){Iz(e)?t.style.setProperty(e,n):t.style[e]=n}const Vz=$2(()=>window.ScrollTimeline!==void 0),Uz={};function Bz(t,e){const n=$2(t);return()=>Uz[e]??n()}const pI=Bz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),kf=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,SA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:kf([0,.65,.55,1]),circOut:kf([.55,0,1,.45]),backIn:kf([.31,.01,.66,-.59]),backOut:kf([.33,1.53,.69,.99])};function gI(t,e){if(t)return typeof t=="function"?pI()?cI(t,e):"ease-out":JL(t)?kf(t):Array.isArray(t)?t.map(n=>gI(n,e)||SA.easeOut):SA[t]}function Fz(t,e,n,{delay:s=0,duration:r=300,repeat:i=0,repeatType:l="loop",ease:d="easeOut",times:u}={},h=void 0){const f={[e]:n};u&&(f.offset=u);const p=gI(d,r);Array.isArray(p)&&(f.easing=p);const x={delay:s,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:i+1,direction:l==="reverse"?"alternate":"normal"};return h&&(x.pseudoElement=h),t.animate(f,x)}function xI(t){return typeof t=="function"&&"applyToOptions"in t}function $z({type:t,...e}){return xI(t)&&pI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zz extends J2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:r,pseudoElement:i,allowFlatten:l=!1,finalKeyframe:d,onComplete:u}=e;this.isPseudoElement=!!i,this.allowFlatten=l,this.options=e,F2(typeof e.type!="string");const h=$z(e);this.animation=Fz(n,s,r,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const f=Z2(r,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(f):Oz(n,s,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ga(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ga(e)}get time(){return Ga(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=oo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Vz()?(this.animation.timeline=e,Qa):n(this)}}const yI={anticipate:KL,backInOut:GL,circInOut:XL};function Hz(t){return t in yI}function qz(t){typeof t.ease=="string"&&Hz(t.ease)&&(t.ease=yI[t.ease])}const TA=10;class Wz extends zz{constructor(e){qz(e),hI(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:r,element:i,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new cb({...l,autoplay:!1}),u=oo(this.finishedTime??this.time);n.setWithVelocity(d.sample(u-TA).value,d.sample(u).value,TA),d.stop()}}const kA=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sc.test(t)||t==="0")&&!t.startsWith("url("));function Yz(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Gz(t,e,n,s){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],l=kA(r,e),d=kA(i,e);return!l||!d?!1:Yz(t)||(n==="spring"||xI(n))&&s}function sE(t){t.duration=0,t.type="keyframes"}const Kz=new Set(["opacity","clipPath","filter","transform"]),Qz=$2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Xz(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:r,damping:i,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return Qz()&&n&&Kz.has(n)&&(n!=="transform"||!h)&&!u&&!s&&r!=="mirror"&&i!==0&&l!=="inertia"}const Zz=40;class Jz extends J2{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:l="loop",keyframes:d,name:u,motionValue:h,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=la.now();const x={autoplay:e,delay:n,type:s,repeat:r,repeatDelay:i,repeatType:l,name:u,motionValue:h,element:f,...p},b=f?.KeyframeResolver||eN;this.keyframeResolver=new b(d,(_,j,v)=>this.onKeyframesResolved(_,j,x,!v),u,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,s,r){this.keyframeResolver=void 0;const{name:i,type:l,velocity:d,delay:u,isHandoff:h,onUpdate:f}=s;this.resolvedAt=la.now(),Gz(e,i,l,d)||((bl.instantAnimations||!u)&&f?.(Z2(e,s,n)),e[0]=e[e.length-1],sE(s),s.repeat=0);const x={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Zz?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},b=!h&&Xz(x)?new Wz({...x,element:x.motionValue.owner.current}):new cb(x);b.finished.then(()=>this.notifyFinished()).catch(Qa),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Lz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const eH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tH(t){const e=eH.exec(t);if(!e)return[,];const[,n,s,r]=e;return[`--${n??s}`,r]}function bI(t,e,n=1){const[s,r]=tH(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const l=i.trim();return BL(l)?parseFloat(l):l}return Y2(r)?bI(r,e,n+1):r}function tN(t,e){return t?.[e]??t?.default??t}const vI=new Set(["width","height","top","left","right","bottom",...nm]),nH={test:t=>t==="auto",parse:t=>t},wI=t=>e=>e.test(t),_I=[tm,dt,lo,lc,G$,Y$,nH],AA=t=>_I.find(wI(t));function sH(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$L(t):!0}const rH=new Set(["brightness","contrast","saturate","opacity"]);function aH(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(G2)||[];if(!s)return t;const r=n.replace(s,"");let i=rH.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const iH=/\b([a-z-]*)\(.*?\)/gu,rE={...Sc,getAnimatableNone:t=>{const e=t.match(iH);return e?e.map(aH).join(" "):t}},RA={...tm,transform:Math.round},oH={rotate:lc,rotateX:lc,rotateY:lc,rotateZ:lc,scale:L0,scaleX:L0,scaleY:L0,scaleZ:L0,skew:lc,skewX:lc,skewY:lc,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:pp,originX:yA,originY:yA,originZ:dt},nN={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,backgroundPositionX:dt,backgroundPositionY:dt,...oH,zIndex:RA,fillOpacity:pp,strokeOpacity:pp,numOctaves:RA},lH={...nN,color:Vs,backgroundColor:Vs,outlineColor:Vs,fill:Vs,stroke:Vs,borderColor:Vs,borderTopColor:Vs,borderRightColor:Vs,borderBottomColor:Vs,borderLeftColor:Vs,filter:rE,WebkitFilter:rE},EI=t=>lH[t];function NI(t,e){let n=EI(t);return n!==rE&&(n=Sc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const cH=new Set(["auto","none","0"]);function dH(t,e,n){let s=0,r;for(;s<t.length&&!r;){const i=t[s];typeof i=="string"&&!cH.has(i)&&gp(i).values.length&&(r=t[s]),s++}if(r&&n)for(const i of e)t[i]=NI(n,r)}class uH extends eN{constructor(e,n,s,r,i){super(e,n,s,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),Y2(h))){const f=bI(h,n.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!vI.has(s)||e.length!==2)return;const[r,i]=e,l=AA(r),d=AA(i);if(l!==d)if(CA(l)&&CA(d))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else Ld[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let r=0;r<e.length;r++)(e[r]===null||sH(e[r]))&&s.push(r);s.length&&dH(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ld[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(s,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const i=s.length-1,l=s[i];s[i]=Ld[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,u])=>{e.getValue(d).set(u)}),this.resolveNoneKeyframes()}}function hH(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const r=n?.[t]??s.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const jI=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function CI(t){return FL(t)&&"offsetHeight"in t}const DA=30,mH=t=>!isNaN(parseFloat(t)),Hf={current:void 0};class fH{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const r=la.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=la.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=mH(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new z2);const s=this.events[e].add(n);return e==="change"?()=>{s(),Hn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Hf.current&&Hf.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=la.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>DA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,DA);return zL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hd(t,e){return new fH(t,e)}const{schedule:sN}=eI(queueMicrotask,!1),gi={x:!1,y:!1};function SI(){return gi.x||gi.y}function pH(t){return t==="x"||t==="y"?gi[t]?null:(gi[t]=!0,()=>{gi[t]=!1}):gi.x||gi.y?null:(gi.x=gi.y=!0,()=>{gi.x=gi.y=!1})}function TI(t,e){const n=hH(t),s=new AbortController,r={passive:!0,...e,signal:s.signal};return[n,r,()=>s.abort()]}function PA(t){return!(t.pointerType==="touch"||SI())}function gH(t,e,n={}){const[s,r,i]=TI(t,n),l=d=>{if(!PA(d))return;const{target:u}=d,h=e(u,d);if(typeof h!="function"||!u)return;const f=p=>{PA(p)&&(h(p),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,r)};return s.forEach(d=>{d.addEventListener("pointerenter",l,r)}),i}const kI=(t,e)=>e?t===e?!0:kI(t,e.parentElement):!1,rN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,xH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yH(t){return xH.has(t.tagName)||t.tabIndex!==-1}const gx=new WeakSet;function MA(t){return e=>{e.key==="Enter"&&t(e)}}function C_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const bH=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=MA(()=>{if(gx.has(n))return;C_(n,"down");const r=MA(()=>{C_(n,"up")}),i=()=>C_(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function LA(t){return rN(t)&&!SI()}function vH(t,e,n={}){const[s,r,i]=TI(t,n),l=d=>{const u=d.currentTarget;if(!LA(d))return;gx.add(u);const h=e(u,d),f=(b,_)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",x),gx.has(u)&&gx.delete(u),LA(b)&&typeof h=="function"&&h(b,{success:_})},p=b=>{f(b,u===window||u===document||n.useGlobalTarget||kI(u,b.target))},x=b=>{f(b,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",x,r)};return s.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",l,r),CI(d)&&(d.addEventListener("focus",h=>bH(h,r)),!yH(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),i}function AI(t){return FL(t)&&"ownerSVGElement"in t}function wH(t){return AI(t)&&t.tagName==="svg"}function _H(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],r=t[1+n],i=t[2+n],l=t[3+n],d=uI(r,i,l);return e?d(s):d}const sr=t=>!!(t&&t.getVelocity);function EH(t,e,n){const s=t.get();let r=null,i=s,l;const d=typeof s=="string"?s.replace(/[\d.-]/g,""):void 0,u=()=>{r&&(r.stop(),r=null)},h=()=>{u(),r=new cb({keyframes:[OA(t.get()),OA(i)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:l})};if(t.attach((f,p)=>{i=f,l=x=>p(IA(x,d)),Hn.postRender(h)},u),sr(e)){const f=e.on("change",x=>t.set(IA(x,d))),p=t.on("destroy",f);return()=>{f(),p()}}return u}function IA(t,e){return e?t+e:t}function OA(t){return typeof t=="number"?t:parseFloat(t)}const NH=[..._I,Vs,Sc],jH=t=>NH.find(wI(t)),Hp=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function VA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function CH(...t){return e=>{let n=!1;const s=t.map(r=>{const i=VA(r,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():VA(t[r],null)}}}}function SH(...t){return y.useCallback(CH(...t),t)}class TH extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,r=CI(s)&&s.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function kH({children:t,isPresent:e,anchorX:n,root:s}){const r=y.useId(),i=y.useRef(null),l=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=y.useContext(Hp),u=SH(i,t?.ref);return y.useInsertionEffect(()=>{const{width:h,height:f,top:p,left:x,right:b}=l.current;if(e||!i.current||!h||!f)return;const _=n==="left"?`left: ${x}`:`right: ${b}`;i.current.dataset.motionPopId=r;const j=document.createElement("style");d&&(j.nonce=d);const v=s??document.head;return v.appendChild(j),j.sheet&&j.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${_}px !important;
            top: ${p}px !important;
          }
        `),()=>{v.contains(j)&&v.removeChild(j)}},[e]),a.jsx(TH,{isPresent:e,childRef:i,sizeRef:l,children:y.cloneElement(t,{ref:u})})}const AH=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:l,anchorX:d,root:u})=>{const h=Bp(RH),f=y.useId();let p=!0,x=y.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:n,custom:r,onExitComplete:b=>{h.set(b,!0);for(const _ of h.values())if(!_)return;s&&s()},register:b=>(h.set(b,!1),()=>h.delete(b))}),[n,h,s]);return i&&p&&(x={...x}),y.useMemo(()=>{h.forEach((b,_)=>h.set(_,!1))},[n]),y.useEffect(()=>{!n&&!h.size&&s&&s()},[n]),l==="popLayout"&&(t=a.jsx(kH,{isPresent:n,anchorX:d,root:u,children:t})),a.jsx(lb.Provider,{value:x,children:t})};function RH(){return new Map}function RI(t=!0){const e=y.useContext(lb);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=e,i=y.useId();y.useEffect(()=>{if(t)return r(i)},[t]);const l=y.useCallback(()=>t&&s&&s(i),[i,s,t]);return!n&&s?[!1,l]:[!0]}const I0=t=>t.key||"";function UA(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const Ci=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:i="sync",propagate:l=!1,anchorX:d="left",root:u})=>{const[h,f]=RI(l),p=y.useMemo(()=>UA(t),[t]),x=l&&!h?[]:p.map(I0),b=y.useRef(!0),_=y.useRef(p),j=Bp(()=>new Map),[v,T]=y.useState(p),[P,A]=y.useState(p);V2(()=>{b.current=!1,_.current=p;for(let L=0;L<P.length;L++){const k=I0(P[L]);x.includes(k)?j.delete(k):j.get(k)!==!0&&j.set(k,!1)}},[P,x.length,x.join("-")]);const C=[];if(p!==v){let L=[...p];for(let k=0;k<P.length;k++){const R=P[k],S=I0(R);x.includes(S)||(L.splice(k,0,R),C.push(R))}return i==="wait"&&C.length&&(L=C),A(UA(L)),T(p),null}const{forceRender:M}=y.useContext(I2);return a.jsx(a.Fragment,{children:P.map(L=>{const k=I0(L),R=l&&!h?!1:p===P||x.includes(k),S=()=>{if(j.has(k))j.set(k,!0);else return;let O=!0;j.forEach(I=>{I||(O=!1)}),O&&(M?.(),A(_.current),l&&f?.(),s&&s())};return a.jsx(AH,{isPresent:R,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:i,root:u,onExitComplete:R?void 0:S,anchorX:d,children:L},k)})})},DI=y.createContext({strict:!1}),BA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Rh={};for(const t in BA)Rh[t]={isEnabled:e=>BA[t].some(n=>!!e[n])};function DH(t){for(const e in t)Rh[e]={...Rh[e],...t[e]}}const PH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||PH.has(t)}let PI=t=>!Hx(t);function MH(t){typeof t=="function"&&(PI=e=>e.startsWith("on")?!Hx(e):t(e))}try{MH(require("@emotion/is-prop-valid").default)}catch{}function LH(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(PI(r)||n===!0&&Hx(r)||!e&&!Hx(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}const db=y.createContext({});function ub(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function xp(t){return typeof t=="string"||Array.isArray(t)}const aN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iN=["initial",...aN];function hb(t){return ub(t.animate)||iN.some(e=>xp(t[e]))}function MI(t){return!!(hb(t)||t.variants)}function IH(t,e){if(hb(t)){const{initial:n,animate:s}=t;return{initial:n===!1||xp(n)?n:void 0,animate:xp(s)?s:void 0}}return t.inherit!==!1?e:{}}function OH(t){const{initial:e,animate:n}=IH(t,y.useContext(db));return y.useMemo(()=>({initial:e,animate:n}),[FA(e),FA(n)])}function FA(t){return Array.isArray(t)?t.join(" "):t}const yp={};function VH(t){for(const e in t)yp[e]=t[e],W2(e)&&(yp[e].isCSSVariable=!0)}function LI(t,{layout:e,layoutId:n}){return sm.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!yp[t]||t==="opacity")}const UH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BH=nm.length;function FH(t,e,n){let s="",r=!0;for(let i=0;i<BH;i++){const l=nm[i],d=t[l];if(d===void 0)continue;let u=!0;if(typeof d=="number"?u=d===(l.startsWith("scale")?1:0):u=parseFloat(d)===0,!u||n){const h=jI(d,nN[l]);if(!u){r=!1;const f=UH[l]||l;s+=`${f}(${h}) `}n&&(e[l]=h)}}return s=s.trim(),n?s=n(e,r?"":s):r&&(s="none"),s}function oN(t,e,n){const{style:s,vars:r,transformOrigin:i}=t;let l=!1,d=!1;for(const u in e){const h=e[u];if(sm.has(u)){l=!0;continue}else if(W2(u)){r[u]=h;continue}else{const f=jI(h,nN[u]);u.startsWith("origin")?(d=!0,i[u]=f):s[u]=f}}if(e.transform||(l||n?s.transform=FH(e,t.transform,n):s.transform&&(s.transform="none")),d){const{originX:u="50%",originY:h="50%",originZ:f=0}=i;s.transformOrigin=`${u} ${h} ${f}`}}const lN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function II(t,e,n){for(const s in e)!sr(e[s])&&!LI(s,n)&&(t[s]=e[s])}function $H({transformTemplate:t},e){return y.useMemo(()=>{const n=lN();return oN(n,e,t),Object.assign({},n.vars,n.style)},[e])}function zH(t,e){const n=t.style||{},s={};return II(s,n,t),Object.assign(s,$H(t,e)),s}function HH(t,e){const n={},s=zH(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const qH={offset:"stroke-dashoffset",array:"stroke-dasharray"},WH={offset:"strokeDashoffset",array:"strokeDasharray"};function YH(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?qH:WH;t[i.offset]=dt.transform(-s);const l=dt.transform(e),d=dt.transform(n);t[i.array]=`${l} ${d}`}function OI(t,{attrX:e,attrY:n,attrScale:s,pathLength:r,pathSpacing:i=1,pathOffset:l=0,...d},u,h,f){if(oN(t,d,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:x}=t;p.transform&&(x.transform=p.transform,delete p.transform),(x.transform||p.transformOrigin)&&(x.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),x.transform&&(x.transformBox=f?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),s!==void 0&&(p.scale=s),r!==void 0&&YH(p,r,i,l,!1)}const VI=()=>({...lN(),attrs:{}}),UI=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GH(t,e,n,s){const r=y.useMemo(()=>{const i=VI();return OI(i,e,UI(s),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};II(i,t.style,t),r.style={...i,...r.style}}return r}const KH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cN(t){return typeof t!="string"||t.includes("-")?!1:!!(KH.indexOf(t)>-1||/[A-Z]/u.test(t))}function QH(t,e,n,{latestValues:s},r,i=!1){const d=(cN(t)?GH:HH)(e,s,r,t),u=LH(e,typeof t=="string",i),h=t!==y.Fragment?{...u,...d,ref:n}:{},{children:f}=e,p=y.useMemo(()=>sr(f)?f.get():f,[f]);return y.createElement(t,{...h,children:p})}function $A(t){const e=[{},{}];return t?.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function dN(t,e,n,s){if(typeof e=="function"){const[r,i]=$A(s);e=e(n!==void 0?n:t.custom,r,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,i]=$A(s);e=e(n!==void 0?n:t.custom,r,i)}return e}function xx(t){return sr(t)?t.get():t}function XH({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,r){return{latestValues:ZH(n,s,r,t),renderState:e()}}function ZH(t,e,n,s){const r={},i=s(t,{});for(const x in i)r[x]=xx(i[x]);let{initial:l,animate:d}=t;const u=hb(t),h=MI(t);e&&h&&!u&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let f=n?n.initial===!1:!1;f=f||l===!1;const p=f?d:l;if(p&&typeof p!="boolean"&&!ub(p)){const x=Array.isArray(p)?p:[p];for(let b=0;b<x.length;b++){const _=dN(t,x[b]);if(_){const{transitionEnd:j,transition:v,...T}=_;for(const P in T){let A=T[P];if(Array.isArray(A)){const C=f?A.length-1:0;A=A[C]}A!==null&&(r[P]=A)}for(const P in j)r[P]=j[P]}}}return r}const BI=t=>(e,n)=>{const s=y.useContext(db),r=y.useContext(lb),i=()=>XH(t,e,s,r);return n?i():Bp(i)};function uN(t,e,n){const{style:s}=t,r={};for(const i in s)(sr(s[i])||e.style&&sr(e.style[i])||LI(i,t)||n?.getValue(i)?.liveStyle!==void 0)&&(r[i]=s[i]);return r}const JH=BI({scrapeMotionValuesFromProps:uN,createRenderState:lN});function FI(t,e,n){const s=uN(t,e,n);for(const r in t)if(sr(t[r])||sr(e[r])){const i=nm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[i]=t[r]}return s}const eq=BI({scrapeMotionValuesFromProps:FI,createRenderState:VI}),tq=Symbol.for("motionComponentSymbol");function oh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nq(t,e,n){return y.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):oh(n)&&(n.current=s))},[e])}const hN=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sq="framerAppearId",$I="data-"+hN(sq),zI=y.createContext({});function rq(t,e,n,s,r){const{visualElement:i}=y.useContext(db),l=y.useContext(DI),d=y.useContext(lb),u=y.useContext(Hp).reducedMotion,h=y.useRef(null);s=s||l.renderer,!h.current&&s&&(h.current=s(t,{visualState:e,parent:i,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,p=y.useContext(zI);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&aq(h.current,n,r,p);const x=y.useRef(!1);y.useInsertionEffect(()=>{f&&x.current&&f.update(n,d)});const b=n[$I],_=y.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return V2(()=>{f&&(x.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),_.current&&f.animationState&&f.animationState.animateChanges())}),y.useEffect(()=>{f&&(!_.current&&f.animationState&&f.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),_.current=!1),f.enteringChildren=void 0)}),f}function aq(t,e,n,s){const{layoutId:r,layout:i,drag:l,dragConstraints:d,layoutScroll:u,layoutRoot:h,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:HI(t.parent)),t.projection.setOptions({layoutId:r,layout:i,alwaysMeasureLayout:!!l||d&&oh(d),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,crossfade:f,layoutScroll:u,layoutRoot:h})}function HI(t){if(t)return t.options.allowProjection!==!1?t.projection:HI(t.parent)}function S_(t,{forwardMotionProps:e=!1}={},n,s){n&&DH(n);const r=cN(t)?eq:JH;function i(d,u){let h;const f={...y.useContext(Hp),...d,layoutId:iq(d)},{isStatic:p}=f,x=OH(d),b=r(d,p);if(!p&&O2){oq();const _=lq(f);h=_.MeasureLayout,x.visualElement=rq(t,b,f,s,_.ProjectionNode)}return a.jsxs(db.Provider,{value:x,children:[h&&x.visualElement?a.jsx(h,{visualElement:x.visualElement,...f}):null,QH(t,d,nq(b,x.visualElement,u),b,p,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=y.forwardRef(i);return l[tq]=t,l}function iq({layoutId:t}){const e=y.useContext(I2).id;return e&&t!==void 0?e+"-"+t:t}function oq(t,e){y.useContext(DI).strict}function lq(t){const{drag:e,layout:n}=Rh;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function cq(t,e){if(typeof Proxy>"u")return S_;const n=new Map,s=(i,l)=>S_(i,l,t,e),r=(i,l)=>s(i,l);return new Proxy(r,{get:(i,l)=>l==="create"?s:(n.has(l)||n.set(l,S_(l,void 0,t,e)),n.get(l))})}function qI({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function dq({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uq(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function T_(t){return t===void 0||t===1}function aE({scale:t,scaleX:e,scaleY:n}){return!T_(t)||!T_(e)||!T_(n)}function Ed(t){return aE(t)||WI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function WI(t){return zA(t.x)||zA(t.y)}function zA(t){return t&&t!=="0%"}function qx(t,e,n){const s=t-n,r=e*s;return n+r}function HA(t,e,n,s,r){return r!==void 0&&(t=qx(t,r,s)),qx(t,n,s)+e}function iE(t,e=0,n=1,s,r){t.min=HA(t.min,e,n,s,r),t.max=HA(t.max,e,n,s,r)}function YI(t,{x:e,y:n}){iE(t.x,e.translate,e.scale,e.originPoint),iE(t.y,n.translate,n.scale,n.originPoint)}const qA=.999999999999,WA=1.0000000000001;function hq(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,l;for(let d=0;d<r;d++){i=n[d],l=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ch(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,YI(t,l)),s&&Ed(i.latestValues)&&ch(t,i.latestValues))}e.x<WA&&e.x>qA&&(e.x=1),e.y<WA&&e.y>qA&&(e.y=1)}function lh(t,e){t.min=t.min+e,t.max=t.max+e}function YA(t,e,n,s,r=.5){const i=rs(t.min,t.max,r);iE(t,e,n,i,s)}function ch(t,e){YA(t.x,e.x,e.scaleX,e.scale,e.originX),YA(t.y,e.y,e.scaleY,e.scale,e.originY)}function GI(t,e){return qI(uq(t.getBoundingClientRect(),e))}function mq(t,e,n){const s=GI(t,n),{scroll:r}=e;return r&&(lh(s.x,r.offset.x),lh(s.y,r.offset.y)),s}const GA=()=>({translate:0,scale:1,origin:0,originPoint:0}),dh=()=>({x:GA(),y:GA()}),KA=()=>({min:0,max:0}),qs=()=>({x:KA(),y:KA()}),oE={current:null},KI={current:!1};function fq(){if(KI.current=!0,!!O2)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>oE.current=t.matches;t.addEventListener("change",e),e()}else oE.current=!1}const pq=new WeakMap;function gq(t,e,n){for(const s in e){const r=e[s],i=n[s];if(sr(r))t.addValue(s,r);else if(sr(i))t.addValue(s,Hd(r,{owner:t}));else if(i!==r)if(t.hasValue(s)){const l=t.getValue(s);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(s);t.addValue(s,Hd(l!==void 0?l:r,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const QA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xq{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:i,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=la.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,Hn.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=l;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=d,this.blockInitialAnimation=!!i,this.isControllingVariants=hb(n),this.isVariantNode=MI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in p){const b=p[x];u[x]!==void 0&&sr(b)&&b.set(u[x])}}mount(e){this.current=e,pq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),KI.current||fq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oE.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),vl(this.notifyUpdate),vl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=sm.has(e);s&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Hn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Rh){const n=Rh[e];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[e]&&r&&s(this.props)&&(this.features[e]=new r(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<QA.length;s++){const r=QA[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i="on"+r,l=e[i];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=gq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Hd(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(BL(s)||$L(s))?s=parseFloat(s):!jH(s)&&Sc.test(n)&&(s=NI(e,n)),this.setBaseTarget(e,sr(s)?s.get():s)),sr(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const i=dN(this.props,n,this.presenceContext?.custom);i&&(s=i[e])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!sr(r)?r:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new z2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){sN.render(this.render)}}class QI extends xq{constructor(){super(...arguments),this.KeyframeResolver=uH}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function XI(t,{style:e,vars:n},s,r){const i=t.style;let l;for(l in e)i[l]=e[l];r?.applyProjectionStyles(i,s);for(l in n)i.setProperty(l,n[l])}function yq(t){return window.getComputedStyle(t)}class bq extends QI{constructor(){super(...arguments),this.type="html",this.renderInstance=XI}readValueFromInstance(e,n){if(sm.has(n))return this.projection?.isProjecting?Z1(n):Az(e,n);{const s=yq(e),r=(W2(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return GI(e,n)}build(e,n,s){oN(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return uN(e,n,s)}}const ZI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vq(t,e,n,s){XI(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(ZI.has(r)?r:hN(r),e.attrs[r])}class wq extends QI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qs}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(sm.has(n)){const s=EI(n);return s&&s.default||0}return n=ZI.has(n)?n:hN(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return FI(e,n,s)}build(e,n,s){OI(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,r){vq(e,n,s,r)}mount(e){this.isSVGTag=UI(e.tagName),super.mount(e)}}const _q=(t,e)=>cN(t)?new wq(e):new bq(e,{allowProjection:t!==y.Fragment});function yh(t,e,n){const s=t.getProps();return dN(s,e,n!==void 0?n:s.custom,t)}const lE=t=>Array.isArray(t);function Eq(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Hd(n))}function Nq(t){return lE(t)?t[t.length-1]||0:t}function jq(t,e){const n=yh(t,e);let{transitionEnd:s={},transition:r={},...i}=n||{};i={...i,...s};for(const l in i){const d=Nq(i[l]);Eq(t,l,d)}}function Cq(t){return!!(sr(t)&&t.add)}function cE(t,e){const n=t.getValue("willChange");if(Cq(n))return n.add(e);if(!n&&bl.WillChange){const s=new bl.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function JI(t){return t.props[$I]}const Sq=t=>t!==null;function Tq(t,{repeat:e,repeatType:n="loop"},s){const r=t.filter(Sq),i=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[i]}const kq={type:"spring",stiffness:500,damping:25,restSpeed:10},Aq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Rq={type:"keyframes",duration:.8},Dq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pq=(t,{keyframes:e})=>e.length>2?Rq:sm.has(t)?t.startsWith("scale")?Aq(e[1]):kq:Dq;function Mq({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:l,repeatDelay:d,from:u,elapsed:h,...f}){return!!Object.keys(f).length}const mN=(t,e,n,s={},r,i)=>l=>{const d=tN(s,t)||{},u=d.delay||s.delay||0;let{elapsed:h=0}=s;h=h-oo(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-h,onUpdate:x=>{e.set(x),d.onUpdate&&d.onUpdate(x)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:i?void 0:r};Mq(d)||Object.assign(f,Pq(t,f)),f.duration&&(f.duration=oo(f.duration)),f.repeatDelay&&(f.repeatDelay=oo(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(sE(f),f.delay===0&&(p=!0)),(bl.instantAnimations||bl.skipAnimations)&&(p=!0,sE(f),f.delay=0),f.allowFlatten=!d.type&&!d.ease,p&&!i&&e.get()!==void 0){const x=Tq(f.keyframes,d);if(x!==void 0){Hn.update(()=>{f.onUpdate(x),f.onComplete()});return}}return d.isSync?new cb(f):new Jz(f)};function Lq({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function e5(t,e,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:l,...d}=e;s&&(i=s);const u=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const f in d){const p=t.getValue(f,t.latestValues[f]??null),x=d[f];if(x===void 0||h&&Lq(h,f))continue;const b={delay:n,...tN(i||{},f)},_=p.get();if(_!==void 0&&!p.isAnimating&&!Array.isArray(x)&&x===_&&!b.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const T=JI(t);if(T){const P=window.MotionHandoffAnimation(T,f,Hn);P!==null&&(b.startTime=P,j=!0)}}cE(t,f),p.start(mN(f,p,x,t.shouldReduceMotion&&vI.has(f)?{type:!1}:b,t,j));const v=p.animation;v&&u.push(v)}return l&&Promise.all(u).then(()=>{Hn.update(()=>{l&&jq(t,l)})}),u}function t5(t,e,n,s=0,r=1){const i=Array.from(t).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),l=t.size,d=(l-1)*s;return typeof n=="function"?n(i,l):r===1?i*s:d-i*s}function dE(t,e,n={}){const s=yh(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(e5(t,s,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=r;return Iq(t,e,u,h,f,p,n)}:()=>Promise.resolve(),{when:d}=r;if(d){const[u,h]=d==="beforeChildren"?[i,l]:[l,i];return u().then(()=>h())}else return Promise.all([i(),l(n.delay)])}function Iq(t,e,n=0,s=0,r=0,i=1,l){const d=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),d.push(dE(u,e,{...l,delay:n+(typeof s=="function"?0:s)+t5(t.variantChildren,u,s,r,i)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(d)}function Oq(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>dE(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=dE(t,e,n);else{const r=typeof e=="function"?yh(t,e,n.custom):e;s=Promise.all(e5(t,r,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function n5(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const Vq=iN.length;function s5(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?s5(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Vq;n++){const s=iN[n],r=t.props[s];(xp(r)||r===!1)&&(e[s]=r)}return e}const Uq=[...aN].reverse(),Bq=aN.length;function Fq(t){return e=>Promise.all(e.map(({animation:n,options:s})=>Oq(t,n,s)))}function $q(t){let e=Fq(t),n=XA(),s=!0;const r=u=>(h,f)=>{const p=yh(t,f,u==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:x,transitionEnd:b,..._}=p;h={...h,..._,...b}}return h};function i(u){e=u(t)}function l(u){const{props:h}=t,f=s5(t.parent)||{},p=[],x=new Set;let b={},_=1/0;for(let v=0;v<Bq;v++){const T=Uq[v],P=n[T],A=h[T]!==void 0?h[T]:f[T],C=xp(A),M=T===u?P.isActive:null;M===!1&&(_=v);let L=A===f[T]&&A!==h[T]&&C;if(L&&s&&t.manuallyAnimateOnMount&&(L=!1),P.protectedKeys={...b},!P.isActive&&M===null||!A&&!P.prevProp||ub(A)||typeof A=="boolean")continue;const k=zq(P.prevProp,A);let R=k||T===u&&P.isActive&&!L&&C||v>_&&C,S=!1;const O=Array.isArray(A)?A:[A];let I=O.reduce(r(T),{});M===!1&&(I={});const{prevResolvedValues:F={}}=P,$={...F,...I},Q=z=>{R=!0,x.has(z)&&(S=!0,x.delete(z)),P.needsAnimating[z]=!0;const q=t.getValue(z);q&&(q.liveStyle=!1)};for(const z in $){const q=I[z],Z=F[z];if(b.hasOwnProperty(z))continue;let ee=!1;lE(q)&&lE(Z)?ee=!n5(q,Z):ee=q!==Z,ee?q!=null?Q(z):x.add(z):q!==void 0&&x.has(z)?Q(z):P.protectedKeys[z]=!0}P.prevProp=A,P.prevResolvedValues=I,P.isActive&&(b={...b,...I}),s&&t.blockInitialAnimation&&(R=!1);const G=L&&k;R&&(!G||S)&&p.push(...O.map(z=>{const q={type:T};if(typeof z=="string"&&s&&!G&&t.manuallyAnimateOnMount&&t.parent){const{parent:Z}=t,ee=yh(Z,z);if(Z.enteringChildren&&ee){const{delayChildren:H}=ee.transition||{};q.delay=t5(Z.enteringChildren,t,H)}}return{animation:z,options:q}}))}if(x.size){const v={};if(typeof h.initial!="boolean"){const T=yh(t,Array.isArray(h.initial)?h.initial[0]:h.initial);T&&T.transition&&(v.transition=T.transition)}x.forEach(T=>{const P=t.getBaseTarget(T),A=t.getValue(T);A&&(A.liveStyle=!0),v[T]=P??null}),p.push({animation:v})}let j=!!p.length;return s&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(j=!1),s=!1,j?e(p):Promise.resolve()}function d(u,h){if(n[u].isActive===h)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(u,h)),n[u].isActive=h;const f=l(u);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:l,setActive:d,setAnimateFunction:i,getState:()=>n,reset:()=>{n=XA()}}}function zq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!n5(e,t):!1}function bd(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XA(){return{animate:bd(!0),whileInView:bd(),whileHover:bd(),whileTap:bd(),whileDrag:bd(),whileFocus:bd(),exit:bd()}}class Wc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Hq extends Wc{constructor(e){super(e),e.animationState||(e.animationState=$q(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ub(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let qq=0;class Wq extends Wc{constructor(){super(...arguments),this.id=qq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Yq={animation:{Feature:Hq},exit:{Feature:Wq}};function bp(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function qp(t){return{point:{x:t.pageX,y:t.pageY}}}const Gq=t=>e=>rN(e)&&t(e,qp(e));function qf(t,e,n,s){return bp(t,e,Gq(n),s)}const r5=1e-4,Kq=1-r5,Qq=1+r5,a5=.01,Xq=0-a5,Zq=0+a5;function Hr(t){return t.max-t.min}function Jq(t,e,n){return Math.abs(t-e)<=n}function ZA(t,e,n,s=.5){t.origin=s,t.originPoint=rs(e.min,e.max,t.origin),t.scale=Hr(n)/Hr(e),t.translate=rs(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Kq&&t.scale<=Qq||isNaN(t.scale))&&(t.scale=1),(t.translate>=Xq&&t.translate<=Zq||isNaN(t.translate))&&(t.translate=0)}function Wf(t,e,n,s){ZA(t.x,e.x,n.x,s?s.originX:void 0),ZA(t.y,e.y,n.y,s?s.originY:void 0)}function JA(t,e,n){t.min=n.min+e.min,t.max=t.min+Hr(e)}function eW(t,e,n){JA(t.x,e.x,n.x),JA(t.y,e.y,n.y)}function eR(t,e,n){t.min=e.min-n.min,t.max=t.min+Hr(e)}function Wx(t,e,n){eR(t.x,e.x,n.x),eR(t.y,e.y,n.y)}function $a(t){return[t("x"),t("y")]}const i5=({current:t})=>t?t.ownerDocument.defaultView:null,tR=(t,e)=>Math.abs(t-e);function tW(t,e){const n=tR(t.x,e.x),s=tR(t.y,e.y);return Math.sqrt(n**2+s**2)}class o5{constructor(e,n,{transformPagePoint:s,contextWindow:r=window,dragSnapToOrigin:i=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=A_(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,_=tW(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!_)return;const{point:j}=x,{timestamp:v}=fr;this.history.push({...j,timestamp:v});const{onStart:T,onMove:P}=this.handlers;b||(T&&T(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,x)},this.handlePointerMove=(x,b)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=k_(b,this.transformPagePoint),Hn.update(this.updatePoint,!0)},this.handlePointerUp=(x,b)=>{this.end();const{onEnd:_,onSessionEnd:j,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=A_(x.type==="pointercancel"?this.lastMoveEventInfo:k_(b,this.transformPagePoint),this.history);this.startEvent&&_&&_(x,T),j&&j(x,T)},!rN(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=l,this.contextWindow=r||window;const d=qp(e),u=k_(d,this.transformPagePoint),{point:h}=u,{timestamp:f}=fr;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,A_(u,this.history)),this.removeListeners=Fp(qf(this.contextWindow,"pointermove",this.handlePointerMove),qf(this.contextWindow,"pointerup",this.handlePointerUp),qf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vl(this.updatePoint)}}function k_(t,e){return e?{point:e(t.point)}:t}function nR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function A_({point:t},e){return{point:t,delta:nR(t,l5(e)),offset:nR(t,nW(e)),velocity:sW(e,.1)}}function nW(t){return t[0]}function l5(t){return t[t.length-1]}function sW(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=l5(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>oo(e)));)n--;if(!s)return{x:0,y:0};const i=Ga(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const l={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function rW(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?rs(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?rs(n,t,s.max):Math.min(t,n)),t}function sR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function aW(t,{top:e,left:n,bottom:s,right:r}){return{x:sR(t.x,n,r),y:sR(t.y,e,s)}}function rR(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function iW(t,e){return{x:rR(t.x,e.x),y:rR(t.y,e.y)}}function oW(t,e){let n=.5;const s=Hr(t),r=Hr(e);return r>s?n=fp(e.min,e.max-s,t.min):s>r&&(n=fp(t.min,t.max-r,e.min)),yl(0,1,n)}function lW(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const uE=.35;function cW(t=uE){return t===!1?t=0:t===!0&&(t=uE),{x:aR(t,"left","right"),y:aR(t,"top","bottom")}}function aR(t,e,n){return{min:iR(t,e),max:iR(t,n)}}function iR(t,e){return typeof t=="number"?t:t[e]||0}const dW=new WeakMap;class uW{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qp(p).point)},l=(p,x)=>{const{drag:b,dragPropagation:_,onDragStart:j}=this.getProps();if(b&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pH(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$a(T=>{let P=this.getAxisMotionValue(T).get()||0;if(lo.test(P)){const{projection:A}=this.visualElement;if(A&&A.layout){const C=A.layout.layoutBox[T];C&&(P=Hr(C)*(parseFloat(P)/100))}}this.originPoint[T]=P}),j&&Hn.postRender(()=>j(p,x)),cE(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},d=(p,x)=>{this.latestPointerEvent=p,this.latestPanInfo=x;const{dragPropagation:b,dragDirectionLock:_,onDirectionLock:j,onDrag:v}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:T}=x;if(_&&this.currentDirection===null){this.currentDirection=hW(T),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",x.point,T),this.updateAxis("y",x.point,T),this.visualElement.render(),v&&v(p,x)},u=(p,x)=>{this.latestPointerEvent=p,this.latestPanInfo=x,this.stop(p,x),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>$a(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new o5(e,{onSessionStart:i,onStart:l,onMove:d,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:s,contextWindow:i5(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,r=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!r||!s)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:d}=this.getProps();d&&Hn.postRender(()=>d(s,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!O0(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let l=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(l=rW(l,this.constraints[e],this.elastic[e])),i.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&oh(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=aW(s.layoutBox,e):this.constraints=!1,this.elastic=cW(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&$a(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=lW(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!oh(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=mq(s,r.root,this.visualElement.getTransformPagePoint());let l=iW(r.layout.layoutBox,i);if(n){const d=n(dq(l));this.hasMutatedConstraints=!!d,d&&(l=qI(d))}return l}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),u=this.constraints||{},h=$a(f=>{if(!O0(f,n,this.currentDirection))return;let p=u&&u[f]||{};l&&(p={min:0,max:0});const x=r?200:1e6,b=r?40:1e7,_={type:"inertia",velocity:s?e[f]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...i,...p};return this.startAxisValueAnimation(f,_)});return Promise.all(h).then(d)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return cE(this.visualElement,e),s.start(mN(e,s,0,n,this.visualElement,!1))}stopAnimation(){$a(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$a(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){$a(n=>{const{drag:s}=this.getProps();if(!O0(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:d}=r.layout.layoutBox[n];i.set(e[n]-rs(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!oh(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};$a(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const u=d.get();r[l]=oW({min:u,max:u},this.constraints[l])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),$a(l=>{if(!O0(l,e,null))return;const d=this.getAxisMotionValue(l),{min:u,max:h}=this.constraints[l];d.set(rs(u,h,r[l]))})}addListeners(){if(!this.visualElement.current)return;dW.set(this.visualElement,this);const e=this.visualElement.current,n=qf(e,"pointerdown",u=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(u)}),s=()=>{const{dragConstraints:u}=this.getProps();oh(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Hn.read(s);const l=bp(window,"resize",()=>this.scalePositionWithinConstraints()),d=r.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&($a(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())}));return()=>{l(),n(),i(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:l=uE,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:l,dragMomentum:d}}}function O0(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function hW(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class mW extends Wc{constructor(e){super(e),this.removeGroupControls=Qa,this.removeListeners=Qa,this.controls=new uW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qa}unmount(){this.removeGroupControls(),this.removeListeners()}}const oR=t=>(e,n)=>{t&&Hn.postRender(()=>t(e,n))};class fW extends Wc{constructor(){super(...arguments),this.removePointerDownListener=Qa}onPointerDown(e){this.session=new o5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:i5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:oR(e),onStart:oR(n),onMove:s,onEnd:(i,l)=>{delete this.session,r&&Hn.postRender(()=>r(i,l))}}}mount(){this.removePointerDownListener=qf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const of={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(dt.test(t))t=parseFloat(t);else return t;const n=lR(t,e.target.x),s=lR(t,e.target.y);return`${n}% ${s}%`}},pW={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=Sc.parse(t);if(r.length>5)return s;const i=Sc.createTransformer(t),l=typeof r[0]!="number"?1:0,d=n.x.scale*e.x,u=n.y.scale*e.y;r[0+l]/=d,r[1+l]/=u;const h=rs(d,u,.5);return typeof r[2+l]=="number"&&(r[2+l]/=h),typeof r[3+l]=="number"&&(r[3+l]/=h),i(r)}};let R_=!1;class gW extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;VH(xW),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),R_&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),yx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,{projection:l}=s;return l&&(l.isPresent=i,R_=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==i?l.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?l.promote():l.relegate()||Hn.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sN.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;R_=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function c5(t){const[e,n]=RI(),s=y.useContext(I2);return a.jsx(gW,{...t,layoutGroup:s,switchLayoutGroup:y.useContext(zI),isPresent:e,safeToRemove:n})}const xW={borderRadius:{...of,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:of,borderTopRightRadius:of,borderBottomLeftRadius:of,borderBottomRightRadius:of,boxShadow:pW};function yW(t,e,n){const s=sr(t)?t:Hd(t);return s.start(mN("",s,e,n)),s.animation}const bW=(t,e)=>t.depth-e.depth;class vW{constructor(){this.children=[],this.isDirty=!1}add(e){U2(this.children,e),this.isDirty=!0}remove(e){B2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(bW),this.isDirty=!1,this.children.forEach(e)}}function wW(t,e){const n=la.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(vl(s),t(i-e))};return Hn.setup(s,!0),()=>vl(s)}const d5=["TopLeft","TopRight","BottomLeft","BottomRight"],_W=d5.length,cR=t=>typeof t=="string"?parseFloat(t):t,dR=t=>typeof t=="number"||dt.test(t);function EW(t,e,n,s,r,i){r?(t.opacity=rs(0,n.opacity??1,NW(s)),t.opacityExit=rs(e.opacity??1,0,jW(s))):i&&(t.opacity=rs(e.opacity??1,n.opacity??1,s));for(let l=0;l<_W;l++){const d=`border${d5[l]}Radius`;let u=uR(e,d),h=uR(n,d);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||dR(u)===dR(h)?(t[d]=Math.max(rs(cR(u),cR(h),s),0),(lo.test(h)||lo.test(u))&&(t[d]+="%")):t[d]=h}(e.rotate||n.rotate)&&(t.rotate=rs(e.rotate||0,n.rotate||0,s))}function uR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const NW=u5(0,.5,QL),jW=u5(.5,.95,Qa);function u5(t,e,n){return s=>s<t?0:s>e?1:n(fp(t,e,s))}function hR(t,e){t.min=e.min,t.max=e.max}function fi(t,e){hR(t.x,e.x),hR(t.y,e.y)}function mR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function fR(t,e,n,s,r){return t-=e,t=qx(t,1/n,s),r!==void 0&&(t=qx(t,1/r,s)),t}function CW(t,e=0,n=1,s=.5,r,i=t,l=t){if(lo.test(e)&&(e=parseFloat(e),e=rs(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=rs(i.min,i.max,s);t===i&&(d-=e),t.min=fR(t.min,e,n,d,r),t.max=fR(t.max,e,n,d,r)}function pR(t,e,[n,s,r],i,l){CW(t,e[n],e[s],e[r],e.scale,i,l)}const SW=["x","scaleX","originX"],TW=["y","scaleY","originY"];function gR(t,e,n,s){pR(t.x,e,SW,n?n.x:void 0,s?s.x:void 0),pR(t.y,e,TW,n?n.y:void 0,s?s.y:void 0)}function xR(t){return t.translate===0&&t.scale===1}function h5(t){return xR(t.x)&&xR(t.y)}function yR(t,e){return t.min===e.min&&t.max===e.max}function kW(t,e){return yR(t.x,e.x)&&yR(t.y,e.y)}function bR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function m5(t,e){return bR(t.x,e.x)&&bR(t.y,e.y)}function vR(t){return Hr(t.x)/Hr(t.y)}function wR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class AW{constructor(){this.members=[]}add(e){U2(this.members,e),e.scheduleRender()}remove(e){if(B2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RW(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y,l=n?.z||0;if((r||i||l)&&(s=`translate3d(${r}px, ${i}px, ${l}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:x,skewX:b,skewY:_}=n;h&&(s=`perspective(${h}px) ${s}`),f&&(s+=`rotate(${f}deg) `),p&&(s+=`rotateX(${p}deg) `),x&&(s+=`rotateY(${x}deg) `),b&&(s+=`skewX(${b}deg) `),_&&(s+=`skewY(${_}deg) `)}const d=t.x.scale*e.x,u=t.y.scale*e.y;return(d!==1||u!==1)&&(s+=`scale(${d}, ${u})`),s||"none"}const D_=["","X","Y","Z"],DW=1e3;let PW=0;function P_(t,e,n,s){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),s&&(s[t]=0))}function f5(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=JI(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Hn,!(r||i))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&f5(s)}function p5({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(l={},d=e?.()){this.id=PW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IW),this.nodes.forEach(BW),this.nodes.forEach(FW),this.nodes.forEach(OW)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new vW)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new z2),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const u=this.eventHandlers.get(l);u&&u.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=AI(l)&&!wH(l),this.instance=l;const{layoutId:d,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||d)&&(this.isLayoutDirty=!0),t){let f,p=0;const x=()=>this.root.updateBlockedByResize=!1;Hn.read(()=>{p=window.innerWidth}),t(l,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,f&&f(),f=wW(x,250),yx.hasAnimatedSinceResize&&(yx.hasAnimatedSinceResize=!1,this.nodes.forEach(NR)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&h&&(d||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:x,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||h.getDefaultTransition()||WW,{onLayoutAnimationStart:j,onLayoutAnimationComplete:v}=h.getProps(),T=!this.targetLayout||!m5(this.targetLayout,b),P=!p&&x;if(this.options.layoutRoot||this.resumeFrom||P||p&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const A={...tN(_,"layout"),onPlay:j,onComplete:v};(h.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A),this.setAnimationOrigin(f,P)}else p||NR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($W),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&f5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:d,layout:u}=this.options;if(d===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_R);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ER);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(UW),this.nodes.forEach(MW),this.nodes.forEach(LW)):this.nodes.forEach(ER),this.clearAllSnapshots();const d=la.now();fr.delta=yl(0,1e3/60,d-fr.timestamp),fr.timestamp=d,fr.isProcessing=!0,w_.update.process(fr),w_.preRender.process(fr),w_.render.process(fr),fr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VW),this.sharedNodes.forEach(zW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Hn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Hn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Hr(this.snapshot.measuredBox.x)&&!Hr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=qs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d&&this.instance){const u=s(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!h5(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;l&&this.instance&&(d||Ed(this.latestValues)||f)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let u=this.removeElementScroll(d);return l&&(u=this.removeTransform(u)),YW(u),{animationId:this.root.animationId,measuredBox:d,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return qs();const d=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(GW))){const{scroll:h}=this.root;h&&(lh(d.x,h.offset.x),lh(d.y,h.offset.y))}return d}removeElementScroll(l){const d=qs();if(fi(d,l),this.scroll?.wasRoot)return d;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&fi(d,l),lh(d.x,f.offset.x),lh(d.y,f.offset.y))}return d}applyTransform(l,d=!1){const u=qs();fi(u,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];!d&&f.options.layoutScroll&&f.scroll&&f!==f.root&&ch(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Ed(f.latestValues)&&ch(u,f.latestValues)}return Ed(this.latestValues)&&ch(u,this.latestValues),u}removeTransform(l){const d=qs();fi(d,l);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!Ed(h.latestValues))continue;aE(h.latestValues)&&h.updateSnapshot();const f=qs(),p=h.measurePageBox();fi(f,p),gR(d,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Ed(this.latestValues)&&gR(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(l||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!this.layout||!(f||p))return;this.resolvedRelativeTargetAt=fr.timestamp;const x=this.getClosestProjectingParent();x&&this.linkedParentVersion!==x.layoutVersion&&!x.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(x&&x.layout?this.createRelativeTarget(x,this.layout.layoutBox,x.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qs(),this.targetWithTransforms=qs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fi(this.target,this.layout.layoutBox),YI(this.target,this.targetDelta)):fi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?this.createRelativeTarget(x,this.target,x.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||aE(this.parent.latestValues)||WI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,d,u){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qs(),this.relativeTargetOrigin=qs(),Wx(this.relativeTargetOrigin,d,u),fi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),d=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===fr.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;fi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;hq(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=qs());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mR(this.prevProjectionDelta.x,this.projectionDelta.x),mR(this.prevProjectionDelta.y,this.projectionDelta.y)),Wf(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==x||!wR(this.projectionDelta.x,this.prevProjectionDelta.x)||!wR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=dh(),this.projectionDelta=dh(),this.projectionDeltaWithTransform=dh()}setAnimationOrigin(l,d=!1){const u=this.snapshot,h=u?u.latestValues:{},f={...this.latestValues},p=dh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const x=qs(),b=u?u.source:void 0,_=this.layout?this.layout.source:void 0,j=b!==_,v=this.getStack(),T=!v||v.members.length<=1,P=!!(j&&!T&&this.options.crossfade===!0&&!this.path.some(qW));this.animationProgress=0;let A;this.mixTargetDelta=C=>{const M=C/1e3;jR(p.x,l.x,M),jR(p.y,l.y,M),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wx(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HW(this.relativeTarget,this.relativeTargetOrigin,x,M),A&&kW(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=qs()),fi(A,this.relativeTarget)),j&&(this.animationValues=f,EW(f,h,this.latestValues,M,P,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(vl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Hn.update(()=>{yx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Hd(0)),this.currentAnimation=yW(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:u,layout:h,latestValues:f}=l;if(!(!d||!u||!h)){if(this!==l&&this.layout&&h&&g5(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||qs();const p=Hr(this.layout.layoutBox.x);u.x.min=l.target.x.min,u.x.max=u.x.min+p;const x=Hr(this.layout.layoutBox.y);u.y.min=l.target.y.min,u.y.max=u.y.min+x}fi(d,u),ch(d,f),Wf(this.projectionDeltaWithTransform,this.layoutCorrected,d,f)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new AW),this.sharedNodes.get(l).add(d);const h=d.options.initialPromotionConfig;d.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:u}=l;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(d=!0),!d)return;const h={};u.z&&P_("z",l,h,this.animationValues);for(let f=0;f<D_.length;f++)P_(`rotate${D_[f]}`,l,h,this.animationValues),P_(`skew${D_[f]}`,l,h,this.animationValues);l.render();for(const f in h)l.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);l.scheduleRender()}applyProjectionStyles(l,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=xx(d?.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=xx(d?.pointerEvents)||""),this.hasProjected&&!Ed(this.latestValues)&&(l.transform=u?u({},""):"none",this.hasProjected=!1);return}l.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let p=RW(this.projectionDeltaWithTransform,this.treeScale,f);u&&(p=u(f,p)),l.transform=p;const{x,y:b}=this.projectionDelta;l.transformOrigin=`${x.origin*100}% ${b.origin*100}% 0`,h.animationValues?l.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in yp){if(f[_]===void 0)continue;const{correct:j,applyTo:v,isCSSVariable:T}=yp[_],P=p==="none"?f[_]:j(f[_],h);if(v){const A=v.length;for(let C=0;C<A;C++)l[v[C]]=P}else T?this.options.visualElement.renderState.vars[_]=P:l[_]=P}this.options.layoutId&&(l.pointerEvents=h===this?xx(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(_R),this.root.sharedNodes.clear()}}}function MW(t){t.updateLayout()}function LW(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:r}=t.options,i=e.source!==t.layout.source;r==="size"?$a(f=>{const p=i?e.measuredBox[f]:e.layoutBox[f],x=Hr(p);p.min=n[f].min,p.max=p.min+x}):g5(r,e.layoutBox,n)&&$a(f=>{const p=i?e.measuredBox[f]:e.layoutBox[f],x=Hr(n[f]);p.max=p.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+x)});const l=dh();Wf(l,n,e.layoutBox);const d=dh();i?Wf(d,t.applyTransform(s,!0),e.measuredBox):Wf(d,n,e.layoutBox);const u=!h5(l);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:x}=f;if(p&&x){const b=qs();Wx(b,e.layoutBox,p.layoutBox);const _=qs();Wx(_,n,x.layoutBox),m5(b,_)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=b,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function IW(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function OW(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VW(t){t.clearSnapshot()}function _R(t){t.clearMeasurements()}function ER(t){t.isLayoutDirty=!1}function UW(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function NR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function BW(t){t.resolveTargetDelta()}function FW(t){t.calcProjection()}function $W(t){t.resetSkewAndRotation()}function zW(t){t.removeLeadSnapshot()}function jR(t,e,n){t.translate=rs(e.translate,0,n),t.scale=rs(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function CR(t,e,n,s){t.min=rs(e.min,n.min,s),t.max=rs(e.max,n.max,s)}function HW(t,e,n,s){CR(t.x,e.x,n.x,s),CR(t.y,e.y,n.y,s)}function qW(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const WW={duration:.45,ease:[.4,0,.1,1]},SR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),TR=SR("applewebkit/")&&!SR("chrome/")?Math.round:Qa;function kR(t){t.min=TR(t.min),t.max=TR(t.max)}function YW(t){kR(t.x),kR(t.y)}function g5(t,e,n){return t==="position"||t==="preserve-aspect"&&!Jq(vR(e),vR(n),.2)}function GW(t){return t!==t.root&&t.scroll?.wasRoot}const KW=p5({attachResizeListener:(t,e)=>bp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),M_={current:void 0},x5=p5({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!M_.current){const t=new KW({});t.mount(window),t.setOptions({layoutScroll:!0}),M_.current=t}return M_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),QW={pan:{Feature:fW},drag:{Feature:mW,ProjectionNode:x5,MeasureLayout:c5}};function AR(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,i=s[r];i&&Hn.postRender(()=>i(e,qp(e)))}class XW extends Wc{mount(){const{current:e}=this.node;e&&(this.unmount=gH(e,(n,s)=>(AR(this.node,s,"Start"),r=>AR(this.node,r,"End"))))}unmount(){}}class ZW extends Wc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fp(bp(this.node.current,"focus",()=>this.onFocus()),bp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function RR(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),i=s[r];i&&Hn.postRender(()=>i(e,qp(e)))}class JW extends Wc{mount(){const{current:e}=this.node;e&&(this.unmount=vH(e,(n,s)=>(RR(this.node,s,"Start"),(r,{success:i})=>RR(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hE=new WeakMap,L_=new WeakMap,eY=t=>{const e=hE.get(t.target);e&&e(t)},tY=t=>{t.forEach(eY)};function nY({root:t,...e}){const n=t||document;L_.has(n)||L_.set(n,{});const s=L_.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(tY,{root:t,...e})),s[r]}function sY(t,e,n){const s=nY(e);return hE.set(t,n),s.observe(t),()=>{hE.delete(t),s.unobserve(t)}}const rY={some:0,all:1};class aY extends Wc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,l={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:rY[r]},d=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),x=h?f:p;x&&x(u)};return sY(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(iY(e,n))&&this.startObserver()}unmount(){}}function iY({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oY={inView:{Feature:aY},tap:{Feature:JW},focus:{Feature:ZW},hover:{Feature:XW}},lY={layout:{ProjectionNode:x5,MeasureLayout:c5}},cY={...Yq,...oY,...QW,...lY},ke=cq(cY,_q);function fN(t){const e=Bp(()=>Hd(t)),{isStatic:n}=y.useContext(Hp);if(n){const[,s]=y.useState(t);y.useEffect(()=>e.on("change",s),[])}return e}function y5(t,e){const n=fN(e()),s=()=>n.set(e());return s(),V2(()=>{const r=()=>Hn.preRender(s,!1,!0),i=t.map(l=>l.on("change",r));return()=>{i.forEach(l=>l()),vl(s)}}),n}function dY(t){Hf.current=[],t();const e=y5(Hf.current,t);return Hf.current=void 0,e}function uY(t,e,n,s){if(typeof t=="function")return dY(t);const r=_H(e,n,s);return Array.isArray(t)?DR(t,r):DR([t],([i])=>r(i))}function DR(t,e){const n=Bp(()=>[]);return y5(t,()=>{n.length=0;const s=t.length;for(let r=0;r<s;r++)n[r]=t[r].get();return e(n)})}function hY(t,e={}){const{isStatic:n}=y.useContext(Hp),s=()=>sr(t)?t.get():t;if(n)return uY(s);const r=fN(s());return y.useInsertionEffect(()=>EH(r,t,e),[r,JSON.stringify(e)]),r}const mY=()=>{};var PR={};const b5=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},fY=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],l=t[n++],d=t[n++],u=((r&7)<<18|(i&63)<<12|(l&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(u>>10)),e[s++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],l=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|l&63)}}return e.join("")},v5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],l=r+1<t.length,d=l?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,f=i>>2,p=(i&3)<<4|d>>4;let x=(d&15)<<2|h>>6,b=h&63;u||(b=64,l||(x=64)),s.push(n[f],n[p],n[x],n[b])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(b5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fY(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],d=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const p=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||d==null||h==null||p==null)throw new pY;const x=i<<2|d>>4;if(s.push(x),h!==64){const b=d<<4&240|h>>2;if(s.push(b),p!==64){const _=h<<6&192|p;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gY=function(t){const e=b5(t);return v5.encodeByteArray(e,!0)},Yx=function(t){return gY(t).replace(/\./g,"")},w5=function(t){try{return v5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xY(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const yY=()=>xY().__FIREBASE_DEFAULTS__,bY=()=>{if(typeof process>"u"||typeof PR>"u")return;const t=PR.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vY=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&w5(t[1]);return e&&JSON.parse(e)},mb=()=>{try{return mY()||yY()||bY()||vY()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_5=t=>mb()?.emulatorHosts?.[t],E5=t=>{const e=_5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},N5=()=>mb()?.config,j5=t=>mb()?.[`_${t}`];class wY{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function jo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fb(t){return(await fetch(t,{credentials:"include"})).ok}function _Y(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Yx(JSON.stringify(n)),Yx(JSON.stringify(l)),""].join(".")}const Yf={};function EY(){const t={prod:[],emulator:[]};for(const e of Object.keys(Yf))Yf[e]?t.emulator.push(e):t.prod.push(e);return t}function NY(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let MR=!1;function pN(t,e){if(typeof window>"u"||typeof document>"u"||!jo(window.location.host)||Yf[t]===e||Yf[t]||MR)return;Yf[t]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",i=EY().prod.length>0;function l(){const x=document.getElementById(s);x&&x.remove()}function d(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function u(x,b){x.setAttribute("width","24"),x.setAttribute("id",b),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{MR=!0,l()},x}function f(x,b){x.setAttribute("id",b),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function p(){const x=NY(s),b=n("text"),_=document.getElementById(b)||document.createElement("span"),j=n("learnmore"),v=document.getElementById(j)||document.createElement("a"),T=n("preprendIcon"),P=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const A=x.element;d(A),f(v,j);const C=h();u(P,T),A.append(P,_,v,C),document.body.appendChild(A)}i?(_.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Pr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pr())}function CY(){const t=mb()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SY(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TY(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kY(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AY(){const t=Pr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RY(){return!CY()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DY(){try{return typeof indexedDB=="object"}catch{return!1}}function PY(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const MY="FirebaseError";class Si extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=MY,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wp.prototype.create)}}class Wp{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],l=i?LY(i,s):"Error",d=`${this.serviceName}: ${l} (${r}).`;return new Si(r,d,s)}}function LY(t,e){return t.replace(IY,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const IY=/\{\$([^}]+)}/g;function OY(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tc(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],l=e[r];if(LR(i)&&LR(l)){if(!Tc(i,l))return!1}else if(i!==l)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function LR(t){return t!==null&&typeof t=="object"}function Yp(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Af(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Rf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VY(t,e){const n=new UY(t,e);return n.subscribe.bind(n)}class UY{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");BY(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=I_),r.error===void 0&&(r.error=I_),r.complete===void 0&&(r.complete=I_);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BY(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function I_(){}function mn(t){return t&&t._delegate?t._delegate:t}class wl{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Nd="[DEFAULT]";class FY{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new wY;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zY(e))try{this.getOrInitializeService({instanceIdentifier:Nd})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Nd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nd){return this.instances.has(e)}getOptions(e=Nd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(i);s===d&&l.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:$Y(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Nd){return this.component?this.component.multipleInstances?e:Nd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $Y(t){return t===Nd?void 0:t}function zY(t){return t.instantiationMode==="EAGER"}class HY{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FY(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Gt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Gt||(Gt={}));const qY={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},WY=Gt.INFO,YY={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},GY=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=YY[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let gN=class{constructor(e){this.name=e,this._logLevel=WY,this._logHandler=GY,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}};const KY=(t,e)=>e.some(n=>t instanceof n);let IR,OR;function QY(){return IR||(IR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XY(){return OR||(OR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C5=new WeakMap,mE=new WeakMap,S5=new WeakMap,O_=new WeakMap,xN=new WeakMap;function ZY(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",l)},i=()=>{n(_c(t.result)),r()},l=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&C5.set(n,t)}).catch(()=>{}),xN.set(e,t),e}function JY(t){if(mE.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",l),t.removeEventListener("abort",l)},i=()=>{n(),r()},l=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",l),t.addEventListener("abort",l)});mE.set(t,e)}let fE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||S5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _c(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eG(t){fE=t(fE)}function tG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(V_(this),e,...n);return S5.set(s,e.sort?e.sort():[e]),_c(s)}:XY().includes(t)?function(...e){return t.apply(V_(this),e),_c(C5.get(this))}:function(...e){return _c(t.apply(V_(this),e))}}function nG(t){return typeof t=="function"?tG(t):(t instanceof IDBTransaction&&JY(t),KY(t,QY())?new Proxy(t,fE):t)}function _c(t){if(t instanceof IDBRequest)return ZY(t);if(O_.has(t))return O_.get(t);const e=nG(t);return e!==t&&(O_.set(t,e),xN.set(e,t)),e}const V_=t=>xN.get(t);function sG(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const l=indexedDB.open(t,e),d=_c(l);return s&&l.addEventListener("upgradeneeded",u=>{s(_c(l.result),u.oldVersion,u.newVersion,_c(l.transaction),u)}),n&&l.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),d.then(u=>{i&&u.addEventListener("close",()=>i()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const rG=["get","getKey","getAll","getAllKeys","count"],aG=["put","add","delete","clear"],U_=new Map;function VR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(U_.get(e))return U_.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=aG.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||rG.includes(n)))return;const i=async function(l,...d){const u=this.transaction(l,r?"readwrite":"readonly");let h=u.store;return s&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),r&&u.done]))[0]};return U_.set(e,i),i}eG(t=>({...t,get:(e,n,s)=>VR(e,n)||t.get(e,n,s),has:(e,n)=>!!VR(e,n)||t.has(e,n)}));class iG{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oG(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function oG(t){return t.getComponent()?.type==="VERSION"}const pE="@firebase/app",UR="0.14.6";const _l=new gN("@firebase/app"),lG="@firebase/app-compat",cG="@firebase/analytics-compat",dG="@firebase/analytics",uG="@firebase/app-check-compat",hG="@firebase/app-check",mG="@firebase/auth",fG="@firebase/auth-compat",pG="@firebase/database",gG="@firebase/data-connect",xG="@firebase/database-compat",yG="@firebase/functions",bG="@firebase/functions-compat",vG="@firebase/installations",wG="@firebase/installations-compat",_G="@firebase/messaging",EG="@firebase/messaging-compat",NG="@firebase/performance",jG="@firebase/performance-compat",CG="@firebase/remote-config",SG="@firebase/remote-config-compat",TG="@firebase/storage",kG="@firebase/storage-compat",AG="@firebase/firestore",RG="@firebase/ai",DG="@firebase/firestore-compat",PG="firebase",MG="12.6.0";const gE="[DEFAULT]",LG={[pE]:"fire-core",[lG]:"fire-core-compat",[dG]:"fire-analytics",[cG]:"fire-analytics-compat",[hG]:"fire-app-check",[uG]:"fire-app-check-compat",[mG]:"fire-auth",[fG]:"fire-auth-compat",[pG]:"fire-rtdb",[gG]:"fire-data-connect",[xG]:"fire-rtdb-compat",[yG]:"fire-fn",[bG]:"fire-fn-compat",[vG]:"fire-iid",[wG]:"fire-iid-compat",[_G]:"fire-fcm",[EG]:"fire-fcm-compat",[NG]:"fire-perf",[jG]:"fire-perf-compat",[CG]:"fire-rc",[SG]:"fire-rc-compat",[TG]:"fire-gcs",[kG]:"fire-gcs-compat",[AG]:"fire-fst",[DG]:"fire-fst-compat",[RG]:"fire-vertex","fire-js":"fire-js",[PG]:"fire-js-all"};const Gx=new Map,IG=new Map,xE=new Map;function BR(t,e){try{t.container.addComponent(e)}catch(n){_l.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kc(t){const e=t.name;if(xE.has(e))return _l.debug(`There were multiple attempts to register component ${e}.`),!1;xE.set(e,t);for(const n of Gx.values())BR(n,t);for(const n of IG.values())BR(n,t);return!0}function Gp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dr(t){return t==null?!1:t.settings!==void 0}const OG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ec=new Wp("app","Firebase",OG);class VG{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ec.create("app-deleted",{appName:this._name})}}const ru=MG;function T5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:gE,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Ec.create("bad-app-name",{appName:String(r)});if(n||(n=N5()),!n)throw Ec.create("no-options");const i=Gx.get(r);if(i){if(Tc(n,i.options)&&Tc(s,i.config))return i;throw Ec.create("duplicate-app",{appName:r})}const l=new HY(r);for(const u of xE.values())l.addComponent(u);const d=new VG(n,s,l);return Gx.set(r,d),d}function yN(t=gE){const e=Gx.get(t);if(!e&&t===gE&&N5())return T5();if(!e)throw Ec.create("no-app",{appName:t});return e}function Xa(t,e,n){let s=LG[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const l=[`Unable to register library "${s}" with version "${e}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_l.warn(l.join(" "));return}kc(new wl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const UG="firebase-heartbeat-database",BG=1,vp="firebase-heartbeat-store";let B_=null;function k5(){return B_||(B_=sG(UG,BG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ec.create("idb-open",{originalErrorMessage:t.message})})),B_}async function FG(t){try{const n=(await k5()).transaction(vp),s=await n.objectStore(vp).get(A5(t));return await n.done,s}catch(e){if(e instanceof Si)_l.warn(e.message);else{const n=Ec.create("idb-get",{originalErrorMessage:e?.message});_l.warn(n.message)}}}async function FR(t,e){try{const s=(await k5()).transaction(vp,"readwrite");await s.objectStore(vp).put(e,A5(t)),await s.done}catch(n){if(n instanceof Si)_l.warn(n.message);else{const s=Ec.create("idb-set",{originalErrorMessage:n?.message});_l.warn(s.message)}}}function A5(t){return`${t.name}!${t.options.appId}`}const $G=1024,zG=30;class HG{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WG(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$R();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>zG){const r=YG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_l.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=$R(),{heartbeatsToSend:n,unsentEntries:s}=qG(this._heartbeatsCache.heartbeats),r=Yx(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return _l.warn(e),""}}}function $R(){return new Date().toISOString().substring(0,10)}function qG(t,e=$G){const n=[];let s=t.slice();for(const r of t){const i=n.find(l=>l.agent===r.agent);if(i){if(i.dates.push(r.date),zR(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),zR(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class WG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DY()?PY().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FG(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return FR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return FR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zR(t){return Yx(JSON.stringify({version:2,heartbeats:t})).length}function YG(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}function GG(t){kc(new wl("platform-logger",e=>new iG(e),"PRIVATE")),kc(new wl("heartbeat",e=>new HG(e),"PRIVATE")),Xa(pE,UR,t),Xa(pE,UR,"esm2020"),Xa("fire-js","")}GG("");function R5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KG=R5,D5=new Wp("auth","Firebase",R5());const Kx=new gN("@firebase/auth");function QG(t,...e){Kx.logLevel<=Gt.WARN&&Kx.warn(`Auth (${ru}): ${t}`,...e)}function bx(t,...e){Kx.logLevel<=Gt.ERROR&&Kx.error(`Auth (${ru}): ${t}`,...e)}function Ta(t,...e){throw vN(t,...e)}function bi(t,...e){return vN(t,...e)}function bN(t,e,n){const s={...KG(),[e]:n};return new Wp("auth","Firebase",s).create(e,{appName:t.name})}function co(t){return bN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function P5(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ta(t,"argument-error"),bN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vN(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return D5.create(t,...e)}function et(t,e,...n){if(!t)throw vN(e,...n)}function ol(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bx(e),new Error(e)}function El(t,e){t||ol(e)}function yE(){return typeof self<"u"&&self.location?.href||""}function XG(){return HR()==="http:"||HR()==="https:"}function HR(){return typeof self<"u"&&self.location?.protocol||null}function ZG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XG()||TY()||"connection"in navigator)?navigator.onLine:!0}function JG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Kp{constructor(e,n){this.shortDelay=e,this.longDelay=n,El(n>e,"Short delay should be less than long delay!"),this.isMobile=jY()||kY()}get(){return ZG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wN(t,e){El(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class M5{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ol("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ol("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ol("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const eK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const tK=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nK=new Kp(3e4,6e4);function Ti(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ti(t,e,n,s,r={}){return L5(t,r,async()=>{let i={},l={};s&&(e==="GET"?l=s:i={body:JSON.stringify(s)});const d=Yp({key:t.config.apiKey,...l}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...i};return SY()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&jo(t.emulatorConfig.host)&&(h.credentials="include"),M5.fetch()(await I5(t,t.config.apiHost,n,d),h)})}async function L5(t,e,n){t._canInitEmulator=!1;const s={...eK,...e};try{const r=new rK(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await i.json();if("needConfirmation"in l)throw V0(t,"account-exists-with-different-credential",l);if(i.ok&&!("errorMessage"in l))return l;{const d=i.ok?l.errorMessage:l.error.message,[u,h]=d.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw V0(t,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw V0(t,"email-already-in-use",l);if(u==="USER_DISABLED")throw V0(t,"user-disabled",l);const f=s[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw bN(t,f,h);Ta(t,f)}}catch(r){if(r instanceof Si)throw r;Ta(t,"network-request-failed",{message:String(r)})}}async function Qp(t,e,n,s,r={}){const i=await ti(t,e,n,s,r);return"mfaPendingCredential"in i&&Ta(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function I5(t,e,n,s){const r=`${e}${n}?${s}`,i=t,l=i.config.emulator?wN(t.config,r):`${t.config.apiScheme}://${r}`;return tK.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(l).toString():l}function sK(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rK{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(bi(this.auth,"network-request-failed")),nK.get())})}}function V0(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=bi(t,e,s);return r.customData._tokenResponse=n,r}function qR(t){return t!==void 0&&t.enterprise!==void 0}class aK{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return sK(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iK(t,e){return ti(t,"GET","/v2/recaptchaConfig",Ti(t,e))}async function oK(t,e){return ti(t,"POST","/v1/accounts:delete",e)}async function Qx(t,e){return ti(t,"POST","/v1/accounts:lookup",e)}function Gf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lK(t,e=!1){const n=mn(t),s=await n.getIdToken(e),r=_N(s);et(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,l=i?.sign_in_provider;return{claims:r,token:s,authTime:Gf(F_(r.auth_time)),issuedAtTime:Gf(F_(r.iat)),expirationTime:Gf(F_(r.exp)),signInProvider:l||null,signInSecondFactor:i?.sign_in_second_factor||null}}function F_(t){return Number(t)*1e3}function _N(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return bx("JWT malformed, contained fewer than 3 sections"),null;try{const r=w5(n);return r?JSON.parse(r):(bx("Failed to decode base64 JWT payload"),null)}catch(r){return bx("Caught error parsing JWT payload as JSON",r?.toString()),null}}function WR(t){const e=_N(t);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Dh(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Si&&cK(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function cK({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class dK{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class bE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gf(this.lastLoginAt),this.creationTime=Gf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xx(t){const e=t.auth,n=await t.getIdToken(),s=await Dh(t,Qx(e,{idToken:n}));et(s?.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=r.providerUserInfo?.length?O5(r.providerUserInfo):[],l=hK(t.providerData,i),d=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!l?.length,h=d?u:!1,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new bE(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function uK(t){const e=mn(t);await Xx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hK(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function O5(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function mK(t,e){const n=await L5(t,{},async()=>{const s=Yp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,l=await I5(t,r,"/v1/token",`key=${i}`),d=await t._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:d,body:s};return t.emulatorConfig&&jo(t.emulatorConfig.host)&&(u.credentials="include"),M5.fetch()(l,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fK(t,e){return ti(t,"POST","/v2/accounts:revokeToken",Ti(t,e))}class bh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):WR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){et(e.length!==0,"internal-error");const n=WR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await mK(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,l=new bh;return s&&(et(typeof s=="string","internal-error",{appName:e}),l.refreshToken=s),r&&(et(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),i&&(et(typeof i=="number","internal-error",{appName:e}),l.expirationTime=i),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bh,this.toJSON())}_performRefresh(){return ol("not implemented")}}function rc(t,e){et(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new dK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new bE(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Dh(this,this.stsTokenManager.getToken(this.auth,e));return et(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lK(this,e)}reload(){return uK(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Xx(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(co(this.auth));const e=await this.getIdToken();return await Dh(this,oK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,l=n.photoURL??void 0,d=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:x,isAnonymous:b,providerData:_,stsTokenManager:j}=n;et(p&&j,e,"internal-error");const v=bh.fromJSON(this.name,j);et(typeof p=="string",e,"internal-error"),rc(s,e.name),rc(r,e.name),et(typeof x=="boolean",e,"internal-error"),et(typeof b=="boolean",e,"internal-error"),rc(i,e.name),rc(l,e.name),rc(d,e.name),rc(u,e.name),rc(h,e.name),rc(f,e.name);const T=new yi({uid:p,auth:e,email:r,emailVerified:x,displayName:s,isAnonymous:b,photoURL:l,phoneNumber:i,tenantId:d,stsTokenManager:v,createdAt:h,lastLoginAt:f});return _&&Array.isArray(_)&&(T.providerData=_.map(P=>({...P}))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,n,s=!1){const r=new bh;r.updateFromServerResponse(n);const i=new yi({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await Xx(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];et(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?O5(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!i?.length,d=new bh;d.updateFromIdToken(s);const u=new yi({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:l}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new bE(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(u,h),u}}const YR=new Map;function ll(t){El(t instanceof Function,"Expected a class definition");let e=YR.get(t);return e?(El(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,YR.set(t,e),e)}class V5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}V5.type="NONE";const GR=V5;function vx(t,e,n){return`firebase:${t}:${e}:${n}`}class vh{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=vx(this.userKey,r.apiKey,i),this.fullPersistenceKey=vx("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qx(this.auth,{idToken:e}).catch(()=>{});return n?yi._fromGetAccountInfoResponse(this.auth,n,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new vh(ll(GR),e,s);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=r[0]||ll(GR);const l=vx(s,e.config.apiKey,e.name);let d=null;for(const h of n)try{const f=await h._get(l);if(f){let p;if(typeof f=="string"){const x=await Qx(e,{idToken:f}).catch(()=>{});if(!x)break;p=await yi._fromGetAccountInfoResponse(e,x,f)}else p=yi._fromJSON(e,f);h!==i&&(d=p),i=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new vh(i,e,s):(i=u[0],d&&await i._set(l,d.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(l)}catch{}})),new vh(i,e,s))}}function KR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H5(e))return"Blackberry";if(q5(e))return"Webos";if(B5(e))return"Safari";if((e.includes("chrome/")||F5(e))&&!e.includes("edge/"))return"Chrome";if(z5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if(s?.length===2)return s[1]}return"Other"}function U5(t=Pr()){return/firefox\//i.test(t)}function B5(t=Pr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function F5(t=Pr()){return/crios\//i.test(t)}function $5(t=Pr()){return/iemobile/i.test(t)}function z5(t=Pr()){return/android/i.test(t)}function H5(t=Pr()){return/blackberry/i.test(t)}function q5(t=Pr()){return/webos/i.test(t)}function EN(t=Pr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pK(t=Pr()){return EN(t)&&!!window.navigator?.standalone}function gK(){return AY()&&document.documentMode===10}function W5(t=Pr()){return EN(t)||z5(t)||q5(t)||H5(t)||/windows phone/i.test(t)||$5(t)}function Y5(t,e=[]){let n;switch(t){case"Browser":n=KR(Pr());break;case"Worker":n=`${KR(Pr())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ru}/${s}`}class xK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((l,d)=>{try{const u=e(i);l(u)}catch(u){d(u)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function yK(t,e={}){return ti(t,"GET","/v2/passwordPolicy",Ti(t,e))}const bK=6;class vK{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??bK,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class wK{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QR(this),this.idTokenSubscription=new QR(this),this.beforeStateQueue=new xK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ll(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qx(this,{idToken:e}),s=await yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dr(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,l=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!i||i===l)&&d?.user&&(s=d.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xx(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(co(this));const n=e?mn(e):null;return n&&et(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ll(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yK(this),n=new vK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wp("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await fK(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ll(e)||this._popupRedirectResolver;et(n,this,"argument-error"),this.redirectPersistenceManager=await vh.create(this,[ll(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(d,this,"internal-error"),d.then(()=>{l||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,s,r);return()=>{l=!0,u()}}else{const u=e.addObserver(n);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&QG(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ni(t){return mn(t)}class QR{constructor(e){this.auth=e,this.observer=null,this.addObserver=VY(n=>this.observer=n)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _K(t){pb=t}function G5(t){return pb.loadJS(t)}function EK(){return pb.recaptchaEnterpriseScript}function NK(){return pb.gapiScript}function jK(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class CK{constructor(){this.enterprise=new SK}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SK{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const TK="recaptcha-enterprise",K5="NO_RECAPTCHA";class kK{constructor(e){this.type=TK,this.auth=ni(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(l,d)=>{iK(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new aK(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,l(h.siteKey)}}).catch(u=>{d(u)})})}function r(i,l,d){const u=window.grecaptcha;qR(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{l(h)}).catch(()=>{l(K5)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CK().execute("siteKey",{action:"verify"}):new Promise((i,l)=>{s(this.auth).then(d=>{if(!n&&qR(window.grecaptcha))r(d,i,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let u=EK();u.length!==0&&(u+=d),G5(u).then(()=>{r(d,i,l)}).catch(h=>{l(h)})}}).catch(d=>{l(d)})})}}async function XR(t,e,n,s=!1,r=!1){const i=new kK(t);let l;if(r)l=K5;else try{l=await i.verify(n)}catch{l=await i.verify(n,!0)}const d={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const u=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const u=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:l}):Object.assign(d,{captchaResponse:l}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Zx(t,e,n,s,r){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await XR(t,e,n,n==="getOobCode");return s(t,i)}else return s(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await XR(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(i)})}function AK(t,e){const n=Gp(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(Tc(i,e??{}))return r;Ta(r,"already-initialized")}return n.initialize({options:e})}function RK(t,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(ll);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e?.popupRedirectResolver)}function DK(t,e,n){const s=ni(t);et(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Q5(e),{host:l,port:d}=PK(e),u=d===null?"":`:${d}`,h={url:`${i}//${l}${u}/`},f=Object.freeze({host:l,port:d,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){et(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),et(Tc(h,s.config.emulator)&&Tc(f,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=h,s.emulatorConfig=f,s.settings.appVerificationDisabledForTesting=!0,jo(l)?(fb(`${i}//${l}${u}`),pN("Auth",!0)):MK()}function Q5(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function PK(t){const e=Q5(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:ZR(s.substr(i.length+1))}}else{const[i,l]=s.split(":");return{host:i,port:ZR(l)}}}function ZR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MK(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class NN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ol("not implemented")}_getIdTokenResponse(e){return ol("not implemented")}_linkToIdToken(e,n){return ol("not implemented")}_getReauthenticationResolver(e){return ol("not implemented")}}async function X5(t,e){return ti(t,"POST","/v1/accounts:resetPassword",Ti(t,e))}async function LK(t,e){return ti(t,"POST","/v1/accounts:update",e)}async function IK(t,e){return ti(t,"POST","/v1/accounts:signUp",e)}async function OK(t,e){return ti(t,"POST","/v1/accounts:update",Ti(t,e))}async function VK(t,e){return Qp(t,"POST","/v1/accounts:signInWithPassword",Ti(t,e))}async function UK(t,e){return ti(t,"POST","/v1/accounts:sendOobCode",Ti(t,e))}async function BK(t,e){return UK(t,e)}async function FK(t,e){return Qp(t,"POST","/v1/accounts:signInWithEmailLink",Ti(t,e))}async function $K(t,e){return Qp(t,"POST","/v1/accounts:signInWithEmailLink",Ti(t,e))}class wp extends NN{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new wp(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new wp(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zx(e,n,"signInWithPassword",VK);case"emailLink":return FK(e,{email:this._email,oobCode:this._password});default:Ta(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zx(e,s,"signUpPassword",IK);case"emailLink":return $K(e,{idToken:n,email:this._email,oobCode:this._password});default:Ta(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function wh(t,e){return Qp(t,"POST","/v1/accounts:signInWithIdp",Ti(t,e))}const zK="http://localhost";class qd extends NN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ta("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const l=new qd(s,r);return l.idToken=i.idToken||void 0,l.accessToken=i.accessToken||void 0,l.secret=i.secret,l.nonce=i.nonce,l.pendingToken=i.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return wh(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,wh(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wh(e,n)}buildRequest(){const e={requestUri:zK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yp(n)}return e}}function HK(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qK(t){const e=Af(Rf(t)).link,n=e?Af(Rf(e)).deep_link_id:null,s=Af(Rf(t)).deep_link_id;return(s?Af(Rf(s)).link:null)||s||n||e||t}class jN{constructor(e){const n=Af(Rf(e)),s=n.apiKey??null,r=n.oobCode??null,i=HK(n.mode??null);et(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qK(e);try{return new jN(n)}catch{return null}}}class rm{constructor(){this.providerId=rm.PROVIDER_ID}static credential(e,n){return wp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=jN.parseLink(n);return et(s,"argument-error"),wp._fromEmailAndCode(e,s.code,s.tenantId)}}rm.PROVIDER_ID="password";rm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class gb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xp extends gb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mc extends Xp{constructor(){super("facebook.com")}static credential(e){return qd._fromParams({providerId:mc.PROVIDER_ID,signInMethod:mc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mc.credentialFromTaggedObject(e)}static credentialFromError(e){return mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mc.credential(e.oauthAccessToken)}catch{return null}}}mc.FACEBOOK_SIGN_IN_METHOD="facebook.com";mc.PROVIDER_ID="facebook.com";class il extends Xp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qd._fromParams({providerId:il.PROVIDER_ID,signInMethod:il.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return il.credentialFromTaggedObject(e)}static credentialFromError(e){return il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return il.credential(n,s)}catch{return null}}}il.GOOGLE_SIGN_IN_METHOD="google.com";il.PROVIDER_ID="google.com";class fc extends Xp{constructor(){super("github.com")}static credential(e){return qd._fromParams({providerId:fc.PROVIDER_ID,signInMethod:fc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fc.credentialFromTaggedObject(e)}static credentialFromError(e){return fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fc.credential(e.oauthAccessToken)}catch{return null}}}fc.GITHUB_SIGN_IN_METHOD="github.com";fc.PROVIDER_ID="github.com";class pc extends Xp{constructor(){super("twitter.com")}static credential(e,n){return qd._fromParams({providerId:pc.PROVIDER_ID,signInMethod:pc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pc.credentialFromTaggedObject(e)}static credentialFromError(e){return pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return pc.credential(n,s)}catch{return null}}}pc.TWITTER_SIGN_IN_METHOD="twitter.com";pc.PROVIDER_ID="twitter.com";async function WK(t,e){return Qp(t,"POST","/v1/accounts:signUp",Ti(t,e))}class Wd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await yi._fromIdTokenResponse(e,s,r),l=JR(s);return new Wd({user:i,providerId:l,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=JR(s);return new Wd({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function JR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Jx extends Si{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Jx.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new Jx(e,n,s,r)}}function Z5(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Jx._fromErrorAndOperation(t,i,e,s):i})}async function YK(t,e,n=!1){const s=await Dh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wd._forOperation(t,"link",s)}async function GK(t,e,n=!1){const{auth:s}=t;if(Dr(s.app))return Promise.reject(co(s));const r="reauthenticate";try{const i=await Dh(t,Z5(s,r,e,t),n);et(i.idToken,s,"internal-error");const l=_N(i.idToken);et(l,s,"internal-error");const{sub:d}=l;return et(t.uid===d,s,"user-mismatch"),Wd._forOperation(t,r,i)}catch(i){throw i?.code==="auth/user-not-found"&&Ta(s,"user-mismatch"),i}}async function J5(t,e,n=!1){if(Dr(t.app))return Promise.reject(co(t));const s="signIn",r=await Z5(t,s,e),i=await Wd._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function KK(t,e){return J5(ni(t),e)}class CN{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?SN._fromServerResponse(e,n):"totpInfo"in n?TN._fromServerResponse(e,n):Ta(e,"internal-error")}}class SN extends CN{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new SN(n)}}class TN extends CN{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new TN(n)}}function QK(t,e,n){et(n.url?.length>0,t,"invalid-continue-uri"),et(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),et(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(et(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(et(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function kN(t){const e=ni(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XK(t,e,n){const s=ni(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&QK(s,r,n),await Zx(s,r,"getOobCode",BK)}async function ZK(t,e,n){await X5(mn(t),{oobCode:e,newPassword:n}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&kN(t),s})}async function JK(t,e){await OK(mn(t),{oobCode:e})}async function eO(t,e){const n=mn(t),s=await X5(n,{oobCode:e}),r=s.requestType;switch(et(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":et(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":et(s.mfaInfo,n,"internal-error");default:et(s.email,n,"internal-error")}let i=null;return s.mfaInfo&&(i=CN._fromServerResponse(ni(n),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:i},operation:r}}async function eQ(t,e){const{data:n}=await eO(mn(t),e);return n.email}async function tQ(t,e,n){if(Dr(t.app))return Promise.reject(co(t));const s=ni(t),l=await Zx(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WK).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&kN(t),u}),d=await Wd._fromIdTokenResponse(s,"signIn",l);return await s._updateCurrentUser(d.user),d}function nQ(t,e,n){return Dr(t.app)?Promise.reject(co(t)):KK(mn(t),rm.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&kN(t),s})}function sQ(t,e){return rQ(mn(t),null,e)}async function rQ(t,e,n){const{auth:s}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const l=await Dh(t,LK(s,i));await t._updateTokensIfNecessary(l,!0)}function aQ(t,e,n,s){return mn(t).onIdTokenChanged(e,n,s)}function iQ(t,e,n){return mn(t).beforeAuthStateChanged(e,n)}function oQ(t,e,n,s){return mn(t).onAuthStateChanged(e,n,s)}function AN(t){return mn(t).signOut()}const ey="__sak";class tO{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ey,"1"),this.storage.removeItem(ey),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const lQ=1e3,cQ=10;class nO extends tO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,d,u)=>{this.notifyListeners(l,u)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(s);!n&&this.localCache[s]===l||this.notifyListeners(s,l)},i=this.storage.getItem(s);gK()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,cQ):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},lQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nO.type="LOCAL";const dQ=nO;class sO extends tO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sO.type="SESSION";const rO=sO;function uQ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class xb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new xb(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,l=this.handlersMap[r];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const d=Array.from(l).map(async h=>h(n.origin,i)),u=await uQ(d);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xb.receivers=[];function RN(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}class hQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,l;return new Promise((d,u)=>{const h=RN("",20);r.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},s);l={messageChannel:r,onMessage(p){const x=p;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),d(x.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function uo(){return window}function mQ(t){uo().location.href=t}function aO(){return typeof uo().WorkerGlobalScope<"u"&&typeof uo().importScripts=="function"}async function fQ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pQ(){return navigator?.serviceWorker?.controller||null}function gQ(){return aO()?self:null}const iO="firebaseLocalStorageDb",xQ=1,ty="firebaseLocalStorage",oO="fbase_key";class Zp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yb(t,e){return t.transaction([ty],e?"readwrite":"readonly").objectStore(ty)}function yQ(){const t=indexedDB.deleteDatabase(iO);return new Zp(t).toPromise()}function vE(){const t=indexedDB.open(iO,xQ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ty,{keyPath:oO})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ty)?e(s):(s.close(),await yQ(),e(await vE()))})})}async function eD(t,e,n){const s=yb(t,!0).put({[oO]:e,value:n});return new Zp(s).toPromise()}async function bQ(t,e){const n=yb(t,!1).get(e),s=await new Zp(n).toPromise();return s===void 0?null:s.value}function tD(t,e){const n=yb(t,!0).delete(e);return new Zp(n).toPromise()}const vQ=800,wQ=3;class lO{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vE(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>wQ)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xb._getInstance(gQ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await fQ(),!this.activeServiceWorker)return;this.sender=new hQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vE();return await eD(e,ey,"1"),await tD(e,ey),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>eD(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>bQ(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=yb(r,!1).getAll();return new Zp(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lO.type="LOCAL";const _Q=lO;new Kp(3e4,6e4);function DN(t,e){return e?ll(e):(et(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class PN extends NN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function EQ(t){return J5(t.auth,new PN(t),t.bypassAuthState)}function NQ(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),GK(n,new PN(t),t.bypassAuthState)}async function jQ(t){const{auth:e,user:n}=t;return et(n,e,"internal-error"),YK(n,new PN(t),t.bypassAuthState)}class cO{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:l,type:d}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EQ;case"linkViaPopup":case"linkViaRedirect":return jQ;case"reauthViaPopup":case"reauthViaRedirect":return NQ;default:Ta(this.auth,"internal-error")}}resolve(e){El(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){El(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const CQ=new Kp(2e3,1e4);async function SQ(t,e,n){if(Dr(t.app))return Promise.reject(bi(t,"operation-not-supported-in-this-environment"));const s=ni(t);P5(t,e,gb);const r=DN(s,n);return new Rd(s,"signInViaPopup",e,r).executeNotNull()}class Rd extends cO{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Rd.currentPopupAction&&Rd.currentPopupAction.cancel(),Rd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){El(this.filter.length===1,"Popup operations only handle one event");const e=RN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(bi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rd.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CQ.get())};e()}}Rd.currentPopupAction=null;const TQ="pendingRedirect",wx=new Map;class kQ extends cO{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wx.get(this.auth._key());if(!e){try{const s=await AQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}wx.set(this.auth._key(),e)}return this.bypassAuthState||wx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AQ(t,e){const n=uO(e),s=dO(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}async function RQ(t,e){return dO(t)._set(uO(e),"true")}function DQ(t,e){wx.set(t._key(),e)}function dO(t){return ll(t._redirectPersistence)}function uO(t){return vx(TQ,t.config.apiKey,t.name)}function nD(t,e,n){return PQ(t,e,n)}async function PQ(t,e,n){if(Dr(t.app))return Promise.reject(co(t));const s=ni(t);P5(t,e,gb),await s._initializationPromise;const r=DN(s,n);return await RQ(r,s),r._openRedirect(s,e,"signInViaRedirect")}async function MQ(t,e){return await ni(t)._initializationPromise,hO(t,e,!1)}async function hO(t,e,n=!1){if(Dr(t.app))return Promise.reject(co(t));const s=ni(t),r=DN(s,e),l=await new kQ(s,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await s._persistUserIfCurrent(l.user),await s._setRedirectUser(null,e)),l}const LQ=600*1e3;class IQ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OQ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!mO(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(bi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(sD(e))}saveEventToCache(e){this.cachedEventUids.add(sD(e)),this.lastProcessedEventTime=Date.now()}}function sD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mO({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function OQ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mO(t);default:return!1}}async function VQ(t,e={}){return ti(t,"GET","/v1/projects",e)}const UQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BQ=/^https?/;async function FQ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await VQ(t);for(const n of e)try{if($Q(n))return}catch{}Ta(t,"unauthorized-domain")}function $Q(t){const e=yE(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===s}if(!BQ.test(n))return!1;if(UQ.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}const zQ=new Kp(3e4,6e4);function rD(){const t=uo().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HQ(t){return new Promise((e,n)=>{function s(){rD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rD(),n(bi(t,"network-request-failed"))},timeout:zQ.get()})}if(uo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(uo().gapi?.load)s();else{const r=jK("iframefcb");return uo()[r]=()=>{gapi.load?s():n(bi(t,"network-request-failed"))},G5(`${NK()}?onload=${r}`).catch(i=>n(i))}}).catch(e=>{throw _x=null,e})}let _x=null;function qQ(t){return _x=_x||HQ(t),_x}const WQ=new Kp(5e3,15e3),YQ="__/auth/iframe",GQ="emulator/auth/iframe",KQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XQ(t){const e=t.config;et(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wN(e,GQ):`https://${t.config.authDomain}/${YQ}`,s={apiKey:e.apiKey,appName:t.name,v:ru},r=QQ.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Yp(s).slice(1)}`}async function ZQ(t){const e=await qQ(t),n=uo().gapi;return et(n,t,"internal-error"),e.open({where:document.body,url:XQ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KQ,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const l=bi(t,"network-request-failed"),d=uo().setTimeout(()=>{i(l)},WQ.get());function u(){uo().clearTimeout(d),r(s)}s.ping(u).then(u,()=>{i(l)})}))}const JQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eX=500,tX=600,nX="_blank",sX="http://localhost";class aD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rX(t,e,n,s=eX,r=tX){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const u={...JQ,width:s.toString(),height:r.toString(),top:i,left:l},h=Pr().toLowerCase();n&&(d=F5(h)?nX:n),U5(h)&&(e=e||sX,u.scrollbars="yes");const f=Object.entries(u).reduce((x,[b,_])=>`${x}${b}=${_},`,"");if(pK(h)&&d!=="_self")return aX(e||"",d),new aD(null);const p=window.open(e||"",d,f);et(p,t,"popup-blocked");try{p.focus()}catch{}return new aD(p)}function aX(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const iX="__/auth/handler",oX="emulator/auth/handler",lX=encodeURIComponent("fac");async function iD(t,e,n,s,r,i){et(t.config.authDomain,t,"auth-domain-config-required"),et(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ru,eventId:r};if(e instanceof gb){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",OY(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))l[f]=p}if(e instanceof Xp){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(l.scopes=f.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const f of Object.keys(d))d[f]===void 0&&delete d[f];const u=await t._getAppCheckToken(),h=u?`#${lX}=${encodeURIComponent(u)}`:"";return`${cX(t)}?${Yp(d).slice(1)}${h}`}function cX({config:t}){return t.emulator?wN(t,oX):`https://${t.authDomain}/${iX}`}const $_="webStorageSupport";class dX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rO,this._completeRedirectFn=hO,this._overrideRedirectResult=DQ}async _openPopup(e,n,s,r){El(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await iD(e,n,s,yE(),r);return rX(e,i,RN())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await iD(e,n,s,yE(),r);return mQ(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(El(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await ZQ(e),s=new IQ(e);return n.register("authEvent",r=>(et(r?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($_,{type:$_},r=>{const i=r?.[0]?.[$_];i!==void 0&&n(!!i),Ta(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FQ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W5()||B5()||EN()}}const uX=dX;var oD="@firebase/auth",lD="1.11.1";class hX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mX(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fX(t){kc(new wl("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=s.options;et(l&&!l.includes(":"),"invalid-api-key",{appName:s.name});const u={apiKey:l,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y5(t)},h=new wK(s,r,i,u);return RK(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),kc(new wl("auth-internal",e=>{const n=ni(e.getProvider("auth").getImmediate());return(s=>new hX(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xa(oD,lD,mX(t)),Xa(oD,lD,"esm2020")}const pX=300,gX=j5("authIdTokenMaxAge")||pX;let cD=null;const xX=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>gX)return;const r=n?.token;cD!==r&&(cD=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function yX(t=yN()){const e=Gp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AK(t,{popupRedirectResolver:uX,persistence:[_Q,dQ,rO]}),s=j5("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const l=xX(i.toString());iQ(n,l,()=>l(n.currentUser)),aQ(n,d=>l(d))}}const r=_5("auth");return r&&DK(n,`http://${r}`),n}function bX(){return document.getElementsByTagName("head")?.[0]??document}_K({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=bi("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",bX().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fX("Browser");var vX="firebase",wX="12.6.0";Xa(vX,wX,"app");var dD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Nc,fO;(function(){var t;function e(k,R){function S(){}S.prototype=R.prototype,k.F=R.prototype,k.prototype=new S,k.prototype.constructor=k,k.D=function(O,I,F){for(var $=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)$[Q-2]=arguments[Q];return R.prototype[I].apply(O,$)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(k,R,S){S||(S=0);const O=Array(16);if(typeof R=="string")for(var I=0;I<16;++I)O[I]=R.charCodeAt(S++)|R.charCodeAt(S++)<<8|R.charCodeAt(S++)<<16|R.charCodeAt(S++)<<24;else for(I=0;I<16;++I)O[I]=R[S++]|R[S++]<<8|R[S++]<<16|R[S++]<<24;R=k.g[0],S=k.g[1],I=k.g[2];let F=k.g[3],$;$=R+(F^S&(I^F))+O[0]+3614090360&4294967295,R=S+($<<7&4294967295|$>>>25),$=F+(I^R&(S^I))+O[1]+3905402710&4294967295,F=R+($<<12&4294967295|$>>>20),$=I+(S^F&(R^S))+O[2]+606105819&4294967295,I=F+($<<17&4294967295|$>>>15),$=S+(R^I&(F^R))+O[3]+3250441966&4294967295,S=I+($<<22&4294967295|$>>>10),$=R+(F^S&(I^F))+O[4]+4118548399&4294967295,R=S+($<<7&4294967295|$>>>25),$=F+(I^R&(S^I))+O[5]+1200080426&4294967295,F=R+($<<12&4294967295|$>>>20),$=I+(S^F&(R^S))+O[6]+2821735955&4294967295,I=F+($<<17&4294967295|$>>>15),$=S+(R^I&(F^R))+O[7]+4249261313&4294967295,S=I+($<<22&4294967295|$>>>10),$=R+(F^S&(I^F))+O[8]+1770035416&4294967295,R=S+($<<7&4294967295|$>>>25),$=F+(I^R&(S^I))+O[9]+2336552879&4294967295,F=R+($<<12&4294967295|$>>>20),$=I+(S^F&(R^S))+O[10]+4294925233&4294967295,I=F+($<<17&4294967295|$>>>15),$=S+(R^I&(F^R))+O[11]+2304563134&4294967295,S=I+($<<22&4294967295|$>>>10),$=R+(F^S&(I^F))+O[12]+1804603682&4294967295,R=S+($<<7&4294967295|$>>>25),$=F+(I^R&(S^I))+O[13]+4254626195&4294967295,F=R+($<<12&4294967295|$>>>20),$=I+(S^F&(R^S))+O[14]+2792965006&4294967295,I=F+($<<17&4294967295|$>>>15),$=S+(R^I&(F^R))+O[15]+1236535329&4294967295,S=I+($<<22&4294967295|$>>>10),$=R+(I^F&(S^I))+O[1]+4129170786&4294967295,R=S+($<<5&4294967295|$>>>27),$=F+(S^I&(R^S))+O[6]+3225465664&4294967295,F=R+($<<9&4294967295|$>>>23),$=I+(R^S&(F^R))+O[11]+643717713&4294967295,I=F+($<<14&4294967295|$>>>18),$=S+(F^R&(I^F))+O[0]+3921069994&4294967295,S=I+($<<20&4294967295|$>>>12),$=R+(I^F&(S^I))+O[5]+3593408605&4294967295,R=S+($<<5&4294967295|$>>>27),$=F+(S^I&(R^S))+O[10]+38016083&4294967295,F=R+($<<9&4294967295|$>>>23),$=I+(R^S&(F^R))+O[15]+3634488961&4294967295,I=F+($<<14&4294967295|$>>>18),$=S+(F^R&(I^F))+O[4]+3889429448&4294967295,S=I+($<<20&4294967295|$>>>12),$=R+(I^F&(S^I))+O[9]+568446438&4294967295,R=S+($<<5&4294967295|$>>>27),$=F+(S^I&(R^S))+O[14]+3275163606&4294967295,F=R+($<<9&4294967295|$>>>23),$=I+(R^S&(F^R))+O[3]+4107603335&4294967295,I=F+($<<14&4294967295|$>>>18),$=S+(F^R&(I^F))+O[8]+1163531501&4294967295,S=I+($<<20&4294967295|$>>>12),$=R+(I^F&(S^I))+O[13]+2850285829&4294967295,R=S+($<<5&4294967295|$>>>27),$=F+(S^I&(R^S))+O[2]+4243563512&4294967295,F=R+($<<9&4294967295|$>>>23),$=I+(R^S&(F^R))+O[7]+1735328473&4294967295,I=F+($<<14&4294967295|$>>>18),$=S+(F^R&(I^F))+O[12]+2368359562&4294967295,S=I+($<<20&4294967295|$>>>12),$=R+(S^I^F)+O[5]+4294588738&4294967295,R=S+($<<4&4294967295|$>>>28),$=F+(R^S^I)+O[8]+2272392833&4294967295,F=R+($<<11&4294967295|$>>>21),$=I+(F^R^S)+O[11]+1839030562&4294967295,I=F+($<<16&4294967295|$>>>16),$=S+(I^F^R)+O[14]+4259657740&4294967295,S=I+($<<23&4294967295|$>>>9),$=R+(S^I^F)+O[1]+2763975236&4294967295,R=S+($<<4&4294967295|$>>>28),$=F+(R^S^I)+O[4]+1272893353&4294967295,F=R+($<<11&4294967295|$>>>21),$=I+(F^R^S)+O[7]+4139469664&4294967295,I=F+($<<16&4294967295|$>>>16),$=S+(I^F^R)+O[10]+3200236656&4294967295,S=I+($<<23&4294967295|$>>>9),$=R+(S^I^F)+O[13]+681279174&4294967295,R=S+($<<4&4294967295|$>>>28),$=F+(R^S^I)+O[0]+3936430074&4294967295,F=R+($<<11&4294967295|$>>>21),$=I+(F^R^S)+O[3]+3572445317&4294967295,I=F+($<<16&4294967295|$>>>16),$=S+(I^F^R)+O[6]+76029189&4294967295,S=I+($<<23&4294967295|$>>>9),$=R+(S^I^F)+O[9]+3654602809&4294967295,R=S+($<<4&4294967295|$>>>28),$=F+(R^S^I)+O[12]+3873151461&4294967295,F=R+($<<11&4294967295|$>>>21),$=I+(F^R^S)+O[15]+530742520&4294967295,I=F+($<<16&4294967295|$>>>16),$=S+(I^F^R)+O[2]+3299628645&4294967295,S=I+($<<23&4294967295|$>>>9),$=R+(I^(S|~F))+O[0]+4096336452&4294967295,R=S+($<<6&4294967295|$>>>26),$=F+(S^(R|~I))+O[7]+1126891415&4294967295,F=R+($<<10&4294967295|$>>>22),$=I+(R^(F|~S))+O[14]+2878612391&4294967295,I=F+($<<15&4294967295|$>>>17),$=S+(F^(I|~R))+O[5]+4237533241&4294967295,S=I+($<<21&4294967295|$>>>11),$=R+(I^(S|~F))+O[12]+1700485571&4294967295,R=S+($<<6&4294967295|$>>>26),$=F+(S^(R|~I))+O[3]+2399980690&4294967295,F=R+($<<10&4294967295|$>>>22),$=I+(R^(F|~S))+O[10]+4293915773&4294967295,I=F+($<<15&4294967295|$>>>17),$=S+(F^(I|~R))+O[1]+2240044497&4294967295,S=I+($<<21&4294967295|$>>>11),$=R+(I^(S|~F))+O[8]+1873313359&4294967295,R=S+($<<6&4294967295|$>>>26),$=F+(S^(R|~I))+O[15]+4264355552&4294967295,F=R+($<<10&4294967295|$>>>22),$=I+(R^(F|~S))+O[6]+2734768916&4294967295,I=F+($<<15&4294967295|$>>>17),$=S+(F^(I|~R))+O[13]+1309151649&4294967295,S=I+($<<21&4294967295|$>>>11),$=R+(I^(S|~F))+O[4]+4149444226&4294967295,R=S+($<<6&4294967295|$>>>26),$=F+(S^(R|~I))+O[11]+3174756917&4294967295,F=R+($<<10&4294967295|$>>>22),$=I+(R^(F|~S))+O[2]+718787259&4294967295,I=F+($<<15&4294967295|$>>>17),$=S+(F^(I|~R))+O[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(I+($<<21&4294967295|$>>>11))&4294967295,k.g[2]=k.g[2]+I&4294967295,k.g[3]=k.g[3]+F&4294967295}s.prototype.v=function(k,R){R===void 0&&(R=k.length);const S=R-this.blockSize,O=this.C;let I=this.h,F=0;for(;F<R;){if(I==0)for(;F<=S;)r(this,k,F),F+=this.blockSize;if(typeof k=="string"){for(;F<R;)if(O[I++]=k.charCodeAt(F++),I==this.blockSize){r(this,O),I=0;break}}else for(;F<R;)if(O[I++]=k[F++],I==this.blockSize){r(this,O),I=0;break}}this.h=I,this.o+=R},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;R=this.o*8;for(var S=k.length-8;S<k.length;++S)k[S]=R&255,R/=256;for(this.v(k),k=Array(16),R=0,S=0;S<4;++S)for(let O=0;O<32;O+=8)k[R++]=this.g[S]>>>O&255;return k};function i(k,R){var S=d;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=R(k)}function l(k,R){this.h=R;const S=[];let O=!0;for(let I=k.length-1;I>=0;I--){const F=k[I]|0;O&&F==R||(S[I]=F,O=!1)}this.g=S}var d={};function u(k){return-128<=k&&k<128?i(k,function(R){return new l([R|0],R<0?-1:0)}):new l([k|0],k<0?-1:0)}function h(k){if(isNaN(k)||!isFinite(k))return p;if(k<0)return v(h(-k));const R=[];let S=1;for(let O=0;k>=S;O++)R[O]=k/S|0,S*=4294967296;return new l(R,0)}function f(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return v(f(k.substring(1),R));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=h(Math.pow(R,8));let O=p;for(let F=0;F<k.length;F+=8){var I=Math.min(8,k.length-F);const $=parseInt(k.substring(F,F+I),R);I<8?(I=h(Math.pow(R,I)),O=O.j(I).add(h($))):(O=O.j(S),O=O.add(h($)))}return O}var p=u(0),x=u(1),b=u(16777216);t=l.prototype,t.m=function(){if(j(this))return-v(this).m();let k=0,R=1;for(let S=0;S<this.g.length;S++){const O=this.i(S);k+=(O>=0?O:4294967296+O)*R,R*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(_(this))return"0";if(j(this))return"-"+v(this).toString(k);const R=h(Math.pow(k,6));var S=this;let O="";for(;;){const I=C(S,R).g;S=T(S,I.j(R));let F=((S.g.length>0?S.g[0]:S.h)>>>0).toString(k);if(S=I,_(S))return F+O;for(;F.length<6;)F="0"+F;O=F+O}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function _(k){if(k.h!=0)return!1;for(let R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function j(k){return k.h==-1}t.l=function(k){return k=T(this,k),j(k)?-1:_(k)?0:1};function v(k){const R=k.g.length,S=[];for(let O=0;O<R;O++)S[O]=~k.g[O];return new l(S,~k.h).add(x)}t.abs=function(){return j(this)?v(this):this},t.add=function(k){const R=Math.max(this.g.length,k.g.length),S=[];let O=0;for(let I=0;I<=R;I++){let F=O+(this.i(I)&65535)+(k.i(I)&65535),$=(F>>>16)+(this.i(I)>>>16)+(k.i(I)>>>16);O=$>>>16,F&=65535,$&=65535,S[I]=$<<16|F}return new l(S,S[S.length-1]&-2147483648?-1:0)};function T(k,R){return k.add(v(R))}t.j=function(k){if(_(this)||_(k))return p;if(j(this))return j(k)?v(this).j(v(k)):v(v(this).j(k));if(j(k))return v(this.j(v(k)));if(this.l(b)<0&&k.l(b)<0)return h(this.m()*k.m());const R=this.g.length+k.g.length,S=[];for(var O=0;O<2*R;O++)S[O]=0;for(O=0;O<this.g.length;O++)for(let I=0;I<k.g.length;I++){const F=this.i(O)>>>16,$=this.i(O)&65535,Q=k.i(I)>>>16,G=k.i(I)&65535;S[2*O+2*I]+=$*G,P(S,2*O+2*I),S[2*O+2*I+1]+=F*G,P(S,2*O+2*I+1),S[2*O+2*I+1]+=$*Q,P(S,2*O+2*I+1),S[2*O+2*I+2]+=F*Q,P(S,2*O+2*I+2)}for(k=0;k<R;k++)S[k]=S[2*k+1]<<16|S[2*k];for(k=R;k<2*R;k++)S[k]=0;return new l(S,0)};function P(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function A(k,R){this.g=k,this.h=R}function C(k,R){if(_(R))throw Error("division by zero");if(_(k))return new A(p,p);if(j(k))return R=C(v(k),R),new A(v(R.g),v(R.h));if(j(R))return R=C(k,v(R)),new A(v(R.g),R.h);if(k.g.length>30){if(j(k)||j(R))throw Error("slowDivide_ only works with positive integers.");for(var S=x,O=R;O.l(k)<=0;)S=M(S),O=M(O);var I=L(S,1),F=L(O,1);for(O=L(O,2),S=L(S,2);!_(O);){var $=F.add(O);$.l(k)<=0&&(I=I.add(S),F=$),O=L(O,1),S=L(S,1)}return R=T(k,I.j(R)),new A(I,R)}for(I=p;k.l(R)>=0;){for(S=Math.max(1,Math.floor(k.m()/R.m())),O=Math.ceil(Math.log(S)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),F=h(S),$=F.j(R);j($)||$.l(k)>0;)S-=O,F=h(S),$=F.j(R);_(F)&&(F=x),I=I.add(F),k=T(k,$)}return new A(I,k)}t.B=function(k){return C(this,k).h},t.and=function(k){const R=Math.max(this.g.length,k.g.length),S=[];for(let O=0;O<R;O++)S[O]=this.i(O)&k.i(O);return new l(S,this.h&k.h)},t.or=function(k){const R=Math.max(this.g.length,k.g.length),S=[];for(let O=0;O<R;O++)S[O]=this.i(O)|k.i(O);return new l(S,this.h|k.h)},t.xor=function(k){const R=Math.max(this.g.length,k.g.length),S=[];for(let O=0;O<R;O++)S[O]=this.i(O)^k.i(O);return new l(S,this.h^k.h)};function M(k){const R=k.g.length+1,S=[];for(let O=0;O<R;O++)S[O]=k.i(O)<<1|k.i(O-1)>>>31;return new l(S,k.h)}function L(k,R){const S=R>>5;R%=32;const O=k.g.length-S,I=[];for(let F=0;F<O;F++)I[F]=R>0?k.i(F+S)>>>R|k.i(F+S+1)<<32-R:k.i(F+S);return new l(I,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,fO=s,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=f,Nc=l}).apply(typeof dD<"u"?dD:typeof self<"u"?self:typeof window<"u"?window:{});var U0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pO,Df,gO,Ex,wE,xO,yO,bO;(function(){var t,e=Object.defineProperty;function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof U0=="object"&&U0];for(var D=0;D<w.length;++D){var U=w[D];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var s=n(this);function r(w,D){if(D)e:{var U=s;w=w.split(".");for(var K=0;K<w.length-1;K++){var le=w[K];if(!(le in U))break e;U=U[le]}w=w[w.length-1],K=U[w],D=D(K),D!=K&&D!=null&&e(U,w,{configurable:!0,writable:!0,value:D})}}r("Symbol.dispose",function(w){return w||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(w){return w||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(w){return w||function(D){var U=[],K;for(K in D)Object.prototype.hasOwnProperty.call(D,K)&&U.push([K,D[K]]);return U}});var i=i||{},l=this||self;function d(w){var D=typeof w;return D=="object"&&w!=null||D=="function"}function u(w,D,U){return w.call.apply(w.bind,arguments)}function h(w,D,U){return h=u,h.apply(null,arguments)}function f(w,D){var U=Array.prototype.slice.call(arguments,1);return function(){var K=U.slice();return K.push.apply(K,arguments),w.apply(this,K)}}function p(w,D){function U(){}U.prototype=D.prototype,w.Z=D.prototype,w.prototype=new U,w.prototype.constructor=w,w.Ob=function(K,le,me){for(var Me=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)Me[Et-2]=arguments[Et];return D.prototype[le].apply(K,Me)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?w=>w&&AsyncContext.Snapshot.wrap(w):w=>w;function b(w){const D=w.length;if(D>0){const U=Array(D);for(let K=0;K<D;K++)U[K]=w[K];return U}return[]}function _(w,D){for(let K=1;K<arguments.length;K++){const le=arguments[K];var U=typeof le;if(U=U!="object"?U:le?Array.isArray(le)?"array":U:"null",U=="array"||U=="object"&&typeof le.length=="number"){U=w.length||0;const me=le.length||0;w.length=U+me;for(let Me=0;Me<me;Me++)w[U+Me]=le[Me]}else w.push(le)}}class j{constructor(D,U){this.i=D,this.j=U,this.h=0,this.g=null}get(){let D;return this.h>0?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function v(w){l.setTimeout(()=>{throw w},0)}function T(){var w=k;let D=null;return w.g&&(D=w.g,w.g=w.g.next,w.g||(w.h=null),D.next=null),D}class P{constructor(){this.h=this.g=null}add(D,U){const K=A.get();K.set(D,U),this.h?this.h.next=K:this.g=K,this.h=K}}var A=new j(()=>new C,w=>w.reset());class C{constructor(){this.next=this.g=this.h=null}set(D,U){this.h=D,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let M,L=!1,k=new P,R=()=>{const w=Promise.resolve(void 0);M=()=>{w.then(S)}};function S(){for(var w;w=T();){try{w.h.call(w.g)}catch(U){v(U)}var D=A;D.j(w),D.h<100&&(D.h++,w.next=D.g,D.g=w)}L=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(w,D){this.type=w,this.g=this.target=D,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var w=!1,D=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const U=()=>{};l.addEventListener("test",U,D),l.removeEventListener("test",U,D)}catch{}return w})();function $(w){return/^[\s\xa0]*$/.test(w)}function Q(w,D){I.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w&&this.init(w,D)}p(Q,I),Q.prototype.init=function(w,D){const U=this.type=w.type,K=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;this.target=w.target||w.srcElement,this.g=D,D=w.relatedTarget,D||(U=="mouseover"?D=w.fromElement:U=="mouseout"&&(D=w.toElement)),this.relatedTarget=D,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=w.pointerType,this.state=w.state,this.i=w,w.defaultPrevented&&Q.Z.h.call(this)},Q.prototype.h=function(){Q.Z.h.call(this);const w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var G="closure_listenable_"+(Math.random()*1e6|0),B=0;function z(w,D,U,K,le){this.listener=w,this.proxy=null,this.src=D,this.type=U,this.capture=!!K,this.ha=le,this.key=++B,this.da=this.fa=!1}function q(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function Z(w,D,U){for(const K in w)D.call(U,w[K],K,w)}function ee(w,D){for(const U in w)D.call(void 0,w[U],U,w)}function H(w){const D={};for(const U in w)D[U]=w[U];return D}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(w,D){let U,K;for(let le=1;le<arguments.length;le++){K=arguments[le];for(U in K)w[U]=K[U];for(let me=0;me<Y.length;me++)U=Y[me],Object.prototype.hasOwnProperty.call(K,U)&&(w[U]=K[U])}}function ie(w){this.src=w,this.g={},this.h=0}ie.prototype.add=function(w,D,U,K,le){const me=w.toString();w=this.g[me],w||(w=this.g[me]=[],this.h++);const Me=be(w,D,K,le);return Me>-1?(D=w[Me],U||(D.fa=!1)):(D=new z(D,this.src,me,!!K,le),D.fa=U,w.push(D)),D};function te(w,D){const U=D.type;if(U in w.g){var K=w.g[U],le=Array.prototype.indexOf.call(K,D,void 0),me;(me=le>=0)&&Array.prototype.splice.call(K,le,1),me&&(q(D),w.g[U].length==0&&(delete w.g[U],w.h--))}}function be(w,D,U,K){for(let le=0;le<w.length;++le){const me=w[le];if(!me.da&&me.listener==D&&me.capture==!!U&&me.ha==K)return le}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),Se={};function Pe(w,D,U,K,le){if(Array.isArray(D)){for(let me=0;me<D.length;me++)Pe(w,D[me],U,K,le);return null}return U=_n(U),w&&w[G]?w.J(D,U,d(K)?!!K.capture:!1,le):Ie(w,D,U,!1,K,le)}function Ie(w,D,U,K,le,me){if(!D)throw Error("Invalid event type");const Me=d(le)?!!le.capture:!!le;let Et=cn(w);if(Et||(w[ve]=Et=new ie(w)),U=Et.add(D,U,K,Me,me),U.proxy)return U;if(K=Fe(),U.proxy=K,K.src=w,K.listener=U,w.addEventListener)F||(le=Me),le===void 0&&(le=!1),w.addEventListener(D.toString(),K,le);else if(w.attachEvent)w.attachEvent(nn(D.toString()),K);else if(w.addListener&&w.removeListener)w.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return U}function Fe(){function w(U){return D.call(w.src,w.listener,U)}const D=Ze;return w}function We(w,D,U,K,le){if(Array.isArray(D))for(var me=0;me<D.length;me++)We(w,D[me],U,K,le);else K=d(K)?!!K.capture:!!K,U=_n(U),w&&w[G]?(w=w.i,me=String(D).toString(),me in w.g&&(D=w.g[me],U=be(D,U,K,le),U>-1&&(q(D[U]),Array.prototype.splice.call(D,U,1),D.length==0&&(delete w.g[me],w.h--)))):w&&(w=cn(w))&&(D=w.g[D.toString()],w=-1,D&&(w=be(D,U,K,le)),(U=w>-1?D[w]:null)&&kt(U))}function kt(w){if(typeof w!="number"&&w&&!w.da){var D=w.src;if(D&&D[G])te(D.i,w);else{var U=w.type,K=w.proxy;D.removeEventListener?D.removeEventListener(U,K,w.capture):D.detachEvent?D.detachEvent(nn(U),K):D.addListener&&D.removeListener&&D.removeListener(K),(U=cn(D))?(te(U,w),U.h==0&&(U.src=null,D[ve]=null)):q(w)}}}function nn(w){return w in Se?Se[w]:Se[w]="on"+w}function Ze(w,D){if(w.da)w=!0;else{D=new Q(D,this);const U=w.listener,K=w.ha||w.src;w.fa&&kt(w),w=U.call(K,D)}return w}function cn(w){return w=w[ve],w instanceof ie?w:null}var zt="__closure_events_fn_"+(Math.random()*1e9>>>0);function _n(w){return typeof w=="function"?w:(w[zt]||(w[zt]=function(D){return w.handleEvent(D)}),w[zt])}function _t(){O.call(this),this.i=new ie(this),this.M=this,this.G=null}p(_t,O),_t.prototype[G]=!0,_t.prototype.removeEventListener=function(w,D,U,K){We(this,w,D,U,K)};function oe(w,D){var U,K=w.G;if(K)for(U=[];K;K=K.G)U.push(K);if(w=w.M,K=D.type||D,typeof D=="string")D=new I(D,w);else if(D instanceof I)D.target=D.target||w;else{var le=D;D=new I(K,w),X(D,le)}le=!0;let me,Me;if(U)for(Me=U.length-1;Me>=0;Me--)me=D.g=U[Me],le=ae(me,K,!0,D)&&le;if(me=D.g=w,le=ae(me,K,!0,D)&&le,le=ae(me,K,!1,D)&&le,U)for(Me=0;Me<U.length;Me++)me=D.g=U[Me],le=ae(me,K,!1,D)&&le}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var w=this.i;for(const D in w.g){const U=w.g[D];for(let K=0;K<U.length;K++)q(U[K]);delete w.g[D],w.h--}}this.G=null},_t.prototype.J=function(w,D,U,K){return this.i.add(String(w),D,!1,U,K)},_t.prototype.K=function(w,D,U,K){return this.i.add(String(w),D,!0,U,K)};function ae(w,D,U,K){if(D=w.i.g[String(D)],!D)return!0;D=D.concat();let le=!0;for(let me=0;me<D.length;++me){const Me=D[me];if(Me&&!Me.da&&Me.capture==U){const Et=Me.listener,bs=Me.ha||Me.src;Me.fa&&te(w.i,Me),le=Et.call(bs,K)!==!1&&le}}return le&&!K.defaultPrevented}function Ee(w,D){if(typeof w!="function")if(w&&typeof w.handleEvent=="function")w=h(w.handleEvent,w);else throw Error("Invalid listener argument");return Number(D)>2147483647?-1:l.setTimeout(w,D||0)}function Te(w){w.g=Ee(()=>{w.g=null,w.i&&(w.i=!1,Te(w))},w.l);const D=w.h;w.h=null,w.m.apply(null,D)}class ze extends O{constructor(D,U){super(),this.m=D,this.l=U,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(w){O.call(this),this.h=w,this.g={}}p(rt,O);var lt=[];function At(w){Z(w.g,function(D,U){this.g.hasOwnProperty(U)&&kt(D)},w),w.g={}}rt.prototype.N=function(){rt.Z.N.call(this),At(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ht=l.JSON.stringify,Ln=l.JSON.parse,Ot=class{stringify(w){return l.JSON.stringify(w,void 0)}parse(w){return l.JSON.parse(w,void 0)}};function tt(){}function Fs(){}var vn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xn(){I.call(this,"d")}p(Xn,I);function $n(){I.call(this,"c")}p($n,I);var An={},Lr=null;function $s(){return Lr=Lr||new _t}An.Ia="serverreachability";function Gr(w){I.call(this,An.Ia,w)}p(Gr,I);function ks(w){const D=$s();oe(D,new Gr(D))}An.STAT_EVENT="statevent";function Ir(w,D){I.call(this,An.STAT_EVENT,w),this.stat=D}p(Ir,I);function In(w){const D=$s();oe(D,new Ir(D,w))}An.Ja="timingevent";function As(w,D){I.call(this,An.Ja,w),this.size=D}p(As,I);function ar(w,D){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){w()},D)}function ls(){this.g=!0}ls.prototype.ua=function(){this.g=!1};function Aa(w,D,U,K,le,me){w.info(function(){if(w.g)if(me){var Me="",Et=me.split("&");for(let pn=0;pn<Et.length;pn++){var bs=Et[pn].split("=");if(bs.length>1){const Jn=bs[0];bs=bs[1];const Pa=Jn.split("_");Me=Pa.length>=2&&Pa[1]=="type"?Me+(Jn+"="+bs+"&"):Me+(Jn+"=redacted&")}}}else Me=null;else Me=me;return"XMLHTTP REQ ("+K+") [attempt "+le+"]: "+D+`
`+U+`
`+Me})}function vr(w,D,U,K,le,me,Me){w.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+le+"]: "+D+`
`+U+`
`+me+" "+Me})}function ns(w,D,U,K){w.info(function(){return"XMLHTTP TEXT ("+D+"): "+Qs(w,U)+(K?" "+K:"")})}function zs(w,D){w.info(function(){return"TIMEOUT: "+D})}ls.prototype.info=function(){};function Qs(w,D){if(!w.g)return D;if(!D)return null;try{const me=JSON.parse(D);if(me){for(w=0;w<me.length;w++)if(Array.isArray(me[w])){var U=me[w];if(!(U.length<2)){var K=U[1];if(Array.isArray(K)&&!(K.length<1)){var le=K[0];if(le!="noop"&&le!="stop"&&le!="close")for(let Me=1;Me<K.length;Me++)K[Me]=""}}}}return Ht(me)}catch{return D}}var Je={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ko={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ri;function ai(){}p(ai,tt),ai.prototype.g=function(){return new XMLHttpRequest},ri=new ai;function Kr(w){return encodeURIComponent(String(w))}function Ao(w){var D=1;w=w.split(":");const U=[];for(;D>0&&w.length;)U.push(w.shift()),D--;return w.length&&U.push(w.join(":")),U}function wr(w,D,U,K){this.j=w,this.i=D,this.l=U,this.S=K||1,this.V=new rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ir}function ir(){this.i=null,this.g="",this.h=!1}var Wn={},On={};function Or(w,D,U){w.M=1,w.A=Po(cs(D)),w.u=U,w.R=!0,Ri(w,null)}function Ri(w,D){w.F=Date.now(),Qr(w),w.B=cs(w.A);var U=w.B,K=w.S;Array.isArray(K)||(K=[String(K)]),Xr(U.i,"t",K),w.C=0,U=w.j.L,w.h=new ir,w.g=jg(w.j,U?D:null,!w.u),w.P>0&&(w.O=new ze(h(w.Y,w,w.g),w.P)),D=w.V,U=w.g,K=w.ba;var le="readystatechange";Array.isArray(le)||(le&&(lt[0]=le.toString()),le=lt);for(let me=0;me<le.length;me++){const Me=Pe(U,le[me],K||D.handleEvent,!1,D.h||D);if(!Me)break;D.g[Me.key]=Me}D=w.J?H(w.J):{},w.u?(w.v||(w.v="POST"),D["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.B,w.v,w.u,D)):(w.v="GET",w.g.ea(w.B,w.v,null,D)),ks(),Aa(w.i,w.v,w.B,w.l,w.S,w.u)}wr.prototype.ba=function(w){w=w.target;const D=this.O;D&&li(w)==3?D.j():this.Y(w)},wr.prototype.Y=function(w){try{if(w==this.g)e:{const Et=li(this.g),bs=this.g.ya(),pn=this.g.ca();if(!(Et<3)&&(Et!=3||this.g&&(this.h.h||this.g.la()||cr(this.g)))){this.K||Et!=4||bs==7||(bs==8||pn<=0?ks(3):ks(2)),_e(this);var D=this.g.ca();this.X=D;var U=Ro(this);if(this.o=D==200,vr(this.i,this.v,this.B,this.l,this.S,Et,D),this.o){if(this.U&&!this.L){t:{if(this.g){var K,le=this.g;if((K=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(K)){var me=K;break t}}me=null}if(w=me)ns(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,sn(this,w);else{this.o=!1,this.m=3,In(12),Vt(this),Xe(this);break e}}if(this.R){w=!0;let Jn;for(;!this.K&&this.C<U.length;)if(Jn=ma(this,U),Jn==On){Et==4&&(this.m=4,In(14),w=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(Jn==Wn){this.m=4,In(15),ns(this.i,this.l,U,"[Invalid Chunk]"),w=!1;break}else ns(this.i,this.l,Jn,null),sn(this,Jn);if(Do(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||U.length!=0||this.h.h||(this.m=1,In(16),w=!1),this.o=this.o&&w,!w)ns(this.i,this.l,U,"[Invalid Chunked Response]"),Vt(this),Xe(this);else if(U.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),bm(Me),Me.P=!0,In(11))}}else ns(this.i,this.l,U,null),sn(this,U);Et==4&&Vt(this),this.o&&!this.K&&(Et==4?wg(this.j,this):(this.o=!1,Qr(this)))}else Oo(this.g),D==400&&U.indexOf("Unknown SID")>0?(this.m=3,In(12)):(this.m=0,In(13)),Vt(this),Xe(this)}}}catch{}finally{}};function Ro(w){if(!Do(w))return w.g.la();const D=cr(w.g);if(D==="")return"";let U="";const K=D.length,le=li(w.g)==4;if(!w.h.i){if(typeof TextDecoder>"u")return Vt(w),Xe(w),"";w.h.i=new l.TextDecoder}for(let me=0;me<K;me++)w.h.h=!0,U+=w.h.i.decode(D[me],{stream:!(le&&me==K-1)});return D.length=0,w.h.g+=U,w.C=0,w.h.g}function Do(w){return w.g?w.v=="GET"&&w.M!=2&&w.j.Aa:!1}function ma(w,D){var U=w.C,K=D.indexOf(`
`,U);return K==-1?On:(U=Number(D.substring(U,K)),isNaN(U)?Wn:(K+=1,K+U>D.length?On:(D=D.slice(K,K+U),w.C=K+U,D)))}wr.prototype.cancel=function(){this.K=!0,Vt(this)};function Qr(w){w.T=Date.now()+w.H,Di(w,w.H)}function Di(w,D){if(w.D!=null)throw Error("WatchDog timer not null");w.D=ar(h(w.aa,w),D)}function _e(w){w.D&&(l.clearTimeout(w.D),w.D=null)}wr.prototype.aa=function(){this.D=null;const w=Date.now();w-this.T>=0?(zs(this.i,this.B),this.M!=2&&(ks(),In(17)),Vt(this),this.m=2,Xe(this)):Di(this,this.T-w)};function Xe(w){w.j.I==0||w.K||wg(w.j,w)}function Vt(w){_e(w);var D=w.O;D&&typeof D.dispose=="function"&&D.dispose(),w.O=null,At(w.V),w.g&&(D=w.g,w.g=null,D.abort(),D.dispose())}function sn(w,D){try{var U=w.j;if(U.I!=0&&(U.g==w||or(U.h,w))){if(!w.L&&or(U.h,w)&&U.I==3){try{var K=U.Ba.g.parse(D)}catch{K=null}if(Array.isArray(K)&&K.length==3){var le=K;if(le[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<w.F)hu(U),Ml(U);else break e;nd(U),In(18)}}else U.xa=le[1],0<U.xa-U.K&&le[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=ar(h(U.Va,U),6e3));Xs(U.h)<=1&&U.ta&&(U.ta=void 0)}else Bi(U,11)}else if((w.L||U.g==w)&&hu(U),!$(D))for(le=U.Ba.g.parse(D),D=0;D<le.length;D++){let pn=le[D];const Jn=pn[0];if(!(Jn<=U.K))if(U.K=Jn,pn=pn[1],U.I==2)if(pn[0]=="c"){U.M=pn[1],U.ba=pn[2];const Pa=pn[3];Pa!=null&&(U.ka=Pa,U.j.info("VER="+U.ka));const Fi=pn[4];Fi!=null&&(U.za=Fi,U.j.info("SVER="+U.za));const ci=pn[5];ci!=null&&typeof ci=="number"&&ci>0&&(K=1.5*ci,U.O=K,U.j.info("backChannelRequestTimeoutMs_="+K)),K=U;const di=w.g;if(di){const sd=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sd){var me=K.h;me.g||sd.indexOf("spdy")==-1&&sd.indexOf("quic")==-1&&sd.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(Al(me,me.h),me.h=null))}if(K.G){const mu=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;mu&&(K.wa=mu,qt(K.J,K.G,mu))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-w.F,U.j.info("Handshake RTT: "+U.T+"ms")),K=U;var Me=w;if(K.na=Ng(K,K.L?K.ba:null,K.W),Me.L){Xc(K.h,Me);var Et=Me,bs=K.O;bs&&(Et.H=bs),Et.D&&(_e(Et),Qr(Et)),K.g=Me}else bg(K);U.i.length>0&&Ui(U)}else pn[0]!="stop"&&pn[0]!="close"||Bi(U,7);else U.I==3&&(pn[0]=="stop"||pn[0]=="close"?pn[0]=="stop"?Bi(U,7):xm(U):pn[0]!="noop"&&U.l&&U.l.qa(pn),U.A=0)}}ks(4)}catch{}}var Zt=class{constructor(w,D){this.g=w,this.map=D}};function Vr(w){this.l=w||10,l.PerformanceNavigationTiming?(w=l.performance.getEntriesByType("navigation"),w=w.length>0&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pi(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function Xs(w){return w.h?1:w.g?w.g.size:0}function or(w,D){return w.h?w.h==D:w.g?w.g.has(D):!1}function Al(w,D){w.g?w.g.add(D):w.h=D}function Xc(w,D){w.h&&w.h==D?w.h=null:w.g&&w.g.has(D)&&w.g.delete(D)}Vr.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function Rl(w){if(w.h!=null)return w.i.concat(w.h.G);if(w.g!=null&&w.g.size!==0){let D=w.i;for(const U of w.g.values())D=D.concat(U.G);return D}return b(w.i)}var Rs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mi(w,D){if(w){w=w.split("&");for(let U=0;U<w.length;U++){const K=w[U].indexOf("=");let le,me=null;K>=0?(le=w[U].substring(0,K),me=w[U].substring(K+1)):le=w[U],D(le,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function _r(w){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let D;w instanceof _r?(this.l=w.l,Vn(this,w.j),this.o=w.o,this.g=w.g,Li(this,w.u),this.h=w.h,fa(this,Ds(w.i)),this.m=w.m):w&&(D=String(w).match(Rs))?(this.l=!1,Vn(this,D[1]||"",!0),this.o=Ra(D[2]||""),this.g=Ra(D[3]||"",!0),Li(this,D[4]),this.h=Ra(D[5]||"",!0),fa(this,D[6]||"",!0),this.m=Ra(D[7]||"")):(this.l=!1,this.i=new zn(null,this.l))}_r.prototype.toString=function(){const w=[];var D=this.j;D&&w.push(Mo(D,Ae,!0),":");var U=this.g;return(U||D=="file")&&(w.push("//"),(D=this.o)&&w.push(Mo(D,Ae,!0),"@"),w.push(Kr(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&w.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&w.push("/"),w.push(Mo(U,U.charAt(0)=="/"?ft:ut,!0))),(U=this.i.toString())&&w.push("?",U),(U=this.m)&&w.push("#",Mo(U,fn)),w.join("")},_r.prototype.resolve=function(w){const D=cs(this);let U=!!w.j;U?Vn(D,w.j):U=!!w.o,U?D.o=w.o:U=!!w.g,U?D.g=w.g:U=w.u!=null;var K=w.h;if(U)Li(D,w.u);else if(U=!!w.h){if(K.charAt(0)!="/")if(this.g&&!this.h)K="/"+K;else{var le=D.h.lastIndexOf("/");le!=-1&&(K=D.h.slice(0,le+1)+K)}if(le=K,le==".."||le==".")K="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){K=le.lastIndexOf("/",0)==0,le=le.split("/");const me=[];for(let Me=0;Me<le.length;){const Et=le[Me++];Et=="."?K&&Me==le.length&&me.push(""):Et==".."?((me.length>1||me.length==1&&me[0]!="")&&me.pop(),K&&Me==le.length&&me.push("")):(me.push(Et),K=!0)}K=me.join("/")}else K=le}return U?D.h=K:U=w.i.toString()!=="",U?fa(D,Ds(w.i)):U=!!w.m,U&&(D.m=w.m),D};function cs(w){return new _r(w)}function Vn(w,D,U){w.j=U?Ra(D,!0):D,w.j&&(w.j=w.j.replace(/:$/,""))}function Li(w,D){if(D){if(D=Number(D),isNaN(D)||D<0)throw Error("Bad port number "+D);w.u=D}else w.u=null}function fa(w,D,U){D instanceof zn?(w.i=D,pt(w.i,w.l)):(U||(D=Mo(D,En)),w.i=new zn(D,w.l))}function qt(w,D,U){w.i.set(D,U)}function Po(w){return qt(w,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),w}function Ra(w,D){return w?D?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Mo(w,D,U){return typeof w=="string"?(w=encodeURI(w).replace(D,ye),U&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function ye(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var Ae=/[#\/\?@]/g,ut=/[#\?:]/g,ft=/[#\?]/g,En=/[#\?@]/g,fn=/#/g;function zn(w,D){this.h=this.g=null,this.i=w||null,this.j=!!D}function ds(w){w.g||(w.g=new Map,w.h=0,w.i&&Mi(w.i,function(D,U){w.add(decodeURIComponent(D.replace(/\+/g," ")),U)}))}t=zn.prototype,t.add=function(w,D){ds(this),this.i=null,w=ii(this,w);let U=this.g.get(w);return U||this.g.set(w,U=[]),U.push(D),this.h+=1,this};function Zs(w,D){ds(w),D=ii(w,D),w.g.has(D)&&(w.i=null,w.h-=w.g.get(D).length,w.g.delete(D))}function Ur(w,D){return ds(w),D=ii(w,D),w.g.has(D)}t.forEach=function(w,D){ds(this),this.g.forEach(function(U,K){U.forEach(function(le){w.call(D,le,K,this)},this)},this)};function Er(w,D){ds(w);let U=[];if(typeof D=="string")Ur(w,D)&&(U=U.concat(w.g.get(ii(w,D))));else for(w=Array.from(w.g.values()),D=0;D<w.length;D++)U=U.concat(w[D]);return U}t.set=function(w,D){return ds(this),this.i=null,w=ii(this,w),Ur(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[D]),this.h+=1,this},t.get=function(w,D){return w?(w=Er(this,w),w.length>0?String(w[0]):D):D};function Xr(w,D,U){Zs(w,D),U.length>0&&(w.i=null,w.g.set(ii(w,D),b(U)),w.h+=U.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],D=Array.from(this.g.keys());for(let K=0;K<D.length;K++){var U=D[K];const le=Kr(U);U=Er(this,U);for(let me=0;me<U.length;me++){let Me=le;U[me]!==""&&(Me+="="+Kr(U[me])),w.push(Me)}}return this.i=w.join("&")};function Ds(w){const D=new zn;return D.i=w.i,w.g&&(D.g=new Map(w.g),D.h=w.h),D}function ii(w,D){return D=String(D),w.j&&(D=D.toLowerCase()),D}function pt(w,D){D&&!w.j&&(ds(w),w.i=null,w.g.forEach(function(U,K){const le=K.toLowerCase();K!=le&&(Zs(this,K),Xr(this,le,U))},w)),w.j=D}function ss(w,D){const U=new ls;if(l.Image){const K=new Image;K.onload=f(Zn,U,"TestLoadImage: loaded",!0,D,K),K.onerror=f(Zn,U,"TestLoadImage: error",!1,D,K),K.onabort=f(Zn,U,"TestLoadImage: abort",!1,D,K),K.ontimeout=f(Zn,U,"TestLoadImage: timeout",!1,D,K),l.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=w}else D(!1)}function Rt(w,D){const U=new ls,K=new AbortController,le=setTimeout(()=>{K.abort(),Zn(U,"TestPingServer: timeout",!1,D)},1e4);fetch(w,{signal:K.signal}).then(me=>{clearTimeout(le),me.ok?Zn(U,"TestPingServer: ok",!0,D):Zn(U,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(le),Zn(U,"TestPingServer: error",!1,D)})}function Zn(w,D,U,K,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),K(U)}catch{}}function Nr(){this.g=new Ot}function lr(w){this.i=w.Sb||null,this.h=w.ab||!1}p(lr,tt),lr.prototype.g=function(){return new Ii(this.i,this.h)};function Ii(w,D){_t.call(this),this.H=w,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ii,_t),t=Ii.prototype,t.open=function(w,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=w,this.D=D,this.readyState=1,oi(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const D={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};w&&(D.body=w),(this.H||l).fetch(new Request(this.D,D)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dl(this)),this.readyState=0},t.Pa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lo(this)}else w.text().then(this.Oa.bind(this),this.ga.bind(this))};function Lo(w){w.j.read().then(w.Ma.bind(w)).catch(w.ga.bind(w))}t.Ma=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var D=w.value?w.value:new Uint8Array(0);(D=this.B.decode(D,{stream:!w.done}))&&(this.response=this.responseText+=D)}w.done?Dl(this):oi(this),this.readyState==3&&Lo(this)}},t.Oa=function(w){this.g&&(this.response=this.responseText=w,Dl(this))},t.Na=function(w){this.g&&(this.response=w,Dl(this))},t.ga=function(){this.g&&Dl(this)};function Dl(w){w.readyState=4,w.l=null,w.j=null,w.B=null,oi(w)}t.setRequestHeader=function(w,D){this.A.append(w,D)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],D=this.h.entries();for(var U=D.next();!U.done;)U=U.value,w.push(U[0]+": "+U[1]),U=D.next();return w.join(`\r
`)};function oi(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Da(w){let D="";return Z(w,function(U,K){D+=K,D+=":",D+=U,D+=`\r
`}),D}function Zc(w,D,U){e:{for(K in U){var K=!1;break e}K=!0}K||(U=Da(U),typeof w=="string"?U!=null&&Kr(U):qt(w,D,U))}function Rn(w){_t.call(this),this.headers=new Map,this.L=w||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Rn,_t);var Oi=/^https?$/i,pm=["POST","PUT"];t=Rn.prototype,t.Fa=function(w){this.H=w},t.ea=function(w,D,U,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);D=D?D.toUpperCase():"GET",this.D=w,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ri.g(),this.g.onreadystatechange=x(h(this.Ca,this));try{this.B=!0,this.g.open(D,String(w),!0),this.B=!1}catch(me){Jc(this,me);return}if(w=U||"",U=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var le in K)U.set(le,K[le]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const me of K.keys())U.set(me,K.get(me));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(U.keys()).find(me=>me.toLowerCase()=="content-type"),le=l.FormData&&w instanceof l.FormData,!(Array.prototype.indexOf.call(pm,D,void 0)>=0)||K||le||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Me]of U)this.g.setRequestHeader(me,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(w),this.v=!1}catch(me){Jc(this,me)}};function Jc(w,D){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=D,w.o=5,gm(w),Io(w)}function gm(w){w.A||(w.A=!0,oe(w,"complete"),oe(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=w||7,oe(this,"complete"),oe(this,"abort"),Io(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Io(this,!0)),Rn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ed(this):this.Xa())},t.Xa=function(){ed(this)};function ed(w){if(w.h&&typeof i<"u"){if(w.v&&li(w)==4)setTimeout(w.Ca.bind(w),0);else if(oe(w,"readystatechange"),li(w)==4){w.h=!1;try{const me=w.ca();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var U;if(!(U=D)){var K;if(K=me===0){let Me=String(w.D).match(Rs)[1]||null;!Me&&l.self&&l.self.location&&(Me=l.self.location.protocol.slice(0,-1)),K=!Oi.test(Me?Me.toLowerCase():"")}U=K}if(U)oe(w,"complete"),oe(w,"success");else{w.o=6;try{var le=li(w)>2?w.g.statusText:""}catch{le=""}w.l=le+" ["+w.ca()+"]",gm(w)}}finally{Io(w)}}}}function Io(w,D){if(w.g){w.m&&(clearTimeout(w.m),w.m=null);const U=w.g;w.g=null,D||oe(w,"ready");try{U.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function li(w){return w.g?w.g.readyState:0}t.ca=function(){try{return li(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(w){if(this.g){var D=this.g.responseText;return w&&D.indexOf(w)==0&&(D=D.substring(w.length)),Ln(D)}};function cr(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.F){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Oo(w){const D={};w=(w.g&&li(w)>=2&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<w.length;K++){if($(w[K]))continue;var U=Ao(w[K]);const le=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const me=D[le]||[];D[le]=me,me.push(U)}ee(D,function(K){return K.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(w,D,U){return U&&U.internalChannelParams&&U.internalChannelParams[w]||D}function Pl(w){this.za=0,this.i=[],this.j=new ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,w),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,w),this.Za=Vi("retryDelaySeedMs",1e4,w),this.Ta=Vi("forwardChannelMaxRetries",2,w),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,w),this.ma=w&&w.xmlHttpFactory||void 0,this.Ua=w&&w.Rb||void 0,this.Aa=w&&w.useFetchStreams||!1,this.O=void 0,this.L=w&&w.supportsCrossDomainXhr||!1,this.M="",this.h=new Vr(w&&w.concurrentRequestLimit),this.Ba=new Nr,this.S=w&&w.fastHandshake||!1,this.R=w&&w.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=w&&w.Pb||!1,w&&w.ua&&this.j.ua(),w&&w.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&w&&w.detectBufferingProxy||!1,this.ia=void 0,w&&w.longPollingTimeout&&w.longPollingTimeout>0&&(this.ia=w.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pl.prototype,t.ka=8,t.I=1,t.connect=function(w,D,U,K){In(0),this.W=w,this.H=D||{},U&&K!==void 0&&(this.H.OSID=U,this.H.OAID=K),this.F=this.X,this.J=Ng(this,null,this.W),Ui(this)};function xm(w){if(du(w),w.I==3){var D=w.V++,U=cs(w.J);if(qt(U,"SID",w.M),qt(U,"RID",D),qt(U,"TYPE","terminate"),td(w,U),D=new wr(w,w.j,D),D.M=2,D.A=Po(cs(U)),U=!1,l.navigator&&l.navigator.sendBeacon)try{U=l.navigator.sendBeacon(D.A.toString(),"")}catch{}!U&&l.Image&&(new Image().src=D.A,U=!0),U||(D.g=jg(D.j,null),D.g.ea(D.A)),D.F=Date.now(),Qr(D)}Eg(w)}function Ml(w){w.g&&(bm(w),w.g.cancel(),w.g=null)}function du(w){Ml(w),w.v&&(l.clearTimeout(w.v),w.v=null),hu(w),w.h.cancel(),w.m&&(typeof w.m=="number"&&l.clearTimeout(w.m),w.m=null)}function Ui(w){if(!Pi(w.h)&&!w.m){w.m=!0;var D=w.Ea;M||R(),L||(M(),L=!0),k.add(D,w),w.D=0}}function uu(w,D){return Xs(w.h)>=w.h.j-(w.m?1:0)?!1:w.m?(w.i=D.G.concat(w.i),!0):w.I==1||w.I==2||w.D>=(w.Sa?0:w.Ta)?!1:(w.m=ar(h(w.Ea,w,D),_g(w,w.D)),w.D++,!0)}t.Ea=function(w){if(this.m)if(this.m=null,this.I==1){if(!w){this.V=Math.floor(Math.random()*1e5),w=this.V++;const le=new wr(this,this.j,w);let me=this.o;if(this.U&&(me?(me=H(me),X(me,this.U)):me=this.U),this.u!==null||this.R||(le.J=me,me=null),this.S)e:{for(var D=0,U=0;U<this.i.length;U++){t:{var K=this.i[U];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(D+=K,D>4096){D=U;break e}if(D===4096||U===this.i.length-1){D=U+1;break e}}D=1e3}else D=1e3;D=yg(this,le,D),U=cs(this.J),qt(U,"RID",w),qt(U,"CVER",22),this.G&&qt(U,"X-HTTP-Session-Id",this.G),td(this,U),me&&(this.R?D="headers="+Kr(Da(me))+"&"+D:this.u&&Zc(U,this.u,me)),Al(this.h,le),this.Ra&&qt(U,"TYPE","init"),this.S?(qt(U,"$req",D),qt(U,"SID","null"),le.U=!0,Or(le,U,null)):Or(le,U,D),this.I=2}}else this.I==3&&(w?ym(this,w):this.i.length==0||Pi(this.h)||ym(this))};function ym(w,D){var U;D?U=D.l:U=w.V++;const K=cs(w.J);qt(K,"SID",w.M),qt(K,"RID",U),qt(K,"AID",w.K),td(w,K),w.u&&w.o&&Zc(K,w.u,w.o),U=new wr(w,w.j,U,w.D+1),w.u===null&&(U.J=w.o),D&&(w.i=D.G.concat(w.i)),D=yg(w,U,1e3),U.H=Math.round(w.va*.5)+Math.round(w.va*.5*Math.random()),Al(w.h,U),Or(U,K,D)}function td(w,D){w.H&&Z(w.H,function(U,K){qt(D,K,U)}),w.l&&Z({},function(U,K){qt(D,K,U)})}function yg(w,D,U){U=Math.min(w.i.length,U);const K=w.l?h(w.l.Ka,w.l,w):null;e:{var le=w.i;let Et=-1;for(;;){const bs=["count="+U];Et==-1?U>0?(Et=le[0].g,bs.push("ofs="+Et)):Et=0:bs.push("ofs="+Et);let pn=!0;for(let Jn=0;Jn<U;Jn++){var me=le[Jn].g;const Pa=le[Jn].map;if(me-=Et,me<0)Et=Math.max(0,le[Jn].g-100),pn=!1;else try{me="req"+me+"_"||"";try{var Me=Pa instanceof Map?Pa:Object.entries(Pa);for(const[Fi,ci]of Me){let di=ci;d(ci)&&(di=Ht(ci)),bs.push(me+Fi+"="+encodeURIComponent(di))}}catch(Fi){throw bs.push(me+"type="+encodeURIComponent("_badmap")),Fi}}catch{K&&K(Pa)}}if(pn){Me=bs.join("&");break e}}Me=void 0}return w=w.i.splice(0,U),D.G=w,Me}function bg(w){if(!w.g&&!w.v){w.Y=1;var D=w.Da;M||R(),L||(M(),L=!0),k.add(D,w),w.A=0}}function nd(w){return w.g||w.v||w.A>=3?!1:(w.Y++,w.v=ar(h(w.Da,w),_g(w,w.A)),w.A++,!0)}t.Da=function(){if(this.v=null,vg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var w=4*this.T;this.j.info("BP detection timer enabled: "+w),this.B=ar(h(this.Wa,this),w)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,In(10),Ml(this),vg(this))};function bm(w){w.B!=null&&(l.clearTimeout(w.B),w.B=null)}function vg(w){w.g=new wr(w,w.j,"rpc",w.Y),w.u===null&&(w.g.J=w.o),w.g.P=0;var D=cs(w.na);qt(D,"RID","rpc"),qt(D,"SID",w.M),qt(D,"AID",w.K),qt(D,"CI",w.F?"0":"1"),!w.F&&w.ia&&qt(D,"TO",w.ia),qt(D,"TYPE","xmlhttp"),td(w,D),w.u&&w.o&&Zc(D,w.u,w.o),w.O&&(w.g.H=w.O);var U=w.g;w=w.ba,U.M=1,U.A=Po(cs(D)),U.u=null,U.R=!0,Ri(U,w)}t.Va=function(){this.C!=null&&(this.C=null,Ml(this),nd(this),In(19))};function hu(w){w.C!=null&&(l.clearTimeout(w.C),w.C=null)}function wg(w,D){var U=null;if(w.g==D){hu(w),bm(w),w.g=null;var K=2}else if(or(w.h,D))U=D.G,Xc(w.h,D),K=1;else return;if(w.I!=0){if(D.o)if(K==1){U=D.u?D.u.length:0,D=Date.now()-D.F;var le=w.D;K=$s(),oe(K,new As(K,U)),Ui(w)}else bg(w);else if(le=D.m,le==3||le==0&&D.X>0||!(K==1&&uu(w,D)||K==2&&nd(w)))switch(U&&U.length>0&&(D=w.h,D.i=D.i.concat(U)),le){case 1:Bi(w,5);break;case 4:Bi(w,10);break;case 3:Bi(w,6);break;default:Bi(w,2)}}}function _g(w,D){let U=w.Qa+Math.floor(Math.random()*w.Za);return w.isActive()||(U*=2),U*D}function Bi(w,D){if(w.j.info("Error code "+D),D==2){var U=h(w.bb,w),K=w.Ua;const le=!K;K=new _r(K||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Vn(K,"https"),Po(K),le?ss(K.toString(),U):Rt(K.toString(),U)}else In(2);w.I=0,w.l&&w.l.pa(D),Eg(w),du(w)}t.bb=function(w){w?(this.j.info("Successfully pinged google.com"),In(2)):(this.j.info("Failed to ping google.com"),In(1))};function Eg(w){if(w.I=0,w.ja=[],w.l){const D=Rl(w.h);(D.length!=0||w.i.length!=0)&&(_(w.ja,D),_(w.ja,w.i),w.h.i.length=0,b(w.i),w.i.length=0),w.l.oa()}}function Ng(w,D,U){var K=U instanceof _r?cs(U):new _r(U);if(K.g!="")D&&(K.g=D+"."+K.g),Li(K,K.u);else{var le=l.location;K=le.protocol,D=D?D+"."+le.hostname:le.hostname,le=+le.port;const me=new _r(null);K&&Vn(me,K),D&&(me.g=D),le&&Li(me,le),U&&(me.h=U),K=me}return U=w.G,D=w.wa,U&&D&&qt(K,U,D),qt(K,"VER",w.ka),td(w,K),K}function jg(w,D,U){if(D&&!w.L)throw Error("Can't create secondary domain capable XhrIo object.");return D=w.Aa&&!w.ma?new Rn(new lr({ab:U})):new Rn(w.ma),D.Fa(w.L),D}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cg(){}t=Cg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ll(){}Ll.prototype.g=function(w,D){return new Br(w,D)};function Br(w,D){_t.call(this),this.g=new Pl(D),this.l=w,this.h=D&&D.messageUrlParams||null,w=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(w?w["X-WebChannel-Content-Type"]=D.messageContentType:w={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.sa&&(w?w["X-WebChannel-Client-Profile"]=D.sa:w={"X-WebChannel-Client-Profile":D.sa}),this.g.U=w,(w=D&&D.Qb)&&!$(w)&&(this.g.u=w),this.A=D&&D.supportsCrossDomainXhr||!1,this.v=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!$(D)&&(this.g.G=D,w=this.h,w!==null&&D in w&&(w=this.h,D in w&&delete w[D])),this.j=new Vo(this)}p(Br,_t),Br.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Br.prototype.close=function(){xm(this.g)},Br.prototype.o=function(w){var D=this.g;if(typeof w=="string"){var U={};U.__data__=w,w=U}else this.v&&(U={},U.__data__=Ht(w),w=U);D.i.push(new Zt(D.Ya++,w)),D.I==3&&Ui(D)},Br.prototype.N=function(){this.g.l=null,delete this.j,xm(this.g),delete this.g,Br.Z.N.call(this)};function Sg(w){Xn.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var D=w.__sm__;if(D){e:{for(const U in D){w=U;break e}w=void 0}(this.i=w)&&(w=this.i,D=D!==null&&w in D?D[w]:void 0),this.data=D}else this.data=w}p(Sg,Xn);function Tg(){$n.call(this),this.status=1}p(Tg,$n);function Vo(w){this.g=w}p(Vo,Cg),Vo.prototype.ra=function(){oe(this.g,"a")},Vo.prototype.qa=function(w){oe(this.g,new Sg(w))},Vo.prototype.pa=function(w){oe(this.g,new Tg)},Vo.prototype.oa=function(){oe(this.g,"b")},Ll.prototype.createWebChannel=Ll.prototype.g,Br.prototype.send=Br.prototype.o,Br.prototype.open=Br.prototype.m,Br.prototype.close=Br.prototype.close,bO=function(){return new Ll},yO=function(){return $s()},xO=An,wE={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Je.NO_ERROR=0,Je.TIMEOUT=8,Je.HTTP_ERROR=6,Ex=Je,ko.COMPLETE="complete",gO=ko,Fs.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",_t.prototype.listen=_t.prototype.J,Df=Fs,Rn.prototype.listenOnce=Rn.prototype.K,Rn.prototype.getLastError=Rn.prototype.Ha,Rn.prototype.getLastErrorCode=Rn.prototype.ya,Rn.prototype.getStatus=Rn.prototype.ca,Rn.prototype.getResponseJson=Rn.prototype.La,Rn.prototype.getResponseText=Rn.prototype.la,Rn.prototype.send=Rn.prototype.ea,Rn.prototype.setWithCredentials=Rn.prototype.Fa,pO=Rn}).apply(typeof U0<"u"?U0:typeof self<"u"?self:typeof window<"u"?window:{});const uD="@firebase/firestore",hD="4.9.2";class ra{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ra.UNAUTHENTICATED=new ra(null),ra.GOOGLE_CREDENTIALS=new ra("google-credentials-uid"),ra.FIRST_PARTY=new ra("first-party-uid"),ra.MOCK_USER=new ra("mock-user");let am="12.3.0";const Yd=new gN("@firebase/firestore");function Ju(){return Yd.logLevel}function He(t,...e){if(Yd.logLevel<=Gt.DEBUG){const n=e.map(MN);Yd.debug(`Firestore (${am}): ${t}`,...n)}}function Nl(t,...e){if(Yd.logLevel<=Gt.ERROR){const n=e.map(MN);Yd.error(`Firestore (${am}): ${t}`,...n)}}function _p(t,...e){if(Yd.logLevel<=Gt.WARN){const n=e.map(MN);Yd.warn(`Firestore (${am}): ${t}`,...n)}}function MN(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ot(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,vO(t,s,n)}function vO(t,e,n){let s=`FIRESTORE (${am}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Nl(s),new Error(s)}function wn(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||vO(e,r,s)}function vt(t,e){return t}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hl{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class _X{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ra.UNAUTHENTICATED)))}shutdown(){}}class NX{constructor(e){this.t=e,this.currentUser=ra.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wn(this.o===void 0,42304);let s=this.i;const r=u=>this.i!==s?(s=this.i,n(u)):Promise.resolve();let i=new hl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hl,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const u=i;e.enqueueRetryable((async()=>{await u.promise,await r(this.currentUser)}))},d=u=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((u=>d(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?d(u):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hl)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(wn(typeof s.accessToken=="string",31837,{l:s}),new _X(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wn(e===null||typeof e=="string",2055,{h:e}),new ra(e)}}class jX{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=ra.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CX{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new jX(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ra.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SX{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wn(this.o===void 0,3512);const s=i=>{i.error!=null&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const l=i.token!==this.m;return this.m=i.token,He("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mD(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(wn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mD(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function TX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}class LN{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=TX(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Kt(t,e){return t<e?-1:t>e?1:0}function _E(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return z_(r)===z_(i)?Kt(r,i):z_(r)?1:-1}return Kt(t.length,e.length)}const kX=55296,AX=57343;function z_(t){const e=t.charCodeAt(0);return e>=kX&&e<=AX}function Ph(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}const fD="__name__";class Qi{constructor(e,n,s){n===void 0?n=0:n>e.length&&ot(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ot(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Qi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Qi.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Kt(e.length,n.length)}static compareSegments(e,n){const s=Qi.isNumericId(e),r=Qi.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Qi.extractNumericId(e).compare(Qi.extractNumericId(n)):_E(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nc.fromString(e.substring(4,e.length-2))}}class Fn extends Qi{construct(e,n,s){return new Fn(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Le(xe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new Fn(n)}static emptyPath(){return new Fn([])}}const RX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends Qi{construct(e,n,s){return new xr(e,n,s)}static isValidIdentifier(e){return RX.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fD}static keyField(){return new xr([fD])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Le(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let l=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new Le(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Le(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=u,r+=2}else d==="`"?(l=!l,r++):d!=="."||l?(s+=d,r++):(i(),r++)}if(i(),l)throw new Le(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(n)}static emptyPath(){return new xr([])}}class nt{constructor(e){this.path=e}static fromPath(e){return new nt(Fn.fromString(e))}static fromName(e){return new nt(Fn.fromString(e).popFirst(5))}static empty(){return new nt(Fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new Fn(e.slice()))}}function wO(t,e,n){if(!n)throw new Le(xe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DX(t,e,n,s){if(e===!0&&s===!0)throw new Le(xe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pD(t){if(!nt.isDocumentKey(t))throw new Le(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gD(t){if(nt.isDocumentKey(t))throw new Le(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _O(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function bb(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ot(12329,{type:typeof t})}function Ca(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Le(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bb(t);throw new Le(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Bs(t,e){const n={typeString:t};return e&&(n.value=e),n}function Jp(t,e){if(!_O(t))throw new Le(xe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const l=t[s];if(r&&typeof l!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&l!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new Le(xe.INVALID_ARGUMENT,n);return!0}const xD=-62135596800,yD=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*yD);return new Ve(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Le(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Le(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xD)throw new Le(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yD}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jp(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:Bs("string",Ve._jsonSchemaVersion),seconds:Bs("number"),nanoseconds:Bs("number")};class xt{static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Ve(0,0))}static max(){return new xt(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ep=-1;function PX(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=xt.fromTimestamp(s===1e9?new Ve(n+1,0):new Ve(n,s));return new Ac(r,nt.empty(),e)}function MX(t){return new Ac(t.readTime,t.key,Ep)}class Ac{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ac(xt.min(),nt.empty(),Ep)}static max(){return new Ac(xt.max(),nt.empty(),Ep)}}function LX(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=nt.comparator(t.documentKey,e.documentKey),n!==0?n:Kt(t.largestBatchId,e.largestBatchId))}const IX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function im(t){if(t.code!==xe.FAILED_PRECONDITION||t.message!==IX)throw t;He("LocalStore","Unexpectedly lost primary lease")}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new je(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof je?n:je.resolve(n)}catch(n){return je.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):je.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):je.reject(n)}static resolve(e){return new je(((n,s)=>{n(e)}))}static reject(e){return new je(((n,s)=>{s(e)}))}static waitFor(e){return new je(((n,s)=>{let r=0,i=0,l=!1;e.forEach((d=>{++r,d.next((()=>{++i,l&&i===r&&n()}),(u=>s(u)))})),l=!0,i===r&&n()}))}static or(e){let n=je.resolve(!1);for(const s of e)n=n.next((r=>r?je.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new je(((s,r)=>{const i=e.length,l=new Array(i);let d=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next((f=>{l[h]=f,++d,d===i&&s(l)}),(f=>r(f)))}}))}static doWhile(e,n){return new je(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function VX(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function om(t){return t.name==="IndexedDbTransactionError"}class vb{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vb.ce=-1;const IN=-1;function wb(t){return t==null}function ny(t){return t===0&&1/t==-1/0}function UX(t){return typeof t=="number"&&Number.isInteger(t)&&!ny(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const EO="";function BX(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bD(e)),e=FX(t.get(n),e);return bD(e)}function FX(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case EO:n+="";break;default:n+=i}}return n}function bD(t){return t+EO+""}function vD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class is{constructor(e,n){this.comparator=e,this.root=n||pr.EMPTY}insert(e,n){return new is(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new is(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new B0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new B0(this.root,e,this.comparator,!1)}getReverseIterator(){return new B0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new B0(this.root,e,this.comparator,!0)}}class B0{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pr{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??pr.RED,this.left=r??pr.EMPTY,this.right=i??pr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new pr(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return pr.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ot(27949);return e+(this.isRed()?0:1)}}pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1;pr.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new pr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ys{constructor(e){this.comparator=e,this.data=new is(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wD(this.data.getIterator())}getIteratorFrom(e){return new wD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Ys)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ys(this.comparator);return n.data=e,n}}class wD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Na{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new Na([])}unionWith(e){let n=new Ys(xr.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Na(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ph(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class jO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class br{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jO("Invalid base64 string: "+i):i}})(e);return new br(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i})(e);return new br(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}br.EMPTY_BYTE_STRING=new br("");const $X=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rc(t){if(wn(!!t,39018),typeof t=="string"){let e=0;const n=$X.exec(t);if(wn(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_s(t.seconds),nanos:_s(t.nanos)}}function _s(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dc(t){return typeof t=="string"?br.fromBase64String(t):br.fromUint8Array(t)}const CO="server_timestamp",SO="__type__",TO="__previous_value__",kO="__local_write_time__";function _b(t){return(t?.mapValue?.fields||{})[SO]?.stringValue===CO}function Eb(t){const e=t.mapValue.fields[TO];return _b(e)?Eb(e):e}function Np(t){const e=Rc(t.mapValue.fields[kO].timestampValue);return new Ve(e.seconds,e.nanos)}class zX{constructor(e,n,s,r,i,l,d,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const sy="(default)";class jp{constructor(e,n){this.projectId=e,this.database=n||sy}static empty(){return new jp("","")}get isDefaultDatabase(){return this.database===sy}isEqual(e){return e instanceof jp&&e.projectId===this.projectId&&e.database===this.database}}const AO="__type__",HX="__max__",F0={mapValue:{}},RO="__vector__",ry="value";function Pc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_b(t)?4:WX(t)?9007199254740991:qX(t)?10:11:ot(28295,{value:t})}function bo(t,e){if(t===e)return!0;const n=Pc(t);if(n!==Pc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Np(t).isEqual(Np(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Rc(r.timestampValue),d=Rc(i.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return Dc(r.bytesValue).isEqual(Dc(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return _s(r.geoPointValue.latitude)===_s(i.geoPointValue.latitude)&&_s(r.geoPointValue.longitude)===_s(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return _s(r.integerValue)===_s(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=_s(r.doubleValue),d=_s(i.doubleValue);return l===d?ny(l)===ny(d):isNaN(l)&&isNaN(d)}return!1})(t,e);case 9:return Ph(t.arrayValue.values||[],e.arrayValue.values||[],bo);case 10:case 11:return(function(r,i){const l=r.mapValue.fields||{},d=i.mapValue.fields||{};if(vD(l)!==vD(d))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(d[u]===void 0||!bo(l[u],d[u])))return!1;return!0})(t,e);default:return ot(52216,{left:t})}}function Cp(t,e){return(t.values||[]).find((n=>bo(n,e)))!==void 0}function Mh(t,e){if(t===e)return 0;const n=Pc(t),s=Pc(e);if(n!==s)return Kt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Kt(t.booleanValue,e.booleanValue);case 2:return(function(i,l){const d=_s(i.integerValue||i.doubleValue),u=_s(l.integerValue||l.doubleValue);return d<u?-1:d>u?1:d===u?0:isNaN(d)?isNaN(u)?0:-1:1})(t,e);case 3:return _D(t.timestampValue,e.timestampValue);case 4:return _D(Np(t),Np(e));case 5:return _E(t.stringValue,e.stringValue);case 6:return(function(i,l){const d=Dc(i),u=Dc(l);return d.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(i,l){const d=i.split("/"),u=l.split("/");for(let h=0;h<d.length&&h<u.length;h++){const f=Kt(d[h],u[h]);if(f!==0)return f}return Kt(d.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,l){const d=Kt(_s(i.latitude),_s(l.latitude));return d!==0?d:Kt(_s(i.longitude),_s(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ED(t.arrayValue,e.arrayValue);case 10:return(function(i,l){const d=i.fields||{},u=l.fields||{},h=d[ry]?.arrayValue,f=u[ry]?.arrayValue,p=Kt(h?.values?.length||0,f?.values?.length||0);return p!==0?p:ED(h,f)})(t.mapValue,e.mapValue);case 11:return(function(i,l){if(i===F0.mapValue&&l===F0.mapValue)return 0;if(i===F0.mapValue)return 1;if(l===F0.mapValue)return-1;const d=i.fields||{},u=Object.keys(d),h=l.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const x=_E(u[p],f[p]);if(x!==0)return x;const b=Mh(d[u[p]],h[f[p]]);if(b!==0)return b}return Kt(u.length,f.length)})(t.mapValue,e.mapValue);default:throw ot(23264,{he:n})}}function _D(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Kt(t,e);const n=Rc(t),s=Rc(e),r=Kt(n.seconds,s.seconds);return r!==0?r:Kt(n.nanos,s.nanos)}function ED(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=Mh(n[r],s[r]);if(i)return i}return Kt(n.length,s.length)}function Lh(t){return EE(t)}function EE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=Rc(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Dc(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return nt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=EE(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const l of s)i?i=!1:r+=",",r+=`${l}:${EE(n.fields[l])}`;return r+"}"})(t.mapValue):ot(61005,{value:t})}function Nx(t){switch(Pc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Eb(t);return e?16+Nx(e):16;case 5:return 2*t.stringValue.length;case 6:return Dc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Nx(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return Yc(s.fields,((i,l)=>{r+=i.length+Nx(l)})),r})(t.mapValue);default:throw ot(13486,{value:t})}}function ay(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function NE(t){return!!t&&"integerValue"in t}function ON(t){return!!t&&"arrayValue"in t}function ND(t){return!!t&&"nullValue"in t}function jD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jx(t){return!!t&&"mapValue"in t}function qX(t){return(t?.mapValue?.fields||{})[AO]?.stringValue===RO}function Kf(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Yc(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Kf(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kf(t.arrayValue.values[n]);return e}return{...t}}function WX(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HX}class oa{constructor(e){this.value=e}static empty(){return new oa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!jx(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kf(n)}setAll(e){let n=xr.emptyPath(),s={},r=[];e.forEach(((l,d)=>{if(!n.isImmediateParentOf(d)){const u=this.getFieldsMap(n);this.applyChanges(u,s,r),s={},r=[],n=d.popLast()}l?s[d.lastSegment()]=Kf(l):r.push(d.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());jx(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];jx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Yc(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new oa(Kf(this.value))}}function DO(t){const e=[];return Yc(t.fields,((n,s)=>{const r=new xr([n]);if(jx(s)){const i=DO(s.mapValue).fields;if(i.length===0)e.push(r);else for(const l of i)e.push(r.child(l))}else e.push(r)})),new Na(e)}class Ar{constructor(e,n,s,r,i,l,d){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=l,this.documentState=d}static newInvalidDocument(e){return new Ar(e,0,xt.min(),xt.min(),xt.min(),oa.empty(),0)}static newFoundDocument(e,n,s,r){return new Ar(e,1,n,xt.min(),s,r,0)}static newNoDocument(e,n){return new Ar(e,2,n,xt.min(),xt.min(),oa.empty(),0)}static newUnknownDocument(e,n){return new Ar(e,3,n,xt.min(),xt.min(),oa.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ar&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ih{constructor(e,n){this.position=e,this.inclusive=n}}function CD(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],l=t.position[r];if(i.field.isKeyField()?s=nt.comparator(nt.fromName(l.referenceValue),n.key):s=Mh(l,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function SD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bo(t.position[n],e.position[n]))return!1;return!0}class Sp{constructor(e,n="asc"){this.field=e,this.dir=n}}function YX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class PO{}class Us extends PO{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new KX(e,n,s):n==="array-contains"?new ZX(e,s):n==="in"?new JX(e,s):n==="not-in"?new eZ(e,s):n==="array-contains-any"?new tZ(e,s):new Us(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new QX(e,s):new XX(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mh(n,this.value)):n!==null&&Pc(this.value)===Pc(n)&&this.matchesComparison(Mh(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends PO{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ni(e,n)}matches(e){return MO(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function MO(t){return t.op==="and"}function LO(t){return GX(t)&&MO(t)}function GX(t){for(const e of t.filters)if(e instanceof Ni)return!1;return!0}function jE(t){if(t instanceof Us)return t.field.canonicalString()+t.op.toString()+Lh(t.value);if(LO(t))return t.filters.map((e=>jE(e))).join(",");{const e=t.filters.map((n=>jE(n))).join(",");return`${t.op}(${e})`}}function IO(t,e){return t instanceof Us?(function(s,r){return r instanceof Us&&s.op===r.op&&s.field.isEqual(r.field)&&bo(s.value,r.value)})(t,e):t instanceof Ni?(function(s,r){return r instanceof Ni&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,l,d)=>i&&IO(l,r.filters[d])),!0):!1})(t,e):void ot(19439)}function OO(t){return t instanceof Us?(function(n){return`${n.field.canonicalString()} ${n.op} ${Lh(n.value)}`})(t):t instanceof Ni?(function(n){return n.op.toString()+" {"+n.getFilters().map(OO).join(" ,")+"}"})(t):"Filter"}class KX extends Us{constructor(e,n,s){super(e,n,s),this.key=nt.fromName(s.referenceValue)}matches(e){const n=nt.comparator(e.key,this.key);return this.matchesComparison(n)}}class QX extends Us{constructor(e,n){super(e,"in",n),this.keys=VO("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class XX extends Us{constructor(e,n){super(e,"not-in",n),this.keys=VO("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function VO(t,e){return(e.arrayValue?.values||[]).map((n=>nt.fromName(n.referenceValue)))}class ZX extends Us{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ON(n)&&Cp(n.arrayValue,this.value)}}class JX extends Us{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Cp(this.value.arrayValue,n)}}class eZ extends Us{constructor(e,n){super(e,"not-in",n)}matches(e){if(Cp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Cp(this.value.arrayValue,n)}}class tZ extends Us{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ON(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Cp(this.value.arrayValue,s)))}}class nZ{constructor(e,n=null,s=[],r=[],i=null,l=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=l,this.endAt=d,this.Te=null}}function TD(t,e=null,n=[],s=[],r=null,i=null,l=null){return new nZ(t,e,n,s,r,i,l)}function VN(t){const e=vt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>jE(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),wb(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Lh(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Lh(s))).join(",")),e.Te=n}return e.Te}function UN(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IO(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!SD(t.startAt,e.startAt)&&SD(t.endAt,e.endAt)}function CE(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Gc{constructor(e,n=null,s=[],r=[],i=null,l="F",d=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=l,this.startAt=d,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sZ(t,e,n,s,r,i,l,d){return new Gc(t,e,n,s,r,i,l,d)}function Nb(t){return new Gc(t)}function kD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BN(t){return t.collectionGroup!==null}function _h(t){const e=vt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Ys(xr.comparator);return l.filters.forEach((u=>{u.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Sp(i,s))})),n.has(xr.keyField().canonicalString())||e.Ie.push(new Sp(xr.keyField(),s))}return e.Ie}function ho(t){const e=vt(t);return e.Ee||(e.Ee=rZ(e,_h(t))),e.Ee}function rZ(t,e){if(t.limitType==="F")return TD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new Sp(r.field,i)}));const n=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return TD(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function SE(t,e){const n=t.filters.concat([e]);return new Gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function iy(t,e,n){return new Gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jb(t,e){return UN(ho(t),ho(e))&&t.limitType===e.limitType}function UO(t){return`${VN(ho(t))}|lt:${t.limitType}`}function eh(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>OO(r))).join(", ")}]`),wb(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>Lh(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>Lh(r))).join(",")),`Target(${s})`})(ho(t))}; limitType=${t.limitType})`}function Cb(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):nt.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of _h(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(l,d,u){const h=CD(l,d,u);return l.inclusive?h<=0:h<0})(s.startAt,_h(s),r)||s.endAt&&!(function(l,d,u){const h=CD(l,d,u);return l.inclusive?h>=0:h>0})(s.endAt,_h(s),r))})(t,e)}function aZ(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BO(t){return(e,n)=>{let s=!1;for(const r of _h(t)){const i=iZ(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function iZ(t,e,n){const s=t.field.isKeyField()?nt.comparator(e.key,n.key):(function(i,l,d){const u=l.data.field(i),h=d.data.field(i);return u!==null&&h!==null?Mh(u,h):ot(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ot(19790,{direction:t.dir})}}class au{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yc(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return NO(this.inner)}size(){return this.innerSize}}const oZ=new is(nt.comparator);function jl(){return oZ}const FO=new is(nt.comparator);function Pf(...t){let e=FO;for(const n of t)e=e.insert(n.key,n);return e}function $O(t){let e=FO;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Dd(){return Qf()}function zO(){return Qf()}function Qf(){return new au((t=>t.toString()),((t,e)=>t.isEqual(e)))}const lZ=new is(nt.comparator),cZ=new Ys(nt.comparator);function Qt(...t){let e=cZ;for(const n of t)e=e.add(n);return e}const dZ=new Ys(Kt);function uZ(){return dZ}function FN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ny(e)?"-0":e}}function HO(t){return{integerValue:""+t}}function hZ(t,e){return UX(e)?HO(e):FN(t,e)}class Sb{constructor(){this._=void 0}}function mZ(t,e,n){return t instanceof oy?(function(r,i){const l={fields:{[SO]:{stringValue:CO},[kO]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&_b(i)&&(i=Eb(i)),i&&(l.fields[TO]=i),{mapValue:l}})(n,e):t instanceof Oh?WO(t,e):t instanceof Tp?YO(t,e):(function(r,i){const l=qO(r,i),d=AD(l)+AD(r.Ae);return NE(l)&&NE(r.Ae)?HO(d):FN(r.serializer,d)})(t,e)}function fZ(t,e,n){return t instanceof Oh?WO(t,e):t instanceof Tp?YO(t,e):n}function qO(t,e){return t instanceof ly?(function(s){return NE(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class oy extends Sb{}class Oh extends Sb{constructor(e){super(),this.elements=e}}function WO(t,e){const n=GO(e);for(const s of t.elements)n.some((r=>bo(r,s)))||n.push(s);return{arrayValue:{values:n}}}class Tp extends Sb{constructor(e){super(),this.elements=e}}function YO(t,e){let n=GO(e);for(const s of t.elements)n=n.filter((r=>!bo(r,s)));return{arrayValue:{values:n}}}class ly extends Sb{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function AD(t){return _s(t.integerValue||t.doubleValue)}function GO(t){return ON(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class pZ{constructor(e,n){this.field=e,this.transform=n}}function gZ(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof Oh&&r instanceof Oh||s instanceof Tp&&r instanceof Tp?Ph(s.elements,r.elements,bo):s instanceof ly&&r instanceof ly?bo(s.Ae,r.Ae):s instanceof oy&&r instanceof oy})(t.transform,e.transform)}class xZ{constructor(e,n){this.version=e,this.transformResults=n}}class Za{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Za}static exists(e){return new Za(void 0,e)}static updateTime(e){return new Za(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cx(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tb{}function KO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $N(t.key,Za.none()):new eg(t.key,t.data,Za.none());{const n=t.data,s=oa.empty();let r=new Ys(xr.comparator);for(let i of e.fields)if(!r.has(i)){let l=n.field(i);l===null&&i.length>1&&(i=i.popLast(),l=n.field(i)),l===null?s.delete(i):s.set(i,l),r=r.add(i)}return new Kc(t.key,s,new Na(r.toArray()),Za.none())}}function yZ(t,e,n){t instanceof eg?(function(r,i,l){const d=r.value.clone(),u=DD(r.fieldTransforms,i,l.transformResults);d.setAll(u),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(t,e,n):t instanceof Kc?(function(r,i,l){if(!Cx(r.precondition,i))return void i.convertToUnknownDocument(l.version);const d=DD(r.fieldTransforms,i,l.transformResults),u=i.data;u.setAll(QO(r)),u.setAll(d),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(t,e,n):(function(r,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function Xf(t,e,n,s){return t instanceof eg?(function(i,l,d,u){if(!Cx(i.precondition,l))return d;const h=i.value.clone(),f=PD(i.fieldTransforms,u,l);return h.setAll(f),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(t,e,n,s):t instanceof Kc?(function(i,l,d,u){if(!Cx(i.precondition,l))return d;const h=PD(i.fieldTransforms,u,l),f=l.data;return f.setAll(QO(i)),f.setAll(h),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),d===null?null:d.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,s):(function(i,l,d){return Cx(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(t,e,n)}function bZ(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=qO(s.transform,r||null);i!=null&&(n===null&&(n=oa.empty()),n.set(s.field,i))}return n||null}function RD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Ph(s,r,((i,l)=>gZ(i,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eg extends Tb{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kc extends Tb{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function QO(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function DD(t,e,n){const s=new Map;wn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],l=i.transform,d=e.data.field(i.field);s.set(i.field,fZ(l,d,n[r]))}return s}function PD(t,e,n){const s=new Map;for(const r of t){const i=r.transform,l=n.data.field(r.field);s.set(r.field,mZ(i,l,e))}return s}class $N extends Tb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vZ extends Tb{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wZ{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&yZ(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Xf(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Xf(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=zO();return this.mutations.forEach((r=>{const i=e.get(r.key),l=i.overlayedDocument;let d=this.applyToLocalView(l,i.mutatedFields);d=n.has(r.key)?null:d;const u=KO(l,d);u!==null&&s.set(r.key,u),l.isValidDocument()||l.convertToNoDocument(xt.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qt())}isEqual(e){return this.batchId===e.batchId&&Ph(this.mutations,e.mutations,((n,s)=>RD(n,s)))&&Ph(this.baseMutations,e.baseMutations,((n,s)=>RD(n,s)))}}class zN{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){wn(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return lZ})();const i=e.mutations;for(let l=0;l<i.length;l++)r=r.insert(i[l].key,s[l].version);return new zN(e,n,s,r)}}class _Z{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class EZ{constructor(e,n){this.count=e,this.unchangedNames=n}}var Os,Jt;function NZ(t){switch(t){case xe.OK:return ot(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return ot(15467,{code:t})}}function XO(t){if(t===void 0)return Nl("GRPC error has no .code"),xe.UNKNOWN;switch(t){case Os.OK:return xe.OK;case Os.CANCELLED:return xe.CANCELLED;case Os.UNKNOWN:return xe.UNKNOWN;case Os.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Os.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Os.INTERNAL:return xe.INTERNAL;case Os.UNAVAILABLE:return xe.UNAVAILABLE;case Os.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Os.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Os.NOT_FOUND:return xe.NOT_FOUND;case Os.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Os.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Os.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Os.ABORTED:return xe.ABORTED;case Os.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Os.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Os.DATA_LOSS:return xe.DATA_LOSS;default:return ot(39323,{code:t})}}(Jt=Os||(Os={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";function jZ(){return new TextEncoder}const CZ=new Nc([4294967295,4294967295],0);function MD(t){const e=jZ().encode(t),n=new fO;return n.update(e),new Uint8Array(n.digest())}function LD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Nc([n,s],0),new Nc([r,i],0)]}class HN{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Mf(`Invalid padding: ${n}`);if(s<0)throw new Mf(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Mf(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Mf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Nc.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Nc.fromNumber(s)));return r.compare(CZ)===1&&(r=new Nc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=MD(e),[s,r]=LD(n);for(let i=0;i<this.hashCount;i++){const l=this.ye(s,r,i);if(!this.we(l))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),l=new HN(i,r,n);return s.forEach((d=>l.insert(d))),l}insert(e){if(this.ge===0)return;const n=MD(e),[s,r]=LD(n);for(let i=0;i<this.hashCount;i++){const l=this.ye(s,r,i);this.Se(l)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Mf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kb{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,tg.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new kb(xt.min(),r,new is(Kt),jl(),Qt())}}class tg{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new tg(s,n,Qt(),Qt(),Qt())}}class Sx{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class ZO{constructor(e,n){this.targetId=e,this.Ce=n}}class JO{constructor(e,n,s=br.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class ID{constructor(){this.ve=0,this.Fe=OD(),this.Me=br.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qt(),n=Qt(),s=Qt();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:ot(38017,{changeType:i})}})),new tg(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=OD()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,wn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class SZ{constructor(e){this.Ge=e,this.ze=new Map,this.je=jl(),this.Je=$0(),this.He=$0(),this.Ye=new is(Kt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ot(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(CE(i))if(s===0){const l=new nt(i.path);this.et(n,l,Ar.newNoDocument(l,xt.min()))}else wn(s===1,20013,{expectedCount:s});else{const l=this._t(n);if(l!==s){const d=this.ut(e),u=d?this.ct(d,e,l):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let l,d;try{l=Dc(s).toUint8Array()}catch(u){if(u instanceof jO)return _p("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{d=new HN(l,r,i)}catch(u){return _p(u instanceof Mf?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return d.ge===0?null:d}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const l=this.Ge.ht(),d=`projects/${l.projectId}/databases/${l.database}/documents/${i.path.canonicalString()}`;e.mightContain(d)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,l)=>{const d=this.ot(l);if(d){if(i.current&&CE(d.target)){const u=new nt(d.target.path);this.It(u).has(l)||this.Et(l,u)||this.et(l,u,Ar.newNoDocument(u,e))}i.Be&&(n.set(l,i.ke()),i.qe())}}));let s=Qt();this.He.forEach(((i,l)=>{let d=!0;l.forEachWhile((u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(i))})),this.je.forEach(((i,l)=>l.setReadTime(e)));const r=new kb(e,n,this.Ye,this.je,s);return this.je=jl(),this.Je=$0(),this.He=$0(),this.Ye=new is(Kt),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ID,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ys(Kt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ys(Kt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||He("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ID),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $0(){return new is(nt.comparator)}function OD(){return new is(nt.comparator)}const TZ={asc:"ASCENDING",desc:"DESCENDING"},kZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AZ={and:"AND",or:"OR"};class RZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function TE(t,e){return t.useProto3Json||wb(e)?e:{value:e}}function cy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DZ(t,e){return cy(t,e.toTimestamp())}function mo(t){return wn(!!t,49232),xt.fromTimestamp((function(n){const s=Rc(n);return new Ve(s.seconds,s.nanos)})(t))}function qN(t,e){return kE(t,e).canonicalString()}function kE(t,e){const n=(function(r){return new Fn(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function t6(t){const e=Fn.fromString(t);return wn(i6(e),10190,{key:e.toString()}),e}function AE(t,e){return qN(t.databaseId,e.path)}function H_(t,e){const n=t6(e);if(n.get(1)!==t.databaseId.projectId)throw new Le(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Le(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new nt(s6(n))}function n6(t,e){return qN(t.databaseId,e)}function PZ(t){const e=t6(t);return e.length===4?Fn.emptyPath():s6(e)}function RE(t){return new Fn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function s6(t){return wn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function VD(t,e,n){return{name:AE(t,e),fields:n.value.mapValue.fields}}function MZ(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ot(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(wn(f===void 0||typeof f=="string",58123),br.fromBase64String(f||"")):(wn(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),br.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(h){const f=h.code===void 0?xe.UNKNOWN:XO(h.code);return new Le(f,h.message||"")})(l);n=new JO(s,r,i,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=H_(t,s.document.name),i=mo(s.document.updateTime),l=s.document.createTime?mo(s.document.createTime):xt.min(),d=new oa({mapValue:{fields:s.document.fields}}),u=Ar.newFoundDocument(r,i,l,d),h=s.targetIds||[],f=s.removedTargetIds||[];n=new Sx(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=H_(t,s.document),i=s.readTime?mo(s.readTime):xt.min(),l=Ar.newNoDocument(r,i),d=s.removedTargetIds||[];n=new Sx([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=H_(t,s.document),i=s.removedTargetIds||[];n=new Sx([],i,r,null)}else{if(!("filter"in e))return ot(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,l=new EZ(r,i),d=s.targetId;n=new ZO(d,l)}}return n}function LZ(t,e){let n;if(e instanceof eg)n={update:VD(t,e.key,e.value)};else if(e instanceof $N)n={delete:AE(t,e.key)};else if(e instanceof Kc)n={update:VD(t,e.key,e.data),updateMask:HZ(e.fieldMask)};else{if(!(e instanceof vZ))return ot(16599,{Vt:e.type});n={verify:AE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,l){const d=l.transform;if(d instanceof oy)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Oh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Tp)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ly)return{fieldPath:l.field.canonicalString(),increment:d.Ae};throw ot(20930,{transform:l.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:DZ(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ot(27497)})(t,e.precondition)),n}function IZ(t,e){return t&&t.length>0?(wn(e!==void 0,14353),t.map((n=>(function(r,i){let l=r.updateTime?mo(r.updateTime):mo(i);return l.isEqual(xt.min())&&(l=mo(i)),new xZ(l,r.transformResults||[])})(n,e)))):[]}function OZ(t,e){return{documents:[n6(t,e.path)]}}function VZ(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=n6(t,r);const i=(function(h){if(h.length!==0)return a6(Ni.create(h,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const l=(function(h){if(h.length!==0)return h.map((f=>(function(x){return{field:th(x.field),direction:FZ(x.dir)}})(f)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const d=TE(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:r}}function UZ(t){let e=PZ(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){wn(s===1,65062);const f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const x=r6(p);return x instanceof Ni&&LO(x)?x.getFilters():[x]})(n.where));let l=[];n.orderBy&&(l=(function(p){return p.map((x=>(function(_){return new Sp(nh(_.field),(function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(x)))})(n.orderBy));let d=null;n.limit&&(d=(function(p){let x;return x=typeof p=="object"?p.value:p,wb(x)?null:x})(n.limit));let u=null;n.startAt&&(u=(function(p){const x=!!p.before,b=p.values||[];return new Ih(b,x)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const x=!p.before,b=p.values||[];return new Ih(b,x)})(n.endAt)),sZ(e,r,l,i,d,"F",u,h)}function BZ(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function r6(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=nh(n.unaryFilter.field);return Us.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=nh(n.unaryFilter.field);return Us.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=nh(n.unaryFilter.field);return Us.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=nh(n.unaryFilter.field);return Us.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Us.create(nh(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ni.create(n.compositeFilter.filters.map((s=>r6(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ot(1026)}})(n.compositeFilter.op))})(t):ot(30097,{filter:t})}function FZ(t){return TZ[t]}function $Z(t){return kZ[t]}function zZ(t){return AZ[t]}function th(t){return{fieldPath:t.canonicalString()}}function nh(t){return xr.fromServerFormat(t.fieldPath)}function a6(t){return t instanceof Us?(function(n){if(n.op==="=="){if(jD(n.value))return{unaryFilter:{field:th(n.field),op:"IS_NAN"}};if(ND(n.value))return{unaryFilter:{field:th(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jD(n.value))return{unaryFilter:{field:th(n.field),op:"IS_NOT_NAN"}};if(ND(n.value))return{unaryFilter:{field:th(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:th(n.field),op:$Z(n.op),value:n.value}}})(t):t instanceof Ni?(function(n){const s=n.getFilters().map((r=>a6(r)));return s.length===1?s[0]:{compositeFilter:{op:zZ(n.op),filters:s}}})(t):ot(54877,{filter:t})}function HZ(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function i6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class yc{constructor(e,n,s,r,i=xt.min(),l=xt.min(),d=br.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=u}withSequenceNumber(e){return new yc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qZ{constructor(e){this.yt=e}}function WZ(t){const e=UZ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?iy(e,e.limit,"L"):e}class YZ{constructor(){this.Cn=new GZ}addToCollectionParentIndex(e,n){return this.Cn.add(n),je.resolve()}getCollectionParents(e,n){return je.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return je.resolve()}deleteFieldIndex(e,n){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,n){return je.resolve()}getDocumentsMatchingTarget(e,n){return je.resolve(null)}getIndexType(e,n){return je.resolve(0)}getFieldIndexes(e,n){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,n){return je.resolve(Ac.min())}getMinOffsetFromCollectionGroup(e,n){return je.resolve(Ac.min())}updateCollectionGroup(e,n,s){return je.resolve()}updateIndexEntries(e,n){return je.resolve()}}class GZ{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ys(Fn.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ys(Fn.comparator)).toArray()}}const UD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o6=41943040;class aa{static withCacheSize(e){return new aa(e,aa.DEFAULT_COLLECTION_PERCENTILE,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}aa.DEFAULT_COLLECTION_PERCENTILE=10,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,aa.DEFAULT=new aa(o6,aa.DEFAULT_COLLECTION_PERCENTILE,aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),aa.DISABLED=new aa(-1,0,0);class Vh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vh(0)}static cr(){return new Vh(-1)}}const BD="LruGarbageCollector",l6=1048576;function FD([t,e],[n,s]){const r=Kt(t,n);return r===0?Kt(e,s):r}class KZ{constructor(e){this.Ir=e,this.buffer=new Ys(FD),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();FD(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class QZ{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){He(BD,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){om(n)?He(BD,"Ignoring IndexedDB error during garbage collection: ",n):await im(n)}await this.Vr(3e5)}))}}class XZ{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return je.resolve(vb.ce);const s=new KZ(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(He("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(UD)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UD):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,l,d,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,l=Date.now(),this.nthSequenceNumber(e,r)))).next((p=>(s=p,d=Date.now(),this.removeTargets(e,s,n)))).next((p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,s)))).next((p=>(h=Date.now(),Ju()<=Gt.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-f}ms
	Determined least recently used ${r} in `+(d-l)+`ms
	Removed ${i} targets in `+(u-d)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p}))))}}function ZZ(t,e){return new XZ(t,e)}class JZ{constructor(){this.changes=new au((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ar.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?je.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eJ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class tJ{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&Xf(s.mutation,r,Na.empty(),Ve.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Qt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Qt()){const r=Dd();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let l=Pf();return i.forEach(((d,u)=>{l=l.insert(d,u.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const s=Dd();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Qt())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((l,d)=>{n.set(l,d)}))}))}computeViews(e,n,s,r){let i=jl();const l=Qf(),d=(function(){return Qf()})();return n.forEach(((u,h)=>{const f=s.get(h.key);r.has(h.key)&&(f===void 0||f.mutation instanceof Kc)?i=i.insert(h.key,h):f!==void 0?(l.set(h.key,f.mutation.getFieldMask()),Xf(f.mutation,h,f.mutation.getFieldMask(),Ve.now())):l.set(h.key,Na.empty())})),this.recalculateAndSaveOverlays(e,i).next((u=>(u.forEach(((h,f)=>l.set(h,f))),n.forEach(((h,f)=>d.set(h,new eJ(f,l.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,n){const s=Qf();let r=new is(((l,d)=>l-d)),i=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const d of l)d.keys().forEach((u=>{const h=n.get(u);if(h===null)return;let f=s.get(u)||Na.empty();f=d.applyToLocalView(h,f),s.set(u,f);const p=(r.get(d.batchId)||Qt()).add(u);r=r.insert(d.batchId,p)}))})).next((()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const u=d.getNext(),h=u.key,f=u.value,p=zO();f.forEach((x=>{if(!i.has(x)){const b=KO(n.get(x),s.get(x));b!==null&&p.set(x,b),i=i.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,p))}return je.waitFor(l)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(l){return nt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const l=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):je.resolve(Dd());let d=Ep,u=i;return l.next((h=>je.forEach(h,((f,p)=>(d<p.largestBatchId&&(d=p.largestBatchId),i.get(f)?je.resolve():this.remoteDocumentCache.getEntry(e,f).next((x=>{u=u.insert(f,x)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,u,h,Qt()))).next((f=>({batchId:d,changes:$O(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new nt(n)).next((s=>{let r=Pf();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let l=Pf();return this.indexManager.getCollectionParents(e,i).next((d=>je.forEach(d,(u=>{const h=(function(p,x){return new Gc(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next((f=>{f.forEach(((p,x)=>{l=l.insert(p,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((l=>{i.forEach(((u,h)=>{const f=h.getKey();l.get(f)===null&&(l=l.insert(f,Ar.newInvalidDocument(f)))}));let d=Pf();return l.forEach(((u,h)=>{const f=i.get(u);f!==void 0&&Xf(f.mutation,h,Na.empty(),Ve.now()),Cb(n,h)&&(d=d.insert(u,h))})),d}))}}class nJ{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return je.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:mo(r.createTime)}})(n)),je.resolve()}getNamedQuery(e,n){return je.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:WZ(r.bundledQuery),readTime:mo(r.readTime)}})(n)),je.resolve()}}class sJ{constructor(){this.overlays=new is(nt.comparator),this.qr=new Map}getOverlay(e,n){return je.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Dd();return je.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),je.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),je.resolve()}getOverlaysForCollection(e,n,s){const r=Dd(),i=n.length+1,l=new nt(n.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const u=d.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>s&&r.set(u.getKey(),u)}return je.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new is(((h,f)=>h-f));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let f=i.get(h.largestBatchId);f===null&&(f=Dd(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const d=Dd(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((h,f)=>d.set(h,f))),!(d.size()>=r)););return je.resolve(d)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(s.key,new _Z(n,s));let i=this.qr.get(n);i===void 0&&(i=Qt(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}class rJ{constructor(){this.sessionToken=br.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,je.resolve()}}class WN{constructor(){this.Qr=new Ys(er.$r),this.Ur=new Ys(er.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new er(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new er(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new nt(new Fn([])),s=new er(n,e),r=new er(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(l=>{this.Gr(l),i.push(l.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new nt(new Fn([])),s=new er(n,e),r=new er(n,e+1);let i=Qt();return this.Ur.forEachInRange([s,r],(l=>{i=i.add(l.key)})),i}containsKey(e){const n=new er(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class er{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return nt.comparator(e.key,n.key)||Kt(e.Yr,n.Yr)}static Kr(e,n){return Kt(e.Yr,n.Yr)||nt.comparator(e.key,n.key)}}class aJ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ys(er.$r)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new wZ(i,n,s,r);this.mutationQueue.push(l);for(const d of r)this.Zr=this.Zr.add(new er(d.key,i)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return je.resolve(l)}lookupMutationBatch(e,n){return je.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return je.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?IN:this.tr-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new er(n,0),r=new er(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(l=>{const d=this.Xr(l.Yr);i.push(d)})),je.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ys(Kt);return n.forEach((r=>{const i=new er(r,0),l=new er(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,l],(d=>{s=s.add(d.Yr)}))})),je.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;nt.isDocumentKey(i)||(i=i.child(""));const l=new er(new nt(i),0);let d=new Ys(Kt);return this.Zr.forEachWhile((u=>{const h=u.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(d=d.add(u.Yr)),!0)}),l),je.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){wn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return je.forEach(n.mutations,(r=>{const i=new er(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new er(n,0),r=this.Zr.firstAfterOrEqual(s);return je.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class iJ{constructor(e){this.ri=e,this.docs=(function(){return new is(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,l=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:l}),this.size+=l-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return je.resolve(s?s.document.mutableCopy():Ar.newInvalidDocument(n))}getEntries(e,n){let s=jl();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ar.newInvalidDocument(r))})),je.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=jl();const l=n.path,d=new nt(l.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(d);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||LX(MX(f),s)<=0||(r.has(f.key)||Cb(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return je.resolve(i)}getAllFromCollectionGroup(e,n,s,r){ot(9500)}ii(e,n){return je.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new oJ(this)}getSize(e){return je.resolve(this.size)}}class oJ extends JZ{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),je.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class lJ{constructor(e){this.persistence=e,this.si=new au((n=>VN(n)),UN),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.oi=0,this._i=new WN,this.targetCount=0,this.ai=Vh.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),je.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Vh(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,je.resolve()}updateTargetData(e,n){return this.Pr(n),je.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((l,d)=>{d.sequenceNumber<=n&&s.get(d.targetId)===null&&(this.si.delete(l),i.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),je.waitFor(i).next((()=>r))}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return je.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),je.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((l=>{i.push(r.markPotentiallyOrphaned(e,l))})),je.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),je.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return je.resolve(s)}containsKey(e,n){return je.resolve(this._i.containsKey(n))}}class c6{constructor(e,n){this.ui={},this.overlays={},this.ci=new vb(0),this.li=!1,this.li=!0,this.hi=new rJ,this.referenceDelegate=e(this),this.Pi=new lJ(this),this.indexManager=new YZ,this.remoteDocumentCache=(function(r){return new iJ(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new qZ(n),this.Ii=new nJ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sJ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new aJ(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){He("MemoryPersistence","Starting transaction:",e);const r=new cJ(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return je.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class cJ extends OX{constructor(e){super(),this.currentSequenceNumber=e}}class YN{constructor(e){this.persistence=e,this.Ri=new WN,this.Vi=null}static mi(e){return new YN(e)}get fi(){if(this.Vi)return this.Vi;throw ot(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),je.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),je.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),je.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.fi,(s=>{const r=nt.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,xt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return je.or([()=>je.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class dy{constructor(e,n){this.persistence=e,this.pi=new au((s=>BX(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=ZZ(this,n)}static mi(e,n){return new dy(e,n)}Ei(){}di(e){return je.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return je.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?je.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(l=>this.br(e,l,n).next((d=>{d||(s++,i.removeEntry(l,xt.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),je.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),je.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),je.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nx(e.data.value)),n}br(e,n,s){return je.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return je.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class GN{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Qt(),r=Qt();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new GN(e,n.fromCache,s,r)}}class dJ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uJ{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RY()?8:VX(Pr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((l=>{i.result=l})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((l=>{i.result=l}))})).next((()=>{if(i.result)return;const l=new dJ;return this.Ss(e,n,l).next((d=>{if(i.result=d,this.Vs)return this.bs(e,n,l,d.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?(Ju()<=Gt.DEBUG&&He("QueryEngine","SDK will not create cache indexes for query:",eh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),je.resolve()):(Ju()<=Gt.DEBUG&&He("QueryEngine","Query:",eh(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Ju()<=Gt.DEBUG&&He("QueryEngine","The SDK decides to create cache indexes for query:",eh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ho(n))):je.resolve())}ys(e,n){if(kD(n))return je.resolve(null);let s=ho(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=iy(n,null,"F"),s=ho(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const l=Qt(...i);return this.ps.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,s).next((u=>{const h=this.Ds(n,d);return this.Cs(n,h,l,u.readTime)?this.ys(e,iy(n,null,"F")):this.vs(e,h,n,u)}))))})))))}ws(e,n,s,r){return kD(n)||r.isEqual(xt.min())?je.resolve(null):this.ps.getDocuments(e,s).next((i=>{const l=this.Ds(n,i);return this.Cs(n,l,s,r)?je.resolve(null):(Ju()<=Gt.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),eh(n)),this.vs(e,l,n,PX(r,Ep)).next((d=>d)))}))}Ds(e,n){let s=new Ys(BO(e));return n.forEach(((r,i)=>{Cb(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return Ju()<=Gt.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",eh(n)),this.ps.getDocumentsMatchingQuery(e,n,Ac.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((l=>{i=i.insert(l.key,l)})),i)))}}const KN="LocalStore",hJ=3e8;class mJ{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new is(Kt),this.xs=new au((i=>VN(i)),UN),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tJ(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function fJ(t,e,n,s){return new mJ(t,e,n,s)}async function d6(t,e){const n=vt(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const l=[],d=[];let u=Qt();for(const h of r){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){d.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(s,u).next((h=>({Ls:h,removedBatchIds:l,addedBatchIds:d})))}))}))}function pJ(t,e){const n=vt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,u,h,f){const p=h.batch,x=p.keys();let b=je.resolve();return x.forEach((_=>{b=b.next((()=>f.getEntry(u,_))).next((j=>{const v=h.docVersions.get(_);wn(v!==null,48541),j.version.compareTo(v)<0&&(p.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),f.addEntry(j)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(u,p)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let u=Qt();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(u=u.add(d.batch.mutations[h].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function u6(t){const e=vt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function gJ(t,e){const n=vt(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const d=[];e.targetChanges.forEach(((f,p)=>{const x=r.get(p);if(!x)return;d.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let b=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(br.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):f.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(f.resumeToken,s)),r=r.insert(p,b),(function(j,v,T){return j.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=hJ?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(x,b,f)&&d.push(n.Pi.updateTargetData(i,b))}));let u=jl(),h=Qt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),d.push(xJ(i,l,e.documentUpdates).next((f=>{u=f.ks,h=f.qs}))),!s.isEqual(xt.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));d.push(f)}return je.waitFor(d).next((()=>l.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,h))).next((()=>u))})).then((i=>(n.Ms=r,i)))}function xJ(t,e,n){let s=Qt(),r=Qt();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let l=jl();return n.forEach(((d,u)=>{const h=i.get(d);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(d)),u.isNoDocument()&&u.version.isEqual(xt.min())?(e.removeEntry(d,u.readTime),l=l.insert(d,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),l=l.insert(d,u)):He(KN,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",u.version)})),{ks:l,qs:r}}))}function yJ(t,e){const n=vt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=IN),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function bJ(t,e){const n=vt(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,je.resolve(r)):n.Pi.allocateTargetId(s).next((l=>(r=new yc(e,l,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function DE(t,e,n){const s=vt(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(l=>s.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!om(l))throw l;He(KN,`Failed to update sequence numbers for target ${e}: ${l}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function $D(t,e,n){const s=vt(t);let r=xt.min(),i=Qt();return s.persistence.runTransaction("Execute query","readwrite",(l=>(function(u,h,f){const p=vt(u),x=p.xs.get(f);return x!==void 0?je.resolve(p.Ms.get(x)):p.Pi.getTargetData(h,f)})(s,l,ho(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(l,d.targetId).next((u=>{i=u}))})).next((()=>s.Fs.getDocumentsMatchingQuery(l,e,n?r:xt.min(),n?i:Qt()))).next((d=>(vJ(s,aZ(e),d),{documents:d,Qs:i})))))}function vJ(t,e,n){let s=t.Os.get(e)||xt.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class zD{constructor(){this.activeTargetIds=uZ()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wJ{constructor(){this.Mo=new zD,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new zD,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _J{Oo(e){}shutdown(){}}const HD="ConnectivityMonitor";class qD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){He(HD,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){He(HD,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let z0=null;function PE(){return z0===null?z0=(function(){return 268435456+Math.round(2147483648*Math.random())})():z0++,"0x"+z0.toString(16)}const q_="RestConnection",EJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class NJ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===sy?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const l=PE(),d=this.zo(e,n.toUriEncodedString());He(q_,`Sending RPC '${e}' ${l}:`,d,s);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,r,i);const{host:h}=new URL(d),f=jo(h);return this.Jo(e,d,u,s,f).then((p=>(He(q_,`Received RPC '${e}' ${l}: `,p),p)),(p=>{throw _p(q_,`RPC '${e}' ${l} failed with error: `,p,"url: ",d,"request:",s),p}))}Ho(e,n,s,r,i,l){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+am})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=EJ[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class jJ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Cr="WebChannelConnection";class CJ extends NJ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const l=PE();return new Promise(((d,u)=>{const h=new pO;h.setWithCredentials(!0),h.listenOnce(gO.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ex.NO_ERROR:const p=h.getResponseJson();He(Cr,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(p)),d(p);break;case Ex.TIMEOUT:He(Cr,`RPC '${e}' ${l} timed out`),u(new Le(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Ex.HTTP_ERROR:const x=h.getStatus();if(He(Cr,`RPC '${e}' ${l} failed with status:`,x,"response text:",h.getResponseText()),x>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const _=b?.error;if(_&&_.status&&_.message){const j=(function(T){const P=T.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(P)>=0?P:xe.UNKNOWN})(_.status);u(new Le(j,_.message))}else u(new Le(xe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Le(xe.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{l_:e,streamId:l,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{He(Cr,`RPC '${e}' ${l} completed.`)}}));const f=JSON.stringify(r);He(Cr,`RPC '${e}' ${l} sending request:`,r),h.send(n,"POST",f,s,15)}))}T_(e,n,s){const r=PE(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=bO(),d=yO(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,s),u.encodeInitMessageHeaders=!0;const f=i.join("");He(Cr,`Creating RPC '${e}' stream ${r}: ${f}`,u);const p=l.createWebChannel(f,u);this.I_(p);let x=!1,b=!1;const _=new jJ({Yo:v=>{b?He(Cr,`Not sending because RPC '${e}' stream ${r} is closed:`,v):(x||(He(Cr,`Opening RPC '${e}' stream ${r} transport.`),p.open(),x=!0),He(Cr,`RPC '${e}' stream ${r} sending:`,v),p.send(v))},Zo:()=>p.close()}),j=(v,T,P)=>{v.listen(T,(A=>{try{P(A)}catch(C){setTimeout((()=>{throw C}),0)}}))};return j(p,Df.EventType.OPEN,(()=>{b||(He(Cr,`RPC '${e}' stream ${r} transport opened.`),_.o_())})),j(p,Df.EventType.CLOSE,(()=>{b||(b=!0,He(Cr,`RPC '${e}' stream ${r} transport closed`),_.a_(),this.E_(p))})),j(p,Df.EventType.ERROR,(v=>{b||(b=!0,_p(Cr,`RPC '${e}' stream ${r} transport errored. Name:`,v.name,"Message:",v.message),_.a_(new Le(xe.UNAVAILABLE,"The operation could not be completed")))})),j(p,Df.EventType.MESSAGE,(v=>{if(!b){const T=v.data[0];wn(!!T,16349);const P=T,A=P?.error||P[0]?.error;if(A){He(Cr,`RPC '${e}' stream ${r} received error:`,A);const C=A.status;let M=(function(R){const S=Os[R];if(S!==void 0)return XO(S)})(C),L=A.message;M===void 0&&(M=xe.INTERNAL,L="Unknown error status: "+C+" with message "+A.message),b=!0,_.a_(new Le(M,L)),p.close()}else He(Cr,`RPC '${e}' stream ${r} received:`,T),_.u_(T)}})),j(d,xO.STAT_EVENT,(v=>{v.stat===wE.PROXY?He(Cr,`RPC '${e}' stream ${r} detected buffering proxy`):v.stat===wE.NOPROXY&&He(Cr,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function W_(){return typeof document<"u"?document:null}function Ab(t){return new RZ(t,!0)}class h6{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&He("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const WD="PersistentStream";class m6{constructor(e,n,s,r,i,l,d,u){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new h6(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(Nl(n.toString()),Nl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new Le(xe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return He(WD,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(He(WD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SJ extends m6{constructor(e,n,s,r,i,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,l),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=MZ(this.serializer,e),s=(function(i){if(!("targetChange"in i))return xt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?xt.min():l.readTime?mo(l.readTime):xt.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=RE(this.serializer),n.addTarget=(function(i,l){let d;const u=l.target;if(d=CE(u)?{documents:OZ(i,u)}:{query:VZ(i,u).ft},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=e6(i,l.resumeToken);const h=TE(i,l.expectedCount);h!==null&&(d.expectedCount=h)}else if(l.snapshotVersion.compareTo(xt.min())>0){d.readTime=cy(i,l.snapshotVersion.toTimestamp());const h=TE(i,l.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const s=BZ(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=RE(this.serializer),n.removeTarget=e,this.q_(n)}}class TJ extends m6{constructor(e,n,s,r,i,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,l),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return wn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=IZ(e.writeResults,e.commitTime),s=mo(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=RE(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>LZ(this.serializer,s)))};this.q_(n)}}class kJ{}class AJ extends kJ{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Le(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,l])=>this.connection.Go(e,kE(n,s),r,i,l))).catch((i=>{throw i.name==="FirebaseError"?(i.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(xe.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Ho(e,kE(n,s),r,l,d,i))).catch((l=>{throw l.name==="FirebaseError"?(l.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Le(xe.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class RJ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nl(n),this.aa=!1):He("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Gd="RemoteStore";class DJ{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((l=>{s.enqueueAndForget((async()=>{iu(this)&&(He(Gd,"Restarting streams for network reachability change."),await(async function(u){const h=vt(u);h.Ea.add(4),await ng(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Rb(h)})(this))}))})),this.Ra=new RJ(s,r)}}async function Rb(t){if(iu(t))for(const e of t.da)await e(!0)}async function ng(t){for(const e of t.da)await e(!1)}function f6(t,e){const n=vt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),JN(n)?ZN(n):lm(n).O_()&&XN(n,e))}function QN(t,e){const n=vt(t),s=lm(n);n.Ia.delete(e),s.O_()&&p6(n,e),n.Ia.size===0&&(s.O_()?s.L_():iu(n)&&n.Ra.set("Unknown"))}function XN(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lm(t).Y_(e)}function p6(t,e){t.Va.Ue(e),lm(t).Z_(e)}function ZN(t){t.Va=new SZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),lm(t).start(),t.Ra.ua()}function JN(t){return iu(t)&&!lm(t).x_()&&t.Ia.size>0}function iu(t){return vt(t).Ea.size===0}function g6(t){t.Va=void 0}async function PJ(t){t.Ra.set("Online")}async function MJ(t){t.Ia.forEach(((e,n)=>{XN(t,e)}))}async function LJ(t,e){g6(t),JN(t)?(t.Ra.ha(e),ZN(t)):t.Ra.set("Unknown")}async function IJ(t,e,n){if(t.Ra.set("Online"),e instanceof JO&&e.state===2&&e.cause)try{await(async function(r,i){const l=i.cause;for(const d of i.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,l),r.Ia.delete(d),r.Va.removeTarget(d))})(t,e)}catch(s){He(Gd,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await uy(t,s)}else if(e instanceof Sx?t.Va.Ze(e):e instanceof ZO?t.Va.st(e):t.Va.tt(e),!n.isEqual(xt.min()))try{const s=await u6(t.localStore);n.compareTo(s)>=0&&await(function(i,l){const d=i.Va.Tt(l);return d.targetChanges.forEach(((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(u.resumeToken,l))}})),d.targetMismatches.forEach(((u,h)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(br.EMPTY_BYTE_STRING,f.snapshotVersion)),p6(i,u);const p=new yc(f.target,u,h,f.sequenceNumber);XN(i,p)})),i.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(s){He(Gd,"Failed to raise snapshot:",s),await uy(t,s)}}async function uy(t,e,n){if(!om(e))throw e;t.Ea.add(1),await ng(t),t.Ra.set("Offline"),n||(n=()=>u6(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{He(Gd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Rb(t)}))}function x6(t,e){return e().catch((n=>uy(t,n,e)))}async function Db(t){const e=vt(t),n=Mc(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:IN;for(;OJ(e);)try{const r=await yJ(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,VJ(e,r)}catch(r){await uy(e,r)}y6(e)&&b6(e)}function OJ(t){return iu(t)&&t.Ta.length<10}function VJ(t,e){t.Ta.push(e);const n=Mc(t);n.O_()&&n.X_&&n.ea(e.mutations)}function y6(t){return iu(t)&&!Mc(t).x_()&&t.Ta.length>0}function b6(t){Mc(t).start()}async function UJ(t){Mc(t).ra()}async function BJ(t){const e=Mc(t);for(const n of t.Ta)e.ea(n.mutations)}async function FJ(t,e,n){const s=t.Ta.shift(),r=zN.from(s,e,n);await x6(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Db(t)}async function $J(t,e){e&&Mc(t).X_&&await(async function(s,r){if((function(l){return NZ(l)&&l!==xe.ABORTED})(r.code)){const i=s.Ta.shift();Mc(s).B_(),await x6(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await Db(s)}})(t,e),y6(t)&&b6(t)}async function YD(t,e){const n=vt(t);n.asyncQueue.verifyOperationInProgress(),He(Gd,"RemoteStore received new credentials");const s=iu(n);n.Ea.add(3),await ng(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Rb(n)}async function zJ(t,e){const n=vt(t);e?(n.Ea.delete(2),await Rb(n)):e||(n.Ea.add(2),await ng(n),n.Ra.set("Unknown"))}function lm(t){return t.ma||(t.ma=(function(n,s,r){const i=vt(n);return i.sa(),new SJ(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:PJ.bind(null,t),t_:MJ.bind(null,t),r_:LJ.bind(null,t),H_:IJ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),JN(t)?ZN(t):t.Ra.set("Unknown")):(await t.ma.stop(),g6(t))}))),t.ma}function Mc(t){return t.fa||(t.fa=(function(n,s,r){const i=vt(n);return i.sa(),new TJ(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:UJ.bind(null,t),r_:$J.bind(null,t),ta:BJ.bind(null,t),na:FJ.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Db(t)):(await t.fa.stop(),t.Ta.length>0&&(He(Gd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class ej{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new hl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const l=Date.now()+s,d=new ej(e,n,l,r,i);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Le(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tj(t,e){if(Nl("AsyncQueue",`${e}: ${t}`),om(t))return new Le(xe.UNAVAILABLE,`${e}: ${t}`);throw t}class Eh{static emptySet(e){return new Eh(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||nt.comparator(n.key,s.key):(n,s)=>nt.comparator(n.key,s.key),this.keyedMap=Pf(),this.sortedSet=new is(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Eh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class GD{constructor(){this.ga=new is(nt.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ot(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Uh{constructor(e,n,s,r,i,l,d,u,h){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,s,r,i){const l=[];return n.forEach((d=>{l.push({type:0,doc:d})})),new Uh(e,n,Eh.emptySet(n),l,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}class HJ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qJ{constructor(){this.queries=KD(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=vt(n),i=r.queries;r.queries=KD(),i.forEach(((l,d)=>{for(const u of d.Sa)u.onError(s)}))})(this,new Le(xe.ABORTED,"Firestore shutting down"))}}function KD(){return new au((t=>UO(t)),jb)}async function nj(t,e){const n=vt(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new HJ,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const d=tj(l,`Initialization of query '${eh(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&rj(n)}async function sj(t,e){const n=vt(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const l=i.Sa.indexOf(e);l>=0&&(i.Sa.splice(l,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function WJ(t,e){const n=vt(t);let s=!1;for(const r of e){const i=r.query,l=n.queries.get(i);if(l){for(const d of l.Sa)d.Fa(r)&&(s=!0);l.wa=r}}s&&rj(n)}function YJ(t,e,n){const s=vt(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function rj(t){t.Ca.forEach((e=>{e.next()}))}var ME,QD;(QD=ME||(ME={})).Ma="default",QD.Cache="cache";class aj{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Uh(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Uh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ME.Cache}}class v6{constructor(e){this.key=e}}class w6{constructor(e){this.key=e}}class GJ{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qt(),this.mutatedKeys=Qt(),this.eu=BO(e),this.tu=new Eh(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new GD,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,l=r,d=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((f,p)=>{const x=r.get(f),b=Cb(this.query,p)?p:null,_=!!x&&this.mutatedKeys.has(x.key),j=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let v=!1;x&&b?x.data.isEqual(b.data)?_!==j&&(s.track({type:3,doc:b}),v=!0):this.su(x,b)||(s.track({type:2,doc:b}),v=!0,(u&&this.eu(b,u)>0||h&&this.eu(b,h)<0)&&(d=!0)):!x&&b?(s.track({type:0,doc:b}),v=!0):x&&!b&&(s.track({type:1,doc:x}),v=!0,(u||h)&&(d=!0)),v&&(b?(l=l.add(b),i=j?i.add(f):i.delete(f)):(l=l.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const f=this.query.limitType==="F"?l.last():l.first();l=l.delete(f.key),i=i.delete(f.key),s.track({type:1,doc:f})}return{tu:l,iu:s,Cs:d,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((f,p)=>(function(b,_){const j=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Rt:v})}};return j(b)-j(_)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(s),r=r??!1;const d=n&&!r?this._u():[],u=this.Xa.size===0&&this.current&&!r?1:0,h=u!==this.Za;return this.Za=u,l.length!==0||h?{snapshot:new Uh(this.query,e.tu,i,l,e.mutatedKeys,u===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new GD,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new w6(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new v6(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Qt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Uh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ij="SyncEngine";class KJ{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class QJ{constructor(e){this.key=e,this.hu=!1}}class XJ{constructor(e,n,s,r,i,l){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new au((d=>UO(d)),jb),this.Iu=new Map,this.Eu=new Set,this.du=new is(nt.comparator),this.Au=new Map,this.Ru=new WN,this.Vu={},this.mu=new Map,this.fu=Vh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZJ(t,e,n=!0){const s=S6(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await _6(s,e,n,!0),r}async function JJ(t,e){const n=S6(t);await _6(n,e,!0,!1)}async function _6(t,e,n,s){const r=await bJ(t.localStore,ho(e)),i=r.targetId,l=t.sharedClientState.addLocalQueryTarget(i,n);let d;return s&&(d=await eee(t,e,i,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&f6(t.remoteStore,r),d}async function eee(t,e,n,s,r){t.pu=(p,x,b)=>(async function(j,v,T,P){let A=v.view.ru(T);A.Cs&&(A=await $D(j.localStore,v.query,!1).then((({documents:k})=>v.view.ru(k,A))));const C=P&&P.targetChanges.get(v.targetId),M=P&&P.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(A,j.isPrimaryClient,C,M);return ZD(j,v.targetId,L.au),L.snapshot})(t,p,x,b);const i=await $D(t.localStore,e,!0),l=new GJ(e,i.Qs),d=l.ru(i.documents),u=tg.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),h=l.applyChanges(d,t.isPrimaryClient,u);ZD(t,n,h.au);const f=new KJ(e,n,l);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function tee(t,e,n){const s=vt(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((l=>!jb(l,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await DE(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&QN(s.remoteStore,r.targetId),LE(s,r.targetId)})).catch(im)):(LE(s,r.targetId),await DE(s.localStore,r.targetId,!0))}async function nee(t,e){const n=vt(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),QN(n.remoteStore,s.targetId))}async function see(t,e,n){const s=dee(t);try{const r=await(function(l,d){const u=vt(l),h=Ve.now(),f=d.reduce(((b,_)=>b.add(_.key)),Qt());let p,x;return u.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let _=jl(),j=Qt();return u.Ns.getEntries(b,f).next((v=>{_=v,_.forEach(((T,P)=>{P.isValidDocument()||(j=j.add(T))}))})).next((()=>u.localDocuments.getOverlayedDocuments(b,_))).next((v=>{p=v;const T=[];for(const P of d){const A=bZ(P,p.get(P.key).overlayedDocument);A!=null&&T.push(new Kc(P.key,A,DO(A.value.mapValue),Za.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,T,d)})).next((v=>{x=v;const T=v.applyToLocalDocumentSet(p,j);return u.documentOverlayCache.saveOverlays(b,v.batchId,T)}))})).then((()=>({batchId:x.batchId,changes:$O(p)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(l,d,u){let h=l.Vu[l.currentUser.toKey()];h||(h=new is(Kt)),h=h.insert(d,u),l.Vu[l.currentUser.toKey()]=h})(s,r.batchId,n),await sg(s,r.changes),await Db(s.remoteStore)}catch(r){const i=tj(r,"Failed to persist write");n.reject(i)}}async function E6(t,e){const n=vt(t);try{const s=await gJ(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const l=n.Au.get(i);l&&(wn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?wn(l.hu,14607):r.removedDocuments.size>0&&(wn(l.hu,42227),l.hu=!1))})),await sg(n,s,e)}catch(s){await im(s)}}function XD(t,e,n){const s=vt(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,l)=>{const d=l.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(l,d){const u=vt(l);u.onlineState=d;let h=!1;u.queries.forEach(((f,p)=>{for(const x of p.Sa)x.va(d)&&(h=!0)})),h&&rj(u)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function ree(t,e,n){const s=vt(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let l=new is(nt.comparator);l=l.insert(i,Ar.newNoDocument(i,xt.min()));const d=Qt().add(i),u=new kb(xt.min(),new Map,new is(Kt),l,d);await E6(s,u),s.du=s.du.remove(i),s.Au.delete(e),oj(s)}else await DE(s.localStore,e,!1).then((()=>LE(s,e,n))).catch(im)}async function aee(t,e){const n=vt(t),s=e.batch.batchId;try{const r=await pJ(n.localStore,e);j6(n,s,null),N6(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await sg(n,r)}catch(r){await im(r)}}async function iee(t,e,n){const s=vt(t);try{const r=await(function(l,d){const u=vt(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let f;return u.mutationQueue.lookupMutationBatch(h,d).next((p=>(wn(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(h,p)))).next((()=>u.mutationQueue.performConsistencyCheck(h))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,d))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f))).next((()=>u.localDocuments.getDocuments(h,f)))}))})(s.localStore,e);j6(s,e,n),N6(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await sg(s,r)}catch(r){await im(r)}}function N6(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function j6(t,e,n){const s=vt(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function LE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||C6(t,s)}))}function C6(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(QN(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),oj(t))}function ZD(t,e,n){for(const s of n)s instanceof v6?(t.Ru.addReference(s.key,e),oee(t,s)):s instanceof w6?(He(ij,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||C6(t,s.key)):ot(19791,{wu:s})}function oee(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(He(ij,"New document in limbo: "+n),t.Eu.add(s),oj(t))}function oj(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new nt(Fn.fromString(e)),s=t.fu.next();t.Au.set(s,new QJ(n)),t.du=t.du.insert(n,s),f6(t.remoteStore,new yc(ho(Nb(n.path)),s,"TargetPurposeLimboResolution",vb.ce))}}async function sg(t,e,n){const s=vt(t),r=[],i=[],l=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,u)=>{l.push(s.pu(u,e,n).then((h=>{if((h||n)&&s.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(u.targetId)?.current;s.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(h){r.push(h);const f=GN.As(u.targetId,h);i.push(f)}})))})),await Promise.all(l),s.Pu.H_(r),await(async function(u,h){const f=vt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>je.forEach(h,(x=>je.forEach(x.Es,(b=>f.persistence.referenceDelegate.addReference(p,x.targetId,b))).next((()=>je.forEach(x.ds,(b=>f.persistence.referenceDelegate.removeReference(p,x.targetId,b)))))))))}catch(p){if(!om(p))throw p;He(KN,"Failed to update sequence numbers: "+p)}for(const p of h){const x=p.targetId;if(!p.fromCache){const b=f.Ms.get(x),_=b.snapshotVersion,j=b.withLastLimboFreeSnapshotVersion(_);f.Ms=f.Ms.insert(x,j)}}})(s.localStore,i))}async function lee(t,e){const n=vt(t);if(!n.currentUser.isEqual(e)){He(ij,"User change. New user:",e.toKey());const s=await d6(n.localStore,e);n.currentUser=e,(function(i,l){i.mu.forEach((d=>{d.forEach((u=>{u.reject(new Le(xe.CANCELLED,l))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await sg(n,s.Ls)}}function cee(t,e){const n=vt(t),s=n.Au.get(e);if(s&&s.hu)return Qt().add(s.key);{let r=Qt();const i=n.Iu.get(e);if(!i)return r;for(const l of i){const d=n.Tu.get(l);r=r.unionWith(d.view.nu)}return r}}function S6(t){const e=vt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=E6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ree.bind(null,e),e.Pu.H_=WJ.bind(null,e.eventManager),e.Pu.yu=YJ.bind(null,e.eventManager),e}function dee(t){const e=vt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iee.bind(null,e),e}class hy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ab(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return fJ(this.persistence,new uJ,e.initialUser,this.serializer)}Cu(e){return new c6(YN.mi,this.serializer)}Du(e){return new wJ}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hy.provider={build:()=>new hy};class uee extends hy{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){wn(this.persistence.referenceDelegate instanceof dy,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new QZ(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?aa.withCacheSize(this.cacheSizeBytes):aa.DEFAULT;return new c6((s=>dy.mi(s,n)),this.serializer)}}class IE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>XD(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=lee.bind(null,this.syncEngine),await zJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qJ})()}createDatastore(e){const n=Ab(e.databaseInfo.databaseId),s=(function(i){return new CJ(i)})(e.databaseInfo);return(function(i,l,d,u){return new AJ(i,l,d,u)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,l,d){return new DJ(s,r,i,l,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>XD(this.syncEngine,n,0)),(function(){return qD.v()?new qD:new _J})())}createSyncEngine(e,n){return(function(r,i,l,d,u,h,f){const p=new XJ(r,i,l,d,u,h);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=vt(n);He(Gd,"RemoteStore shutting down."),s.Ea.add(5),await ng(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}IE.provider={build:()=>new IE};class lj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Lc="FirestoreClient";class hee{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=ra.UNAUTHENTICATED,this.clientId=LN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async l=>{He(Lc,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(s,(l=>(He(Lc,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=tj(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Y_(t,e){t.asyncQueue.verifyOperationInProgress(),He(Lc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await d6(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function JD(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mee(t);He(Lc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>YD(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>YD(e.remoteStore,r))),t._onlineComponents=e}async function mee(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){He(Lc,"Using user provided OfflineComponentProvider");try{await Y_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===xe.FAILED_PRECONDITION||r.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;_p("Error using user provided cache. Falling back to memory cache: "+n),await Y_(t,new hy)}}else He(Lc,"Using default OfflineComponentProvider"),await Y_(t,new uee(void 0));return t._offlineComponents}async function T6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(He(Lc,"Using user provided OnlineComponentProvider"),await JD(t,t._uninitializedComponentsProvider._online)):(He(Lc,"Using default OnlineComponentProvider"),await JD(t,new IE))),t._onlineComponents}function fee(t){return T6(t).then((e=>e.syncEngine))}async function my(t){const e=await T6(t),n=e.eventManager;return n.onListen=ZJ.bind(null,e.syncEngine),n.onUnlisten=tee.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JJ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nee.bind(null,e.syncEngine),n}function pee(t,e,n={}){const s=new hl;return t.asyncQueue.enqueueAndForget((async()=>(function(i,l,d,u,h){const f=new lj({next:x=>{f.Nu(),l.enqueueAndForget((()=>sj(i,p)));const b=x.docs.has(d);!b&&x.fromCache?h.reject(new Le(xe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&x.fromCache&&u&&u.source==="server"?h.reject(new Le(xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new aj(Nb(d.path),f,{includeMetadataChanges:!0,qa:!0});return nj(i,p)})(await my(t),t.asyncQueue,e,n,s))),s.promise}function gee(t,e,n={}){const s=new hl;return t.asyncQueue.enqueueAndForget((async()=>(function(i,l,d,u,h){const f=new lj({next:x=>{f.Nu(),l.enqueueAndForget((()=>sj(i,p))),x.fromCache&&u.source==="server"?h.reject(new Le(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),p=new aj(d,f,{includeMetadataChanges:!0,qa:!0});return nj(i,p)})(await my(t),t.asyncQueue,e,n,s))),s.promise}function k6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const e4=new Map;const xee="firestore.googleapis.com",t4=!0;class n4{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Le(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xee,this.ssl=t4}else this.host=e.host,this.ssl=e.ssl??t4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=o6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l6)throw new Le(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DX("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k6(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Le(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Le(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Le(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cj{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n4({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Le(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Le(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n4(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new EX;switch(s.type){case"firstParty":return new CX(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Le(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=e4.get(n);s&&(He("ComponentProvider","Removing Datastore"),e4.delete(n),s.terminate())})(this),Promise.resolve()}}class ki{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class ps{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ps(this.firestore,e,this._key)}toJSON(){return{type:ps._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Jp(n,ps._jsonSchema))return new ps(e,s||null,new nt(Fn.fromString(n.referencePath)))}}ps._jsonSchemaVersion="firestore/documentReference/1.0",ps._jsonSchema={type:Bs("string",ps._jsonSchemaVersion),referencePath:Bs("string")};class jc extends ki{constructor(e,n,s){super(e,n,Nb(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ps(this.firestore,null,new nt(e))}withConverter(e){return new jc(this.firestore,e,this._path)}}function Ke(t,e,...n){if(t=mn(t),wO("collection","path",e),t instanceof cj){const s=Fn.fromString(e,...n);return gD(s),new jc(t,null,s)}{if(!(t instanceof ps||t instanceof jc))throw new Le(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Fn.fromString(e,...n));return gD(s),new jc(t.firestore,null,s)}}function mt(t,e,...n){if(t=mn(t),arguments.length===1&&(e=LN.newId()),wO("doc","path",e),t instanceof cj){const s=Fn.fromString(e,...n);return pD(s),new ps(t,null,new nt(s))}{if(!(t instanceof ps||t instanceof jc))throw new Le(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Fn.fromString(e,...n));return pD(s),new ps(t.firestore,t instanceof jc?t.converter:null,new nt(s))}}const s4="AsyncQueue";class r4{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new h6(this,"async_queue_retry"),this._c=()=>{const s=W_();s&&He(s4,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=W_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=W_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!om(e))throw e;He(s4,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Nl("INTERNAL UNHANDLED ERROR: ",a4(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=ej.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&ot(47125,{Pc:a4(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function a4(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function i4(t){return(function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Cl extends cj{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new r4,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r4(e),this._firestoreClient=void 0,await e}}}function yee(t,e,n){n||(n=sy);const s=Gp(t,"firestore");if(s.isInitialized(n)){const r=s.getImmediate({identifier:n}),i=s.getOptions(n);if(Tc(i,e))return r;throw new Le(xe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Le(xe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l6)throw new Le(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&jo(e.host)&&fb(e.host),s.initialize({options:e,instanceIdentifier:n})}function Pb(t){if(t._terminated)throw new Le(xe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bee(t),t._firestoreClient}function bee(t){const e=t._freezeSettings(),n=(function(r,i,l,d){return new zX(r,i,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,k6(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new hee(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const i=r?._online.build();return{_offline:r?._offline.build(i),_online:i}})(t._componentsProvider))}class Ya{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ya(br.fromBase64String(e))}catch(n){throw new Le(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ya(br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ya._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jp(e,Ya._jsonSchema))return Ya.fromBase64String(e.bytes)}}Ya._jsonSchemaVersion="firestore/bytes/1.0",Ya._jsonSchema={type:Bs("string",Ya._jsonSchemaVersion),bytes:Bs("string")};class Mb{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Le(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lb{constructor(e){this._methodName=e}}class vi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Le(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Le(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vi._jsonSchemaVersion}}static fromJSON(e){if(Jp(e,vi._jsonSchema))return new vi(e.latitude,e.longitude)}}vi._jsonSchemaVersion="firestore/geoPoint/1.0",vi._jsonSchema={type:Bs("string",vi._jsonSchemaVersion),latitude:Bs("number"),longitude:Bs("number")};class fo{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jp(e,fo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new fo(e.vectorValues);throw new Le(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fo._jsonSchemaVersion="firestore/vectorValue/1.0",fo._jsonSchema={type:Bs("string",fo._jsonSchemaVersion),vectorValues:Bs("object")};const vee=/^__.*__$/;class wee{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Kc(e,this.data,this.fieldMask,n,this.fieldTransforms):new eg(e,this.data,n,this.fieldTransforms)}}class A6{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Kc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function R6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot(40011,{Ac:t})}}class Ib{constructor(e,n,s,r,i,l){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ib({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(R6(this.Ac)&&vee.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class _ee{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Ab(e)}Cc(e,n,s,r=!1){return new Ib({Ac:e,methodName:n,Dc:s,path:xr.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rg(t){const e=t._freezeSettings(),n=Ab(t._databaseId);return new _ee(t._databaseId,!!e.ignoreUndefinedProperties,n)}function D6(t,e,n,s,r,i={}){const l=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);uj("Data must be an object, but it was:",l,s);const d=M6(s,l);let u,h;if(i.merge)u=new Na(l.fieldMask),h=l.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const x=OE(e,p,n);if(!l.contains(x))throw new Le(xe.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);I6(f,x)||f.push(x)}u=new Na(f),h=l.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,h=l.fieldTransforms;return new wee(new oa(d),u,h)}class Ob extends Lb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ob}}function Eee(t,e,n){return new Ib({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class dj extends Lb{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Eee(this,e,!0),s=this.vc.map((i=>cm(i,n))),r=new Oh(s);return new pZ(e.path,r)}isEqual(e){return e instanceof dj&&Tc(this.vc,e.vc)}}function Nee(t,e,n,s){const r=t.Cc(1,e,n);uj("Data must be an object, but it was:",r,s);const i=[],l=oa.empty();Yc(s,((u,h)=>{const f=hj(e,u,n);h=mn(h);const p=r.yc(f);if(h instanceof Ob)i.push(f);else{const x=cm(h,p);x!=null&&(i.push(f),l.set(f,x))}}));const d=new Na(i);return new A6(l,d,r.fieldTransforms)}function jee(t,e,n,s,r,i){const l=t.Cc(1,e,n),d=[OE(e,s,n)],u=[r];if(i.length%2!=0)throw new Le(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)d.push(OE(e,i[x])),u.push(i[x+1]);const h=[],f=oa.empty();for(let x=d.length-1;x>=0;--x)if(!I6(h,d[x])){const b=d[x];let _=u[x];_=mn(_);const j=l.yc(b);if(_ instanceof Ob)h.push(b);else{const v=cm(_,j);v!=null&&(h.push(b),f.set(b,v))}}const p=new Na(h);return new A6(f,p,l.fieldTransforms)}function P6(t,e,n,s=!1){return cm(n,t.Cc(s?4:3,e))}function cm(t,e){if(L6(t=mn(t)))return uj("Unsupported field value:",e,t),M6(t,e);if(t instanceof Lb)return(function(s,r){if(!R6(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let l=0;for(const d of s){let u=cm(d,r.wc(l));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),l++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=mn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return hZ(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ve.fromDate(s);return{timestampValue:cy(r.serializer,i)}}if(s instanceof Ve){const i=new Ve(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:cy(r.serializer,i)}}if(s instanceof vi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ya)return{bytesValue:e6(r.serializer,s._byteString)};if(s instanceof ps){const i=r.databaseId,l=s.firestore._databaseId;if(!l.isEqual(i))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:qN(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof fo)return(function(l,d){return{mapValue:{fields:{[AO]:{stringValue:RO},[ry]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return FN(d.serializer,h)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${bb(s)}`)})(t,e)}function M6(t,e){const n={};return NO(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yc(t,((s,r)=>{const i=cm(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function L6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof vi||t instanceof Ya||t instanceof ps||t instanceof Lb||t instanceof fo)}function uj(t,e,n){if(!L6(n)||!_O(n)){const s=bb(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function OE(t,e,n){if((e=mn(e))instanceof Mb)return e._internalPath;if(typeof e=="string")return hj(t,e);throw fy("Field path arguments must be of type string or ",t,!1,void 0,n)}const Cee=new RegExp("[~\\*/\\[\\]]");function hj(t,e,n){if(e.search(Cee)>=0)throw fy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mb(...e.split("."))._internalPath}catch{throw fy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fy(t,e,n,s,r){const i=s&&!s.isEmpty(),l=r!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let u="";return(i||l)&&(u+=" (found",i&&(u+=` in field ${s}`),l&&(u+=` in document ${r}`),u+=")"),new Le(xe.INVALID_ARGUMENT,d+t+u)}function I6(t,e){return t.some((n=>n.isEqual(e)))}class mj{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ps(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new See(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class See extends mj{data(){return super.data()}}function Vb(t,e){return typeof e=="string"?hj(t,e):e instanceof Mb?e._internalPath:e._delegate._internalPath}function O6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Le(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fj{}class ag extends fj{}function Ct(t,e,...n){let s=[];e instanceof fj&&s.push(e),s=s.concat(n),(function(i){const l=i.filter((u=>u instanceof pj)).length,d=i.filter((u=>u instanceof Ub)).length;if(l>1||l>0&&d>0)throw new Le(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)t=r._apply(t);return t}class Ub extends ag{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Ub(e,n,s)}_apply(e){const n=this._parse(e);return U6(e._query,n),new ki(e.firestore,e.converter,SE(e._query,n))}_parse(e){const n=rg(e.firestore);return(function(i,l,d,u,h,f,p){let x;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Le(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){l4(p,f);const _=[];for(const j of p)_.push(o4(u,i,j));x={arrayValue:{values:_}}}else x=o4(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||l4(p,f),x=P6(d,l,p,f==="in"||f==="not-in");return Us.create(h,f,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ge(t,e,n){const s=e,r=Vb("where",t);return Ub._create(r,s,n)}class pj extends fj{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pj(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ni.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,i){let l=r;const d=i.getFlattenedFilters();for(const u of d)U6(l,u),l=SE(l,u)})(e._query,n),new ki(e.firestore,e.converter,SE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gj extends ag{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gj(e,n)}_apply(e){const n=(function(r,i,l){if(r.startAt!==null)throw new Le(xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Le(xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sp(i,l)})(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,(function(r,i){const l=r.explicitOrderBy.concat([i]);return new Gc(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function da(t,e="asc"){const n=e,s=Vb("orderBy",t);return gj._create(s,n)}class xj extends ag{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new xj(e,n,s)}_apply(e){return new ki(e.firestore,e.converter,iy(e._query,this._limit,this._limitType))}}function Nh(t){return xj._create("limit",t,"F")}class yj extends ag{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new yj(e,n,s)}_apply(e){const n=V6(e,this.type,this._docOrFields,this._inclusive);return new ki(e.firestore,e.converter,(function(r,i){return new Gc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)})(e._query,n))}}function Tee(...t){return yj._create("startAt",t,!0)}class bj extends ag{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new bj(e,n,s)}_apply(e){const n=V6(e,this.type,this._docOrFields,this._inclusive);return new ki(e.firestore,e.converter,(function(r,i){return new Gc(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)})(e._query,n))}}function kee(...t){return bj._create("endAt",t,!0)}function V6(t,e,n,s){if(n[0]=mn(n[0]),n[0]instanceof mj)return(function(i,l,d,u,h){if(!u)throw new Le(xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const f=[];for(const p of _h(i))if(p.field.isKeyField())f.push(ay(l,u.key));else{const x=u.data.field(p.field);if(_b(x))throw new Le(xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const b=p.field.canonicalString();throw new Le(xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${b}' (used as the orderBy) does not exist.`)}f.push(x)}return new Ih(f,h)})(t._query,t.firestore._databaseId,e,n[0]._document,s);{const r=rg(t.firestore);return(function(l,d,u,h,f,p){const x=l.explicitOrderBy;if(f.length>x.length)throw new Le(xe.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const b=[];for(let _=0;_<f.length;_++){const j=f[_];if(x[_].field.isKeyField()){if(typeof j!="string")throw new Le(xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof j}`);if(!BN(l)&&j.indexOf("/")!==-1)throw new Le(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${j}' contains a slash.`);const v=l.path.child(Fn.fromString(j));if(!nt.isDocumentKey(v))throw new Le(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const T=new nt(v);b.push(ay(d,T))}else{const v=P6(u,h,j);b.push(v)}}return new Ih(b,p)})(t._query,t.firestore._databaseId,r,e,n,s)}}function o4(t,e,n){if(typeof(n=mn(n))=="string"){if(n==="")throw new Le(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BN(e)&&n.indexOf("/")!==-1)throw new Le(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Fn.fromString(n));if(!nt.isDocumentKey(s))throw new Le(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ay(t,new nt(s))}if(n instanceof ps)return ay(t,n._key);throw new Le(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bb(n)}.`)}function l4(t,e){if(!Array.isArray(t)||t.length===0)throw new Le(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U6(t,e){const n=(function(r,i){for(const l of r)for(const d of l.getFlattenedFilters())if(i.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Le(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Le(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Aee{convertValue(e,n="none"){switch(Pc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _s(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ot(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Yc(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){const n=e.fields?.[ry].arrayValue?.values?.map((s=>_s(s.doubleValue)));return new fo(n)}convertGeoPoint(e){return new vi(_s(e.latitude),_s(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Eb(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Np(e));default:return null}}convertTimestamp(e){const n=Rc(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Fn.fromString(e);wn(i6(s),9688,{name:e});const r=new jp(s.get(1),s.get(3)),i=new nt(s.popFirst(5));return r.isEqual(n)||Nl(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function B6(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class Lf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Od extends mj{constructor(e,n,s,r,i,l){super(e,n,s,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Vb("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Od._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Od._jsonSchemaVersion="firestore/documentSnapshot/1.0",Od._jsonSchema={type:Bs("string",Od._jsonSchemaVersion),bundleSource:Bs("string","DocumentSnapshot"),bundleName:Bs("string"),bundle:Bs("string")};class Tx extends Od{data(e={}){return super.data(e)}}class Vd{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Lf(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Tx(this._firestore,this._userDataWriter,s.key,s,new Lf(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Le(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((d=>{const u=new Tx(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Lf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>i||d.type!==3)).map((d=>{const u=new Tx(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Lf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,f=-1;return d.type!==0&&(h=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),f=l.indexOf(d.doc.key)),{type:Ree(d.type),doc:u,oldIndex:h,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=LN.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ree(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:t})}}function ua(t){t=Ca(t,ps);const e=Ca(t.firestore,Cl);return pee(Pb(e),t._key).then((n=>F6(e,t,n)))}Vd._jsonSchemaVersion="firestore/querySnapshot/1.0",Vd._jsonSchema={type:Bs("string",Vd._jsonSchemaVersion),bundleSource:Bs("string","QuerySnapshot"),bundleName:Bs("string"),bundle:Bs("string")};class vj extends Aee{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ps(this.firestore,null,n)}}function Dt(t){t=Ca(t,ki);const e=Ca(t.firestore,Cl),n=Pb(e),s=new vj(e);return O6(t._query),gee(n,t._query).then((r=>new Vd(e,s,t,r)))}function Dee(t,e,n){t=Ca(t,ps);const s=Ca(t.firestore,Cl),r=B6(t.converter,e);return Bb(s,[D6(rg(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Za.none())])}function Ss(t,e,n,...s){t=Ca(t,ps);const r=Ca(t.firestore,Cl),i=rg(r);let l;return l=typeof(e=mn(e))=="string"||e instanceof Mb?jee(i,"updateDoc",t._key,e,n,s):Nee(i,"updateDoc",t._key,e),Bb(r,[l.toMutation(t._key,Za.exists(!0))])}function Co(t){return Bb(Ca(t.firestore,Cl),[new $N(t._key,Za.none())])}function Ts(t,e){const n=Ca(t.firestore,Cl),s=mt(t),r=B6(t.converter,e);return Bb(n,[D6(rg(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,Za.exists(!1))]).then((()=>s))}function wj(t,...e){t=mn(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||i4(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(i4(e[s])){const u=e[s];e[s]=u.next?.bind(u),e[s+1]=u.error?.bind(u),e[s+2]=u.complete?.bind(u)}let i,l,d;if(t instanceof ps)l=Ca(t.firestore,Cl),d=Nb(t._key.path),i={next:u=>{e[s]&&e[s](F6(l,t,u))},error:e[s+1],complete:e[s+2]};else{const u=Ca(t,ki);l=Ca(u.firestore,Cl),d=u._query;const h=new vj(l);i={next:f=>{e[s]&&e[s](new Vd(l,h,u,f))},error:e[s+1],complete:e[s+2]},O6(t._query)}return(function(h,f,p,x){const b=new lj(x),_=new aj(f,b,p);return h.asyncQueue.enqueueAndForget((async()=>nj(await my(h),_))),()=>{b.Nu(),h.asyncQueue.enqueueAndForget((async()=>sj(await my(h),_)))}})(Pb(l),d,r,i)}function Bb(t,e){return(function(s,r){const i=new hl;return s.asyncQueue.enqueueAndForget((async()=>see(await fee(s),r,i))),i.promise})(Pb(t),e)}function F6(t,e,n){const s=n.docs.get(e._key),r=new vj(t);return new Od(t,r,e._key,s,new Lf(n.hasPendingWrites,n.fromCache),e.converter)}function Pee(...t){return new dj("arrayUnion",t)}(function(e,n=!0){(function(r){am=r})(ru),kc(new wl("firestore",((s,{instanceIdentifier:r,options:i})=>{const l=s.getProvider("app").getImmediate(),d=new Cl(new NX(s.getProvider("auth-internal")),new SX(l,s.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Le(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jp(h.options.projectId,f)})(l,r),l);return i={useFetchStreams:n,...i},d._setSettings(i),d}),"PUBLIC").setMultipleInstances(!0)),Xa(uD,hD,e),Xa(uD,hD,"esm2020")})();const $6="firebasestorage.googleapis.com",z6="storageBucket",Mee=120*1e3,Lee=600*1e3;class ys extends Si{constructor(e,n,s=0){super(G_(e),`Firebase Storage: ${n} (${G_(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ys.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return G_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gs;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gs||(gs={}));function G_(t){return"storage/"+t}function _j(){const t="An unknown error occurred, please check the error payload for server response.";return new ys(gs.UNKNOWN,t)}function Iee(t){return new ys(gs.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Oee(t){return new ys(gs.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Vee(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ys(gs.UNAUTHENTICATED,t)}function Uee(){return new ys(gs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Bee(t){return new ys(gs.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Fee(){return new ys(gs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $ee(){return new ys(gs.CANCELED,"User canceled the upload/download.")}function zee(t){return new ys(gs.INVALID_URL,"Invalid URL '"+t+"'.")}function Hee(t){return new ys(gs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function qee(){return new ys(gs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+z6+"' property when initializing the app?")}function Wee(){return new ys(gs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Yee(){return new ys(gs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Gee(t){return new ys(gs.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function VE(t){return new ys(gs.INVALID_ARGUMENT,t)}function H6(){return new ys(gs.APP_DELETED,"The Firebase app was deleted.")}function Kee(t){return new ys(gs.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zf(t,e){return new ys(gs.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function lf(t){throw new ys(gs.INTERNAL_ERROR,"Internal error: "+t)}class ja{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ja.makeFromUrl(e,n)}catch{return new ja(e,"")}if(s.path==="")return s;throw Hee(e)}static makeFromUrl(e,n){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+r+l,"i"),u={bucket:1,path:3};function h(C){C.path_=decodeURIComponent(C.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",b=new RegExp(`^https?://${p}/${f}/b/${r}/o${x}`,"i"),_={bucket:1,path:3},j=n===$6?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",T=new RegExp(`^https?://${j}/${r}/${v}`,"i"),A=[{regex:d,indices:u,postModify:i},{regex:b,indices:_,postModify:h},{regex:T,indices:{bucket:1,path:2},postModify:h}];for(let C=0;C<A.length;C++){const M=A[C],L=M.regex.exec(e);if(L){const k=L[M.indices.bucket];let R=L[M.indices.path];R||(R=""),s=new ja(k,R),M.postModify(s);break}}if(s==null)throw zee(e);return s}}class Qee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Xee(t,e,n){let s=1,r=null,i=null,l=!1,d=0;function u(){return d===2}let h=!1;function f(...v){h||(h=!0,e.apply(null,v))}function p(v){r=setTimeout(()=>{r=null,t(b,u())},v)}function x(){i&&clearTimeout(i)}function b(v,...T){if(h){x();return}if(v){x(),f.call(null,v,...T);return}if(u()||l){x(),f.call(null,v,...T);return}s<64&&(s*=2);let A;d===1?(d=2,A=0):A=(s+Math.random())*1e3,p(A)}let _=!1;function j(v){_||(_=!0,x(),!h&&(r!==null?(v||(d=2),clearTimeout(r),p(0)):v||(d=1)))}return p(0),i=setTimeout(()=>{l=!0,j(!0)},n),j}function Zee(t){t(!1)}function Jee(t){return t!==void 0}function ete(t){return typeof t=="object"&&!Array.isArray(t)}function Ej(t){return typeof t=="string"||t instanceof String}function c4(t){return Nj()&&t instanceof Blob}function Nj(){return typeof Blob<"u"}function d4(t,e,n,s){if(s<e)throw VE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw VE(`Invalid value for '${t}'. Expected ${n} or less.`)}function jj(t,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${t}`}function q6(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const r=e(s)+"="+e(t[s]);n=n+r+"&"}return n=n.slice(0,-1),n}var Ud;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ud||(Ud={}));function tte(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||r||i}class nte{constructor(e,n,s,r,i,l,d,u,h,f,p,x=!0,b=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=x,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,j)=>{this.resolve_=_,this.reject_=j,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new H0(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const l=d=>{const u=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(l),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(l),this.pendingConnection_=null;const d=i.getErrorCode()===Ud.NO_ERROR,u=i.getStatus();if(!d||tte(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Ud.ABORT;s(!1,new H0(!1,null,f));return}const h=this.successCodes_.indexOf(u)!==-1;s(!0,new H0(h,i))})},n=(s,r)=>{const i=this.resolve_,l=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(d,d.getResponse());Jee(u)?i(u):i()}catch(u){l(u)}else if(d!==null){const u=_j();u.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,u)):l(u)}else if(r.canceled){const u=this.appDelete_?H6():$ee();l(u)}else{const u=Fee();l(u)}};this.canceled_?n(!1,new H0(!1,null,!0)):this.backoffId_=Xee(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Zee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class H0{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function ste(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rte(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ate(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ite(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ote(t,e,n,s,r,i,l=!0,d=!1){const u=q6(t.urlParams),h=t.url+u,f=Object.assign({},t.headers);return ate(f,e),ste(f,n),rte(f,i),ite(f,s),new nte(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,l,d)}function lte(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cte(...t){const e=lte();if(e!==void 0){const n=new e;for(let s=0;s<t.length;s++)n.append(t[s]);return n.getBlob()}else{if(Nj())return new Blob(t);throw new ys(gs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function dte(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function ute(t){if(typeof atob>"u")throw Gee("base-64");return atob(t)}const ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class K_{constructor(e,n){this.data=e,this.contentType=n||null}}function hte(t,e){switch(t){case ro.RAW:return new K_(W6(e));case ro.BASE64:case ro.BASE64URL:return new K_(Y6(t,e));case ro.DATA_URL:return new K_(fte(e),pte(e))}throw _j()}function W6(t){const e=[];for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=s,l=t.charCodeAt(++n);s=65536|(i&1023)<<10|l&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function mte(t){let e;try{e=decodeURIComponent(t)}catch{throw Zf(ro.DATA_URL,"Malformed data URL.")}return W6(e)}function Y6(t,e){switch(t){case ro.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw Zf(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ro.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw Zf(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ute(e)}catch(r){throw r.message.includes("polyfill")?r:Zf(t,"Invalid character found")}const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}class G6{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zf(ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=gte(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function fte(t){const e=new G6(t);return e.base64?Y6(ro.BASE64,e.rest):mte(e.rest)}function pte(t){return new G6(t).contentType}function gte(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class gc{constructor(e,n){let s=0,r="";c4(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(c4(this.data_)){const s=this.data_,r=dte(s,e,n);return r===null?null:new gc(r)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new gc(s,!0)}}static getBlob(...e){if(Nj()){const n=e.map(s=>s instanceof gc?s.data_:s);return new gc(cte.apply(null,n))}else{const n=e.map(l=>Ej(l)?hte(ro.RAW,l).data:l.data_);let s=0;n.forEach(l=>{s+=l.byteLength});const r=new Uint8Array(s);let i=0;return n.forEach(l=>{for(let d=0;d<l.length;d++)r[i++]=l[d]}),new gc(r,!0)}}uploadData(){return this.data_}}function K6(t){let e;try{e=JSON.parse(t)}catch{return null}return ete(e)?e:null}function xte(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function yte(t,e){const n=e.split("/").filter(s=>s.length>0).join("/");return t.length===0?n:t+"/"+n}function Q6(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function bte(t,e){return e}class $r{constructor(e,n,s,r){this.server=e,this.local=n||e,this.writable=!!s,this.xform=r||bte}}let q0=null;function vte(t){return!Ej(t)||t.length<2?t:Q6(t)}function X6(){if(q0)return q0;const t=[];t.push(new $r("bucket")),t.push(new $r("generation")),t.push(new $r("metageneration")),t.push(new $r("name","fullPath",!0));function e(i,l){return vte(l)}const n=new $r("name");n.xform=e,t.push(n);function s(i,l){return l!==void 0?Number(l):l}const r=new $r("size");return r.xform=s,t.push(r),t.push(new $r("timeCreated")),t.push(new $r("updated")),t.push(new $r("md5Hash",null,!0)),t.push(new $r("cacheControl",null,!0)),t.push(new $r("contentDisposition",null,!0)),t.push(new $r("contentEncoding",null,!0)),t.push(new $r("contentLanguage",null,!0)),t.push(new $r("contentType",null,!0)),t.push(new $r("metadata","customMetadata",!0)),q0=t,q0}function wte(t,e){function n(){const s=t.bucket,r=t.fullPath,i=new ja(s,r);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function _te(t,e,n){const s={};s.type="file";const r=n.length;for(let i=0;i<r;i++){const l=n[i];s[l.local]=l.xform(s,e[l.server])}return wte(s,t),s}function Z6(t,e,n){const s=K6(e);return s===null?null:_te(t,s,n)}function Ete(t,e,n,s){const r=K6(e);if(r===null||!Ej(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const l=encodeURIComponent;return i.split(",").map(h=>{const f=t.bucket,p=t.fullPath,x="/b/"+l(f)+"/o/"+l(p),b=jj(x,n,s),_=q6({alt:"media",token:h});return b+_})[0]}function Nte(t,e){const n={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class J6{constructor(e,n,s,r){this.url=e,this.method=n,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function e9(t){if(!t)throw _j()}function jte(t,e){function n(s,r){const i=Z6(t,r,e);return e9(i!==null),i}return n}function Cte(t,e){function n(s,r){const i=Z6(t,r,e);return e9(i!==null),Ete(i,r,t.host,t._protocol)}return n}function t9(t){function e(n,s){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=Uee():r=Vee():n.getStatus()===402?r=Oee(t.bucket):n.getStatus()===403?r=Bee(t.path):r=s,r.status=n.getStatus(),r.serverResponse=s.serverResponse,r}return e}function Ste(t){const e=t9(t);function n(s,r){let i=e(s,r);return s.getStatus()===404&&(i=Iee(t.path)),i.serverResponse=r.serverResponse,i}return n}function Tte(t,e,n){const s=e.fullServerUrl(),r=jj(s,t.host,t._protocol),i="GET",l=t.maxOperationRetryTime,d=new J6(r,i,Cte(t,n),l);return d.errorHandler=Ste(e),d}function kte(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Ate(t,e,n){const s=Object.assign({},n);return s.fullPath=t.path,s.size=e.size(),s.contentType||(s.contentType=kte(null,e)),s}function Rte(t,e,n,s,r){const i=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function d(){let A="";for(let C=0;C<2;C++)A=A+Math.random().toString().slice(2);return A}const u=d();l["Content-Type"]="multipart/related; boundary="+u;const h=Ate(e,s,r),f=Nte(h,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+u+"--",b=gc.getBlob(p,s,x);if(b===null)throw Wee();const _={name:h.fullPath},j=jj(i,t.host,t._protocol),v="POST",T=t.maxUploadRetryTime,P=new J6(j,v,jte(t,n),T);return P.urlParams=_,P.headers=l,P.body=b.uploadData(),P.errorHandler=t9(e),P}class Dte{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ud.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ud.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ud.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,r,i){if(this.sent_)throw lf("cannot .send() more than once");if(jo(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Pte extends Dte{initXhr(){this.xhr_.responseType="text"}}function n9(){return new Pte}class Kd{constructor(e,n){this._service=e,n instanceof ja?this._location=n:this._location=ja.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Kd(e,n)}get root(){const e=new ja(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Q6(this._location.path)}get storage(){return this._service}get parent(){const e=xte(this._location.path);if(e===null)return null;const n=new ja(this._location.bucket,e);return new Kd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Kee(e)}}function Mte(t,e,n){t._throwIfRoot("uploadBytes");const s=Rte(t.storage,t._location,X6(),new gc(e,!0),n);return t.storage.makeRequestWithTokens(s,n9).then(r=>({metadata:r,ref:t}))}function Lte(t){t._throwIfRoot("getDownloadURL");const e=Tte(t.storage,t._location,X6());return t.storage.makeRequestWithTokens(e,n9).then(n=>{if(n===null)throw Yee();return n})}function Ite(t,e){const n=yte(t._location.path,e),s=new ja(t._location.bucket,n);return new Kd(t.storage,s)}function Ote(t){return/^[A-Za-z]+:\/\//.test(t)}function Vte(t,e){return new Kd(t,e)}function s9(t,e){if(t instanceof Cj){const n=t;if(n._bucket==null)throw qee();const s=new Kd(n,n._bucket);return e!=null?s9(s,e):s}else return e!==void 0?Ite(t,e):t}function Ute(t,e){if(e&&Ote(e)){if(t instanceof Cj)return Vte(t,e);throw VE("To use ref(service, url), the first argument must be a Storage instance.")}else return s9(t,e)}function u4(t,e){const n=e?.[z6];return n==null?null:ja.makeFromBucketSpec(n,t)}function Bte(t,e,n,s={}){t.host=`${e}:${n}`;const r=jo(e);r&&(fb(`https://${t.host}/b`),pN("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:i}=s;i&&(t._overrideAuthToken=typeof i=="string"?i:_Y(i,t.app.options.projectId))}class Cj{constructor(e,n,s,r,i,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=l,this._bucket=null,this._host=$6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Mee,this._maxUploadRetryTime=Lee,this._requests=new Set,r!=null?this._bucket=ja.makeFromBucketSpec(r,this._host):this._bucket=u4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ja.makeFromBucketSpec(this._url,e):this._bucket=u4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){d4("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){d4("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Kd(this,e)}_makeRequest(e,n,s,r,i=!0){if(this._deleted)return new Qee(H6());{const l=ote(e,this._appId,s,r,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,r).getPromise()}}const h4="@firebase/storage",m4="0.14.0";const r9="storage";function Fte(t,e,n){return t=mn(t),Mte(t,e,n)}function $te(t){return t=mn(t),Lte(t)}function zte(t,e){return t=mn(t),Ute(t,e)}function Hte(t=yN(),e){t=mn(t);const s=Gp(t,r9).getImmediate({identifier:e}),r=E5("storage");return r&&qte(s,...r),s}function qte(t,e,n,s={}){Bte(t,e,n,s)}function Wte(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Cj(n,s,r,e,ru)}function Yte(){kc(new wl(r9,Wte,"PUBLIC").setMultipleInstances(!0)),Xa(h4,m4,""),Xa(h4,m4,"esm2020")}Yte();const Gte="type.googleapis.com/google.protobuf.Int64Value",Kte="type.googleapis.com/google.protobuf.UInt64Value";function a9(t,e){const n={};for(const s in t)t.hasOwnProperty(s)&&(n[s]=e(t[s]));return n}function py(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>py(e));if(typeof t=="function"||typeof t=="object")return a9(t,e=>py(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Bh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Gte:case Kte:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Bh(e)):typeof t=="function"||typeof t=="object"?a9(t,e=>Bh(e)):t}const Sj="functions";const f4={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qr extends Si{constructor(e,n,s){super(`${Sj}/${e}`,n||""),this.details=s,Object.setPrototypeOf(this,qr.prototype)}}function Qte(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function gy(t,e){let n=Qte(t),s=n,r;try{const i=e&&e.error;if(i){const l=i.status;if(typeof l=="string"){if(!f4[l])return new qr("internal","internal");n=f4[l],s=l}const d=i.message;typeof d=="string"&&(s=d),r=i.details,r!==void 0&&(r=Bh(r))}}catch{}return n==="ok"?null:new qr(n,s,r)}class Xte{constructor(e,n,s,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Dr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||s.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r?.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),s=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:s,appCheckToken:r}}}const UE="us-central1",Zte=/^data: (.*?)(?:\n|$)/;function Jte(t){let e=null;return{promise:new Promise((n,s)=>{e=setTimeout(()=>{s(new qr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class ene{constructor(e,n,s,r,i=UE,l=(...d)=>fetch(...d)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new Xte(e,n,s,r),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(i);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=UE}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function tne(t,e,n){const s=jo(e);t.emulatorOrigin=`http${s?"s":""}://${e}:${n}`,s&&(fb(t.emulatorOrigin+"/backends"),pN("Functions",!0))}function nne(t,e,n){const s=r=>rne(t,e,r,n||{});return s.stream=(r,i)=>ine(t,e,r,i),s}function i9(t){return t.emulatorOrigin&&jo(t.emulatorOrigin)?"include":void 0}async function sne(t,e,n,s,r){n["Content-Type"]="application/json";let i;try{i=await s(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:i9(r)})}catch{return{status:0,json:null}}let l=null;try{l=await i.json()}catch{}return{status:i.status,json:l}}async function o9(t,e){const n={},s=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return s.authToken&&(n.Authorization="Bearer "+s.authToken),s.messagingToken&&(n["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=s.appCheckToken),n}function rne(t,e,n,s){const r=t._url(e);return ane(t,r,n,s)}async function ane(t,e,n,s){n=py(n);const r={data:n},i=await o9(t,s),l=s.timeout||7e4,d=Jte(l),u=await Promise.race([sne(e,r,i,t.fetchImpl,t),d.promise,t.cancelAllRequests]);if(d.cancel(),!u)throw new qr("cancelled","Firebase Functions instance was deleted.");const h=gy(u.status,u.json);if(h)throw h;if(!u.json)throw new qr("internal","Response is not valid JSON object.");let f=u.json.data;if(typeof f>"u"&&(f=u.json.result),typeof f>"u")throw new qr("internal","Response is missing data field.");return{data:Bh(f)}}function ine(t,e,n,s){const r=t._url(e);return one(t,r,n,s||{})}async function one(t,e,n,s){n=py(n);const r={data:n},i=await o9(t,s);i["Content-Type"]="application/json",i.Accept="text/event-stream";let l;try{l=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(r),headers:i,signal:s?.signal,credentials:i9(t)})}catch(x){if(x instanceof Error&&x.name==="AbortError"){const _=new qr("cancelled","Request was cancelled.");return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}const b=gy(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let d,u;const h=new Promise((x,b)=>{d=x,u=b});s?.signal?.addEventListener("abort",()=>{const x=new qr("cancelled","Request was cancelled.");u(x)});const f=l.body.getReader(),p=lne(f,d,u,s?.signal);return{stream:{[Symbol.asyncIterator](){const x=p.getReader();return{async next(){const{value:b,done:_}=await x.read();return{value:b,done:_}},async return(){return await x.cancel(),{done:!0,value:void 0}}}}},data:h}}function lne(t,e,n,s){const r=(l,d)=>{const u=l.match(Zte);if(!u)return;const h=u[1];try{const f=JSON.parse(h);if("result"in f){e(Bh(f.result));return}if("message"in f){d.enqueue(Bh(f.message));return}if("error"in f){const p=gy(0,f);d.error(p),n(p);return}}catch(f){if(f instanceof qr){d.error(f),n(f);return}}},i=new TextDecoder;return new ReadableStream({start(l){let d="";return u();async function u(){if(s?.aborted){const h=new qr("cancelled","Request was cancelled");return l.error(h),n(h),Promise.resolve()}try{const{value:h,done:f}=await t.read();if(f){d.trim()&&r(d.trim(),l),l.close();return}if(s?.aborted){const x=new qr("cancelled","Request was cancelled");l.error(x),n(x),await t.cancel();return}d+=i.decode(h,{stream:!0});const p=d.split(`
`);d=p.pop()||"";for(const x of p)x.trim()&&r(x.trim(),l);return u()}catch(h){const f=h instanceof qr?h:gy(0,null);l.error(f),n(f)}}},cancel(){return t.cancel()}})}const p4="@firebase/functions",g4="0.13.1";const cne="auth-internal",dne="app-check-internal",une="messaging-internal";function hne(t){const e=(n,{instanceIdentifier:s})=>{const r=n.getProvider("app").getImmediate(),i=n.getProvider(cne),l=n.getProvider(une),d=n.getProvider(dne);return new ene(r,i,l,d,s)};kc(new wl(Sj,e,"PUBLIC").setMultipleInstances(!0)),Xa(p4,g4,t),Xa(p4,g4,"esm2020")}function l9(t=yN(),e=UE){const s=Gp(mn(t),Sj).getImmediate({identifier:e}),r=E5("functions");return r&&c9(s,...r),s}function c9(t,e,n){tne(mn(t),e,n)}function dm(t,e,n){return nne(mn(t),e,n)}hne();const Fb=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:qr,connectFunctionsEmulator:c9,getFunctions:l9,httpsCallable:dm},Symbol.toStringTag,{value:"Module"}));let mne=class{config;constructor(){this.config={isDevelopment:!1,enableProduction:!1}}log(...e){this.config.isDevelopment&&console.log("[INFO]",...e)}warn(...e){this.config.isDevelopment&&console.warn("[WARN]",...e)}error(...e){(this.config.isDevelopment||this.config.enableProduction)&&console.error("[ERROR]",...e)}debug(...e){this.config.isDevelopment&&console.debug("[DEBUG]",...e)}group(e,n=!1){this.config.isDevelopment&&(n?console.groupCollapsed(`[GROUP] ${e}`):console.group(`[GROUP] ${e}`))}groupEnd(){this.config.isDevelopment&&console.groupEnd()}table(e){this.config.isDevelopment&&console.table(e)}time(e){this.config.isDevelopment&&console.time(e)}timeEnd(e){this.config.isDevelopment&&console.timeEnd(e)}success(e,...n){this.config.isDevelopment&&console.log("",e,...n)}info(e,...n){this.config.isDevelopment&&console.log("",e,...n)}};const Re=new mne,fne="us-central1",Jf={width:1200,height:800,maxSizeKB:1e3,format:"image/jpeg",quality:.9},d9=`Recomendado: ${Jf.width}x${Jf.height} px, formato JPG o PNG, mx ~${Math.round(Jf.maxSizeKB/1e3)}MB.`,x4=300,xy="PRO",pne={products:{BASIC:1/0,STANDARD:1/0,PRO:1/0,APPROVED25:1/0},services:{BASIC:1/0,STANDARD:1/0,PRO:1/0,APPROVED25:1/0},serviceSchedules:{BASIC:1/0,STANDARD:1/0,PRO:1/0,APPROVED25:1/0},professionals:{BASIC:1/0,STANDARD:1/0,PRO:1/0,APPROVED25:1/0}},BE={BASIC:"Basic",STANDARD:"Standard",PRO:"Pro",APPROVED25:"Approved 25"},gne=(t,e)=>{const n=pne[t];return n[e??xy]??n[xy]},y4=t=>BE[t??xy]??BE[xy],xne={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENV:"production",VITE_APP_NAME:"PYM-ERP",VITE_APP_VERSION:"1.0.0",VITE_ENABLE_ANALYTICS:"true",VITE_FIREBASE_API_KEY:"AIza.REDACTED",VITE_FIREBASE_APP_ID:"1:345943895840:web:f180f99f5f87c088ee7145",VITE_FIREBASE_AUTH_DOMAIN:"agendaemprende-8ac77.firebaseapp.com",VITE_FIREBASE_FUNCTIONS_REGION:"us-central1",VITE_FIREBASE_MESSAGING_SENDER_ID:"345943895840",VITE_FIREBASE_PROJECT_ID:"agendaemprende-8ac77",VITE_FIREBASE_STORAGE_BUCKET:"agendaemprende-8ac77.firebasestorage.app",VITE_GA_DEBUG:"false",VITE_GA_MEASUREMENT_ID:"G-58V5RL01MF",VITE_GOOGLE_MAPS_API_KEY:"AIza.REDACTED",VITE_SENTRY_DSN:""},yne=xne,bne=t=>t?.trim()||"",kx=[],Sr=(t,{required:e=!0,fallback:n=""}={})=>{const s=bne(yne[t]);return!s&&e&&kx.push(t),s||n},vne={apiKey:Sr("VITE_FIREBASE_API_KEY"),authDomain:Sr("VITE_FIREBASE_AUTH_DOMAIN"),projectId:Sr("VITE_FIREBASE_PROJECT_ID"),storageBucket:Sr("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:Sr("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:Sr("VITE_FIREBASE_APP_ID"),functionsRegion:Sr("VITE_FIREBASE_FUNCTIONS_REGION",{required:!1,fallback:fne})};if(kx.length>0){const t=`Variables de entorno faltantes: ${kx.join(", ")}`;throw Re.error(" Variables de entorno faltantes:",kx),Re.error("Por favor, verifica que el archivo .env existe y contiene todas las variables necesarias."),new Error(t)}const xn={app:{version:Sr("VITE_APP_VERSION",{required:!1,fallback:"1.0.0"}),name:Sr("VITE_APP_NAME",{required:!1,fallback:"AgendaWeb"}),environment:Sr("VITE_APP_ENV",{required:!1,fallback:"development"})},firebase:vne,googleMapsApiKey:Sr("VITE_GOOGLE_MAPS_API_KEY",{required:!1,fallback:""}),analytics:{measurementId:Sr("VITE_GA_MEASUREMENT_ID",{required:!1,fallback:""}),debug:Sr("VITE_GA_DEBUG",{required:!1,fallback:"false"})==="true",enabled:Sr("VITE_ENABLE_ANALYTICS",{required:!1,fallback:"true"})==="true"},sentry:{dsn:Sr("VITE_SENTRY_DSN",{required:!1,fallback:""})},isDevelopment:!1,isProduction:!0,e2eUser:Sr("VITE_E2E_USER",{required:!1,fallback:""})},wne={apiKey:xn.firebase.apiKey,authDomain:xn.firebase.authDomain,projectId:xn.firebase.projectId,storageBucket:xn.firebase.storageBucket,messagingSenderId:xn.firebase.messagingSenderId,appId:xn.firebase.appId};Re.success("Firebase configurado correctamente");const $b=T5(wne),qn=yX($b),Ce=yee($b,{experimentalForceLongPolling:!0}),u9=Hte($b),um=l9($b,xn.firebase.functionsRegion),zb=Object.freeze(Object.defineProperty({__proto__:null,auth:qn,db:Ce,functions:um,storage:u9},Symbol.toStringTag,{value:"Module"}));var _ne=10,uh="0123456789bcdefghjkmnpqrstuvwxyz",Ene=40007860,h9=110574,ep=5,m9=22*ep,Nne=6378137,jne=.00669447819799,Cne=1e-12;function f9(t){return Math.log(t)/Math.log(2)}function yy(t){var e;if(!Array.isArray(t))e="location must be an array";else if(t.length!==2)e="expected array of length 2, got length "+t.length;else{var n=t[0],s=t[1];typeof n!="number"||isNaN(n)?e="latitude must be a number":n<-90||n>90?e="latitude must be within the range [-90, 90]":typeof s!="number"||isNaN(s)?e="longitude must be a number":(s<-180||s>180)&&(e="longitude must be within the range [-180, 180]")}if(typeof e<"u")throw new Error("Invalid GeoFire location '"+t+"': "+e)}function Sne(t){var e;if(typeof t!="string")e="geohash must be a string";else if(t.length===0)e="geohash cannot be the empty string";else for(var n=0,s=t;n<s.length;n++){var r=s[n];uh.indexOf(r)===-1&&(e="geohash cannot contain '"+r+"'")}if(typeof e<"u")throw new Error("Invalid GeoFire geohash '"+t+"': "+e)}function If(t){if(typeof t!="number"||isNaN(t))throw new Error("Error: degrees must be a number");return t*Math.PI/180}function Tne(t,e){if(e===void 0&&(e=_ne),yy(t),typeof e<"u"){if(typeof e!="number"||isNaN(e))throw new Error("precision must be a number");if(e<=0)throw new Error("precision must be greater than 0");if(e>22)throw new Error("precision cannot be greater than 22");if(Math.round(e)!==e)throw new Error("precision must be an integer")}for(var n={min:-90,max:90},s={min:-180,max:180},r="",i=0,l=0,d=1;r.length<e;){var u=d?t[1]:t[0],h=d?s:n,f=(h.min+h.max)/2;u>f?(i=(i<<1)+1,h.min=f):(i=(i<<1)+0,h.max=f),d=!d,l<4?l++:(l=0,r+=uh[i],i=0)}return r}function FE(t,e){var n=If(e),s=Math.cos(n)*Nne*Math.PI/180,r=1/Math.sqrt(1-jne*Math.sin(n)*Math.sin(n)),i=s*r;return i<Cne?t>0?360:0:Math.min(360,t/i)}function b4(t,e){var n=FE(t,e);return Math.abs(n)>1e-6?Math.max(1,f9(360/n)):1}function kne(t){return Math.min(f9(Ene/2/t),m9)}function Hu(t){if(t<=180&&t>=-180)return t;var e=t+180;return e>0?e%360-180:180- -e%360}function Ane(t,e){var n=e/h9,s=Math.min(90,t[0]+n),r=Math.max(-90,t[0]-n),i=Math.floor(kne(e))*2,l=Math.floor(b4(e,s))*2-1,d=Math.floor(b4(e,r))*2-1;return Math.min(i,l,d,m9)}function Rne(t,e){var n=e/h9,s=Math.min(90,t[0]+n),r=Math.max(-90,t[0]-n),i=FE(e,s),l=FE(e,r),d=Math.max(i,l);return[[t[0],t[1]],[t[0],Hu(t[1]-d)],[t[0],Hu(t[1]+d)],[s,t[1]],[s,Hu(t[1]-d)],[s,Hu(t[1]+d)],[r,t[1]],[r,Hu(t[1]-d)],[r,Hu(t[1]+d)]]}function Dne(t,e){Sne(t);var n=Math.ceil(e/ep);if(t.length<n)return[t,t+"~"];t=t.substring(0,n);var s=t.substring(0,t.length-1),r=uh.indexOf(t.charAt(t.length-1)),i=e-s.length*ep,l=ep-i,d=r>>l<<l,u=d+(1<<l);return u>31?[s+uh[d],s+"~"]:[s+uh[d],s+uh[u]]}function Pne(t,e){yy(t);var n=Math.max(1,Ane(t,e)),s=Math.ceil(n/ep),r=Rne(t,e),i=r.map(function(l){return Dne(Tne(l,s),n)});return i.filter(function(l,d){return!i.some(function(u,h){return d>h&&l[0]===u[0]&&l[1]===u[1]})})}function Mne(t,e){yy(t),yy(e);var n=6371,s=If(e[0]-t[0]),r=If(e[1]-t[1]),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(If(t[0]))*Math.cos(If(e[0]))*Math.sin(r/2)*Math.sin(r/2),l=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return n*l}var Rr=(t=>(t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE",t.FORCE_PASSWORD_CHANGE="FORCE_PASSWORD_CHANGE",t))(Rr||{}),ct=(t=>(t.SUPERADMIN="SUPERADMIN",t.ENTREPRENEUR="ENTREPRENEUR",t))(ct||{}),p9=(t=>(t.PENDING="PENDING",t.APPROVED="APPROVED",t.REJECTED="REJECTED",t))(p9||{}),an=(t=>(t.SERVICES="SERVICES",t.PRODUCTS="PRODUCTS",t))(an||{}),ia=(t=>(t.PAGE_VIEW="PAGE_VIEW",t.WHATSAPP_CLICK="WHATSAPP_CLICK",t.SERVICE_BOOK_CLICK="SERVICE_BOOK_CLICK",t.PRODUCT_ORDER_CLICK="PRODUCT_ORDER_CLICK",t))(ia||{}),Be=(t=>(t.REQUESTED="REQUESTED",t.CONFIRMED="CONFIRMED",t.CANCELLED="CANCELLED",t.COMPLETED="COMPLETED",t.NO_SHOW="NO_SHOW",t))(Be||{});const Tj=async t=>{const e=mt(Ce,"users",t),n=await ua(e);return n.exists()?{id:n.id,...n.data()}:null},Hb=async t=>{const e=Ct(Ke(Ce,"users"),Ge("email","==",t),Nh(1)),n=await Dt(e);if(!n.empty){const s=n.docs[0];return{id:s.id,...s.data()}}return null},Fh=async(t,e)=>{const n=e||t.email;return await Dee(mt(Ce,"users",n),{...t,created_at:Ve.now()}),n},Qd=async(t,e)=>{const n=mt(Ce,"users",t);await Ss(n,e)},g9=async()=>(await Dt(Ke(Ce,"users"))).docs.map(e=>{const n=e.data();return{id:e.id,...n,created_at:n.created_at?.toDate?.()||new Date}}),$E=async t=>(await Ts(Ke(Ce,"accessRequests"),{...t,status:p9.PENDING,created_at:Ve.now()})).id,x9=async(t,e)=>{const n=mt(Ce,"accessRequests",t),s={...e};e.processed_at&&(s.processed_at=Ve.fromDate(e.processed_at)),await Ss(n,s)},y9=async t=>{const e=Ct(Ke(Ce,"accessRequests"),Ge("email","==",t),Nh(1)),n=await Dt(e);if(!n.empty){const s=n.docs[0],r=s.data();return{id:s.id,...r,created_at:r.created_at?.toDate?.()||new Date,processed_at:r.processed_at?.toDate?.()}}return null},Lne=t=>{let e=t.location,n=t.latitude,s=t.longitude;return t.location&&(typeof t.location=="object"&&"latitude"in t.location&&"longitude"in t.location?(e=t.location,n=t.location.latitude,s=t.location.longitude):typeof t.location=="object"&&"lat"in t.location&&typeof t.location.lat=="function"&&(n=t.location.lat(),s=t.location.lng(),e={latitude:n,longitude:s})),n===void 0&&typeof t.latitude=="number"&&(n=t.latitude),s===void 0&&typeof t.longitude=="number"&&(s=t.longitude),!e&&n!==void 0&&s!==void 0&&(e={latitude:n,longitude:s}),{location:e,latitude:n,longitude:s}},tp=(t,e)=>{const n={...e};!n.commune&&n.comuna&&(n.commune=n.comuna),!n.category_id&&n.categoryId&&(n.category_id=n.categoryId),!n.businessMode&&n.business_type&&(n.businessMode=n.business_type),n.businessMode||(n.businessMode="BOTH");const{location:s,latitude:r,longitude:i}=Lne(n);return{id:t,...n,public_layout_variant:n.public_layout_variant||"classic",location:s,latitude:r,longitude:i,created_at:n.created_at?.toDate?.()||new Date,updated_at:n.updated_at?.toDate?.()||new Date}},yn=async t=>{const e=mt(Ce,"companies",t);try{const r=await ua(e);if(r.exists())return tp(r.id,r.data())}catch(r){if(r?.code!=="permission-denied")throw r}const n=mt(Ce,"companies_public",t),s=await ua(n);return s.exists()?tp(s.id,s.data()):null},Ine=async(t={})=>{const{categoryId:e,comuna:n,bounds:s}=t;if(console.log("[getPublicCompanies] Filtros:",{categoryId:e,comuna:n,bounds:s?"presente":"no presente"}),s){const{center:u,radiusInM:h}=s,p=Pne(u,h||5e3).map(([j,v])=>{const T=[da("geohash"),Tee(j),kee(v)];return Dt(Ct(Ke(Ce,"companies_public"),...T))}),x=await Promise.all(p),b=new Map;x.forEach(j=>{j.docs.forEach(v=>{if(b.has(v.id))return;const T=v.data();let P=T.location;T.location&&(typeof T.location=="object"&&"latitude"in T.location&&"longitude"in T.location?P=T.location:typeof T.location=="object"&&"lat"in T.location&&typeof T.location.lat=="function"&&(P={latitude:T.location.lat(),longitude:T.location.lng()}));const A={id:v.id,...T,location:P};b.set(v.id,A)})});let _=Array.from(b.values());return _=_.filter(j=>!j.location?.latitude||!j.location.longitude?!1:Mne([j.location.latitude,j.location.longitude],[u[0],u[1]])*1e3<=h),e&&(_=_.filter(j=>j.categoryId===e)),n&&(_=_.filter(j=>j.comuna===n)),_.sort((j,v)=>j.name.localeCompare(v.name,"es",{sensitivity:"base"}))}const r=[];e&&r.push(Ge("categoryId","==",e)),n&&r.push(Ge("comuna","==",n));const i=r.length>0?Ct(Ke(Ce,"companies_public"),...r):Ct(Ke(Ce,"companies_public"));console.log("[getPublicCompanies] Ejecutando consulta sin bounds, constraints:",r.length);const l=await Dt(i);console.log("[getPublicCompanies] Documentos recibidos:",l.docs.length);const d=l.docs.map(u=>{const h=u.data();let f=h.location;return h.location&&(typeof h.location=="object"&&"latitude"in h.location&&"longitude"in h.location?f=h.location:typeof h.location=="object"&&"lat"in h.location&&typeof h.location.lat=="function"&&(f={latitude:h.location.lat(),longitude:h.location.lng()})),{id:u.id,...h,location:f}});return d.length>0?d.sort((u,h)=>u.name.localeCompare(h.name,"es",{sensitivity:"base"})):[]},qb=async t=>{const e=Ct(Ke(Ce,"companies_public"),Ge("slug","==",t),Nh(1)),n=await Dt(e);if(!n.empty){const i=n.docs[0],l=tp(i.id,i.data()),d=l.background_enabled==null||!l.background_url||l.background_opacity==null||!l.background_fit||!l.background_orientation,u=!l.social_links&&!l.socialLinks;if(!d&&!u)return l;try{const h=await ua(mt(Ce,"companies",i.id));if(h.exists()){const f=h.data();return{...l,background_enabled:f.background_enabled??l.background_enabled,background_url:f.background_url??l.background_url,background_orientation:f.background_orientation??l.background_orientation,background_fit:f.background_fit??l.background_fit,background_opacity:f.background_opacity??l.background_opacity,social_links:f.social_links||f.socialLinks||l.social_links||l.socialLinks}}}catch(h){if(h?.code!=="permission-denied")throw h}return l}const s=Ct(Ke(Ce,"companies_public"),Ge("publicSlug","==",t),Nh(1)),r=await Dt(s);if(!r.empty){const i=r.docs[0],l=tp(i.id,i.data());if(!(!l.social_links&&!l.socialLinks))return l;try{const u=await ua(mt(Ce,"companies",i.id));if(u.exists()){const h=u.data();return{...l,social_links:h.social_links||h.socialLinks||l.social_links||l.socialLinks}}}catch(u){if(u?.code!=="permission-denied")throw u}return l}try{const i=Ct(Ke(Ce,"companies"),Ge("slug","==",t),Nh(1)),l=await Dt(i);if(!l.empty){const d=l.docs[0];return tp(d.id,d.data())}}catch(i){if(i?.code!=="permission-denied")throw i}return null},zE=async t=>(await Ts(Ke(Ce,"companies"),{...t,business_type:t.business_type||"SERVICES",public_layout_variant:t.public_layout_variant||"classic",created_at:Ve.now(),updated_at:Ve.now()})).id,si=async(t,e)=>{const n=mt(Ce,"companies",t),s={...e,updated_at:Ve.now()};s.location&&typeof s.location=="object"&&s.location.latitude!==void 0&&s.location.longitude!==void 0&&(s.location=new vi(s.location.latitude,s.location.longitude)),await Ss(n,s)},kj=async(t,e)=>{const n=mt(Ce,"companies_public",t);if(!(await ua(n)).exists())return;const r={...e,updated_at:Ve.now()};await Ss(n,r)},b9=async t=>{const{functions:e}=await tn(async()=>{const{functions:i}=await Promise.resolve().then(()=>zb);return{functions:i}},void 0),{httpsCallable:n}=await tn(async()=>{const{httpsCallable:i}=await Promise.resolve().then(()=>Fb);return{httpsCallable:i}},void 0);return(await n(e,"syncCompanyPublicSchedule")({schedule:t})).data},cl=async(t,e)=>{const n=Ct(Ke(Ce,"companyAppearances"),Ge("company_id","==",t),Ge("context","==",e),Nh(1)),s=await Dt(n);if(!s.empty){const r=s.docs[0];return{id:r.id,...r.data()}}return null},Aj=async(t,e,n)=>{const s=await cl(t,e);return s?(await Ss(mt(Ce,"companyAppearances",s.id),n),s.id):(await Ts(Ke(Ce,"companyAppearances"),{company_id:t,context:e,...n})).id},$h=async t=>{const e=Ct(Ke(Ce,"scheduleSlots"),Ge("company_id","==",t));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data()}))},HE=async t=>(await Ts(Ke(Ce,"scheduleSlots"),t)).id,v9=async(t,e)=>{const n=mt(Ce,"scheduleSlots",t);await Ss(n,e)},w9=async t=>{await Co(mt(Ce,"scheduleSlots",t))},Qc=async t=>{const e=Ct(Ke(Ce,"services"),Ge("company_id","==",t));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data(),professional_ids:s.data()?.professional_ids||[]}))},ou=async(t,e)=>{const n=mt(Ce,"services",t),s=await ua(n);if(s.exists()){const r=s.data();return{id:s.id,...r,professional_ids:r?.professional_ids||[]}}return null},_9=async t=>(await Ts(Ke(Ce,"services"),t)).id,Rj=async(t,e,n)=>{const s=mt(Ce,"services",t);await Ss(s,e)},E9=async(t,e)=>{await Co(mt(Ce,"services",t))},ig=async t=>{const e=Ct(Ke(Ce,"serviceSchedules"),Ge("service_id","==",t));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data()}))},N9=async t=>{const e=Ct(Ke(Ce,"serviceSchedules"),Ge("company_id","==",t));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data()}))},j9=async(t,e,n)=>{const s=async()=>{const{projectId:r,functionsRegion:i}=xn.firebase,l=`https://${i}-${r}.cloudfunctions.net/setServiceSchedulesHttp`,d=qn.currentUser,u=d?await d.getIdToken():null;if(!u)throw new Error("Token requerido para sincronizar horarios del servicio");const h=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({serviceId:t,companyId:n,scheduleSlotIds:e})});if(!h.ok){const p=await h.text();throw new Error(p||"Error al sincronizar horarios del servicio")}const f=await h.json();if(!f?.success)throw new Error(f?.error||"Error al sincronizar horarios del servicio")};try{const r=await ig(t);for(const i of r)await Co(mt(Ce,"serviceSchedules",i.id));for(const i of e)await Ts(Ke(Ce,"serviceSchedules"),{service_id:t,schedule_slot_id:i,company_id:n})}catch(r){const i=r?.message||"";if(!(r?.code==="permission-denied"||i.includes("Missing or insufficient permissions")||r?.code==="functions/internal"||i.includes("res.on is not a function")))throw r;await s()}},lu=async t=>{const e=Ct(Ke(Ce,"products"),Ge("company_id","==",t));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data()}))},C9=async(t,e)=>{const n=mt(Ce,"products",t),s=await ua(n);return s.exists()?{id:s.id,...s.data()}:null},S9=async t=>(await Ts(Ke(Ce,"products"),t)).id,kp=async(t,e)=>{const n=mt(Ce,"products",t);await Ss(n,e)},T9=async t=>{await Co(mt(Ce,"products",t))},k9=async t=>{const e=Ct(Ke(Ce,"appointmentRequests"),Ge("company_id","==",t));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data(),created_at:s.data().created_at?.toDate()||new Date})).sort((s,r)=>(r.created_at?.getTime?.()||0)-(s.created_at?.getTime?.()||0))},Dj=async t=>{const e=t.status||"REQUESTED";return(await Ts(Ke(Ce,"productOrderRequests"),{...t,status:e,channel:t.channel||"MENU",order_type:t.order_type||"TABLE",status_history:[{from:null,to:e,created_at:Ve.now()}],created_at:Ve.now()})).id},Pj=async t=>{const e=Ct(Ke(Ce,"productOrderRequests"),Ge("company_id","==",t));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data(),status:s.data().status||"REQUESTED",channel:s.data().channel||"WHATSAPP",order_type:s.data().order_type||"TABLE",status_history:Array.isArray(s.data().status_history)?s.data().status_history.map(r=>({...r,created_at:r?.created_at?.toDate?.()||new Date})):[],created_at:s.data().created_at?.toDate()||new Date})).sort((s,r)=>(r.created_at?.getTime?.()||0)-(s.created_at?.getTime?.()||0))},A9=async(t,e)=>{const n=mt(Ce,"productOrderRequests",t);await Ss(n,e)},R9=async t=>{const e=mt(Ce,"productOrderRequests",t),n=await ua(e);if(!n.exists())return null;const s=n.data();return{id:n.id,...s,status:s.status||"REQUESTED",channel:s.channel||"WHATSAPP",order_type:s.order_type||"TABLE",status_history:Array.isArray(s.status_history)?s.status_history.map(r=>({...r,created_at:r?.created_at?.toDate?.()||new Date})):[],created_at:s.created_at?.toDate?.()||new Date}},D9=async(t,e,n)=>{const s=mt(Ce,"productOrderRequests",t);await Ss(s,{status:n,status_history:Pee({from:e,to:n,created_at:Ve.now()})})},hh=async(t,e)=>(await Ts(Ke(Ce,"publicPageEvents"),{company_id:t,event_type:e,created_at:Ve.now()})).id,P9=async t=>{const e=Ct(Ke(Ce,"publicPageEvents"),Ge("company_id","==",t));return(await Dt(e)).docs.map(s=>({id:s.id,...s.data(),created_at:s.data().created_at?.toDate()||new Date})).sort((s,r)=>r.created_at.getTime()-s.created_at.getTime())},One=Object.freeze(Object.defineProperty({__proto__:null,advanceProductOrderStatus:D9,createAccessRequest:$E,createCompany:zE,createProduct:S9,createProductOrderRequest:Dj,createPublicPageEvent:hh,createScheduleSlot:HE,createService:_9,createUser:Fh,deleteProduct:T9,deleteScheduleSlot:w9,deleteService:E9,getAccessRequestByEmail:y9,getAllUsers:g9,getAppointmentRequests:k9,getCompany:yn,getCompanyAppearance:cl,getCompanyBySlug:qb,getProduct:C9,getProductOrderRequestById:R9,getProductOrderRequests:Pj,getProducts:lu,getPublicCompanies:Ine,getPublicPageEvents:P9,getScheduleSlots:$h,getService:ou,getServiceSchedules:ig,getServiceSchedulesByCompany:N9,getServices:Qc,getUser:Tj,getUserByEmail:Hb,setCompanyAppearance:Aj,setServiceSchedules:j9,syncCompanyPublicSchedule:b9,updateAccessRequest:x9,updateCompany:si,updateCompanyPublic:kj,updateProduct:kp,updateProductOrderRequest:A9,updateScheduleSlot:v9,updateService:Rj,updateUser:Qd},Symbol.toStringTag,{value:"Module"})),ht=t=>typeof t=="string",cf=()=>{let t,e;const n=new Promise((s,r)=>{t=s,e=r});return n.resolve=t,n.reject=e,n},v4=t=>t==null?"":""+t,Vne=(t,e,n)=>{t.forEach(s=>{e[s]&&(n[s]=e[s])})},Une=/###/g,w4=t=>t&&t.indexOf("###")>-1?t.replace(Une,"."):t,_4=t=>!t||ht(t),np=(t,e,n)=>{const s=ht(e)?e.split("."):e;let r=0;for(;r<s.length-1;){if(_4(t))return{};const i=w4(s[r]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++r}return _4(t)?{}:{obj:t,k:w4(s[r])}},E4=(t,e,n)=>{const{obj:s,k:r}=np(t,e,Object);if(s!==void 0||e.length===1){s[r]=n;return}let i=e[e.length-1],l=e.slice(0,e.length-1),d=np(t,l,Object);for(;d.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),d=np(t,l,Object),d?.obj&&typeof d.obj[`${d.k}.${i}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${i}`]=n},Bne=(t,e,n,s)=>{const{obj:r,k:i}=np(t,e,Object);r[i]=r[i]||[],r[i].push(n)},by=(t,e)=>{const{obj:n,k:s}=np(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},Fne=(t,e,n)=>{const s=by(t,n);return s!==void 0?s:by(e,n)},M9=(t,e,n)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in t?ht(t[s])||t[s]instanceof String||ht(e[s])||e[s]instanceof String?n&&(t[s]=e[s]):M9(t[s],e[s],n):t[s]=e[s]);return t},qu=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var $ne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const zne=t=>ht(t)?t.replace(/[&<>"'\/]/g,e=>$ne[e]):t;class Hne{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const qne=[" ",",","?","!",";"],Wne=new Hne(20),Yne=(t,e,n)=>{e=e||"",n=n||"";const s=qne.filter(l=>e.indexOf(l)<0&&n.indexOf(l)<0);if(s.length===0)return!0;const r=Wne.getRegExp(`(${s.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!r.test(t);if(!i){const l=t.indexOf(n);l>0&&!r.test(t.substring(0,l))&&(i=!0)}return i},qE=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const s=e.split(n);let r=t;for(let i=0;i<s.length;){if(!r||typeof r!="object")return;let l,d="";for(let u=i;u<s.length;++u)if(u!==i&&(d+=n),d+=s[u],l=r[d],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&u<s.length-1)continue;i+=u-i+1;break}r=l}return r},Ap=t=>t?.replace("_","-"),Gne={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class vy{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||Gne,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,s,r){return r&&!this.debug?null:(ht(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new vy(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new vy(this.logger,e)}}var ao=new vy;class Wb{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const r=this.observers[s].get(n)||0;this.observers[s].set(n,r+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,i])=>{for(let l=0;l<i;l++)r(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,i])=>{for(let l=0;l<i;l++)r.apply(r,[e,...n])})}}class N4 extends Wb{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,s,r={}){const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,l=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;e.indexOf(".")>-1?d=e.split("."):(d=[e,n],s&&(Array.isArray(s)?d.push(...s):ht(s)&&i?d.push(...s.split(i)):d.push(s)));const u=by(this.data,d);return!u&&!n&&!s&&e.indexOf(".")>-1&&(e=d[0],n=d[1],s=d.slice(2).join(".")),u||!l||!ht(s)?u:qE(this.data?.[e]?.[n],s,i)}addResource(e,n,s,r,i={silent:!1}){const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let d=[e,n];s&&(d=d.concat(l?s.split(l):s)),e.indexOf(".")>-1&&(d=e.split("."),r=n,n=d[1]),this.addNamespaces(n),E4(this.data,d,r),i.silent||this.emit("added",e,n,s,r)}addResources(e,n,s,r={silent:!1}){for(const i in s)(ht(s[i])||Array.isArray(s[i]))&&this.addResource(e,n,i,s[i],{silent:!0});r.silent||this.emit("added",e,n,s)}addResourceBundle(e,n,s,r,i,l={silent:!1,skipCopy:!1}){let d=[e,n];e.indexOf(".")>-1&&(d=e.split("."),r=s,s=n,n=d[1]),this.addNamespaces(n);let u=by(this.data,d)||{};l.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?M9(u,s,i):u={...u,...s},E4(this.data,d,u),l.silent||this.emit("added",e,n,s)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var L9={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,s,r){return t.forEach(i=>{e=this.processors[i]?.process(e,n,s,r)??e}),e}};const I9=Symbol("i18next/PATH_KEY");function Kne(){const t=[],e=Object.create(null);let n;return e.get=(s,r)=>(n?.revoke?.(),r===I9?t:(t.push(r),n=Proxy.revocable(s,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function WE(t,e){const{[I9]:n}=t(Kne());return n.join(e?.keySeparator??".")}const j4={},Q_=t=>!ht(t)&&typeof t!="boolean"&&typeof t!="number";class wy extends Wb{constructor(e,n={}){super(),Vne(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ao.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const s={...n};if(e==null)return!1;const r=this.resolve(e,s);if(r?.res===void 0)return!1;const i=Q_(r.res);return!(s.returnObjects===!1&&i)}extractFromKey(e,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const l=s&&e.indexOf(s)>-1,d=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Yne(e,s,r);if(l&&!d){const u=e.match(this.interpolator.nestingRegexp);if(u&&u.length>0)return{key:e,namespaces:ht(i)?[i]:i};const h=e.split(s);(s!==r||s===r&&this.options.ns.indexOf(h[0])>-1)&&(i=h.shift()),e=h.join(r)}return{key:e,namespaces:ht(i)?[i]:i}}translate(e,n,s){let r=typeof n=="object"?{...n}:n;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=WE(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const i=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,l=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:d,namespaces:u}=this.extractFromKey(e[e.length-1],r),h=u[u.length-1];let f=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const p=r.lng||this.language,x=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p?.toLowerCase()==="cimode")return x?i?{res:`${h}${f}${d}`,usedKey:d,exactUsedKey:d,usedLng:p,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:`${h}${f}${d}`:i?{res:d,usedKey:d,exactUsedKey:d,usedLng:p,usedNS:h,usedParams:this.getUsedParamsDetails(r)}:d;const b=this.resolve(e,r);let _=b?.res;const j=b?.usedKey||d,v=b?.exactUsedKey||d,T=["[object Number]","[object Function]","[object RegExp]"],P=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,C=r.count!==void 0&&!ht(r.count),M=wy.hasDefaultValue(r),L=C?this.pluralResolver.getSuffix(p,r.count,r):"",k=r.ordinal&&C?this.pluralResolver.getSuffix(p,r.count,{ordinal:!1}):"",R=C&&!r.ordinal&&r.count===0,S=R&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${L}`]||r[`defaultValue${k}`]||r.defaultValue;let O=_;A&&!_&&M&&(O=S);const I=Q_(O),F=Object.prototype.toString.apply(O);if(A&&O&&I&&T.indexOf(F)<0&&!(ht(P)&&Array.isArray(O))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const $=this.options.returnedObjectHandler?this.options.returnedObjectHandler(j,O,{...r,ns:u}):`key '${d} (${this.language})' returned an object instead of string.`;return i?(b.res=$,b.usedParams=this.getUsedParamsDetails(r),b):$}if(l){const $=Array.isArray(O),Q=$?[]:{},G=$?v:j;for(const B in O)if(Object.prototype.hasOwnProperty.call(O,B)){const z=`${G}${l}${B}`;M&&!_?Q[B]=this.translate(z,{...r,defaultValue:Q_(S)?S[B]:void 0,joinArrays:!1,ns:u}):Q[B]=this.translate(z,{...r,joinArrays:!1,ns:u}),Q[B]===z&&(Q[B]=O[B])}_=Q}}else if(A&&ht(P)&&Array.isArray(_))_=_.join(P),_&&(_=this.extendTranslation(_,e,r,s));else{let $=!1,Q=!1;!this.isValidLookup(_)&&M&&($=!0,_=S),this.isValidLookup(_)||(Q=!0,_=d);const B=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Q?void 0:_,z=M&&S!==_&&this.options.updateMissing;if(Q||$||z){if(this.logger.log(z?"updateKey":"missingKey",p,h,d,z?S:_),l){const H=this.resolve(d,{...r,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let q=[];const Z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Z&&Z[0])for(let H=0;H<Z.length;H++)q.push(Z[H]);else this.options.saveMissingTo==="all"?q=this.languageUtils.toResolveHierarchy(r.lng||this.language):q.push(r.lng||this.language);const ee=(H,Y,X)=>{const ie=M&&X!==_?X:B;this.options.missingKeyHandler?this.options.missingKeyHandler(H,h,Y,ie,z,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(H,h,Y,ie,z,r),this.emit("missingKey",H,h,Y,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?q.forEach(H=>{const Y=this.pluralResolver.getSuffixes(H,r);R&&r[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(X=>{ee([H],d+X,r[`defaultValue${X}`]||S)})}):ee(q,d,S))}_=this.extendTranslation(_,e,r,b,s),Q&&_===d&&this.options.appendNamespaceToMissingKey&&(_=`${h}${f}${d}`),(Q||$)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${f}${d}`:d,$?_:void 0,r))}return i?(b.res=_,b.usedParams=this.getUsedParamsDetails(r),b):_}extendTranslation(e,n,s,r,i){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const u=ht(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let f=s.replace&&!ht(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,s.lng||this.language||r.usedLng,s),u){const p=e.match(this.interpolator.nestingRegexp),x=p&&p.length;h<x&&(s.nest=!1)}!s.lng&&r&&r.res&&(s.lng=this.language||r.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>i?.[0]===p[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),s)),s.interpolation&&this.interpolator.reset()}const l=s.postProcess||this.options.postProcess,d=ht(l)?[l]:l;return e!=null&&d?.length&&s.applyPostProcessor!==!1&&(e=L9.handle(d,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,n={}){let s,r,i,l,d;return ht(e)&&(e=[e]),e.forEach(u=>{if(this.isValidLookup(s))return;const h=this.extractFromKey(u,n),f=h.key;r=f;let p=h.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const x=n.count!==void 0&&!ht(n.count),b=x&&!n.ordinal&&n.count===0,_=n.context!==void 0&&(ht(n.context)||typeof n.context=="number")&&n.context!=="",j=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(v=>{this.isValidLookup(s)||(d=v,!j4[`${j[0]}-${v}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(d)&&(j4[`${j[0]}-${v}`]=!0,this.logger.warn(`key "${r}" for languages "${j.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),j.forEach(T=>{if(this.isValidLookup(s))return;l=T;const P=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(P,f,T,v,n);else{let C;x&&(C=this.pluralResolver.getSuffix(T,n.count,n));const M=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(n.ordinal&&C.indexOf(L)===0&&P.push(f+C.replace(L,this.options.pluralSeparator)),P.push(f+C),b&&P.push(f+M)),_){const k=`${f}${this.options.contextSeparator||"_"}${n.context}`;P.push(k),x&&(n.ordinal&&C.indexOf(L)===0&&P.push(k+C.replace(L,this.options.pluralSeparator)),P.push(k+C),b&&P.push(k+M))}}let A;for(;A=P.pop();)this.isValidLookup(s)||(i=A,s=this.getResource(T,v,A,n))}))})}),{res:s,usedKey:r,exactUsedKey:i,usedLng:l,usedNS:d}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,s,r={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,s,r):this.resourceStore.getResource(e,n,s,r)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!ht(e.replace);let r=s?e.replace:e;if(s&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const i of n)delete r[i]}return r}static hasDefaultValue(e){const n="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&n===s.substring(0,n.length)&&e[s]!==void 0)return!0;return!1}}class C4{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ao.create("languageUtils")}getScriptPartFromCode(e){if(e=Ap(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Ap(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ht(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(s=>{if(n)return;const r=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&e.forEach(s=>{if(n)return;const r=this.getScriptPartFromCode(s);if(this.isSupportedCode(r))return n=r;const i=this.getLanguagePartFromCode(s);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(l=>{if(l===i)return l;if(!(l.indexOf("-")<0&&i.indexOf("-")<0)&&(l.indexOf("-")>0&&i.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===i||l.indexOf(i)===0&&i.length>1))return l})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ht(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let s=e[n];return s||(s=e[this.getScriptPartFromCode(n)]),s||(s=e[this.formatLanguageCode(n)]),s||(s=e[this.getLanguagePartFromCode(n)]),s||(s=e.default),s||[]}toResolveHierarchy(e,n){const s=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),r=[],i=l=>{l&&(this.isSupportedCode(l)?r.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return ht(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):ht(e)&&i(this.formatLanguageCode(e)),s.forEach(l=>{r.indexOf(l)<0&&i(this.formatLanguageCode(l))}),r}}const S4={zero:0,one:1,two:2,few:3,many:4,other:5},T4={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Qne{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=ao.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const s=Ap(e==="dev"?"en":e),r=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(s,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),T4;if(!e.match(/-|_/))return T4;const u=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(u,n)}return this.pluralRulesCache[i]=l,l}needsPlural(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,s={}){return this.getSuffixes(e,s).map(r=>`${n}${r}`)}getSuffixes(e,n={}){let s=this.getRule(e,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((r,i)=>S4[r]-S4[i]).map(r=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,n,s={}){const r=this.getRule(e,s);return r?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,s))}}const k4=(t,e,n,s=".",r=!0)=>{let i=Fne(t,e,n);return!i&&r&&ht(n)&&(i=qE(t,n,s),i===void 0&&(i=qE(e,n,s))),i},X_=t=>t.replace(/\$/g,"$$$$");class A4{constructor(e={}){this.logger=ao.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:r,prefix:i,prefixEscaped:l,suffix:d,suffixEscaped:u,formatSeparator:h,unescapeSuffix:f,unescapePrefix:p,nestingPrefix:x,nestingPrefixEscaped:b,nestingSuffix:_,nestingSuffixEscaped:j,nestingOptionsSeparator:v,maxReplaces:T,alwaysFormat:P}=e.interpolation;this.escape=n!==void 0?n:zne,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?qu(i):l||"{{",this.suffix=d?qu(d):u||"}}",this.formatSeparator=h||",",this.unescapePrefix=f?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=x?qu(x):b||qu("$t("),this.nestingSuffix=_?qu(_):j||qu(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=T||1e3,this.alwaysFormat=P!==void 0?P:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,s)=>n?.source===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,s,r){let i,l,d;const u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=b=>{if(b.indexOf(this.formatSeparator)<0){const T=k4(n,u,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,s,{...r,...n,interpolationkey:b}):T}const _=b.split(this.formatSeparator),j=_.shift().trim(),v=_.join(this.formatSeparator).trim();return this.format(k4(n,u,j,this.options.keySeparator,this.options.ignoreJSONStructure),v,s,{...r,...n,interpolationkey:j})};this.resetRegExp();const f=r?.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>X_(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?X_(this.escape(b)):X_(b)}].forEach(b=>{for(d=0;i=b.regex.exec(e);){const _=i[1].trim();if(l=h(_),l===void 0)if(typeof f=="function"){const v=f(e,i,r);l=ht(v)?v:""}else if(r&&Object.prototype.hasOwnProperty.call(r,_))l="";else if(p){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${e}`),l="";else!ht(l)&&!this.useRawValueToEscape&&(l=v4(l));const j=b.safeValue(l);if(e=e.replace(i[0],j),p?(b.regex.lastIndex+=l.length,b.regex.lastIndex-=i[0].length):b.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),e}nest(e,n,s={}){let r,i,l;const d=(u,h)=>{const f=this.nestingOptionsSeparator;if(u.indexOf(f)<0)return u;const p=u.split(new RegExp(`${f}[ ]*{`));let x=`{${p[1]}`;u=p[0],x=this.interpolate(x,l);const b=x.match(/'/g),_=x.match(/"/g);((b?.length??0)%2===0&&!_||_.length%2!==0)&&(x=x.replace(/'/g,'"'));try{l=JSON.parse(x),h&&(l={...h,...l})}catch(j){return this.logger.warn(`failed parsing options string in nesting for key ${u}`,j),`${u}${f}${x}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,u};for(;r=this.nestingRegexp.exec(e);){let u=[];l={...s},l=l.replace&&!ht(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(h!==-1&&(u=r[1].slice(h).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),r[1]=r[1].slice(0,h)),i=n(d.call(this,r[1].trim(),l),l),i&&r[0]===e&&!ht(i))return i;ht(i)||(i=v4(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),u.length&&(i=u.reduce((f,p)=>this.format(f,p,s.lng,{...s,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const Xne=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const s=t.split("(");e=s[0].toLowerCase().trim();const r=s[1].substring(0,s[1].length-1);e==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(l=>{if(l){const[d,...u]=l.split(":"),h=u.join(":").trim().replace(/^'+|'+$/g,""),f=d.trim();n[f]||(n[f]=h),h==="false"&&(n[f]=!1),h==="true"&&(n[f]=!0),isNaN(h)||(n[f]=parseInt(h,10))}})}return{formatName:e,formatOptions:n}},R4=t=>{const e={};return(n,s,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const l=s+JSON.stringify(i);let d=e[l];return d||(d=t(Ap(s),r),e[l]=d),d(n)}},Zne=t=>(e,n,s)=>t(Ap(n),s)(e);class Jne{constructor(e={}){this.logger=ao.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const s=n.cacheInBuiltFormats?R4:Zne;this.formats={number:s((r,i)=>{const l=new Intl.NumberFormat(r,{...i});return d=>l.format(d)}),currency:s((r,i)=>{const l=new Intl.NumberFormat(r,{...i,style:"currency"});return d=>l.format(d)}),datetime:s((r,i)=>{const l=new Intl.DateTimeFormat(r,{...i});return d=>l.format(d)}),relativetime:s((r,i)=>{const l=new Intl.RelativeTimeFormat(r,{...i});return d=>l.format(d,i.range||"day")}),list:s((r,i)=>{const l=new Intl.ListFormat(r,{...i});return d=>l.format(d)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=R4(n)}format(e,n,s,r={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(d=>d.indexOf(")")>-1)){const d=i.findIndex(u=>u.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,d)].join(this.formatSeparator)}return i.reduce((d,u)=>{const{formatName:h,formatOptions:f}=Xne(u);if(this.formats[h]){let p=d;try{const x=r?.formatParams?.[r.interpolationkey]||{},b=x.locale||x.lng||r.locale||r.lng||s;p=this.formats[h](d,b,{...f,...r,...x})}catch(x){this.logger.warn(x)}return p}else this.logger.warn(`there was no format function for ${h}`);return d},e)}}const ese=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class tse extends Wb{constructor(e,n,s,r={}){super(),this.backend=e,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=ao.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,r.backend,r)}queueLoad(e,n,s,r){const i={},l={},d={},u={};return e.forEach(h=>{let f=!0;n.forEach(p=>{const x=`${h}|${p}`;!s.reload&&this.store.hasResourceBundle(h,p)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?l[x]===void 0&&(l[x]=!0):(this.state[x]=1,f=!1,l[x]===void 0&&(l[x]=!0),i[x]===void 0&&(i[x]=!0),u[p]===void 0&&(u[p]=!0)))}),f||(d[h]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(u)}}loaded(e,n,s){const r=e.split("|"),i=r[0],l=r[1];n&&this.emit("failedLoading",i,l,n),!n&&s&&this.store.addResourceBundle(i,l,s,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&s&&(this.state[e]=0);const d={};this.queue.forEach(u=>{Bne(u.loaded,[i],l),ese(u,e),n&&u.errors.push(n),u.pendingCount===0&&!u.done&&(Object.keys(u.loaded).forEach(h=>{d[h]||(d[h]={});const f=u.loaded[h];f.length&&f.forEach(p=>{d[h][p]===void 0&&(d[h][p]=!0)})}),u.done=!0,u.errors.length?u.callback(u.errors):u.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(u=>!u.done)}read(e,n,s,r=0,i=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:s,tried:r,wait:i,callback:l});return}this.readingCalls++;const d=(h,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(h&&f&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,s,r+1,i*2,l)},i);return}l(h,f)},u=this.backend[s].bind(this.backend);if(u.length===2){try{const h=u(e,n);h&&typeof h.then=="function"?h.then(f=>d(null,f)).catch(d):d(null,h)}catch(h){d(h)}return}return u(e,n,d)}prepareLoading(e,n,s={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();ht(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ht(n)&&(n=[n]);const i=this.queueLoad(e,n,s,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(e,n,s){this.prepareLoading(e,n,{},s)}reload(e,n,s){this.prepareLoading(e,n,{reload:!0},s)}loadOne(e,n=""){const s=e.split("|"),r=s[0],i=s[1];this.read(r,i,"read",void 0,void 0,(l,d)=>{l&&this.logger.warn(`${n}loading namespace ${i} for language ${r} failed`,l),!l&&d&&this.logger.log(`${n}loaded namespace ${i} for language ${r}`,d),this.loaded(e,l,d)})}saveMissing(e,n,s,r,i,l={},d=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const u={...l,isUpdate:i},h=this.backend.create.bind(this.backend);if(h.length<6)try{let f;h.length===5?f=h(e,n,s,r,u):f=h(e,n,s,r),f&&typeof f.then=="function"?f.then(p=>d(null,p)).catch(d):d(null,f)}catch(f){d(f)}else h(e,n,s,r,d,u)}!e||!e[0]||this.store.addResource(e[0],n,s,r)}}}const D4=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ht(t[1])&&(e.defaultValue=t[1]),ht(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(s=>{e[s]=n[s]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),P4=t=>(ht(t.ns)&&(t.ns=[t.ns]),ht(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ht(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),W0=()=>{},nse=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class sp extends Wb{constructor(e={},n){if(super(),this.options=P4(e),this.services={},this.logger=ao,this.modules={external:[]},nse(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(ht(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=D4();this.options={...s,...this.options,...P4(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?ao.init(r(this.modules.logger),this.options):ao.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=Jne;const f=new C4(this.options);this.store=new N4(this.options.resources,this.options);const p=this.services;p.logger=ao,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new Qne(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(p.formatter=r(h),p.formatter.init&&p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new A4(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new tse(r(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(b,..._)=>{this.emit(b,..._)}),this.modules.languageDetector&&(p.languageDetector=r(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=r(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new wy(this.services,this.options),this.translator.on("*",(b,..._)=>{this.emit(b,..._)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,n||(n=W0),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...f)=>this.store[h](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...f)=>(this.store[h](...f),this)});const d=cf(),u=()=>{const h=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(p),n(f,p)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?u():setTimeout(u,0),d}loadResources(e,n=W0){let s=n;const r=ht(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(r?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const i=[],l=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(h=>{h!=="cimode"&&i.indexOf(h)<0&&i.push(h)})};r?l(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(u=>l(u)),this.options.preload?.forEach?.(d=>l(d)),this.services.backendConnector.load(i,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(d)})}else s(null)}reloadResources(e,n,s){const r=cf();return typeof e=="function"&&(s=e,e=void 0),typeof n=="function"&&(s=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),s||(s=W0),this.services.backendConnector.reload(e,n,i=>{r.resolve(),s(i)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&L9.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const s=cf();this.emit("languageChanging",e);const r=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},i=(d,u)=>{u?this.isLanguageChangingTo===e&&(r(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,s.resolve((...h)=>this.t(...h)),n&&n(d,(...h)=>this.t(...h))},l=d=>{!e&&!d&&this.services.languageDetector&&(d=[]);const u=ht(d)?d:d&&d[0],h=this.store.hasLanguageSomeTranslations(u)?u:this.services.languageUtils.getBestMatchFromCodes(ht(d)?[d]:d);h&&(this.language||r(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,f=>{i(f,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),s}getFixedT(e,n,s){const r=(i,l,...d)=>{let u;typeof l!="object"?u=this.options.overloadTranslationOptionHandler([i,l].concat(d)):u={...l},u.lng=u.lng||r.lng,u.lngs=u.lngs||r.lngs,u.ns=u.ns||r.ns,u.keyPrefix!==""&&(u.keyPrefix=u.keyPrefix||s||r.keyPrefix);const h=this.options.keySeparator||".";let f;return u.keyPrefix&&Array.isArray(i)?f=i.map(p=>(typeof p=="function"&&(p=WE(p,{...this.options,...l})),`${u.keyPrefix}${h}${p}`)):(typeof i=="function"&&(i=WE(i,{...this.options,...l})),f=u.keyPrefix?`${u.keyPrefix}${h}${i}`:i),this.t(f,u)};return ht(e)?r.lng=e:r.lngs=e,r.ns=n,r.keyPrefix=s,r}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const l=(d,u)=>{const h=this.services.backendConnector.state[`${d}|${u}`];return h===-1||h===0||h===2};if(n.precheck){const d=n.precheck(this,l);if(d!==void 0)return d}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(s,e)&&(!r||l(i,e)))}loadNamespaces(e,n){const s=cf();return this.options.ns?(ht(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{s.resolve(),n&&n(r)}),s):(n&&n(),Promise.resolve())}loadLanguages(e,n){const s=cf();ht(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(l=>r.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=r.concat(i),this.loadResources(l=>{s.resolve(),n&&n(l)}),s):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const r=new Intl.Locale(e);if(r&&r.getTextInfo){const i=r.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new C4(D4());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){const s=new sp(e,n);return s.createInstance=sp.createInstance,s}cloneInstance(e={},n=W0){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new sp(r);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(d=>{i[d]=this[d]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const d=Object.keys(this.store.data).reduce((u,h)=>(u[h]={...this.store.data[h]},u[h]=Object.keys(u[h]).reduce((f,p)=>(f[p]={...u[h][p]},f),u[h]),u),{});i.store=new N4(d,r),i.services.resourceStore=i.store}return e.interpolation&&(i.services.interpolator=new A4(r)),i.translator=new wy(i.services,r),i.translator.on("*",(d,...u)=>{i.emit(d,...u)}),i.init(r,n),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ks=sp.createInstance();Ks.createInstance;Ks.dir;Ks.init;Ks.loadResources;Ks.reloadResources;Ks.use;Ks.changeLanguage;Ks.getFixedT;Ks.t;Ks.exists;Ks.setDefaultNamespace;Ks.hasLoadedNamespace;Ks.loadNamespaces;Ks.loadLanguages;const sse=(t,e,n,s)=>{const r=[n,{code:e,...s||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(r,"warn","react-i18next::",!0);Xd(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...r):console?.warn&&console.warn(...r)},M4={},O9=(t,e,n,s)=>{Xd(n)&&M4[n]||(Xd(n)&&(M4[n]=new Date),sse(t,e,n,s))},V9=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},YE=(t,e,n)=>{t.loadNamespaces(e,V9(t,n))},L4=(t,e,n,s)=>{if(Xd(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return YE(t,n,s);n.forEach(r=>{t.options.ns.indexOf(r)<0&&t.options.ns.push(r)}),t.loadLanguages(e,V9(t,s))},rse=(t,e,n={})=>!e.languages||!e.languages.length?(O9(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!r(s.isLanguageChangingTo,t))return!1}}),Xd=t=>typeof t=="string",ase=t=>typeof t=="object"&&t!==null,ise=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ose={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},lse=t=>ose[t],cse=t=>t.replace(ise,lse);let GE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:cse};const dse=(t={})=>{GE={...GE,...t}},use=()=>GE;let U9;const hse=t=>{U9=t},mse=()=>U9,fse={type:"3rdParty",init(t){dse(t.options.react),hse(t)}},pse=y.createContext();class gse{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Z_={exports:{}},J_={};var I4;function xse(){if(I4)return J_;I4=1;var t=rb();function e(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var n=typeof Object.is=="function"?Object.is:e,s=t.useState,r=t.useEffect,i=t.useLayoutEffect,l=t.useDebugValue;function d(p,x){var b=x(),_=s({inst:{value:b,getSnapshot:x}}),j=_[0].inst,v=_[1];return i(function(){j.value=b,j.getSnapshot=x,u(j)&&v({inst:j})},[p,b,x]),r(function(){return u(j)&&v({inst:j}),p(function(){u(j)&&v({inst:j})})},[p]),l(b),b}function u(p){var x=p.getSnapshot;p=p.value;try{var b=x();return!n(p,b)}catch{return!0}}function h(p,x){return x()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return J_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,J_}var O4;function yse(){return O4||(O4=1,Z_.exports=xse()),Z_.exports}var bse=yse();const vse=(t,e)=>Xd(e)?e:ase(e)&&Xd(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,wse={t:vse,ready:!1},_se=()=>()=>{},ln=(t,e={})=>{const{i18n:n}=e,{i18n:s,defaultNS:r}=y.useContext(pse)||{},i=n||s||mse();i&&!i.reportNamespaces&&(i.reportNamespaces=new gse),i||O9(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=y.useMemo(()=>({...use(),...i?.options?.react,...e}),[i,e]),{useSuspense:d,keyPrefix:u}=l,h=t||r||i?.options?.defaultNS,f=Xd(h)?[h]:h||["translation"],p=y.useMemo(()=>f,f);i?.reportNamespaces?.addUsedNamespaces?.(p);const x=y.useRef(0),b=y.useCallback(S=>{if(!i)return _se;const{bindI18n:O,bindI18nStore:I}=l,F=()=>{x.current+=1,S()};return O&&i.on(O,F),I&&i.store.on(I,F),()=>{O&&O.split(" ").forEach($=>i.off($,F)),I&&I.split(" ").forEach($=>i.store.off($,F))}},[i,l]),_=y.useRef(),j=y.useCallback(()=>{if(!i)return wse;const S=!!(i.isInitialized||i.initializedStoreOnce)&&p.every(G=>rse(G,i,l)),O=e.lng||i.language,I=x.current,F=_.current;if(F&&F.ready===S&&F.lng===O&&F.keyPrefix===u&&F.revision===I)return F;const Q={t:i.getFixedT(O,l.nsMode==="fallback"?p:p[0],u),ready:S,lng:O,keyPrefix:u,revision:I};return _.current=Q,Q},[i,p,u,l,e.lng]),[v,T]=y.useState(0),{t:P,ready:A}=bse.useSyncExternalStore(b,j,j);y.useEffect(()=>{if(i&&!A&&!d){const S=()=>T(O=>O+1);e.lng?L4(i,e.lng,p,S):YE(i,p,S)}},[i,e.lng,p,A,d,v]);const C=i||{},M=y.useRef(null),L=y.useRef(),k=S=>{const O=Object.getOwnPropertyDescriptors(S);O.__original&&delete O.__original;const I=Object.create(Object.getPrototypeOf(S),O);if(!Object.prototype.hasOwnProperty.call(I,"__original"))try{Object.defineProperty(I,"__original",{value:S,writable:!1,enumerable:!1,configurable:!1})}catch{}return I},R=y.useMemo(()=>{const S=C,O=S?.language;let I=S;S&&(M.current&&M.current.__original===S?L.current!==O?(I=k(S),M.current=I,L.current=O):I=M.current:(I=k(S),M.current=I,L.current=O));const F=[P,I,A];return F.t=P,F.i18n=I,F.ready=A,F},[P,C,A,C.resolvedLanguage,C.language,C.languages]);if(i&&d&&!A)throw new Promise(S=>{const O=()=>S();e.lng?L4(i,e.lng,p,O):YE(i,p,O)});return R},{slice:Ese,forEach:Nse}=[];function jse(t){return Nse.call(Ese.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}function Cse(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(t))}const V4=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Sse=function(t,e){const s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},r=encodeURIComponent(e);let i=`${t}=${r}`;if(s.maxAge>0){const l=s.maxAge-0;if(Number.isNaN(l))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(l)}`}if(s.domain){if(!V4.test(s.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${s.domain}`}if(s.path){if(!V4.test(s.path))throw new TypeError("option path is invalid");i+=`; Path=${s.path}`}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(i+="; Partitioned"),i},U4={create(t,e,n,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+n*60*1e3)),s&&(r.domain=s),document.cookie=Sse(t,e,r)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let s=0;s<n.length;s++){let r=n[s];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return r.substring(e.length,r.length)}return null},remove(t,e){this.create(t,"",-1,e)}};var Tse={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return U4.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:s,cookieDomain:r,cookieOptions:i}=e;n&&typeof document<"u"&&U4.create(n,t,s,r,i)}},kse={name:"querystring",lookup(t){let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const i=s.substring(1).split("&");for(let l=0;l<i.length;l++){const d=i[l].indexOf("=");d>0&&i[l].substring(0,d)===e&&(n=i[l].substring(d+1))}}return n}},Ase={name:"hash",lookup(t){let{lookupHash:e,lookupFromHashIndex:n}=t,s;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const i=r.substring(1);if(e){const l=i.split("&");for(let d=0;d<l.length;d++){const u=l[d].indexOf("=");u>0&&l[d].substring(0,u)===e&&(s=l[d].substring(u+1))}}if(s)return s;if(!s&&n>-1){const l=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?l[typeof n=="number"?n:0]?.replace("/",""):void 0}}}return s}};let Wu=null;const B4=()=>{if(Wu!==null)return Wu;try{if(Wu=typeof window<"u"&&window.localStorage!==null,!Wu)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Wu=!1}return Wu};var Rse={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&B4())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&B4()&&window.localStorage.setItem(n,t)}};let Yu=null;const F4=()=>{if(Yu!==null)return Yu;try{if(Yu=typeof window<"u"&&window.sessionStorage!==null,!Yu)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{Yu=!1}return Yu};var Dse={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&F4())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&F4()&&window.sessionStorage.setItem(n,t)}},Pse={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:s,language:r}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);s&&e.push(s),r&&e.push(r)}return e.length>0?e:void 0}},Mse={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const s=e||(typeof document<"u"?document.documentElement:null);return s&&typeof s.getAttribute=="function"&&(n=s.getAttribute("lang")),n}},Lse={name:"path",lookup(t){let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?n[typeof e=="number"?e:0]?.replace("/",""):void 0}},Ise={name:"subdomain",lookup(t){let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,s=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(s)return s[n]}};let B9=!1;try{document.cookie,B9=!0}catch{}const F9=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];B9||F9.splice(1,1);const Ose=()=>({order:F9,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class $9{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=jse(n,this.options||{},Ose()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=r=>r.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(Tse),this.addDetector(kse),this.addDetector(Rse),this.addDetector(Dse),this.addDetector(Pse),this.addDetector(Mse),this.addDetector(Lse),this.addDetector(Ise),this.addDetector(Ase)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return e.forEach(s=>{if(this.detectors[s]){let r=this.detectors[s].lookup(this.options);r&&typeof r=="string"&&(r=[r]),r&&(n=n.concat(r))}}),n=n.filter(s=>s!=null&&!Cse(s)).map(s=>this.options.convertDetectedLanguage(s)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(s=>{this.detectors[s]&&this.detectors[s].cacheUserLanguage(e,this.options)}))}}$9.type="languageDetector";function KE(t){"@babel/helpers - typeof";return KE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KE(t)}function z9(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":KE(XMLHttpRequest))==="object"}function Vse(t){return!!t&&typeof t.then=="function"}function Use(t){return Vse(t)?t:Promise.resolve(t)}function $4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function z4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$4(Object(n),!0).forEach(function(s){Bse(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Bse(t,e,n){return(e=Fse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fse(t){var e=$se(t,"string");return Zd(e)=="symbol"?e:e+""}function $se(t,e){if(Zd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Zd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zd(t){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(t)}var Ic=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Ic=global.fetch:typeof window<"u"&&window.fetch&&(Ic=window.fetch);var Rp;z9()&&(typeof global<"u"&&global.XMLHttpRequest?Rp=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Rp=window.XMLHttpRequest));var _y;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?_y=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(_y=window.ActiveXObject));typeof Ic!="function"&&(Ic=void 0);if(!Ic&&!Rp&&!_y)try{tn(()=>import("./browser-ponyfill-BI8lbyBA.js").then(t=>t.b),[]).then(function(t){Ic=t.default}).catch(function(){})}catch{}var QE=function(e,n){if(n&&Zd(n)==="object"){var s="";for(var r in n)s+="&"+encodeURIComponent(r)+"="+encodeURIComponent(n[r]);if(!s)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+s.slice(1)}return e},H4=function(e,n,s,r){var i=function(u){if(!u.ok)return s(u.statusText||"Error",{status:u.status});u.text().then(function(h){s(null,{status:u.status,data:h})}).catch(s)};if(r){var l=r(e,n);if(l instanceof Promise){l.then(i).catch(s);return}}typeof fetch=="function"?fetch(e,n).then(i).catch(s):Ic(e,n).then(i).catch(s)},q4=!1,zse=function(e,n,s,r){e.queryStringParams&&(n=QE(n,e.queryStringParams));var i=z4({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),s&&(i["Content-Type"]="application/json");var l=typeof e.requestOptions=="function"?e.requestOptions(s):e.requestOptions,d=z4({method:s?"POST":"GET",body:s?e.stringify(s):void 0,headers:i},q4?{}:l),u=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{H4(n,d,r,u)}catch(h){if(!l||Object.keys(l).length===0||!h.message||h.message.indexOf("not implemented")<0)return r(h);try{Object.keys(l).forEach(function(f){delete d[f]}),H4(n,d,r,u),q4=!0}catch(f){r(f)}}},Hse=function(e,n,s,r){s&&Zd(s)==="object"&&(s=QE("",s).slice(1)),e.queryStringParams&&(n=QE(n,e.queryStringParams));try{var i=Rp?new Rp:new _y("MSXML2.XMLHTTP.3.0");i.open(s?"POST":"GET",n,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,s&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var l=e.customHeaders;if(l=typeof l=="function"?l():l,l)for(var d in l)i.setRequestHeader(d,l[d]);i.onreadystatechange=function(){i.readyState>3&&r(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(s)}catch(u){console&&console.log(u)}},qse=function(e,n,s,r){if(typeof s=="function"&&(r=s,s=void 0),r=r||function(){},Ic&&n.indexOf("file:")!==0)return zse(e,n,s,r);if(z9()||typeof ActiveXObject=="function")return Hse(e,n,s,r);r(new Error("No fetch and no xhr implementation found!"))};function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}function W4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function e1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W4(Object(n),!0).forEach(function(s){H9(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Wse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yse(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,q9(s.key),s)}}function Gse(t,e,n){return e&&Yse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function H9(t,e,n){return(e=q9(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q9(t){var e=Kse(t,"string");return zh(e)=="symbol"?e:e+""}function Kse(t,e){if(zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(zh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qse=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,s,r){return H9({},s,r||"")},parseLoadPayload:function(n,s){},request:qse,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},W9=(function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Wse(this,t),this.services=e,this.options=n,this.allOptions=s,this.type="backend",this.init(e,n,s)}return Gse(t,[{key:"init",value:function(n){var s=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=e1(e1(e1({},Qse()),this.options||{}),r),this.allOptions=i,this.services&&this.options.reloadInterval){var l=setInterval(function(){return s.reload()},this.options.reloadInterval);zh(l)==="object"&&typeof l.unref=="function"&&l.unref()}}},{key:"readMulti",value:function(n,s,r){this._readAny(n,n,s,s,r)}},{key:"read",value:function(n,s,r){this._readAny([n],n,[s],s,r)}},{key:"_readAny",value:function(n,s,r,i,l){var d=this,u=this.options.loadPath;typeof this.options.loadPath=="function"&&(u=this.options.loadPath(n,r)),u=Use(u),u.then(function(h){if(!h)return l(null,{});var f=d.services.interpolator.interpolate(h,{lng:n.join("+"),ns:r.join("+")});d.loadUrl(f,l,s,i)})}},{key:"loadUrl",value:function(n,s,r,i){var l=this,d=typeof r=="string"?[r]:r,u=typeof i=="string"?[i]:i,h=this.options.parseLoadPayload(d,u);this.options.request(this.options,n,h,function(f,p){if(p&&(p.status>=500&&p.status<600||!p.status))return s("failed loading "+n+"; status code: "+p.status,!0);if(p&&p.status>=400&&p.status<500)return s("failed loading "+n+"; status code: "+p.status,!1);if(!p&&f&&f.message){var x=f.message.toLowerCase(),b=["failed","fetch","network","load"].find(function(v){return x.indexOf(v)>-1});if(b)return s("failed loading "+n+": "+f.message,!0)}if(f)return s(f,!1);var _,j;try{typeof p.data=="string"?_=l.options.parse(p.data,r,i):_=p.data}catch{j="failed parsing "+n+" to json"}if(j)return s(j,!1);s(null,_)})}},{key:"create",value:function(n,s,r,i,l){var d=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var u=this.options.parsePayload(s,r,i),h=0,f=[],p=[];n.forEach(function(x){var b=d.options.addPath;typeof d.options.addPath=="function"&&(b=d.options.addPath(x,s));var _=d.services.interpolator.interpolate(b,{lng:x,ns:s});d.options.request(d.options,_,u,function(j,v){h+=1,f.push(j),p.push(v),h===n.length&&typeof l=="function"&&l(f,p)})})}}},{key:"reload",value:function(){var n=this,s=this.services,r=s.backendConnector,i=s.languageUtils,l=s.logger,d=r.language;if(!(d&&d.toLowerCase()==="cimode")){var u=[],h=function(p){var x=i.toResolveHierarchy(p);x.forEach(function(b){u.indexOf(b)<0&&u.push(b)})};h(d),this.allOptions.preload&&this.allOptions.preload.forEach(function(f){return h(f)}),u.forEach(function(f){n.allOptions.ns.forEach(function(p){r.read(f,p,"read",null,null,function(x,b){x&&l.warn("loading namespace ".concat(p," for language ").concat(f," failed"),x),!x&&b&&l.log("loaded namespace ".concat(p," for language ").concat(f),b),r.loaded("".concat(f,"|").concat(p),x,b)})})})}}}])})();W9.type="backend";const Y9=["es","en"],Xse={order:["localStorage","querystring","navigator"],lookupLocalStorage:"i18nextLng",lookupQuerystring:"lng",caches:["localStorage"],excludeCacheFor:["cimode"]},Zse={loadPath:"/locales/{{lng}}/{{ns}}.json",defaultNS:"translation",crossDomain:!1};if(typeof window<"u")try{const t=localStorage.getItem("i18nextLng");if(t&&t.includes("-")){const e=t.split("-")[0];localStorage.setItem("i18nextLng",e)}}catch(t){console.warn("[i18n] No se pudo normalizar lenguaje almacenado",t)}Ks.use(fse).use($9).use(W9).init({fallbackLng:"es",fallbackNS:"translation",supportedLngs:Y9,load:"languageOnly",defaultNS:"translation",ns:["translation","dashboard","appointments","notifications","landing","schedule"],debug:!1,interpolation:{escapeValue:!1},detection:Xse,backend:Zse,cache:{enabled:!0},react:{useSuspense:!1,bindI18n:"languageChanged loaded",bindI18nStore:"added",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"]}});Ks.on("languageChanged",t=>{console.log(`[i18n] Language changed to: ${t}`),typeof document<"u"&&(document.documentElement.lang=t),typeof window<"u"&&window.gtag&&window.gtag("event","language_change",{language:t})});Ks.on("failedLoading",(t,e,n)=>{console.error(`[i18n] Failed loading ${t}/${e}:`,n)});const XE=async t=>{try{await Ks.changeLanguage(t),localStorage.setItem("i18nextLng",t)}catch(e){console.error("[i18n] Error changing language:",e)}},jh=()=>{try{const e=(Ks.language||typeof localStorage<"u"&&localStorage.getItem("i18nextLng")||""||(typeof navigator<"u"?navigator.language:""))?.split?.("-")[0];return e&&Y9.includes(e)?e:"es"}catch(t){return console.warn("[i18n] Unable to read current language, falling back to es",t),"es"}},Jse="https://www.pymerp.cl",ere=()=>typeof window<"u"&&window.location?.origin?window.location.origin:Jse,tre=()=>({url:`${ere()}/auth/action`,handleCodeInApp:!1}),nre=t=>{try{t.languageCode=jh()}catch{}},sre=async(t,e)=>(await nQ(qn,t,e)).user,Yb=!0;class Tr extends Error{code;constructor(e,n){super(n),this.name="AuthFlowError",this.code=e}}const G9=async()=>{await AN(qn)},Y0=async()=>{await AN(qn)},rre=async t=>{const e=qn.currentUser;if(!e)throw new Error("No user logged in");await sQ(e,t);const n=e.email||"";let s=await Tj(e.uid);if(!s&&n){const r=await Hb(n.toLowerCase());r&&(await Fh({email:r.email,status:r.status,role:r.role,company_id:r.company_id},e.uid),s={...r,id:e.uid})}s||await Fh({email:n.toLowerCase(),status:Rr.FORCE_PASSWORD_CHANGE,role:ct.ENTREPRENEUR},e.uid),await Qd(e.uid,{status:Rr.ACTIVE})},are=async(t,e)=>(await tQ(qn,t,e)).user,ire=async(t,e)=>{nre(qn),await XK(qn,t,tre())},Mj=async()=>{const t=qn.currentUser;return!t||!t.email?null:Gb(t,{allowAutoProvision:Yb})},K9=t=>(t||"").trim().toLowerCase(),Y4=(t,e)=>{const n=new Set(t||[]);return n.add(e),Array.from(n)},ore=t=>{const n={email:K9(t.email),auth_providers:["google"],status:Rr.ACTIVE,role:ct.ENTREPRENEUR,last_login_at:new Date,updated_at:new Date};return t.displayName&&(n.display_name=t.displayName),t.photoURL&&(n.photo_url=t.photoURL),n},Ey=t=>{if(t instanceof Tr)return t;const e=t?.code||"",n=String(t?.message||"").toLowerCase();if(n.includes("trustedhtml")||n.includes("trusted html")||n.includes("popup blocked")||n.includes("popup bloqueado")||n.includes("extension")||n.includes("contentscript"))return new Tr("POPUP_BLOCKED","El navegador o una extensin bloque la ventana emergente. Se intentar con redireccin.");switch(e){case"auth/account-exists-with-different-credential":return new Tr("ACCOUNT_EXISTS_WITH_DIFFERENT_CREDENTIAL","Ya existe una cuenta con otro mtodo de inicio de sesin.");case"auth/popup-closed-by-user":return new Tr("POPUP_CLOSED_BY_USER","Cerraste la ventana de inicio de sesin.");case"auth/popup-blocked":case"auth/cancelled-popup-request":return new Tr("POPUP_BLOCKED","El navegador bloque la ventana emergente. Se intentar con redireccin.");case"auth/network-request-failed":return new Tr("NETWORK_ERROR","Error de red al iniciar sesin.");default:return new Tr(e||"UNKNOWN",t?.message||"Error de autenticacin")}},Gb=async(t,e={})=>{const n=e.allowAutoProvision??Yb,s=K9(t.email);if(!s)throw new Tr("MISSING_EMAIL","La cuenta de Google no tiene un email vlido.");try{let r=await Tj(t.uid);if(!r){const l=await Hb(s);if(l){const d={...l,id:t.uid,email:s},u={email:d.email,role:d.role,status:d.status,auth_providers:Y4(d.auth_providers,"google"),last_login_at:new Date,updated_at:new Date};d.company_id&&(u.company_id=d.company_id),d.display_name&&(u.display_name=d.display_name),d.photo_url&&(u.photo_url=d.photo_url),await Fh(u,t.uid),r=d}}if(!r&&!n)throw await AN(qn),new Tr("USER_NOT_PROVISIONED","La cuenta no est provisionada en AgendaWeb. Contacta al administrador.");if(!r){const l=ore(t),d=await Fh(l,t.uid);return{...l,id:d,created_at:new Date}}const i={last_login_at:new Date,updated_at:new Date,auth_providers:Y4(r.auth_providers,"google")};return!r.display_name&&t.displayName&&(i.display_name=t.displayName),!r.photo_url&&t.photoURL&&(i.photo_url=t.photoURL),await Qd(r.id,i),{...r,...i}}catch(r){throw Ey(r)}},t1=new il,lre=()=>{if(typeof window>"u")return!1;const t=navigator.userAgent||navigator.vendor||window.opera||"",e=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(t.toLowerCase()),n=window.innerWidth<768;return e||n},Q9=async(t={})=>{let e=t.mode||"auto";if(e==="auto"&&(e=lre()?"redirect":"popup"),e==="redirect")return await nD(qn,t1),null;try{const n=await SQ(qn,t1),s=await Gb(n.user,{allowAutoProvision:Yb});return{firebaseUser:n.user,firestoreUser:s}}catch(n){Re.warn("Error en signInWithPopup:",n);const s=n?.code||"",r=n?.message||"";if(s==="auth/popup-blocked"||s==="auth/popup-closed-by-user"||s==="auth/cancelled-popup-request"||r.includes("TrustedHTML")||r.includes("popup")||r.includes("blocked")){Re.warn("Popup no disponible, usando redirect para Google Sign-In",{errorCode:s,errorMessage:r});try{return await nD(qn,t1),null}catch(l){throw Re.error("Error tambin en redirect:",l),Ey(l)}}throw Ey(n)}};let df=null;const cre=async()=>df||(df=(async()=>{try{const t=await MQ(qn);if(!t?.user)return null;const e=await Gb(t.user,{allowAutoProvision:Yb});return{firebaseUser:t.user,firestoreUser:e}}catch(t){throw Ey(t)}})().finally(()=>{df=null}),df),Ch=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Oc=globalThis,rp="10.27.0";function Lj(){return Ij(Oc),Oc}function Ij(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||rp,e[rp]=e[rp]||{}}function Oj(t,e,n=Oc){const s=n.__SENTRY__=n.__SENTRY__||{},r=s[rp]=s[rp]||{};return r[t]||(r[t]=e())}const dre="Sentry Logger ",G4={};function X9(t){if(!("console"in Oc))return t();const e=Oc.console,n={},s=Object.keys(G4);s.forEach(r=>{const i=G4[r];n[r]=e[r],e[r]=i});try{return t()}finally{s.forEach(r=>{e[r]=n[r]})}}function ure(){Uj().enabled=!0}function hre(){Uj().enabled=!1}function Z9(){return Uj().enabled}function mre(...t){Vj("log",...t)}function fre(...t){Vj("warn",...t)}function pre(...t){Vj("error",...t)}function Vj(t,...e){Ch&&Z9()&&X9(()=>{Oc.console[t](`${dre}[${t}]:`,...e)})}function Uj(){return Ch?Oj("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Ax={enable:ure,disable:hre,isEnabled:Z9,log:mre,warn:fre,error:pre},gre=Object.prototype.toString;function xre(t,e){return gre.call(t)===`[object ${e}]`}function yre(t){return xre(t,"Object")}function bre(t){return!!(t?.then&&typeof t.then=="function")}function vre(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{Ch&&Ax.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function wre(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function _re(){const t=Oc;return t.crypto||t.msCrypto}let n1;function Ere(){return Math.random()*16}function ap(t=_re()){try{if(t?.randomUUID)return t.randomUUID().replace(/-/g,"")}catch{}return n1||(n1="10000000100040008000"+1e11),n1.replace(/[018]/g,e=>(e^(Ere()&15)>>e/4).toString(16))}const J9=1e3;function Bj(){return Date.now()/J9}function Nre(){const{performance:t}=Oc;if(!t?.now||!t.timeOrigin)return Bj;const e=t.timeOrigin;return()=>(e+t.now())/J9}let K4;function jre(){return(K4??(K4=Nre()))()}function Cre(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||jre(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:ap()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function e8(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const s={...t};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e8(s[r],e[r],n-1));return s}function Q4(){return ap()}const ZE="_sentrySpan";function X4(t,e){e?vre(t,ZE,e):delete t[ZE]}function Z4(t){return t[ZE]}const Sre=100;class Vc{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Q4(),sampleRand:Math.random()}}clone(){const e=new Vc;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,X4(e,Z4(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Cre(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this.setTags({[e]:n})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,n){return this.setAttributes({[e]:n})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,s=n instanceof Vc?n.getScopeData():yre(n)?e:void 0,{tags:r,attributes:i,extra:l,user:d,contexts:u,level:h,fingerprint:f=[],propagationContext:p}=s||{};return this._tags={...this._tags,...r},this._attributes={...this._attributes,...i},this._extra={...this._extra,...l},this._contexts={...this._contexts,...u},d&&Object.keys(d).length&&(this._user=d),h&&(this._level=h),f.length&&(this._fingerprint=f),p&&(this._propagationContext=p),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,X4(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Q4(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const s=typeof n=="number"?n:Sre;if(s<=0)return this;const r={timestamp:Bj(),...e,message:e.message?wre(e.message,2048):e.message};return this._breadcrumbs.push(r),this._breadcrumbs.length>s&&(this._breadcrumbs=this._breadcrumbs.slice(-s),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Z4(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=e8(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const s=n?.event_id||ap();if(!this._client)return Ch&&Ax.warn("No client configured on scope - will not capture exception!"),s;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...n,event_id:s},this),s}captureMessage(e,n,s){const r=s?.event_id||ap();if(!this._client)return Ch&&Ax.warn("No client configured on scope - will not capture message!"),r;const i=s?.syntheticException??new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...s,event_id:r},this),r}captureEvent(e,n){const s=n?.event_id||ap();return this._client?(this._client.captureEvent(e,{...n,event_id:s},this),s):(Ch&&Ax.warn("No client configured on scope - will not capture event!"),s)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function Tre(){return Oj("defaultCurrentScope",()=>new Vc)}function kre(){return Oj("defaultIsolationScope",()=>new Vc)}class Are{constructor(e,n){let s;e?s=e:s=new Vc;let r;n?r=n:r=new Vc,this._stack=[{scope:s}],this._isolationScope=r}withScope(e){const n=this._pushScope();let s;try{s=e(n)}catch(r){throw this._popScope(),r}return bre(s)?s.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),s)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Hh(){const t=Lj(),e=Ij(t);return e.stack=e.stack||new Are(Tre(),kre())}function Rre(t){return Hh().withScope(t)}function Dre(t,e){const n=Hh();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function J4(t){return Hh().withScope(()=>t(Hh().getIsolationScope()))}function Pre(){return{withIsolationScope:J4,withScope:Rre,withSetScope:Dre,withSetIsolationScope:(t,e)=>J4(e),getCurrentScope:()=>Hh().getScope(),getIsolationScope:()=>Hh().getIsolationScope()}}function t8(t){const e=Ij(t);return e.acs?e.acs:Pre()}function Fj(){const t=Lj();return t8(t).getCurrentScope()}function Mre(){const t=Lj();return t8(t).getIsolationScope()}function Lre(){return Fj().getClient()}function Ire(t){if(t)return Ore(t)?{captureContext:t}:Ure(t)?{captureContext:t}:t}function Ore(t){return t instanceof Vc||typeof t=="function"}const Vre=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Ure(t){return Object.keys(t).some(e=>Vre.includes(e))}function Bre(t,e){return Fj().captureException(t,Ire(e))}function Fre(t,e){const n=typeof e=="string"?e:void 0,s=typeof e!="string"?{captureContext:e}:void 0;return Fj().captureMessage(t,n,s)}const $re=100;function zre(t,e){const n=Lre(),s=Mre();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:i=$re}=n.getOptions();if(i<=0)return;const d={timestamp:Bj(),...t},u=r?X9(()=>r(d,e)):d;u!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",u,e),s.addBreadcrumb(u,i))}const Hre=()=>{{Re.warn("Sentry DSN no configurado. Los errores no se enviarn a Sentry.");return}},$j=(t,e)=>{Bre(t,{contexts:e?{custom:e}:void 0})},dl=(t,e)=>{zre({message:t,data:e,level:"info",timestamp:Date.now()/1e3})},qre=Object.freeze(Object.defineProperty({__proto__:null,addBreadcrumb:dl,captureException:$j,initSentry:Hre},Symbol.toStringTag,{value:"Module"}));var tr=(t=>(t.NETWORK="NETWORK_ERROR",t.AUTHENTICATION="AUTHENTICATION_ERROR",t.AUTHORIZATION="AUTHORIZATION_ERROR",t.VALIDATION="VALIDATION_ERROR",t.NOT_FOUND="NOT_FOUND_ERROR",t.SERVER="SERVER_ERROR",t.UNKNOWN="UNKNOWN_ERROR",t))(tr||{});class nr extends Error{type;context;timestamp;userId;constructor(e,n="UNKNOWN_ERROR",s){super(e),this.name="AppError",this.type=n,this.context=s,this.timestamp=new Date,Error.captureStackTrace&&Error.captureStackTrace(this,nr)}}class Wre{userId;setUser(e){this.userId=e}createErrorReport(e){const n={message:e.message,type:e instanceof nr?e.type:"UNKNOWN_ERROR",stack:e.stack,timestamp:new Date,userId:this.userId,userAgent:typeof window<"u"?window.navigator.userAgent:void 0,url:typeof window<"u"?window.location.href:void 0};return e instanceof nr&&e.context&&(n.context=e.context),n}handle(e,n=!0){const s=this.createErrorReport(e);this.sendToSentry(s),n&&this.showUserFriendlyMessage(s.type)}sendToSentry(e){try{$j(new Error(e.message),{type:e.type,userId:e.userId,url:e.url,...e.context})}catch(n){Re.error("Error enviando a Sentry:",n)}}showUserFriendlyMessage(e){}handleNetworkError(e,n){const s=new nr(e.message||"Error de red","NETWORK_ERROR",n);this.handle(s)}handleAuthError(e){const n="AUTHENTICATION_ERROR";let s="Error de autenticacin";switch(e.code){case"auth/wrong-password":case"auth/user-not-found":s="Email o contrasea incorrectos";break;case"auth/email-already-in-use":s="Este email ya est registrado";break;case"auth/weak-password":s="La contrasea es muy dbil";break;case"auth/invalid-email":s="Email invlido";break;case"auth/user-disabled":s="Esta cuenta ha sido deshabilitada";break;case"auth/too-many-requests":s="Demasiados intentos. Intenta ms tarde";break;default:s=e.message||"Error de autenticacin"}const r=new nr(s,n,{code:e.code});this.handle(r)}handleFirestoreError(e,n){let s="SERVER_ERROR";e.code==="permission-denied"?s="AUTHORIZATION_ERROR":e.code==="not-found"&&(s="NOT_FOUND_ERROR");const r=new nr(e.message||"Error de base de datos",s,{...n,code:e.code});this.handle(r)}async wrapAsync(e,n){try{return await e()}catch(s){return this.handle(new nr(s.message||"Error en operacin asncrona","UNKNOWN_ERROR",n)),null}}}const on=new Wre,n8=t=>{const{projectId:e,functionsRegion:n}=xn.firebase;return`https://${n}-${e}.cloudfunctions.net/${t}`},JE=async(t,e)=>{const n=n8("setCompanyClaimHttp"),s=qn.currentUser,r=s?await s.getIdToken():null,i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},body:JSON.stringify({uid:t,companyId:e})});if(!i.ok){const d=await i.text();throw new Error(d||"Error al establecer claim de compaa")}const l=await i.json();if(l.success!==!0)throw new Error(l.error||"Error al establecer claim de compaa");return l},Yre=async t=>{const e=n8("deleteUserAccountHttp"),n=qn.currentUser,s=n?await n.getIdToken():null,r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...s?{Authorization:`Bearer ${s}`}:{}},body:JSON.stringify(t)});if(!r.ok){const l=await r.text();throw new Error(l||"Error al eliminar cuenta")}const i=await r.json();if(i.success!==!0)throw new Error(i.error||"Error al eliminar cuenta");return i},Gre=async()=>{const{functions:t}=await tn(async()=>{const{functions:s}=await Promise.resolve().then(()=>zb);return{functions:s}},void 0),{httpsCallable:e}=await tn(async()=>{const{httpsCallable:s}=await Promise.resolve().then(()=>Fb);return{httpsCallable:s}},void 0),n=e(t,"backfillCompanies");try{return(await n({})).data}catch(s){console.error("Error calling backfillCompanies:",s);const r=s?.code||s?.message;if(r==="permission-denied"||r==="functions/permission-denied")throw new nr("Solo SUPERADMIN puede ejecutar el backfill",tr.AUTHORIZATION);const i=s?.details||s?.message||"Error al ejecutar backfill";throw new nr(i,tr.SERVER)}},Kre=async()=>{const{functions:t}=await tn(async()=>{const{functions:s}=await Promise.resolve().then(()=>zb);return{functions:s}},void 0),{httpsCallable:e}=await tn(async()=>{const{httpsCallable:s}=await Promise.resolve().then(()=>Fb);return{httpsCallable:s}},void 0),n=e(t,"enablePublicForCompaniesWithLocation");try{return(await n({})).data}catch(s){console.error("Error calling enablePublicForCompaniesWithLocation:",s);const r=s?.code||s?.message;if(r==="permission-denied"||r==="functions/permission-denied")throw new nr("Solo SUPERADMIN puede ejecutar esta funcin",tr.AUTHORIZATION);const i=s?.details||s?.message||"Error al habilitar empresas pblicas";throw new nr(i,tr.SERVER)}},Qre=async()=>{const{functions:t}=await tn(async()=>{const{functions:s}=await Promise.resolve().then(()=>zb);return{functions:s}},void 0),{httpsCallable:e}=await tn(async()=>{const{httpsCallable:s}=await Promise.resolve().then(()=>Fb);return{httpsCallable:s}},void 0),n=e(t,"syncPublicCompanies");try{return(await n({})).data}catch(s){console.error("Error calling syncPublicCompanies:",s);const r=s?.code||s?.message;if(r==="permission-denied"||r==="functions/permission-denied")throw new nr("Solo SUPERADMIN puede ejecutar esta funcin",tr.AUTHORIZATION);const i=s?.details||s?.message||"Error al sincronizar empresas pblicas";throw new nr(i,tr.SERVER)}},s8=y.createContext({firebaseUser:null,firestoreUser:null,loading:!0,redirectResult:null,clearRedirectResult:()=>{}}),wt=()=>y.useContext(s8),Xre=({children:t})=>{const e=y.useMemo(()=>{if(xn.app.environment==="e2e"||xn.e2eUser)return!0;try{return typeof localStorage<"u"&&!!localStorage.getItem("e2e:user")}catch(b){return Re.warn("E2E bypass localStorage check failed:",b),!1}},[]),n=y.useMemo(()=>{if(!e)return null;try{const b=typeof localStorage<"u"&&localStorage.getItem("e2e:user")||xn.e2eUser;return b&&{founder:{id:"u-entrepreneur",email:"founder@demo.com",role:"ENTREPRENEUR",status:"ACTIVE",company_id:"company-services",created_at:new Date},seller:{id:"u-product-owner",email:"seller@demo.com",role:"ENTREPRENEUR",status:"ACTIVE",company_id:"company-products",created_at:new Date},admin:{id:"u-admin",email:"admin@demo.com",role:"SUPERADMIN",status:"ACTIVE",created_at:new Date},force:{id:"u-force-reset",email:"force@demo.com",role:"ENTREPRENEUR",status:"FORCE_PASSWORD_CHANGE",company_id:"company-services",created_at:new Date}}[b]||null}catch(b){return Re.warn("E2E auth bypass fall:",b),null}},[e]),[s,r]=y.useState(n?{uid:n.id,email:n.email}:null),[i,l]=y.useState(n),[d,u]=y.useState(!n),[h,f]=y.useState(null),p=y.useCallback(()=>f(null),[]);y.useEffect(()=>{if(n)return;let b=!0;return cre().then(_=>{b&&_&&f(_)}).catch(_=>{Re.warn("Error procesando redirect de Google:",_)}),()=>{b=!1}},[n]),y.useEffect(()=>n?void 0:oQ(qn,async _=>{try{if(r(_),_)try{const j=await Mj();if(l(j),j?.company_id)try{await JE(_.uid,j.company_id)}catch(v){Re.warn("No se pudo sincronizar claim de compaa:",v)}}catch(j){Re.error("Error obteniendo usuario de Firestore:",j),l(null)}else l(null)}catch(j){Re.error("Error en AuthContext:",j)}finally{u(!1)}}),[]);const x=y.useMemo(()=>({firebaseUser:s,firestoreUser:i,loading:d,redirectResult:h,clearRedirectResult:p}),[s,i,d,h,p]);return a.jsx(s8.Provider,{value:x,children:t})},gt=({children:t,requiredRole:e,requireActive:n=!0})=>{const{firebaseUser:s,firestoreUser:r,loading:i}=wt();return xn.app.environment==="e2e"?a.jsx(a.Fragment,{children:t}):i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):!s||!r?a.jsx(v_,{to:"/login",replace:!0}):n&&r.status===Rr.FORCE_PASSWORD_CHANGE?a.jsx(v_,{to:"/change-password",replace:!0}):e&&r.role!==e?a.jsx(v_,{to:"/dashboard",replace:!0}):a.jsx(a.Fragment,{children:t})};class Gi extends y.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){Re.error("ErrorBoundary caught an error:",e,n),this.setState({errorInfo:n}),this.props.onError&&this.props.onError(e,n),$j(e,{componentStack:n.componentStack})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-8",children:[a.jsx("div",{className:"flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:"Algo sali mal"}),a.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Lo sentimos, ha ocurrido un error inesperado. Nuestro equipo ha sido notificado."}),!1,a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:this.handleReset,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Intentar de nuevo"}),a.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg transition-colors",children:"Ir al inicio"})]}),a.jsxs("p",{className:"text-xs text-gray-500 text-center mt-4",children:["Error ID: ",Date.now().toString(36)]})]})}):this.props.children}}function Oe({children:t}){return a.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:"easeInOut"},children:t})}function s1({href:t,children:e}){return a.jsx("a",{href:t,className:"skip-link",tabIndex:0,children:e})}function Zre(){return a.jsxs("nav",{"aria-label":"Enlaces de navegacin rpida",className:"skip-links",children:[a.jsx(s1,{href:"#main-content",children:"Saltar al contenido principal"}),a.jsx(s1,{href:"#navigation",children:"Saltar a la navegacin"}),a.jsx(s1,{href:"#footer",children:"Saltar al pie de pgina"})]})}function Mt({children:t,onClick:e,className:n="",style:s,type:r="button",disabled:i=!1,ariaLabel:l,ariaDescribedBy:d}){return a.jsx(ke.button,{type:r,onClick:e,disabled:i,className:`${n} focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 focus-visible:ring-2 focus-visible:ring-blue-500`,style:s,whileHover:{scale:i?1:1.02},whileTap:{scale:i?1:.98},transition:{type:"spring",stiffness:400,damping:17},"aria-label":l,"aria-describedby":d,"aria-disabled":i,children:t})}function Jre(){const[e,n]=y.useState(null),[s,r]=y.useState(!1),[i,l]=y.useState(!1);return y.useEffect(()=>{},[!1]),null}function eae(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:l}=t;let d,u;const h=async(p=!0)=>{await u};async function f(){if("serviceWorker"in navigator){if(d=await tn(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/sw.js",{scope:"/",type:"classic"})).catch(p=>{l?.(p)}),!d)return;d.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),d.addEventListener("installed",p=>{p.isUpdate||s?.()}),d.register({immediate:e}).then(p=>{i?i("/sw.js",p):r?.(p)}).catch(p=>{l?.(p)})}}return u=f(),h}function tae(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:l}=t,[d,u]=y.useState(!1),[h,f]=y.useState(!1),[p]=y.useState(()=>eae({immediate:e,onOfflineReady(){f(!0),s?.()},onNeedRefresh(){u(!0),n?.()},onRegistered:r,onRegisteredSW:i,onRegisterError:l}));return{needRefresh:[d,u],offlineReady:[h,f],updateServiceWorker:p}}function nae(){const[t,e]=y.useState(!1),[n,s]=y.useState(!navigator.onLine),{needRefresh:[r,i],offlineReady:[l,d],updateServiceWorker:u}=tae({onRegistered(h){console.log(" Service Worker registrado"),h&&setInterval(()=>{h.update()},3600*1e3)},onRegisterError(h){console.error(" Error registrando Service Worker:",h)}});return y.useEffect(()=>{window.matchMedia("(display-mode: standalone)").matches&&e(!0);const h=()=>s(!1),f=()=>s(!0);return window.addEventListener("online",h),window.addEventListener("offline",f),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",f)}},[]),{isInstalled:t,isUpdateAvailable:r,isOffline:n,needRefresh:[r,i],offlineReady:[l,d],updateServiceWorker:u}}function sae(){const[t,e]=y.useState(navigator.onLine);return y.useEffect(()=>{const n=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",n),window.addEventListener("offline",s),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}},[]),t}function rae(){const{needRefresh:t,offlineReady:e,updateServiceWorker:n}=nae(),[s,r]=t,[i,l]=e,d=typeof window<"u"&&(()=>{try{return!!localStorage.getItem("e2e:user")}catch{return!1}})();if(typeof navigator<"u"&&(navigator.userAgent.includes("Headless")||navigator.userAgent.includes("Playwright")||navigator.userAgent.includes("PWA-Test")||d))return null;const u=()=>{l(!1),r(!1)},h=()=>{n(!0)};return a.jsx(Ci,{children:(i||s)&&a.jsx(ke.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",damping:20},className:"fixed top-2 sm:top-4 left-2 right-2 sm:left-1/2 sm:right-auto sm:transform sm:-translate-x-1/2 z-[9999] max-w-md mx-auto",role:"alert","aria-live":"polite",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-3 sm:p-4 md:p-5 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 md:gap-4",children:[a.jsx("div",{className:"flex-shrink-0 pt-0.5 sm:pt-1",children:s?a.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-blue-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):a.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-green-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"flex-1 min-w-0 pr-2 sm:pr-1 text-gray-900 dark:text-white",children:[a.jsx("h4",{className:"text-xs sm:text-sm md:text-base font-semibold mb-1 sm:mb-1.5 leading-tight sm:leading-snug",children:s?" Nueva versin disponible":" Listo para usar sin conexin"}),a.jsx("p",{className:"text-[11px] sm:text-xs md:text-sm text-gray-700 dark:text-gray-200 leading-relaxed sm:leading-normal break-words",children:s?"Hay una actualizacin de pymerp.cl. Actualiza ahora para obtener las ltimas mejoras y correcciones.":"pymerp.cl ya est disponible sin conexin a internet. Puedes usarla en cualquier momento."})]}),a.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2 flex-shrink-0",children:[s&&a.jsx(Mt,{onClick:h,className:"px-2.5 sm:px-3 md:px-4 py-1.5 sm:py-2 bg-blue-600 text-white rounded-md text-[10px] sm:text-xs md:text-sm font-medium hover:bg-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 whitespace-nowrap transition-colors","aria-label":"Actualizar aplicacin",children:"Actualizar"}),a.jsx("button",{onClick:u,className:"text-gray-600 hover:text-gray-800 dark:text-gray-200 dark:hover:text-white p-1 sm:p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-400 transition-colors min-w-[32px] min-h-[32px] flex items-center justify-center","aria-label":"Cerrar notificacin",title:"Cerrar",children:a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-5 md:h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})})})}function aae(){const t=sae();return a.jsx(Ci,{children:!t&&a.jsx(ke.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-0 left-0 right-0 z-[9999]",children:a.jsx("div",{className:"bg-yellow-500 dark:bg-yellow-600 text-white px-4 py-2 text-center text-sm font-medium shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})}),a.jsx("span",{children:" Sin conexin a internet - Trabajando en modo sin conexin"})]})})})})}const r1="cookie-consent",eP="1.0";function iae(){const[t,e]=y.useState(!1),[n,s]=y.useState(!1),[r,i]=y.useState({essential:!0,analytics:!1,marketing:!1}),l=typeof window<"u"&&(()=>{try{return!!localStorage.getItem("e2e:user")}catch{return!1}})(),d=typeof navigator<"u"&&(navigator.userAgent.includes("Headless")||navigator.userAgent.includes("Playwright")||navigator.userAgent.includes("PWA-Test"));if(l||d)return null;y.useEffect(()=>{const b=localStorage.getItem(r1);if(!b)setTimeout(()=>{localStorage.getItem(r1)||e(!0)},2e3);else try{const _=JSON.parse(b);_.version===eP?(i(_.preferences),u(_.preferences)):e(!0)}catch{e(!0)}},[]);const u=b=>{typeof window<"u"&&window.gtag&&window.gtag("consent","update",{analytics_storage:b.analytics?"granted":"denied",ad_storage:b.marketing?"granted":"denied",personalization_storage:b.marketing?"granted":"denied"}),!b.analytics&&window.gtag&&(window["ga-disable-G-58V5RL01MF"]=!0)},h=b=>{const _={version:eP,timestamp:new Date().toISOString(),preferences:b};localStorage.setItem(r1,JSON.stringify(_)),u(b),e(!1)},f=()=>{const b={essential:!0,analytics:!0,marketing:!0};i(b),h(b)},p=()=>{const b={essential:!0,analytics:!1,marketing:!1};i(b),h(b)},x=()=>{h(r),s(!1)};return t?a.jsx(Ci,{children:a.jsx(ke.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-0 left-0 right-0 z-[10000] bg-white dark:bg-gray-800 border-t-2 border-gray-200 dark:border-gray-700 shadow-2xl",role:"dialog","aria-label":"Consentimiento de cookies","aria-describedby":"cookie-description",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:n?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Preferencias de Cookies"}),a.jsx("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700","aria-label":"Volver",children:""})]}),a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Cookies Esenciales"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Necesarias para el funcionamiento de AgendaWeb: autenticacin, sesin de usuario y seguridad. No se pueden desactivar porque son indispensables."})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsx("span",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Siempre activas"})})]})}),a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Cookies de Anlisis"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nos ayudan a entender cmo usas AgendaWeb para mejorar continuamente. Utilizamos Google Analytics 4. Tus datos son annimos y agregados."})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:r.analytics,onChange:b=>i({...r,analytics:b.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})})]})}),a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 opacity-50",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Cookies de Publicidad"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Actualmente no utilizamos cookies de publicidad o marketing. AgendaWeb no muestra anuncios de terceros."})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Desactivadas"})})]})}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx(Mt,{onClick:p,className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Rechazar Todo"}),a.jsx(Mt,{onClick:x,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:"Guardar Preferencias"}),a.jsx(Mt,{onClick:f,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700",children:"Aceptar Todo"})]})]})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:" Este sitio usa cookies"}),a.jsxs("p",{id:"cookie-description",className:"text-sm text-gray-600 dark:text-gray-400",children:["Usamos cookies esenciales para el funcionamiento de AgendaWeb y cookies de anlisis para mejorar tu experiencia. Puedes personalizar tus preferencias o aceptar todo."," ",a.jsx("a",{href:"/privacidad",target:"_blank",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",rel:"noopener noreferrer",children:"Ver Poltica de Privacidad"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[a.jsx("button",{onClick:()=>s(!0),className:"px-4 py-2 text-sm font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-900 border border-gray-400 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:"Personalizar"}),a.jsx(Mt,{onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-900 border border-gray-400 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800",children:"Rechazar Todo"}),a.jsx(Mt,{onClick:f,className:"px-4 py-2 text-sm font-medium text-white bg-blue-700 rounded-lg hover:bg-blue-800",children:"Aceptar Todo"})]})]})})})})}):null}function yt({size:t="md",color:e="#3b82f6",fullScreen:n=!1}){const s={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},r=a.jsx(ke.div,{className:`${s[t]} border-4 border-t-transparent rounded-full`,style:{borderColor:`${e}33`,borderTopColor:e},animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}});return n?a.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex items-center justify-center min-h-screen",children:r}):r}const r8=y.createContext({theme:"light",toggleTheme:()=>{}}),oae=()=>y.useContext(r8),lae=({children:t})=>{const[e,n]=y.useState("light");y.useEffect(()=>{const r=localStorage.getItem("app-theme");r?n(r):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&n("dark")},[]),y.useEffect(()=>{document.body.dataset.theme=e,localStorage.setItem("app-theme",e)},[e]);const s=y.useMemo(()=>({theme:e,toggleTheme:()=>n(r=>r==="light"?"dark":"light")}),[e]);return a.jsx(r8.Provider,{value:s,children:t})};function zj(){const{theme:t,toggleTheme:e}=oae();return a.jsx("button",{type:"button",onClick:e,className:"flex items-center justify-center w-10 h-10 rounded-full border-2 border-gray-300 bg-white hover:bg-gray-50 text-gray-700 shadow-sm transition-all hover:shadow-md hover:scale-105","aria-label":"Cambiar modo claro/oscuro",title:t==="light"?"Cambiar a modo oscuro":"Cambiar a modo claro",children:t==="light"?"":""})}const uf=[{code:"es",name:"Spanish",nativeName:"Espaol",flag:""},{code:"en",name:"English",nativeName:"English",flag:""}];function cae({className:t="",showLabel:e=!1,variant:n="dropdown"}){const{t:s}=ln(),[r,i]=y.useState(!1),[l,d]=y.useState(!1),u=y.useRef(null),h=jh(),f=uf.find(b=>b.code===h)||uf[0];y.useEffect(()=>{typeof window<"u"&&d(window.navigator.userAgent.toLowerCase().includes("windows"))},[]);const p=b=>l?a.jsx("span",{"aria-hidden":"true",className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-blue-600 text-[10px] font-semibold uppercase text-white shadow-sm",children:b.code}):a.jsx("span",{className:"text-lg",role:"img","aria-label":b.name,children:b.flag});y.useEffect(()=>{const b=_=>{u.current&&!u.current.contains(_.target)&&i(!1)};return r&&document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[r]);const x=async b=>{try{await XE(b),i(!1),setTimeout(()=>{window.dispatchEvent(new Event("languageChanged"))},100)}catch(_){console.error("Error changing language:",_)}};if(n==="button"){const b=uf.find(_=>_.code!==h)||uf[1];return a.jsxs("button",{onClick:()=>x(b.code),className:`inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors ${t}`,title:s("language.toggle"),"aria-label":s("language.toggle"),children:[p(f),e&&a.jsx("span",{className:"hidden sm:inline",children:f.nativeName})]})}return a.jsxs("div",{ref:u,className:`relative inline-block text-left ${t}`,children:[a.jsxs("button",{onClick:()=>i(!r),className:"inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors","aria-haspopup":"true","aria-expanded":r,title:s("language.toggle"),children:[p(f),e&&a.jsx("span",{className:"hidden sm:inline",children:f.nativeName}),a.jsx("svg",{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&a.jsx("div",{className:"absolute right-0 z-50 mt-2 w-48 origin-top-right rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none animate-in fade-in slide-in-from-top-2 duration-200",role:"menu","aria-orientation":"vertical",children:a.jsx("div",{className:"py-1",role:"none",children:uf.map(b=>{const _=b.code===h;return a.jsxs("button",{onClick:()=>x(b.code),className:`
                    w-full text-left px-4 py-2 text-sm flex items-center gap-3 transition-colors
                    ${_?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"}
                  `,role:"menuitem",disabled:_,children:[a.jsx("span",{className:"text-lg",role:"img","aria-label":b.name,children:b.flag}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:b.nativeName}),b.nativeName!==b.name&&a.jsx("span",{className:"text-xs text-gray-500",children:b.name})]}),_&&a.jsx("svg",{className:"ml-auto w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},b.code)})})})]})}function Hj(){return a.jsx(cae,{variant:"button"})}var a1={},i1={},o1={},tP;function dae(){return tP||(tP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];if(typeof window<"u"){var d;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(d=window).gtag.apply(d,i)}},n=e;t.default=n})(o1)),o1}var l1={},nP;function uae(){return nP||(nP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var e=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function n(d){return d.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(u,h,f){return h>0&&h+u.length!==f.length&&u.search(e)>-1&&f.charAt(h-2)!==":"&&(f.charAt(h+u.length)!=="-"||f.charAt(h-1)==="-")&&f.charAt(h-1).search(/[^\s-]/)<0?u.toLowerCase():u.substr(1).search(/[A-Z]|\../)>-1?u:u.charAt(0).toUpperCase()+u.substr(1)})}function s(d){return typeof d=="string"&&d.indexOf("@")!==-1}var r="REDACTED (Potential Email Address)";function i(d){return s(d)?(console.warn("This arg looks like an email address, redacting."),r):d}function l(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,f=d||"";return u&&(f=n(d)),h&&(f=i(f)),f}})(l1)),l1}var sP;function hae(){return sP||(sP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GA4=void 0;var e=l(dae()),n=l(uae()),s=["eventCategory","eventAction","eventLabel","eventValue","hitType"],r=["title","location"],i=["page","hitType"];function l(Q){return Q&&Q.__esModule?Q:{default:Q}}function d(Q,G){if(Q==null)return{};var B=u(Q,G),z,q;if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(Q);for(q=0;q<Z.length;q++)z=Z[q],!(G.indexOf(z)>=0)&&Object.prototype.propertyIsEnumerable.call(Q,z)&&(B[z]=Q[z])}return B}function u(Q,G){if(Q==null)return{};var B={},z=Object.keys(Q),q,Z;for(Z=0;Z<z.length;Z++)q=z[Z],!(G.indexOf(q)>=0)&&(B[q]=Q[q]);return B}function h(Q){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},h(Q)}function f(Q){return b(Q)||x(Q)||P(Q)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x(Q){if(typeof Symbol<"u"&&Q[Symbol.iterator]!=null||Q["@@iterator"]!=null)return Array.from(Q)}function b(Q){if(Array.isArray(Q))return A(Q)}function _(Q,G){var B=Object.keys(Q);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(Q);G&&(z=z.filter(function(q){return Object.getOwnPropertyDescriptor(Q,q).enumerable})),B.push.apply(B,z)}return B}function j(Q){for(var G=1;G<arguments.length;G++){var B=arguments[G]!=null?arguments[G]:{};G%2?_(Object(B),!0).forEach(function(z){S(Q,z,B[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(B)):_(Object(B)).forEach(function(z){Object.defineProperty(Q,z,Object.getOwnPropertyDescriptor(B,z))})}return Q}function v(Q,G){return M(Q)||C(Q,G)||P(Q,G)||T()}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(Q,G){if(Q){if(typeof Q=="string")return A(Q,G);var B=Object.prototype.toString.call(Q).slice(8,-1);if(B==="Object"&&Q.constructor&&(B=Q.constructor.name),B==="Map"||B==="Set")return Array.from(Q);if(B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return A(Q,G)}}function A(Q,G){(G==null||G>Q.length)&&(G=Q.length);for(var B=0,z=new Array(G);B<G;B++)z[B]=Q[B];return z}function C(Q,G){var B=Q==null?null:typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(B!=null){var z,q,Z,ee,H=[],Y=!0,X=!1;try{if(Z=(B=B.call(Q)).next,G!==0)for(;!(Y=(z=Z.call(B)).done)&&(H.push(z.value),H.length!==G);Y=!0);}catch(ie){X=!0,q=ie}finally{try{if(!Y&&B.return!=null&&(ee=B.return(),Object(ee)!==ee))return}finally{if(X)throw q}}return H}}function M(Q){if(Array.isArray(Q))return Q}function L(Q,G){if(!(Q instanceof G))throw new TypeError("Cannot call a class as a function")}function k(Q,G){for(var B=0;B<G.length;B++){var z=G[B];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(Q,O(z.key),z)}}function R(Q,G,B){return G&&k(Q.prototype,G),Object.defineProperty(Q,"prototype",{writable:!1}),Q}function S(Q,G,B){return G=O(G),G in Q?Object.defineProperty(Q,G,{value:B,enumerable:!0,configurable:!0,writable:!0}):Q[G]=B,Q}function O(Q){var G=I(Q,"string");return h(G)==="symbol"?G:String(G)}function I(Q,G){if(h(Q)!=="object"||Q===null)return Q;var B=Q[Symbol.toPrimitive];if(B!==void 0){var z=B.call(Q,G);if(h(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(Q)}var F=(function(){function Q(){var G=this;L(this,Q),S(this,"reset",function(){G.isInitialized=!1,G._testMode=!1,G._currentMeasurementId,G._hasLoadedGA=!1,G._isQueuing=!1,G._queueGtag=[]}),S(this,"_gtag",function(){for(var B=arguments.length,z=new Array(B),q=0;q<B;q++)z[q]=arguments[q];G._testMode||G._isQueuing?G._queueGtag.push(z):e.default.apply(void 0,z)}),S(this,"_loadGA",function(B,z){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!G._hasLoadedGA){var Z=document.createElement("script");Z.async=!0,Z.src="".concat(q,"?id=").concat(B),z&&Z.setAttribute("nonce",z),document.body.appendChild(Z),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},G._hasLoadedGA=!0}}),S(this,"_toGtagOptions",function(B){if(B){var z={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},q=Object.entries(B).reduce(function(Z,ee){var H=v(ee,2),Y=H[0],X=H[1];return z[Y]?Z[z[Y]]=X:Z[Y]=X,Z},{});return q}}),S(this,"initialize",function(B){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!B)throw new Error("Require GA_MEASUREMENT_ID");var q=typeof B=="string"?[{trackingId:B}]:B;G._currentMeasurementId=q[0].trackingId;var Z=z.gaOptions,ee=z.gtagOptions,H=z.nonce,Y=z.testMode,X=Y===void 0?!1:Y,ie=z.gtagUrl;if(G._testMode=X,X||G._loadGA(G._currentMeasurementId,H,ie),G.isInitialized||(G._gtag("js",new Date),q.forEach(function(ve){var Se=j(j(j({},G._toGtagOptions(j(j({},Z),ve.gaOptions))),ee),ve.gtagOptions);Object.keys(Se).length?G._gtag("config",ve.trackingId,Se):G._gtag("config",ve.trackingId)})),G.isInitialized=!0,!X){var te=f(G._queueGtag);for(G._queueGtag=[],G._isQueuing=!1;te.length;){var be=te.shift();G._gtag.apply(G,f(be)),be[0]==="get"&&(G._isQueuing=!0)}}}),S(this,"set",function(B){if(!B){console.warn("`fieldsObject` is required in .set()");return}if(h(B)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(B).length===0&&console.warn("empty `fieldsObject` given to .set()"),G._gaCommand("set",B)}),S(this,"_gaCommandSendEvent",function(B,z,q,Z,ee){G._gtag("event",z,j(j({event_category:B,event_label:q,value:Z},ee&&{non_interaction:ee.nonInteraction}),G._toGtagOptions(ee)))}),S(this,"_gaCommandSendEventParameters",function(){for(var B=arguments.length,z=new Array(B),q=0;q<B;q++)z[q]=arguments[q];if(typeof z[0]=="string")G._gaCommandSendEvent.apply(G,f(z.slice(1)));else{var Z=z[0],ee=Z.eventCategory,H=Z.eventAction,Y=Z.eventLabel,X=Z.eventValue;Z.hitType;var ie=d(Z,s);G._gaCommandSendEvent(ee,H,Y,X,ie)}}),S(this,"_gaCommandSendTiming",function(B,z,q,Z){G._gtag("event","timing_complete",{name:z,value:q,event_category:B,event_label:Z})}),S(this,"_gaCommandSendPageview",function(B,z){if(z&&Object.keys(z).length){var q=G._toGtagOptions(z),Z=q.title,ee=q.location,H=d(q,r);G._gtag("event","page_view",j(j(j(j({},B&&{page_path:B}),Z&&{page_title:Z}),ee&&{page_location:ee}),H))}else B?G._gtag("event","page_view",{page_path:B}):G._gtag("event","page_view")}),S(this,"_gaCommandSendPageviewParameters",function(){for(var B=arguments.length,z=new Array(B),q=0;q<B;q++)z[q]=arguments[q];if(typeof z[0]=="string")G._gaCommandSendPageview.apply(G,f(z.slice(1)));else{var Z=z[0],ee=Z.page;Z.hitType;var H=d(Z,i);G._gaCommandSendPageview(ee,H)}}),S(this,"_gaCommandSend",function(){for(var B=arguments.length,z=new Array(B),q=0;q<B;q++)z[q]=arguments[q];var Z=typeof z[0]=="string"?z[0]:z[0].hitType;switch(Z){case"event":G._gaCommandSendEventParameters.apply(G,z);break;case"pageview":G._gaCommandSendPageviewParameters.apply(G,z);break;case"timing":G._gaCommandSendTiming.apply(G,f(z.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(Z));break;default:console.warn("Send command doesn't exist: ".concat(Z))}}),S(this,"_gaCommandSet",function(){for(var B=arguments.length,z=new Array(B),q=0;q<B;q++)z[q]=arguments[q];typeof z[0]=="string"&&(z[0]=S({},z[0],z[1])),G._gtag("set",G._toGtagOptions(z[0]))}),S(this,"_gaCommand",function(B){for(var z=arguments.length,q=new Array(z>1?z-1:0),Z=1;Z<z;Z++)q[Z-1]=arguments[Z];switch(B){case"send":G._gaCommandSend.apply(G,q);break;case"set":G._gaCommandSet.apply(G,q);break;default:console.warn("Command doesn't exist: ".concat(B))}}),S(this,"ga",function(){for(var B=arguments.length,z=new Array(B),q=0;q<B;q++)z[q]=arguments[q];if(typeof z[0]=="string")G._gaCommand.apply(G,z);else{var Z=z[0];G._gtag("get",G._currentMeasurementId,"client_id",function(ee){G._isQueuing=!1;var H=G._queueGtag;for(Z({get:function(ie){return ie==="clientId"?ee:ie==="trackingId"?G._currentMeasurementId:ie==="apiVersion"?"1":void 0}});H.length;){var Y=H.shift();G._gtag.apply(G,f(Y))}}),G._isQueuing=!0}return G.ga}),S(this,"event",function(B,z){if(typeof B=="string")G._gtag("event",B,G._toGtagOptions(z));else{var q=B.action,Z=B.category,ee=B.label,H=B.value,Y=B.nonInteraction,X=B.transport;if(!Z||!q){console.warn("args.category AND args.action are required in event()");return}var ie={hitType:"event",eventCategory:(0,n.default)(Z),eventAction:(0,n.default)(q)};ee&&(ie.eventLabel=(0,n.default)(ee)),typeof H<"u"&&(typeof H!="number"?console.warn("Expected `args.value` arg to be a Number."):ie.eventValue=H),typeof Y<"u"&&(typeof Y!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):ie.nonInteraction=Y),typeof X<"u"&&(typeof X!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(X)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),ie.transport=X)),G._gaCommand("send",ie)}}),S(this,"send",function(B){G._gaCommand("send",B)}),this.reset()}return R(Q,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),Q})();t.GA4=F;var $=new F;t.default=$})(i1)),i1}var rP;function mae(){return rP||(rP=1,(function(t){function e(d){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},e(d)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ReactGAImplementation=void 0;var n=r(hae());function s(d){if(typeof WeakMap!="function")return null;var u=new WeakMap,h=new WeakMap;return(s=function(p){return p?h:u})(d)}function r(d,u){if(d&&d.__esModule)return d;if(d===null||e(d)!=="object"&&typeof d!="function")return{default:d};var h=s(u);if(h&&h.has(d))return h.get(d);var f={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var x in d)if(x!=="default"&&Object.prototype.hasOwnProperty.call(d,x)){var b=p?Object.getOwnPropertyDescriptor(d,x):null;b&&(b.get||b.set)?Object.defineProperty(f,x,b):f[x]=d[x]}return f.default=d,h&&h.set(d,f),f}var i=n.GA4;t.ReactGAImplementation=i;var l=n.default;t.default=l})(a1)),a1}var fae=mae();const Kb=su(fae);let hf=null;const pae=()=>{if(typeof window>"u")return null;const t=window.trustedTypes;if(!t?.createPolicy)return null;if(hf)return hf;try{hf=t.createPolicy("agendaweb",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{hf=null}return hf},e2=(t,e)=>{const n=pae(),s=n?.createHTML?n.createHTML(e):e;t.innerHTML=s};var Bn=(t=>(t.USER="user",t.NAVIGATION="navigation",t.ENGAGEMENT="engagement",t.CONVERSION="conversion",t.ERROR="error",t.BUSINESS="business",t))(Bn||{}),po=(t=>(t.SIGN_UP="sign_up",t.LOGIN="login",t.LOGOUT="logout",t.PROFILE_UPDATE="profile_update",t.PAGE_VIEW="page_view",t.CLICK="click",t.SEARCH="search",t.SCROLL="scroll",t.VIDEO_PLAY="video_play",t.FILE_DOWNLOAD="file_download",t.WHATSAPP_CLICK="whatsapp_click",t.SERVICE_BOOKING="service_booking",t.PRODUCT_ORDER="product_order",t.CONTACT_SUBMIT="contact_submit",t.SERVICE_CREATE="service_create",t.PRODUCT_CREATE="product_create",t.COMPANY_SETUP="company_setup",t.ERROR_OCCURRED="error_occurred",t))(po||{});let t2={app_version:xn.app.version,environment:xn.app.environment,session_id:gae()};function gae(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function xae(t){const e=t;if(!xn.analytics.enabled){Re.warn("GA4 deshabilitado o Measurement ID no configurado");return}try{Kb.initialize(e,{gaOptions:{anonymize_ip:!0,cookie_flags:"SameSite=None;Secure",cookie_expires:63072e3,...t2},gtagOptions:{debug_mode:xn.analytics.debug,send_page_view:!0,custom_map:{dimension1:"user_role",dimension2:"company_id",dimension3:"business_type",dimension4:"app_version",dimension5:"environment"}}}),Re.success("Google Analytics 4 inicializado:",e),Re.debug("Custom dimensions:",t2),xn.analytics.debug&&_ae()}catch(n){Re.error("Error inicializando GA4:",n)}}function yae(t,e){try{const n=t||window.location.pathname+window.location.search;Kb.send({hitType:"pageview",page:n,title:e||document.title}),Re.debug("GA4 Pageview:",n)}catch(n){Re.error("Error tracking pageview:",n)}}function ca(t,e){if(xn.analytics.enabled)try{const n={...t2,...e,timestamp:Date.now()};Kb.event(t,n),Re.debug("GA4 Event:",t,n),xn.analytics.debug&&Eae(t,n)}catch(n){Re.error("Error tracking event:",n)}}function bae(t,e,n){try{Kb.event("timing_complete",{name:t,value:Math.round(e),event_category:n||"performance"}),Re.debug("GA4 Timing:",t,e)}catch(s){Re.error("Error tracking timing:",s)}}function vae(t,e){ca("scroll",{category:"engagement",scroll_depth:t,page:e||window.location.pathname})}function wae(t,e){ca("time_on_page",{category:"engagement",time_seconds:Math.round(t),page:e||window.location.pathname})}let sh=[];const aP=50;function _ae(){if(typeof window>"u")return;const t=document.createElement("div");t.id="ga4-debugger",t.style.cssText=`
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 400px;
    max-height: 500px;
    background: rgba(0, 0, 0, 0.95);
    color: #00ff00;
    font-family: 'Courier New', monospace;
    font-size: 12px;
    padding: 15px;
    border-radius: 8px;
    z-index: 99999;
    overflow-y: auto;
    box-shadow: 0 4px 20px rgba(0, 255, 0, 0.3);
    display: none;
  `,e2(t,`
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; border-bottom: 1px solid #00ff00; padding-bottom: 10px;">
      <strong style="font-size: 14px;"> GA4 Debugger</strong>
      <div>
        <button id="ga4-clear" style="background: #ff4444; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; margin-right: 5px;">Clear</button>
        <button id="ga4-close" style="background: #444; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">Hide</button>
      </div>
    </div>
    <div id="ga4-events" style="max-height: 400px; overflow-y: auto;"></div>
  `),document.body.appendChild(t);const e=document.createElement("button");e.id="ga4-toggle",e.textContent=" GA4",e.style.cssText=`
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(0, 255, 0, 0.9);
    color: black;
    border: none;
    padding: 10px 15px;
    border-radius: 50px;
    cursor: pointer;
    z-index: 99998;
    font-weight: bold;
    box-shadow: 0 2px 10px rgba(0, 255, 0, 0.5);
    transition: all 0.3s;
  `,e.addEventListener("mouseenter",()=>{e.style.transform="scale(1.1)"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)"}),e.addEventListener("click",()=>{const n=document.getElementById("ga4-debugger");n&&(n.style.display=n.style.display==="none"?"block":"none")}),document.body.appendChild(e),document.getElementById("ga4-clear")?.addEventListener("click",()=>{sh=[];const n=document.getElementById("ga4-events");n&&e2(n,'<p style="color: #888;">No events tracked yet...</p>')}),document.getElementById("ga4-close")?.addEventListener("click",()=>{const n=document.getElementById("ga4-debugger");n&&(n.style.display="none")}),Re.success("GA4 Debugger inicializado - Click en el botn flotante para ver eventos")}function Eae(t,e){if(typeof window>"u")return;const n={timestamp:Date.now(),action:t,params:e};sh.unshift(n),sh.length>aP&&(sh=sh.slice(0,aP));const s=document.getElementById("ga4-events");if(!s)return;const r=sh.map(i=>{const l=new Date(i.timestamp).toLocaleTimeString(),d=JSON.stringify(i.params,null,2);return`
      <div style="margin-bottom: 15px; padding: 10px; background: rgba(0, 255, 0, 0.1); border-left: 3px solid #00ff00; border-radius: 4px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
          <strong style="color: #00ffff;">${i.action}</strong>
          <span style="color: #888; font-size: 10px;">${l}</span>
        </div>
        <details>
          <summary style="cursor: pointer; color: #ffff00; margin-bottom: 5px;">Params</summary>
          <pre style="margin: 5px 0 0 0; padding: 8px; background: rgba(0, 0, 0, 0.5); border-radius: 4px; overflow-x: auto; font-size: 10px;">${d}</pre>
        </details>
      </div>
    `}).join("");e2(s,r)}const Nae={"appointments.manualCreated":{action:"manual_appointment_created",category:Bn.CONVERSION,requiredParams:["professional_id","service_id"]},"appointments.publicRequested":{action:"public_appointment_requested",category:Bn.CONVERSION,requiredParams:["company_id","service_id"]},"appointments.confirmed":{action:"appointment_confirmed",category:Bn.BUSINESS,requiredParams:["company_id"]},"products.orderSubmitted":{action:po.PRODUCT_ORDER,category:Bn.CONVERSION,requiredParams:["company_id"]},"companies.setupCompleted":{action:po.COMPANY_SETUP,category:Bn.BUSINESS},"contact.whatsappClick":{action:po.WHATSAPP_CLICK,category:Bn.NAVIGATION,requiredParams:["company_id"]},"events.view":{action:"event_view",category:Bn.NAVIGATION,requiredParams:["company_id","event_id"]},"events.whatsapp":{action:"event_whatsapp_click",category:Bn.CONVERSION,requiredParams:["company_id","event_id"]},"properties.view":{action:"property_view",category:Bn.NAVIGATION,requiredParams:["company_id","property_id"]},"properties.whatsapp":{action:"property_whatsapp_click",category:Bn.CONVERSION,requiredParams:["company_id","property_id"]}};function jae(t,e){const n=Nae[t],s={...n.defaultParams,...e,category:n.category};return{action:n.action,params:s}}function Cae(){const t=ka(),e=y.useRef(t.pathname);y.useEffect(()=>{t.pathname!==e.current&&(yae(t.pathname+t.search),dl("Page viewed",{path:t.pathname,search:t.search}),Re.debug("Page tracked:",t.pathname),e.current=t.pathname)},[t])}function Sae(){const t=ka(),e=y.useRef(Date.now());y.useEffect(()=>(e.current=Date.now(),()=>{const n=(Date.now()-e.current)/1e3;n>3&&(wae(n,t.pathname),Re.debug("Time on page:",n,"seconds"))}),[t.pathname])}function Tae(){const t=ka(),e=y.useRef(new Set);y.useEffect(()=>{e.current=new Set;const n=()=>{const s=document.documentElement.scrollHeight-window.innerHeight,r=window.scrollY,i=Math.round(r/s*100);[25,50,75,100].forEach(d=>{i>=d&&!e.current.has(d)&&(e.current.add(d),vae(d,t.pathname),Re.debug("Scroll depth:",d+"%"))})};return window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)},[t.pathname])}function kae(){return y.useCallback((t,e)=>{ca(po.SEARCH,{category:Bn.NAVIGATION,search_term:t,results_count:e}),dl("Search performed",{term:t,results:e}),Re.debug("Search tracked:",t,e)},[])}function Aae(t){const e=y.useCallback(()=>{ca("form_start",{category:Bn.ENGAGEMENT,form_name:t}),dl("Form started",{form:t}),Re.debug("Form started:",t)},[t]),n=y.useCallback((r=!0)=>{ca(r?"form_complete":"form_error",{category:Bn.ENGAGEMENT,form_name:t,success:r}),dl("Form completed",{form:t,success:r}),Re.debug("Form completed:",t,r)},[t]),s=y.useCallback(r=>{ca("form_field_interaction",{category:Bn.ENGAGEMENT,form_name:t,field_name:r})},[t]);return{trackFormStart:e,trackFormComplete:n,trackFormField:s}}function Rae(t){const e=y.useCallback(()=>{ca("video_start",{category:Bn.ENGAGEMENT,video_id:t}),Re.debug("Video started:",t)},[t]),n=y.useCallback(r=>{ca("video_complete",{category:Bn.ENGAGEMENT,video_id:t,video_duration:r}),Re.debug("Video completed:",t,r)},[t]),s=y.useCallback(r=>{ca("video_progress",{category:Bn.ENGAGEMENT,video_id:t,video_percent:r})},[t]);return{trackVideoStart:e,trackVideoComplete:n,trackVideoProgress:s}}function Dae(){return y.useCallback((t,e)=>{ca(po.ERROR_OCCURRED,{category:Bn.ERROR,error_message:t.message,error_stack:t.stack,component:e?.componentStack}),Re.error("Error tracked:",t.message)},[])}function So(){Cae(),Sae(),Tae();const t=y.useCallback((l,d)=>{ca(l,d||{}),dl("Event tracked",{action:l,...d}),Re.debug("Event tracked:",l)},[]),e=y.useCallback((l,d)=>{const{action:u,params:h}=jae(l,d);ca(u,h),dl("Named event tracked",{name:l,action:u,...h}),Re.debug("Named event tracked:",l)},[]),n=y.useCallback(l=>d=>{ca(po.CLICK,{category:Bn.ENGAGEMENT,element_name:l,...d}),dl("Element clicked",{element:l,...d}),Re.debug("Click tracked:",l)},[]),s=y.useCallback(()=>(l,d,u)=>{ca(l,{category:Bn.CONVERSION,value:d,currency:"CLP",...u}),dl("Conversion tracked",{action:l,value:d,...u}),Re.debug("Conversion tracked:",l,d)},[]),r=kae(),i=Dae();return{trackEvent:t,trackNamedEvent:e,trackClick:n,trackConversion:s,trackSearch:r,trackForm:Aae,trackVideo:Rae,trackError:i}}const a8="https://agendaweb.app",Pae="AgendaWeb";function Mae(t,e=Pae){const n=t.trim();return n.toLowerCase().includes(e.toLowerCase())?n:`${n} | ${e}`}function Lae(t,e=a8){return t||(typeof window<"u"&&window.location?.href?window.location.href:e)}function Iae(t,e){return t||(typeof window<"u"&&window.location?`${window.location.origin}${window.location.pathname}`:e||a8)}function Oae(t){return t?Array.isArray(t)?t:[t]:[]}function Vae(t){return Oae(t).map(e=>JSON.stringify(e,null,2))}function ac(t,e,n){if(!e||typeof document>"u")return;let s=document.head.querySelector(`meta[${n}="${t}"]`);s||(s=document.createElement("meta"),s.setAttribute(n,t),document.head.appendChild(s)),s.setAttribute("content",e)}function Uae(t,e){if(!e||typeof document>"u")return;let n=document.head.querySelector(`link[rel="${t}"]`);n||(n=document.createElement("link"),n.setAttribute("rel",t),document.head.appendChild(n)),n.setAttribute("href",e)}function Bae(t,e){if(typeof document>"u")return;const n=document.head.querySelector(`script[data-meta-id="${e}"]`);if(t){const s=n||document.createElement("script");s.type="application/ld+json",s.dataset.metaId=e,s.textContent=typeof t=="string"?t:JSON.stringify(t),n||document.head.appendChild(s)}else n&&n.remove()}function Fae(t){const e={"@context":"https://schema.org","@type":"Organization",name:t.name,url:t.url,logo:t.logo};if(t.description&&(e.description=t.description),t.email&&(e.email=t.email),t.phone&&(e.telephone=t.phone),t.address&&(e.address={"@type":"PostalAddress",streetAddress:t.address.street,addressLocality:t.address.city,addressRegion:t.address.region,postalCode:t.address.postalCode,addressCountry:t.address.country}),t.socialMedia){const n=[];t.socialMedia.facebook&&n.push(t.socialMedia.facebook),t.socialMedia.twitter&&n.push(t.socialMedia.twitter),t.socialMedia.instagram&&n.push(t.socialMedia.instagram),t.socialMedia.linkedin&&n.push(t.socialMedia.linkedin),n.length>0&&(e.sameAs=n)}return e}function $ae(t){const e={"@context":"https://schema.org","@type":"LocalBusiness",name:t.name,description:t.description,image:t.image,url:t.url,address:{"@type":"PostalAddress",streetAddress:t.address.street,addressLocality:t.address.city,addressRegion:t.address.region,postalCode:t.address.postalCode,addressCountry:t.address.country}};return t.phone&&(e.telephone=t.phone),t.priceRange&&(e.priceRange=t.priceRange),t.geo&&(e.geo={"@type":"GeoCoordinates",latitude:t.geo.latitude,longitude:t.geo.longitude}),t.openingHours&&t.openingHours.length>0&&(e.openingHoursSpecification=t.openingHours.map(n=>({"@type":"OpeningHoursSpecification",dayOfWeek:n.split(" ")[0],opens:n.split(" ")[1],closes:n.split(" ")[2]}))),t.rating&&(e.aggregateRating={"@type":"AggregateRating",ratingValue:t.rating.value,reviewCount:t.rating.count}),e}function ha({title:t,description:e,keywords:n,author:s="AgendaWeb",ogType:r="website",ogImage:i="/og-default.jpg",ogImageAlt:l,ogUrl:d,twitterCard:u="summary_large_image",twitterSite:h="@agendaweb",twitterCreator:f,canonical:p,robots:x="index, follow",language:b="es",viewport:_="width=device-width, initial-scale=1.0",schema:j,customMeta:v=[]}){const T=y.useMemo(()=>Lae(d),[d]),P=y.useMemo(()=>Iae(p,T),[p,T]),A=y.useMemo(()=>Mae(t),[t]),C=y.useMemo(()=>{const M=Vae(j);return M.length===0?null:M.map((L,k)=>a.jsx("script",{type:"application/ld+json",children:L},`schema-${k}`))},[j]);return a.jsxs(wL,{children:[a.jsx("html",{lang:b}),a.jsx("title",{children:A}),a.jsx("meta",{name:"description",content:e}),n&&a.jsx("meta",{name:"keywords",content:n}),s&&a.jsx("meta",{name:"author",content:s}),a.jsx("meta",{name:"viewport",content:_}),a.jsx("meta",{name:"robots",content:x}),a.jsx("link",{rel:"canonical",href:P}),a.jsx("meta",{property:"og:type",content:r}),a.jsx("meta",{property:"og:title",content:A}),a.jsx("meta",{property:"og:description",content:e}),a.jsx("meta",{property:"og:url",content:T}),a.jsx("meta",{property:"og:image",content:i}),l&&a.jsx("meta",{property:"og:image:alt",content:l}),a.jsx("meta",{property:"og:site_name",content:"AgendaWeb"}),a.jsx("meta",{property:"og:locale",content:"es_ES"}),a.jsx("meta",{name:"twitter:card",content:u}),a.jsx("meta",{name:"twitter:title",content:A}),a.jsx("meta",{name:"twitter:description",content:e}),a.jsx("meta",{name:"twitter:image",content:i}),h&&a.jsx("meta",{name:"twitter:site",content:h}),f&&a.jsx("meta",{name:"twitter:creator",content:f}),a.jsx("meta",{name:"format-detection",content:"telephone=no"}),a.jsx("meta",{httpEquiv:"x-ua-compatible",content:"ie=edge"}),a.jsx("meta",{name:"theme-color",content:"#2563eb"}),v.map((M,L)=>M.name?a.jsx("meta",{name:M.name,content:M.content},`custom-${L}`):M.property?a.jsx("meta",{property:M.property,content:M.content},`custom-${L}`):null),C]})}function zae(){const{t}=ln("landing"),{trackClick:e}=So(),[n,s]=y.useState(!0),r=()=>e("landing_cta_secondary")(),i=()=>e("landing_cta_primary")(),l=()=>e("landing_cta_nearby")(),d=()=>{s(!1),e("landing_overlay_close")()},u=Fae({name:t("brandName"),url:typeof window<"u"?window.location.origin:"https://pymerp.cl",logo:typeof window<"u"?`${window.location.origin}/logopymerp.png`:"https://pymerp.cl/logopymerp.png",description:t("tagline")});return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:t("seoTitle"),description:t("tagline"),keywords:t("seoKeywords"),ogImage:"/logopymerp.png",ogImageAlt:t("ogImageAlt"),schema:u,robots:"index, follow"}),a.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center relative",children:[n&&a.jsx("div",{className:"fixed inset-0 z-20 bg-gray-900/60 backdrop-blur-sm flex items-center justify-center px-4",role:"dialog","aria-modal":"true","aria-labelledby":"beta-announcement-title",children:a.jsxs("div",{className:"relative max-w-2xl w-full bg-white/10 border border-white/30 rounded-2xl shadow-2xl p-6 sm:p-8 text-center text-white",children:[a.jsx("button",{type:"button",onClick:d,className:"absolute top-3 right-3 text-white bg-black/50 hover:bg-black/60 rounded-full px-3 py-1 text-sm font-semibold shadow transition-colors","aria-label":t("betaOverlay.closeButton"),children:""}),a.jsxs("div",{className:"space-y-3 animate-pulse",children:[a.jsx("div",{className:"text-xs sm:text-sm uppercase tracking-[0.2em] text-blue-200",children:t("betaOverlay.title")}),a.jsx("h2",{id:"beta-announcement-title",className:"text-2xl sm:text-3xl font-extrabold leading-tight drop-shadow",children:t("betaOverlay.message")}),a.jsx("p",{className:"text-lg sm:text-xl font-semibold text-blue-100",children:t("betaOverlay.offer")}),a.jsx("p",{className:"text-sm sm:text-base text-blue-100",children:t("betaOverlay.launch")})]})]})}),a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 w-full",children:[a.jsxs("nav",{className:"flex flex-col items-center gap-3 mb-6","aria-label":t("navigation.topBar"),children:[a.jsxs("div",{className:"flex justify-center gap-2",children:[a.jsx(Hj,{}),a.jsx(zj,{})]}),a.jsx(jt,{to:"/login",className:"text-sm text-blue-700 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":t("navigation.alreadyAccountLink"),children:t("navigation.alreadyAccount")})]}),a.jsxs("main",{className:"bg-white shadow rounded-lg p-8 sm:p-10 text-center space-y-6",children:[a.jsxs("header",{className:"flex flex-col items-center gap-4",children:[a.jsx("img",{src:"/logopymerp.png",alt:t("hero.logoAlt"),loading:"lazy",decoding:"async",width:224,height:140,className:"w-40 sm:w-48 md:w-56 drop-shadow"}),a.jsx("h1",{className:"sr-only",children:t("hero.title")})]}),a.jsx("p",{className:"text-lg sm:text-xl text-gray-700 leading-relaxed",children:t("hero.subtitle")}),a.jsxs("section",{className:"flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 justify-center sm:items-center","aria-label":t("ctas.ariaLabel"),children:[a.jsx(jt,{to:"/login",onClick:r,className:"w-full sm:w-auto px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t("ctas.loginAriaLabel"),children:t("ctas.loginButton")}),a.jsx(jt,{to:"/request-access",onClick:i,className:"w-full sm:w-auto px-8 py-3 bg-white text-blue-600 border-2 border-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t("ctas.requestAriaLabel"),children:t("ctas.requestButton")}),a.jsx(jt,{to:"/pymes-cercanas",onClick:l,className:"w-full sm:w-auto px-8 py-3 bg-gray-100 text-blue-700 border-2 border-blue-200 rounded-lg font-semibold hover:bg-gray-200 transition text-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t("ctas.nearbyAriaLabel"),children:t("ctas.nearbyButton")})]})]}),a.jsxs("footer",{className:"mt-6 text-center text-sm text-gray-600 space-y-2","aria-label":t("footer.ariaLabel"),children:[a.jsx(jt,{to:"/transparencia",className:"text-blue-600 hover:underline font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1",children:t("footer.transparency")}),a.jsxs("div",{className:"flex justify-center items-center gap-2",children:[a.jsx("img",{src:"/instagram.svg",alt:"",loading:"lazy",decoding:"async",width:20,height:20,className:"h-5 w-5","aria-hidden":"true"}),a.jsx("a",{href:"https://instagram.com/pymerp",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":t("footer.instagramAriaLabel"),children:t("footer.instagramHandle")})]}),a.jsx("div",{className:"text-xs text-gray-500","aria-label":t("footer.versionAriaLabel"),children:t("footer.version")})]})]})]})]})}const Hae=()=>{const[t,e]=y.useState(!1),n=qe();return a.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-gray-800/95 backdrop-blur-xl border-b border-gray-700/50 shadow-lg",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-18",children:[a.jsx(ke.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},onClick:()=>n("/"),className:"flex items-center relative","aria-label":"Ir a inicio de PyM-ERP",whileTap:{scale:.95},children:a.jsx("div",{className:"relative",children:a.jsx("img",{src:"/logoapp.png",alt:"PyM-ERP Logo",className:"w-14 h-14 sm:w-16 sm:h-16 object-contain relative z-10"})})}),a.jsxs(ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:"hidden md:flex items-center space-x-3 lg:space-x-4",children:[a.jsxs(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/pymes-cercanas"),className:"relative px-4 py-2 text-white font-medium rounded-lg bg-red-600 hover:bg-red-700 shadow-lg hover:shadow-xl transition-all duration-200 text-sm lg:text-base flex items-center space-x-2","aria-label":"Ver PYMEs cercanas",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),a.jsx("span",{className:"hidden lg:inline",children:"PYMEs Cercanas"})]}),a.jsx(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/login"),className:"px-4 py-2 text-gray-100 font-medium hover:text-white transition-colors duration-200 text-sm lg:text-base",children:"Iniciar Sesin"}),a.jsx(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/request-access"),className:"px-5 lg:px-6 py-2 bg-white text-gray-900 rounded-lg font-medium shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 text-sm lg:text-base",children:"Comenzar Gratis"})]}),a.jsx(ke.button,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},onClick:()=>e(!t),className:"md:hidden p-2 rounded-lg hover:bg-gray-700/50 active:bg-gray-600/50 transition-colors duration-200","aria-label":t?"Cerrar men de navegacin":"Abrir men de navegacin","aria-expanded":t,"aria-controls":"mobile-nav",type:"button",whileTap:{scale:.98},children:a.jsx("svg",{className:"w-6 h-6 text-gray-100",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",viewBox:"0 0 24 24",stroke:"currentColor",children:t?a.jsx("path",{d:"M6 18L18 6M6 6l12 12"}):a.jsx("path",{d:"M4 6h16M4 12h16M4 18h16"})})})]})}),a.jsx(ke.div,{initial:!1,animate:{height:t?"auto":0,opacity:t?1:0},transition:{duration:.3},id:"mobile-nav",className:"md:hidden overflow-hidden bg-gray-800/95 backdrop-blur-xl border-t border-gray-700/50 shadow-lg",children:a.jsxs("div",{className:"px-4 py-4 space-y-2",children:[a.jsxs("button",{onClick:()=>{n("/pymes-cercanas"),e(!1)},className:"block w-full text-center px-4 py-2.5 text-white font-medium bg-red-600 hover:bg-red-700 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 active:scale-[0.98] flex items-center justify-center space-x-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),a.jsx("span",{children:"PYMEs Cercanas"})]}),a.jsx("button",{onClick:()=>{n("/login"),e(!1)},className:"block w-full text-center px-4 py-2.5 text-gray-100 font-medium border border-gray-600 rounded-lg hover:bg-gray-700/50 hover:border-gray-500 hover:text-white transition-all duration-200 active:scale-[0.98] bg-gray-800 shadow-sm",children:"Iniciar Sesin"}),a.jsx("button",{onClick:()=>{n("/request-access"),e(!1)},className:"block w-full text-center px-4 py-2.5 bg-white text-gray-900 rounded-lg font-medium shadow-sm hover:shadow-md hover:bg-gray-50 transition-all duration-200 active:scale-[0.98]",children:"Comenzar Gratis"})]})})]})},qae=()=>{const t=qe();return a.jsxs("section",{"aria-labelledby":"landing-hero-heading",className:"relative min-h-screen flex items-center justify-center overflow-hidden",style:{backgroundImage:"url(/wallp.landing.png)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:[a.jsx("div",{className:"absolute inset-0 bg-black/30 backdrop-blur-[1px]"}),a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx(ke.div,{initial:{opacity:0,scale:.8},animate:{opacity:.05,scale:1},transition:{duration:1.5},className:"absolute top-20 -left-20 w-96 h-96 bg-purple-500 rounded-full blur-3xl"}),a.jsx(ke.div,{initial:{opacity:0,scale:.8},animate:{opacity:.05,scale:1},transition:{duration:1.5,delay:.3},className:"absolute bottom-20 -right-20 w-96 h-96 bg-indigo-500 rounded-full blur-3xl"})]}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-12 md:pt-28 md:pb-16 text-center",children:a.jsxs(ke.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},children:[a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"text-center"})}),a.jsx(ke.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},id:"landing-hero-heading",className:"text-3xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 leading-snug sm:leading-tight tracking-tight max-w-3xl mx-auto drop-shadow-lg",children:"Transforma tu negocio a digital en minutos"}),a.jsx(ke.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"text-lg sm:text-xl text-gray-100 font-medium mb-10 max-w-2xl mx-auto leading-relaxed drop-shadow-md",children:"Tu sitio web se ajusta a tu categora: agenda, catlogo, men QR, formulario de contacto o tarjeta de presentacin. Adems, incluye un sistema de gestin simple para operar tu da a da. Sin conocimientos tcnicos y sin costos ocultos."}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/request-access"),className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold text-lg shadow-lg hover:shadow-xl transition-shadow duration-300 w-full sm:w-auto",children:"Solicitar acceso gratis "}),a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{document.getElementById("how-it-works")?.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-white text-gray-900 rounded-lg font-semibold text-lg border-2 border-gray-500 hover:border-gray-600 hover:bg-gray-100 transition-all duration-300 w-full sm:w-auto",children:"Cmo funciona"}),a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/features"),className:"px-8 py-4 bg-indigo-600 text-white rounded-lg font-semibold text-lg border-2 border-indigo-700 hover:border-indigo-800 hover:bg-indigo-700 transition-all duration-300 w-full sm:w-auto",children:"Ver precios"})]}),a.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},className:"mt-10 flex flex-wrap justify-center gap-4 text-sm",children:[a.jsxs("span",{className:"flex items-center text-gray-100 font-medium drop-shadow-sm",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Plan BSICO gratis para siempre"]}),a.jsxs("span",{className:"flex items-center text-gray-100 font-medium drop-shadow-sm",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Sin tarjeta de crdito"]}),a.jsxs("span",{className:"flex items-center text-gray-100 font-medium drop-shadow-sm",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Listo en minutos"]})]}),a.jsx(ke.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,delay:.7},className:"mt-16 sm:mt-20 flex justify-center",children:a.jsxs(ke.button,{onClick:()=>t("/pymes-cercanas"),className:"relative group",whileHover:{scale:1.05},whileTap:{scale:.98},initial:{scale:1},animate:{boxShadow:["0 0 0 0 rgba(220, 38, 38, 0.7)","0 0 0 20px rgba(220, 38, 38, 0)","0 0 0 0 rgba(220, 38, 38, 0)"]},transition:{boxShadow:{duration:2,repeat:1/0,repeatDelay:.5}},children:[a.jsx(ke.div,{className:"absolute inset-0 rounded-full bg-red-500 opacity-75",style:{borderRadius:"9999px",overflow:"hidden"},animate:{scale:[1,1.3,1.3],opacity:[.75,0,0]},transition:{duration:2,repeat:1/0,repeatDelay:.5,ease:"easeOut"}}),a.jsxs("div",{className:"relative inline-flex items-center px-8 sm:px-10 py-4 sm:py-5 bg-gradient-to-r from-red-600 via-red-500 to-red-600 text-white rounded-full shadow-2xl hover:shadow-red-500/50 transition-all duration-300 font-bold text-lg sm:text-xl lg:text-2xl border-4 border-white/20 backdrop-blur-sm",children:[a.jsx(ke.svg,{className:"w-7 h-7 sm:w-8 sm:h-8 lg:w-10 lg:h-10 mr-3 sm:mr-4 relative z-10",fill:"currentColor",viewBox:"0 0 24 24",animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},"aria-hidden":"true",children:a.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),a.jsx("span",{className:"relative z-10 drop-shadow-lg",children:"Descubre PYMEs cercanas a ti"}),a.jsx(ke.svg,{className:"w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 ml-3 sm:ml-4 relative z-10",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",viewBox:"0 0 24 24",stroke:"currentColor",animate:{x:[0,5,0]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},"aria-hidden":"true",children:a.jsx("path",{d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})})]})})]})},Wae=y.lazy(()=>tn(()=>import("./HowItWorks-xb2XYBEL.js"),__vite__mapDeps([0,1])).then(t=>({default:t.HowItWorks}))),Yae=y.lazy(()=>tn(()=>import("./Features-DQQCi_c8.js"),__vite__mapDeps([2,1])).then(t=>({default:t.Features}))),Gae=y.lazy(()=>tn(()=>import("./Segmentation-DHU23QaU.js"),__vite__mapDeps([3,1])).then(t=>({default:t.Segmentation}))),Kae=y.lazy(()=>tn(()=>import("./Trust-DtXm_Bre.js"),[]).then(t=>({default:t.Trust}))),Qae=y.lazy(()=>tn(()=>import("./CTASection-DJ9Tcaqf.js"),[]).then(t=>({default:t.CTASection}))),Xae=()=>{const[t,e]=y.useState(!0);return y.useEffect(()=>{["/comofunciona.png","/wallp.landing.png"].forEach(s=>{const r=document.createElement("link");r.rel="preload",r.as="image",r.href=s,r.setAttribute("fetchpriority","high"),document.head.appendChild(r);const i=new Image;i.src=s})},[]),a.jsxs(a.Fragment,{children:[a.jsxs(wL,{children:[a.jsx("link",{rel:"preload",as:"image",href:"/comofunciona.png",fetchPriority:"high"}),a.jsx("link",{rel:"preload",as:"image",href:"/wallp.landing.png",fetchPriority:"high"})]}),a.jsx(ha,{title:"PYM-ERP | Plataforma todo-en-uno para tu negocio",description:"Automatiza reservas, facturacin y marketing en una sola plataforma diseada para PYMES y profesionales independientes.",keywords:"pymes, agenda online, gestin de negocios, reservas, ERP",ogImage:"/logopymerp.png",ogImageAlt:"PYM-ERP plataforma",canonical:"/",robots:"index, follow"}),a.jsxs(ke.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-white",children:[t&&a.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",role:"dialog","aria-modal":"true","aria-labelledby":"maintenance-notice-title",children:a.jsxs("div",{className:"relative w-full max-w-xl rounded-2xl border border-blue-300/30 bg-blue-950/85 backdrop-blur-xl shadow-2xl px-6 py-6 sm:px-8 text-white",children:[a.jsx("button",{type:"button",onClick:()=>e(!1),className:"absolute right-4 top-4 rounded-full bg-white/10 hover:bg-white/20 text-white p-2 transition-colors","aria-label":"Cerrar aviso",children:""}),a.jsx("div",{className:"inline-flex items-center gap-2 rounded-full bg-blue-800/60 px-3 py-1 text-xs font-semibold tracking-wide uppercase",children:"AVISO IMPORTANTE"}),a.jsx("h2",{id:"maintenance-notice-title",className:"mt-4 text-lg sm:text-xl font-semibold",children:"Estamos mejorando la app"}),a.jsx("p",{className:"mt-2 text-sm sm:text-base text-blue-100 leading-relaxed",children:"Estamos actualizando la plataforma con mejoras frecuentes. Te recomendamos revisar y actualizar tu pgina regularmente. Tus datos estn seguros y se guardan correctamente."})]})}),a.jsx(Hae,{}),a.jsxs("main",{children:[a.jsx("div",{id:"hero",children:a.jsx(qae,{})}),a.jsxs(y.Suspense,{fallback:a.jsx("div",{className:"space-y-12","aria-hidden":"true"}),children:[a.jsx("div",{id:"how-it-works",children:a.jsx(Wae,{})}),a.jsx("div",{id:"features",children:a.jsx(Yae,{})}),a.jsx("div",{id:"segmentation",children:a.jsx(Gae,{})}),a.jsx("div",{id:"trust",children:a.jsx(Kae,{})}),a.jsx(Qae,{})]})]}),a.jsx("footer",{className:"bg-gray-900 text-white py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 md:gap-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:"Empresa"}),a.jsxs("ul",{className:"space-y-3 text-center",children:[a.jsx("li",{children:a.jsx("a",{href:"/about",className:"text-white hover:text-white transition-colors font-medium",children:"Acerca de"})}),a.jsx("li",{children:a.jsx("a",{href:"/contacto",className:"text-white hover:text-white transition-colors font-medium",children:"Carreras"})}),a.jsx("li",{children:a.jsx("a",{href:"/contacto",className:"text-white hover:text-white transition-colors font-medium",children:"Prensa"})}),a.jsx("li",{children:a.jsx("a",{href:"/contacto",className:"text-white hover:text-white transition-colors font-medium",children:"Contacto"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:"Producto"}),a.jsxs("ul",{className:"space-y-3 text-center",children:[a.jsx("li",{children:a.jsx("a",{href:"/features",className:"text-white hover:text-white transition-colors font-medium",children:"Precios"})}),a.jsx("li",{children:a.jsx("a",{href:"/security",className:"text-white hover:text-white transition-colors font-medium",children:"Seguridad"})}),a.jsx("li",{children:a.jsx("a",{href:"/roadmap",className:"text-white hover:text-white transition-colors font-medium",children:"Roadmap"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:"Recursos"}),a.jsxs("ul",{className:"space-y-3 text-center",children:[a.jsx("li",{children:a.jsx("a",{href:"/contacto",className:"text-white hover:text-white transition-colors font-medium",children:"Documentacin"})}),a.jsx("li",{children:a.jsx("a",{href:"/contacto",className:"text-white hover:text-white transition-colors font-medium",children:"Blog"})}),a.jsx("li",{children:a.jsx("a",{href:"/contacto",className:"text-white hover:text-white transition-colors font-medium",children:"Centro de Ayuda"})}),a.jsx("li",{children:a.jsx("a",{href:"/contacto",className:"text-white hover:text-white transition-colors font-medium",children:"API"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold mb-4 text-white text-center",children:"Legal"}),a.jsxs("ul",{className:"space-y-3 text-center",children:[a.jsx("li",{children:a.jsx("a",{href:"/privacidad",className:"text-white hover:text-white transition-colors font-medium",children:"Privacidad"})}),a.jsx("li",{children:a.jsx("a",{href:"/terminos",className:"text-white hover:text-white transition-colors font-medium",children:"Trminos"})}),a.jsx("li",{children:a.jsx("a",{href:"/privacidad",className:"text-white hover:text-white transition-colors font-medium",children:"Cookies"})}),a.jsx("li",{children:a.jsx("a",{href:"/terminos",className:"text-white hover:text-white transition-colors font-medium",children:"Licencias"})})]})]})]}),a.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-700 flex flex-col md:flex-row justify-between items-center gap-6",children:[a.jsxs("div",{className:"text-center md:text-left space-y-2",children:[a.jsx("p",{className:"text-white text-sm font-medium",children:" 2026 PyM-ERP. Todos los derechos reservados."}),a.jsxs("div",{className:"text-gray-300 text-sm leading-relaxed",children:[a.jsx("p",{children:"PYMERP PLATAFORMA DIGITAL SpA  RUT 78.340.269-6"}),a.jsx("p",{children:"Romeral, Regin del Maule  Chile"}),a.jsx("p",{children:" ignacio@datakomerz.com"})]})]}),a.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[a.jsxs("a",{href:"https://x.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"X de PYM-ERP",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),a.jsx("span",{className:"sr-only",children:"X"})]}),a.jsxs("a",{href:"https://instagram.com/pymerp",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Instagram de PYM-ERP",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"})}),a.jsx("span",{className:"sr-only",children:"Instagram"})]}),a.jsxs("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"LinkedIn de PYM-ERP",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),a.jsx("span",{className:"sr-only",children:"LinkedIn"})]}),a.jsxs("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"GitHub de PYM-ERP",children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})}),a.jsx("span",{className:"sr-only",children:"GitHub"})]})]})]})]})})]})]})},i8=y.createContext(void 0);function Zae({children:t}){const{t:e}=ln(),n=jh();y.useEffect(()=>{document.documentElement.lang=n,document.documentElement.setAttribute("xml:lang",n)},[n]);const s=async()=>{await XE(n==="es"?"en":"es")},r=y.useMemo(()=>({locale:n,language:n,toggleLocale:s,setLanguage:XE,t:e}),[n,e]);return a.jsx(i8.Provider,{value:r,children:t})}function o8(){const t=y.useContext(i8);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t}function l8({title:t,description:e,image:n="/logopymerp.png",url:s,structuredData:r,structuredDataId:i="page-json-ld"}){y.useEffect(()=>{const l=s||window.location.href;t&&(document.title=t,ac("og:title",t,"property"),ac("twitter:title",t,"name")),e&&(ac("description",e,"name"),ac("og:description",e,"property"),ac("twitter:description",e,"name")),n&&(ac("og:image",n,"property"),ac("twitter:image",n,"name")),l&&(ac("og:url",l,"property"),Uae("canonical",l)),Bae(r,i)},[t,e,n,s,r,i])}const at=()=>{const t=y.useCallback((i,l)=>{const d=l?.showToast??!0,u=i instanceof nr?i:new nr(i.message||"Error desconocido",tr.UNKNOWN,l?.context);if(on.handle(u,!1),d){const h=l?.customMessage||Jae(u);J.error(h,{duration:4e3,position:"top-right"})}},[]),e=y.useCallback(async(i,l)=>{try{return await i()}catch(d){return t(d,{showToast:l?.showToast,customMessage:l?.customMessage,context:l?.context}),l?.onError&&l.onError(d),null}},[t]),n=y.useCallback(i=>{on.handleAuthError(i);const l=eie(i);J.error(l,{duration:5e3,position:"top-right"})},[]),s=y.useCallback((i,l)=>{on.handleFirestoreError(i,l);const d=tie(i);J.error(d,{duration:4e3,position:"top-right"})},[]),r=y.useCallback((i,l)=>{on.handleNetworkError(i,l),J.error("Error de conexin. Verifica tu internet.",{duration:4e3,position:"top-right"})},[]);return{handleError:t,handleAsyncError:e,handleAuthError:n,handleFirestoreError:s,handleNetworkError:r}};function Jae(t){const e={[tr.NETWORK]:"Error de conexin. Verifica tu internet.",[tr.AUTHENTICATION]:"Error de autenticacin. Inicia sesin nuevamente.",[tr.AUTHORIZATION]:"No tienes permisos para esta accin.",[tr.VALIDATION]:"Los datos ingresados no son vlidos.",[tr.NOT_FOUND]:"No se encontr el recurso solicitado.",[tr.SERVER]:"Error del servidor. Intenta ms tarde.",[tr.UNKNOWN]:t.message||"Ha ocurrido un error inesperado."};return e[t.type]||e[tr.UNKNOWN]}function eie(t){switch(t.code){case"auth/wrong-password":case"auth/user-not-found":return"Email o contrasea incorrectos";case"auth/email-already-in-use":return"Este email ya est registrado";case"auth/weak-password":return"La contrasea es muy dbil";case"auth/invalid-email":return"Email invlido";case"auth/user-disabled":return"Esta cuenta ha sido deshabilitada";case"auth/too-many-requests":return"Demasiados intentos. Intenta ms tarde";default:return t.message||"Error de autenticacin"}}function tie(t){switch(t.code){case"permission-denied":return"No tienes permisos para acceder a este recurso";case"not-found":return"No se encontr el recurso solicitado";case"already-exists":return"Este recurso ya existe";case"resource-exhausted":return"Se alcanz el lmite de operaciones";case"unauthenticated":return"Debes iniciar sesin para continuar";default:return t.message||"Error de base de datos"}}function Ai({isOpen:t,onClose:e,children:n,className:s="",ariaLabel:r="Dilogo modal",ariaLabelledBy:i,ariaDescribedBy:l}){const d=y.useRef(null),u=y.useRef(null);return y.useEffect(()=>(t?(u.current=document.activeElement,setTimeout(()=>{d.current?.focus()},100),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",u.current&&u.current.focus()),()=>{document.body.style.overflow="unset"}),[t]),y.useEffect(()=>{const h=f=>{f.key==="Escape"&&t&&e()};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[t,e]),y.useEffect(()=>{if(!t)return;const h=f=>{if(f.key!=="Tab"||!d.current)return;const p=d.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),x=p[0],b=p[p.length-1];f.shiftKey&&document.activeElement===x?(f.preventDefault(),b?.focus()):!f.shiftKey&&document.activeElement===b&&(f.preventDefault(),x?.focus())};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[t]),a.jsx(Ci,{children:t&&a.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e,role:"presentation",children:a.jsx(ke.div,{ref:d,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,type:"spring",damping:20},className:`bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto ${s}`,style:{...s.includes("booking-modal-container")?{maxHeight:"92vh",width:"100%",maxWidth:"64rem",flexDirection:"column",overflow:"hidden",overflowY:"auto",borderRadius:"0.5rem",padding:0,boxShadow:"0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1)",backgroundColor:"var(--ios-surface, #ffffff)",opacity:1,transform:"none"}:{}},onClick:h=>h.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":i?void 0:r,"aria-labelledby":i,"aria-describedby":l,tabIndex:-1,children:n})})})}function nie(){const{handleError:t}=at(),e=ka(),[n,s]=y.useState(""),[r,i]=y.useState(""),[l,d]=y.useState(!1),[u,h]=y.useState(!1),[f,p]=y.useState(!1),[x,b]=y.useState(!1),[_,j]=y.useState(""),[v,T]=y.useState(!1),[P,A]=y.useState(!1),[C,M]=y.useState("manual"),L=qe(),{t:k}=o8(),{loading:R,redirectResult:S,clearRedirectResult:O,firestoreUser:I,firebaseUser:F}=wt(),{handleAuthError:$}=at();l8({title:`${k("login.title")} | PYM-ERP`,description:k("login.subtitle"),image:"/logopymerp.png"});const Q=y.useCallback(async q=>{if(!q)throw new Tr("USER_NOT_PROVISIONED","La cuenta no est provisionada.");if(q.status===Rr.FORCE_PASSWORD_CHANGE){L("/change-password");return}if(q.role==="SUPERADMIN"){L("/admin");return}if(q.company_id){const Z=await yn(q.company_id);if(Z&&!Z.setup_completed){L("/setup/company-basic");return}L("/dashboard");return}L("/setup/company-basic")},[L]),G=y.useCallback(q=>{if(q instanceof Tr&&q.code==="USER_NOT_PROVISIONED"){J.error("Tu cuenta an no est provisionada. Contacta al administrador.");return}if(q instanceof Tr&&q.code==="ACCOUNT_EXISTS_WITH_DIFFERENT_CREDENTIAL"){J.error("Ya existe una cuenta con otro mtodo. Usa tu mtodo original o vincula tu cuenta.");return}if(!(q instanceof Tr&&q.code==="POPUP_CLOSED_BY_USER")){if(q instanceof Tr&&q.code==="POPUP_BLOCKED"){J.error("El navegador o una extensin bloque el popup. Redirigiendo a Google...",{duration:3e3});return}console.error("Error en Google Sign-In:",q),$(q)}},[$]);y.useEffect(()=>{if(R||!S)return;let q=!0;return p(!0),Q(S.firestoreUser).then(()=>{q&&(J.success(k("login.successMessage")),O())}).catch(Z=>{q&&G(Z)}).finally(()=>{q&&p(!1)}),()=>{q=!1}},[R,S,O,Q,G,k]),y.useEffect(()=>{if(R||S||!F)return;let q=!0;return p(!0),(async()=>{const Z=I||await Gb(F);await Q(Z),J.success(k("login.successMessage"))})().catch(Z=>{q&&G(Z)}).finally(()=>{q&&p(!1)}),()=>{q=!1}},[R,S,F,I,Q,G,k]),y.useEffect(()=>{const Z=new URLSearchParams(e.search).get("email");Z&&s(Z)},[e.search]);const B=async q=>{q.preventDefault(),h(!0);try{await sre(n,r);const Z=await Mj();await Q(Z),J.success(k("login.successMessage"))}catch(Z){if(Z instanceof Tr&&Z.code==="USER_NOT_PROVISIONED"){J.error("Tu cuenta an no est provisionada. Contacta al administrador.");return}$(Z)}finally{h(!1)}},z=async()=>{p(!0);try{const q=await Q9({mode:"auto"});if(!q)return;await Q(q.firestoreUser),J.success(k("login.successMessage"))}catch(q){G(q)}finally{p(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Hj,{}),a.jsx(zj,{})]})}),a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("img",{src:"/logopymerp.png",alt:"PyM-ERP",className:"w-36 sm:w-40 object-contain",loading:"lazy",decoding:"async"})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:k("login.title")})]}),a.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white p-1",children:[a.jsx("button",{type:"button",onClick:()=>M("manual"),className:`px-4 py-2 text-sm font-semibold rounded-full transition ${C==="manual"?"bg-blue-600 text-white shadow":"text-gray-600 hover:text-gray-900"}`,children:"Email y contrasea"}),a.jsx("button",{type:"button",onClick:()=>M("google"),className:`px-4 py-2 text-sm font-semibold rounded-full transition ${C==="google"?"bg-blue-600 text-white shadow":"text-gray-600 hover:text-gray-900"}`,children:"Google"})]}),C==="manual"?a.jsxs("form",{className:"mt-6 space-y-6",onSubmit:B,children:[a.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:k("common.email")}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"email",className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:k("common.email"),value:n,onChange:q=>s(q.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:k("common.password")}),a.jsx("input",{id:"password",name:"password",type:l?"text":"password",required:!0,autoComplete:"current-password",className:"appearance-none rounded-none relative block w-full pr-12 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:k("common.password"),value:r,onChange:q=>i(q.target.value)}),a.jsx("button",{type:"button",onClick:()=>d(q=>!q),className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs font-semibold text-gray-600 hover:text-gray-900","aria-label":l?"Ocultar contrasea":"Mostrar contrasea",children:l?"Ocultar":"Mostrar"})]})]}),a.jsxs("div",{children:[a.jsx(Mt,{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:u?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(yt,{size:"sm",color:"#ffffff"}),k("login.submittingButton"),"..."]}):k("login.submitButton")}),a.jsx(Mt,{type:"button",onClick:()=>L("/"),className:"group relative w-full flex justify-center py-2 px-4 mt-3 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none fokus:ring-2 fokus:ring-offset-2 focus:ring-blue-500",children:k("common.backHome")}),a.jsx("div",{className:"mt-3 text-center",children:a.jsx("button",{type:"button",onClick:()=>b(!0),className:"text-sm text-blue-600 hover:underline",children:k("login.forgotPassword")})})]})]}):a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsx(Mt,{type:"button",onClick:z,disabled:f,className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none fokus:ring-2 fokus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:f?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(yt,{size:"sm",color:"#1f2937"}),"Continuar con Google..."]}):"Continuar con Google"}),a.jsx("p",{className:"text-xs text-center text-gray-500",children:"Inicia sesin con tu cuenta Google para ingresar ms rpido."}),a.jsx(Mt,{type:"button",onClick:()=>L("/"),className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none fokus:ring-2 fokus:ring-offset-2 focus:ring-blue-500",children:k("common.backHome")})]})]})}),a.jsxs(Ai,{isOpen:x,onClose:()=>{b(!1),A(!1),T(!1)},className:"p-6 relative",children:[a.jsx("button",{type:"button",onClick:()=>{b(!1),A(!1),T(!1)},className:"absolute top-3 right-3 text-gray-600 hover:text-gray-800 text-xl","aria-label":"Cerrar",children:""}),P?a.jsxs("div",{className:"text-center space-y-3 py-6",children:[a.jsx("div",{className:"text-5xl text-green-500",children:""}),a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:k("login.resetSuccessTitle")}),a.jsx("p",{className:"text-sm text-gray-700",children:k("login.resetSuccessMessage")})]}):a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:k("login.resetPasswordTitle")}),a.jsx("p",{className:"text-sm text-gray-700 mb-4",children:k("login.resetPasswordMessage")}),a.jsxs("form",{className:"space-y-4",onSubmit:async q=>{q.preventDefault(),T(!0);try{const Z=_.trim().toLowerCase();let ee=null,H=null;try{[ee,H]=await Promise.all([Hb(Z).catch(()=>null),y9(Z).catch(()=>null)])}catch(X){console.warn("No se pudieron leer datos de Firestore (no crtico):",X)}const Y=ee?.email||H?.email||Z;await ire(Y);try{ee?.id&&await Qd(ee.id,{status:Rr.ACTIVE})}catch(X){console.warn("No se pudo actualizar el estado del usuario (no crtico):",X)}try{H?.id&&await x9(H.id,{last_password_reset:new Date})}catch(X){console.warn("No se pudo actualizar la solicitud de acceso (no crtico):",X)}A(!0),T(!1),setTimeout(()=>{b(!1),A(!1),L("/login")},1200)}catch(Z){Z.code==="auth/user-not-found"?(A(!0),T(!1),setTimeout(()=>{b(!1),A(!1),L("/login")},1200)):(t(Z),J.error(k("login.resetSendError")),T(!1))}finally{T(!1)}},children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:k("common.email")}),a.jsx("input",{type:"email",required:!0,autoComplete:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:_,onChange:q=>j(q.target.value)})]}),a.jsx(Mt,{type:"submit",className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:v,children:v?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx(yt,{size:"sm",color:"#ffffff"}),k("login.resetSendingButton"),"..."]}):k("login.resetSendButton")})]})]})]})]})}const c8=t=>{const{projectId:e,functionsRegion:n}=xn.firebase;return`https://${n}-${e}.cloudfunctions.net/${t}`},iP=async t=>{try{const e=c8("sendAccessRequestEmailHttp"),n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,created_at:t.created_at.toISOString(),language:t.language||"es"})});if(!n.ok){const r=await n.text();let i;try{i=JSON.parse(r)}catch{i={error:r}}Re.error(" Error HTTP:",n.status,i),Re.warn(" Email no enviado:",i.error||i.message||"Error desconocido");return}const s=await n.json();s.success?Re.success("Email de solicitud de acceso enviado correctamente"):(Re.warn(" Email no enviado:",s.message||s.error),s.details&&Re.error("Detalles del error:",s.details))}catch(e){Re.error("Error completo enviando email:",e),Re.error("Mensaje de error:",e.message)}},sie=async(t,e="es")=>{try{const n=c8("sendFirstPasswordEmailHttp"),s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,language:e})});if(!s.ok){const i=await s.text();let l;try{l=JSON.parse(i)}catch{l={error:i}}Re.error(" Error HTTP:",s.status,l),Re.warn(" Email no enviado:",l.error||l.message||"Error desconocido");return}const r=await s.json();r.success?Re.success("Email de primera contrasea enviado correctamente"):(Re.warn(" Email no enviado:",r.message||r.error),r.details&&Re.error("Detalles del error:",r.details))}catch(n){Re.error("Error completo enviando email de primera contrasea:",n),Re.error("Mensaje de error:",n.message)}},rie=(t=12)=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let n="";for(let s=0;s<t;s++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},n2=t=>t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");function aie(){const{handleError:t}=at(),[e,n]=y.useState({full_name:"",email:"",business_name:"",whatsapp:"",plan:"BASIC",acceptedBeta:!1}),[s,r]=y.useState(!1),[i,l]=y.useState(!1),[d,u]=y.useState(!1),[h,f]=y.useState(""),[p,x]=y.useState(null),[b,_]=y.useState(null),[j,v]=y.useState(!1),[T,P]=y.useState(!1),[A,C]=y.useState("google"),[M,L]=y.useState(!!qn.currentUser),k=qe(),{t:R}=o8(),{loading:S,redirectResult:O,clearRedirectResult:I}=wt();y.useEffect(()=>{if(S||!O)return;const G=O;let B=!0;return l(!0),(async()=>{try{if(G.firestoreUser.status===Rr.FORCE_PASSWORD_CHANGE){I(),k("/change-password");return}if(G.firestoreUser.role==="SUPERADMIN"){I(),k("/admin");return}if(G.firestoreUser.company_id){const Z=await yn(G.firestoreUser.company_id);if(I(),Z&&!Z.setup_completed){k("/setup/company-basic");return}k("/dashboard");return}const z=G.firebaseUser.email?.toLowerCase()||"",q=G.firebaseUser.displayName||"";B&&(n(Z=>({...Z,email:z,full_name:q||Z.full_name})),L(!0),C("google"),I(),J.success("Autenticacin exitosa. Por favor completa los datos de tu negocio."))}catch(z){B&&t(z)}finally{B&&l(!1)}})(),()=>{B=!1}},[S,O,I,k,t]);const F=y.useCallback(async(G,B,z,q,Z)=>{const ee="BASIC",H=q||B.split("@")[0]||B,Y=n2(H),X=Z.replace(/\D/g,"");Re.info(" Creando access request...");const ie={full_name:z||B.split("@")[0],email:B.toLowerCase(),business_name:q,whatsapp:X,plan:ee};await $E(ie),Re.info(" Access request creado"),Re.info(" Creando compaa...");const te=await zE({owner_user_id:G,name:q,rut:"",industry:"",whatsapp:X,address:"",slug:Y,setup_completed:!1,subscription_plan:ee,business_type:an.SERVICES});Re.info(" Compaa creada:",te),Re.info(" Actualizando usuario con company_id..."),await Qd(G,{company_id:te,status:Rr.FORCE_PASSWORD_CHANGE}),Re.info(" Usuario actualizado con company_id");try{await JE(G,te)}catch(be){Re.warn("No se pudo asignar claim de compaa automticamente",be)}return await iP({...ie,created_at:new Date,language:jh()}),te},[]),$=async()=>{l(!0);try{const G=await Q9({mode:"auto"});if(!G)return;const{firebaseUser:B,firestoreUser:z}=G,q=B.email?.toLowerCase()||"",Z=B.displayName||"";if(z.company_id){const ee=await yn(z.company_id);if(ee&&!ee.setup_completed){k("/setup/company-basic");return}k("/dashboard");return}n(ee=>({...ee,email:q,full_name:Z||ee.full_name})),L(!0),C("google"),J.success("Autenticacin exitosa. Por favor completa los datos de tu negocio.")}catch(G){if(G instanceof Tr){if(G.code==="USER_NOT_PROVISIONED"){J.error("Tu cuenta an no est provisionada. Contacta al administrador.");return}if(G.code==="ACCOUNT_EXISTS_WITH_DIFFERENT_CREDENTIAL"){J.error("Ya existe una cuenta con otro mtodo. Usa tu mtodo original.");return}if(G.code==="POPUP_CLOSED_BY_USER")return;if(G.code==="POPUP_BLOCKED"){J.error("El navegador bloque el popup. Redirigiendo a Google...",{duration:3e3});return}}const B=G?.message||"";if(B.includes("TrustedHTML")||B.includes("popup")){Re.warn("Error de TrustedHTML o popup bloqueado detectado:",G),J.error("El navegador bloque el popup. Redirigiendo a Google...",{duration:3e3});return}console.error("Error en Google Sign-In (RequestAccess):",G),t(G)}finally{l(!1)}};l8({title:`${R("requestAccess.title")} | PYM-ERP`,description:R("requestAccess.subtitle"),image:"/logopymerp.png"});const Q=async G=>{G.preventDefault();const B=e.email.trim().toLowerCase(),z=e.full_name.trim(),q=e.business_name.trim(),Z=e.whatsapp.replace(/\D/g,"");if(!z||!q||!B){J.error(R("requestAccess.submitError"));return}if(Z.length<9||Z.length>15){J.error(R("requestAccess.invalidWhatsapp"));return}if(!e.acceptedBeta){J.error(R("requestAccess.acceptBetaTerms"));return}if(A==="google"&&!M){J.error("Primero inicia sesin con Google para continuar.");return}if(A==="email"&&M){J.error("Tienes una sesin de Google activa. Cierra sesin para continuar con email.");return}r(!0);let ee=null,H=!1;try{const Y={full_name:z,email:B,business_name:q,whatsapp:Z,plan:e.plan},X=(e.plan||"BASIC").toUpperCase(),ie=q||B.split("@")[0]||B,te=n2(ie),be=qn.currentUser;let ve;if(be&&be.email?.toLowerCase()===B){ve=be.uid,Re.info(" Usuario ya autenticado:",ve);const Se=await Mj();if(Se&&Se.company_id){const Pe=await yn(Se.company_id);if(Pe&&!Pe.setup_completed){k("/setup/company-basic");return}k("/dashboard");return}Re.info(" Creando compaa para usuario autenticado..."),await F(ve,B,z,q,Z),Re.info(" Compaa creada"),f(B),await Y0().catch(()=>{}),L(!1),P(!0);return}else{Re.info(" Paso 1: Creando access request...");const Se={...Y,plan:X,whatsapp:Z};Re.info(" Datos del access request:",Se),ee=await $E(Se),Re.info(" Access request creado:",ee),Re.info(" Paso 2: Creando usuario en Firebase Auth...");const Pe=rie();ve=(await are(B,Pe)).uid,Re.info(" Usuario Auth creado:",ve),Re.info(" Paso 3: Creando documento de usuario en Firestore..."),await Fh({email:B,status:Rr.FORCE_PASSWORD_CHANGE,role:ct.ENTREPRENEUR},ve),Re.info(" Documento de usuario creado"),Re.info(" Paso 4: Creando compaa...");const Fe=await zE({owner_user_id:ve,name:q,rut:"",industry:"",whatsapp:Z,address:"",slug:te,setup_completed:!1,subscription_plan:X,business_type:an.SERVICES});Re.info(" Compaa creada:",Fe),Re.info(" Paso 5: Actualizando usuario con company_id..."),await Qd(ve,{company_id:Fe}),Re.info(" Usuario actualizado con company_id");try{await JE(ve,Fe)}catch(We){Re.warn("No se pudo asignar claim de compaa automticamente",We)}await iP({...Y,plan:X,created_at:new Date,language:jh()}),await sie(B,jh()),H=!0,await Y0(),L(!1),f(B),x("email"),u(!0)}}catch(Y){if(Re.error("Error completo en submitAccessRequest:",Y),Re.error("Error code:",Y?.code),Re.error("Error message:",Y?.message),Y?.code==="auth/email-already-in-use"){const X=R("requestAccess.emailAlreadyRegisteredLong");J.error(X),_(X)}else{const X=Y?.message||Y?.code||"Error desconocido";Re.error("Mostrando error al usuario:",X),J.error(R("requestAccess.submitError")+": "+X)}t(Y,{showToast:!1,context:{action:"submitAccessRequest"}})}finally{H&&qn.currentUser?.email?.toLowerCase()===B&&await Y0().catch(()=>{}),r(!1)}};if(d){const G=h?`/login?email=${encodeURIComponent(h)}`:"/login";return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md w-full text-center",children:a.jsxs("div",{className:"bg-white shadow rounded-lg p-8",children:[a.jsx("div",{className:"text-green-600 text-5xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Registro listo"}),a.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:p==="google"?"Si te registraste con Google, inicia sesin con Google y luego cambia tu contrasea dentro de la app.":"Si usaste el mtodo directo, recibirs un correo para crear tu primera contrasea en pymerp.cl. Luego cmbiala en tu primer inicio de sesin."}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Ya puedes registrar tu primer emprendimiento."}),a.jsx("a",{href:G,className:"mt-6 inline-flex items-center justify-center px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Ir a iniciar sesin"})]})})})}return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-center mb-2",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Hj,{}),a.jsx(zj,{})]})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:R("requestAccess.title")}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:R("requestAccess.subtitle")})]}),a.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 rounded-full border border-gray-200 bg-white p-1",children:[a.jsx("button",{type:"button",onClick:()=>C("google"),className:`px-4 py-2 text-sm font-semibold rounded-full transition ${A==="google"?"bg-blue-600 text-white shadow":"text-gray-600 hover:text-gray-900"}`,children:"Con Google"}),a.jsx("button",{type:"button",onClick:()=>C("email"),className:`px-4 py-2 text-sm font-semibold rounded-full transition ${A==="email"?"bg-blue-600 text-white shadow":"text-gray-600 hover:text-gray-900"}`,children:"Con Email"})]}),A==="google"?a.jsxs("div",{className:"mt-6 space-y-3",children:[a.jsx(Mt,{type:"button",onClick:$,disabled:i||s,className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:i?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(yt,{size:"sm",color:"#1f2937"}),"Continuar con Google..."]}):"Continuar con Google"}),a.jsx("p",{className:"text-xs text-center text-gray-500",children:"Primero autentica tu cuenta Google y luego completa los datos del negocio."})]}):a.jsx("div",{className:"mt-6 rounded-md border border-gray-200 bg-white px-4 py-3 text-xs text-gray-600",children:"Usa este mtodo si quieres crear tu cuenta con email y contrasea."}),A==="email"&&M&&a.jsxs("div",{className:"mt-4 rounded-md border border-amber-200 bg-amber-50 px-4 py-3 text-xs text-amber-700",children:["Tienes una sesin de Google activa. Para continuar con email, primero cierra sesin.",a.jsx("button",{type:"button",onClick:async()=>{await Y0().catch(()=>{}),L(!1)},className:"ml-2 text-amber-900 underline",children:"Cerrar sesin"})]}),a.jsxs("form",{className:"mt-4 space-y-6",onSubmit:Q,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:[R("requestAccess.fullNameLabel")," *"]}),a.jsx("input",{id:"full_name",name:"full_name",type:"text",required:!0,autoComplete:"name",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:e.full_name,onChange:G=>n({...e,full_name:G.target.value})})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:[R("common.email")," *"]}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"email",className:`mt-1 appearance-none relative block w-full px-3 py-2 border ${b?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none sm:text-sm`,value:e.email,onChange:G=>{n({...e,email:G.target.value}),_(null)}}),b&&a.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[a.jsx("p",{className:"text-sm text-red-800",children:b}),a.jsx("button",{type:"button",onClick:()=>k("/login"),className:"mt-2 text-sm text-red-600 hover:text-red-800 underline",children:R("requestAccess.goToLogin")})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"business_name",className:"block text-sm font-medium text-gray-700",children:[R("requestAccess.businessNameLabel")," *"]}),a.jsx("input",{id:"business_name",name:"business_name",type:"text",required:!0,autoComplete:"organization",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"",value:e.business_name,onChange:G=>n({...e,business_name:G.target.value})}),a.jsx("div",{className:"relative overflow-hidden h-5 mt-1",children:a.jsx("span",{className:"absolute whitespace-nowrap text-xs text-blue-600 animate-marquee",children:R("requestAccess.businessNameHint")})})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"whatsapp",className:"block text-sm font-medium text-gray-700",children:[R("requestAccess.whatsappLabel")," *"]}),a.jsx("input",{id:"whatsapp",name:"whatsapp",type:"tel",required:!0,autoComplete:"tel",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"+56912345678",value:e.whatsapp,onChange:G=>n({...e,whatsapp:G.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"plan",className:"block text-sm font-medium text-gray-700",children:R("requestAccess.planLabel")}),a.jsx("select",{id:"plan",name:"plan",className:"mt-1 block w-full px-3 py-2 border border-gray-300 bg-gray-50 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm cursor-not-allowed",value:e.plan,disabled:!0,children:a.jsx("option",{value:"BASIC",children:R("requestAccess.plans.basic")})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"El plan BSICO es gratis para siempre"})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("input",{id:"acceptedBeta",name:"acceptedBeta",type:"checkbox",className:"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:e.acceptedBeta,onChange:G=>n({...e,acceptedBeta:G.target.checked}),required:!0}),a.jsxs("label",{htmlFor:"acceptedBeta",className:"text-sm text-gray-700",children:[R("requestAccess.acceptBetaLabel")," ",a.jsx("button",{type:"button",onClick:()=>v(!0),className:"text-blue-600 hover:underline font-semibold",children:R("requestAccess.betaTermsLink")})]})]})]}),a.jsxs("div",{children:[a.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:R(s?"requestAccess.sendingButton":"requestAccess.submitButton")}),b&&a.jsx("p",{className:"mt-2 text-xs text-center text-red-600",children:R("requestAccess.cannotSubmitWithRegisteredEmail")}),a.jsx("button",{type:"button",onClick:()=>k("/"),className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 mt-3",children:R("common.backHome")}),a.jsx("div",{className:"mt-3 text-center",children:a.jsx("button",{type:"button",onClick:()=>k("/login"),className:"text-sm text-blue-600 hover:underline",children:"Ya tienes cuenta? Inicia sesin"})})]})]})]}),j&&a.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 backdrop-blur-sm flex items-center justify-center px-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 sm:p-8 relative",children:[a.jsx("button",{type:"button",onClick:()=>v(!1),className:"absolute top-3 right-3 text-gray-600 hover:text-gray-800 text-xl","aria-label":"Cerrar",children:""}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:R("requestAccess.betaConditionsTitle")}),a.jsxs("div",{className:"space-y-3 text-gray-700 text-sm sm:text-base",children:[a.jsx("p",{children:R("requestAccess.betaCondition1")}),a.jsx("p",{children:R("requestAccess.betaCondition2")}),a.jsx("p",{children:R("requestAccess.betaCondition3")}),a.jsx("p",{children:R("requestAccess.betaCondition4")}),a.jsx("p",{children:R("requestAccess.betaCondition5")})]})]})})]}),a.jsxs(Ai,{isOpen:T,onClose:()=>P(!1),className:"p-6 relative",children:[a.jsx("button",{type:"button",onClick:()=>P(!1),className:"absolute top-3 right-3 text-gray-600 hover:text-gray-800 text-xl","aria-label":"Cerrar",children:""}),a.jsxs("div",{className:"text-center space-y-3",children:[a.jsx("div",{className:"text-green-600 text-5xl",children:""}),a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Tu cuenta ya fue creada"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Inicia sesin con Google para continuar y completar la configuracin."}),a.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>{const G=h?`/login?email=${encodeURIComponent(h)}`:"/login";k(G)},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Ir al login"}),a.jsx("button",{type:"button",onClick:()=>P(!1),className:"w-full px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cerrar"})]})]})]})]})}function iie(){const{handleError:t}=at(),[e]=M2(),n=qe(),[s,r]=y.useState(""),[i,l]=y.useState(""),[d,u]=y.useState(!1),[h,f]=y.useState(!1),[p,x]=y.useState(null);y.useEffect(()=>{const _=e.get("mode"),j=e.get("oobCode");_==="resetPassword"&&j&&(f(!0),x(j))},[e]);const b=async _=>{if(_.preventDefault(),s!==i){J.error("Las contraseas no coinciden");return}if(s.length<6){J.error("La contrasea debe tener al menos 6 caracteres");return}u(!0);try{h&&p?(await ZK(qn,p,s),J.success("Contrasea restablecida exitosamente"),n("/login")):(await rre(s),J.success("Contrasea cambiada exitosamente"),window.location.replace("/setup/company-basic"))}catch(j){t(j,{customMessage:"Error al cambiar la contrasea",context:{action:"changePassword"}})}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:h?"Restablecer contrasea":"Cambiar contrasea"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:h?"Ingresa tu nueva contrasea para restablecer tu cuenta":"Debes cambiar tu contrasea antes de continuar"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Nueva contrasea *"}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,autoComplete:"new-password",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:s,onChange:_=>r(_.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmar contrasea *"}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,autoComplete:"new-password",className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:i,onChange:_=>l(_.target.value)})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Cambiando...":"Cambiar contrasea"})})]})]})})}function oie(){const[t]=M2(),e=qe(),{handleError:n}=at(),[s,r]=y.useState("loading"),[i,l]=y.useState("");return y.useEffect(()=>{(async()=>{const u=t.get("mode"),h=t.get("oobCode");if(!u||!h){r("error"),l("Enlace invlido o expirado. Por favor, solicita un nuevo enlace.");return}try{switch(u){case"verifyEmail":{await JK(qn,h),r("success"),l("Tu correo electrnico ha sido verificado correctamente."),J.success("Correo verificado correctamente"),setTimeout(()=>{e("/login?verified=true")},2e3);break}case"resetPassword":{try{await eQ(qn,h),e(`/change-password?oobCode=${h}&mode=resetPassword`)}catch{r("error"),l("Este enlace ha expirado o ya fue utilizado. Por favor, solicita un nuevo enlace de recuperacin."),J.error("Enlace invlido o expirado"),setTimeout(()=>{e("/login")},3e3)}break}case"recoverEmail":{try{await eO(qn,h),r("success"),l("Tu email ha sido recuperado correctamente."),J.success("Email recuperado correctamente"),setTimeout(()=>{e("/login")},2e3)}catch{r("error"),l("Este enlace ha expirado o ya fue utilizado."),J.error("Enlace invlido o expirado"),setTimeout(()=>{e("/login")},3e3)}break}default:r("error"),l(`Modo de accin no reconocido: ${u}`),setTimeout(()=>{e("/login")},3e3)}}catch(f){console.error("Error procesando accin de Auth:",f),n(f),r("error");let p="Ocurri un error al procesar tu solicitud.";f.code==="auth/expired-action-code"?p="Este enlace ha expirado. Por favor, solicita un nuevo enlace.":f.code==="auth/invalid-action-code"?p="Este enlace es invlido o ya fue utilizado. Por favor, solicita un nuevo enlace.":f.code==="auth/user-disabled"&&(p="Esta cuenta ha sido deshabilitada. Por favor, contacta al soporte."),l(p),J.error(p),setTimeout(()=>{e("/login")},4e3)}})()},[t,e,n]),a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[s==="loading"&&a.jsxs(a.Fragment,{children:[a.jsx(yt,{size:"lg"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mt-6 mb-2",children:"Procesando tu solicitud..."}),a.jsx("p",{className:"text-gray-600",children:"Por favor espera mientras verificamos tu enlace."})]}),s==="success"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-6xl text-green-500 mb-4",children:""}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Operacin exitosa!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:i}),a.jsx("p",{className:"text-sm text-gray-500",children:"Sers redirigido automticamente..."})]}),s==="error"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-6xl text-red-500 mb-4",children:""}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error al procesar"}),a.jsx("p",{className:"text-gray-600 mb-6",children:i}),a.jsx("button",{onClick:()=>e("/login"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:"Volver al inicio de sesin"})]})]})})}const rh={BASIC:{professionals:1,services:5,products:5,serviceSchedules:5},STARTER:{professionals:6,services:40,products:40,serviceSchedules:40},PRO:{professionals:10,services:1/0,products:1/0,serviceSchedules:1/0},BUSINESS:{professionals:30,services:1/0,products:1/0,serviceSchedules:1/0},ENTERPRISE:{professionals:60,services:1/0,products:1/0,serviceSchedules:1/0}},mf={BASIC:{automaticReminders:!1,exportData:!1,integrations:!1,featuredInDirectory:!1,customDomain:!1,advancedAnalytics:!1,prioritySupport:!1,whiteLabel:!1},STARTER:{automaticReminders:!0,exportData:!1,integrations:!1,featuredInDirectory:!1,customDomain:!1,advancedAnalytics:!1,prioritySupport:!1,whiteLabel:!1},PRO:{automaticReminders:!0,exportData:!0,integrations:!0,featuredInDirectory:!0,customDomain:!1,advancedAnalytics:!0,prioritySupport:!0,whiteLabel:!1},BUSINESS:{automaticReminders:!0,exportData:!0,integrations:!0,featuredInDirectory:!0,customDomain:!0,advancedAnalytics:!0,prioritySupport:!0,whiteLabel:!1},ENTERPRISE:{automaticReminders:!0,exportData:!0,integrations:!0,featuredInDirectory:!0,customDomain:!0,advancedAnalytics:!0,prioritySupport:!0,whiteLabel:!0}},d8={BASIC:{planId:"BASIC",label:"Basic",description:"Plan esencial para comenzar con tu negocio",price:"$0",limits:rh.BASIC,features:mf.BASIC},STARTER:{planId:"STARTER",label:"Starter",description:"Sistema de gestin sencillo para crecer",price:"$27.900/mes",limits:rh.STARTER,features:mf.STARTER,recommended:!0},PRO:{planId:"PRO",label:"Pro",description:"Gestin empresarial pro con automatizaciones",price:"$69.800/mes",limits:rh.PRO,features:mf.PRO},BUSINESS:{planId:"BUSINESS",label:"Business",description:"E-commerce y operaciones avanzadas para expansin",price:"$247.900/mes",limits:rh.BUSINESS,features:mf.BUSINESS},ENTERPRISE:{planId:"ENTERPRISE",label:"Enterprise",description:"Consultora y desarrollo a medida",price:"Personalizado",limits:rh.ENTERPRISE,features:mf.ENTERPRISE}};function u8(t){return rh[t]}function Dp(t){return d8[t]}function qj(){return Object.values(d8)}function lie(t){return{BASIC:"STARTER",STARTER:"PRO",PRO:"BUSINESS",BUSINESS:"ENTERPRISE",ENTERPRISE:null}[t]}function h8(t){return{BASIC:"BASIC",STANDARD:"STARTER",PRO:"PRO",APPROVED25:"PRO"}[t]||"BASIC"}function cie(){const t=qe(),[e,n]=y.useState(!0),[s,r]=y.useState(null),l=qj().map(u=>{const h=u.planId.toLowerCase(),f=u.limits,p=u.features,x=[];u.planId==="BASIC"?x.push("Pgina pblica personalizable","Integracin con WhatsApp (simple)","Men, agenda y catlogo bsico segn tu categora","Sitio web bsico para tu negocio"):u.planId==="STARTER"?x.push("Pgina pblica personalizable","Men, agenda y catlogo con gestin empresarial sencilla","Diseo de pginas Starter","Gestin de citas/rdenes automatizadas desde tu panel"):u.planId==="PRO"?x.push("Pgina pblica personalizable","Gestin empresarial Pro (men, agenda, catlogo y sitio web)","Diseo Premium + contenido + personalizacin","Gestin de citas/rdenes automatizadas desde tu panel","Soporte prioritario + colaboracin en marketing digital","Agente IA Pro"):u.planId==="BUSINESS"?x.push("Dominio propio .cl / .com","E-commerce con mtodos de pago","Diseo de pginas a medida","ERP profesional para carga masiva de datos","Sistema multisucursal y multiusuario","Reportes modulares en tiempo real","Gestin de RRHH","Agente IA Enterprise"):x.push("Consultora especializada segn tu negocio","Apps a medida para cualquier dispositivo","Diseo y desarrollo personalizado"),x.push(`${f.professionals===1/0?"Profesionales ilimitados":`Hasta ${f.professionals} profesional${f.professionals>1?"es":""}`}`,`${f.services===1/0?"Servicios ilimitados":`Hasta ${f.services} servicio${f.services>1?"s":""}`}`,`${f.products===1/0?"Productos ilimitados":`Hasta ${f.products} producto${f.products>1?"s":""}`}`,`${f.serviceSchedules===1/0?"Horarios ilimitados":`Hasta ${f.serviceSchedules} horario${f.serviceSchedules>1?"s":""}`}`),p.automaticReminders&&x.push("Recordatorios automticos de citas"),p.exportData&&x.push("Exportacin de datos (Excel/PDF)"),p.integrations&&x.push("Integraciones con terceros"),p.featuredInDirectory&&x.push("Destacado en directorio de PYMEs"),p.customDomain&&x.push("Dominio personalizado (ej: tuempresa.cl)"),p.advancedAnalytics&&x.push("Analticas y reportes avanzados"),p.prioritySupport&&x.push("Soporte prioritario por email"),p.whiteLabel&&x.push("White Label (sin marca PyM-ERP)"),u.planId==="ENTERPRISE"&&x.push("Funcionalidades de IA");const b=[];p.automaticReminders||b.push("Recordatorios automticos"),p.exportData||b.push("Exportacin de datos"),p.integrations||b.push("Integraciones externas"),p.featuredInDirectory||b.push("Destacado en directorio"),p.customDomain||b.push("Dominio personalizado"),p.advancedAnalytics||b.push("Analticas avanzadas"),!p.prioritySupport&&u.planId!=="BASIC"&&b.push("Soporte prioritario");const _={BASIC:"from-gray-500 to-gray-600",STARTER:"from-blue-500 to-blue-600",PRO:"from-purple-500 to-purple-600",BUSINESS:"from-indigo-500 to-indigo-600",ENTERPRISE:"from-green-500 to-green-600"},j={BASIC:"Empezar Gratis",STARTER:"Solicitar Starter",PRO:"Solicitar Pro",BUSINESS:"Solicitar Business",ENTERPRISE:"Contactar Ventas"},v={BASIC:"/request-access",STARTER:"/contacto",PRO:"/contacto",BUSINESS:"/contacto",ENTERPRISE:"/contacto"},T=u.price.match(/^(\$[\d.,]+|Gratis|Personalizado)(\/mes)?$/),P=T?T[1]:u.price,A=u.price.includes("/mes")?"/mes":"",C=u.planId==="ENTERPRISE"?{profesionales:"A medida",servicios:"A medida",productos:"A medida",horarios:"A medida",recordatorios:"A medida",exportacion:"A medida",integraciones:"A medida",destacado:"A medida",dominio:"A medida",analiticas:"A medida",soporte:"A medida",whiteLabel:"A medida"}:{profesionales:u.planId==="PRO"||u.planId==="BUSINESS"||f.professionals===1/0?"":String(f.professionals),servicios:f.services===1/0?"":String(f.services),productos:f.products===1/0?"":String(f.products),horarios:f.serviceSchedules===1/0?"":String(f.serviceSchedules),recordatorios:p.automaticReminders,exportacion:p.exportData,integraciones:p.integrations,destacado:p.featuredInDirectory,dominio:p.customDomain,analiticas:p.advancedAnalytics,soporte:p.prioritySupport,whiteLabel:p.whiteLabel},M=u.planId==="ENTERPRISE"?["Consultora y solucin a medida para tu negocio"]:x;return{id:h,name:u.label,tagline:u.description,price:P,period:A,description:u.description,color:_[u.planId],buttonText:j[u.planId],buttonLink:v[u.planId],includes:M,limitations:b,features:C,planId:u.planId}}),d=[{label:"Profesionales",key:"profesionales"},{label:"Servicios",key:"servicios"},{label:"Productos",key:"productos"},{label:"Horarios",key:"horarios"},{label:"Recordatorios automticos",key:"recordatorios"},{label:"Exportacin de datos",key:"exportacion"},{label:"Integraciones",key:"integraciones"},{label:"Destacado en directorio",key:"destacado"},{label:"Dominio personalizado",key:"dominio"},{label:"Analticas avanzadas",key:"analiticas"},{label:"Soporte prioritario",key:"soporte"},{label:"White Label",key:"whiteLabel"}];return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Planes y Funcionalidades | PyM-ERP",description:"Cada categora tiene su sistema de gestin especializado. Elige el plan que determine qu funcionalidades estarn disponibles para tu PYME. Plan Basic gratis para dar a conocer tu negocio.",canonical:"/features"}),a.jsxs("div",{className:"min-h-screen bg-white",children:[e&&a.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center px-4 py-4 sm:py-6 bg-black/60 backdrop-blur-sm sm:items-center",role:"dialog","aria-modal":"true","aria-labelledby":"features-announcement-title",children:a.jsxs(ke.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.25},className:"relative w-full max-w-2xl rounded-3xl border border-indigo-100 bg-white shadow-2xl overflow-hidden max-h-[82vh] sm:max-h-[80vh] flex flex-col",children:[a.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-3xl bg-gradient-to-br from-indigo-200/20 via-white/80 to-purple-200/20"}),a.jsxs("div",{className:"relative p-4 sm:p-8 overflow-y-auto flex-1",children:[a.jsxs("div",{className:"space-y-3 sm:space-y-4 text-gray-900",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-indigo-50 px-2.5 py-1 text-[11px] sm:text-xs font-semibold uppercase tracking-wide text-indigo-800 shadow-sm",children:[a.jsx("span",{className:"h-2 w-2 rounded-full bg-amber-400 shadow-[0_0_0_6px_rgba(251,191,36,0.2)]"}),"Aviso Importante!"]}),a.jsxs("div",{children:[a.jsx("h2",{id:"features-announcement-title",className:"text-xl sm:text-3xl font-extrabold text-indigo-950 leading-tight",children:"Periodo Beta: Todas las Funcionalidades Liberadas"}),a.jsx("p",{className:"mt-2 text-sm sm:text-lg text-gray-800 leading-relaxed",children:"Estamos en periodo beta. Todas las funcionalidades de PyM-ERP estn disponibles para probar, sin importar el plan que veas aqu."})]}),a.jsxs("div",{className:"space-y-3 sm:space-y-4 text-[13px] sm:text-base text-gray-800",children:[a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-3 sm:p-4 rounded-r-lg text-blue-900",children:[a.jsx("p",{className:"font-semibold text-blue-900 mb-1.5",children:" Aviso Importante sobre el Plan Gratuito:"}),a.jsx("p",{className:"text-blue-900/90 leading-relaxed",children:"El plan Basic (gratuito) tiene una carga limitada de imgenes en productos y servicios. Los planes superiores incluyen ms capacidad de almacenamiento."})]}),a.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-3 sm:p-4 rounded-r-lg text-green-900",children:[a.jsx("p",{className:"font-semibold text-green-900 mb-1.5",children:" Periodo Beta:"}),a.jsxs("p",{className:"text-green-900 leading-relaxed",children:["Durante este periodo beta, ",a.jsx("span",{className:"font-semibold",children:"todas las funcionalidades"})," de la aplicacin estarn liberadas para tu prueba, sin importar el plan que elijas al crear tu cuenta."]})]}),a.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-3 sm:p-4 rounded-r-lg text-amber-900",children:[a.jsx("p",{className:"font-semibold text-amber-900 mb-1.5",children:" Activacin de Planes de Pago:"}),a.jsxs("p",{className:"text-amber-900/90 leading-relaxed",children:["Te avisaremos con ",a.jsx("span",{className:"font-semibold",children:"45 das de anticipacin"})," cuando se active la plataforma de pago y las caractersticas definitivas de cada plan."]})]}),a.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-3 sm:p-4 rounded-r-lg text-purple-900",children:[a.jsx("p",{className:"font-semibold text-purple-900 mb-1.5",children:" Descuento Exclusivo para Beta Users:"}),a.jsxs("p",{className:"text-purple-900/90 leading-relaxed",children:["Las cuentas creadas hasta ",a.jsx("span",{className:"font-semibold",children:"45 das antes"})," de la activacin de la plataforma de pago recibirn un ",a.jsx("span",{className:"font-semibold text-purple-900",children:"descuento exclusivo del 50%"}),"en cualquier plan durante los primeros 2 aos."]})]}),a.jsx("p",{className:"text-blue-900 italic mt-3 sm:mt-4",children:"Realizaremos encuestas y ajustes continuos en este periodo. Tu feedback define el producto final y te garantiza beneficios exclusivos."})]}),a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("div",{className:"text-xs sm:text-sm text-blue-900",children:"Participa ahora y asegura ventajas preferentes cuando publiquemos los precios definitivos."}),a.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:gap-3",children:[a.jsx("button",{type:"button",onClick:()=>n(!1),className:"rounded-full border border-white/70 bg-white/70 px-3.5 py-2 text-xs sm:text-sm font-semibold text-gray-700 shadow-sm transition hover:border-gray-200 hover:bg-white",children:"Ver planes"}),a.jsx("button",{type:"button",onClick:()=>t("/request-access?utm=features-announcement"),className:"rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 px-4 py-2 text-xs sm:text-sm font-semibold text-white shadow-lg transition hover:shadow-xl",children:"Quiero participar "})]})]})]}),a.jsx("button",{type:"button",onClick:()=>n(!1),className:"absolute right-4 top-4 rounded-full bg-white/80 p-2 text-indigo-900 shadow hover:bg-white","aria-label":"Cerrar anuncio",children:""})]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:[a.jsx(ke.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-6 md:mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-10 md:mb-12",children:[a.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-3 md:mb-4",children:"Planes y Funcionalidades"}),a.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto mb-6",children:"Cada categora de negocio tiene su propio sistema de gestin especializado. Elige el plan que determine qu funcionalidades estarn disponibles o bloqueadas para tu PYME."}),a.jsxs("div",{className:"max-w-4xl mx-auto mt-8 mb-12 p-6 bg-white rounded-2xl border border-gray-200 shadow-sm",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-4",children:"Sistemas de Gestin por Categora"}),a.jsx("p",{className:"text-base md:text-lg text-gray-900 mb-4",children:"PyM-ERP adapta su sistema de gestin segn tu tipo de negocio. Cada categora tiene funcionalidades especficas:"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6 text-left",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-indigo-200 shadow-sm",children:[a.jsx("div",{className:"font-semibold text-indigo-950 mb-2",children:" Clnicas"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Gestin de pacientes, citas mdicas, fichas clnicas, profesionales y recursos."})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-indigo-200 shadow-sm",children:[a.jsx("div",{className:"font-semibold text-indigo-950 mb-2",children:" Barberas"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Agenda de citas, catlogo de servicios, gestin de profesionales y horarios."})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-indigo-200 shadow-sm",children:[a.jsx("div",{className:"font-semibold text-indigo-950 mb-2",children:" Restaurantes"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Men QR, pedidos, delivery/takeaway, gestin de productos y categoras."})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-indigo-200 shadow-sm",children:[a.jsx("div",{className:"font-semibold text-indigo-950 mb-2",children:" Minimarket"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Catlogo de productos, carrito, pedidos, bsqueda y gestin de stock."})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-indigo-200 shadow-sm",children:[a.jsx("div",{className:"font-semibold text-indigo-950 mb-2",children:" Talleres"}),a.jsx("p",{className:"text-sm text-gray-700",children:"rdenes de trabajo, cotizaciones, seguimiento y gestin de servicios."})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-indigo-200 shadow-sm",children:[a.jsx("div",{className:"font-semibold text-indigo-950 mb-2",children:"Y ms..."}),a.jsx("p",{className:"text-sm text-gray-700",children:"Ms de 40 categoras especializadas con sistemas adaptados a cada industria."})]})]}),a.jsx("p",{className:"text-sm text-gray-900 mt-6 italic",children:"El plan que elijas determinar qu funcionalidades de tu sistema estarn disponibles o bloqueadas."})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6 md:gap-8 mb-12 md:mb-16",children:l.map((u,h)=>a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:h*.1},className:`bg-white rounded-xl shadow-lg border-2 ${u.planId==="BASIC"?"border-gray-300":u.planId==="STARTER"?"border-blue-300":u.planId==="PRO"?"border-purple-300":u.planId==="BUSINESS"?"border-indigo-300":"border-green-300"} hover:shadow-xl transition-all flex flex-col relative`,children:[(u.planId==="PRO"||u.planId==="BUSINESS")&&a.jsx("div",{className:"absolute inset-0 z-20 rounded-xl bg-white/70 backdrop-blur-md shadow-[0_10px_30px_rgba(15,23,42,0.15)] flex items-center justify-center text-center px-6",children:a.jsx("div",{className:"rounded-2xl border border-white/70 bg-white/60 px-6 py-4 text-sm sm:text-base font-semibold text-indigo-900 tracking-wide shadow-md",children:"PRONTO MS INFROMACIN"})}),a.jsxs("div",{className:`bg-gradient-to-r ${u.color} rounded-t-xl p-5 text-white text-center relative overflow-hidden`,children:[u.planId==="STARTER"&&a.jsx("div",{className:"absolute top-2 right-2 bg-white/20 text-white text-[10px] px-2 py-1 rounded-full font-semibold",children:"Recomendado"}),a.jsx("button",{type:"button",onClick:()=>r(u.planId),className:"absolute top-2 left-2 bg-white/20 hover:bg-white/30 text-white rounded-full p-1.5 transition-colors","aria-label":"Informacin sobre caractersticas del plan",title:"Ms informacin",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("div",{className:"text-xs font-semibold mb-1.5 opacity-90",children:u.tagline}),a.jsx("div",{className:"text-2xl font-bold",children:u.name})]}),a.jsxs("div",{className:"p-5 text-center border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-baseline justify-center gap-1.5",children:[a.jsx("span",{className:"font-bold text-red-600 text-2xl md:text-3xl",children:u.price}),u.period&&a.jsx("span",{className:"text-sm font-semibold text-gray-500",children:u.period})]}),a.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-2.5 leading-relaxed",children:u.planId==="BASIC"?"Plan gratuito limitado. Ideal para dar a conocer tu PYME con funcionalidades bsicas.":u.description})]}),a.jsxs("div",{className:"p-4 flex-1",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-900 mb-3",children:"Incluye:"}),a.jsx("ul",{className:"space-y-2 mb-4 max-h-64 overflow-y-auto",children:u.includes.map((f,p)=>a.jsxs("li",{className:"flex items-start text-xs md:text-sm text-gray-700",children:[a.jsx("span",{className:"text-green-500 mr-2 flex-shrink-0 mt-0.5",children:""}),a.jsx("span",{className:"leading-relaxed",children:f})]},p))})]}),u.limitations.length>0&&u.planId!=="ENTERPRISE"&&a.jsxs("div",{className:"p-4 pt-0 border-t border-gray-200 bg-gray-50",children:[a.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-2",children:"No disponible en este plan:"}),a.jsxs("ul",{className:"space-y-1",children:[u.limitations.slice(0,2).map((f,p)=>a.jsxs("li",{className:"flex items-start text-xs text-gray-500",children:[a.jsx("span",{className:"text-gray-400 mr-1.5 flex-shrink-0 mt-0.5",children:""}),a.jsx("span",{className:"leading-relaxed",children:f})]},p)),u.limitations.length>2&&a.jsxs("li",{className:"text-xs text-gray-400 italic mt-1",children:["+",u.limitations.length-2," ms..."]})]})]}),a.jsxs("div",{className:"p-4 pt-0 border-t border-gray-200",children:[a.jsx(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{u.planId==="BASIC"?t(u.buttonLink):t(`${u.buttonLink}?plan=${u.planId}`)},className:`w-full py-3 rounded-lg font-semibold text-sm transition-all ${u.planId==="BASIC"?`bg-gradient-to-r ${u.color} text-white shadow-md hover:shadow-lg`:u.planId==="ENTERPRISE"?"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-md hover:shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300"}`,children:u.buttonText}),u.planId!=="BASIC"&&a.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Contacta para ms informacin"})]})]},u.id))}),a.jsx(Ci,{children:s&&a.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center px-4 py-4 sm:py-6 bg-black/60 backdrop-blur-sm sm:items-center",onClick:()=>r(null),role:"dialog","aria-modal":"true","aria-labelledby":"plan-info-title",children:a.jsxs(ke.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.25},className:"relative w-full max-w-2xl rounded-2xl border border-white/40 bg-white/90 backdrop-blur-xl shadow-2xl overflow-hidden max-h-[85vh] sm:max-h-[80vh] flex flex-col",onClick:u=>u.stopPropagation(),children:[a.jsx("button",{type:"button",onClick:()=>r(null),className:"absolute top-4 right-4 rounded-full bg-white/80 hover:bg-white text-gray-700 p-2 shadow-md transition-colors","aria-label":"Cerrar",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("div",{className:"p-6 sm:p-8 overflow-y-auto flex-1 text-gray-900",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{id:"plan-info-title",className:"text-2xl sm:text-3xl font-bold text-gray-900 pr-10",children:"Caractersticas del Plan"}),a.jsxs("div",{className:"space-y-4 text-sm sm:text-base text-gray-700 leading-relaxed",children:[a.jsx("p",{children:"Las caractersticas de este plan sern actualizadas y definidas con mayor precisin prximamente."}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:[a.jsx("p",{className:"font-semibold text-blue-900 mb-2",children:" Limitaciones por Rubro:"}),a.jsx("p",{className:"text-blue-800",children:"Cada categora de negocio tendr limitaciones especficas adaptadas a su tipo de operacin. Las restricciones variarn segn el rubro seleccionado."})]}),a.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-4 rounded-r-lg",children:[a.jsx("p",{className:"font-semibold text-amber-900 mb-2",children:" Cambio de Categora:"}),a.jsx("p",{className:"text-amber-800",children:"Las cuentas pueden cambiar de categora cuando sea necesario. Las limitaciones se ajustarn automticamente segn la nueva categora seleccionada."})]}),a.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-500 p-4 rounded-r-lg",children:[a.jsx("p",{className:"font-semibold text-purple-900 mb-2",children:" Funcionalidades Disponibles:"}),a.jsx("p",{className:"text-purple-800",children:"Las limitaciones definidas determinarn la accesibilidad a las distintas funcionalidades de tu sistema de gestin. Algunas funciones estarn disponibles y otras estarn bloqueadas segn el plan seleccionado."})]}),a.jsx("p",{className:"text-gray-600 italic mt-4",children:"Las descripciones actuales son ejemplos aproximados. Los detalles finales se comunicarn antes de la activacin de la plataforma de pago."})]})]})})]})})}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-12 md:mb-16",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-6 text-center",children:"Tabla Comparativa"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"inline-block min-w-full align-middle",children:a.jsx("div",{className:"overflow-hidden shadow-lg border-2 border-gray-200 rounded-xl",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-gray-900 uppercase tracking-wider",children:"Funcionalidad"}),l.map(u=>a.jsx("th",{className:`px-4 py-3 text-center text-xs font-bold uppercase tracking-wider ${u.planId==="BASIC"?"text-gray-700":u.planId==="STARTER"?"text-blue-700":u.planId==="PRO"?"text-purple-700":u.planId==="BUSINESS"?"text-indigo-700":"text-green-700"}`,children:u.name},u.id))]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map((u,h)=>a.jsxs("tr",{className:h%2===0?"bg-white":"bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-gray-900",children:u.label}),l.map(f=>{const p=f.features[u.key];return a.jsx("td",{className:"px-4 py-3 text-center text-sm text-gray-700",children:typeof p=="boolean"?p?a.jsx("span",{className:"text-green-600 font-bold",children:""}):a.jsx("span",{className:"text-gray-300",children:""}):p===""?a.jsx("span",{className:"font-bold text-purple-600",children:""}):a.jsx("span",{className:"font-medium",children:p})},f.id)})]},u.key))})]})})})})]}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-6 md:p-8 lg:p-12 text-center text-white",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-3 md:mb-4",children:"Listo para comenzar?"}),a.jsx("p",{className:"text-base md:text-lg mb-5 md:mb-6 opacity-90",children:"Comienza con el plan Basic gratuito para dar a conocer tu PYME. Actualiza a un plan superior cuando necesites ms funcionalidades. Sin compromisos, sin tarjeta de crdito."}),a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/request-access"),className:"px-6 md:px-8 py-3 md:py-4 bg-white text-indigo-600 rounded-lg font-semibold shadow-xl hover:shadow-2xl transition-shadow",children:"Crear Cuenta Gratis "})]})]})]})]})}function die(){const t=qe();return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Seguridad | PyM-ERP",description:"Conoce cmo PyM-ERP protege tus datos y los de tus clientes con tecnologa de nivel empresarial.",canonical:"/security"}),a.jsx("div",{className:"min-h-screen bg-white",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:[a.jsx(ke.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-6 md:mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4 md:mb-6 text-center",children:" Seguridad y Privacidad"}),a.jsxs("div",{className:"prose prose-lg max-w-none text-center",children:[a.jsx("p",{className:"text-lg md:text-xl text-gray-600 mb-6 md:mb-8 text-center",children:"La seguridad de tus datos y los de tus clientes es nuestra mxima prioridad. Utilizamos tecnologa de nivel empresarial para proteger tu informacin. "}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 my-8 md:my-10",children:[a.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 md:p-6 shadow-lg border-2 border-gray-300 flex flex-col items-center text-center",children:[a.jsx("div",{className:"text-4xl md:text-5xl mb-3 md:mb-4",children:""}),a.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3",children:"Cifrado End-to-End"}),a.jsx("p",{className:"text-sm md:text-base text-gray-800 font-medium",children:"Todos los datos se transmiten cifrados usando protocolos SSL/TLS"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 md:p-6 shadow-lg border-2 border-gray-300 flex flex-col items-center text-center",children:[a.jsx("div",{className:"text-4xl md:text-5xl mb-3 md:mb-4",children:""}),a.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3",children:"Autenticacin Segura"}),a.jsx("p",{className:"text-sm md:text-base text-gray-800 font-medium",children:"Sistema de autenticacin Firebase con verificacin de email"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 md:p-6 shadow-lg border-2 border-gray-300 flex flex-col items-center text-center",children:[a.jsx("div",{className:"text-4xl md:text-5xl mb-3 md:mb-4",children:""}),a.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3",children:"Backups Automticos"}),a.jsx("p",{className:"text-sm md:text-base text-gray-800 font-medium",children:"Respaldos diarios automticos de toda tu informacin"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 md:p-6 shadow-lg border-2 border-gray-300 flex flex-col items-center text-center",children:[a.jsx("div",{className:"text-4xl md:text-5xl mb-3 md:mb-4",children:""}),a.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 mb-2 md:mb-3",children:"Proteccin DDoS"}),a.jsx("p",{className:"text-sm md:text-base text-gray-800 font-medium",children:"Infraestructura Google Cloud con proteccin avanzada"})]})]}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mt-8 md:mt-10 mb-3 md:mb-4",children:" Tecnologa Firebase"}),a.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-4 md:mb-6 text-center",children:"PyM-ERP est construido sobre Firebase, la plataforma de Google Cloud utilizada por millones de aplicaciones en todo el mundo. Esto nos permite ofrecerte:"}),a.jsxs("ul",{className:"space-y-2 text-gray-700 mb-6 md:mb-8 list-none p-0",children:[a.jsx("li",{children:" Infraestructura de clase mundial con 99.9% de disponibilidad"}),a.jsx("li",{children:" Servidores distribuidos globalmente para mxima velocidad"}),a.jsx("li",{children:" Cumplimiento con estndares internacionales de seguridad"}),a.jsx("li",{children:" Escalabilidad automtica segn tu crecimiento"})]}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mt-8 md:mt-10 mb-3 md:mb-4",children:" Privacidad de Datos"}),a.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-4 md:mb-6 text-center",children:"Cumplimos con las regulaciones de privacidad ms estrictas:"}),a.jsxs("ul",{className:"space-y-2 text-gray-700 mb-6 md:mb-8 list-none p-0",children:[a.jsx("li",{children:" Tus datos son tuyos y solo tuyos"}),a.jsx("li",{children:" Nunca compartimos informacin con terceros"}),a.jsx("li",{children:" Puedes exportar tu informacin en cualquier momento"}),a.jsx("li",{children:" Derecho al olvido: elimina tu cuenta cuando quieras"}),a.jsx("li",{children:" Transparencia total sobre uso de datos"})]}),a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mt-8 md:mt-10 mb-3 md:mb-4",children:" Control de Acceso"}),a.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-4 md:mb-6 text-center",children:"En planes avanzados, tendrs control total sobre quin puede acceder a qu:"}),a.jsxs("ul",{className:"space-y-2 text-gray-700 mb-6 md:mb-8 list-none p-0",children:[a.jsx("li",{children:" Sistema de roles y permisos granular"}),a.jsx("li",{children:" Autenticacin de dos factores (2FA)"}),a.jsx("li",{children:" Registro de actividad y auditora"}),a.jsx("li",{children:" Sesiones seguras con expiracin automtica"})]}),a.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 md:p-8 mt-8 md:mt-10 text-center",children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-3 md:mb-4",children:" Preguntas sobre Seguridad?"}),a.jsx("p",{className:"text-base md:text-lg text-gray-700 mb-5 md:mb-6 text-center",children:"Si tienes dudas especficas sobre nuestra seguridad o necesitas informacin para tu departamento de TI, contctanos."}),a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/contacto"),className:"px-6 md:px-8 py-3 bg-gradient-to-r from-green-600 to-teal-600 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transition-shadow",children:"Contactar Soporte"})]})]})]})]})})]})}function uie(){const t=qe(),e=[{status:"completed",title:"Fase 1: Arquitectura y Modelamiento",period:"Agosto - Septiembre 2025",features:["Arquitectura de mdulos base (agenda, catlogo, clientes)","Modelamiento de datos multirubro y permisos","Diseo de flujos de onboarding y setup","Definicin de mtricas operativas y KPIs","Lineamientos de UI/UX y accesibilidad"]},{status:"completed",title:"Fase 2: MVP Operativo",period:"Octubre - Diciembre 2025",features:["Agenda con disponibilidad y bloqueo de horarios","Gestin de servicios y profesionales","Landing pblica por negocio y contacto directo","WhatsApp automtico para confirmaciones","Panel bsico de mtricas y reportes"]},{status:"current",title:"Fase 3: Estabilizacin y Lanzamiento Pblico",period:"Enero - Marzo 2026",features:["Optimizacin de rendimiento y UX mvil","Refuerzo de seguridad, permisos y auditora","Plantillas visuales por categora","Automatizaciones de notificaciones","Mejoras de soporte y onboarding"]},{status:"planned",title:"Fase 4: Comercializacin y Facturacin",period:"Abril - Agosto 2026",features:["Planes y suscripciones","Pagos integrados y control de ingresos","Facturacin electrnica y documentos","Inventario y stock avanzado","Integraciones con servicios externos"]},{status:"future",title:"Fase 5: Inteligencia y Automatizacin",period:"Septiembre - Diciembre 2026",features:["IA para prediccin de demanda","Recomendaciones de horarios y precios","Automatizacin de campaas y recordatorios","Reportes avanzados por segmento","Asistente inteligente para gestin diaria"]}],n=r=>{switch(r){case"completed":return"bg-green-500";case"current":return"bg-blue-500";case"planned":return"bg-purple-500";case"future":return"bg-gray-400";default:return"bg-gray-400"}},s=r=>{switch(r){case"completed":return"Completado ";case"current":return"En Desarrollo ";case"planned":return"Planificado ";case"future":return"Futuro ";default:return""}};return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Roadmap | PyM-ERP",description:"Conoce el plan de desarrollo y las prximas funcionalidades que llegarn a PyM-ERP.",canonical:"/roadmap"}),a.jsx("div",{className:"min-h-screen bg-white",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[a.jsx(ke.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Roadmap de Desarrollo"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Conoce lo que estamos construyendo y hacia dnde vamos"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"hidden md:block absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300"}),e.map((r,i)=>a.jsxs(ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:i*.1},className:"relative mb-12 md:ml-16",children:[a.jsx("div",{className:`hidden md:block absolute -left-[4.5rem] top-6 w-8 h-8 rounded-full ${n(r.status)} border-4 border-white shadow-lg`}),a.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 md:p-8 shadow-lg border-2 border-gray-300",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[a.jsx("span",{className:`px-4 py-1 ${n(r.status)} text-white text-sm font-semibold rounded-full`,children:s(r.status)}),a.jsx("span",{className:"text-gray-500 font-medium",children:r.period})]}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:r.title}),a.jsx("ul",{className:"space-y-2",children:r.features.map((l,d)=>a.jsxs("li",{className:"flex items-start text-gray-700",children:[a.jsx("span",{className:"text-green-600 mr-2 mt-1",children:""}),a.jsx("span",{children:l})]},d))})]})]},i))]}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 md:p-12 text-center text-white mt-16",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"S Parte del Futuro"}),a.jsx("p",{className:"text-lg mb-6 opacity-90",children:"nete ahora con el plan gratuito y s de los primeros en acceder a nuevas funcionalidades"}),a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/request-access"),className:"px-8 py-4 bg-white text-indigo-600 rounded-lg font-semibold shadow-xl hover:shadow-2xl transition-shadow",children:"Crear Cuenta Gratis "})]})]})})]})}let m8=-1;const hm=t=>{addEventListener("pageshow",(e=>{e.persisted&&(m8=e.timeStamp,t(e))}),!0)},vo=(t,e,n,s)=>{let r,i;return l=>{e.value>=0&&(l||s)&&(i=e.value-(r??0),(i||r===void 0)&&(r=e.value,e.delta=i,e.rating=((d,u)=>d>u[1]?"poor":d>u[0]?"needs-improvement":"good")(e.value,n),t(e)))}},Wj=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},Yj=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},og=()=>Yj()?.activationStart??0,wo=(t,e=-1)=>{const n=Yj();let s="navigate";return m8>=0?s="back-forward-cache":n&&(document.prerendering||og()>0?s="prerender":document.wasDiscarded?s="restore":n.type&&(s=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:s}},c1=new WeakMap;function Gj(t,e){return c1.get(t)||c1.set(t,new e),c1.get(t)}class hie{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const n=this.o[0],s=this.o.at(-1);this.i&&n&&s&&e.startTime-s.startTime<1e3&&e.startTime-n.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const lg=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const s=new PerformanceObserver((r=>{Promise.resolve().then((()=>{e(r.getEntries())}))}));return s.observe({type:t,buffered:!0,...n}),s}}catch{}},Kj=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let mh=-1;const f8=new Set,oP=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,s2=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(const e of f8)e();isFinite(mh)||(mh=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",s2,!0))}},Qb=()=>{if(mh<0){const t=og();mh=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((n=>n.name==="hidden"&&n.startTime>t))[0]?.startTime)??oP(),addEventListener("visibilitychange",s2,!0),addEventListener("prerenderingchange",s2,!0),hm((()=>{setTimeout((()=>{mh=oP()}))}))}return{get firstHiddenTime(){return mh},onHidden(t){f8.add(t)}}},Xb=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},lP=[1800,3e3],p8=(t,e={})=>{Xb((()=>{const n=Qb();let s,r=wo("FCP");const i=lg("paint",(l=>{for(const d of l)d.name==="first-contentful-paint"&&(i.disconnect(),d.startTime<n.firstHiddenTime&&(r.value=Math.max(d.startTime-og(),0),r.entries.push(d),s(!0)))}));i&&(s=vo(t,r,lP,e.reportAllChanges),hm((l=>{r=wo("FCP"),s=vo(t,r,lP,e.reportAllChanges),Wj((()=>{r.value=performance.now()-l.timeStamp,s(!0)}))})))}))},cP=[.1,.25],mie=(t,e={})=>{const n=Qb();p8(Kj((()=>{let s,r=wo("CLS",0);const i=Gj(e,hie),l=u=>{for(const h of u)i.h(h);i.i>r.value&&(r.value=i.i,r.entries=i.o,s())},d=lg("layout-shift",l);d&&(s=vo(t,r,cP,e.reportAllChanges),n.onHidden((()=>{l(d.takeRecords()),s(!0)})),hm((()=>{i.i=0,r=wo("CLS",0),s=vo(t,r,cP,e.reportAllChanges),Wj((()=>s()))})),setTimeout(s))})))};let g8=0,d1=1/0,G0=0;const fie=t=>{for(const e of t)e.interactionId&&(d1=Math.min(d1,e.interactionId),G0=Math.max(G0,e.interactionId),g8=G0?(G0-d1)/7+1:0)};let r2;const dP=()=>r2?g8:performance.interactionCount??0,pie=()=>{"interactionCount"in performance||r2||(r2=lg("event",fie,{type:"event",buffered:!0,durationThreshold:0}))};let uP=0;class gie{u=[];l=new Map;m;p;v(){uP=dP(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((dP()-uP)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&e.entryType!=="first-input")return;const n=this.u.at(-1);let s=this.l.get(e.interactionId);if(s||this.u.length<10||e.duration>n.P){if(s?e.duration>s.P?(s.entries=[e],s.P=e.duration):e.duration===s.P&&e.startTime===s.entries[0].startTime&&s.entries.push(e):(s={id:e.interactionId,entries:[e],P:e.duration},this.l.set(s.id,s),this.u.push(s)),this.u.sort(((r,i)=>i.P-r.P)),this.u.length>10){const r=this.u.splice(10);for(const i of r)this.l.delete(i.id)}this.p?.(s)}}}const x8=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=Kj(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},hP=[200,500],xie=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=Qb();Xb((()=>{pie();let s,r=wo("INP");const i=Gj(e,gie),l=u=>{x8((()=>{for(const f of u)i.h(f);const h=i.L();h&&h.P!==r.value&&(r.value=h.P,r.entries=h.entries,s())}))},d=lg("event",l,{durationThreshold:e.durationThreshold??40});s=vo(t,r,hP,e.reportAllChanges),d&&(d.observe({type:"first-input",buffered:!0}),n.onHidden((()=>{l(d.takeRecords()),s(!0)})),hm((()=>{i.v(),r=wo("INP"),s=vo(t,r,hP,e.reportAllChanges)})))}))};class yie{m;h(e){this.m?.(e)}}const mP=[2500,4e3],bie=(t,e={})=>{Xb((()=>{const n=Qb();let s,r=wo("LCP");const i=Gj(e,yie),l=u=>{e.reportAllChanges||(u=u.slice(-1));for(const h of u)i.h(h),h.startTime<n.firstHiddenTime&&(r.value=Math.max(h.startTime-og(),0),r.entries=[h],s())},d=lg("largest-contentful-paint",l);if(d){s=vo(t,r,mP,e.reportAllChanges);const u=Kj((()=>{l(d.takeRecords()),d.disconnect(),s(!0)})),h=f=>{f.isTrusted&&(x8(u),removeEventListener(f.type,h,{capture:!0}))};for(const f of["keydown","click","visibilitychange"])addEventListener(f,h,{capture:!0});hm((f=>{r=wo("LCP"),s=vo(t,r,mP,e.reportAllChanges),Wj((()=>{r.value=performance.now()-f.timeStamp,s(!0)}))}))}}))},fP=[800,1800],a2=t=>{document.prerendering?Xb((()=>a2(t))):document.readyState!=="complete"?addEventListener("load",(()=>a2(t)),!0):setTimeout(t)},vie=(t,e={})=>{let n=wo("TTFB"),s=vo(t,n,fP,e.reportAllChanges);a2((()=>{const r=Yj();r&&(n.value=Math.max(r.responseStart-og(),0),n.entries=[r],s(!0),hm((()=>{n=wo("TTFB",0),s=vo(t,n,fP,e.reportAllChanges),s(!0)})))}))},wie={LCP:{good:2500,needsImprovement:4e3},FID:{good:100,needsImprovement:300},CLS:{good:.1,needsImprovement:.25},FCP:{good:1800,needsImprovement:3e3},TTFB:{good:600,needsImprovement:1500},INP:{good:200,needsImprovement:500}};function _ie(t,e){const n=wie[t];return!n||e<=n.good?"good":e<=n.needsImprovement?"needs-improvement":"poor"}function ff(t){const{name:e,value:n,rating:s,delta:r,id:i}=t,l=s||_ie(e,n);Re.debug(`Web Vital [${e}]:`,{value:Math.round(n),rating:l,delta:Math.round(r),id:i}),bae(e,n,"Web Vitals"),typeof window<"u"&&window.gtag&&window.gtag("event",e,{event_category:"Web Vitals",value:Math.round(n),event_label:i,non_interaction:!0,metric_rating:l}),l==="poor"&&Fre(`Poor Web Vital: ${e}`,{level:"warning",tags:{web_vital:e,rating:l},contexts:{"Web Vitals":{name:e,value:Math.round(n),rating:l,delta:Math.round(r),id:i}}});try{const d=JSON.parse(localStorage.getItem("web-vitals")||"[]");d.push({name:e,value:Math.round(n),rating:l,timestamp:Date.now(),url:window.location.pathname}),d.length>50&&d.shift(),localStorage.setItem("web-vitals",JSON.stringify(d))}catch(d){Re.error("Error guardando Web Vitals:",d)}}function Eie(){try{bie(ff),mie(ff),p8(ff),vie(ff);try{xie(ff)}catch{Re.debug("INP no disponible")}Re.success("Web Vitals tracking inicializado")}catch(t){Re.error("Error inicializando Web Vitals:",t)}}function i2(){try{return JSON.parse(localStorage.getItem("web-vitals")||"[]")}catch(t){return Re.error("Error leyendo Web Vitals:",t),[]}}function pP(){try{localStorage.removeItem("web-vitals"),Re.debug("Web Vitals cleared")}catch(t){Re.error("Error limpiando Web Vitals:",t)}}function gP(t){const e=t||i2(),n={},s={};e.forEach(({name:i,value:l,rating:d})=>{n[i]||(n[i]=[],s[i]={good:0,needsImprovement:0,poor:0}),n[i].push(l),d==="good"?s[i].good++:d==="needs-improvement"?s[i].needsImprovement++:s[i].poor++});const r={};return Object.keys(n).forEach(i=>{const l=n[i],d=l.reduce((u,h)=>u+h,0)/l.length;r[i]={average:Math.round(d),...s[i]}}),r}function Nie(){const[t,e]=y.useState([]),[n,s]=y.useState(null),[r,i]=y.useState(!0),l=()=>{try{const h=i2();if(e(h),h.length>0){const f=gP(h);s(f)}else s(null)}catch(h){console.error("Error loading Web Vitals:",h)}finally{i(!1)}};return y.useEffect(()=>{l();const h=f=>{f.key==="web_vitals"&&l()};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)},[]),{vitals:t,averages:n,loading:r,refresh:()=>{l()},clearMetrics:()=>{pP(),e([]),s(null)},getStoredWebVitals:i2,calculateAverageVitals:gP,clearStoredWebVitals:pP}}function jie(){const{vitals:t,averages:e,loading:n,clearMetrics:s}=Nie(),[r,i]=y.useState([]),[l,d]=y.useState({}),[u,h]=y.useState(!0);y.useEffect(()=>{n||(i(t),e&&d(e),h(!1))},[n,t,e]);const f=()=>{confirm("Desea limpiar todas las mtricas almacenadas?")&&s()},p=_=>{switch(_){case"good":return"text-green-600 bg-green-50";case"needs-improvement":return"text-yellow-600 bg-yellow-50";case"poor":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},x=(_,j)=>_==="CLS"?j.toFixed(3):`${Math.round(j)}ms`,b=_=>({LCP:"Largest Contentful Paint - Tiempo hasta que el contenido principal es visible",FID:"First Input Delay - Tiempo hasta que la pgina responde a la primera interaccin",CLS:"Cumulative Layout Shift - Estabilidad visual de la pgina",FCP:"First Contentful Paint - Tiempo hasta que aparece el primer contenido",TTFB:"Time to First Byte - Tiempo hasta recibir el primer byte del servidor",INP:"Interaction to Next Paint - Tiempo de respuesta a interacciones"})[_]||_;return u?a.jsx("div",{className:"flex items-center justify-center p-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Mtricas de Rendimiento"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Core Web Vitals y estadsticas de la aplicacin"})]}),a.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition",children:"Limpiar mtricas"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Promedios de Core Web Vitals"}),Object.keys(l).length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No hay mtricas disponibles. Navega por la aplicacin para recopilar datos."}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(l).map(([_,j])=>{const v=j.good+j.needsImprovement+j.poor,T=v>0?j.good/v*100:0,P=v>0?j.needsImprovement/v*100:0,A=v>0?j.poor/v*100:0;return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:_}),a.jsx("span",{className:"text-2xl font-bold text-gray-900",children:x(_,j.average)})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-3",children:b(_)}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-green-600",children:" Good"}),a.jsxs("span",{className:"font-medium",children:[T.toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-yellow-600",children:" Needs Improvement"}),a.jsxs("span",{className:"font-medium",children:[P.toFixed(0),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-red-600",children:" Poor"}),a.jsxs("span",{className:"font-medium",children:[A.toFixed(0),"%"]})]})]}),a.jsxs("div",{className:"mt-3 h-2 bg-gray-100 rounded-full overflow-hidden flex",children:[a.jsx("div",{className:"bg-green-500",style:{width:`${T}%`}}),a.jsx("div",{className:"bg-yellow-500",style:{width:`${P}%`}}),a.jsx("div",{className:"bg-red-500",style:{width:`${A}%`}})]})]},_)})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ltimas Mtricas Registradas"}),r.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No hay mtricas recientes"}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mtrica"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pgina"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((_,j)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:_.name}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:x(_.name,_.value)}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(_.rating)}`,children:_.rating})}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:_.url}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:new Date(_.timestamp).toLocaleString("es-CL")})]},j))})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Google Analytics 4"}),a.jsx("p",{className:"text-sm text-blue-700",children:"Tracking de eventos, conversiones y pageviews habilitado"})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Sentry"}),a.jsx("p",{className:"text-sm text-purple-700",children:"Monitoreo de errores y performance activo con source maps"})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Web Vitals"}),a.jsx("p",{className:"text-sm text-green-700",children:"Core Web Vitals siendo recolectados en tiempo real"})]})]})]})}const Cie=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sie=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),xP=t=>{const e=Sie(t);return e.charAt(0).toUpperCase()+e.slice(1)},y8=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),Tie=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var kie={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Aie=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:l,...d},u)=>y.createElement("svg",{ref:u,...kie,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:y8("lucide",r),...!i&&!Tie(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,f])=>y.createElement(h,f)),...Array.isArray(i)?i:[i]]));const ts=(t,e)=>{const n=y.forwardRef(({className:s,...r},i)=>y.createElement(Aie,{ref:i,iconNode:e,className:y8(`lucide-${Cie(xP(t))}`,`lucide-${t}`,s),...r}));return n.displayName=xP(t),n};const Rie=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cg=ts("arrow-left",Rie);const Die=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Pie=ts("bell",Die);const Mie=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],Lie=ts("calendar-clock",Mie);const Iie=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],b8=ts("calendar",Iie);const Oie=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Qj=ts("check",Oie);const Vie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uie=ts("circle-alert",Vie);const Bie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],Fie=ts("circle-arrow-up",Bie);const $ie=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tl=ts("circle-check-big",$ie);const zie=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],o2=ts("clock",zie);const Hie=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qie=ts("copy",Hie);const Wie=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],l2=ts("crown",Wie);const Yie=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Gie=ts("download",Yie);const Kie=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qie=ts("loader-circle",Kie);const Xie=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Zie=ts("log-out",Xie);const Jie=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eoe=ts("mail",Jie);const toe=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],pf=ts("menu",toe);const noe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],soe=ts("phone",noe);const roe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],aoe=ts("plus",roe);const ioe=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ooe=ts("qr-code",ioe);const loe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],coe=ts("search",loe);const doe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],uoe=ts("square-pen",doe);const hoe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],moe=ts("trash-2",hoe);const foe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Rx=ts("user-plus",foe);const poe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pp=ts("x",poe),goe={construccion_mantencion:"construccion"},Ki={primaryColor:"#2563eb",secondaryColor:"#1e40af",accentColor:"#3b82f6",backgroundColor:"#ffffff",textColor:"#111827"},vd={primaryColor:"#059669",secondaryColor:"#047857",accentColor:"#10b981",backgroundColor:"#ffffff",textColor:"#111827"},Wi={primaryColor:"#ec4899",secondaryColor:"#db2777",accentColor:"#f472b6",backgroundColor:"#ffffff",textColor:"#111827"},xoe={primaryColor:"#dc2626",secondaryColor:"#b91c1c",accentColor:"#ef4444",backgroundColor:"#ffffff",textColor:"#111827"},Yi={primaryColor:"#f59e0b",secondaryColor:"#d97706",accentColor:"#fbbf24",backgroundColor:"#ffffff",textColor:"#111827"},u1={primaryColor:"#ea580c",secondaryColor:"#c2410c",accentColor:"#fb923c",backgroundColor:"#ffffff",textColor:"#111827"},yoe={primaryColor:"#7c3aed",secondaryColor:"#6d28d9",accentColor:"#a78bfa",backgroundColor:"#ffffff",textColor:"#111827"},gf={primaryColor:"#0891b2",secondaryColor:"#0e7490",accentColor:"#22d3ee",backgroundColor:"#ffffff",textColor:"#111827"},boe={primaryColor:"#65a30d",secondaryColor:"#4d7c0f",accentColor:"#84cc16",backgroundColor:"#ffffff",textColor:"#111827"},h1={primaryColor:"#92400e",secondaryColor:"#78350f",accentColor:"#d97706",backgroundColor:"#ffffff",textColor:"#111827"},yP={group:"HOGAR",groupLabelKey:"categories.groups.HOGAR",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","work-orders-lite","schedule","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},ip={clinicas_odontologicas:{id:"clinicas_odontologicas",labelKey:"categories.clinicas_odontologicas",group:"SALUD",groupLabelKey:"categories.groups.SALUD",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients","schedule","professionals","reports","notifications","clinic-resources"],iconPackKey:"medical",defaultTheme:vd},clinicas_kinesiologicas:{id:"clinicas_kinesiologicas",labelKey:"categories.clinicas_kinesiologicas",group:"SALUD",groupLabelKey:"categories.groups.SALUD",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients","schedule","professionals","reports","notifications","clinic-resources"],iconPackKey:"medical",defaultTheme:vd},centros_entrenamiento:{id:"centros_entrenamiento",labelKey:"categories.centros_entrenamiento",group:"SALUD",groupLabelKey:"categories.groups.SALUD",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients-lite","schedule","professionals","reports","notifications"],iconPackKey:"medical",defaultTheme:vd},actividad_entrenamiento_fisico:{id:"actividad_entrenamiento_fisico",labelKey:"categories.actividad_entrenamiento_fisico",group:"SALUD",groupLabelKey:"categories.groups.SALUD",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","patients-lite","schedule","professionals","reports","notifications"],iconPackKey:"medical",defaultTheme:vd},centros_terapia:{id:"centros_terapia",labelKey:"categories.centros_terapia",group:"SALUD",groupLabelKey:"categories.groups.SALUD",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients","schedule","professionals","reports","notifications","clinic-resources"],iconPackKey:"medical",defaultTheme:vd},psicologia:{id:"psicologia",labelKey:"categories.psicologia",group:"SALUD",groupLabelKey:"categories.groups.SALUD",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients","schedule","professionals","reports","notifications"],iconPackKey:"medical",defaultTheme:vd},nutricion:{id:"nutricion",labelKey:"categories.nutricion",group:"SALUD",groupLabelKey:"categories.groups.SALUD",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients","schedule","professionals","reports","notifications"],iconPackKey:"medical",defaultTheme:vd},masajes_spa:{id:"masajes_spa",labelKey:"categories.masajes_spa",group:"BELLEZA",groupLabelKey:"categories.groups.BELLEZA",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","patients-lite","schedule","professionals","reports","notifications"],iconPackKey:"beauty",defaultTheme:Wi},barberias:{id:"barberias",labelKey:"categories.barberias",group:"BELLEZA",groupLabelKey:"categories.groups.BELLEZA",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","patients-lite","schedule","professionals","reports","notifications"],iconPackKey:"beauty",defaultTheme:Wi},peluquerias:{id:"peluquerias",labelKey:"categories.peluquerias",group:"BELLEZA",groupLabelKey:"categories.groups.BELLEZA",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","patients-lite","schedule","professionals","reports","notifications"],iconPackKey:"beauty",defaultTheme:Wi},centros_estetica:{id:"centros_estetica",labelKey:"categories.centros_estetica",group:"BELLEZA",groupLabelKey:"categories.groups.BELLEZA",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","schedule","professionals","reports","notifications"],iconPackKey:"beauty",defaultTheme:Wi},unas:{id:"unas",labelKey:"categories.unas",group:"BELLEZA",groupLabelKey:"categories.groups.BELLEZA",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","patients-lite","schedule","professionals","reports","notifications"],iconPackKey:"beauty",defaultTheme:Wi},tatuajes_piercing:{id:"tatuajes_piercing",labelKey:"categories.tatuajes_piercing",group:"BELLEZA",groupLabelKey:"categories.groups.BELLEZA",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","schedule","professionals","reports","notifications"],iconPackKey:"beauty",defaultTheme:Wi},aseo_ornato:{id:"aseo_ornato",labelKey:"categories.aseo_ornato",group:"HOGAR",groupLabelKey:"categories.groups.HOGAR",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","schedule","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},chef_personal:{id:"chef_personal",labelKey:"categories.chef_personal",group:"HOGAR",groupLabelKey:"categories.groups.HOGAR",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","schedule","reports","notifications"],iconPackKey:"food",defaultTheme:u1},asesoria_hogar:{id:"asesoria_hogar",labelKey:"categories.asesoria_hogar",group:"HOGAR",groupLabelKey:"categories.groups.HOGAR",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","schedule","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},construccion_mantencion:{id:"construccion_mantencion",labelKey:"categories.construccion_mantencion",...yP},construccion:{id:"construccion",labelKey:"categories.construccion",...yP},inmobiliaria_terrenos_casas:{id:"inmobiliaria_terrenos_casas",labelKey:"categories.inmobiliaria_terrenos_casas",group:"HOGAR",groupLabelKey:"categories.groups.HOGAR",businessModesAllowed:["BOTH"],dashboardModules:["properties","property-bookings","appointments-lite","schedule","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},taller_vehiculos:{id:"taller_vehiculos",labelKey:"categories.taller_vehiculos",group:"AUTOMOTRIZ",groupLabelKey:"categories.groups.AUTOMOTRIZ",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","work-orders-lite","schedule","reports","notifications"],iconPackKey:"automotive",defaultTheme:xoe},cursos_capacitaciones:{id:"cursos_capacitaciones",labelKey:"categories.cursos_capacitaciones",group:"EDUCACION",groupLabelKey:"categories.groups.EDUCACION",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients-lite","schedule","professionals","reports","notifications"],iconPackKey:"education",defaultTheme:yoe},minimarket:{id:"minimarket",labelKey:"categories.minimarket",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},articulos_aseo:{id:"articulos_aseo",labelKey:"categories.articulos_aseo",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},productos_cuidado_personal:{id:"productos_cuidado_personal",labelKey:"categories.productos_cuidado_personal",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},ferreteria:{id:"ferreteria",labelKey:"categories.ferreteria",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},floreria:{id:"floreria",labelKey:"categories.floreria",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},ropa_accesorios:{id:"ropa_accesorios",labelKey:"categories.ropa_accesorios",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},libreria_papeleria:{id:"libreria_papeleria",labelKey:"categories.libreria_papeleria",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},tecnologia:{id:"tecnologia",labelKey:"categories.tecnologia",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},botillerias:{id:"botillerias",labelKey:"categories.botillerias",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},restaurantes_comida_rapida:{id:"restaurantes_comida_rapida",labelKey:"categories.restaurantes_comida_rapida",group:"ALIMENTOS",groupLabelKey:"categories.groups.ALIMENTOS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications","menu-categories","menu-qr"],iconPackKey:"food",defaultTheme:u1},restaurantes:{id:"restaurantes",labelKey:"categories.restaurantes",group:"ALIMENTOS",groupLabelKey:"categories.groups.ALIMENTOS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications","menu-categories","menu-qr"],iconPackKey:"food",defaultTheme:Wi},bares:{id:"bares",labelKey:"categories.bares",group:"ALIMENTOS",groupLabelKey:"categories.groups.ALIMENTOS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications","menu-categories","menu-qr"],iconPackKey:"food",defaultTheme:Wi},foodtruck:{id:"foodtruck",labelKey:"categories.foodtruck",group:"ALIMENTOS",groupLabelKey:"categories.groups.ALIMENTOS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications","menu-categories","menu-qr"],iconPackKey:"food",defaultTheme:Wi},panaderia_pasteleria:{id:"panaderia_pasteleria",labelKey:"categories.panaderia_pasteleria",group:"ALIMENTOS",groupLabelKey:"categories.groups.ALIMENTOS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"food",defaultTheme:u1},centros_eventos:{id:"centros_eventos",labelKey:"categories.centros_eventos",group:"TURISMO_EVENTOS",groupLabelKey:"categories.groups.TURISMO_EVENTOS",businessModesAllowed:["SERVICES"],dashboardModules:["events","event-reservations","reports","notifications"],iconPackKey:"tourism",defaultTheme:gf},deporte_aventura:{id:"deporte_aventura",labelKey:"categories.deporte_aventura",group:"TURISMO_EVENTOS",groupLabelKey:"categories.groups.TURISMO_EVENTOS",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","schedule","reports","notifications"],iconPackKey:"tourism",defaultTheme:gf},turismo:{id:"turismo",labelKey:"categories.turismo",group:"TURISMO_EVENTOS",groupLabelKey:"categories.groups.TURISMO_EVENTOS",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","schedule","reports","notifications"],iconPackKey:"tourism",defaultTheme:gf},fotografia:{id:"fotografia",labelKey:"categories.fotografia",group:"TURISMO_EVENTOS",groupLabelKey:"categories.groups.TURISMO_EVENTOS",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","schedule","reports","notifications"],iconPackKey:"tourism",defaultTheme:gf},arriendo_cabanas_casas:{id:"arriendo_cabanas_casas",labelKey:"categories.arriendo_cabanas_casas",group:"TURISMO_EVENTOS",groupLabelKey:"categories.groups.TURISMO_EVENTOS",businessModesAllowed:["SERVICES"],dashboardModules:["properties","property-bookings","reports","notifications"],iconPackKey:"tourism",defaultTheme:gf},mascotas_veterinarias:{id:"mascotas_veterinarias",labelKey:"categories.mascotas_veterinarias",group:"MASCOTAS",groupLabelKey:"categories.groups.MASCOTAS",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients","schedule","professionals","reports","notifications"],iconPackKey:"pets",defaultTheme:boe},artesania:{id:"artesania",labelKey:"categories.artesania",group:"ARTES_OFICIOS",groupLabelKey:"categories.groups.ARTES_OFICIOS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","reports","notifications"],iconPackKey:"crafts",defaultTheme:h1},talabarteria:{id:"talabarteria",labelKey:"categories.talabarteria",group:"ARTES_OFICIOS",groupLabelKey:"categories.groups.ARTES_OFICIOS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","reports","notifications"],iconPackKey:"crafts",defaultTheme:h1},taller_artes:{id:"taller_artes",labelKey:"categories.taller_artes",group:"ARTES_OFICIOS",groupLabelKey:"categories.groups.ARTES_OFICIOS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","reports","notifications"],iconPackKey:"crafts",defaultTheme:h1},agenda_profesionales:{id:"agenda_profesionales",labelKey:"categories.agenda_profesionales",group:"BELLEZA",groupLabelKey:"categories.groups.BELLEZA",businessModesAllowed:["SERVICES"],dashboardModules:["appointments-lite","patients-lite","schedule","professionals","reports","notifications"],iconPackKey:"beauty",defaultTheme:Wi},agenda_profesionales_independientes:{id:"agenda_profesionales_independientes",labelKey:"categories.agenda_profesionales_independientes",group:"OTROS",groupLabelKey:"categories.groups.OTROS",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients-lite","schedule","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},servicios_legales:{id:"servicios_legales",labelKey:"categories.servicios_legales",group:"OTROS",groupLabelKey:"categories.groups.OTROS",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients-lite","schedule","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},contabilidad:{id:"contabilidad",labelKey:"categories.contabilidad",group:"OTROS",groupLabelKey:"categories.groups.OTROS",businessModesAllowed:["SERVICES"],dashboardModules:["appointments","patients-lite","schedule","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},bodegas_logistica:{id:"bodegas_logistica",labelKey:"categories.bodegas_logistica",group:"OTROS",groupLabelKey:"categories.groups.OTROS",businessModesAllowed:["PRODUCTS"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},agricultura_productores:{id:"agricultura_productores",labelKey:"categories.agricultura_productores",group:"OTROS",groupLabelKey:"categories.groups.OTROS",businessModesAllowed:["PRODUCTS","BOTH"],dashboardModules:["catalog","orders","inventory","reports","notifications"],iconPackKey:"default",defaultTheme:Ki},distribuidores:{id:"distribuidores",labelKey:"categories.distribuidores",group:"RETAIL",groupLabelKey:"categories.groups.RETAIL",businessModesAllowed:["PRODUCTS"],dashboardModules:["catalog","orders","delivery-routes","collections","geolocation","reports","notifications"],iconPackKey:"retail",defaultTheme:Yi},otros:{id:"otros",labelKey:"categories.otros",group:"OTROS",groupLabelKey:"categories.groups.OTROS",businessModesAllowed:["SERVICES","PRODUCTS","BOTH"],dashboardModules:["appointments","catalog","orders","schedule","reports","notifications"],iconPackKey:"default",defaultTheme:Ki}};function Mp(t){if(!t||typeof t!="string")return ip.otros;const e=w8(t);return e?ip[e]:(console.warn(`[categories] Categora desconocida: ${t}, usando OTROS`),ip.otros)}function v8(){return Object.values(ip)}function ul(t,e){return Mp(t).dashboardModules.includes(e)}function kr(t){if(!t)return"otros";const e=t.category_id??t.categoryId??null;if(!e||typeof e!="string")return"otros";const n=w8(e);return n||(console.warn(`[categories] Categora desconocida: ${e}, usando OTROS`),"otros")}function w8(t){const e=goe[t];return e||(t in ip?t:null)}function voe(){const t=qe(),{handleError:e}=at(),{firestoreUser:n}=wt(),{t:s}=ln(),[r,i]=y.useState("profiles"),[l,d]=y.useState([]),[u,h]=y.useState(!0),[f,p]=y.useState("asc"),[x,b]=y.useState("ALL"),[_,j]=y.useState("ALL"),[v,T]=y.useState(""),[P,A]=y.useState(null),[C,M]=y.useState(!1),[L,k]=y.useState(!1),[R,S]=y.useState(!1),[O,I]=y.useState(!1),F=n?.role==="SUPERADMIN",$=async()=>{try{I(!0),await G9(),J.success("Sesin cerrada"),t("/")}catch(Y){console.error("Error al cerrar sesin:",Y),J.error("No se pudo cerrar sesin")}finally{I(!1)}};y.useEffect(()=>{Q()},[]);const Q=async()=>{try{const X=(await g9()).filter(ve=>ve.status===Rr.ACTIVE||ve.status===Rr.FORCE_PASSWORD_CHANGE),ie=await Promise.all(X.map(ve=>ve.company_id?yn(ve.company_id):Promise.resolve(null))),te=await Promise.all(ie.map(async ve=>{if(!ve?.id)return{services:0,products:0};const[Se,Pe]=await Promise.all([Qc(ve.id).catch(()=>[]),lu(ve.id).catch(()=>[])]);return{services:Se.filter(Ie=>Ie.status==="ACTIVE").length,products:Pe.filter(Ie=>Ie.status==="ACTIVE").length}})),be=X.map((ve,Se)=>({user:ve,company:ie[Se],services:te[Se]?.services??0,products:te[Se]?.products??0}));d(be)}catch(Y){e(Y,{customMessage:"Error cargando perfiles"}),J.error("No se pudieron cargar los perfiles")}finally{h(!1)}},G=async Y=>{try{A(Y),await Qd(Y,{status:Rr.INACTIVE}),d(X=>X.map(ie=>ie.user.id===Y?{...ie,user:{...ie.user,status:Rr.INACTIVE}}:ie)),J.success("Cuenta bloqueada")}catch(X){e(X,{customMessage:"No se pudo bloquear la cuenta"})}finally{A(null)}},B=async Y=>{try{A(Y.user.id),await Yre({email:Y.user.email,companyId:Y.company?.id,userId:Y.user.id}),d(X=>X.filter(ie=>ie.user.id!==Y.user.id)),J.success("Cuenta eliminada")}catch(X){e(X,{customMessage:"No se pudo eliminar la cuenta"})}finally{A(null)}},z=async()=>{if(!F){J.error("Solo SUPERADMIN puede ejecutar el backfill");return}if(confirm("Ests seguro de ejecutar el backfill? Esto actualizar todas las empresas existentes."))try{M(!0);const Y=await Gre();J.success(`Backfill completado: ${Y.updated} actualizadas, ${Y.skipped} omitidas de ${Y.total} totales`),await Q()}catch(Y){e(Y,{customMessage:"Error al ejecutar backfill"})}finally{M(!1)}},q=async()=>{if(!F){J.error("Solo SUPERADMIN puede ejecutar esta funcin");return}if(confirm('Habilitar publicEnabled=true en empresas con ubicacin? Esto permitir que aparezcan en el mapa de "Pymes cercanas".'))try{k(!0);const Y=await Kre();J.success(`Habilitacin completada: ${Y.enabled} empresas habilitadas, ${Y.skipped} omitidas de ${Y.total} totales`),await Q()}catch(Y){e(Y,{customMessage:"Error al habilitar empresas pblicas"})}finally{k(!1)}},Z=async()=>{if(!F){J.error("Solo SUPERADMIN puede ejecutar esta funcin");return}if(confirm("Sincronizar companies_public? Esto actualizar la coleccin pblica con empresas que tienen publicEnabled=true y ubicacin."))try{S(!0);const Y=await Qre();J.success(`Sincronizacin completada: ${Y.synced} sincronizadas, ${Y.deleted} eliminadas, ${Y.skipped} omitidas de ${Y.total} totales`)}catch(Y){e(Y,{customMessage:"Error al sincronizar empresas pblicas"})}finally{S(!1)}},ee=y.useMemo(()=>{const Y=v.trim().toLowerCase();return l.filter(X=>{if(x!=="ALL"&&X.company?.business_type!==x||_!=="ALL"&&kr(X.company)!==_)return!1;if(!Y)return!0;const ie=X.company?.name||"",te=X.user?.display_name||"",be=X.user?.email||"";return[ie,te,be].some(ve=>ve.toLowerCase().includes(Y))})},[l,x,_,v]),H=y.useMemo(()=>v8().slice().sort((Y,X)=>s(Y.labelKey).localeCompare(s(X.labelKey),"es",{sensitivity:"base"})),[s]);return a.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:[F&&a.jsxs("button",{type:"button",onClick:$,disabled:O,className:"fixed top-4 right-4 z-50 flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium shadow-lg transition-colors",title:"Cerrar sesin",children:[a.jsx(Zie,{className:"w-4 h-4"}),O?"Cerrando...":"Cerrar sesin"]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Panel de Administracin"}),a.jsxs("div",{className:"flex gap-2 mb-4",children:[a.jsx("button",{onClick:()=>i("profiles"),className:`px-4 py-2 rounded-t-md border border-b-0 ${r==="profiles"?"bg-white text-slate-900 shadow border-slate-300":"bg-slate-200 text-slate-800 border-slate-300"}`,children:"Perfiles"}),a.jsx("button",{onClick:()=>i("metrics"),className:`px-4 py-2 rounded-t-md border border-b-0 ${r==="metrics"?"bg-white text-slate-900 shadow border-slate-300":"bg-slate-200 text-slate-800 border-slate-300"}`,children:"Mtricas"}),a.jsx("div",{className:"flex-1 flex items-center justify-end",children:a.jsx("div",{className:"text-sm text-gray-500",children:"Cuentas activas visibles"})})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[r==="profiles"&&a.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Perfiles"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[F&&a.jsxs("div",{className:"flex items-center gap-2 border-r pr-2 mr-2 border-gray-300",children:[a.jsx("button",{type:"button",onClick:q,disabled:L||R,className:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium",title:"Habilitar publicEnabled en empresas con ubicacin (Paso 1)",children:L?"Ejecutando...":" Habilitar en Mapa"}),a.jsx("button",{type:"button",onClick:Z,disabled:R||L,className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium",title:"Sincronizar companies_public (Paso 2)",children:R?"Ejecutando...":" Sincronizar"})]}),a.jsx("button",{type:"button",onClick:z,disabled:!F||C,className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-xs font-medium",title:F?"Ejecutar backfill de empresas (solo SUPERADMIN)":"Disponible solo para SUPERADMIN",children:C?"Ejecutando...":" Backfill"}),a.jsx("label",{className:"text-sm text-gray-600",children:"Buscar:"}),a.jsx("input",{type:"text",value:v,onChange:Y=>T(Y.target.value),placeholder:"Nombre o email",className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),a.jsx("label",{className:"text-sm text-gray-600",children:"Tipo:"}),a.jsxs("select",{value:x,onChange:Y=>b(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"ALL",children:"Todos"}),a.jsx("option",{value:an.SERVICES,children:"Servicios"}),a.jsx("option",{value:an.PRODUCTS,children:"Productos"})]}),a.jsx("label",{className:"text-sm text-gray-600",children:"Categora:"}),a.jsxs("select",{value:_,onChange:Y=>j(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"ALL",children:"Todas"}),H.map(Y=>a.jsx("option",{value:Y.id,children:s(Y.labelKey)},Y.id))]}),a.jsx("label",{className:"text-sm text-gray-600",children:"Ordenar:"}),a.jsxs("select",{value:f,onChange:Y=>p(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"asc",children:"A  Z"}),a.jsx("option",{value:"desc",children:"Z  A"})]})]})]}),u?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-4",children:[ee.slice().sort((Y,X)=>{const ie=(Y.company?.name||"").toLowerCase(),te=(X.company?.name||"").toLowerCase();return f==="asc"?ie.localeCompare(te):te.localeCompare(ie)}).map(Y=>a.jsxs("div",{className:"border rounded-lg p-4 flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold break-words",children:Y.company?.name||"Empresa sin nombre"}),a.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded bg-emerald-600 text-white",children:Y.user.status}),Y.company?.business_type&&a.jsx("span",{className:"inline-block px-2 py-1 text-xs rounded bg-blue-600 text-white",children:Y.company.business_type===an.SERVICES?"Servicios":"Productos"})]}),a.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[a.jsx("strong",{children:"Email:"})," ",Y.user.email]}),Y.company?.slug&&a.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[a.jsx("strong",{children:"Slug:"})," ",Y.company.slug]}),Y.company?.subscription_plan&&a.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[a.jsx("strong",{children:"Plan:"})," ",BE[Y.company.subscription_plan]||Y.company.subscription_plan]}),a.jsxs("p",{className:"text-sm text-gray-600 break-words",children:[a.jsx("strong",{children:"Creado:"})," ",new Date(Y.user.created_at).toLocaleString()]})]}),a.jsxs("div",{className:"text-sm text-gray-800 flex flex-col gap-2 min-w-[180px]",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Servicios activos:"}),a.jsx("span",{className:"font-semibold",children:Y.services})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Productos activos:"}),a.jsx("span",{className:"font-semibold",children:Y.products})]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Avance productivo: ",Y.services+Y.products>0?"En progreso":"Pendiente"]}),a.jsxs("div",{className:"flex flex-col gap-2 mt-3",children:[Y.company?.id&&a.jsx("button",{onClick:()=>t(`/admin/subscriptions/${Y.company.id}`),className:"px-3 py-1.5 bg-purple-600 text-white rounded text-xs font-medium hover:bg-purple-700 transition-colors",children:"Gestionar Plan"}),a.jsx("button",{type:"button",disabled:P===Y.user.id,onClick:()=>G(Y.user.id),className:"px-3 py-2 text-xs rounded bg-amber-500 text-white hover:bg-amber-600 disabled:opacity-50",children:P===Y.user.id&&Y.user.status!==Rr.INACTIVE?"Bloqueando...":Y.user.status===Rr.INACTIVE?"Bloqueada":"Bloquear Cuenta"}),a.jsx("button",{type:"button",disabled:P===Y.user.id,onClick:()=>B(Y),className:"px-3 py-2 text-xs rounded bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",children:P===Y.user.id?"Eliminando...":"Eliminar Cuenta"})]})]})]},Y.user.id)),l.length===0&&a.jsx("p",{className:"text-gray-500 text-center py-8",children:"No hay perfiles activos"})]})]}),r==="metrics"&&a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsx(jie,{})})]})]})]})}const woe=async t=>{const e=mt(Ce,"companies",t),n=await ua(e);if(!n.exists())throw new Error("Company not found");const s=n.data(),r=s.planId||s.subscription_plan||"BASIC",i=Dp(r),l=u8(r);return{currentPlan:r,planConfig:i,limits:l,features:i.features,subscription:s.subscription}},_oe=async(t,e)=>{const n=mt(Ce,"companies",t),s=u8(e);await Ss(n,{planId:e,subscription_plan:e,"subscription.maxProfessionals":s.professionals,updated_at:new Date})};function Eoe({companyId:t,companyName:e,currentPlan:n,onPlanUpdated:s}){const{handleError:r}=at(),i=typeof n=="string"?h8(n):n,[l,d]=y.useState(i),[u,h]=y.useState(!1),f=async()=>{if(l===n){J.error("Selecciona un plan diferente al actual");return}try{h(!0),await _oe(t,l);const _=Dp(l);J.success(`Plan actualizado a ${_.label}`),s?.()}catch(_){r(_)}finally{h(!1)}},p=qj(),x=_=>({BASIC:"border-gray-300 bg-gray-50",STARTER:"border-blue-300 bg-blue-50",PRO:"border-purple-300 bg-purple-50",BUSINESS:"border-indigo-300 bg-indigo-50",ENTERPRISE:"border-green-300 bg-green-50"})[_]||"border-gray-300 bg-gray-50",b=_=>({BASIC:"bg-gray-100 text-gray-800",STARTER:"bg-blue-100 text-blue-800",PRO:"bg-purple-100 text-purple-800",BUSINESS:"bg-indigo-100 text-indigo-800",ENTERPRISE:"bg-green-100 text-green-800"})[_]||"bg-gray-100 text-gray-800";return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Gestionar Suscripcin"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Empresa: ",a.jsx("span",{className:"font-medium",children:e})]}),a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Plan actual:"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${b(i)}`,children:Dp(i).label})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:p.map(_=>{const j=_.planId,v=_,T=l===j,P=i===j;return a.jsxs(ke.button,{onClick:()=>d(j),whileHover:{scale:1.02},whileTap:{scale:.98},className:`
                relative p-4 rounded-lg border-2 text-left transition-all
                ${T?"border-blue-500 ring-2 ring-blue-200":"border-gray-200"}
                ${x(j)}
                hover:shadow-md
              `,children:[P&&a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full font-semibold",children:"Actual"})}),a.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[j==="PRO"||j==="ENTERPRISE"?a.jsx(l2,{className:"w-6 h-6 text-purple-600 flex-shrink-0"}):a.jsx(Qj,{className:"w-6 h-6 text-green-600 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:v.label}),a.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:v.description})]})]}),a.jsx("p",{className:"text-lg font-bold text-gray-900 mb-3",children:v.price}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:"Profesionales:"}),a.jsx("span",{className:"font-semibold text-gray-900",children:v.limits.professionals===1/0?"":v.limits.professionals})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:"Servicios:"}),a.jsx("span",{className:"font-semibold text-gray-900",children:v.limits.services===1/0?"":v.limits.services})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-600",children:"Productos:"}),a.jsx("span",{className:"font-semibold text-gray-900",children:v.limits.products===1/0?"":v.limits.products})]})]}),T&&a.jsx("div",{className:"absolute inset-0 rounded-lg border-2 border-blue-500 pointer-events-none"})]},j)})}),l!==i&&a.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-3",children:[a.jsx(Uie,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:"Atencin: Cambio de plan"}),a.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Al cambiar el plan, los lmites se actualizarn inmediatamente. Si la empresa tiene ms recursos activos que el nuevo lmite, no podr agregar nuevos hasta reducir la cantidad."})]})]}),a.jsx("div",{className:"flex gap-3",children:a.jsx("button",{onClick:f,disabled:u||l===i,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:u?"Actualizando...":"Actualizar Plan"})})]})}function Noe(){const{companyId:t}=Mr(),e=qe(),{handleError:n}=at(),[s,r]=y.useState(null),[i,l]=y.useState(!0),d=y.useCallback(async()=>{if(t)try{l(!0);const h=await yn(t);r(h)}catch(h){n(h)}finally{l(!1)}},[t,n]);y.useEffect(()=>{t&&d()},[t,d]);const u=()=>{d()};return i?a.jsx(yt,{fullScreen:!0,size:"lg"}):s?a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[a.jsx(cg,{className:"w-5 h-5"}),"Volver al panel"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestionar Suscripcin"})]}),a.jsx(Eoe,{companyId:s.id,companyName:s.name,currentPlan:s.subscription_plan||"BASIC",onPlanUpdated:u})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Empresa no encontrada"}),a.jsx("button",{onClick:()=>e("/admin"),className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Volver al panel de administracin"})]})})}var _8=(t=>(t.PRO_LIMIT_REACHED="PRO_LIMIT_REACHED",t.SLOT_TAKEN="SLOT_TAKEN",t.SLOT_UNAVAILABLE="SLOT_UNAVAILABLE",t.INVALID_TIME_RANGE="INVALID_TIME_RANGE",t.INVALID_EMAIL="invalid-email",t.INVALID_PHONE="invalid-phone",t.INVALID_RUT="invalid-rut",t.REQUIRED_FIELD="required-field",t.FIELD_TOO_SHORT="field-too-short",t.FIELD_TOO_LONG="field-too-long",t.INVALID_URL="invalid-url",t.PERMISSION_DENIED="permission-denied",t.NOT_FOUND="not-found",t.UNAUTHENTICATED="unauthenticated",t.RESOURCE_EXHAUSTED="resource-exhausted",t.DEADLINE_EXCEEDED="deadline-exceeded",t.UNAVAILABLE="unavailable",t))(_8||{});const joe=t=>t&&(t.code||t.name==="FirebaseError"&&t.code||typeof t=="object"&&"code"in t)?t.code:"unknown",Coe=(t,e)=>joe(t)===e,Soe=t=>!t||!t.trim()?{isValid:!1,error:"required-field"}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"invalid-email"},Toe=(t,e=!1)=>!t||!t.trim()?e?{isValid:!1,error:"required-field"}:{isValid:!0}:/^\+?[\d\s-()]+$/.test(t)?{isValid:!0}:{isValid:!1,error:"invalid-phone"},m1=(t,e=!0)=>!t||!t.trim()?e?{isValid:!1,error:"required-field"}:{isValid:!0}:/^[0-9]{1,2}\.[0-9]{3}\.[0-9]{3}-[0-9Kk]$/.test(t)?{isValid:!0}:{isValid:!1,error:"invalid-rut"},op=t=>!t||!t.trim()?{isValid:!1,error:"required-field"}:{isValid:!0},E8=t=>{const e={};return Object.entries(t).forEach(([n,{value:s,validators:r}])=>{for(const i of r){const l=i(s);if(!l.isValid&&l.error){e[n]=l.error;break}}}),e};function koe(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),s=["Belleza","Salud","Restaurante","Cafetera","Consultora","Tecnologa","Educacin","Fitness","Retail","Servicios profesionales","Inmobiliaria","Transporte","Turismo","Veterinaria"],r=["B2C","B2B","Servicios","Comercio","Manufactura","Salud","Educacin","Tecnologa","Gastronoma","Bienestar","Inmobiliario","Logstica"],[i,l]=y.useState({name:"",rut:"",industry:"",sector:"",seo_keyword:"",whatsapp:"",slug:"",externalWebsiteEnabled:!1,externalWebsiteUrl:""}),[d,u]=y.useState(!0),[h,f]=y.useState(!1),[p,x]=y.useState({}),[b,_]=y.useState(!1);y.useEffect(()=>{j()},[]);const j=async()=>{if(!t?.company_id){u(!1);return}try{const L=await yn(t.company_id);L&&l({name:L.name||"",rut:L.rut||"",industry:L.industry||"",sector:L.sector||"",seo_keyword:L.seo_keyword||"",whatsapp:L.whatsapp||"",slug:L.slug||"",externalWebsiteEnabled:L.externalWebsiteEnabled===!0,externalWebsiteUrl:L.externalWebsiteUrl||""})}catch(L){n(L)}finally{u(!1)}},v=L=>{const k=L.trim();return k?/^https?:\/\//i.test(k)?k:`https://${k}`:""},T=L=>{if(!L)return!1;try{const k=new URL(L);return["http:","https:"].includes(k.protocol)}catch{return!1}},P=async L=>{L.preventDefault(),x({});const k=E8({name:{value:i.name,validators:[op]},rut:{value:i.rut,validators:[S=>m1(S,!0)]},industry:{value:i.industry,validators:[op]},whatsapp:{value:i.whatsapp,validators:[S=>Toe(S,!0)]}});if(Object.keys(k).length>0){x(k),J.error("Por favor corrige los errores en el formulario");return}const R=v(i.externalWebsiteUrl);if(i.externalWebsiteEnabled){if(!R){x(S=>({...S,externalWebsiteUrl:"required-field"})),J.error("Ingresa un enlace web vlido para continuar");return}if(!T(R)){x(S=>({...S,externalWebsiteUrl:"invalid-url"})),J.error("El enlace web debe comenzar con http:// o https://");return}}f(!0);try{if(t?.company_id)await si(t.company_id,{name:i.name,rut:i.rut,industry:i.industry,sector:i.sector,seo_keyword:i.seo_keyword,whatsapp:i.whatsapp.replace(/\D/g,""),slug:i.slug,externalWebsiteEnabled:i.externalWebsiteEnabled===!0,externalWebsiteUrl:i.externalWebsiteEnabled?R:"",publicEnabled:!1,planId:"BASIC"});else{J.error("Error: No hay empresa asociada");return}J.success("Datos guardados"),e("/setup/company-location")}catch(S){J.error("Error al guardar"),n(S)}finally{f(!1)}},A=L=>{const k=L.replace(/[^0-9kK]/g,"").toUpperCase().slice(0,9);if(k.length<=1)return k;const R=k.slice(0,-1),S=k.slice(-1);return`${R.replace(/\B(?=(\d{3})+(?!\d))/g,".")}-${S}`},C=L=>{const k=A(L);l(R=>({...R,rut:k})),x(R=>{const S={...R};if(!k)return delete S.rut,S;if(k.length>=9){const O=m1(k,!0);O.isValid?delete S.rut:S.rut=O.error??"invalid-rut"}else delete S.rut;return S})},M=(L,k)=>{if(l({...i,[L]:k}),p[L]){const R={...p};delete R[L],x(R)}};return d?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:[a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Paso 1: Datos bsicos de la empresa"})]}),a.jsxs("form",{onSubmit:P,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la empresa *"}),a.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${p.name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:i.name,onChange:L=>M("name",L.target.value),"aria-invalid":!!p.name,"aria-describedby":p.name?"name-error":void 0}),p.name&&a.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",role:"alert",children:"Campo requerido"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RUT *"}),a.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${p.rut?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:i.rut,onChange:L=>C(L.target.value),onBlur:L=>{const k=m1(L.target.value,!0);k.isValid||x(R=>({...R,rut:k.error??"invalid-rut"}))},placeholder:"12.345.678-9","aria-invalid":!!p.rut,"aria-describedby":p.rut?"rut-error":void 0}),p.rut&&a.jsx("p",{id:"rut-error",className:"mt-1 text-sm text-red-600",role:"alert",children:p.rut==="required-field"?"Campo requerido":"RUT invlido (formato: 12.345.678-9)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rubro *"}),a.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${p.industry?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,value:i.industry,onChange:L=>M("industry",L.target.value),list:"industry-suggestions",placeholder:"Ej: Belleza, Restaurante, Consultora","aria-invalid":!!p.industry,"aria-describedby":p.industry?"industry-error":void 0}),a.jsx("datalist",{id:"industry-suggestions",children:s.map(L=>a.jsx("option",{value:L},L))}),p.industry&&a.jsx("p",{id:"industry-error",className:"mt-1 text-sm text-red-600",role:"alert",children:"Campo requerido"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sector *"}),a.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Salud, Educacin, Tecnologa",value:i.sector,onChange:L=>l({...i,sector:L.target.value}),list:"sector-suggestions"}),a.jsx("datalist",{id:"sector-suggestions",children:r.map(L=>a.jsx("option",{value:L},L))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Palabra o frase clave (SEO) *"}),a.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: dentista en Santiago, clases de yoga online",value:i.seo_keyword,onChange:L=>l({...i,seo_keyword:L.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono WhatsApp principal *"}),a.jsx("input",{type:"tel",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${p.whatsapp?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"+56912345678",value:i.whatsapp,onChange:L=>M("whatsapp",L.target.value),"aria-invalid":!!p.whatsapp,"aria-describedby":p.whatsapp?"whatsapp-error":void 0}),p.whatsapp&&a.jsx("p",{id:"whatsapp-error",className:"mt-1 text-sm text-red-600",role:"alert",children:p.whatsapp==="required-field"?"Campo requerido":"Telfono invlido"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug de tu URL pblica *"}),a.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["As se ver tu enlace pblico: https://pymerp.cl/negocios/",a.jsx("strong",{children:i.slug||"tu-slug"})]}),a.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"ej: mi-negocio-unico",value:i.slug,onChange:L=>l({...i,slug:n2(L.target.value)})})]}),a.jsxs("div",{className:"rounded-lg border border-dashed border-gray-300 p-4 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Enlace web independiente"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Activa un enlace externo para que tu ficha en el mapa abra tu propio sitio web."})]}),a.jsx("button",{type:"button",onClick:()=>_(!0),className:"px-4 py-2 text-sm font-semibold bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Configurar"})]}),a.jsx("div",{className:"text-xs text-gray-600",children:i.externalWebsiteEnabled&&i.externalWebsiteUrl?`Enlace activo: ${i.externalWebsiteUrl}`:"Sin enlace externo configurado."})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:h?"Guardando...":"Siguiente"})})]})]}),a.jsx(Ai,{isOpen:b,onClose:()=>_(!1),ariaLabelledBy:"external-website-title",children:a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{id:"external-website-title",className:"text-lg font-semibold text-gray-900",children:"Enlace web independiente"}),a.jsx("p",{className:"text-sm text-gray-500",children:'Si activas este enlace, el botn "Ver ficha pblica" en el mapa abrir tu sitio propio.'})]}),a.jsx("button",{type:"button",onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar",children:""})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{id:"external-website-enabled",type:"checkbox",checked:i.externalWebsiteEnabled,onChange:L=>{const k=L.target.checked;l(R=>({...R,externalWebsiteEnabled:k})),!k&&p.externalWebsiteUrl&&x(R=>{const S={...R};return delete S.externalWebsiteUrl,S})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"external-website-enabled",className:"text-sm text-gray-700",children:"Usar enlace externo en la ficha pblica"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"external-website-url",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enlace web"}),a.jsx("input",{id:"external-website-url",type:"url",className:`w-full px-3 py-2 border rounded-md focus:outline-none ${p.externalWebsiteUrl?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`,placeholder:"https://tu-sitio.com",value:i.externalWebsiteUrl,onChange:L=>M("externalWebsiteUrl",L.target.value),disabled:!i.externalWebsiteEnabled,"aria-invalid":!!p.externalWebsiteUrl,"aria-describedby":p.externalWebsiteUrl?"external-website-url-error":void 0}),p.externalWebsiteUrl&&a.jsx("p",{id:"external-website-url-error",className:"mt-1 text-sm text-red-600",role:"alert",children:p.externalWebsiteUrl==="required-field"?"Ingresa un enlace para continuar":"El enlace debe incluir http:// o https://"})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Cerrar"}),a.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Listo"})]})]})})]})}function Aoe(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),[s,r]=y.useState({description:"",show_description:!0,mission:"",vision:"",show_mission_vision:!0,booking_message:""}),[i,l]=y.useState(!0),[d,u]=y.useState(!1);y.useEffect(()=>{h()},[]);const h=async()=>{if(!t?.company_id){l(!1);return}try{const p=await yn(t.company_id);p&&r({description:p.description||"",show_description:p.show_description??!0,mission:p.mission||"",vision:p.vision||"",show_mission_vision:p.show_mission_vision??!0,booking_message:p.booking_message||""})}catch(p){n(p)}finally{l(!1)}},f=async p=>{p.preventDefault(),u(!0);try{t?.company_id&&(await si(t.company_id,{description:s.description,show_description:s.show_description,mission:s.mission,vision:s.vision,show_mission_vision:s.show_mission_vision,booking_message:s.booking_message}),J.success("Informacin guardada"),e("/setup/business-type"))}catch(x){J.error("Error al guardar"),n(x)}finally{u(!1)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Paso 3: Informacin corporativa"})]}),a.jsxs("form",{onSubmit:f,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Descripcin de la empresa"}),a.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu empresa, qu hace, qu ofrece, su historia, valores, etc.",value:s.description,onChange:p=>r({...s,description:p.target.value})}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Esta descripcin aparecer en tu pgina pblica antes de la misin y visin"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"show-description",type:"checkbox",checked:s.show_description,onChange:p=>r({...s,show_description:p.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"show-description",className:"ml-2 block text-sm text-gray-700",children:"Mostrar descripcin en la pgina pblica"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Misin"}),a.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:s.mission,onChange:p=>r({...s,mission:p.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Visin"}),a.jsx("textarea",{rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:s.vision,onChange:p=>r({...s,vision:p.target.value})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"show-mission-vision",type:"checkbox",checked:s.show_mission_vision,onChange:p=>r({...s,show_mission_vision:p.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"show-mission-vision",className:"ml-2 block text-sm text-gray-700",children:"Mostrar misin y visin en la pgina pblica"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje para agendar/comprar"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Hola! Quiero agendar un servicio...",value:s.booking_message,onChange:p=>r({...s,booking_message:p.target.value})})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{type:"button",onClick:()=>e("/setup/company-location"),className:"px-6 py-2 bg-gray-200 text-blue-900 rounded-md hover:bg-gray-300",children:"Anterior"}),a.jsx("button",{type:"submit",disabled:d,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Guardando...":"Siguiente"})]})]})]})})}function Roe(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),[s,r]=y.useState(""),[i,l]=y.useState(!0),[d,u]=y.useState(!1);y.useEffect(()=>{h()},[]);const h=async()=>{if(!t?.company_id){l(!1);return}try{const p=await yn(t.company_id);p?.business_type&&r(p.business_type)}catch(p){n(p,{context:{action:"loadCompany"}})}finally{l(!1)}},f=async p=>{if(p.preventDefault(),!s){J.error("Debes seleccionar un tipo de negocio");return}u(!0);try{t?.company_id&&(await si(t.company_id,{business_type:s}),J.success("Tipo de negocio guardado"),e("/setup/category"))}catch(x){J.error("Error al guardar"),n(x)}finally{u(!1)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Paso 4: Tipo de negocio"})]}),a.jsxs("form",{onSubmit:f,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Tipo de negocio *"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition ${s===an.SERVICES?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 hover:bg-gray-50"}`,children:[a.jsx("input",{type:"radio",name:"businessType",value:an.SERVICES,checked:s===an.SERVICES,onChange:p=>r(p.target.value),className:"mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:"Servicios"}),a.jsx("div",{className:`text-sm ${s===an.SERVICES?"text-blue-900":"text-gray-600"}`,children:"Ofreces servicios que se agendan por horarios"})]})]}),a.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition ${s===an.PRODUCTS?"border-blue-600 bg-blue-50 text-blue-900":"border-gray-200 hover:bg-gray-50"}`,children:[a.jsx("input",{type:"radio",name:"businessType",value:an.PRODUCTS,checked:s===an.PRODUCTS,onChange:p=>r(p.target.value),className:"mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:"Productos"}),a.jsx("div",{className:`text-sm ${s===an.PRODUCTS?"text-blue-900":"text-gray-600"}`,children:"Vendes productos fsicos o digitales"})]})]})]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("button",{type:"button",onClick:()=>e("/setup/company-info"),className:"px-6 py-2 bg-gray-200 text-blue-900 rounded-md hover:bg-gray-300",children:"Anterior"}),a.jsx("button",{type:"submit",disabled:d||!s,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Guardando...":"Siguiente"})]})]})]})})}const Doe=["barberias","peluquerias","unas","masajes_spa","agenda_profesionales","restaurantes","bares","foodtruck","minimarket","distribuidores"],Poe=["barberias","peluquerias","unas","masajes_spa","agenda_profesionales"];function Moe(){const{t}=ln(),{firestoreUser:e}=wt(),n=qe(),{handleError:s}=at(),[r,i]=y.useState(null),[l,d]=y.useState(null),[u,h]=y.useState("ALL"),[f,p]=y.useState(""),[x,b]=y.useState(!0),[_,j]=y.useState(!1),v=(L,k)=>{const R=t(L);return R&&R!==L?R:k};y.useEffect(()=>{T()},[]);const T=async()=>{if(!e?.company_id){b(!1);return}try{const L=await yn(e.company_id);L?.business_type?(i(L.business_type),L.category_id&&d(L.category_id)):n("/setup/business-type")}catch(L){s(L,{context:{action:"loadCompany"}})}finally{b(!1)}},P=y.useMemo(()=>r?v8().filter(k=>{if(r===an.SERVICES)return Poe.includes(k.id);if(!Doe.includes(k.id))return!1;const R=k.businessModesAllowed;return r===an.PRODUCTS?R.includes("PRODUCTS")||R.includes("BOTH"):!1}):[],[r]),A=y.useMemo(()=>{const L=new Set;return P.forEach(k=>{L.add(k.group)}),Array.from(L).sort()},[P]),C=y.useMemo(()=>{let L=P;if(u!=="ALL"&&(L=L.filter(k=>k.group===u)),f.trim()){const k=f.toLowerCase();L=L.filter(R=>{const S=t(R.labelKey).toLowerCase(),O=t(R.groupLabelKey).toLowerCase();return S.includes(k)||O.includes(k)})}return L},[P,u,f,t]),M=async L=>{if(L.preventDefault(),!l){J.error(t("setup.category.error.required")||"Debes seleccionar una categora");return}j(!0);try{if(e?.company_id){const k=Mp(l),R=r===an.SERVICES?"SERVICES":r===an.PRODUCTS?"PRODUCTS":"BOTH";await si(e.company_id,{category_id:l,categoryGroup:k.group,businessMode:R,sector:k.group}),J.success(t("setup.category.success")||"Categora guardada"),n("/setup/social-links")}}catch(k){J.error(t("setup.category.error.save")||"Error al guardar"),s(k)}finally{j(!1)}};return x?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r?a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("button",{type:"button",onClick:()=>n("/setup/business-type"),className:"p-2 rounded-full border border-gray-300 bg-white text-gray-900 hover:bg-gray-100 shadow-sm","aria-label":t("common.back")||"Volver",children:""}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t("setup.category.title")||"Paso 5: Selecciona tu categora"})]}),a.jsxs("form",{onSubmit:M,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t("setup.category.description")||"Selecciona la categora que mejor describe tu negocio. Esto nos ayuda a personalizar tu experiencia."}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(coe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:f,onChange:L=>p(L.target.value),placeholder:t("setup.category.search.placeholder")||"Buscar categora...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-label":t("setup.category.search.label")||"Buscar categora"})]})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("setup.category.filter.byGroup")||"Filtrar por grupo:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:()=>h("ALL"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="ALL"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t("setup.category.filter.all")||"Todas"}),A.map(L=>a.jsx("button",{type:"button",onClick:()=>h(L),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u===L?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t(`categories.groups.${L}`)},L))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:t("setup.category.select.label")||"Selecciona una categora *"}),C.length===0?a.jsx("div",{className:"text-center py-12 text-gray-500",children:t("setup.category.noResults")||"No se encontraron categoras con ese criterio"}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(L=>{const k=l===L.id;return a.jsxs("button",{type:"button",onClick:()=>d(L.id),className:`relative p-4 border-2 rounded-lg text-left transition-all hover:shadow-md ${k?"border-blue-600 bg-blue-50 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300 bg-white"}`,"aria-pressed":k,"aria-label":`${t(L.labelKey)} - ${t(L.groupLabelKey)}`,children:[k&&a.jsx("div",{className:"absolute top-2 right-2 bg-blue-600 text-white rounded-full p-1",children:a.jsx(Qj,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-2xl ${k?"bg-blue-100":"bg-gray-100"}`,children:Loe(L.iconPackKey,L.id)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:`font-semibold ${k?"text-blue-900":"text-gray-900"}`,children:t(L.labelKey)}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t(L.groupLabelKey)})]})]})]},L.id)})})]}),!l&&a.jsx("div",{className:"text-sm text-red-600",role:"alert",children:t("setup.category.error.required")||"Debes seleccionar una categora para continuar"})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>n("/setup/business-type"),className:"px-6 py-2 bg-slate-800 text-white rounded-md hover:bg-slate-900 shadow-sm",children:v("common.back","Back")}),a.jsx("button",{type:"submit",disabled:_||!l,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:_?v("common.saving","Saving..."):v("setup.category.submit","Finish")})]})]})]})}):null}function Loe(t,e){if(e==="barberias")return"";if(e==="peluquerias")return"";if(e==="unas")return"";if(e==="masajes_spa")return"";if(e==="agenda_profesionales")return"";const n={medical:"",beauty:"",automotive:"",retail:"",food:"",education:"",tourism:"",pets:"",crafts:"",default:""};return n[t]||n.default}function Ioe(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),[s,r]=y.useState(""),[i,l]=y.useState(""),[d,u]=y.useState(null),[h,f]=y.useState(!0),[p,x]=y.useState(!1);y.useEffect(()=>{b()},[]);const b=async()=>{if(!t?.company_id){f(!1);return}try{const v=await yn(t.company_id);if(v?.business_type)u(v.business_type);else{e("/setup/business-type");return}const T=v?.social_links||v?.socialLinks;T&&(r(T.facebook||""),l(T.instagram||""))}catch(v){n(v,{context:{action:"loadCompany"}})}finally{f(!1)}},_=v=>{if(!v.trim())return!0;try{const T=new URL(v);return T.protocol==="http:"||T.protocol==="https:"}catch{return!1}},j=async v=>{if(v.preventDefault(),s.trim()&&!_(s)){J.error("La URL de Facebook no es vlida. Debe comenzar con http:// o https://");return}if(i.trim()&&!_(i)){J.error("La URL de Instagram no es vlida. Debe comenzar con http:// o https://");return}x(!0);try{if(t?.company_id){const T={},P=s.trim(),A=i.trim();P&&(T.facebook=P),A&&(T.instagram=A),await si(t.company_id,{social_links:T,setup_completed:!0}),J.success("Redes sociales guardadas"),d===an.SERVICES?e("/dashboard/services"):e("/dashboard/products")}}catch(T){J.error("Error al guardar"),n(T)}finally{x(!1)}};return h?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?a.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("button",{type:"button",onClick:()=>e("/setup/category"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Paso 6: Redes sociales (opcional)"})]}),a.jsxs("form",{onSubmit:j,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[a.jsx("div",{children:a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Agrega tus redes sociales para que los clientes puedan encontrarte. Este paso es opcional."})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"facebook",className:"block text-sm font-medium text-gray-700 mb-2",children:"Facebook"}),a.jsx("input",{id:"facebook",type:"url",value:s,onChange:v=>r(v.target.value),placeholder:"https://www.facebook.com/tu-pagina",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL completa de tu pgina de Facebook"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"instagram",className:"block text-sm font-medium text-gray-700 mb-2",children:"Instagram"}),a.jsx("input",{id:"instagram",type:"url",value:i,onChange:v=>l(v.target.value),placeholder:"https://www.instagram.com/tu-cuenta",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL completa de tu perfil de Instagram"})]}),a.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>e("/setup/category"),className:"px-6 py-2 bg-gray-200 text-gray-900 rounded-md hover:bg-gray-300",children:"Anterior"}),a.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Guardando...":"Finalizar"})]})]})]})}):null}const Zb=async t=>{const e=dm(um,"sendAppointmentEmail");try{return(await e(t)).data}catch(n){return{success:!1,message:n.message||"Email service unavailable"}}},Ooe=async(t,e,n,s,r,i)=>{try{await Zb({type:"created",appointmentId:t.id,companyId:t.company_id,recipientEmail:r,appointmentData:{clientName:t.client_name,serviceName:e,professionalName:n,date:t.appointment_date.toISOString(),startTime:t.start_time,endTime:t.end_time,notes:t.notes},companyData:{name:s,whatsapp:i}})}catch{}},N8=async(t,e,n,s,r,i)=>{r&&await Zb({type:"confirmed",appointmentId:t.id,companyId:t.company_id,recipientEmail:r,appointmentData:{clientName:t.client_name,serviceName:e,professionalName:n,date:t.appointment_date.toISOString(),startTime:t.start_time,endTime:t.end_time,notes:t.notes},companyData:{name:s,whatsapp:i}})},Voe=async(t,e,n,s,r,i)=>{await Zb({type:"cancelled",appointmentId:t.id,companyId:t.company_id,recipientEmail:r,appointmentData:{clientName:t.client_name,serviceName:e,professionalName:n,date:t.appointment_date.toISOString(),startTime:t.start_time,endTime:t.end_time,notes:t.notes},companyData:{name:s,whatsapp:i}})},K0=async(t,e,n,s,r,i)=>{if(r)try{await Zb({type:"reminder",appointmentId:t.id,companyId:t.company_id,recipientEmail:r,appointmentData:{clientName:t.client_name,serviceName:e,professionalName:n,date:t.appointment_date.toISOString(),startTime:t.start_time,endTime:t.end_time,notes:t.notes},companyData:{name:s,whatsapp:i}})}catch{}},Uoe=/<\s*\/?script[^>]*>.*?<\s*\/\s*script\s*>/gis,Boe=/<\s*\/?script[^>]*>/gi,Foe=5e3,$oe=254,zoe=20;function gr(t,e=Foe){return typeof t!="string"?(Re.warn("sanitizeText received non-string input:",typeof t),""):t.replace(Uoe,"").replace(Boe,"").trim().slice(0,e)}function Jb(t){if(!t||typeof t!="string")return!1;const e=t.trim();return e.length>$oe?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function Ny(t){if(!t||typeof t!="string")return!1;const e=t.trim();return e.length>zoe||e.length<6?!1:/^\+?[\d\s\-()]{6,20}$/.test(e)}function os(t,e){if(!t||typeof t!="string"||t.trim().length===0){const s=`company_id is required for multi-tenant operations${e?` (${e})`:""}`;throw Re.error("[Multi-tenant] Missing company_id",{context:e,companyId:t}),new Error(s)}const n=t.trim();if(n.length<1||n.length>100)throw Re.error("[Multi-tenant] Invalid company_id format",{context:e,companyId:n}),new Error("company_id must be a non-empty string (max 100 chars)");return n}function Hoe(t,e,n,s){const r=os(e,`assertResourceBelongsToCompany(${n})`);if(!t)throw Re.error("[Multi-tenant] Resource missing company_id",{resourceType:n,resourceId:s,expectedCompanyId:r}),new Error(`${n} (${s}) does not have company_id set`);if(t!==r)throw Re.error("[Multi-tenant] Company_id mismatch detected",{resourceType:n,resourceId:s,resourceCompanyId:t,expectedCompanyId:r}),new Error(`${n} (${s}) belongs to different company`)}function dc(t){return t??void 0}const j8=async t=>{const e=Ct(Ke(Ce,"professionals"),Ge("company_id","==",t),Ge("status","==","ACTIVE"),da("name","asc"));return(await Dt(e)).docs.map(s=>{const r=s.data();return{id:s.id,...r,created_at:r.created_at?.toDate?.()||new Date,updated_at:r.updated_at?.toDate?.()||new Date}})},Xj=async(t,e)=>{const n=mt(Ce,"professionals",t),s=await ua(n);if(!s.exists())return null;const r=s.data();return{id:s.id,...r,created_at:r.created_at?.toDate?.()||new Date,updated_at:r.updated_at?.toDate?.()||new Date}},qoe=async(t,e,n)=>{const s=mt(Ce,"professionals",t),r=Object.fromEntries(Object.entries(e).filter(([,i])=>i!==void 0));await Ss(s,{...r,updated_at:Ve.now()})},Woe=async(t,e)=>{await Co(mt(Ce,"professionals",t))},Yoe=async t=>(await Ts(Ke(Ce,"professional_availability"),{...t,created_at:Ve.now()})).id,Goe=async t=>{const e=Ct(Ke(Ce,"professional_availability"),Ge("professional_id","==",t),da("day_of_week","asc"));return(await Dt(e)).docs.map(s=>{const r=s.data();return{id:s.id,...r,created_at:r.created_at?.toDate?.()||new Date}}).filter(s=>s.is_available===!0)},C8=async t=>{const e=Ct(Ke(Ce,"professional_availability"),Ge("professional_id","==",t),da("day_of_week","asc"));return(await Dt(e)).docs.map(s=>{const r=s.data();return{id:s.id,...r,created_at:r.created_at?.toDate?.()||new Date}})},Koe=async t=>{await Co(mt(Ce,"professional_availability",t))},Qoe=async t=>{const n=(await C8(t)).map(s=>Koe(s.id));await Promise.all(n)},Xoe=async t=>{console.log(" Creating appointment with company_id:",t.company_id);const n={company_id:os(t.company_id),service_id:t.service_id,professional_id:t.professional_id,client_name:gr(t.client_name,120),client_phone:t.client_phone.trim(),appointment_date:Ve.fromDate(t.appointment_date),start_time:t.start_time,end_time:t.end_time,status:t.status,created_at:Ve.now(),updated_at:Ve.now()};return t.client_email&&(n.client_email=t.client_email.trim()),t.client_rut&&(n.client_rut=t.client_rut.trim()),t.notes&&(n.notes=gr(t.notes,600)),t.created_by_user_id&&(n.created_by_user_id=t.created_by_user_id),t.resource_id&&(n.resource_id=t.resource_id),(await Ts(Ke(Ce,"appointments"),n)).id},Zoe=async(t,e)=>Xoe({...t,created_by_user_id:e,status:t.status||Be.CONFIRMED}),ev=async(t,e)=>{const n=mt(Ce,"appointments",t),s=await ua(n);if(!s.exists())return null;const r=s.data(),i={id:s.id,...r,appointment_date:r.appointment_date?.toDate?.()||new Date,created_at:r.created_at?.toDate?.()||new Date,updated_at:r.updated_at?.toDate?.()||new Date};return e&&Hoe(i.company_id,e,"Appointment",t),i},S8=async t=>{const e=Ct(Ke(Ce,"appointments"),Ge("company_id","==",t),da("appointment_date","desc"));return(await Dt(e)).docs.map(s=>{const r=s.data();return{id:s.id,...r,appointment_date:r.appointment_date?.toDate?.()||new Date,created_at:r.created_at?.toDate?.()||new Date,updated_at:r.updated_at?.toDate?.()||new Date}})},f1=async t=>{const e=Ct(Ke(Ce,"appointments"),Ge("company_id","==",t),Ge("status","==",Be.REQUESTED),da("appointment_date","asc"));return(await Dt(e)).docs.map(s=>{const r=s.data();return{id:s.id,...r,appointment_date:r.appointment_date?.toDate?.()||new Date,created_at:r.created_at?.toDate?.()||new Date,updated_at:r.updated_at?.toDate?.()||new Date}})},jy=async(t,e,n)=>{if(n&&!await ev(t,n))throw new Error(`Appointment ${t} not found or does not belong to company ${n}`);const s=mt(Ce,"appointments",t),r={...e,updated_at:Ve.now()};e.appointment_date&&(r.appointment_date=Ve.fromDate(e.appointment_date)),await Ss(s,r)},T8=async(t,e)=>{const n=await ev(t,e);if(!n)throw new Error("Cita no encontrada");const s=n.company_id;await jy(t,{status:Be.CANCELLED},s);try{const[r,i,l]=await Promise.all([yn(n.company_id),ou(n.service_id),n.professional_id!=="unassigned"?Xj(n.professional_id):Promise.resolve(null)]);if(!r||!i)return;const d=l?.name||"Sin asignar",u=r.whatsapp;n.client_email&&Voe(n,i.name,d,r.name,n.client_email,u).catch(()=>{})}catch{}},k8=async(t,e)=>{const n=await ev(t,e);if(!n)throw new Error("Cita no encontrada");const s=n.company_id;await jy(t,{status:Be.CONFIRMED},s);try{const[r,i,l]=await Promise.all([yn(n.company_id),ou(n.service_id),n.professional_id!=="unassigned"?Xj(n.professional_id):Promise.resolve(null)]);if(!r||!i)return;const d=l?.name||"Sin asignar",u=r.whatsapp;n.client_email&&N8(n,i.name,d,r.name,n.client_email,u).catch(()=>{})}catch{}},A8=(t,e,n,s,r)=>{const i=[Ge("company_id","==",t),Ge("appointment_date",">=",Ve.fromDate(e)),Ge("appointment_date","<=",Ve.fromDate(n))];i.push(da("appointment_date","asc"));const l=Ct(Ke(Ce,"appointments"),...i);return wj(l,d=>{const u=d.docs.map(h=>{const f=h.data();return{id:h.id,...f,appointment_date:f.appointment_date?.toDate?.()||new Date,created_at:f.created_at?.toDate?.()||new Date,updated_at:f.updated_at?.toDate?.()||new Date}});s(u)},d=>{throw console.error("Error listening to appointments:",d),d})},Joe=(t,e)=>{const n=Ct(Ke(Ce,"appointments"),Ge("company_id","==",t));return wj(n,s=>{const r=s.docs.map(i=>{const l=i.data();return{id:i.id,...l,appointment_date:l.appointment_date?.toDate?.()||new Date,created_at:l.created_at?.toDate?.()||new Date,updated_at:l.updated_at?.toDate?.()||new Date}});e(r)},s=>{throw console.error("Error listening to appointments:",s),s})},ele=async(t,e,n,s,r,i)=>{const l=os(t),d=new Date(n);d.setHours(0,0,0,0);const u=new Date(n);u.setHours(23,59,59,999);const h=Ct(Ke(Ce,"appointments"),Ge("company_id","==",l),Ge("professional_id","==",e),Ge("appointment_date",">=",Ve.fromDate(d)),Ge("appointment_date","<=",Ve.fromDate(u)),Ge("status","in",[Be.CONFIRMED,Be.REQUESTED])),f=await Dt(h);for(const p of f.docs){const x=p.data();if(s>=x.start_time&&s<x.end_time||r>x.start_time&&r<=x.end_time||s<=x.start_time&&r>=x.end_time)return!1}return!0},tle=async(t,e,n)=>{const s=e.trim().toLowerCase(),r=n?.trim().replace(/[^0-9kK-]/g,"").toUpperCase();let i=[];if(r){const p=Ct(Ke(Ce,"appointments"),Ge("company_id","==",t),Ge("client_rut","==",r),da("appointment_date","desc"));i=(await Dt(p)).docs.map(b=>{const _=b.data();return{id:b.id,..._,appointment_date:_.appointment_date?.toDate?.()||new Date,created_at:_.created_at?.toDate?.()||new Date,updated_at:_.updated_at?.toDate?.()||new Date}})}const l=Ct(Ke(Ce,"appointments"),Ge("company_id","==",t),da("appointment_date","desc")),u=(await Dt(l)).docs.map(p=>{const x=p.data();return{id:p.id,...x,appointment_date:x.appointment_date?.toDate?.()||new Date,created_at:x.created_at?.toDate?.()||new Date,updated_at:x.updated_at?.toDate?.()||new Date}}).filter(p=>{const x=p.client_name?.trim().toLowerCase()||"",b=x===s||x.includes(s)||s.includes(x);if(r&&i.length>0){const _=p.client_rut?.trim().replace(/[^0-9kK-]/g,"").toUpperCase();return b&&_!==r}return b}),h=[...i,...u];return Array.from(new Map(h.map(p=>[p.id,p])).values()).sort((p,x)=>{const b=p.appointment_date.getTime(),_=x.appointment_date.getTime();return b!==_?_-b:p.start_time.localeCompare(x.start_time)})},nle=async t=>{const e=xn.firebase.functionsRegion,n=xn.firebase.projectId,s=`https://${e}-${n}.cloudfunctions.net/createAppointmentRequestHttp`,r={"Content-Type":"application/json"},i=await qn.currentUser?.getIdToken?.().catch(()=>null);i&&(r.Authorization=`Bearer ${i}`);const l=await fetch(s,{method:"POST",headers:r,body:JSON.stringify(t)}),d=await l.json().catch(()=>({}));if(!l.ok){const u=new Error(d?.error||d?.message||"Failed to create appointment request");throw u.code=d?.code||l.status,u}return d},sle=async t=>{const e=os(t.companyId),n=gr(t.clientName,120),s=t.notes?gr(t.notes,600):void 0,[r,i]=t.startTime.split(":").map(Number),[l,d]=t.endTime.split(":").map(Number),u=new Date(`${t.date}T00:00:00`),h=new Date(u.getFullYear(),u.getMonth(),u.getDate(),r,i,0,0),f=new Date(u.getFullYear(),u.getMonth(),u.getDate(),l,d,0,0),p=Math.max(1,Math.round((f.getTime()-h.getTime())/6e4));if(!Ny(t.clientPhone)){const _=new Error("Invalid phone format");throw _.code="invalid-phone",_}if(t.clientEmail&&!Jb(t.clientEmail)){const _=new Error("Invalid email format");throw _.code="invalid-email",_}const x=dm(um,"createAppointmentRequest"),b={...t,companyId:e,clientName:n,clientPhone:t.clientPhone.trim(),clientEmail:dc(t.clientEmail?.trim()),notes:s,startAt:h.getTime(),endAt:f.getTime(),slotMinutes:p};try{return(await x(b)).data}catch(_){const j=_?.message||"";if(_?.code==="internal"||j.includes("res.on is not a function")||j.includes("INTERNAL"))return nle(b);if(_.code){const T=new Error(_.message||"Failed to create appointment request");throw T.code=_.code,T}throw _}},tv=async t=>{const e=Ct(Ke(Ce,"professionals"),Ge("company_id","==",t),Ge("status","==","ACTIVE"),da("name","asc"));return(await Dt(e)).docs.map(s=>{const r=s.data();return{id:s.id,company_id:r.company_id,name:r.name,email:r.email,phone:r.phone,avatar_url:r.avatar_url,specialties:r.specialties||[],status:r.status,created_at:r.created_at?.toDate?.()||new Date,updated_at:r.updated_at?.toDate?.()||new Date}})},R8=(t,e)=>{const n=Ct(Ke(Ce,"professionals"),Ge("company_id","==",t),Ge("status","==","ACTIVE"),da("name","asc"));return wj(n,s=>{const r=s.docs.map(i=>{const l=i.data();return{id:i.id,company_id:l.company_id,name:l.name,email:l.email,phone:l.phone,avatar_url:l.avatar_url,specialties:l.specialties||[],status:l.status,created_at:l.created_at?.toDate?.()||new Date,updated_at:l.updated_at?.toDate?.()||new Date}});e(r)},s=>{throw console.error("Error listening to professionals:",s),s})},rle=async t=>{const e={company_id:t.companyId,name:t.name,status:t.status==="INACTIVE"?"INACTIVE":"ACTIVE",created_at:Ve.now(),updated_at:Ve.now()};return t.email&&(e.email=t.email),t.phone&&(e.phone=t.phone),t.avatar_url&&(e.avatar_url=t.avatar_url),t.specialties&&t.specialties.length>0&&(e.specialties=t.specialties),{professionalId:(await Ts(Ke(Ce,"professionals"),e)).id}},D8=async t=>{const e=os(t.companyId),n=gr(t.name,120);if(!n)throw new Error("Professional name is required");if(t.email&&!Jb(t.email)){const r=new Error("Invalid email format");throw r.code="invalid-email",r}if(t.phone&&!Ny(t.phone)){const r=new Error("Invalid phone format");throw r.code="invalid-phone",r}const s=dm(um,"createProfessional");try{return(await s({...t,companyId:e,name:n,email:dc(t.email),phone:dc(t.phone),avatar_url:dc(t.avatar_url),specialties:t.specialties?.map(i=>gr(i,80))})).data}catch(r){const i=r?.message||"";if(r?.code==="internal"||i.includes("res.on is not a function")||i.includes("INTERNAL"))return rle({...t,companyId:e,name:n,email:dc(t.email)||void 0,phone:dc(t.phone)||void 0,avatar_url:dc(t.avatar_url)||void 0,specialties:t.specialties?.map(d=>gr(d,80)).filter(Boolean)});if(r.code){const d=new Error(r.message||"Failed to create professional");throw d.code=r.code,d}throw r}};function dg(){const t=qe(),e=async()=>{try{await G9(),t("/")}catch(n){console.error("Error al cerrar sesin:",n),J.error("No se pudo cerrar sesin")}};return a.jsx("button",{type:"button",onClick:e,className:"fixed top-4 right-4 z-30 px-4 py-2 text-sm font-medium rounded-md border border-gray-200 bg-white hover:bg-gray-50 text-gray-700 shadow",children:"Cerrar sesin"})}var ale=Object.defineProperty,Cy=Object.getOwnPropertySymbols,P8=Object.prototype.hasOwnProperty,M8=Object.prototype.propertyIsEnumerable,bP=(t,e,n)=>e in t?ale(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c2=(t,e)=>{for(var n in e||(e={}))P8.call(e,n)&&bP(t,n,e[n]);if(Cy)for(var n of Cy(e))M8.call(e,n)&&bP(t,n,e[n]);return t},d2=(t,e)=>{var n={};for(var s in t)P8.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&Cy)for(var s of Cy(t))e.indexOf(s)<0&&M8.call(t,s)&&(n[s]=t[s]);return n};var Jd;(t=>{const e=class Ft{constructor(u,h,f,p){if(this.version=u,this.errorCorrectionLevel=h,this.modules=[],this.isFunction=[],u<Ft.MIN_VERSION||u>Ft.MAX_VERSION)throw new RangeError("Version value out of range");if(p<-1||p>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let x=[];for(let _=0;_<this.size;_++)x.push(!1);for(let _=0;_<this.size;_++)this.modules.push(x.slice()),this.isFunction.push(x.slice());this.drawFunctionPatterns();const b=this.addEccAndInterleave(f);if(this.drawCodewords(b),p==-1){let _=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const v=this.getPenaltyScore();v<_&&(p=j,_=v),this.applyMask(j)}}r(0<=p&&p<=7),this.mask=p,this.applyMask(p),this.drawFormatBits(p),this.isFunction=[]}static encodeText(u,h){const f=t.QrSegment.makeSegments(u);return Ft.encodeSegments(f,h)}static encodeBinary(u,h){const f=t.QrSegment.makeBytes(u);return Ft.encodeSegments([f],h)}static encodeSegments(u,h,f=1,p=40,x=-1,b=!0){if(!(Ft.MIN_VERSION<=f&&f<=p&&p<=Ft.MAX_VERSION)||x<-1||x>7)throw new RangeError("Invalid value");let _,j;for(_=f;;_++){const A=Ft.getNumDataCodewords(_,h)*8,C=l.getTotalBits(u,_);if(C<=A){j=C;break}if(_>=p)throw new RangeError("Data too long")}for(const A of[Ft.Ecc.MEDIUM,Ft.Ecc.QUARTILE,Ft.Ecc.HIGH])b&&j<=Ft.getNumDataCodewords(_,A)*8&&(h=A);let v=[];for(const A of u){n(A.mode.modeBits,4,v),n(A.numChars,A.mode.numCharCountBits(_),v);for(const C of A.getData())v.push(C)}r(v.length==j);const T=Ft.getNumDataCodewords(_,h)*8;r(v.length<=T),n(0,Math.min(4,T-v.length),v),n(0,(8-v.length%8)%8,v),r(v.length%8==0);for(let A=236;v.length<T;A^=253)n(A,8,v);let P=[];for(;P.length*8<v.length;)P.push(0);return v.forEach((A,C)=>P[C>>>3]|=A<<7-(C&7)),new Ft(_,h,P,x)}getModule(u,h){return 0<=u&&u<this.size&&0<=h&&h<this.size&&this.modules[h][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let f=0;f<this.size;f++)this.setFunctionModule(6,f,f%2==0),this.setFunctionModule(f,6,f%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),h=u.length;for(let f=0;f<h;f++)for(let p=0;p<h;p++)f==0&&p==0||f==0&&p==h-1||f==h-1&&p==0||this.drawAlignmentPattern(u[f],u[p]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const h=this.errorCorrectionLevel.formatBits<<3|u;let f=h;for(let x=0;x<10;x++)f=f<<1^(f>>>9)*1335;const p=(h<<10|f)^21522;r(p>>>15==0);for(let x=0;x<=5;x++)this.setFunctionModule(8,x,s(p,x));this.setFunctionModule(8,7,s(p,6)),this.setFunctionModule(8,8,s(p,7)),this.setFunctionModule(7,8,s(p,8));for(let x=9;x<15;x++)this.setFunctionModule(14-x,8,s(p,x));for(let x=0;x<8;x++)this.setFunctionModule(this.size-1-x,8,s(p,x));for(let x=8;x<15;x++)this.setFunctionModule(8,this.size-15+x,s(p,x));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let f=0;f<12;f++)u=u<<1^(u>>>11)*7973;const h=this.version<<12|u;r(h>>>18==0);for(let f=0;f<18;f++){const p=s(h,f),x=this.size-11+f%3,b=Math.floor(f/3);this.setFunctionModule(x,b,p),this.setFunctionModule(b,x,p)}}drawFinderPattern(u,h){for(let f=-4;f<=4;f++)for(let p=-4;p<=4;p++){const x=Math.max(Math.abs(p),Math.abs(f)),b=u+p,_=h+f;0<=b&&b<this.size&&0<=_&&_<this.size&&this.setFunctionModule(b,_,x!=2&&x!=4)}}drawAlignmentPattern(u,h){for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)this.setFunctionModule(u+p,h+f,Math.max(Math.abs(p),Math.abs(f))!=1)}setFunctionModule(u,h,f){this.modules[h][u]=f,this.isFunction[h][u]=!0}addEccAndInterleave(u){const h=this.version,f=this.errorCorrectionLevel;if(u.length!=Ft.getNumDataCodewords(h,f))throw new RangeError("Invalid argument");const p=Ft.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][h],x=Ft.ECC_CODEWORDS_PER_BLOCK[f.ordinal][h],b=Math.floor(Ft.getNumRawDataModules(h)/8),_=p-b%p,j=Math.floor(b/p);let v=[];const T=Ft.reedSolomonComputeDivisor(x);for(let A=0,C=0;A<p;A++){let M=u.slice(C,C+j-x+(A<_?0:1));C+=M.length;const L=Ft.reedSolomonComputeRemainder(M,T);A<_&&M.push(0),v.push(M.concat(L))}let P=[];for(let A=0;A<v[0].length;A++)v.forEach((C,M)=>{(A!=j-x||M>=_)&&P.push(C[A])});return r(P.length==b),P}drawCodewords(u){if(u.length!=Math.floor(Ft.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let h=0;for(let f=this.size-1;f>=1;f-=2){f==6&&(f=5);for(let p=0;p<this.size;p++)for(let x=0;x<2;x++){const b=f-x,j=(f+1&2)==0?this.size-1-p:p;!this.isFunction[j][b]&&h<u.length*8&&(this.modules[j][b]=s(u[h>>>3],7-(h&7)),h++)}}r(h==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let h=0;h<this.size;h++)for(let f=0;f<this.size;f++){let p;switch(u){case 0:p=(f+h)%2==0;break;case 1:p=h%2==0;break;case 2:p=f%3==0;break;case 3:p=(f+h)%3==0;break;case 4:p=(Math.floor(f/3)+Math.floor(h/2))%2==0;break;case 5:p=f*h%2+f*h%3==0;break;case 6:p=(f*h%2+f*h%3)%2==0;break;case 7:p=((f+h)%2+f*h%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[h][f]&&p&&(this.modules[h][f]=!this.modules[h][f])}}getPenaltyScore(){let u=0;for(let x=0;x<this.size;x++){let b=!1,_=0,j=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[x][v]==b?(_++,_==5?u+=Ft.PENALTY_N1:_>5&&u++):(this.finderPenaltyAddHistory(_,j),b||(u+=this.finderPenaltyCountPatterns(j)*Ft.PENALTY_N3),b=this.modules[x][v],_=1);u+=this.finderPenaltyTerminateAndCount(b,_,j)*Ft.PENALTY_N3}for(let x=0;x<this.size;x++){let b=!1,_=0,j=[0,0,0,0,0,0,0];for(let v=0;v<this.size;v++)this.modules[v][x]==b?(_++,_==5?u+=Ft.PENALTY_N1:_>5&&u++):(this.finderPenaltyAddHistory(_,j),b||(u+=this.finderPenaltyCountPatterns(j)*Ft.PENALTY_N3),b=this.modules[v][x],_=1);u+=this.finderPenaltyTerminateAndCount(b,_,j)*Ft.PENALTY_N3}for(let x=0;x<this.size-1;x++)for(let b=0;b<this.size-1;b++){const _=this.modules[x][b];_==this.modules[x][b+1]&&_==this.modules[x+1][b]&&_==this.modules[x+1][b+1]&&(u+=Ft.PENALTY_N2)}let h=0;for(const x of this.modules)h=x.reduce((b,_)=>b+(_?1:0),h);const f=this.size*this.size,p=Math.ceil(Math.abs(h*20-f*10)/f)-1;return r(0<=p&&p<=9),u+=p*Ft.PENALTY_N4,r(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,h=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let f=[6];for(let p=this.size-7;f.length<u;p-=h)f.splice(1,0,p);return f}}static getNumRawDataModules(u){if(u<Ft.MIN_VERSION||u>Ft.MAX_VERSION)throw new RangeError("Version number out of range");let h=(16*u+128)*u+64;if(u>=2){const f=Math.floor(u/7)+2;h-=(25*f-10)*f-55,u>=7&&(h-=36)}return r(208<=h&&h<=29648),h}static getNumDataCodewords(u,h){return Math.floor(Ft.getNumRawDataModules(u)/8)-Ft.ECC_CODEWORDS_PER_BLOCK[h.ordinal][u]*Ft.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let h=[];for(let p=0;p<u-1;p++)h.push(0);h.push(1);let f=1;for(let p=0;p<u;p++){for(let x=0;x<h.length;x++)h[x]=Ft.reedSolomonMultiply(h[x],f),x+1<h.length&&(h[x]^=h[x+1]);f=Ft.reedSolomonMultiply(f,2)}return h}static reedSolomonComputeRemainder(u,h){let f=h.map(p=>0);for(const p of u){const x=p^f.shift();f.push(0),h.forEach((b,_)=>f[_]^=Ft.reedSolomonMultiply(b,x))}return f}static reedSolomonMultiply(u,h){if(u>>>8||h>>>8)throw new RangeError("Byte out of range");let f=0;for(let p=7;p>=0;p--)f=f<<1^(f>>>7)*285,f^=(h>>>p&1)*u;return r(f>>>8==0),f}finderPenaltyCountPatterns(u){const h=u[1];r(h<=this.size*3);const f=h>0&&u[2]==h&&u[3]==h*3&&u[4]==h&&u[5]==h;return(f&&u[0]>=h*4&&u[6]>=h?1:0)+(f&&u[6]>=h*4&&u[0]>=h?1:0)}finderPenaltyTerminateAndCount(u,h,f){return u&&(this.finderPenaltyAddHistory(h,f),h=0),h+=this.size,this.finderPenaltyAddHistory(h,f),this.finderPenaltyCountPatterns(f)}finderPenaltyAddHistory(u,h){h[0]==0&&(u+=this.size),h.pop(),h.unshift(u)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(d,u,h){if(u<0||u>31||d>>>u)throw new RangeError("Value out of range");for(let f=u-1;f>=0;f--)h.push(d>>>f&1)}function s(d,u){return(d>>>u&1)!=0}function r(d){if(!d)throw new Error("Assertion error")}const i=class ms{constructor(u,h,f){if(this.mode=u,this.numChars=h,this.bitData=f,h<0)throw new RangeError("Invalid argument");this.bitData=f.slice()}static makeBytes(u){let h=[];for(const f of u)n(f,8,h);return new ms(ms.Mode.BYTE,u.length,h)}static makeNumeric(u){if(!ms.isNumeric(u))throw new RangeError("String contains non-numeric characters");let h=[];for(let f=0;f<u.length;){const p=Math.min(u.length-f,3);n(parseInt(u.substring(f,f+p),10),p*3+1,h),f+=p}return new ms(ms.Mode.NUMERIC,u.length,h)}static makeAlphanumeric(u){if(!ms.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let h=[],f;for(f=0;f+2<=u.length;f+=2){let p=ms.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f))*45;p+=ms.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f+1)),n(p,11,h)}return f<u.length&&n(ms.ALPHANUMERIC_CHARSET.indexOf(u.charAt(f)),6,h),new ms(ms.Mode.ALPHANUMERIC,u.length,h)}static makeSegments(u){return u==""?[]:ms.isNumeric(u)?[ms.makeNumeric(u)]:ms.isAlphanumeric(u)?[ms.makeAlphanumeric(u)]:[ms.makeBytes(ms.toUtf8ByteArray(u))]}static makeEci(u){let h=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)n(u,8,h);else if(u<16384)n(2,2,h),n(u,14,h);else if(u<1e6)n(6,3,h),n(u,21,h);else throw new RangeError("ECI assignment value out of range");return new ms(ms.Mode.ECI,0,h)}static isNumeric(u){return ms.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return ms.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,h){let f=0;for(const p of u){const x=p.mode.numCharCountBits(h);if(p.numChars>=1<<x)return 1/0;f+=4+x+p.bitData.length}return f}static toUtf8ByteArray(u){u=encodeURI(u);let h=[];for(let f=0;f<u.length;f++)u.charAt(f)!="%"?h.push(u.charCodeAt(f)):(h.push(parseInt(u.substring(f+1,f+3),16)),f+=2);return h}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=i;t.QrSegment=i})(Jd||(Jd={}));(t=>{(e=>{const n=class{constructor(r,i){this.ordinal=r,this.formatBits=i}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Jd||(Jd={}));(t=>{(e=>{const n=class{constructor(r,i){this.modeBits=r,this.numBitsCharCount=i}numCharCountBits(r){return this.numBitsCharCount[Math.floor((r+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Jd||(Jd={}));var fh=Jd;var ile={L:fh.QrCode.Ecc.LOW,M:fh.QrCode.Ecc.MEDIUM,Q:fh.QrCode.Ecc.QUARTILE,H:fh.QrCode.Ecc.HIGH},L8=128,I8="L",O8="#FFFFFF",V8="#000000",U8=!1,B8=1,ole=4,lle=0,cle=.1;function F8(t,e=0){const n=[];return t.forEach(function(s,r){let i=null;s.forEach(function(l,d){if(!l&&i!==null){n.push(`M${i+e} ${r+e}h${d-i}v1H${i+e}z`),i=null;return}if(d===s.length-1){if(!l)return;i===null?n.push(`M${d+e},${r+e} h1v1H${d+e}z`):n.push(`M${i+e},${r+e} h${d+1-i}v1H${i+e}z`);return}l&&i===null&&(i=d)})}),n.join("")}function $8(t,e){return t.slice().map((n,s)=>s<e.y||s>=e.y+e.h?n:n.map((r,i)=>i<e.x||i>=e.x+e.w?r:!1))}function dle(t,e,n,s){if(s==null)return null;const r=t.length+n*2,i=Math.floor(e*cle),l=r/e,d=(s.width||i)*l,u=(s.height||i)*l,h=s.x==null?t.length/2-d/2:s.x*l,f=s.y==null?t.length/2-u/2:s.y*l,p=s.opacity==null?1:s.opacity;let x=null;if(s.excavate){let _=Math.floor(h),j=Math.floor(f),v=Math.ceil(d+h-_),T=Math.ceil(u+f-j);x={x:_,y:j,w:v,h:T}}const b=s.crossOrigin;return{x:h,y:f,h:u,w:d,excavation:x,opacity:p,crossOrigin:b}}function ule(t,e){return e!=null?Math.max(Math.floor(e),0):t?ole:lle}function z8({value:t,level:e,minVersion:n,includeMargin:s,marginSize:r,imageSettings:i,size:l,boostLevel:d}){let u=he.useMemo(()=>{const _=(Array.isArray(t)?t:[t]).reduce((j,v)=>(j.push(...fh.QrSegment.makeSegments(v)),j),[]);return fh.QrCode.encodeSegments(_,ile[e],n,void 0,void 0,d)},[t,e,n,d]);const{cells:h,margin:f,numCells:p,calculatedImageSettings:x}=he.useMemo(()=>{let b=u.getModules();const _=ule(s,r),j=b.length+_*2,v=dle(b,l,_,i);return{cells:b,margin:_,numCells:j,calculatedImageSettings:v}},[u,l,i,s,r]);return{qrcode:u,margin:f,cells:h,numCells:p,calculatedImageSettings:x}}var hle=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),mle=he.forwardRef(function(e,n){const s=e,{value:r,size:i=L8,level:l=I8,bgColor:d=O8,fgColor:u=V8,includeMargin:h=U8,minVersion:f=B8,boostLevel:p,marginSize:x,imageSettings:b}=s,j=d2(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:v}=j,T=d2(j,["style"]),P=b?.src,A=he.useRef(null),C=he.useRef(null),M=he.useCallback(Q=>{A.current=Q,typeof n=="function"?n(Q):n&&(n.current=Q)},[n]),[L,k]=he.useState(!1),{margin:R,cells:S,numCells:O,calculatedImageSettings:I}=z8({value:r,level:l,minVersion:f,boostLevel:p,includeMargin:h,marginSize:x,imageSettings:b,size:i});he.useEffect(()=>{if(A.current!=null){const Q=A.current,G=Q.getContext("2d");if(!G)return;let B=S;const z=C.current,q=I!=null&&z!==null&&z.complete&&z.naturalHeight!==0&&z.naturalWidth!==0;q&&I.excavation!=null&&(B=$8(S,I.excavation));const Z=window.devicePixelRatio||1;Q.height=Q.width=i*Z;const ee=i/O*Z;G.scale(ee,ee),G.fillStyle=d,G.fillRect(0,0,O,O),G.fillStyle=u,hle?G.fill(new Path2D(F8(B,R))):S.forEach(function(H,Y){H.forEach(function(X,ie){X&&G.fillRect(ie+R,Y+R,1,1)})}),I&&(G.globalAlpha=I.opacity),q&&G.drawImage(z,I.x+R,I.y+R,I.w,I.h)}}),he.useEffect(()=>{k(!1)},[P]);const F=c2({height:i,width:i},v);let $=null;return P!=null&&($=he.createElement("img",{src:P,key:P,style:{display:"none"},onLoad:()=>{k(!0)},ref:C,crossOrigin:I?.crossOrigin})),he.createElement(he.Fragment,null,he.createElement("canvas",c2({style:F,height:i,width:i,ref:M,role:"img"},T)),$)});mle.displayName="QRCodeCanvas";var H8=he.forwardRef(function(e,n){const s=e,{value:r,size:i=L8,level:l=I8,bgColor:d=O8,fgColor:u=V8,includeMargin:h=U8,minVersion:f=B8,boostLevel:p,title:x,marginSize:b,imageSettings:_}=s,j=d2(s,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:v,cells:T,numCells:P,calculatedImageSettings:A}=z8({value:r,level:l,minVersion:f,boostLevel:p,includeMargin:h,marginSize:b,imageSettings:_,size:i});let C=T,M=null;_!=null&&A!=null&&(A.excavation!=null&&(C=$8(T,A.excavation)),M=he.createElement("image",{href:_.src,height:A.h,width:A.w,x:A.x+v,y:A.y+v,preserveAspectRatio:"none",opacity:A.opacity,crossOrigin:A.crossOrigin}));const L=F8(C,v);return he.createElement("svg",c2({height:i,width:i,viewBox:`0 0 ${P} ${P}`,ref:n,role:"img"},j),!!x&&he.createElement("title",null,x),he.createElement("path",{fill:d,d:`M0,0 h${P}v${P}H0z`,shapeRendering:"crispEdges"}),he.createElement("path",{fill:u,d:L,shapeRendering:"crispEdges"}),M)});H8.displayName="QRCodeSVG";function q8({company:t,isOpen:e,onClose:n,onCompanyUpdate:s}){const[r,i]=y.useState(!1),[l,d]=y.useState(""),[u,h]=y.useState(null),[f,p]=y.useState(null),[x,b]=y.useState(0),[_,j]=y.useState(!1),v=y.useRef(null);y.useEffect(()=>{if(t&&e){const R=window.location.origin,S=t.slug?`${R}/${t.slug}/menu`:`${R}/${t.id}/menu`;d(S);const O=Math.max(0,Math.min(40,Math.floor(t.menu_qr_table_count??0)));b(O)}},[t,e]);const T=async()=>{if(l)try{await navigator.clipboard.writeText(l),i(!0),J.success("URL copiada al portapapeles"),setTimeout(()=>i(!1),2e3)}catch{J.error("No se pudo copiar la URL")}},P=R=>{const S=R.target.files?.[0];if(!S){h(null),p(null);return}const O=new FileReader;O.onload=()=>{typeof O.result=="string"&&(h(O.result),p(S.name))},O.readAsDataURL(S)},A=()=>{if(!v.current||!l){J.error("No se pudo generar el QR");return}const S=new XMLSerializer().serializeToString(v.current),O=new Blob([S],{type:"image/svg+xml;charset=utf-8"}),I=URL.createObjectURL(O),F=window.open("","_blank");if(!F){URL.revokeObjectURL(I),J.error("No se pudo abrir la ventana de exportacin");return}const $=u?`<img class="bg" src="${u}" alt="Fondo QR" />`:"";F.document.write(`
      <!doctype html>
      <html>
        <head>
          <meta charset="utf-8" />
          <title>QR ${t?.name||""}</title>
          <style>
            html, body { margin: 0; padding: 0; width: 100%; height: 100%; }
            body { background: #ffffff; }
            .page {
              position: relative;
              width: 100vw;
              height: 100vh;
              display: flex;
              align-items: center;
              justify-content: center;
              overflow: hidden;
            }
            .bg {
              position: absolute;
              inset: 0;
              width: 100%;
              height: 100%;
              object-fit: cover;
              z-index: 0;
            }
            .qr {
              position: relative;
              width: 256px;
              height: 256px;
              z-index: 1;
            }
          </style>
        </head>
        <body>
          <div class="page">
            ${$}
            <img class="qr" src="${I}" alt="QR ${t?.name||""}" />
          </div>
          <script>
            window.onload = function() {
              window.focus();
              window.print();
            };
            window.onafterprint = function() {
              window.close();
            };
          <\/script>
        </body>
      </html>
    `),F.document.close()};if(!e||!t)return null;const M=new Set(["restaurantes_comida_rapida","restaurantes","bares","foodtruck"]).has(t.category_id??""),L=Array.from({length:41},(R,S)=>S),k=async()=>{if(!t)return;const R=Math.max(0,Math.min(40,Math.floor(x)));j(!0);try{const S={menu_qr_table_count:R};await Promise.all([si(t.id,S),kj(t.id,S)]),s?.(S),J.success(R>0?`Mesas configuradas: ${R}`:"Se desactiv la seleccin de mesas")}catch(S){J.error("No se pudieron guardar las mesas"),console.error("[MenuQRModal] Error guardando mesas:",S)}finally{j(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-3 sm:p-4",children:a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-xl w-full max-w-lg max-h-[92vh] overflow-y-auto p-4 sm:p-6 relative",children:[a.jsx("button",{type:"button",onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:text-slate-400 dark:hover:text-slate-200 transition-colors","aria-label":"Cerrar",children:a.jsx(Pp,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Men QR"}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-slate-300",children:["Escanea el cdigo QR para acceder al men digital de ",t.name]})]}),a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"bg-white dark:bg-slate-800 p-3 sm:p-4 rounded-lg border-2 border-gray-200 dark:border-slate-600 w-full max-w-[320px]",children:a.jsx(H8,{value:l,size:256,level:"H",includeMargin:!0,ref:v,className:"w-full h-auto max-w-[256px] mx-auto"})})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"URL del Men"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:l,readOnly:!0,className:"w-full sm:flex-1 px-3 py-2 border border-gray-300 dark:border-slate-600 rounded-md text-sm bg-gray-50 dark:bg-slate-800 text-gray-700 dark:text-slate-100"}),a.jsx("button",{type:"button",onClick:T,className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2","aria-label":"Copiar URL",children:r?a.jsxs(a.Fragment,{children:[a.jsx(Qj,{className:"w-4 h-4"}),"Copiado"]}):a.jsxs(a.Fragment,{children:[a.jsx(qie,{className:"w-4 h-4"}),"Copiar"]})})]})]}),M&&a.jsxs("div",{className:"mb-5 border border-teal-200 dark:border-teal-700 bg-teal-50 dark:bg-teal-900/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex flex-col gap-2 mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-teal-900 dark:text-teal-100",children:"Configuracin de mesas (Men QR)"}),a.jsx("p",{className:"text-xs text-teal-800 dark:text-teal-200",children:"Si configuras mesas, el carrito del men QR exigir seleccionar una antes de enviar el pedido."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-xs font-medium text-teal-900 dark:text-teal-100 mb-1",children:"Cantidad de mesas"}),a.jsx("select",{value:x,onChange:R=>b(parseInt(R.target.value,10)),className:"w-full px-3 py-2 border border-teal-300 dark:border-teal-700 rounded-md bg-white dark:bg-slate-800 text-sm text-gray-900 dark:text-slate-100",children:L.map(R=>a.jsx("option",{value:R,children:R===0?"Sin mesas configuradas":`${R} mesa${R===1?"":"s"}`},R))})]}),a.jsx("button",{type:"button",onClick:k,disabled:_,className:"px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 disabled:opacity-60 disabled:cursor-not-allowed text-sm font-medium",children:_?"Guardando...":"Guardar mesas"})]})]}),M&&a.jsxs("div",{className:"mb-5",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Fondo para PDF (formato vertical)"}),a.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/webp",onChange:P,className:"block w-full text-sm text-gray-700 dark:text-slate-100 file:mr-3 file:py-2 file:px-3 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200 dark:file:bg-slate-700 dark:file:text-slate-100 dark:hover:file:bg-slate-600"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-2",children:"Recomendado: 10801920 px o 12401754 px (A4 a 150 dpi)."}),f&&a.jsxs("p",{className:"text-xs text-gray-600 dark:text-slate-300 mt-1",children:["Archivo seleccionado: ",f]})]}),a.jsxs("div",{className:"mb-5",children:[a.jsxs("button",{type:"button",onClick:A,className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2","aria-label":"Exportar cdigo QR en PDF",children:[a.jsx(Gie,{className:"w-4 h-4","aria-hidden":"true"}),"Exportar cdigo QR"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-2",children:"Se abrir la vista de impresin para que puedas guardar el QR como PDF o imprimirlo."})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:a.jsx("strong",{children:"Instrucciones:"})}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 mt-2 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Imprime este cdigo QR o mustralo en pantalla"}),a.jsx("li",{children:"Tus clientes pueden escanearlo con su telfono"}),a.jsx("li",{children:"Sern dirigidos automticamente a tu men digital"})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx("button",{type:"button",onClick:n,className:"w-full px-4 py-2 bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-slate-100 rounded-md hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Cerrar"})})]})})}function fle(){const{t}=ln("dashboard"),e=qe(),{trackClick:n}=So(),{firestoreUser:s}=wt(),[r,i]=y.useState(null),[l,d]=y.useState(null),[u,h]=y.useState(!0),[f,p]=y.useState(!1);y.useEffect(()=>{(async()=>{if(s?.company_id)try{const S=await yn(s.company_id);d(S),i(S?.business_type||null)}catch(S){console.error("Error loading business type:",S)}finally{h(!1)}else h(!1)})()},[s?.company_id,s]);const x=()=>{n("quick_action_manual_booking")(),e("/dashboard/appointments/new")},b=()=>{n("quick_action_review_schedule")(),e("/dashboard/schedule")},_=()=>{n("quick_action_notifications")(),e("/dashboard/settings/notifications")},j=()=>{n("quick_action_create_professional")(),e("/dashboard/professionals/new")},v=()=>{n("quick_action_menu_categories")(),e("/dashboard/catalog/menu-categories")},T=()=>{n("quick_action_orders")(),e("/dashboard/pedidos")},P=()=>{n("quick_action_menu_qr")(),p(!0)},A=()=>{n("quick_action_delivery_routes")(),e("/dashboard/distributors/routes")},C=()=>{n("quick_action_collections")(),e("/dashboard/distributors/collections")},M=()=>{n("quick_action_geolocation")(),e("/dashboard/distributors/geolocation")},k=[{icon:aoe,title:t("quickActions.manualBooking.title"),description:t("quickActions.manualBooking.description"),buttonText:t("quickActions.manualBooking.button"),ariaLabel:t("quickActions.manualBooking.ariaLabel"),onClick:x,colorClass:"bg-blue-600 hover:bg-blue-700",showFor:"SERVICES",module:"appointments"},{icon:b8,title:t("quickActions.reviewSchedule.title"),description:t("quickActions.reviewSchedule.description"),buttonText:t("quickActions.reviewSchedule.button"),ariaLabel:t("quickActions.reviewSchedule.ariaLabel"),onClick:b,colorClass:"bg-green-600 hover:bg-green-700",showFor:"SERVICES",module:"schedule"},{icon:Rx,title:t("quickActions.createProfessional.title"),description:t("quickActions.createProfessional.description"),buttonText:t("quickActions.createProfessional.button"),ariaLabel:t("quickActions.createProfessional.ariaLabel"),onClick:j,colorClass:"bg-orange-600 hover:bg-orange-700",showFor:"SERVICES",module:"professionals"},{icon:Pie,title:t("quickActions.manageNotifications.title"),description:t("quickActions.manageNotifications.description"),buttonText:t("quickActions.manageNotifications.button"),ariaLabel:t("quickActions.manageNotifications.ariaLabel"),onClick:_,colorClass:"bg-purple-600 hover:bg-purple-700",showFor:"BOTH",module:"notifications"},{icon:pf,title:"Categoras de Men",description:"Organiza tus productos en categoras para tu men digital",buttonText:"Gestionar Categoras",ariaLabel:"Gestionar categoras de men",onClick:v,colorClass:"bg-amber-600 hover:bg-amber-700",showFor:"PRODUCTS",module:"menu-categories"},{icon:ooe,title:"Men QR",description:"Accede a tu men digital con cdigo QR para compartir con clientes",buttonText:"Ver Men QR",ariaLabel:"Ver men QR",onClick:P,colorClass:"bg-teal-600 hover:bg-teal-700",showFor:"PRODUCTS",module:"menu-qr"},{icon:pf,title:"Pedidos",description:"Revisa y gestiona los pedidos ingresados desde el men o WhatsApp",buttonText:"Ir a Pedidos",ariaLabel:"Ir a la pantalla de pedidos",onClick:T,colorClass:"bg-slate-700 hover:bg-slate-800",showFor:"PRODUCTS"},{icon:pf,title:"Rutas de Reparto",description:"Gestiona las rutas de entrega y asigna pedidos a repartidores",buttonText:"Ver Rutas",ariaLabel:"Ir a rutas de reparto",onClick:A,colorClass:"bg-green-600 hover:bg-green-700",showFor:"PRODUCTS",module:"delivery-routes"},{icon:pf,title:"Cobranza",description:"Gestiona los pagos pendientes y realizados de tus pedidos",buttonText:"Ver Cobranza",ariaLabel:"Ir a cobranza",onClick:C,colorClass:"bg-yellow-600 hover:bg-yellow-700",showFor:"PRODUCTS",module:"collections"},{icon:pf,title:"Geolocalizacin",description:"Visualiza las ubicaciones de entrega de tus pedidos en el mapa",buttonText:"Ver Mapa",ariaLabel:"Ir a geolocalizacin",onClick:M,colorClass:"bg-red-600 hover:bg-red-700",showFor:"PRODUCTS",module:"geolocation"}].filter(R=>{if(R.showFor!=="BOTH"&&R.showFor!==r)return!1;if(l){const S=kr(l);if(R.module&&!ul(S,R.module)&&R.module!=="professionals")return!1}return!0});return u||k.length===0?null:a.jsxs("section",{"aria-labelledby":"quick-actions-title",className:"space-y-4",children:[a.jsx("h2",{id:"quick-actions-title",className:"text-xl font-semibold text-gray-900",children:t("quickActions.title")}),a.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 ${k.length>2?"lg:grid-cols-3":""} gap-4`,children:k.map((R,S)=>{const O=R.icon;return a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 space-y-3 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${R.colorClass} text-white`,children:a.jsx(O,{className:"w-6 h-6","aria-hidden":"true"})}),a.jsx("h3",{className:"font-semibold text-gray-900",children:R.title})]}),a.jsx("p",{className:"text-sm text-gray-600",children:R.description}),a.jsx("button",{type:"button",onClick:R.onClick,className:`w-full px-4 py-2 rounded-md text-white font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${R.colorClass}`,"aria-label":R.ariaLabel,children:R.buttonText})]},S)})}),a.jsx(q8,{company:l,isOpen:f,onClose:()=>p(!1)})]})}function ple(){const{t}=ln(),{firestoreUser:e}=wt(),n=qe(),{handleError:s}=at(),[r,i]=y.useState(null),[l,d]=y.useState({totalViews:0,last30DaysViews:0,totalWhatsAppClicks:0,last30DaysWhatsAppClicks:0,totalServiceBookClicks:0,last30DaysServiceBookClicks:0,totalProductOrderClicks:0,last30DaysProductOrderClicks:0,totalRequests:0,last30DaysRequests:0}),[u,h]=y.useState({total:0,topProfessionalName:"",topProfessionalCount:0}),[f,p]=y.useState({activeProfessionals:0,totalAppointments:0,last30Appointments:0,completedAppointments:0,completionRate:0,estimatedRevenueTotal:0,estimatedRevenueLast30:0}),[x,b]=y.useState(!0),[_,j]=y.useState(!1),[v,T]=y.useState(!1),[P,A]=y.useState(!1),[C,M]=y.useState({weekday_days:[],weekday_open_time:"",weekday_close_time:"",weekend_days:[],weekend_open_time:"",weekend_close_time:""}),L=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],k={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"};y.useEffect(()=>{e?.company_id?R():e&&!e.company_id&&n("/setup/company-basic")},[e?.company_id,e]);const R=async()=>{if(e?.company_id)try{const z=await yn(e.company_id);if(i(z),!z?.setup_completed){n("/setup/company-basic");return}const[q,Z,ee,H,Y,X]=await Promise.all([P9(e.company_id),k9(e.company_id),Pj(e.company_id),S8(e.company_id),tv(e.company_id),Qc(e.company_id)]),ie=new Date,te=new Date(ie.getTime()-720*60*60*1e3),be=q.filter(oe=>oe.event_type===ia.PAGE_VIEW).length,ve=q.filter(oe=>oe.event_type===ia.PAGE_VIEW&&oe.created_at>=te).length,Se=q.filter(oe=>oe.event_type===ia.WHATSAPP_CLICK).length,Pe=q.filter(oe=>oe.event_type===ia.WHATSAPP_CLICK&&oe.created_at>=te).length,Ie=q.filter(oe=>oe.event_type===ia.SERVICE_BOOK_CLICK).length,Fe=q.filter(oe=>oe.event_type===ia.SERVICE_BOOK_CLICK&&oe.created_at>=te).length,We=q.filter(oe=>oe.event_type===ia.PRODUCT_ORDER_CLICK).length,kt=q.filter(oe=>oe.event_type===ia.PRODUCT_ORDER_CLICK&&oe.created_at>=te).length,nn=Z.length+ee.length,Ze=[...Z.filter(oe=>oe.created_at>=te),...ee.filter(oe=>oe.created_at>=te)].length,cn=H.filter(oe=>oe.professional_id).reduce((oe,ae)=>(ae.professional_id&&(oe[ae.professional_id]=(oe[ae.professional_id]||0)+1),oe),{}),zt=Object.entries(cn).sort((oe,ae)=>ae[1]-oe[1])[0]?.[0],_n=Y.find(oe=>oe.id===zt)?.name||"",_t=zt&&cn[zt]||0;if(h({total:Object.values(cn).reduce((oe,ae)=>oe+ae,0),topProfessionalName:_n,topProfessionalCount:_t}),z?.business_type==="SERVICES"){const oe=H.filter(lt=>lt.status!==Be.CANCELLED&&lt.status!==Be.NO_SHOW),ae=oe.filter(lt=>lt.appointment_date>=te),Ee=oe.filter(lt=>lt.status===Be.CONFIRMED||lt.status===Be.COMPLETED),Te=new Map(X.map(lt=>[lt.id,lt.price||0])),ze=Ee.reduce((lt,At)=>lt+(Te.get(At.service_id)||0),0),rt=Ee.reduce((lt,At)=>At.appointment_date<te?lt:lt+(Te.get(At.service_id)||0),0);p({activeProfessionals:Y.length,totalAppointments:oe.length,last30Appointments:ae.length,completedAppointments:Ee.length,completionRate:oe.length?Math.round(Ee.length/oe.length*100):0,estimatedRevenueTotal:ze,estimatedRevenueLast30:rt})}d({totalViews:be,last30DaysViews:ve,totalWhatsAppClicks:Se,last30DaysWhatsAppClicks:Pe,totalServiceBookClicks:Ie,last30DaysServiceBookClicks:Fe,totalProductOrderClicks:We,last30DaysProductOrderClicks:kt,totalRequests:nn,last30DaysRequests:Ze})}catch(z){s(z)}finally{b(!1)}},S=()=>{r&&(M({weekday_days:r.weekday_days||[],weekday_open_time:r.weekday_open_time||"",weekday_close_time:r.weekday_close_time||"",weekend_days:r.weekend_days||[],weekend_open_time:r.weekend_open_time||"",weekend_close_time:r.weekend_close_time||""}),T(!0))},O=async()=>{if(e?.company_id){A(!0);try{await si(e.company_id,{weekday_days:C.weekday_days,weekday_open_time:C.weekday_open_time,weekday_close_time:C.weekday_close_time,weekend_days:C.weekend_days,weekend_open_time:C.weekend_open_time,weekend_close_time:C.weekend_close_time}),await b9(C),i(z=>({...z,...C})),J.success("Horario actualizado"),T(!1)}catch(z){J.error("No pudimos guardar el horario"),s(z)}finally{A(!1)}}};if(x)return a.jsx(yt,{fullScreen:!0,size:"lg"});if(!r)return null;const I=`${window.location.origin}/${r.slug}`,F=async()=>{try{await navigator.clipboard.writeText(I),J.success("URL pblica copiada al portapapeles")}catch{J.error("No se pudo copiar. Intenta manualmente.")}},$=()=>{const z=encodeURIComponent(`Visita mi negocio! ${I}`);window.open(`https://wa.me/?text=${z}`,"_blank")},Q=()=>{window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(I)}`,"_blank")},G=()=>{const z=encodeURIComponent(`Visita ${r.name}!`);window.open(`https://x.com/intent/tweet?text=${z}&url=${encodeURIComponent(I)}`,"_blank")},B=()=>{window.open("https://instagram.com/pymerp","_blank")};return a.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:[a.jsx(dg,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-6 flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>n(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100 transition-colors","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"})]}),a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl shadow-lg p-6 mb-8 dark-url-card",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center text-white text-2xl shadow-md",children:""}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Tu Pgina Pblica"}),a.jsxs("p",{className:"text-gray-600 text-sm mb-4 leading-relaxed",children:["Comparte esta URL con tus clientes para que vean tus ",r.business_type==="SERVICES"?"servicios":"productos"," y puedan contactarte fcilmente"]}),a.jsx("div",{className:"bg-white rounded-lg p-4 mb-4 border-2 border-blue-200 shadow-sm",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-3",children:[a.jsx("a",{href:I,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium break-words flex-1 min-w-0 transition-colors",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:I}),a.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium transition-all flex items-center justify-center gap-2 whitespace-nowrap shadow-sm hover:shadow-md w-full sm:w-auto",children:" Copiar URL"})]})}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("button",{type:"button",onClick:$,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow-md","aria-label":"Compartir en WhatsApp",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Compartir en WhatsApp"]}),a.jsxs("button",{type:"button",onClick:Q,className:"px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow-md","aria-label":"Compartir en Facebook",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Compartir en Facebook"]}),a.jsxs("button",{type:"button",onClick:G,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800 text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow-md","aria-label":"Compartir en X",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),"Compartir en X"]}),a.jsxs("button",{type:"button",onClick:B,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 text-sm font-medium transition-all flex items-center gap-2 shadow-sm hover:shadow-md","aria-label":"Seguir en Instagram",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"})}),"Seguir en Instagram"]})]})]})]})}),a.jsx("div",{className:"mb-8",children:a.jsx(fle,{})}),a.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 border border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Configuracin"}),a.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:" Publicar mi Negocio"}),a.jsx("p",{className:"text-sm text-gray-600",children:r.publicEnabled?'Tu negocio aparece en "Pymes cercanas" y puede ser encontrado por clientes cercanos.':'Activa esta opcin para que tu negocio aparezca en "Pymes cercanas" y sea ms fcil de encontrar.'})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer ml-4",children:[a.jsx("input",{type:"checkbox",checked:r.publicEnabled===!0,onChange:async z=>{const q=z.target.checked;try{const{updateCompany:Z}=await tn(async()=>{const{updateCompany:ee}=await Promise.resolve().then(()=>One);return{updateCompany:ee}},void 0);console.log(" Actualizando publicEnabled a:",q),await Z(r.id,{publicEnabled:q}),console.log(" publicEnabled actualizado exitosamente"),i(ee=>({...ee,publicEnabled:q})),J.success(q?' Tu negocio ahora aparece en "Pymes cercanas"':' Tu negocio ya no aparece en "Pymes cercanas"')}catch(Z){console.error(" Error al actualizar publicEnabled:",Z),s(Z,{customMessage:"Error al actualizar configuracin"}),z.target.checked=!q}},className:"sr-only peer"}),a.jsx("div",{className:`w-11 h-6 rounded-full peer transition-colors ${r.publicEnabled===!0?"bg-blue-600":"bg-gray-200"} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all ${r.publicEnabled===!0?"after:translate-x-full":""}`})]})]})}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{type:"button",onClick:()=>n("/setup/company-basic"),className:"px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 text-sm font-medium text-gray-700 transition-colors",children:" Editar datos bsicos"}),a.jsx(jt,{to:"/change-password",className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 text-sm font-medium transition-colors inline-flex items-center gap-2",children:" Cambiar contrasea"}),a.jsx(jt,{to:"/dashboard/branding/background",className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 text-sm font-medium transition-colors inline-flex items-center gap-2",children:" Fondo personalizado"}),a.jsx(jt,{to:"/dashboard/branding/video",className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 text-sm font-medium transition-colors inline-flex items-center gap-2",children:" Video promocional"})]})]}),r.business_type==="SERVICES"&&a.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 border border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Gestin de Servicios"}),(()=>{const z=kr(r);return z!=="otros"&&a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Categora: ",t(Mp(z).labelKey)]})})(),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx(jt,{to:"/dashboard/services",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Servicios"}),(()=>{const z=kr(r);return!z||ul(z,"schedule")})()&&a.jsx(jt,{to:"/dashboard/services/schedules",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Horarios disponibles"}),a.jsx(jt,{to:"/dashboard/services/settings",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Apariencia"}),a.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 text-sm font-medium transition-colors",children:" Horario apertura y cierre"})]})]}),r.business_type==="PRODUCTS"&&a.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 border border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Gestin de Productos"}),(()=>{const z=kr(r);return z!=="otros"&&a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Categora: ",t(Mp(z).labelKey)]})})(),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx(jt,{to:"/dashboard/products",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Productos"}),a.jsx(jt,{to:"/dashboard/products/settings",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:" Apariencia"}),(()=>{const z=kr(r);return ul(z,"menu-categories")?a.jsx(jt,{to:"/dashboard/catalog/menu-categories",className:"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 text-sm font-medium transition-colors",children:" Categoras de Men"}):null})(),(()=>{const z=kr(r);return ul(z,"menu-qr")?a.jsx("button",{type:"button",onClick:()=>j(!0),className:"px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 text-sm font-medium transition-colors",children:" Men QR"}):null})(),(()=>{const z=kr(r);if(ul(z,"menu-categories")){const q=r.slug?`${window.location.origin}/${r.slug}/menu`:`${window.location.origin}/${r.id}/menu`;return a.jsxs("a",{href:q,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm font-medium transition-colors inline-flex items-center gap-2",title:"Ver men pblico con productos categorizados",children:[" Men",a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]})}return null})(),kr(r)==="distribuidores"?a.jsxs(a.Fragment,{children:[a.jsx(jt,{to:"/dashboard/pedidos",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-medium transition-colors",children:" Registro de Pedidos"}),a.jsx(jt,{to:"/dashboard/distributors/routes",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium transition-colors",children:" Rutas de Reparto"}),a.jsx(jt,{to:"/dashboard/distributors/collections",className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm font-medium transition-colors",children:" Cobranza"}),a.jsx(jt,{to:"/dashboard/distributors/geolocation",className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium transition-colors",children:" Geolocalizacin"})]}):null]})]}),r.business_type==="SERVICES"&&a.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8 border border-gray-200",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Gestin de Profesionales"}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx(jt,{to:"/dashboard/professionals",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-medium transition-colors",children:" Ver Profesionales"}),a.jsx(jt,{to:"/dashboard/professionals/new",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-medium transition-colors",children:" Nuevo Profesional"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(xf,{title:"Visitas a la ficha",total:l.totalViews,last30Days:l.last30DaysViews}),r.business_type==="SERVICES"&&a.jsx(gle,{total:u.total,topProfessionalName:u.topProfessionalName,topProfessionalCount:u.topProfessionalCount}),a.jsx(xf,{title:"Clics en WhatsApp",total:l.totalWhatsAppClicks,last30Days:l.last30DaysWhatsAppClicks}),r.business_type==="SERVICES"&&a.jsx(xf,{title:"Clics en Agendar",total:l.totalServiceBookClicks,last30Days:l.last30DaysServiceBookClicks}),r.business_type==="PRODUCTS"&&a.jsx(xf,{title:"Clics en Solicitar",total:l.totalProductOrderClicks,last30Days:l.last30DaysProductOrderClicks}),a.jsx(xf,{title:"Solicitudes registradas",total:l.totalRequests,last30Days:l.last30DaysRequests})]}),r.business_type==="SERVICES"&&a.jsxs("div",{className:"mt-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"KPI de Servicios"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Q0,{title:"Profesionales activos",value:f.activeProfessionals.toLocaleString("es-CL"),subtitle:u.topProfessionalName?`Top: ${u.topProfessionalName} (${u.topProfessionalCount})`:"Sin profesionales destacados"}),a.jsx(Q0,{title:"Citas agendadas",value:f.last30Appointments.toLocaleString("es-CL"),subtitle:`ltimos 30 das  Total: ${f.totalAppointments.toLocaleString("es-CL")}`}),a.jsx(Q0,{title:"Tasa de cumplimiento",value:`${f.completionRate}%`,subtitle:`${f.completedAppointments.toLocaleString("es-CL")} completadas`}),a.jsx(Q0,{title:"Ingresos estimados",value:vP(f.estimatedRevenueTotal),subtitle:`ltimos 30 das: ${vP(f.estimatedRevenueLast30)}`})]})]})]}),v&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",role:"dialog","aria-modal":"true",children:[a.jsx("button",{type:"button",className:"absolute inset-0 bg-black/40",onClick:()=>T(!1),"aria-label":"Cerrar"}),a.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Horario apertura y cierre"}),a.jsx("button",{type:"button",onClick:()=>T(!1),className:"w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center text-gray-600 hover:bg-gray-50","aria-label":"Cerrar",children:""})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-5",children:"Define das de la semana y horario de atencin para la pgina pblica."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Horario semana"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium mb-2 text-gray-700",children:"Das"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(z=>a.jsx("button",{type:"button",onClick:()=>M(q=>({...q,weekday_days:q.weekday_days.includes(z)?q.weekday_days.filter(Z=>Z!==z):[...q.weekday_days,z]})),className:`px-3 py-1 rounded-md text-sm ${C.weekday_days.includes(z)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:k[z]},`weekday-${z}`))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),a.jsx("input",{type:"time",value:C.weekday_open_time,onChange:z=>M(q=>({...q,weekday_open_time:z.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),a.jsx("input",{type:"time",value:C.weekday_close_time,onChange:z=>M(q=>({...q,weekday_close_time:z.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h4",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Horario fin de semana"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium mb-2 text-gray-700",children:"Das"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(z=>a.jsx("button",{type:"button",onClick:()=>M(q=>({...q,weekend_days:q.weekend_days.includes(z)?q.weekend_days.filter(Z=>Z!==z):[...q.weekend_days,z]})),className:`px-3 py-1 rounded-md text-sm ${C.weekend_days.includes(z)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:k[z]},`weekend-${z}`))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),a.jsx("input",{type:"time",value:C.weekend_open_time,onChange:z=>M(q=>({...q,weekend_open_time:z.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),a.jsx("input",{type:"time",value:C.weekend_close_time,onChange:z=>M(q=>({...q,weekend_close_time:z.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-end",children:[a.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{type:"button",onClick:O,disabled:P,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:P?"Guardando...":"Guardar horario"})]})]})]}),a.jsx(q8,{company:r,isOpen:_,onClose:()=>j(!1),onCompanyUpdate:z=>i(q=>q&&{...q,...z})})]})}function xf({title:t,total:e,last30Days:n}){return a.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:t}),a.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e}),a.jsxs("div",{className:"text-sm text-gray-600",children:["ltimos 30 das: ",a.jsx("span",{className:"font-semibold text-blue-600",children:n})]})]})}function Q0({title:t,value:e,subtitle:n}){return a.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:t}),a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-1",children:e}),a.jsx("div",{className:"text-sm text-gray-600",children:n})]})}function vP(t){return t.toLocaleString("es-CL",{style:"currency",currency:"CLP",maximumFractionDigits:0})}function gle({total:t,topProfessionalName:e,topProfessionalCount:n}){return a.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Servicios agendados - profesional"}),a.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:t}),a.jsx("div",{className:"text-sm text-gray-600",children:e?a.jsxs(a.Fragment,{children:["Top: ",a.jsx("span",{className:"font-semibold text-blue-600",children:e})," (",n,")"]}):"Sin profesionales asignados"})]})}const Zj=async(t,e)=>{const n=os(e),s=Ct(Ke(Ce,"notification_settings"),Ge("user_id","==",t),Ge("company_id","==",n));try{const r=await Dt(s);if(r.empty)return null;const i=r.docs[0],l=i.data();return{id:i.id,user_id:l.user_id,company_id:l.company_id,email_notifications_enabled:l.email_notifications_enabled??!1,notification_email:l.notification_email,created_at:l.created_at?.toDate?.()||new Date,updated_at:l.updated_at?.toDate?.()||new Date}}catch(r){if(r.code==="permission-denied"||r.code==="unauthenticated")try{const d=(await dm(um,"getNotificationSettingsSafe")({companyId:e,userId:t})).data;return d?{id:d.id,user_id:d.user_id,company_id:d.company_id,email_notifications_enabled:d.email_notifications_enabled??!1,notification_email:d.notification_email||void 0,created_at:d.created_at?.toDate?.()||new Date,updated_at:d.updated_at?.toDate?.()||new Date}:null}catch(i){return console.warn("No se pudo leer notification_settings ni va callable",i),null}throw r}},wP=async(t,e,n,s)=>{const r=os(e),i=dc(s?.trim());if(i&&!Jb(i))throw new nr("El correo de notificacin no es vlido.",tr.VALIDATION);try{const l=await Zj(t,r);if(l){const d=mt(Ce,"notification_settings",l.id);await Ss(d,{email_notifications_enabled:n,notification_email:i||l.notification_email,updated_at:Ve.now()})}else await Ts(Ke(Ce,"notification_settings"),{user_id:t,company_id:r,email_notifications_enabled:n,notification_email:i,created_at:Ve.now(),updated_at:Ve.now()})}catch(l){if(l.code==="permission-denied"||l.code==="unauthenticated")try{await dm(um,"setNotificationSettingsSafe")({companyId:r,enabled:n,notificationEmail:i});return}catch(d){throw new nr("No tienes permisos para editar las notificaciones de la empresa. Solicita al dueo de la URL que las active.",tr.AUTHORIZATION,{original:l?.code,callableError:d?.code})}throw l}};async function W8(t){if(t.service_name||t.service||t.serviceName)return t.service_name||t.service||t.serviceName;try{const e=await ou(t.service_id);return e?e.name:"Servicio no encontrado"}catch(e){return console.error("Error cargando servicio:",e),t.service_id}}const Y8=6048e5,xle=864e5,G8=6e4,K8=36e5,_P=Symbol.for("constructDateFrom");function Ja(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&_P in t?t[_P](e):t instanceof Date?new t.constructor(e):new Date(e)}function Cs(t,e){return Ja(e||t,t)}function yle(t,e,n){const s=Cs(t,n?.in);return isNaN(e)?Ja(t,NaN):(e&&s.setDate(s.getDate()+e),s)}function ble(t,e,n){const s=Cs(t,n?.in);if(isNaN(e))return Ja(t,NaN);if(!e)return s;const r=s.getDate(),i=Ja(t,s.getTime());i.setMonth(s.getMonth()+e+1,0);const l=i.getDate();return r>=l?i:(s.setFullYear(i.getFullYear(),i.getMonth(),r),s)}let vle={};function ug(){return vle}function Ka(t,e){const n=ug(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=Cs(t,e?.in),i=r.getDay(),l=(i<s?7:0)+i-s;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function Sy(t,e){return Ka(t,{...e,weekStartsOn:1})}function Q8(t,e){const n=Cs(t,e?.in),s=n.getFullYear(),r=Ja(n,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const i=Sy(r),l=Ja(n,0);l.setFullYear(s,0,4),l.setHours(0,0,0,0);const d=Sy(l);return n.getTime()>=i.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function EP(t){const e=Cs(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function X8(t,...e){const n=Ja.bind(null,e.find(s=>typeof s=="object"));return e.map(n)}function Ty(t,e){const n=Cs(t,e?.in);return n.setHours(0,0,0,0),n}function wle(t,e,n){const[s,r]=X8(n?.in,t,e),i=Ty(s),l=Ty(r),d=+i-EP(i),u=+l-EP(l);return Math.round((d-u)/xle)}function _le(t,e){const n=Q8(t,e),s=Ja(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),Sy(s)}function NP(t,e,n){const[s,r]=X8(n?.in,t,e);return+Ty(s)==+Ty(r)}function Ele(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Sd(t){return!(!Ele(t)&&typeof t!="number"||isNaN(+Cs(t)))}function Nle(t,e){const n=Cs(t,e?.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function jle(t,e){const n=Cs(t,e?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Cle(t,e){const n=Cs(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Of(t,e){const n=ug(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=Cs(t,e?.in),i=r.getDay(),l=(i<s?-7:0)+6-(i-s);return r.setDate(r.getDate()+l),r.setHours(23,59,59,999),r}const Sle={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Tle=(t,e,n)=>{let s;const r=Sle[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Sh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const kle={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ale={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rle={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Dle={date:Sh({formats:kle,defaultWidth:"full"}),time:Sh({formats:Ale,defaultWidth:"full"}),dateTime:Sh({formats:Rle,defaultWidth:"full"})},Ple={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mle=(t,e,n,s)=>Ple[t];function Ji(t){return(e,n)=>{const s=n?.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=n?.width?String(n.width):l;r=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=n?.width?String(n.width):t.defaultWidth;r=t.values[d]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(e):e;return r[i]}}const Lle={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ile={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ole={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vle={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ule={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ble={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Fle=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},$le={ordinalNumber:Fle,era:Ji({values:Lle,defaultWidth:"wide"}),quarter:Ji({values:Ile,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ji({values:Ole,defaultWidth:"wide"}),day:Ji({values:Vle,defaultWidth:"wide"}),dayPeriod:Ji({values:Ule,defaultWidth:"wide",formattingValues:Ble,defaultFormattingWidth:"wide"})};function eo(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;const l=i[0],d=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(d)?Hle(d,p=>p.test(l)):zle(d,p=>p.test(l));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const f=e.slice(l.length);return{value:h,rest:f}}}function zle(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Hle(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Z8(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],i=e.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const d=e.slice(r.length);return{value:l,rest:d}}}const qle=/^(\d+)(th|st|nd|rd)?/i,Wle=/\d+/i,Yle={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gle={any:[/^b/i,/^(a|c)/i]},Kle={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qle={any:[/1/i,/2/i,/3/i,/4/i]},Xle={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zle={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jle={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ece={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},tce={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nce={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sce={ordinalNumber:Z8({matchPattern:qle,parsePattern:Wle,valueCallback:t=>parseInt(t,10)}),era:eo({matchPatterns:Yle,defaultMatchWidth:"wide",parsePatterns:Gle,defaultParseWidth:"any"}),quarter:eo({matchPatterns:Kle,defaultMatchWidth:"wide",parsePatterns:Qle,defaultParseWidth:"any",valueCallback:t=>t+1}),month:eo({matchPatterns:Xle,defaultMatchWidth:"wide",parsePatterns:Zle,defaultParseWidth:"any"}),day:eo({matchPatterns:Jle,defaultMatchWidth:"wide",parsePatterns:ece,defaultParseWidth:"any"}),dayPeriod:eo({matchPatterns:tce,defaultMatchWidth:"any",parsePatterns:nce,defaultParseWidth:"any"})},rce={code:"en-US",formatDistance:Tle,formatLong:Dle,formatRelative:Mle,localize:$le,match:sce,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ace(t,e){const n=Cs(t,e?.in);return wle(n,Cle(n))+1}function ice(t,e){const n=Cs(t,e?.in),s=+Sy(n)-+_le(n);return Math.round(s/Y8)+1}function J8(t,e){const n=Cs(t,e?.in),s=n.getFullYear(),r=ug(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=Ja(e?.in||t,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const d=Ka(l,e),u=Ja(e?.in||t,0);u.setFullYear(s,0,i),u.setHours(0,0,0,0);const h=Ka(u,e);return+n>=+d?s+1:+n>=+h?s:s-1}function oce(t,e){const n=ug(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=J8(t,e),i=Ja(e?.in||t,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),Ka(i,e)}function lce(t,e){const n=Cs(t,e?.in),s=+Ka(n,e)-+oce(n,e);return Math.round(s/Y8)+1}function Cn(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const ic={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return Cn(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Cn(n+1,2)},d(t,e){return Cn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Cn(t.getHours()%12||12,e.length)},H(t,e){return Cn(t.getHours(),e.length)},m(t,e){return Cn(t.getMinutes(),e.length)},s(t,e){return Cn(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return Cn(r,e.length)}},Gu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jP={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return ic.y(t,e)},Y:function(t,e,n,s){const r=J8(t,s),i=r>0?r:1-r;if(e==="YY"){const l=i%100;return Cn(l,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Cn(i,e.length)},R:function(t,e){const n=Q8(t);return Cn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Cn(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Cn(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Cn(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return ic.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return Cn(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=lce(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Cn(r,e.length)},I:function(t,e,n){const s=ice(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):Cn(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ic.d(t,e)},D:function(t,e,n){const s=ace(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Cn(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Cn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Cn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return Cn(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=Gu.noon:s===0?r=Gu.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=Gu.evening:s>=12?r=Gu.afternoon:s>=4?r=Gu.morning:r=Gu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return ic.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ic.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Cn(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):Cn(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ic.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ic.s(t,e)},S:function(t,e){return ic.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return SP(s);case"XXXX":case"XX":return jd(s);case"XXXXX":case"XXX":default:return jd(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return SP(s);case"xxxx":case"xx":return jd(s);case"xxxxx":case"xxx":default:return jd(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+CP(s,":");case"OOOO":default:return"GMT"+jd(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+CP(s,":");case"zzzz":default:return"GMT"+jd(s,":")}},t:function(t,e,n){const s=Math.trunc(+t/1e3);return Cn(s,e.length)},T:function(t,e,n){return Cn(+t,e.length)}};function CP(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),i=s%60;return i===0?n+String(r):n+String(r)+e+Cn(i,2)}function SP(t,e){return t%60===0?(t>0?"-":"+")+Cn(Math.abs(t)/60,2):jd(t,e)}function jd(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Cn(Math.trunc(s/60),2),i=Cn(s%60,2);return n+r+e+i}const TP=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},e7=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cce=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return TP(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",TP(s,e)).replace("{{time}}",e7(r,e))},dce={p:e7,P:cce},uce=/^D+$/,hce=/^Y+$/,mce=["D","DD","YY","YYYY"];function fce(t){return uce.test(t)}function pce(t){return hce.test(t)}function gce(t,e,n){const s=xce(t,e,n);if(console.warn(s),mce.includes(t))throw new RangeError(s)}function xce(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bce=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vce=/^'([^]*?)'?$/,wce=/''/g,_ce=/[a-zA-Z]/;function Kn(t,e,n){const s=ug(),r=n?.locale??s.locale??rce,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,d=Cs(t,n?.in);if(!Sd(d))throw new RangeError("Invalid time value");let u=e.match(bce).map(f=>{const p=f[0];if(p==="p"||p==="P"){const x=dce[p];return x(f,r.formatLong)}return f}).join("").match(yce).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const p=f[0];if(p==="'")return{isToken:!1,value:Ece(f)};if(jP[p])return{isToken:!0,value:f};if(p.match(_ce))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:f}});r.localize.preprocessor&&(u=r.localize.preprocessor(d,u));const h={firstWeekContainsDate:i,weekStartsOn:l,locale:r};return u.map(f=>{if(!f.isToken)return f.value;const p=f.value;(!n?.useAdditionalWeekYearTokens&&pce(p)||!n?.useAdditionalDayOfYearTokens&&fce(p))&&gce(p,e,String(t));const x=jP[p[0]];return x(d,p,r.localize,h)}).join("")}function Ece(t){const e=t.match(vce);return e?e[1].replace(wce,"'"):t}function Nce(t,e,n){const s=+Cs(t,n?.in),[r,i]=[+Cs(e.start,n?.in),+Cs(e.end,n?.in)].sort((l,d)=>l-d);return s>=r&&s<=i}function Vf(t,e){const n=()=>Ja(e?.in,NaN),r=Tce(t);let i;if(r.date){const h=kce(r.date,2);i=Ace(h.restDateString,h.year)}if(!i||isNaN(+i))return n();const l=+i;let d=0,u;if(r.time&&(d=Rce(r.time),isNaN(d)))return n();if(r.timezone){if(u=Dce(r.timezone),isNaN(u))return n()}else{const h=new Date(l+d),f=Cs(0,e?.in);return f.setFullYear(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate()),f.setHours(h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()),f}return Cs(l+d+u,e?.in)}const X0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},jce=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Cce=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Sce=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Tce(t){const e={},n=t.split(X0.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],X0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(X0.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const r=X0.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function kce(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?r:i*100,restDateString:t.slice((s[1]||s[2]).length)}}function Ace(t,e){if(e===null)return new Date(NaN);const n=t.match(jce);if(!n)return new Date(NaN);const s=!!n[4],r=yf(n[1]),i=yf(n[2])-1,l=yf(n[3]),d=yf(n[4]),u=yf(n[5])-1;if(s)return Oce(e,d,u)?Pce(e,d,u):new Date(NaN);{const h=new Date(0);return!Lce(e,i,l)||!Ice(e,r)?new Date(NaN):(h.setUTCFullYear(e,i,Math.max(r,l)),h)}}function yf(t){return t?parseInt(t):1}function Rce(t){const e=t.match(Cce);if(!e)return NaN;const n=p1(e[1]),s=p1(e[2]),r=p1(e[3]);return Vce(n,s,r)?n*K8+s*G8+r*1e3:NaN}function p1(t){return t&&parseFloat(t.replace(",","."))||0}function Dce(t){if(t==="Z")return 0;const e=t.match(Sce);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return Uce(s,r)?n*(s*K8+r*G8):NaN}function Pce(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const r=s.getUTCDay()||7,i=(e-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+i),s}const Mce=[31,null,31,30,31,30,31,31,30,31,30,31];function t7(t){return t%400===0||t%4===0&&t%100!==0}function Lce(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Mce[e]||(t7(t)?29:28))}function Ice(t,e){return e>=1&&e<=(t7(t)?366:365)}function Oce(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Vce(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Uce(t,e){return e>=0&&e<=59}function Bce(t,e,n){return ble(t,-e,n)}function n7(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=n7(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function yr(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=n7(t))&&(s&&(s+=" "),s+=e);return s}function $e(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Tn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function wi(t,e){const n=$e(t);return isNaN(e)?Tn(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function ji(t,e){const n=$e(t);if(isNaN(e))return Tn(t,NaN);if(!e)return n;const s=n.getDate(),r=Tn(t,n.getTime());r.setMonth(n.getMonth()+e+1,0);const i=r.getDate();return s>=i?r:(n.setFullYear(r.getFullYear(),r.getMonth(),s),n)}function Jj(t,e){const n=+$e(t);return Tn(t,n+e)}const s7=6048e5,Fce=864e5,nv=6e4,sv=36e5,$ce=1e3;function zce(t,e){return Jj(t,e*sv)}let Hce={};function cu(){return Hce}function Sl(t,e){const n=cu(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=$e(t),i=r.getDay(),l=(i<s?7:0)+i-s;return r.setDate(r.getDate()-l),r.setHours(0,0,0,0),r}function qh(t){return Sl(t,{weekStartsOn:1})}function r7(t){const e=$e(t),n=e.getFullYear(),s=Tn(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const r=qh(s),i=Tn(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=qh(i);return e.getTime()>=r.getTime()?n+1:e.getTime()>=l.getTime()?n:n-1}function eu(t){const e=$e(t);return e.setHours(0,0,0,0),e}function ky(t){const e=$e(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Wh(t,e){const n=eu(t),s=eu(e),r=+n-ky(n),i=+s-ky(s);return Math.round((r-i)/Fce)}function qce(t){const e=r7(t),n=Tn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),qh(n)}function u2(t,e){return Jj(t,e*nv)}function eC(t,e){const n=e*3;return ji(t,n)}function Wce(t,e){return Jj(t,e*1e3)}function Ay(t,e){const n=e*7;return wi(t,n)}function ml(t,e){return ji(t,e*12)}function kP(t){let e;return t.forEach(function(n){const s=$e(n);(e===void 0||e<s||isNaN(Number(s)))&&(e=s)}),e||new Date(NaN)}function AP(t){let e;return t.forEach(n=>{const s=$e(n);(!e||e>s||isNaN(+s))&&(e=s)}),e||new Date(NaN)}function Yce(t,e){const n=eu(t),s=eu(e);return+n==+s}function fl(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ry(t){if(!fl(t)&&typeof t!="number")return!1;const e=$e(t);return!isNaN(Number(e))}function Dy(t,e){const n=$e(t),s=$e(e),r=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return r*12+i}function Bd(t){const e=$e(t);return Math.trunc(e.getMonth()/3)+1}function Py(t,e){const n=$e(t),s=$e(e),r=n.getFullYear()-s.getFullYear(),i=Bd(n)-Bd(s);return r*4+i}function My(t,e){const n=$e(t),s=$e(e);return n.getFullYear()-s.getFullYear()}function Gce(t,e){const n=$e(t),s=$e(e),r=RP(n,s),i=Math.abs(Wh(n,s));n.setDate(n.getDate()-r*i);const l=+(RP(n,s)===-r),d=r*(i-l);return d===0?0:d}function RP(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function a7(t){const e=$e(t);return e.setHours(23,59,59,999),e}function i7(t){const e=$e(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function h2(t){const e=$e(t),n=e.getMonth(),s=n-n%3;return e.setMonth(s,1),e.setHours(0,0,0,0),e}function o7(t){const e=$e(t);return e.setDate(1),e.setHours(0,0,0,0),e}function l7(t){const e=$e(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function rv(t){const e=$e(t),n=Tn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Kce(t,e){const n=cu(),s=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,r=$e(t),i=r.getDay(),l=(i<s?-7:0)+6-(i-s);return r.setDate(r.getDate()+l),r.setHours(23,59,59,999),r}const Qce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xce=(t,e,n)=>{let s;const r=Qce[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function g1(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Zce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Jce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ede={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tde={date:g1({formats:Zce,defaultWidth:"full"}),time:g1({formats:Jce,defaultWidth:"full"}),dateTime:g1({formats:ede,defaultWidth:"full"})},nde={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sde=(t,e,n,s)=>nde[t];function bf(t){return(e,n)=>{const s=n?.context?String(n.context):"standalone";let r;if(s==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=n?.width?String(n.width):l;r=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=n?.width?String(n.width):t.defaultWidth;r=t.values[d]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(e):e;return r[i]}}const rde={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ade={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ide={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ode={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lde={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cde={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dde=(t,e)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ude={ordinalNumber:dde,era:bf({values:rde,defaultWidth:"wide"}),quarter:bf({values:ade,defaultWidth:"wide",argumentCallback:t=>t-1}),month:bf({values:ide,defaultWidth:"wide"}),day:bf({values:ode,defaultWidth:"wide"}),dayPeriod:bf({values:lde,defaultWidth:"wide",formattingValues:cde,defaultFormattingWidth:"wide"})};function vf(t){return(e,n={})=>{const s=n.width,r=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],i=e.match(r);if(!i)return null;const l=i[0],d=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(d)?mde(d,p=>p.test(l)):hde(d,p=>p.test(l));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const f=e.slice(l.length);return{value:h,rest:f}}}function hde(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function mde(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function fde(t){return(e,n={})=>{const s=e.match(t.matchPattern);if(!s)return null;const r=s[0],i=e.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;const d=e.slice(r.length);return{value:l,rest:d}}}const pde=/^(\d+)(th|st|nd|rd)?/i,gde=/\d+/i,xde={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yde={any:[/^b/i,/^(a|c)/i]},bde={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vde={any:[/1/i,/2/i,/3/i,/4/i]},wde={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_de={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ede={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nde={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jde={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Cde={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Sde={ordinalNumber:fde({matchPattern:pde,parsePattern:gde,valueCallback:t=>parseInt(t,10)}),era:vf({matchPatterns:xde,defaultMatchWidth:"wide",parsePatterns:yde,defaultParseWidth:"any"}),quarter:vf({matchPatterns:bde,defaultMatchWidth:"wide",parsePatterns:vde,defaultParseWidth:"any",valueCallback:t=>t+1}),month:vf({matchPatterns:wde,defaultMatchWidth:"wide",parsePatterns:_de,defaultParseWidth:"any"}),day:vf({matchPatterns:Ede,defaultMatchWidth:"wide",parsePatterns:Nde,defaultParseWidth:"any"}),dayPeriod:vf({matchPatterns:jde,defaultMatchWidth:"any",parsePatterns:Cde,defaultParseWidth:"any"})},c7={code:"en-US",formatDistance:Xce,formatLong:tde,formatRelative:sde,localize:ude,match:Sde,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Tde(t){const e=$e(t);return Wh(e,rv(e))+1}function tC(t){const e=$e(t),n=+qh(e)-+qce(e);return Math.round(n/s7)+1}function nC(t,e){const n=$e(t),s=n.getFullYear(),r=cu(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=Tn(t,0);l.setFullYear(s+1,0,i),l.setHours(0,0,0,0);const d=Sl(l,e),u=Tn(t,0);u.setFullYear(s,0,i),u.setHours(0,0,0,0);const h=Sl(u,e);return n.getTime()>=d.getTime()?s+1:n.getTime()>=h.getTime()?s:s-1}function kde(t,e){const n=cu(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=nC(t,e),i=Tn(t,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),Sl(i,e)}function d7(t,e){const n=$e(t),s=+Sl(n,e)-+kde(n,e);return Math.round(s/s7)+1}function Sn(t,e){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return n+s}const oc={y(t,e){const n=t.getFullYear(),s=n>0?n:1-n;return Sn(e==="yy"?s%100:s,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Sn(n+1,2)},d(t,e){return Sn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Sn(t.getHours()%12||12,e.length)},H(t,e){return Sn(t.getHours(),e.length)},m(t,e){return Sn(t.getMinutes(),e.length)},s(t,e){return Sn(t.getSeconds(),e.length)},S(t,e){const n=e.length,s=t.getMilliseconds(),r=Math.trunc(s*Math.pow(10,n-3));return Sn(r,e.length)}},Ku={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DP={G:function(t,e,n){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const s=t.getFullYear(),r=s>0?s:1-s;return n.ordinalNumber(r,{unit:"year"})}return oc.y(t,e)},Y:function(t,e,n,s){const r=nC(t,s),i=r>0?r:1-r;if(e==="YY"){const l=i%100;return Sn(l,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Sn(i,e.length)},R:function(t,e){const n=r7(t);return Sn(n,e.length)},u:function(t,e){const n=t.getFullYear();return Sn(n,e.length)},Q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Sn(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,n){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Sn(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,n){const s=t.getMonth();switch(e){case"M":case"MM":return oc.M(t,e);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,n){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return Sn(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,n,s){const r=d7(t,s);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Sn(r,e.length)},I:function(t,e,n){const s=tC(t);return e==="Io"?n.ordinalNumber(s,{unit:"week"}):Sn(s,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):oc.d(t,e)},D:function(t,e,n){const s=Tde(t);return e==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Sn(s,e.length)},E:function(t,e,n){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Sn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,s){const r=t.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Sn(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const s=t.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return Sn(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const s=t.getHours();let r;switch(s===12?r=Ku.noon:s===0?r=Ku.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const s=t.getHours();let r;switch(s>=17?r=Ku.evening:s>=12?r=Ku.afternoon:s>=4?r=Ku.morning:r=Ku.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return oc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):oc.H(t,e)},K:function(t,e,n){const s=t.getHours()%12;return e==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Sn(s,e.length)},k:function(t,e,n){let s=t.getHours();return s===0&&(s=24),e==="ko"?n.ordinalNumber(s,{unit:"hour"}):Sn(s,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):oc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):oc.s(t,e)},S:function(t,e){return oc.S(t,e)},X:function(t,e,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return MP(s);case"XXXX":case"XX":return Cd(s);case"XXXXX":case"XXX":default:return Cd(s,":")}},x:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"x":return MP(s);case"xxxx":case"xx":return Cd(s);case"xxxxx":case"xxx":default:return Cd(s,":")}},O:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+PP(s,":");case"OOOO":default:return"GMT"+Cd(s,":")}},z:function(t,e,n){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+PP(s,":");case"zzzz":default:return"GMT"+Cd(s,":")}},t:function(t,e,n){const s=Math.trunc(t.getTime()/1e3);return Sn(s,e.length)},T:function(t,e,n){const s=t.getTime();return Sn(s,e.length)}};function PP(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Math.trunc(s/60),i=s%60;return i===0?n+String(r):n+String(r)+e+Sn(i,2)}function MP(t,e){return t%60===0?(t>0?"-":"+")+Sn(Math.abs(t)/60,2):Cd(t,e)}function Cd(t,e=""){const n=t>0?"-":"+",s=Math.abs(t),r=Sn(Math.trunc(s/60),2),i=Sn(s%60,2);return n+r+e+i}const LP=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},u7=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ade=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],r=n[2];if(!r)return LP(t,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",LP(s,e)).replace("{{time}}",u7(r,e))},Ly={p:u7,P:Ade},Rde=/^D+$/,Dde=/^Y+$/,Pde=["D","DD","YY","YYYY"];function h7(t){return Rde.test(t)}function m7(t){return Dde.test(t)}function m2(t,e,n){const s=Mde(t,e,n);if(console.warn(s),Pde.includes(t))throw new RangeError(s)}function Mde(t,e,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Lde=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ide=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ode=/^'([^]*?)'?$/,Vde=/''/g,Ude=/[a-zA-Z]/;function IP(t,e,n){const s=cu(),r=n?.locale??s.locale??c7,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,d=$e(t);if(!Ry(d))throw new RangeError("Invalid time value");let u=e.match(Ide).map(f=>{const p=f[0];if(p==="p"||p==="P"){const x=Ly[p];return x(f,r.formatLong)}return f}).join("").match(Lde).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const p=f[0];if(p==="'")return{isToken:!1,value:Bde(f)};if(DP[p])return{isToken:!0,value:f};if(p.match(Ude))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:f}});r.localize.preprocessor&&(u=r.localize.preprocessor(d,u));const h={firstWeekContainsDate:i,weekStartsOn:l,locale:r};return u.map(f=>{if(!f.isToken)return f.value;const p=f.value;(!n?.useAdditionalWeekYearTokens&&m7(p)||!n?.useAdditionalDayOfYearTokens&&h7(p))&&m2(p,e,String(t));const x=DP[p[0]];return x(d,p,r.localize,h)}).join("")}function Bde(t){const e=t.match(Ode);return e?e[1].replace(Vde,"'"):t}function OP(t){return $e(t).getDate()}function Fde(t){return $e(t).getDay()}function $de(t){const e=$e(t),n=e.getFullYear(),s=e.getMonth(),r=Tn(t,0);return r.setFullYear(n,s+1,0),r.setHours(0,0,0,0),r.getDate()}function zde(){return Object.assign({},cu())}function go(t){return $e(t).getHours()}function Hde(t){let n=$e(t).getDay();return n===0&&(n=7),n}function xo(t){return $e(t).getMinutes()}function Wr(t){return $e(t).getMonth()}function pl(t){return $e(t).getSeconds()}function f2(t){return $e(t).getTime()}function Lt(t){return $e(t).getFullYear()}function Uc(t,e){const n=$e(t),s=$e(e);return n.getTime()>s.getTime()}function tu(t,e){const n=$e(t),s=$e(e);return+n<+s}function qde(t,e){const n=$e(t),s=$e(e);return+n==+s}function Wde(t,e){const n=e instanceof Date?Tn(e,0):new e(0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}const Yde=10;class f7{subPriority=0;validate(e,n){return!0}}class Gde extends f7{constructor(e,n,s,r,i){super(),this.value=e,this.validateValue=n,this.setValue=s,this.priority=r,i&&(this.subPriority=i)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,s){return this.setValue(e,n,this.value,s)}}class Kde extends f7{priority=Yde;subPriority=-1;set(e,n){return n.timestampIsSet?e:Tn(e,Wde(e,Date))}}class bn{run(e,n,s,r){const i=this.parse(e,n,s,r);return i?{setter:new Gde(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(e,n,s){return!0}}class Qde extends bn{priority=140;parse(e,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});case"GGGG":default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,n,s){return n.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const Es={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},to={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ns(t,e){return t&&{value:e(t.value),rest:t.rest}}function as(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function no(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const s=n[1]==="+"?1:-1,r=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,l=n[5]?parseInt(n[5],10):0;return{value:s*(r*sv+i*nv+l*$ce),rest:e.slice(n[0].length)}}function p7(t){return as(Es.anyDigitsSigned,t)}function xs(t,e){switch(t){case 1:return as(Es.singleDigit,e);case 2:return as(Es.twoDigits,e);case 3:return as(Es.threeDigits,e);case 4:return as(Es.fourDigits,e);default:return as(new RegExp("^\\d{1,"+t+"}"),e)}}function Iy(t,e){switch(t){case 1:return as(Es.singleDigitSigned,e);case 2:return as(Es.twoDigitsSigned,e);case 3:return as(Es.threeDigitsSigned,e);case 4:return as(Es.fourDigitsSigned,e);default:return as(new RegExp("^-?\\d{1,"+t+"}"),e)}}function sC(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function g7(t,e){const n=e>0,s=n?e:1-e;let r;if(s<=50)r=t||100;else{const i=s+50,l=Math.trunc(i/100)*100,d=t>=i%100;r=t+l-(d?100:0)}return n?r:1-r}function x7(t){return t%400===0||t%4===0&&t%100!==0}class Xde extends bn{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,n,s){const r=i=>({year:i,isTwoDigitYear:n==="yy"});switch(n){case"y":return Ns(xs(4,e),r);case"yo":return Ns(s.ordinalNumber(e,{unit:"year"}),r);default:return Ns(xs(n.length,e),r)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,s){const r=e.getFullYear();if(s.isTwoDigitYear){const l=g7(s.year,r);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const i=!("era"in n)||n.era===1?s.year:1-s.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class Zde extends bn{priority=130;parse(e,n,s){const r=i=>({year:i,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Ns(xs(4,e),r);case"Yo":return Ns(s.ordinalNumber(e,{unit:"year"}),r);default:return Ns(xs(n.length,e),r)}}validate(e,n){return n.isTwoDigitYear||n.year>0}set(e,n,s,r){const i=nC(e,r);if(s.isTwoDigitYear){const d=g7(s.year,i);return e.setFullYear(d,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Sl(e,r)}const l=!("era"in n)||n.era===1?s.year:1-s.year;return e.setFullYear(l,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),Sl(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Jde extends bn{priority=130;parse(e,n){return Iy(n==="R"?4:n.length,e)}set(e,n,s){const r=Tn(e,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),qh(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class eue extends bn{priority=130;parse(e,n){return Iy(n==="u"?4:n.length,e)}set(e,n,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class tue extends bn{priority=120;parse(e,n,s){switch(n){case"Q":case"QQ":return xs(n.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=1&&n<=4}set(e,n,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class nue extends bn{priority=120;parse(e,n,s){switch(n){case"q":case"qq":return xs(n.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=1&&n<=4}set(e,n,s){return e.setMonth((s-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class sue extends bn{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,n,s){const r=i=>i-1;switch(n){case"M":return Ns(as(Es.month,e),r);case"MM":return Ns(xs(2,e),r);case"Mo":return Ns(s.ordinalNumber(e,{unit:"month"}),r);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}}class rue extends bn{priority=110;parse(e,n,s){const r=i=>i-1;switch(n){case"L":return Ns(as(Es.month,e),r);case"LL":return Ns(xs(2,e),r);case"Lo":return Ns(s.ordinalNumber(e,{unit:"month"}),r);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function aue(t,e,n){const s=$e(t),r=d7(s,n)-e;return s.setDate(s.getDate()-r*7),s}class iue extends bn{priority=100;parse(e,n,s){switch(n){case"w":return as(Es.week,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return xs(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,s,r){return Sl(aue(e,s,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function oue(t,e){const n=$e(t),s=tC(n)-e;return n.setDate(n.getDate()-s*7),n}class lue extends bn{priority=100;parse(e,n,s){switch(n){case"I":return as(Es.week,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return xs(n.length,e)}}validate(e,n){return n>=1&&n<=53}set(e,n,s){return qh(oue(e,s))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const cue=[31,28,31,30,31,30,31,31,30,31,30,31],due=[31,29,31,30,31,30,31,31,30,31,30,31];class uue extends bn{priority=90;subPriority=1;parse(e,n,s){switch(n){case"d":return as(Es.date,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return xs(n.length,e)}}validate(e,n){const s=e.getFullYear(),r=x7(s),i=e.getMonth();return r?n>=1&&n<=due[i]:n>=1&&n<=cue[i]}set(e,n,s){return e.setDate(s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class hue extends bn{priority=90;subpriority=1;parse(e,n,s){switch(n){case"D":case"DD":return as(Es.dayOfYear,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return xs(n.length,e)}}validate(e,n){const s=e.getFullYear();return x7(s)?n>=1&&n<=366:n>=1&&n<=365}set(e,n,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function rC(t,e,n){const s=cu(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,i=$e(t),l=i.getDay(),u=(e%7+7)%7,h=7-r,f=e<0||e>6?e-(l+h)%7:(u+h)%7-(l+h)%7;return wi(i,f)}class mue extends bn{priority=90;parse(e,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,r){return e=rC(e,s,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class fue extends bn{priority=90;parse(e,n,s,r){const i=l=>{const d=Math.floor((l-1)/7)*7;return(l+r.weekStartsOn+6)%7+d};switch(n){case"e":case"ee":return Ns(xs(n.length,e),i);case"eo":return Ns(s.ordinalNumber(e,{unit:"day"}),i);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,r){return e=rC(e,s,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class pue extends bn{priority=90;parse(e,n,s,r){const i=l=>{const d=Math.floor((l-1)/7)*7;return(l+r.weekStartsOn+6)%7+d};switch(n){case"c":case"cc":return Ns(xs(n.length,e),i);case"co":return Ns(s.ordinalNumber(e,{unit:"day"}),i);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,n){return n>=0&&n<=6}set(e,n,s,r){return e=rC(e,s,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function gue(t,e){const n=$e(t),s=Hde(n),r=e-s;return wi(n,r)}class xue extends bn{priority=90;parse(e,n,s){const r=i=>i===0?7:i;switch(n){case"i":case"ii":return xs(n.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return Ns(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Ns(s.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Ns(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Ns(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,n){return n>=1&&n<=7}set(e,n,s){return e=gue(e,s),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class yue extends bn{priority=80;parse(e,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(sC(s),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class bue extends bn{priority=80;parse(e,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(sC(s),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class vue extends bn{priority=80;parse(e,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,n,s){return e.setHours(sC(s),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class wue extends bn{priority=70;parse(e,n,s){switch(n){case"h":return as(Es.hour12h,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return xs(n.length,e)}}validate(e,n){return n>=1&&n<=12}set(e,n,s){const r=e.getHours()>=12;return r&&s<12?e.setHours(s+12,0,0,0):!r&&s===12?e.setHours(0,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class _ue extends bn{priority=70;parse(e,n,s){switch(n){case"H":return as(Es.hour23h,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return xs(n.length,e)}}validate(e,n){return n>=0&&n<=23}set(e,n,s){return e.setHours(s,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class Eue extends bn{priority=70;parse(e,n,s){switch(n){case"K":return as(Es.hour11h,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return xs(n.length,e)}}validate(e,n){return n>=0&&n<=11}set(e,n,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class Nue extends bn{priority=70;parse(e,n,s){switch(n){case"k":return as(Es.hour24h,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return xs(n.length,e)}}validate(e,n){return n>=1&&n<=24}set(e,n,s){const r=s<=24?s%24:s;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class jue extends bn{priority=60;parse(e,n,s){switch(n){case"m":return as(Es.minute,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return xs(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,s){return e.setMinutes(s,0,0),e}incompatibleTokens=["t","T"]}class Cue extends bn{priority=50;parse(e,n,s){switch(n){case"s":return as(Es.second,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return xs(n.length,e)}}validate(e,n){return n>=0&&n<=59}set(e,n,s){return e.setSeconds(s,0),e}incompatibleTokens=["t","T"]}class Sue extends bn{priority=30;parse(e,n){const s=r=>Math.trunc(r*Math.pow(10,-n.length+3));return Ns(xs(n.length,e),s)}set(e,n,s){return e.setMilliseconds(s),e}incompatibleTokens=["t","T"]}class Tue extends bn{priority=10;parse(e,n){switch(n){case"X":return no(to.basicOptionalMinutes,e);case"XX":return no(to.basic,e);case"XXXX":return no(to.basicOptionalSeconds,e);case"XXXXX":return no(to.extendedOptionalSeconds,e);case"XXX":default:return no(to.extended,e)}}set(e,n,s){return n.timestampIsSet?e:Tn(e,e.getTime()-ky(e)-s)}incompatibleTokens=["t","T","x"]}class kue extends bn{priority=10;parse(e,n){switch(n){case"x":return no(to.basicOptionalMinutes,e);case"xx":return no(to.basic,e);case"xxxx":return no(to.basicOptionalSeconds,e);case"xxxxx":return no(to.extendedOptionalSeconds,e);case"xxx":default:return no(to.extended,e)}}set(e,n,s){return n.timestampIsSet?e:Tn(e,e.getTime()-ky(e)-s)}incompatibleTokens=["t","T","X"]}class Aue extends bn{priority=40;parse(e){return p7(e)}set(e,n,s){return[Tn(e,s*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Rue extends bn{priority=20;parse(e){return p7(e)}set(e,n,s){return[Tn(e,s),{timestampIsSet:!0}]}incompatibleTokens="*"}const Due={G:new Qde,y:new Xde,Y:new Zde,R:new Jde,u:new eue,Q:new tue,q:new nue,M:new sue,L:new rue,w:new iue,I:new lue,d:new uue,D:new hue,E:new mue,e:new fue,c:new pue,i:new xue,a:new yue,b:new bue,B:new vue,h:new wue,H:new _ue,K:new Eue,k:new Nue,m:new jue,s:new Cue,S:new Sue,X:new Tue,x:new kue,t:new Aue,T:new Rue},Pue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Mue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lue=/^'([^]*?)'?$/,Iue=/''/g,Oue=/\S/,Vue=/[a-zA-Z]/;function x1(t,e,n,s){const r=zde(),i=s?.locale??r.locale??c7,l=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,d=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0;if(e==="")return t===""?$e(n):Tn(n,NaN);const u={firstWeekContainsDate:l,weekStartsOn:d,locale:i},h=[new Kde],f=e.match(Mue).map(j=>{const v=j[0];if(v in Ly){const T=Ly[v];return T(j,i.formatLong)}return j}).join("").match(Pue),p=[];for(let j of f){!s?.useAdditionalWeekYearTokens&&m7(j)&&m2(j,e,t),!s?.useAdditionalDayOfYearTokens&&h7(j)&&m2(j,e,t);const v=j[0],T=Due[v];if(T){const{incompatibleTokens:P}=T;if(Array.isArray(P)){const C=p.find(M=>P.includes(M.token)||M.token===v);if(C)throw new RangeError(`The format string mustn't contain \`${C.fullToken}\` and \`${j}\` at the same time`)}else if(T.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${j}\` and any other token at the same time`);p.push({token:v,fullToken:j});const A=T.run(t,j,i.match,u);if(!A)return Tn(n,NaN);h.push(A.setter),t=A.rest}else{if(v.match(Vue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");if(j==="''"?j="'":v==="'"&&(j=Uue(j)),t.indexOf(j)===0)t=t.slice(j.length);else return Tn(n,NaN)}}if(t.length>0&&Oue.test(t))return Tn(n,NaN);const x=h.map(j=>j.priority).sort((j,v)=>v-j).filter((j,v,T)=>T.indexOf(j)===v).map(j=>h.filter(v=>v.priority===j).sort((v,T)=>T.subPriority-v.subPriority)).map(j=>j[0]);let b=$e(n);if(isNaN(b.getTime()))return Tn(n,NaN);const _={};for(const j of x){if(!j.validate(b,u))return Tn(n,NaN);const v=j.set(b,_,u);Array.isArray(v)?(b=v[0],Object.assign(_,v[1])):b=v}return Tn(n,b)}function Uue(t){return t.match(Lue)[1].replace(Iue,"'")}function Bue(t,e){const n=$e(t),s=$e(e);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Fue(t,e){const n=h2(t),s=h2(e);return+n==+s}function $ue(t,e){const n=$e(t),s=$e(e);return n.getFullYear()===s.getFullYear()}function Lp(t,e){const n=+$e(t),[s,r]=[+$e(e.start),+$e(e.end)].sort((i,l)=>i-l);return n>=s&&n<=r}function zue(t,e){return wi(t,-1)}function Hue(t,e){const s=Gue(t);let r;if(s.date){const u=Kue(s.date,2);r=Que(u.restDateString,u.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const i=r.getTime();let l=0,d;if(s.time&&(l=Xue(s.time),isNaN(l)))return new Date(NaN);if(s.timezone){if(d=Zue(s.timezone),isNaN(d))return new Date(NaN)}else{const u=new Date(i+l),h=new Date(0);return h.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),h.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),h}return new Date(i+l+d)}const Z0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},que=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Wue=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Yue=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Gue(t){const e={},n=t.split(Z0.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],Z0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Z0.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const r=Z0.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function Kue(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?r:i*100,restDateString:t.slice((s[1]||s[2]).length)}}function Que(t,e){if(e===null)return new Date(NaN);const n=t.match(que);if(!n)return new Date(NaN);const s=!!n[4],r=wf(n[1]),i=wf(n[2])-1,l=wf(n[3]),d=wf(n[4]),u=wf(n[5])-1;if(s)return she(e,d,u)?Jue(e,d,u):new Date(NaN);{const h=new Date(0);return!the(e,i,l)||!nhe(e,r)?new Date(NaN):(h.setUTCFullYear(e,i,Math.max(r,l)),h)}}function wf(t){return t?parseInt(t):1}function Xue(t){const e=t.match(Wue);if(!e)return NaN;const n=y1(e[1]),s=y1(e[2]),r=y1(e[3]);return rhe(n,s,r)?n*sv+s*nv+r*1e3:NaN}function y1(t){return t&&parseFloat(t.replace(",","."))||0}function Zue(t){if(t==="Z")return 0;const e=t.match(Yue);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return ahe(s,r)?n*(s*sv+r*nv):NaN}function Jue(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const r=s.getUTCDay()||7,i=(e-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+i),s}const ehe=[31,null,31,30,31,30,31,31,30,31,30,31];function y7(t){return t%400===0||t%4===0&&t%100!==0}function the(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(ehe[e]||(y7(t)?29:28))}function nhe(t,e){return e>=1&&e<=(y7(t)?366:365)}function she(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function rhe(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function ahe(t,e){return e>=0&&e<=59}function _a(t,e){const n=$e(t),s=n.getFullYear(),r=n.getDate(),i=Tn(t,0);i.setFullYear(s,e,15),i.setHours(0,0,0,0);const l=$de(i);return n.setMonth(e,Math.min(r,l)),n}function ihe(t,e){let n=$e(t);return isNaN(+n)?Tn(t,NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=_a(n,e.month)),e.date!=null&&n.setDate(e.date),e.hours!=null&&n.setHours(e.hours),e.minutes!=null&&n.setMinutes(e.minutes),e.seconds!=null&&n.setSeconds(e.seconds),e.milliseconds!=null&&n.setMilliseconds(e.milliseconds),n)}function Dx(t,e){const n=$e(t);return n.setHours(e),n}function Px(t,e){const n=$e(t);return n.setMinutes(e),n}function ah(t,e){const n=$e(t),s=Math.trunc(n.getMonth()/3)+1,r=e-s;return _a(n,n.getMonth()+r*3)}function Mx(t,e){const n=$e(t);return n.setSeconds(e),n}function Xi(t,e){const n=$e(t);return isNaN(+n)?Tn(t,NaN):(n.setFullYear(e),n)}function Fd(t,e){return ji(t,-e)}function b7(t,e){return eC(t,-1)}function VP(t,e){return Ay(t,-1)}function Yh(t,e){return ml(t,-e)}function av(){return typeof window<"u"}function mm(t){return v7(t)?(t.nodeName||"").toLowerCase():"#document"}function Sa(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function To(t){var e;return(e=(v7(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function v7(t){return av()?t instanceof Node||t instanceof Sa(t).Node:!1}function Yr(t){return av()?t instanceof Element||t instanceof Sa(t).Element:!1}function _o(t){return av()?t instanceof HTMLElement||t instanceof Sa(t).HTMLElement:!1}function UP(t){return!av()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Sa(t).ShadowRoot}const ohe=new Set(["inline","contents"]);function hg(t){const{overflow:e,overflowX:n,overflowY:s,display:r}=ei(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!ohe.has(r)}const lhe=new Set(["table","td","th"]);function che(t){return lhe.has(mm(t))}const dhe=[":popover-open",":modal"];function iv(t){return dhe.some(e=>{try{return t.matches(e)}catch{return!1}})}const uhe=["transform","translate","scale","rotate","perspective"],hhe=["transform","translate","scale","rotate","perspective","filter"],mhe=["paint","layout","strict","content"];function aC(t){const e=iC(),n=Yr(t)?ei(t):t;return uhe.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||hhe.some(s=>(n.willChange||"").includes(s))||mhe.some(s=>(n.contain||"").includes(s))}function fhe(t){let e=Bc(t);for(;_o(e)&&!Gh(e);){if(aC(e))return e;if(iv(e))return null;e=Bc(e)}return null}function iC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const phe=new Set(["html","body","#document"]);function Gh(t){return phe.has(mm(t))}function ei(t){return Sa(t).getComputedStyle(t)}function ov(t){return Yr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Bc(t){if(mm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||UP(t)&&t.host||To(t);return UP(e)?e.host:e}function w7(t){const e=Bc(t);return Gh(e)?t.ownerDocument?t.ownerDocument.body:t.body:_o(e)&&hg(e)?e:w7(e)}function Ip(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=w7(t),i=r===((s=t.ownerDocument)==null?void 0:s.body),l=Sa(r);if(i){const d=p2(l);return e.concat(l,l.visualViewport||[],hg(r)?r:[],d&&n?Ip(d):[])}return e.concat(r,Ip(r,[],n))}function p2(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const Kh=Math.min,$d=Math.max,Oy=Math.round,J0=Math.floor,yo=t=>({x:t,y:t}),ghe={left:"right",right:"left",bottom:"top",top:"bottom"},xhe={start:"end",end:"start"};function yhe(t,e,n){return $d(t,Kh(e,n))}function lv(t,e){return typeof t=="function"?t(e):t}function Qh(t){return t.split("-")[0]}function mg(t){return t.split("-")[1]}function bhe(t){return t==="x"?"y":"x"}function oC(t){return t==="y"?"height":"width"}const vhe=new Set(["top","bottom"]);function Pd(t){return vhe.has(Qh(t))?"y":"x"}function lC(t){return bhe(Pd(t))}function whe(t,e,n){n===void 0&&(n=!1);const s=mg(t),r=lC(t),i=oC(r);let l=r==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=Vy(l)),[l,Vy(l)]}function _he(t){const e=Vy(t);return[g2(t),e,g2(e)]}function g2(t){return t.replace(/start|end/g,e=>xhe[e])}const BP=["left","right"],FP=["right","left"],Ehe=["top","bottom"],Nhe=["bottom","top"];function jhe(t,e,n){switch(t){case"top":case"bottom":return n?e?FP:BP:e?BP:FP;case"left":case"right":return e?Ehe:Nhe;default:return[]}}function Che(t,e,n,s){const r=mg(t);let i=jhe(Qh(t),n==="start",s);return r&&(i=i.map(l=>l+"-"+r),e&&(i=i.concat(i.map(g2)))),i}function Vy(t){return t.replace(/left|right|bottom|top/g,e=>ghe[e])}function She(t){return{top:0,right:0,bottom:0,left:0,...t}}function _7(t){return typeof t!="number"?She(t):{top:t,right:t,bottom:t,left:t}}function Uy(t){const{x:e,y:n,width:s,height:r}=t;return{width:s,height:r,top:n,left:e,right:e+s,bottom:n+r,x:e,y:n}}var The=typeof document<"u",khe=function(){},By=The?y.useLayoutEffect:khe;const Ahe={...S2},Rhe=Ahe.useInsertionEffect,Dhe=Rhe||(t=>t());function Phe(t){const e=y.useRef(()=>{});return Dhe(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e.current==null?void 0:e.current(...s)},[])}function $P(t,e,n){let{reference:s,floating:r}=t;const i=Pd(e),l=lC(e),d=oC(l),u=Qh(e),h=i==="y",f=s.x+s.width/2-r.width/2,p=s.y+s.height/2-r.height/2,x=s[d]/2-r[d]/2;let b;switch(u){case"top":b={x:f,y:s.y-r.height};break;case"bottom":b={x:f,y:s.y+s.height};break;case"right":b={x:s.x+s.width,y:p};break;case"left":b={x:s.x-r.width,y:p};break;default:b={x:s.x,y:s.y}}switch(mg(e)){case"start":b[l]-=x*(n&&h?-1:1);break;case"end":b[l]+=x*(n&&h?-1:1);break}return b}const Mhe=async(t,e,n)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:l}=n,d=i.filter(Boolean),u=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:f,y:p}=$P(h,s,u),x=s,b={},_=0;for(let j=0;j<d.length;j++){const{name:v,fn:T}=d[j],{x:P,y:A,data:C,reset:M}=await T({x:f,y:p,initialPlacement:s,placement:x,strategy:r,middlewareData:b,rects:h,platform:l,elements:{reference:t,floating:e}});f=P??f,p=A??p,b={...b,[v]:{...b[v],...C}},M&&_<=50&&(_++,typeof M=="object"&&(M.placement&&(x=M.placement),M.rects&&(h=M.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):M.rects),{x:f,y:p}=$P(h,x,u)),j=-1)}return{x:f,y:p,placement:x,strategy:r,middlewareData:b}};async function Lhe(t,e){var n;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:l,elements:d,strategy:u}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:x=!1,padding:b=0}=lv(e,t),_=_7(b),v=d[x?p==="floating"?"reference":"floating":p],T=Uy(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(d.floating)),boundary:h,rootBoundary:f,strategy:u})),P=p==="floating"?{x:s,y:r,width:l.floating.width,height:l.floating.height}:l.reference,A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d.floating)),C=await(i.isElement==null?void 0:i.isElement(A))?await(i.getScale==null?void 0:i.getScale(A))||{x:1,y:1}:{x:1,y:1},M=Uy(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:P,offsetParent:A,strategy:u}):P);return{top:(T.top-M.top+_.top)/C.y,bottom:(M.bottom-T.bottom+_.bottom)/C.y,left:(T.left-M.left+_.left)/C.x,right:(M.right-T.right+_.right)/C.x}}const Ihe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:r,rects:i,platform:l,elements:d,middlewareData:u}=e,{element:h,padding:f=0}=lv(t,e)||{};if(h==null)return{};const p=_7(f),x={x:n,y:s},b=lC(r),_=oC(b),j=await l.getDimensions(h),v=b==="y",T=v?"top":"left",P=v?"bottom":"right",A=v?"clientHeight":"clientWidth",C=i.reference[_]+i.reference[b]-x[b]-i.floating[_],M=x[b]-i.reference[b],L=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let k=L?L[A]:0;(!k||!await(l.isElement==null?void 0:l.isElement(L)))&&(k=d.floating[A]||i.floating[_]);const R=C/2-M/2,S=k/2-j[_]/2-1,O=Kh(p[T],S),I=Kh(p[P],S),F=O,$=k-j[_]-I,Q=k/2-j[_]/2+R,G=yhe(F,Q,$),B=!u.arrow&&mg(r)!=null&&Q!==G&&i.reference[_]/2-(Q<F?O:I)-j[_]/2<0,z=B?Q<F?Q-F:Q-$:0;return{[b]:x[b]+z,data:{[b]:G,centerOffset:Q-G-z,...B&&{alignmentOffset:z}},reset:B}}}),Ohe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:r,middlewareData:i,rects:l,initialPlacement:d,platform:u,elements:h}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:x,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:j=!0,...v}=lv(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const T=Qh(r),P=Pd(d),A=Qh(d)===d,C=await(u.isRTL==null?void 0:u.isRTL(h.floating)),M=x||(A||!j?[Vy(d)]:_he(d)),L=_!=="none";!x&&L&&M.push(...Che(d,j,_,C));const k=[d,...M],R=await Lhe(e,v),S=[];let O=((s=i.flip)==null?void 0:s.overflows)||[];if(f&&S.push(R[T]),p){const Q=whe(r,l,C);S.push(R[Q[0]],R[Q[1]])}if(O=[...O,{placement:r,overflows:S}],!S.every(Q=>Q<=0)){var I,F;const Q=(((I=i.flip)==null?void 0:I.index)||0)+1,G=k[Q];if(G&&(!(p==="alignment"?P!==Pd(G):!1)||O.every(q=>Pd(q.placement)===P?q.overflows[0]>0:!0)))return{data:{index:Q,overflows:O},reset:{placement:G}};let B=(F=O.filter(z=>z.overflows[0]<=0).sort((z,q)=>z.overflows[1]-q.overflows[1])[0])==null?void 0:F.placement;if(!B)switch(b){case"bestFit":{var $;const z=($=O.filter(q=>{if(L){const Z=Pd(q.placement);return Z===P||Z==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Z=>Z>0).reduce((Z,ee)=>Z+ee,0)]).sort((q,Z)=>q[1]-Z[1])[0])==null?void 0:$[0];z&&(B=z);break}case"initialPlacement":B=d;break}if(r!==B)return{reset:{placement:B}}}return{}}}},Vhe=new Set(["left","top"]);async function Uhe(t,e){const{placement:n,platform:s,elements:r}=t,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),l=Qh(n),d=mg(n),u=Pd(n)==="y",h=Vhe.has(l)?-1:1,f=i&&u?-1:1,p=lv(e,t);let{mainAxis:x,crossAxis:b,alignmentAxis:_}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return d&&typeof _=="number"&&(b=d==="end"?_*-1:_),u?{x:b*f,y:x*h}:{x:x*h,y:b*f}}const Bhe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:r,y:i,placement:l,middlewareData:d}=e,u=await Uhe(e,t);return l===((n=d.offset)==null?void 0:n.placement)&&(s=d.arrow)!=null&&s.alignmentOffset?{}:{x:r+u.x,y:i+u.y,data:{...u,placement:l}}}}};function E7(t){const e=ei(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=_o(t),i=r?t.offsetWidth:n,l=r?t.offsetHeight:s,d=Oy(n)!==i||Oy(s)!==l;return d&&(n=i,s=l),{width:n,height:s,$:d}}function cC(t){return Yr(t)?t:t.contextElement}function Th(t){const e=cC(t);if(!_o(e))return yo(1);const n=e.getBoundingClientRect(),{width:s,height:r,$:i}=E7(e);let l=(i?Oy(n.width):n.width)/s,d=(i?Oy(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!d||!Number.isFinite(d))&&(d=1),{x:l,y:d}}const Fhe=yo(0);function N7(t){const e=Sa(t);return!iC()||!e.visualViewport?Fhe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $he(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Sa(t)?!1:e}function nu(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=cC(t);let l=yo(1);e&&(s?Yr(s)&&(l=Th(s)):l=Th(t));const d=$he(i,n,s)?N7(i):yo(0);let u=(r.left+d.x)/l.x,h=(r.top+d.y)/l.y,f=r.width/l.x,p=r.height/l.y;if(i){const x=Sa(i),b=s&&Yr(s)?Sa(s):s;let _=x,j=p2(_);for(;j&&s&&b!==_;){const v=Th(j),T=j.getBoundingClientRect(),P=ei(j),A=T.left+(j.clientLeft+parseFloat(P.paddingLeft))*v.x,C=T.top+(j.clientTop+parseFloat(P.paddingTop))*v.y;u*=v.x,h*=v.y,f*=v.x,p*=v.y,u+=A,h+=C,_=Sa(j),j=p2(_)}}return Uy({width:f,height:p,x:u,y:h})}function cv(t,e){const n=ov(t).scrollLeft;return e?e.left+n:nu(To(t)).left+n}function j7(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-cv(t,n),r=n.top+e.scrollTop;return{x:s,y:r}}function zhe(t){let{elements:e,rect:n,offsetParent:s,strategy:r}=t;const i=r==="fixed",l=To(s),d=e?iv(e.floating):!1;if(s===l||d&&i)return n;let u={scrollLeft:0,scrollTop:0},h=yo(1);const f=yo(0),p=_o(s);if((p||!p&&!i)&&((mm(s)!=="body"||hg(l))&&(u=ov(s)),_o(s))){const b=nu(s);h=Th(s),f.x=b.x+s.clientLeft,f.y=b.y+s.clientTop}const x=l&&!p&&!i?j7(l,u):yo(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+f.x+x.x,y:n.y*h.y-u.scrollTop*h.y+f.y+x.y}}function Hhe(t){return Array.from(t.getClientRects())}function qhe(t){const e=To(t),n=ov(t),s=t.ownerDocument.body,r=$d(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=$d(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let l=-n.scrollLeft+cv(t);const d=-n.scrollTop;return ei(s).direction==="rtl"&&(l+=$d(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:l,y:d}}const zP=25;function Whe(t,e){const n=Sa(t),s=To(t),r=n.visualViewport;let i=s.clientWidth,l=s.clientHeight,d=0,u=0;if(r){i=r.width,l=r.height;const f=iC();(!f||f&&e==="fixed")&&(d=r.offsetLeft,u=r.offsetTop)}const h=cv(s);if(h<=0){const f=s.ownerDocument,p=f.body,x=getComputedStyle(p),b=f.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,_=Math.abs(s.clientWidth-p.clientWidth-b);_<=zP&&(i-=_)}else h<=zP&&(i+=h);return{width:i,height:l,x:d,y:u}}const Yhe=new Set(["absolute","fixed"]);function Ghe(t,e){const n=nu(t,!0,e==="fixed"),s=n.top+t.clientTop,r=n.left+t.clientLeft,i=_o(t)?Th(t):yo(1),l=t.clientWidth*i.x,d=t.clientHeight*i.y,u=r*i.x,h=s*i.y;return{width:l,height:d,x:u,y:h}}function HP(t,e,n){let s;if(e==="viewport")s=Whe(t,n);else if(e==="document")s=qhe(To(t));else if(Yr(e))s=Ghe(e,n);else{const r=N7(t);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Uy(s)}function C7(t,e){const n=Bc(t);return n===e||!Yr(n)||Gh(n)?!1:ei(n).position==="fixed"||C7(n,e)}function Khe(t,e){const n=e.get(t);if(n)return n;let s=Ip(t,[],!1).filter(d=>Yr(d)&&mm(d)!=="body"),r=null;const i=ei(t).position==="fixed";let l=i?Bc(t):t;for(;Yr(l)&&!Gh(l);){const d=ei(l),u=aC(l);!u&&d.position==="fixed"&&(r=null),(i?!u&&!r:!u&&d.position==="static"&&!!r&&Yhe.has(r.position)||hg(l)&&!u&&C7(t,l))?s=s.filter(f=>f!==l):r=d,l=Bc(l)}return e.set(t,s),s}function Qhe(t){let{element:e,boundary:n,rootBoundary:s,strategy:r}=t;const l=[...n==="clippingAncestors"?iv(e)?[]:Khe(e,this._c):[].concat(n),s],d=l[0],u=l.reduce((h,f)=>{const p=HP(e,f,r);return h.top=$d(p.top,h.top),h.right=Kh(p.right,h.right),h.bottom=Kh(p.bottom,h.bottom),h.left=$d(p.left,h.left),h},HP(e,d,r));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Xhe(t){const{width:e,height:n}=E7(t);return{width:e,height:n}}function Zhe(t,e,n){const s=_o(e),r=To(e),i=n==="fixed",l=nu(t,!0,i,e);let d={scrollLeft:0,scrollTop:0};const u=yo(0);function h(){u.x=cv(r)}if(s||!s&&!i)if((mm(e)!=="body"||hg(r))&&(d=ov(e)),s){const b=nu(e,!0,i,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else r&&h();i&&!s&&r&&h();const f=r&&!s&&!i?j7(r,d):yo(0),p=l.left+d.scrollLeft-u.x-f.x,x=l.top+d.scrollTop-u.y-f.y;return{x:p,y:x,width:l.width,height:l.height}}function b1(t){return ei(t).position==="static"}function qP(t,e){if(!_o(t)||ei(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return To(t)===n&&(n=n.ownerDocument.body),n}function S7(t,e){const n=Sa(t);if(iv(t))return n;if(!_o(t)){let r=Bc(t);for(;r&&!Gh(r);){if(Yr(r)&&!b1(r))return r;r=Bc(r)}return n}let s=qP(t,e);for(;s&&che(s)&&b1(s);)s=qP(s,e);return s&&Gh(s)&&b1(s)&&!aC(s)?n:s||fhe(t)||n}const Jhe=async function(t){const e=this.getOffsetParent||S7,n=this.getDimensions,s=await n(t.floating);return{reference:Zhe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function eme(t){return ei(t).direction==="rtl"}const tme={convertOffsetParentRelativeRectToViewportRelativeRect:zhe,getDocumentElement:To,getClippingRect:Qhe,getOffsetParent:S7,getElementRects:Jhe,getClientRects:Hhe,getDimensions:Xhe,getScale:Th,isElement:Yr,isRTL:eme};function T7(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nme(t,e){let n=null,s;const r=To(t);function i(){var d;clearTimeout(s),(d=n)==null||d.disconnect(),n=null}function l(d,u){d===void 0&&(d=!1),u===void 0&&(u=1),i();const h=t.getBoundingClientRect(),{left:f,top:p,width:x,height:b}=h;if(d||e(),!x||!b)return;const _=J0(p),j=J0(r.clientWidth-(f+x)),v=J0(r.clientHeight-(p+b)),T=J0(f),A={rootMargin:-_+"px "+-j+"px "+-v+"px "+-T+"px",threshold:$d(0,Kh(1,u))||1};let C=!0;function M(L){const k=L[0].intersectionRatio;if(k!==u){if(!C)return l();k?l(!1,k):s=setTimeout(()=>{l(!1,1e-7)},1e3)}k===1&&!T7(h,t.getBoundingClientRect())&&l(),C=!1}try{n=new IntersectionObserver(M,{...A,root:r.ownerDocument})}catch{n=new IntersectionObserver(M,A)}n.observe(t)}return l(!0),i}function sme(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:u=!1}=s,h=cC(t),f=r||i?[...h?Ip(h):[],...Ip(e)]:[];f.forEach(T=>{r&&T.addEventListener("scroll",n,{passive:!0}),i&&T.addEventListener("resize",n)});const p=h&&d?nme(h,n):null;let x=-1,b=null;l&&(b=new ResizeObserver(T=>{let[P]=T;P&&P.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var A;(A=b)==null||A.observe(e)})),n()}),h&&!u&&b.observe(h),b.observe(e));let _,j=u?nu(t):null;u&&v();function v(){const T=nu(t);j&&!T7(j,T)&&n(),j=T,_=requestAnimationFrame(v)}return n(),()=>{var T;f.forEach(P=>{r&&P.removeEventListener("scroll",n),i&&P.removeEventListener("resize",n)}),p?.(),(T=b)==null||T.disconnect(),b=null,u&&cancelAnimationFrame(_)}}const rme=Bhe,ame=Ohe,WP=Ihe,ime=(t,e,n)=>{const s=new Map,r={platform:tme,...n},i={...r.platform,_c:s};return Mhe(t,e,{...r,platform:i})};var ome=typeof document<"u",lme=function(){},Lx=ome?y.useLayoutEffect:lme;function Fy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!Fy(t[s],e[s]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=n;s--!==0;){const i=r[s];if(!(i==="_owner"&&t.$$typeof)&&!Fy(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function k7(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function YP(t,e){const n=k7(t);return Math.round(e*n)/n}function v1(t){const e=y.useRef(t);return Lx(()=>{e.current=t}),e}function cme(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:l}={},transform:d=!0,whileElementsMounted:u,open:h}=t,[f,p]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[x,b]=y.useState(s);Fy(x,s)||b(s);const[_,j]=y.useState(null),[v,T]=y.useState(null),P=y.useCallback(q=>{q!==L.current&&(L.current=q,j(q))},[]),A=y.useCallback(q=>{q!==k.current&&(k.current=q,T(q))},[]),C=i||_,M=l||v,L=y.useRef(null),k=y.useRef(null),R=y.useRef(f),S=u!=null,O=v1(u),I=v1(r),F=v1(h),$=y.useCallback(()=>{if(!L.current||!k.current)return;const q={placement:e,strategy:n,middleware:x};I.current&&(q.platform=I.current),ime(L.current,k.current,q).then(Z=>{const ee={...Z,isPositioned:F.current!==!1};Q.current&&!Fy(R.current,ee)&&(R.current=ee,zc.flushSync(()=>{p(ee)}))})},[x,e,n,I,F]);Lx(()=>{h===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,p(q=>({...q,isPositioned:!1})))},[h]);const Q=y.useRef(!1);Lx(()=>(Q.current=!0,()=>{Q.current=!1}),[]),Lx(()=>{if(C&&(L.current=C),M&&(k.current=M),C&&M){if(O.current)return O.current(C,M,$);$()}},[C,M,$,O,S]);const G=y.useMemo(()=>({reference:L,floating:k,setReference:P,setFloating:A}),[P,A]),B=y.useMemo(()=>({reference:C,floating:M}),[C,M]),z=y.useMemo(()=>{const q={position:n,left:0,top:0};if(!B.floating)return q;const Z=YP(B.floating,f.x),ee=YP(B.floating,f.y);return d?{...q,transform:"translate("+Z+"px, "+ee+"px)",...k7(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:ee}},[n,d,B.floating,f.x,f.y]);return y.useMemo(()=>({...f,update:$,refs:G,elements:B,floatingStyles:z}),[f,$,G,B,z])}const dme=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:r}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?WP({element:s.current,padding:r}).fn(n):{}:s?WP({element:s,padding:r}).fn(n):{}}}},ume=(t,e)=>({...rme(t),options:[t,e]}),hme=(t,e)=>({...ame(t),options:[t,e]}),mme=(t,e)=>({...dme(t),options:[t,e]}),fme={...S2};let GP=!1,pme=0;const KP=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+pme++;function gme(){const[t,e]=y.useState(()=>GP?KP():void 0);return By(()=>{t==null&&e(KP())},[]),y.useEffect(()=>{GP=!0},[]),t}const xme=fme.useId,A7=xme||gme,yme=y.forwardRef(function(e,n){const{context:{placement:s,elements:{floating:r},middlewareData:{arrow:i,shift:l}},width:d=14,height:u=7,tipRadius:h=0,strokeWidth:f=0,staticOffset:p,stroke:x,d:b,style:{transform:_,...j}={},...v}=e,T=A7(),[P,A]=y.useState(!1);if(By(()=>{if(!r)return;ei(r).direction==="rtl"&&A(!0)},[r]),!r)return null;const[C,M]=s.split("-"),L=C==="top"||C==="bottom";let k=p;(L&&l!=null&&l.x||!L&&l!=null&&l.y)&&(k=null);const R=f*2,S=R/2,O=d/2*(h/-8+1),I=u/2*h/4,F=!!b,$=k&&M==="end"?"bottom":"top";let Q=k&&M==="end"?"right":"left";k&&P&&(Q=M==="end"?"left":"right");const G=i?.x!=null?k||i.x:"",B=i?.y!=null?k||i.y:"",z=b||"M0,0"+(" H"+d)+(" L"+(d-O)+","+(u-I))+(" Q"+d/2+","+u+" "+O+","+(u-I))+" Z",q={top:F?"rotate(180deg)":"",left:F?"rotate(90deg)":"rotate(-90deg)",bottom:F?"":"rotate(180deg)",right:F?"rotate(-90deg)":"rotate(90deg)"}[C];return a.jsxs("svg",{...v,"aria-hidden":!0,ref:n,width:F?d:d+R,height:d,viewBox:"0 0 "+d+" "+(u>d?u:d),style:{position:"absolute",pointerEvents:"none",[Q]:G,[$]:B,[C]:L||F?"100%":"calc(100% - "+R/2+"px)",transform:[q,_].filter(Z=>!!Z).join(" "),...j},children:[R>0&&a.jsx("path",{clipPath:"url(#"+T+")",fill:"none",stroke:x,strokeWidth:R+(b?0:1),d:z}),a.jsx("path",{stroke:R&&!b?v.fill:"none",d:z}),a.jsx("clipPath",{id:T,children:a.jsx("rect",{x:-S,y:S*(F?-1:1),width:d+R,height:d})})]})});function bme(){const t=new Map;return{emit(e,n){var s;(s=t.get(e))==null||s.forEach(r=>r(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var s;(s=t.get(e))==null||s.delete(n)}}}const vme=y.createContext(null),wme=y.createContext(null),_me=()=>{var t;return((t=y.useContext(vme))==null?void 0:t.id)||null},Eme=()=>y.useContext(wme);function Nme(t){const{open:e=!1,onOpenChange:n,elements:s}=t,r=A7(),i=y.useRef({}),[l]=y.useState(()=>bme()),d=_me()!=null,[u,h]=y.useState(s.reference),f=Phe((b,_,j)=>{i.current.openEvent=b?_:void 0,l.emit("openchange",{open:b,event:_,reason:j,nested:d}),n?.(b,_,j)}),p=y.useMemo(()=>({setPositionReference:h}),[]),x=y.useMemo(()=>({reference:u||s.reference||null,floating:s.floating||null,domReference:s.reference}),[u,s.reference,s.floating]);return y.useMemo(()=>({dataRef:i,open:e,onOpenChange:f,elements:x,events:l,floatingId:r,refs:p}),[e,f,x,l,r,p])}function jme(t){t===void 0&&(t={});const{nodeId:e}=t,n=Nme({...t,elements:{reference:null,floating:null,...t.elements}}),s=t.rootContext||n,r=s.elements,[i,l]=y.useState(null),[d,u]=y.useState(null),f=r?.domReference||i,p=y.useRef(null),x=Eme();By(()=>{f&&(p.current=f)},[f]);const b=cme({...t,elements:{...r,...d&&{reference:d}}}),_=y.useCallback(A=>{const C=Yr(A)?{getBoundingClientRect:()=>A.getBoundingClientRect(),getClientRects:()=>A.getClientRects(),contextElement:A}:A;u(C),b.refs.setReference(C)},[b.refs]),j=y.useCallback(A=>{(Yr(A)||A===null)&&(p.current=A,l(A)),(Yr(b.refs.reference.current)||b.refs.reference.current===null||A!==null&&!Yr(A))&&b.refs.setReference(A)},[b.refs]),v=y.useMemo(()=>({...b.refs,setReference:j,setPositionReference:_,domReference:p}),[b.refs,j,_]),T=y.useMemo(()=>({...b.elements,domReference:f}),[b.elements,f]),P=y.useMemo(()=>({...b,...s,refs:v,elements:T,nodeId:e}),[b,v,T,e,s]);return By(()=>{s.dataRef.current.floatingContext=P;const A=x?.nodesRef.current.find(C=>C.id===e);A&&(A.context=P)}),y.useMemo(()=>({...b,context:P,refs:v,elements:T}),[b,v,T,P])}var x2=function(e,n){return x2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])},x2(e,n)};function rr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");x2(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var rn=function(){return rn=Object.assign||function(n){for(var s,r=1,i=arguments.length;r<i;r++){s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])}return n},rn.apply(this,arguments)};function io(t,e,n){if(n||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return t.concat(i||Array.prototype.slice.call(e))}var Cme=function(t){var e=t.showTimeSelectOnly,n=e===void 0?!1:e,s=t.showTime,r=s===void 0?!1:s,i=t.className,l=t.children,d=n?"Choose Time":"Choose Date".concat(r?" and Time":"");return he.createElement("div",{className:i,role:"dialog","aria-label":d,"aria-modal":"true"},l)},Sme=function(t,e){var n=y.useRef(null),s=y.useRef(t);s.current=t;var r=y.useCallback(function(i){var l;n.current&&!n.current.contains(i.target)&&(e&&i.target instanceof HTMLElement&&i.target.classList.contains(e)||(l=s.current)===null||l===void 0||l.call(s,i))},[e]);return y.useEffect(function(){return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[r]),n},dv=function(t){var e=t.children,n=t.onClickOutside,s=t.className,r=t.containerRef,i=t.style,l=t.ignoreClass,d=Sme(n,l);return he.createElement("div",{className:s,style:i,ref:function(u){d.current=u,r&&(r.current=u)}},e)},Ue;(function(t){t.ArrowUp="ArrowUp",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.PageUp="PageUp",t.PageDown="PageDown",t.Home="Home",t.End="End",t.Enter="Enter",t.Space=" ",t.Tab="Tab",t.Escape="Escape",t.Backspace="Backspace",t.X="x"})(Ue||(Ue={}));function dC(){var t=typeof window<"u"?window:globalThis;return t}var fg=12,Tme=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function kn(t){if(t==null)return new Date;var e=typeof t=="string"?Hue(t):$e(t);return al(e)?e:new Date}function w1(t,e,n,s,r){var i,l=null,d=zd(n)||zd(lp()),u=!0;if(Array.isArray(e))return e.forEach(function(f){var p=x1(t,f,new Date,{locale:d,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});s&&(u=al(p,r)&&t===Qn(p,f,n)),al(p,r)&&u&&(l=p)}),l;if(l=x1(t,e,new Date,{locale:d,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),s)u=al(l)&&t===Qn(l,e,n);else if(!al(l)){var h=((i=e.match(Tme))!==null&&i!==void 0?i:[]).map(function(f){var p=f[0];if(p==="p"||p==="P"){var x=Ly[p];return d?x(f,d.formatLong):p}return f}).join("");t.length>0&&(l=x1(t,h.slice(0,t.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),al(l)||(l=new Date(t))}return al(l)&&u?l:null}function al(t,e){return Ry(t)&&!tu(t,e??new Date("1/1/1800"))}function Qn(t,e,n){if(n==="en")return IP(t,e,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var s=n?zd(n):void 0;return n&&!s&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!s&&lp()&&zd(lp())&&(s=zd(lp())),IP(t,e,{locale:s,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function qa(t,e){var n=e.dateFormat,s=e.locale,r=Array.isArray(n)&&n.length>0?n[0]:n;return t&&Qn(t,r,s)||""}function kme(t,e,n){if(!t)return"";var s=qa(t,n),r=e?qa(e,n):"";return"".concat(s," - ").concat(r)}function Ame(t,e){if(!t?.length)return"";var n=t[0]?qa(t[0],e):"";if(t.length===1)return n;if(t.length===2&&t[1]){var s=qa(t[1],e);return"".concat(n,", ").concat(s)}var r=t.length-1;return"".concat(n," (+").concat(r,")")}function _1(t,e){var n=e.hour,s=n===void 0?0:n,r=e.minute,i=r===void 0?0:r,l=e.second,d=l===void 0?0:l;return Dx(Px(Mx(t,d),i),s)}function Rme(t){return tC(t)}function Dme(t,e){return Qn(t,"ddd",e)}function Ix(t){return eu(t)}function Cc(t,e,n){var s=zd(e||lp());return Sl(t,{locale:s,weekStartsOn:n})}function gl(t){return o7(t)}function Uf(t){return rv(t)}function QP(t){return h2(t)}function XP(){return eu(kn())}function ZP(t){return a7(t)}function Pme(t){return Kce(t)}function Mme(t){return i7(t)}function Zi(t,e){return t&&e?$ue(t,e):!t&&!e}function zr(t,e){return t&&e?Bue(t,e):!t&&!e}function $y(t,e){return t&&e?Fue(t,e):!t&&!e}function en(t,e){return t&&e?Yce(t,e):!t&&!e}function Md(t,e){return t&&e?qde(t,e):!t&&!e}function Bf(t,e,n){var s,r=eu(e),i=a7(n);try{s=Lp(t,{start:r,end:i})}catch{s=!1}return s}function R7(t,e){var n=dC();n.__localeData__||(n.__localeData__={}),n.__localeData__[t]=e}function lp(){var t=dC();return t.__localeId__}function zd(t){if(typeof t=="string"){var e=dC();return e.__localeData__?e.__localeData__[t]:void 0}else return t}function Lme(t,e,n){return e(Qn(t,"EEEE",n))}function Ime(t,e){return Qn(t,"EEEEEE",e)}function Ome(t,e){return Qn(t,"EEE",e)}function uC(t,e){return Qn(_a(kn(),t),"LLLL",e)}function D7(t,e){return Qn(_a(kn(),t),"LLL",e)}function Vme(t,e){return Qn(ah(kn(),t),"QQQ",e)}function Wa(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,l=n.excludeDateIntervals,d=n.includeDates,u=n.includeDateIntervals,h=n.filterDate;return pg(t,{minDate:s,maxDate:r})||i&&i.some(function(f){return f instanceof Date?en(t,f):en(t,f.date)})||l&&l.some(function(f){var p=f.start,x=f.end;return Lp(t,{start:p,end:x})})||d&&!d.some(function(f){return en(t,f)})||u&&!u.some(function(f){var p=f.start,x=f.end;return Lp(t,{start:p,end:x})})||h&&!h(kn(t))||!1}function hC(t,e){var n=e===void 0?{}:e,s=n.excludeDates,r=n.excludeDateIntervals;return r&&r.length>0?r.some(function(i){var l=i.start,d=i.end;return Lp(t,{start:l,end:d})}):s&&s.some(function(i){var l;return i instanceof Date?en(t,i):en(t,(l=i.date)!==null&&l!==void 0?l:new Date)})||!1}function P7(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,l=n.includeDates,d=n.filterDate;return pg(t,{minDate:s?o7(s):void 0,maxDate:r?i7(r):void 0})||i?.some(function(u){return zr(t,u instanceof Date?u:u.date)})||l&&!l.some(function(u){return zr(t,u)})||d&&!d(kn(t))||!1}function ex(t,e,n,s){var r=Lt(t),i=Wr(t),l=Lt(e),d=Wr(e),u=Lt(s);return r===l&&r===u?i<=n&&n<=d:r<l?u===r&&i<=n||u===l&&d>=n||u<l&&u>r:!1}function Ume(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,l=n.includeDates;return pg(t,{minDate:s,maxDate:r})||i&&i.some(function(d){return zr(d instanceof Date?d:d.date,t)})||l&&!l.some(function(d){return zr(d,t)})||!1}function tx(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,l=n.includeDates,d=n.filterDate;return pg(t,{minDate:s,maxDate:r})||i?.some(function(u){return $y(t,u instanceof Date?u:u.date)})||l&&!l.some(function(u){return $y(t,u)})||d&&!d(kn(t))||!1}function nx(t,e,n){if(!e||!n||!Ry(e)||!Ry(n))return!1;var s=Lt(e),r=Lt(n);return s<=t&&r>=t}function Ox(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.maxDate,i=n.excludeDates,l=n.includeDates,d=n.filterDate,u=new Date(t,0,1);return pg(u,{minDate:s?rv(s):void 0,maxDate:r?l7(r):void 0})||i?.some(function(h){return Zi(u,h instanceof Date?h:h.date)})||l&&!l.some(function(h){return Zi(u,h)})||d&&!d(kn(u))||!1}function sx(t,e,n,s){var r=Lt(t),i=Bd(t),l=Lt(e),d=Bd(e),u=Lt(s);return r===l&&r===u?i<=n&&n<=d:r<l?u===r&&i<=n||u===l&&d>=n||u<l&&u>r:!1}function pg(t,e){var n,s=e===void 0?{}:e,r=s.minDate,i=s.maxDate;return(n=r&&Wh(t,r)<0||i&&Wh(t,i)>0)!==null&&n!==void 0?n:!1}function JP(t,e){return e.some(function(n){return go(n)===go(t)&&xo(n)===xo(t)&&pl(n)===pl(t)})}function eM(t,e){var n=e===void 0?{}:e,s=n.excludeTimes,r=n.includeTimes,i=n.filterTime;return s&&JP(t,s)||r&&!JP(t,r)||i&&!i(t)||!1}function tM(t,e){var n=e.minTime,s=e.maxTime;if(!n||!s)throw new Error("Both minTime and maxTime props required");var r=kn();r=Dx(r,go(t)),r=Px(r,xo(t)),r=Mx(r,pl(t));var i=kn();i=Dx(i,go(n)),i=Px(i,xo(n)),i=Mx(i,pl(n));var l=kn();l=Dx(l,go(s)),l=Px(l,xo(s)),l=Mx(l,pl(s));var d;try{d=!Lp(r,{start:i,end:l})}catch{d=!1}return d}function nM(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.includeDates,i=Fd(t,1);return s&&Dy(s,i)>0||r&&r.every(function(l){return Dy(l,i)>0})||!1}function sM(t,e){var n=e===void 0?{}:e,s=n.maxDate,r=n.includeDates,i=ji(t,1);return s&&Dy(i,s)>0||r&&r.every(function(l){return Dy(i,l)>0})||!1}function Bme(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.includeDates,i=rv(t),l=b7(i);return s&&Py(s,l)>0||r&&r.every(function(d){return Py(d,l)>0})||!1}function Fme(t,e){var n=e===void 0?{}:e,s=n.maxDate,r=n.includeDates,i=l7(t),l=eC(i,1);return s&&Py(l,s)>0||r&&r.every(function(d){return Py(l,d)>0})||!1}function rM(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.includeDates,i=Yh(t,1);return s&&My(s,i)>0||r&&r.every(function(l){return My(l,i)>0})||!1}function $me(t,e){var n=e===void 0?{}:e,s=n.minDate,r=n.yearItemNumber,i=r===void 0?fg:r,l=Uf(Yh(t,i)),d=bc(l,i).endPeriod,u=s&&Lt(s);return u&&u>d||!1}function aM(t,e){var n=e===void 0?{}:e,s=n.maxDate,r=n.includeDates,i=ml(t,1);return s&&My(i,s)>0||r&&r.every(function(l){return My(i,l)>0})||!1}function zme(t,e){var n=e===void 0?{}:e,s=n.maxDate,r=n.yearItemNumber,i=r===void 0?fg:r,l=ml(t,i),d=bc(l,i).startPeriod,u=s&&Lt(s);return u&&u<d||!1}function M7(t){var e=t.minDate,n=t.includeDates;if(n&&e){var s=n.filter(function(r){return Wh(r,e)>=0});return AP(s)}else return n?AP(n):e}function L7(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var s=n.filter(function(r){return Wh(r,e)<=0});return kP(s)}else return n?kP(n):e}function iM(t,e){var n;t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--highlighted");for(var s=new Map,r=0,i=t.length;r<i;r++){var l=t[r];if(fl(l)){var d=Qn(l,"MM.dd.yyyy"),u=s.get(d)||[];u.includes(e)||(u.push(e),s.set(d,u))}else if(typeof l=="object"){var h=Object.keys(l),f=(n=h[0])!==null&&n!==void 0?n:"",p=l[f];if(typeof f=="string"&&Array.isArray(p))for(var x=0,b=p.length;x<b;x++){var _=p[x];if(_){var d=Qn(_,"MM.dd.yyyy"),u=s.get(d)||[];u.includes(f)||(u.push(f),s.set(d,u))}}}}return s}function Hme(t,e){return t.length!==e.length?!1:t.every(function(n,s){return n===e[s]})}function qme(t,e){t===void 0&&(t=[]),e===void 0&&(e="react-datepicker__day--holidays");var n=new Map;return t.forEach(function(s){var r=s.date,i=s.holidayName;if(fl(r)){var l=Qn(r,"MM.dd.yyyy"),d=n.get(l)||{className:"",holidayNames:[]};if(!("className"in d&&d.className===e&&Hme(d.holidayNames,[i]))){d.className=e;var u=d.holidayNames;d.holidayNames=u?io(io([],u,!0),[i],!1):[i],n.set(l,d)}}}),n}function Wme(t,e,n,s,r){for(var i=r.length,l=[],d=0;d<i;d++){var u=t,h=r[d];h&&(u=zce(u,go(h)),u=u2(u,xo(h)),u=Wce(u,pl(h)));var f=u2(t,(n+1)*s);Uc(u,e)&&tu(u,f)&&h!=null&&l.push(h)}return l}function oM(t){return t<10?"0".concat(t):"".concat(t)}function bc(t,e){e===void 0&&(e=fg);var n=Math.ceil(Lt(t)/e)*e,s=n-(e-1);return{startPeriod:s,endPeriod:n}}function Yme(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),24);return Math.round((+n-+e)/36e5)}function lM(t){var e=t.getSeconds(),n=t.getMilliseconds();return $e(t.getTime()-e*1e3-n)}function Gme(t,e){return lM(t).getTime()===lM(e).getTime()}function cM(t){if(!fl(t))throw new Error("Invalid date");var e=new Date(t);return e.setHours(0,0,0,0),e}function dM(t,e){if(!fl(t)||!fl(e))throw new Error("Invalid date received");var n=cM(t),s=cM(e);return tu(n,s)}function I7(t){return t.key===Ue.Space}var Kme=(function(t){rr(e,t);function e(n){var s=t.call(this,n)||this;return s.inputRef=he.createRef(),s.onTimeChange=function(r){var i,l;s.setState({time:r});var d=s.props.date,u=d instanceof Date&&!isNaN(+d),h=u?d:new Date;if(r?.includes(":")){var f=r.split(":"),p=f[0],x=f[1];h.setHours(Number(p)),h.setMinutes(Number(x))}(l=(i=s.props).onChange)===null||l===void 0||l.call(i,h)},s.renderTimeInput=function(){var r=s.state.time,i=s.props,l=i.date,d=i.timeString,u=i.customTimeInput;return u?y.cloneElement(u,{date:l,value:r,onChange:s.onTimeChange}):he.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:s.inputRef,onClick:function(){var h;(h=s.inputRef.current)===null||h===void 0||h.focus()},required:!0,value:r,onChange:function(h){s.onTimeChange(h.target.value||d)}})},s.state={time:s.props.timeString},s}return e.getDerivedStateFromProps=function(n,s){return n.timeString!==s.time?{time:n.timeString}:null},e.prototype.render=function(){return he.createElement("div",{className:"react-datepicker__input-time-container"},he.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),he.createElement("div",{className:"react-datepicker-time__input-container"},he.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},e})(y.Component),Qme=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.dayEl=y.createRef(),n.handleClick=function(s){!n.isDisabled()&&n.props.onClick&&n.props.onClick(s)},n.handleMouseEnter=function(s){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(s)},n.handleOnKeyDown=function(s){var r,i,l=s.key;l===Ue.Space&&(s.preventDefault(),s.key=Ue.Enter),(i=(r=n.props).handleOnKeyDown)===null||i===void 0||i.call(r,s)},n.isSameDay=function(s){return en(n.props.day,s)},n.isKeyboardSelected=function(){var s;if(n.props.disabledKeyboardNavigation)return!1;var r=n.props.selectsMultiple?(s=n.props.selectedDates)===null||s===void 0?void 0:s.some(function(l){return n.isSameDayOrWeek(l)}):n.isSameDayOrWeek(n.props.selected),i=n.props.preSelection&&n.isDisabled(n.props.preSelection);return!r&&n.isSameDayOrWeek(n.props.preSelection)&&!i},n.isDisabled=function(s){return s===void 0&&(s=n.props.day),Wa(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(){return hC(n.props.day,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.isStartOfWeek=function(){return en(n.props.day,Cc(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameWeek=function(s){return n.props.showWeekPicker&&en(s,Cc(n.props.day,n.props.locale,n.props.calendarStartDay))},n.isSameDayOrWeek=function(s){return n.isSameDay(s)||n.isSameWeek(s)},n.getHighLightedClass=function(){var s=n.props,r=s.day,i=s.highlightDates;if(!i)return!1;var l=Qn(r,"MM.dd.yyyy");return i.get(l)},n.getHolidaysClass=function(){var s,r=n.props,i=r.day,l=r.holidays;if(!l)return[void 0];var d=Qn(i,"MM.dd.yyyy");return l.has(d)?[(s=l.get(d))===null||s===void 0?void 0:s.className]:[void 0]},n.isInRange=function(){var s=n.props,r=s.day,i=s.startDate,l=s.endDate;return!i||!l?!1:Bf(r,i,l)},n.isInSelectingRange=function(){var s,r=n.props,i=r.day,l=r.selectsStart,d=r.selectsEnd,u=r.selectsRange,h=r.selectsDisabledDaysInRange,f=r.startDate,p=r.endDate,x=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return!(l||d||u)||!x||!h&&n.isDisabled()?!1:l&&p&&(tu(x,p)||Md(x,p))?Bf(i,x,p):d&&f&&(Uc(x,f)||Md(x,f))||u&&f&&!p&&(Uc(x,f)||Md(x,f))?Bf(i,f,x):!1},n.isSelectingRangeStart=function(){var s;if(!n.isInSelectingRange())return!1;var r=n.props,i=r.day,l=r.startDate,d=r.selectsStart,u=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return d?en(i,u):en(i,l)},n.isSelectingRangeEnd=function(){var s;if(!n.isInSelectingRange())return!1;var r=n.props,i=r.day,l=r.endDate,d=r.selectsEnd,u=r.selectsRange,h=(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection;return d||u?en(i,h):en(i,l)},n.isRangeStart=function(){var s=n.props,r=s.day,i=s.startDate,l=s.endDate;return!i||!l?!1:en(i,r)},n.isRangeEnd=function(){var s=n.props,r=s.day,i=s.startDate,l=s.endDate;return!i||!l?!1:en(l,r)},n.isWeekend=function(){var s=Fde(n.props.day);return s===0||s===6},n.isAfterMonth=function(){return n.props.month!==void 0&&(n.props.month+1)%12===Wr(n.props.day)},n.isBeforeMonth=function(){return n.props.month!==void 0&&(Wr(n.props.day)+1)%12===n.props.month},n.isCurrentDay=function(){return n.isSameDay(kn())},n.isSelected=function(){var s;return n.props.selectsMultiple?(s=n.props.selectedDates)===null||s===void 0?void 0:s.some(function(r){return n.isSameDayOrWeek(r)}):n.isSameDayOrWeek(n.props.selected)},n.getClassNames=function(s){var r=n.props.dayClassName?n.props.dayClassName(s):void 0;return yr("react-datepicker__day",r,"react-datepicker__day--"+Dme(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass(),n.getHolidaysClass())},n.getAriaLabel=function(){var s=n.props,r=s.day,i=s.ariaLabelPrefixWhenEnabled,l=i===void 0?"Choose":i,d=s.ariaLabelPrefixWhenDisabled,u=d===void 0?"Not available":d,h=n.isDisabled()||n.isExcluded()?u:l;return"".concat(h," ").concat(Qn(r,"PPPP",n.props.locale))},n.getTitle=function(){var s=n.props,r=s.day,i=s.holidays,l=i===void 0?new Map:i,d=s.excludeDates,u=Qn(r,"MM.dd.yyyy"),h=[];return l.has(u)&&h.push.apply(h,l.get(u).holidayNames),n.isExcluded()&&h.push(d?.filter(function(f){return f instanceof Date?en(f,r):en(f?.date,r)}).map(function(f){if(!(f instanceof Date))return f?.message})),h.join(", ")},n.getTabIndex=function(){var s=n.props.selected,r=n.props.preSelection,i=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(s)&&en(r,s))?0:-1;return i},n.handleFocusDay=function(){var s;n.shouldFocusDay()&&((s=n.dayEl.current)===null||s===void 0||s.focus({preventScroll:!0}))},n.renderDayContents=function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(OP(n.props.day),n.props.day):OP(n.props.day)},n.render=function(){return he.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&he.createElement("span",{className:"overlay"},n.getTitle()))},n}return e.prototype.componentDidMount=function(){this.handleFocusDay()},e.prototype.componentDidUpdate=function(){this.handleFocusDay()},e.prototype.shouldFocusDay=function(){var n=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(n=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(n=!1),this.isDayActiveElement()&&(n=!0),this.isDuplicateDay()&&(n=!1)),n},e.prototype.isDayActiveElement=function(){var n,s,r;return((s=(n=this.props.containerRef)===null||n===void 0?void 0:n.current)===null||s===void 0?void 0:s.contains(document.activeElement))&&((r=document.activeElement)===null||r===void 0?void 0:r.classList.contains("react-datepicker__day"))},e.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},e})(y.Component),Xme=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.weekNumberEl=y.createRef(),n.handleClick=function(s){n.props.onClick&&n.props.onClick(s)},n.handleOnKeyDown=function(s){var r,i,l=s.key;l===Ue.Space&&(s.preventDefault(),s.key=Ue.Enter),(i=(r=n.props).handleOnKeyDown)===null||i===void 0||i.call(r,s)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!en(n.props.date,n.props.selected)&&en(n.props.date,n.props.preSelection)},n.getTabIndex=function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||en(n.props.date,n.props.selected)&&en(n.props.preSelection,n.props.selected))?0:-1},n.handleFocusWeekNumber=function(s){var r=!1;n.getTabIndex()===0&&!s?.isInputFocused&&en(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(r=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(r=!0)),r&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},e.prototype.componentDidUpdate=function(n){this.handleFocusWeekNumber(n)},e.prototype.render=function(){var n=this.props,s=n.weekNumber,r=n.isWeekDisabled,i=n.ariaLabelPrefix,l=i===void 0?e.defaultProps.ariaLabelPrefix:i,d=n.onClick,u={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!d&&!r,"react-datepicker__week-number--selected":!!d&&en(this.props.date,this.props.selected)};return he.createElement("div",{ref:this.weekNumberEl,className:yr(u),"aria-label":"".concat(l," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},s)},e})(y.Component),Zme=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDisabled=function(s){return Wa(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.handleDayClick=function(s,r){n.props.onDayClick&&n.props.onDayClick(s,r)},n.handleDayMouseEnter=function(s){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleWeekClick=function(s,r,i){for(var l,d,u,h=new Date(s),f=0;f<7;f++){var p=new Date(s);p.setDate(p.getDate()+f);var x=!n.isDisabled(p);if(x){h=p;break}}typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(h,r,i),n.props.showWeekPicker&&n.handleDayClick(h,i),((l=n.props.shouldCloseOnSelect)!==null&&l!==void 0?l:e.defaultProps.shouldCloseOnSelect)&&((u=(d=n.props).setOpen)===null||u===void 0||u.call(d,!1))},n.formatWeekNumber=function(s){return n.props.formatWeekNumber?n.props.formatWeekNumber(s):Rme(s)},n.isWeekDisabled=function(){for(var s=n.startOfWeek(),r=wi(s,6),i=new Date(s);i<=r;){if(!n.isDisabled(i))return!1;i=wi(i,1)}return!0},n.renderDays=function(){var s=n.startOfWeek(),r=[],i=n.formatWeekNumber(s);if(n.props.showWeekNumber){var l=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,s,i):void 0;r.push(he.createElement(Xme,rn({key:"W"},e.defaultProps,n.props,{weekNumber:i,isWeekDisabled:n.isWeekDisabled(),date:s,onClick:l})))}return r.concat([0,1,2,3,4,5,6].map(function(d){var u=wi(s,d);return he.createElement(Qme,rn({},e.defaultProps,n.props,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:u.valueOf(),day:u,onClick:n.handleDayClick.bind(n,u),onMouseEnter:n.handleDayMouseEnter.bind(n,u)}))}))},n.startOfWeek=function(){return Cc(n.props.day,n.props.locale,n.props.calendarStartDay)},n.isKeyboardSelected=function(){return!n.props.disabledKeyboardNavigation&&!en(n.startOfWeek(),n.props.selected)&&en(n.startOfWeek(),n.props.preSelection)},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n={"react-datepicker__week":!0,"react-datepicker__week--selected":en(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return he.createElement("div",{className:yr(n)},this.renderDays())},e})(y.Component),_f,Jme=6,kh={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},E1=(_f={},_f[kh.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},_f[kh.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},_f[kh.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},_f),rx=1;function uM(t,e){return t?kh.FOUR_COLUMNS:e?kh.TWO_COLUMNS:kh.THREE_COLUMNS}var efe=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.MONTH_REFS=io([],Array(12),!0).map(function(){return y.createRef()}),n.QUARTER_REFS=io([],Array(4),!0).map(function(){return y.createRef()}),n.isDisabled=function(s){return Wa(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDateIntervals:n.props.includeDateIntervals,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return hC(s,{excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals})},n.handleDayClick=function(s,r){var i,l;(l=(i=n.props).onDayClick)===null||l===void 0||l.call(i,s,r,n.props.orderInDisplay)},n.handleDayMouseEnter=function(s){var r,i;(i=(r=n.props).onDayMouseEnter)===null||i===void 0||i.call(r,s)},n.handleMouseLeave=function(){var s,r;(r=(s=n.props).onMouseLeave)===null||r===void 0||r.call(s)},n.isRangeStartMonth=function(s){var r=n.props,i=r.day,l=r.startDate,d=r.endDate;return!l||!d?!1:zr(_a(i,s),l)},n.isRangeStartQuarter=function(s){var r=n.props,i=r.day,l=r.startDate,d=r.endDate;return!l||!d?!1:$y(ah(i,s),l)},n.isRangeEndMonth=function(s){var r=n.props,i=r.day,l=r.startDate,d=r.endDate;return!l||!d?!1:zr(_a(i,s),d)},n.isRangeEndQuarter=function(s){var r=n.props,i=r.day,l=r.startDate,d=r.endDate;return!l||!d?!1:$y(ah(i,s),d)},n.isInSelectingRangeMonth=function(s){var r,i=n.props,l=i.day,d=i.selectsStart,u=i.selectsEnd,h=i.selectsRange,f=i.startDate,p=i.endDate,x=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(d||u||h)||!x?!1:d&&p?ex(x,p,s,l):u&&f||h&&f&&!p?ex(f,x,s,l):!1},n.isSelectingMonthRangeStart=function(s){var r;if(!n.isInSelectingRangeMonth(s))return!1;var i=n.props,l=i.day,d=i.startDate,u=i.selectsStart,h=_a(l,s),f=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return u?zr(h,f):zr(h,d)},n.isSelectingMonthRangeEnd=function(s){var r;if(!n.isInSelectingRangeMonth(s))return!1;var i=n.props,l=i.day,d=i.endDate,u=i.selectsEnd,h=i.selectsRange,f=_a(l,s),p=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return u||h?zr(f,p):zr(f,d)},n.isInSelectingRangeQuarter=function(s){var r,i=n.props,l=i.day,d=i.selectsStart,u=i.selectsEnd,h=i.selectsRange,f=i.startDate,p=i.endDate,x=(r=n.props.selectingDate)!==null&&r!==void 0?r:n.props.preSelection;return!(d||u||h)||!x?!1:d&&p?sx(x,p,s,l):u&&f||h&&f&&!p?sx(f,x,s,l):!1},n.isWeekInMonth=function(s){var r=n.props.day,i=wi(s,6);return zr(s,r)||zr(i,r)},n.isCurrentMonth=function(s,r){return Lt(s)===Lt(kn())&&r===Wr(kn())},n.isCurrentQuarter=function(s,r){return Lt(s)===Lt(kn())&&r===Bd(kn())},n.isSelectedMonth=function(s,r,i){return Wr(i)===r&&Lt(s)===Lt(i)},n.isSelectMonthInList=function(s,r,i){return i.some(function(l){return n.isSelectedMonth(s,r,l)})},n.isSelectedQuarter=function(s,r,i){return Bd(s)===r&&Lt(s)===Lt(i)},n.renderWeeks=function(){for(var s=[],r=n.props.fixedHeight,i=0,l=!1,d=Cc(gl(n.props.day),n.props.locale,n.props.calendarStartDay),u=function(_){return n.props.showWeekPicker?Cc(_,n.props.locale,n.props.calendarStartDay):n.props.preSelection},h=function(_){return n.props.showWeekPicker?Cc(_,n.props.locale,n.props.calendarStartDay):n.props.selected},f=n.props.selected?h(n.props.selected):void 0,p=n.props.preSelection?u(n.props.preSelection):void 0;s.push(he.createElement(Zme,rn({},n.props,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,key:i,day:d,month:Wr(n.props.day),onDayClick:n.handleDayClick,onDayMouseEnter:n.handleDayMouseEnter,selected:f,preSelection:p,showWeekNumber:n.props.showWeekNumbers}))),!l;){i++,d=Ay(d,1);var x=r&&i>=Jme,b=!r&&!n.isWeekInMonth(d);if(x||b)if(n.props.peekNextMonth)l=!0;else break}return s},n.onMonthClick=function(s,r){var i=n.isMonthDisabledForLabelDate(r),l=i.isDisabled,d=i.labelDate;l||n.handleDayClick(gl(d),s)},n.onMonthMouseEnter=function(s){var r=n.isMonthDisabledForLabelDate(s),i=r.isDisabled,l=r.labelDate;i||n.handleDayMouseEnter(gl(l))},n.handleMonthNavigation=function(s,r){var i,l,d,u;(l=(i=n.props).setPreSelection)===null||l===void 0||l.call(i,r),(u=(d=n.MONTH_REFS[s])===null||d===void 0?void 0:d.current)===null||u===void 0||u.focus()},n.handleKeyboardNavigation=function(s,r,i){var l,d=n.props,u=d.selected,h=d.preSelection,f=d.setPreSelection,p=d.minDate,x=d.maxDate,b=d.showFourColumnMonthYearPicker,_=d.showTwoColumnMonthYearPicker;if(h){var j=uM(b,_),v=n.getVerticalOffset(j),T=(l=E1[j])===null||l===void 0?void 0:l.grid,P=function(k,R,S){var O,I,F=R,$=S;switch(k){case Ue.ArrowRight:F=ji(R,rx),$=S===11?0:S+rx;break;case Ue.ArrowLeft:F=Fd(R,rx),$=S===0?11:S-rx;break;case Ue.ArrowUp:F=Fd(R,v),$=!((O=T?.[0])===null||O===void 0)&&O.includes(S)?S+12-v:S-v;break;case Ue.ArrowDown:F=ji(R,v),$=!((I=T?.[T.length-1])===null||I===void 0)&&I.includes(S)?S-12+v:S+v;break}return{newCalculatedDate:F,newCalculatedMonth:$}},A=function(k,R,S){for(var O=40,I=k,F=!1,$=0,Q=P(I,R,S),G=Q.newCalculatedDate,B=Q.newCalculatedMonth;!F;){if($>=O){G=R,B=S;break}if(p&&G<p){I=Ue.ArrowRight;var z=P(I,G,B);G=z.newCalculatedDate,B=z.newCalculatedMonth}if(x&&G>x){I=Ue.ArrowLeft;var z=P(I,G,B);G=z.newCalculatedDate,B=z.newCalculatedMonth}if(Ume(G,n.props)){var z=P(I,G,B);G=z.newCalculatedDate,B=z.newCalculatedMonth}else F=!0;$++}return{newCalculatedDate:G,newCalculatedMonth:B}};if(r===Ue.Enter){n.isMonthDisabled(i)||(n.onMonthClick(s,i),f?.(u));return}var C=A(r,h,i),M=C.newCalculatedDate,L=C.newCalculatedMonth;switch(r){case Ue.ArrowRight:case Ue.ArrowLeft:case Ue.ArrowUp:case Ue.ArrowDown:n.handleMonthNavigation(L,M);break}}},n.getVerticalOffset=function(s){var r,i;return(i=(r=E1[s])===null||r===void 0?void 0:r.verticalNavigationOffset)!==null&&i!==void 0?i:0},n.onMonthKeyDown=function(s,r){var i=n.props,l=i.disabledKeyboardNavigation,d=i.handleOnMonthKeyDown,u=s.key;u!==Ue.Tab&&s.preventDefault(),l||n.handleKeyboardNavigation(s,u,r),d&&d(s)},n.onQuarterClick=function(s,r){var i=ah(n.props.day,r);tx(i,n.props)||n.handleDayClick(QP(i),s)},n.onQuarterMouseEnter=function(s){var r=ah(n.props.day,s);tx(r,n.props)||n.handleDayMouseEnter(QP(r))},n.handleQuarterNavigation=function(s,r){var i,l,d,u;n.isDisabled(r)||n.isExcluded(r)||((l=(i=n.props).setPreSelection)===null||l===void 0||l.call(i,r),(u=(d=n.QUARTER_REFS[s-1])===null||d===void 0?void 0:d.current)===null||u===void 0||u.focus())},n.onQuarterKeyDown=function(s,r){var i,l,d=s.key;if(!n.props.disabledKeyboardNavigation)switch(d){case Ue.Enter:n.onQuarterClick(s,r),(l=(i=n.props).setPreSelection)===null||l===void 0||l.call(i,n.props.selected);break;case Ue.ArrowRight:if(!n.props.preSelection)break;n.handleQuarterNavigation(r===4?1:r+1,eC(n.props.preSelection,1));break;case Ue.ArrowLeft:if(!n.props.preSelection)break;n.handleQuarterNavigation(r===1?4:r-1,b7(n.props.preSelection));break}},n.isMonthDisabledForLabelDate=function(s){var r,i=n.props,l=i.day,d=i.minDate,u=i.maxDate,h=i.excludeDates,f=i.includeDates,p=_a(l,s);return{isDisabled:(r=(d||u||h||f)&&P7(p,n.props))!==null&&r!==void 0?r:!1,labelDate:p}},n.isMonthDisabled=function(s){var r=n.isMonthDisabledForLabelDate(s).isDisabled;return r},n.getMonthClassNames=function(s){var r=n.props,i=r.day,l=r.startDate,d=r.endDate,u=r.preSelection,h=r.monthClassName,f=h?h(_a(i,s)):void 0,p=n.getSelection();return yr("react-datepicker__month-text","react-datepicker__month-".concat(s),f,{"react-datepicker__month-text--disabled":n.isMonthDisabled(s),"react-datepicker__month-text--selected":p?n.isSelectMonthInList(i,s,p):void 0,"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&u&&n.isSelectedMonth(i,s,u)&&!n.isMonthDisabled(s),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(s),"react-datepicker__month-text--in-range":l&&d?ex(l,d,s,i):void 0,"react-datepicker__month-text--range-start":n.isRangeStartMonth(s),"react-datepicker__month-text--range-end":n.isRangeEndMonth(s),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(s),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(s),"react-datepicker__month-text--today":n.isCurrentMonth(i,s)})},n.getTabIndex=function(s){if(n.props.preSelection==null)return"-1";var r=Wr(n.props.preSelection),i=n.isMonthDisabledForLabelDate(r).isDisabled,l=s===r&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return l},n.getQuarterTabIndex=function(s){if(n.props.preSelection==null)return"-1";var r=Bd(n.props.preSelection),i=tx(n.props.day,n.props),l=s===r&&!(i||n.props.disabledKeyboardNavigation)?"0":"-1";return l},n.getAriaLabel=function(s){var r=n.props,i=r.chooseDayAriaLabelPrefix,l=i===void 0?"Choose":i,d=r.disabledDayAriaLabelPrefix,u=d===void 0?"Not available":d,h=r.day,f=r.locale,p=_a(h,s),x=n.isDisabled(p)||n.isExcluded(p)?u:l;return"".concat(x," ").concat(Qn(p,"MMMM yyyy",f))},n.getQuarterClassNames=function(s){var r=n.props,i=r.day,l=r.startDate,d=r.endDate,u=r.selected,h=r.minDate,f=r.maxDate,p=r.excludeDates,x=r.includeDates,b=r.filterDate,_=r.preSelection,j=r.disabledKeyboardNavigation,v=(h||f||p||x||b)&&tx(ah(i,s),n.props);return yr("react-datepicker__quarter-text","react-datepicker__quarter-".concat(s),{"react-datepicker__quarter-text--disabled":v,"react-datepicker__quarter-text--selected":u?n.isSelectedQuarter(i,s,u):void 0,"react-datepicker__quarter-text--keyboard-selected":!j&&_&&n.isSelectedQuarter(i,s,_)&&!v,"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(s),"react-datepicker__quarter-text--in-range":l&&d?sx(l,d,s,i):void 0,"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(s),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(s)})},n.getMonthContent=function(s){var r=n.props,i=r.showFullMonthYearPicker,l=r.renderMonthContent,d=r.locale,u=r.day,h=D7(s,d),f=uC(s,d);return l?l(s,h,f,u):i?f:h},n.getQuarterContent=function(s){var r,i=n.props,l=i.renderQuarterContent,d=i.locale,u=Vme(s,d);return(r=l?.(s,u))!==null&&r!==void 0?r:u},n.renderMonths=function(){var s,r=n.props,i=r.showTwoColumnMonthYearPicker,l=r.showFourColumnMonthYearPicker,d=r.day,u=r.selected,h=(s=E1[uM(l,i)])===null||s===void 0?void 0:s.grid;return h?.map(function(f,p){return he.createElement("div",{className:"react-datepicker__month-wrapper",key:p},f.map(function(x,b){return he.createElement("div",{ref:n.MONTH_REFS[x],key:b,onClick:function(_){n.onMonthClick(_,x)},onKeyDown:function(_){I7(_)&&(_.preventDefault(),_.key=Ue.Enter),n.onMonthKeyDown(_,x)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(x)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(x)}:void 0,tabIndex:Number(n.getTabIndex(x)),className:n.getMonthClassNames(x),"aria-disabled":n.isMonthDisabled(x),role:"option","aria-label":n.getAriaLabel(x),"aria-current":n.isCurrentMonth(d,x)?"date":void 0,"aria-selected":u?n.isSelectedMonth(d,x,u):void 0},n.getMonthContent(x))}))})},n.renderQuarters=function(){var s=n.props,r=s.day,i=s.selected,l=[1,2,3,4];return he.createElement("div",{className:"react-datepicker__quarter-wrapper"},l.map(function(d,u){return he.createElement("div",{key:u,ref:n.QUARTER_REFS[u],role:"option",onClick:function(h){n.onQuarterClick(h,d)},onKeyDown:function(h){n.onQuarterKeyDown(h,d)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(d)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(d)}:void 0,className:n.getQuarterClassNames(d),"aria-selected":i?n.isSelectedQuarter(r,d,i):void 0,tabIndex:Number(n.getQuarterTabIndex(d)),"aria-current":n.isCurrentQuarter(r,d)?"date":void 0},n.getQuarterContent(d))}))},n.getClassNames=function(){var s=n.props,r=s.selectingDate,i=s.selectsStart,l=s.selectsEnd,d=s.showMonthYearPicker,u=s.showQuarterYearPicker,h=s.showWeekPicker;return yr("react-datepicker__month",{"react-datepicker__month--selecting-range":r&&(i||l)},{"react-datepicker__monthPicker":d},{"react-datepicker__quarterPicker":u},{"react-datepicker__weekPicker":h})},n}return e.prototype.getSelection=function(){var n=this.props,s=n.selected,r=n.selectedDates,i=n.selectsMultiple;if(i)return r;if(s)return[s]},e.prototype.render=function(){var n=this.props,s=n.showMonthYearPicker,r=n.showQuarterYearPicker,i=n.day,l=n.ariaLabelPrefix,d=l===void 0?"Month ":l,u=d?d.trim()+" ":"";return he.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(u).concat(Qn(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},s?this.renderMonths():r?this.renderQuarters():this.renderWeeks())},e})(y.Component),tfe=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isSelectedMonth=function(s){return n.props.month===s},n.renderOptions=function(){return n.props.monthNames.map(function(s,r){return he.createElement("div",{className:n.isSelectedMonth(r)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:s,onClick:n.onChange.bind(n,r),"aria-selected":n.isSelectedMonth(r)?"true":void 0},n.isSelectedMonth(r)?he.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",s)})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){return n.props.onCancel()},n}return e.prototype.render=function(){return he.createElement(dv,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},e})(y.Component),nfe=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(s){return s.map(function(r,i){return he.createElement("option",{key:r,value:i},r)})},n.renderSelectMode=function(s){return he.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(r){return n.onChange(parseInt(r.target.value))}},n.renderSelectOptions(s))},n.renderReadView=function(s,r){return he.createElement("div",{key:"read",style:{visibility:s?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},he.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),he.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},r[n.props.month]))},n.renderDropdown=function(s){return he.createElement(tfe,rn({key:"dropdown"},n.props,{monthNames:s,onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(s){var r=n.state.dropdownVisible,i=[n.renderReadView(!r,s)];return r&&i.unshift(n.renderDropdown(s)),i},n.onChange=function(s){n.toggleDropdown(),s!==n.props.month&&n.props.onChange(s)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n=this,s=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return D7(i,n.props.locale)}:function(i){return uC(i,n.props.locale)}),r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(s);break;case"select":r=this.renderSelectMode(s);break}return he.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)},e})(y.Component);function sfe(t,e){for(var n=[],s=gl(t),r=gl(e);!Uc(s,r);)n.push(kn(s)),s=ji(s,1);return n}var rfe=(function(t){rr(e,t);function e(n){var s=t.call(this,n)||this;return s.renderOptions=function(){return s.state.monthYearsList.map(function(r){var i=f2(r),l=Zi(s.props.date,r)&&zr(s.props.date,r);return he.createElement("div",{className:l?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:s.onChange.bind(s,i),"aria-selected":l?"true":void 0},l?he.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Qn(r,s.props.dateFormat,s.props.locale))})},s.onChange=function(r){return s.props.onChange(r)},s.handleClickOutside=function(){s.props.onCancel()},s.state={monthYearsList:sfe(s.props.minDate,s.props.maxDate)},s}return e.prototype.render=function(){var n=yr({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return he.createElement(dv,{className:n,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(y.Component),afe=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var s=gl(n.props.minDate),r=gl(n.props.maxDate),i=[];!Uc(s,r);){var l=f2(s);i.push(he.createElement("option",{key:l,value:l},Qn(s,n.props.dateFormat,n.props.locale))),s=ji(s,1)}return i},n.onSelectChange=function(s){n.onChange(parseInt(s.target.value))},n.renderSelectMode=function(){return he.createElement("select",{value:f2(gl(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(s){var r=Qn(n.props.date,n.props.dateFormat,n.props.locale);return he.createElement("div",{key:"read",style:{visibility:s?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:n.toggleDropdown},he.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),he.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},r))},n.renderDropdown=function(){return he.createElement(rfe,rn({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var s=n.state.dropdownVisible,r=[n.renderReadView(!s)];return s&&r.unshift(n.renderDropdown()),r},n.onChange=function(s){n.toggleDropdown();var r=kn(s);Zi(n.props.date,r)&&zr(n.props.date,r)||n.props.onChange(r)},n.toggleDropdown=function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return he.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(y.Component),ife=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={height:null},n.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var s,r,i;n.list&&(n.list.scrollTop=(i=n.centerLi&&e.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-((r=(s=n.header)===null||s===void 0?void 0:s.clientHeight)!==null&&r!==void 0?r:0):n.list.clientHeight,n.centerLi))!==null&&i!==void 0?i:0)})},n.handleClick=function(s){var r,i;(n.props.minTime||n.props.maxTime)&&tM(s,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&eM(s,n.props)||(i=(r=n.props).onChange)===null||i===void 0||i.call(r,s)},n.isSelectedTime=function(s){return n.props.selected&&Gme(n.props.selected,s)},n.isDisabledTime=function(s){return(n.props.minTime||n.props.maxTime)&&tM(s,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&eM(s,n.props)},n.liClasses=function(s){var r,i=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(s):void 0];return n.isSelectedTime(s)&&i.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(s)&&i.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(go(s)*3600+xo(s)*60+pl(s))%(((r=n.props.intervals)!==null&&r!==void 0?r:e.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},n.handleOnKeyDown=function(s,r){var i,l;s.key===Ue.Space&&(s.preventDefault(),s.key=Ue.Enter),(s.key===Ue.ArrowUp||s.key===Ue.ArrowLeft)&&s.target instanceof HTMLElement&&s.target.previousSibling&&(s.preventDefault(),s.target.previousSibling instanceof HTMLElement&&s.target.previousSibling.focus()),(s.key===Ue.ArrowDown||s.key===Ue.ArrowRight)&&s.target instanceof HTMLElement&&s.target.nextSibling&&(s.preventDefault(),s.target.nextSibling instanceof HTMLElement&&s.target.nextSibling.focus()),s.key===Ue.Enter&&n.handleClick(r),(l=(i=n.props).handleOnKeyDown)===null||l===void 0||l.call(i,s)},n.renderTimes=function(){for(var s,r=[],i=typeof n.props.format=="string"?n.props.format:"p",l=(s=n.props.intervals)!==null&&s!==void 0?s:e.defaultProps.intervals,d=n.props.selected||n.props.openToDate||kn(),u=Ix(d),h=n.props.injectTimes&&n.props.injectTimes.sort(function(v,T){return v.getTime()-T.getTime()}),f=60*Yme(d),p=f/l,x=0;x<p;x++){var b=u2(u,x*l);if(r.push(b),h){var _=Wme(u,b,x,l,h);r=r.concat(_)}}var j=r.reduce(function(v,T){return T.getTime()<=d.getTime()?T:v},r[0]);return r.map(function(v){return he.createElement("li",{key:v.valueOf(),onClick:n.handleClick.bind(n,v),className:n.liClasses(v),ref:function(T){v===j&&(n.centerLi=T)},onKeyDown:function(T){n.handleOnKeyDown(T,v)},tabIndex:v===j?0:-1,role:"option","aria-selected":n.isSelectedTime(v)?"true":void 0,"aria-disabled":n.isDisabledTime(v)?"true":void 0},Qn(v,i,n.props.locale))})},n.renderTimeCaption=function(){return n.props.showTimeCaption===!1?he.createElement(he.Fragment,null):he.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(n.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(s){n.header=s}},he.createElement("div",{className:"react-datepicker-time__header"},n.props.timeCaption))},n}return Object.defineProperty(e,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},e.prototype.render=function(){var n=this,s,r=this.state.height;return he.createElement("div",{className:"react-datepicker__time-container ".concat(((s=this.props.todayButton)!==null&&s!==void 0?s:e.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),he.createElement("div",{className:"react-datepicker__time"},he.createElement("div",{className:"react-datepicker__time-box"},he.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){n.list=i},style:r?{height:r}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},e.calcCenterPosition=function(n,s){return s.offsetTop-(n/2-s.clientHeight/2)},e})(y.Component),hM=3,ofe=(function(t){rr(e,t);function e(n){var s=t.call(this,n)||this;return s.YEAR_REFS=io([],Array(s.props.yearItemNumber),!0).map(function(){return y.createRef()}),s.isDisabled=function(r){return Wa(r,{minDate:s.props.minDate,maxDate:s.props.maxDate,excludeDates:s.props.excludeDates,includeDates:s.props.includeDates,filterDate:s.props.filterDate})},s.isExcluded=function(r){return hC(r,{excludeDates:s.props.excludeDates})},s.selectingDate=function(){var r;return(r=s.props.selectingDate)!==null&&r!==void 0?r:s.props.preSelection},s.updateFocusOnPaginate=function(r){var i=function(){var l,d;(d=(l=s.YEAR_REFS[r])===null||l===void 0?void 0:l.current)===null||d===void 0||d.focus()};window.requestAnimationFrame(i)},s.handleYearClick=function(r,i){s.props.onDayClick&&s.props.onDayClick(r,i)},s.handleYearNavigation=function(r,i){var l,d,u,h,f=s.props,p=f.date,x=f.yearItemNumber;if(!(p===void 0||x===void 0)){var b=bc(p,x).startPeriod;s.isDisabled(i)||s.isExcluded(i)||((d=(l=s.props).setPreSelection)===null||d===void 0||d.call(l,i),r-b<0?s.updateFocusOnPaginate(x-(b-r)):r-b>=x?s.updateFocusOnPaginate(Math.abs(x-(r-b))):(h=(u=s.YEAR_REFS[r-b])===null||u===void 0?void 0:u.current)===null||h===void 0||h.focus())}},s.isSameDay=function(r,i){return en(r,i)},s.isCurrentYear=function(r){return r===Lt(kn())},s.isRangeStart=function(r){return s.props.startDate&&s.props.endDate&&Zi(Xi(kn(),r),s.props.startDate)},s.isRangeEnd=function(r){return s.props.startDate&&s.props.endDate&&Zi(Xi(kn(),r),s.props.endDate)},s.isInRange=function(r){return nx(r,s.props.startDate,s.props.endDate)},s.isInSelectingRange=function(r){var i=s.props,l=i.selectsStart,d=i.selectsEnd,u=i.selectsRange,h=i.startDate,f=i.endDate;return!(l||d||u)||!s.selectingDate()?!1:l&&f?nx(r,s.selectingDate(),f):d&&h||u&&h&&!f?nx(r,h,s.selectingDate()):!1},s.isSelectingRangeStart=function(r){var i;if(!s.isInSelectingRange(r))return!1;var l=s.props,d=l.startDate,u=l.selectsStart,h=Xi(kn(),r);return u?Zi(h,(i=s.selectingDate())!==null&&i!==void 0?i:null):Zi(h,d??null)},s.isSelectingRangeEnd=function(r){var i;if(!s.isInSelectingRange(r))return!1;var l=s.props,d=l.endDate,u=l.selectsEnd,h=l.selectsRange,f=Xi(kn(),r);return u||h?Zi(f,(i=s.selectingDate())!==null&&i!==void 0?i:null):Zi(f,d??null)},s.isKeyboardSelected=function(r){if(!(s.props.date===void 0||s.props.selected==null||s.props.preSelection==null)){var i=s.props,l=i.minDate,d=i.maxDate,u=i.excludeDates,h=i.includeDates,f=i.filterDate,p=Uf(Xi(s.props.date,r)),x=(l||d||u||h||f)&&Ox(r,s.props);return!s.props.disabledKeyboardNavigation&&!s.props.inline&&!en(p,Uf(s.props.selected))&&en(p,Uf(s.props.preSelection))&&!x}},s.onYearClick=function(r,i){var l=s.props.date;l!==void 0&&s.handleYearClick(Uf(Xi(l,i)),r)},s.onYearKeyDown=function(r,i){var l,d,u=r.key,h=s.props,f=h.date,p=h.yearItemNumber,x=h.handleOnKeyDown;if(u!==Ue.Tab&&r.preventDefault(),!s.props.disabledKeyboardNavigation)switch(u){case Ue.Enter:if(s.props.selected==null)break;s.onYearClick(r,i),(d=(l=s.props).setPreSelection)===null||d===void 0||d.call(l,s.props.selected);break;case Ue.ArrowRight:if(s.props.preSelection==null)break;s.handleYearNavigation(i+1,ml(s.props.preSelection,1));break;case Ue.ArrowLeft:if(s.props.preSelection==null)break;s.handleYearNavigation(i-1,Yh(s.props.preSelection,1));break;case Ue.ArrowUp:{if(f===void 0||p===void 0||s.props.preSelection==null)break;var b=bc(f,p).startPeriod,_=hM,j=i-_;if(j<b){var v=p%_;i>=b&&i<b+v?_=v:_+=v,j=i-_}s.handleYearNavigation(j,Yh(s.props.preSelection,_));break}case Ue.ArrowDown:{if(f===void 0||p===void 0||s.props.preSelection==null)break;var T=bc(f,p).endPeriod,_=hM,j=i+_;if(j>T){var v=p%_;i<=T&&i>T-v?_=v:_+=v,j=i+_}s.handleYearNavigation(j,ml(s.props.preSelection,_));break}}x&&x(r)},s.getYearClassNames=function(r){var i=s.props,l=i.date,d=i.minDate,u=i.maxDate,h=i.selected,f=i.excludeDates,p=i.includeDates,x=i.filterDate,b=i.yearClassName;return yr("react-datepicker__year-text","react-datepicker__year-".concat(r),l?b?.(Xi(l,r)):void 0,{"react-datepicker__year-text--selected":h?r===Lt(h):void 0,"react-datepicker__year-text--disabled":(d||u||f||p||x)&&Ox(r,s.props),"react-datepicker__year-text--keyboard-selected":s.isKeyboardSelected(r),"react-datepicker__year-text--range-start":s.isRangeStart(r),"react-datepicker__year-text--range-end":s.isRangeEnd(r),"react-datepicker__year-text--in-range":s.isInRange(r),"react-datepicker__year-text--in-selecting-range":s.isInSelectingRange(r),"react-datepicker__year-text--selecting-range-start":s.isSelectingRangeStart(r),"react-datepicker__year-text--selecting-range-end":s.isSelectingRangeEnd(r),"react-datepicker__year-text--today":s.isCurrentYear(r)})},s.getYearTabIndex=function(r){if(s.props.disabledKeyboardNavigation||s.props.preSelection==null)return"-1";var i=Lt(s.props.preSelection),l=Ox(r,s.props);return r===i&&!l?"0":"-1"},s.getYearContent=function(r){return s.props.renderYearContent?s.props.renderYearContent(r):r},s}return e.prototype.render=function(){var n=this,s=[],r=this.props,i=r.date,l=r.yearItemNumber,d=r.onYearMouseEnter,u=r.onYearMouseLeave;if(i===void 0)return null;for(var h=bc(i,l),f=h.startPeriod,p=h.endPeriod,x=function(j){s.push(he.createElement("div",{ref:b.YEAR_REFS[j-f],onClick:function(v){n.onYearClick(v,j)},onKeyDown:function(v){I7(v)&&(v.preventDefault(),v.key=Ue.Enter),n.onYearKeyDown(v,j)},tabIndex:Number(b.getYearTabIndex(j)),className:b.getYearClassNames(j),onMouseEnter:b.props.usePointerEvent?void 0:function(v){return d(v,j)},onPointerEnter:b.props.usePointerEvent?function(v){return d(v,j)}:void 0,onMouseLeave:b.props.usePointerEvent?void 0:function(v){return u(v,j)},onPointerLeave:b.props.usePointerEvent?function(v){return u(v,j)}:void 0,key:j,"aria-current":b.isCurrentYear(j)?"date":void 0},b.getYearContent(j)))},b=this,_=f;_<=p;_++)x(_);return he.createElement("div",{className:"react-datepicker__year"},he.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},s))},e})(y.Component);function lfe(t,e,n,s){for(var r=[],i=0;i<2*e+1;i++){var l=t+e-i,d=!0;n&&(d=Lt(n)<=l),s&&d&&(d=Lt(s)>=l),d&&r.push(l)}return r}var cfe=(function(t){rr(e,t);function e(n){var s=t.call(this,n)||this;s.renderOptions=function(){var d=s.props.year,u=s.state.yearsList.map(function(p){return he.createElement("div",{className:d===p?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:p,onClick:s.onChange.bind(s,p),"aria-selected":d===p?"true":void 0},d===p?he.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",p)}),h=s.props.minDate?Lt(s.props.minDate):null,f=s.props.maxDate?Lt(s.props.maxDate):null;return(!f||!s.state.yearsList.find(function(p){return p===f}))&&u.unshift(he.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:s.incrementYears},he.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!h||!s.state.yearsList.find(function(p){return p===h}))&&u.push(he.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:s.decrementYears},he.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),u},s.onChange=function(d){s.props.onChange(d)},s.handleClickOutside=function(){s.props.onCancel()},s.shiftYears=function(d){var u=s.state.yearsList.map(function(h){return h+d});s.setState({yearsList:u})},s.incrementYears=function(){return s.shiftYears(1)},s.decrementYears=function(){return s.shiftYears(-1)};var r=n.yearDropdownItemNumber,i=n.scrollableYearDropdown,l=r||(i?10:5);return s.state={yearsList:lfe(s.props.year,l,s.props.minDate,s.props.maxDate)},s.dropdownRef=y.createRef(),s}return e.prototype.componentDidMount=function(){var n=this.dropdownRef.current;if(n){var s=n.children?Array.from(n.children):null,r=s?s.find(function(i){return i.ariaSelected}):null;n.scrollTop=r&&r instanceof HTMLElement?r.offsetTop+(r.clientHeight-n.clientHeight)/2:(n.scrollHeight-n.clientHeight)/2}},e.prototype.render=function(){var n=yr({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return he.createElement(dv,{className:n,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},e})(y.Component),dfe=(function(t){rr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={dropdownVisible:!1},n.renderSelectOptions=function(){for(var s=n.props.minDate?Lt(n.props.minDate):1900,r=n.props.maxDate?Lt(n.props.maxDate):2100,i=[],l=s;l<=r;l++)i.push(he.createElement("option",{key:l,value:l},l));return i},n.onSelectChange=function(s){n.onChange(parseInt(s.target.value))},n.renderSelectMode=function(){return he.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())},n.renderReadView=function(s){return he.createElement("div",{key:"read",style:{visibility:s?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(r){return n.toggleDropdown(r)}},he.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),he.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))},n.renderDropdown=function(){return he.createElement(cfe,rn({key:"dropdown"},n.props,{onChange:n.onChange,onCancel:n.toggleDropdown}))},n.renderScrollMode=function(){var s=n.state.dropdownVisible,r=[n.renderReadView(!s)];return s&&r.unshift(n.renderDropdown()),r},n.onChange=function(s){n.toggleDropdown(),s!==n.props.year&&n.props.onChange(s)},n.toggleDropdown=function(s){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,s)})},n.handleYearChange=function(s,r){var i;(i=n.onSelect)===null||i===void 0||i.call(n,s,r),n.setOpen()},n.onSelect=function(s,r){var i,l;(l=(i=n.props).onSelect)===null||l===void 0||l.call(i,s,r)},n.setOpen=function(){var s,r;(r=(s=n.props).setOpen)===null||r===void 0||r.call(s,!0)},n}return e.prototype.render=function(){var n;switch(this.props.dropdownMode){case"scroll":n=this.renderScrollMode();break;case"select":n=this.renderSelectMode();break}return he.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},n)},e})(y.Component),ufe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],hfe=function(t){var e=(t.className||"").split(/\s+/);return ufe.some(function(n){return e.indexOf(n)>=0})},mfe=(function(t){rr(e,t);function e(n){var s=t.call(this,n)||this;return s.monthContainer=void 0,s.handleClickOutside=function(r){s.props.onClickOutside(r)},s.setClickOutsideRef=function(){return s.containerRef.current},s.handleDropdownFocus=function(r){var i,l;hfe(r.target)&&((l=(i=s.props).onDropdownFocus)===null||l===void 0||l.call(i,r))},s.getDateInView=function(){var r=s.props,i=r.preSelection,l=r.selected,d=r.openToDate,u=M7(s.props),h=L7(s.props),f=kn(),p=d||l||i;return p||(u&&tu(f,u)?u:h&&Uc(f,h)?h:f)},s.increaseMonth=function(){s.setState(function(r){var i=r.date;return{date:ji(i,1)}},function(){return s.handleMonthChange(s.state.date)})},s.decreaseMonth=function(){s.setState(function(r){var i=r.date;return{date:Fd(i,1)}},function(){return s.handleMonthChange(s.state.date)})},s.handleDayClick=function(r,i,l){s.props.onSelect(r,i,l),s.props.setPreSelection&&s.props.setPreSelection(r)},s.handleDayMouseEnter=function(r){s.setState({selectingDate:r}),s.props.onDayMouseEnter&&s.props.onDayMouseEnter(r)},s.handleMonthMouseLeave=function(){s.setState({selectingDate:void 0}),s.props.onMonthMouseLeave&&s.props.onMonthMouseLeave()},s.handleYearMouseEnter=function(r,i){s.setState({selectingDate:Xi(kn(),i)}),s.props.onYearMouseEnter&&s.props.onYearMouseEnter(r,i)},s.handleYearMouseLeave=function(r,i){s.props.onYearMouseLeave&&s.props.onYearMouseLeave(r,i)},s.handleYearChange=function(r){var i,l,d,u;(l=(i=s.props).onYearChange)===null||l===void 0||l.call(i,r),s.setState({isRenderAriaLiveMessage:!0}),s.props.adjustDateOnChange&&(s.props.onSelect(r),(u=(d=s.props).setOpen)===null||u===void 0||u.call(d,!0)),s.props.setPreSelection&&s.props.setPreSelection(r)},s.getEnabledPreSelectionDateForMonth=function(r){if(!Wa(r,s.props))return r;for(var i=gl(r),l=Mme(r),d=Gce(l,i),u=null,h=0;h<=d;h++){var f=wi(i,h);if(!Wa(f,s.props)){u=f;break}}return u},s.handleMonthChange=function(r){var i,l,d,u=(i=s.getEnabledPreSelectionDateForMonth(r))!==null&&i!==void 0?i:r;s.handleCustomMonthChange(u),s.props.adjustDateOnChange&&(s.props.onSelect(u),(d=(l=s.props).setOpen)===null||d===void 0||d.call(l,!0)),s.props.setPreSelection&&s.props.setPreSelection(u)},s.handleCustomMonthChange=function(r){var i,l;(l=(i=s.props).onMonthChange)===null||l===void 0||l.call(i,r),s.setState({isRenderAriaLiveMessage:!0})},s.handleMonthYearChange=function(r){s.handleYearChange(r),s.handleMonthChange(r)},s.changeYear=function(r){s.setState(function(i){var l=i.date;return{date:Xi(l,Number(r))}},function(){return s.handleYearChange(s.state.date)})},s.changeMonth=function(r){s.setState(function(i){var l=i.date;return{date:_a(l,Number(r))}},function(){return s.handleMonthChange(s.state.date)})},s.changeMonthYear=function(r){s.setState(function(i){var l=i.date;return{date:Xi(_a(l,Wr(r)),Lt(r))}},function(){return s.handleMonthYearChange(s.state.date)})},s.header=function(r){r===void 0&&(r=s.state.date);var i=Cc(r,s.props.locale,s.props.calendarStartDay),l=[];return s.props.showWeekNumbers&&l.push(he.createElement("div",{key:"W",className:"react-datepicker__day-name"},s.props.weekLabel||"#")),l.concat([0,1,2,3,4,5,6].map(function(d){var u=wi(i,d),h=s.formatWeekday(u,s.props.locale),f=s.props.weekDayClassName?s.props.weekDayClassName(u):void 0;return he.createElement("div",{key:d,"aria-label":Qn(u,"EEEE",s.props.locale),className:yr("react-datepicker__day-name",f)},h)}))},s.formatWeekday=function(r,i){return s.props.formatWeekDay?Lme(r,s.props.formatWeekDay,i):s.props.useWeekdaysShort?Ome(r,i):Ime(r,i)},s.decreaseYear=function(){s.setState(function(r){var i,l=r.date;return{date:Yh(l,s.props.showYearPicker?(i=s.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})},s.clearSelectingDate=function(){s.setState({selectingDate:void 0})},s.renderPreviousButton=function(){var r,i,l;if(!s.props.renderCustomHeader){var d=(r=s.props.monthsShown)!==null&&r!==void 0?r:e.defaultProps.monthsShown,u=s.props.showPreviousMonths?d-1:0,h=(i=s.props.monthSelectedIn)!==null&&i!==void 0?i:u,f=Fd(s.state.date,h),p;switch(!0){case s.props.showMonthYearPicker:p=rM(s.state.date,s.props);break;case s.props.showYearPicker:p=$me(s.state.date,s.props);break;case s.props.showQuarterYearPicker:p=Bme(s.state.date,s.props);break;default:p=nM(f,s.props);break}if(!(!((l=s.props.forceShowMonthNavigation)!==null&&l!==void 0?l:e.defaultProps.forceShowMonthNavigation)&&!s.props.showDisabledMonthNavigation&&p||s.props.showTimeSelectOnly)){var x=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],b=["react-datepicker__navigation","react-datepicker__navigation--previous"],_=s.decreaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(_=s.decreaseYear),p&&s.props.showDisabledMonthNavigation&&(b.push("react-datepicker__navigation--previous--disabled"),_=void 0);var j=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,v=s.props,T=v.previousMonthButtonLabel,P=T===void 0?e.defaultProps.previousMonthButtonLabel:T,A=v.previousYearButtonLabel,C=A===void 0?e.defaultProps.previousYearButtonLabel:A,M=s.props,L=M.previousMonthAriaLabel,k=L===void 0?typeof P=="string"?P:"Previous Month":L,R=M.previousYearAriaLabel,S=R===void 0?typeof C=="string"?C:"Previous Year":R;return he.createElement("button",{type:"button",className:b.join(" "),onClick:_,onKeyDown:s.props.handleOnKeyDown,"aria-label":j?S:k},he.createElement("span",{className:x.join(" ")},j?C:P))}}},s.increaseYear=function(){s.setState(function(r){var i,l=r.date;return{date:ml(l,s.props.showYearPicker?(i=s.props.yearItemNumber)!==null&&i!==void 0?i:e.defaultProps.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})},s.renderNextButton=function(){var r;if(!s.props.renderCustomHeader){var i;switch(!0){case s.props.showMonthYearPicker:i=aM(s.state.date,s.props);break;case s.props.showYearPicker:i=zme(s.state.date,s.props);break;case s.props.showQuarterYearPicker:i=Fme(s.state.date,s.props);break;default:i=sM(s.state.date,s.props);break}if(!(!((r=s.props.forceShowMonthNavigation)!==null&&r!==void 0?r:e.defaultProps.forceShowMonthNavigation)&&!s.props.showDisabledMonthNavigation&&i||s.props.showTimeSelectOnly)){var l=["react-datepicker__navigation","react-datepicker__navigation--next"],d=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];s.props.showTimeSelect&&l.push("react-datepicker__navigation--next--with-time"),s.props.todayButton&&l.push("react-datepicker__navigation--next--with-today-button");var u=s.increaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(u=s.increaseYear),i&&s.props.showDisabledMonthNavigation&&(l.push("react-datepicker__navigation--next--disabled"),u=void 0);var h=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,f=s.props,p=f.nextMonthButtonLabel,x=p===void 0?e.defaultProps.nextMonthButtonLabel:p,b=f.nextYearButtonLabel,_=b===void 0?e.defaultProps.nextYearButtonLabel:b,j=s.props,v=j.nextMonthAriaLabel,T=v===void 0?typeof x=="string"?x:"Next Month":v,P=j.nextYearAriaLabel,A=P===void 0?typeof _=="string"?_:"Next Year":P;return he.createElement("button",{type:"button",className:l.join(" "),onClick:u,onKeyDown:s.props.handleOnKeyDown,"aria-label":h?A:T},he.createElement("span",{className:d.join(" ")},h?_:x))}}},s.renderCurrentMonth=function(r){r===void 0&&(r=s.state.date);var i=["react-datepicker__current-month"];return s.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),s.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),s.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),he.createElement("h2",{className:i.join(" ")},Qn(r,s.props.dateFormat,s.props.locale))},s.renderYearDropdown=function(r){if(r===void 0&&(r=!1),!(!s.props.showYearDropdown||r))return he.createElement(dfe,rn({},e.defaultProps,s.props,{date:s.state.date,onChange:s.changeYear,year:Lt(s.state.date)}))},s.renderMonthDropdown=function(r){if(r===void 0&&(r=!1),!(!s.props.showMonthDropdown||r))return he.createElement(nfe,rn({},e.defaultProps,s.props,{month:Wr(s.state.date),onChange:s.changeMonth}))},s.renderMonthYearDropdown=function(r){if(r===void 0&&(r=!1),!(!s.props.showMonthYearDropdown||r))return he.createElement(afe,rn({},e.defaultProps,s.props,{date:s.state.date,onChange:s.changeMonthYear}))},s.handleTodayButtonClick=function(r){s.props.onSelect(XP(),r),s.props.setPreSelection&&s.props.setPreSelection(XP())},s.renderTodayButton=function(){if(!(!s.props.todayButton||s.props.showTimeSelectOnly))return he.createElement("div",{className:"react-datepicker__today-button",onClick:s.handleTodayButtonClick},s.props.todayButton)},s.renderDefaultHeader=function(r){var i=r.monthDate,l=r.i;return he.createElement("div",{className:"react-datepicker__header ".concat(s.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},s.renderCurrentMonth(i),he.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(s.props.dropdownMode),onFocus:s.handleDropdownFocus},s.renderMonthDropdown(l!==0),s.renderMonthYearDropdown(l!==0),s.renderYearDropdown(l!==0)),he.createElement("div",{className:"react-datepicker__day-names"},s.header(i)))},s.renderCustomHeader=function(r){var i,l,d=r.monthDate,u=r.i;if(s.props.showTimeSelect&&!s.state.monthContainer||s.props.showTimeSelectOnly)return null;var h=nM(s.state.date,s.props),f=sM(s.state.date,s.props),p=rM(s.state.date,s.props),x=aM(s.state.date,s.props),b=!s.props.showMonthYearPicker&&!s.props.showQuarterYearPicker&&!s.props.showYearPicker;return he.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:s.props.onDropdownFocus},(l=(i=s.props).renderCustomHeader)===null||l===void 0?void 0:l.call(i,rn(rn({},s.state),{customHeaderCount:u,monthDate:d,changeMonth:s.changeMonth,changeYear:s.changeYear,decreaseMonth:s.decreaseMonth,increaseMonth:s.increaseMonth,decreaseYear:s.decreaseYear,increaseYear:s.increaseYear,prevMonthButtonDisabled:h,nextMonthButtonDisabled:f,prevYearButtonDisabled:p,nextYearButtonDisabled:x})),b&&he.createElement("div",{className:"react-datepicker__day-names"},s.header(d)))},s.renderYearHeader=function(r){var i=r.monthDate,l=s.props,d=l.showYearPicker,u=l.yearItemNumber,h=u===void 0?e.defaultProps.yearItemNumber:u,f=bc(i,h),p=f.startPeriod,x=f.endPeriod;return he.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},d?"".concat(p," - ").concat(x):Lt(i))},s.renderHeader=function(r){var i=r.monthDate,l=r.i,d=l===void 0?0:l,u={monthDate:i,i:d};switch(!0){case s.props.renderCustomHeader!==void 0:return s.renderCustomHeader(u);case(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker):return s.renderYearHeader(u);default:return s.renderDefaultHeader(u)}},s.renderMonths=function(){var r,i;if(!(s.props.showTimeSelectOnly||s.props.showYearPicker)){for(var l=[],d=(r=s.props.monthsShown)!==null&&r!==void 0?r:e.defaultProps.monthsShown,u=s.props.showPreviousMonths?d-1:0,h=s.props.showMonthYearPicker||s.props.showQuarterYearPicker?ml(s.state.date,u):Fd(s.state.date,u),f=(i=s.props.monthSelectedIn)!==null&&i!==void 0?i:u,p=0;p<d;++p){var x=p-f+u,b=s.props.showMonthYearPicker||s.props.showQuarterYearPicker?ml(h,x):ji(h,x),_="month-".concat(p),j=p<d-1,v=p>0;l.push(he.createElement("div",{key:_,ref:function(T){s.monthContainer=T??void 0},className:"react-datepicker__month-container"},s.renderHeader({monthDate:b,i:p}),he.createElement(efe,rn({},e.defaultProps,s.props,{ariaLabelPrefix:s.props.monthAriaLabelPrefix,day:b,onDayClick:s.handleDayClick,handleOnKeyDown:s.props.handleOnDayKeyDown,handleOnMonthKeyDown:s.props.handleOnKeyDown,onDayMouseEnter:s.handleDayMouseEnter,onMouseLeave:s.handleMonthMouseLeave,orderInDisplay:p,selectingDate:s.state.selectingDate,monthShowsDuplicateDaysEnd:j,monthShowsDuplicateDaysStart:v}))))}return l}},s.renderYears=function(){if(!s.props.showTimeSelectOnly&&s.props.showYearPicker)return he.createElement("div",{className:"react-datepicker__year--container"},s.renderHeader({monthDate:s.state.date}),he.createElement(ofe,rn({},e.defaultProps,s.props,{selectingDate:s.state.selectingDate,date:s.state.date,onDayClick:s.handleDayClick,clearSelectingDate:s.clearSelectingDate,onYearMouseEnter:s.handleYearMouseEnter,onYearMouseLeave:s.handleYearMouseLeave})))},s.renderTimeSection=function(){if(s.props.showTimeSelect&&(s.state.monthContainer||s.props.showTimeSelectOnly))return he.createElement(ife,rn({},e.defaultProps,s.props,{onChange:s.props.onTimeChange,format:s.props.timeFormat,intervals:s.props.timeIntervals,monthRef:s.state.monthContainer}))},s.renderInputTimeSection=function(){var r=s.props.selected?new Date(s.props.selected):void 0,i=r&&al(r)&&!!s.props.selected,l=i?"".concat(oM(r.getHours()),":").concat(oM(r.getMinutes())):"";if(s.props.showTimeInput)return he.createElement(Kme,rn({},e.defaultProps,s.props,{date:r,timeString:l,onChange:s.props.onTimeChange}))},s.renderAriaLiveRegion=function(){var r,i=bc(s.state.date,(r=s.props.yearItemNumber)!==null&&r!==void 0?r:e.defaultProps.yearItemNumber),l=i.startPeriod,d=i.endPeriod,u;return s.props.showYearPicker?u="".concat(l," - ").concat(d):s.props.showMonthYearPicker||s.props.showQuarterYearPicker?u=Lt(s.state.date):u="".concat(uC(Wr(s.state.date),s.props.locale)," ").concat(Lt(s.state.date)),he.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},s.state.isRenderAriaLiveMessage&&u)},s.renderChildren=function(){if(s.props.children)return he.createElement("div",{className:"react-datepicker__children-container"},s.props.children)},s.containerRef=y.createRef(),s.state={date:s.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},s}return Object.defineProperty(e,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:fg}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){var n=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){n.setState({monthContainer:n.monthContainer})})())},e.prototype.componentDidUpdate=function(n){var s=this;if(this.props.preSelection&&(!en(this.props.preSelection,n.preSelection)||this.props.monthSelectedIn!==n.monthSelectedIn)){var r=!zr(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return r&&s.handleCustomMonthChange(s.state.date)})}else this.props.openToDate&&!en(this.props.openToDate,n.openToDate)&&this.setState({date:this.props.openToDate})},e.prototype.render=function(){var n=this.props.container||Cme;return he.createElement(dv,{onClickOutside:this.handleClickOutside,style:{display:"contents"},containerRef:this.containerRef,ignoreClass:this.props.outsideClickIgnoreClass},he.createElement(n,{className:yr("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))},e})(y.Component),ffe=function(t){var e=t.icon,n=t.className,s=n===void 0?"":n,r=t.onClick,i="react-datepicker__calendar-icon";return typeof e=="string"?he.createElement("i",{className:"".concat(i," ").concat(e," ").concat(s),"aria-hidden":"true",onClick:r}):he.isValidElement(e)?he.cloneElement(e,{className:"".concat(e.props.className||""," ").concat(i," ").concat(s),onClick:function(l){typeof e.props.onClick=="function"&&e.props.onClick(l),typeof r=="function"&&r(l)}}):he.createElement("svg",{className:"".concat(i," ").concat(s),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:r},he.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},O7=(function(t){rr(e,t);function e(n){var s=t.call(this,n)||this;return s.portalRoot=null,s.el=document.createElement("div"),s}return e.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},e.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},e.prototype.render=function(){return UB.createPortal(this.props.children,this.el)},e})(y.Component),pfe="[tabindex], a, button, input, select, textarea",gfe=function(t){return(t instanceof HTMLAnchorElement||!t.disabled)&&t.tabIndex!==-1},V7=(function(t){rr(e,t);function e(n){var s=t.call(this,n)||this;return s.getTabChildren=function(){var r;return Array.prototype.slice.call((r=s.tabLoopRef.current)===null||r===void 0?void 0:r.querySelectorAll(pfe),1,-1).filter(gfe)},s.handleFocusStart=function(){var r=s.getTabChildren();r&&r.length>1&&r[r.length-1].focus()},s.handleFocusEnd=function(){var r=s.getTabChildren();r&&r.length>1&&r[0].focus()},s.tabLoopRef=y.createRef(),s}return e.prototype.render=function(){var n;return((n=this.props.enableTabLoop)!==null&&n!==void 0?n:e.defaultProps.enableTabLoop)?he.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},he.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,he.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},e.defaultProps={enableTabLoop:!0},e})(y.Component);function xfe(t){var e=function(n){var s,r=typeof n.hidePopper=="boolean"?n.hidePopper:!0,i=y.useRef(null),l=jme(rn({open:!r,whileElementsMounted:sme,placement:n.popperPlacement,middleware:io([hme({padding:15}),ume(10),mme({element:i})],(s=n.popperModifiers)!==null&&s!==void 0?s:[],!0)},n.popperProps)),d=rn(rn({},n),{hidePopper:r,popperProps:rn(rn({},l),{arrowRef:i})});return he.createElement(t,rn({},d))};return e}var yfe=(function(t){rr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n=this.props,s=n.className,r=n.wrapperClassName,i=n.hidePopper,l=i===void 0?e.defaultProps.hidePopper:i,d=n.popperComponent,u=n.targetComponent,h=n.enableTabLoop,f=n.popperOnKeyDown,p=n.portalId,x=n.portalHost,b=n.popperProps,_=n.showArrow,j=void 0;if(!l){var v=yr("react-datepicker-popper",s);j=he.createElement(V7,{enableTabLoop:h},he.createElement("div",{ref:b.refs.setFloating,style:b.floatingStyles,className:v,"data-placement":b.placement,onKeyDown:f},d,_&&he.createElement(yme,{ref:b.arrowRef,context:b.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(j=y.createElement(this.props.popperContainer,{},j)),p&&!l&&(j=he.createElement(O7,{portalId:p,portalHost:x},j));var T=yr("react-datepicker-wrapper",r);return he.createElement(he.Fragment,null,he.createElement("div",{ref:b.refs.setReference,className:T},u),j)},e})(y.Component),bfe=xfe(yfe),mM="react-datepicker-ignore-onclickoutside";function vfe(t,e){return t&&e?Wr(t)!==Wr(e)||Lt(t)!==Lt(e):t!==e}var N1="Date input not valid.",zy=(function(t){rr(e,t);function e(n){var s=t.call(this,n)||this;return s.calendar=null,s.input=null,s.getPreSelection=function(){return s.props.openToDate?s.props.openToDate:s.props.selectsEnd&&s.props.startDate?s.props.startDate:s.props.selectsStart&&s.props.endDate?s.props.endDate:kn()},s.modifyHolidays=function(){var r;return(r=s.props.holidays)===null||r===void 0?void 0:r.reduce(function(i,l){var d=new Date(l.date);return al(d)?io(io([],i,!0),[rn(rn({},l),{date:d})],!1):i},[])},s.calcInitialState=function(){var r,i=s.getPreSelection(),l=M7(s.props),d=L7(s.props),u=l&&tu(i,Ix(l))?l:d&&Uc(i,ZP(d))?d:i;return{open:s.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(r=s.props.selectsRange?s.props.startDate:s.props.selected)!==null&&r!==void 0?r:u,highlightDates:iM(s.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},s.resetHiddenStatus=function(){s.setState(rn(rn({},s.state),{wasHidden:!1}))},s.setHiddenStatus=function(){s.setState(rn(rn({},s.state),{wasHidden:!0}))},s.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&s.setHiddenStatus()},s.clearPreventFocusTimeout=function(){s.preventFocusTimeout&&clearTimeout(s.preventFocusTimeout)},s.safeFocus=function(){setTimeout(function(){var r,i;(i=(r=s.input)===null||r===void 0?void 0:r.focus)===null||i===void 0||i.call(r,{preventScroll:!0})},0)},s.safeBlur=function(){setTimeout(function(){var r,i;(i=(r=s.input)===null||r===void 0?void 0:r.blur)===null||i===void 0||i.call(r)},0)},s.setFocus=function(){s.safeFocus()},s.setBlur=function(){s.safeBlur(),s.cancelFocusInput()},s.setOpen=function(r,i){i===void 0&&(i=!1),s.setState({open:r,preSelection:r&&s.state.open?s.state.preSelection:s.calcInitialState().preSelection,lastPreSelectChange:j1},function(){r||s.setState(function(l){return{focused:i?l.focused:!1}},function(){!i&&s.setBlur(),s.setState({inputValue:null})})})},s.inputOk=function(){return fl(s.state.preSelection)},s.isCalendarOpen=function(){return s.props.open===void 0?s.state.open&&!s.props.disabled&&!s.props.readOnly:s.props.open},s.handleFocus=function(r){var i,l,d=s.state.wasHidden,u=d?s.state.open:!0;d&&s.resetHiddenStatus(),!s.state.preventFocus&&u&&((l=(i=s.props).onFocus)===null||l===void 0||l.call(i,r),!s.props.preventOpenOnFocus&&!s.props.readOnly&&s.setOpen(!0)),s.setState({focused:!0})},s.sendFocusBackToInput=function(){s.preventFocusTimeout&&s.clearPreventFocusTimeout(),s.setState({preventFocus:!0},function(){s.preventFocusTimeout=setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})})},s.cancelFocusInput=function(){clearTimeout(s.inputFocusTimeout),s.inputFocusTimeout=void 0},s.deferFocusInput=function(){s.cancelFocusInput(),s.inputFocusTimeout=setTimeout(function(){return s.setFocus()},1)},s.handleDropdownFocus=function(){s.cancelFocusInput()},s.handleBlur=function(r){var i,l;(!s.state.open||s.props.withPortal||s.props.showTimeInput)&&((l=(i=s.props).onBlur)===null||l===void 0||l.call(i,r)),s.setState({focused:!1})},s.handleCalendarClickOutside=function(r){var i,l;s.props.inline||s.setOpen(!1),(l=(i=s.props).onClickOutside)===null||l===void 0||l.call(i,r),s.props.withPortal&&r.preventDefault()},s.handleChange=function(){for(var r,i,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var u=l[0];if(!(s.props.onChangeRaw&&(s.props.onChangeRaw.apply(s,l),!u||typeof u.isDefaultPrevented!="function"||u.isDefaultPrevented()))){s.setState({inputValue:u?.target instanceof HTMLInputElement?u.target.value:null,lastPreSelectChange:wfe});var h=s.props,f=h.dateFormat,p=f===void 0?e.defaultProps.dateFormat:f,x=h.strictParsing,b=x===void 0?e.defaultProps.strictParsing:x,_=h.selectsRange,j=h.startDate,v=h.endDate,T=u?.target instanceof HTMLInputElement?u.target.value:"";if(_){var P=T.split("-",2).map(function(O){return O.trim()}),A=P[0],C=P[1],M=w1(A??"",p,s.props.locale,b),L=w1(C??"",p,s.props.locale,b),k=j?.getTime()!==M?.getTime(),R=v?.getTime()!==L?.getTime();if(!k&&!R||M&&Wa(M,s.props)||L&&Wa(L,s.props))return;(i=(r=s.props).onChange)===null||i===void 0||i.call(r,[M,L],u)}else{var S=w1(T,p,s.props.locale,b,s.props.minDate);s.props.showTimeSelectOnly&&s.props.selected&&S&&!en(S,s.props.selected)&&(S=ihe(s.props.selected,{hours:go(S),minutes:xo(S),seconds:pl(S)})),(S||!T)&&s.setSelected(S,u,!0)}}},s.handleSelect=function(r,i,l){if(s.props.shouldCloseOnSelect&&!s.props.showTimeSelect&&s.sendFocusBackToInput(),s.props.onChangeRaw&&s.props.onChangeRaw(i),s.setSelected(r,i,!1,l),s.props.showDateSelect&&s.setState({isRenderAriaLiveMessage:!0}),!s.props.shouldCloseOnSelect||s.props.showTimeSelect)s.setPreSelection(r);else if(!s.props.inline){s.props.selectsRange||s.setOpen(!1);var d=s.props,u=d.startDate,h=d.endDate;u&&!h&&(s.props.swapRange||!dM(r,u))&&s.setOpen(!1)}},s.setSelected=function(r,i,l,d){var u,h,f=r;if(s.props.showYearPicker){if(f!==null&&Ox(Lt(f),s.props))return}else if(s.props.showMonthYearPicker){if(f!==null&&P7(f,s.props))return}else if(f!==null&&Wa(f,s.props))return;var p=s.props,x=p.onChange,b=p.selectsRange,_=p.startDate,j=p.endDate,v=p.selectsMultiple,T=p.selectedDates,P=p.minTime,A=p.swapRange;if(!Md(s.props.selected,f)||s.props.allowSameDay||b||v)if(f!==null&&(s.props.selected&&(!l||!s.props.showTimeSelect&&!s.props.showTimeSelectOnly&&!s.props.showTimeInput)&&(f=_1(f,{hour:go(s.props.selected),minute:xo(s.props.selected),second:pl(s.props.selected)})),!l&&(s.props.showTimeSelect||s.props.showTimeSelectOnly)&&P&&(f=_1(f,{hour:P.getHours(),minute:P.getMinutes(),second:P.getSeconds()})),s.props.inline||s.setState({preSelection:f}),s.props.focusSelectedMonth||s.setState({monthSelectedIn:d})),b){var C=!_&&!j,M=_&&!j,L=_&&j;C?x?.([f,null],i):M&&(f===null?x?.([null,null],i):dM(f,_)?x?.(A?[f,_]:[f,null],i):x?.([_,f],i)),L&&x?.([f,null],i)}else if(v){if(f!==null)if(!T?.length)x?.([f],i);else{var k=T.some(function(S){return en(S,f)});if(k){var R=T.filter(function(S){return!en(S,f)});x?.(R,i)}else x?.(io(io([],T,!0),[f],!1),i)}}else x?.(f,i);l||((h=(u=s.props).onSelect)===null||h===void 0||h.call(u,f,i),s.setState({inputValue:null}))},s.setPreSelection=function(r){var i=fl(s.props.minDate),l=fl(s.props.maxDate),d=!0;if(r){var u=Ix(r);if(i&&l)d=Bf(r,s.props.minDate,s.props.maxDate);else if(i){var h=Ix(s.props.minDate);d=Uc(r,h)||Md(u,h)}else if(l){var f=ZP(s.props.maxDate);d=tu(r,f)||Md(u,f)}}d&&s.setState({preSelection:r})},s.toggleCalendar=function(){s.setOpen(!s.state.open)},s.handleTimeChange=function(r){var i,l;if(!(s.props.selectsRange||s.props.selectsMultiple)){var d=s.props.selected?s.props.selected:s.getPreSelection(),u=s.props.selected?r:_1(d,{hour:go(r),minute:xo(r)});s.setState({preSelection:u}),(l=(i=s.props).onChange)===null||l===void 0||l.call(i,u),s.props.shouldCloseOnSelect&&!s.props.showTimeInput&&(s.sendFocusBackToInput(),s.setOpen(!1)),s.props.showTimeInput&&s.setOpen(!0),(s.props.showTimeSelectOnly||s.props.showTimeSelect)&&s.setState({isRenderAriaLiveMessage:!0}),s.setState({inputValue:null})}},s.onInputClick=function(){var r,i;!s.props.disabled&&!s.props.readOnly&&s.setOpen(!0),(i=(r=s.props).onInputClick)===null||i===void 0||i.call(r)},s.onInputKeyDown=function(r){var i,l,d,u,h,f;(l=(i=s.props).onKeyDown)===null||l===void 0||l.call(i,r);var p=r.key;if(!s.state.open&&!s.props.inline&&!s.props.preventOpenOnFocus){(p===Ue.ArrowDown||p===Ue.ArrowUp||p===Ue.Enter)&&((d=s.onInputClick)===null||d===void 0||d.call(s));return}if(s.state.open){if(p===Ue.ArrowDown||p===Ue.ArrowUp){r.preventDefault();var x=s.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":s.props.showWeekPicker&&s.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':s.props.showFullMonthYearPicker||s.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',b=((u=s.calendar)===null||u===void 0?void 0:u.containerRef.current)instanceof Element&&s.calendar.containerRef.current.querySelector(x);b instanceof HTMLElement&&b.focus({preventScroll:!0});return}var _=kn(s.state.preSelection);p===Ue.Enter?(r.preventDefault(),r.target.blur(),s.inputOk()&&s.state.lastPreSelectChange===j1?(s.handleSelect(_,r),!s.props.shouldCloseOnSelect&&s.setPreSelection(_)):s.setOpen(!1)):p===Ue.Escape?(r.preventDefault(),r.target.blur(),s.sendFocusBackToInput(),s.setOpen(!1)):p===Ue.Tab&&s.setOpen(!1),s.inputOk()||(f=(h=s.props).onInputError)===null||f===void 0||f.call(h,{code:1,msg:N1})}},s.onPortalKeyDown=function(r){var i=r.key;i===Ue.Escape&&(r.preventDefault(),s.setState({preventFocus:!0},function(){s.setOpen(!1),setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})}))},s.onDayKeyDown=function(r){var i,l,d,u,h,f,p=s.props,x=p.minDate,b=p.maxDate,_=p.disabledKeyboardNavigation,j=p.showWeekPicker,v=p.shouldCloseOnSelect,T=p.locale,P=p.calendarStartDay,A=p.adjustDateOnChange,C=p.inline;if((l=(i=s.props).onKeyDown)===null||l===void 0||l.call(i,r),!_){var M=r.key,L=r.shiftKey,k=kn(s.state.preSelection),R=function(G,B){var z=B;switch(G){case Ue.ArrowRight:z=j?Ay(B,1):wi(B,1);break;case Ue.ArrowLeft:z=j?VP(B):zue(B);break;case Ue.ArrowUp:z=VP(B);break;case Ue.ArrowDown:z=Ay(B,1);break;case Ue.PageUp:z=L?Yh(B,1):Fd(B,1);break;case Ue.PageDown:z=L?ml(B,1):ji(B,1);break;case Ue.Home:z=Cc(B,T,P);break;case Ue.End:z=Pme(B);break}return z},S=function(G,B){for(var z=40,q=G,Z=!1,ee=0,H=R(G,B);!Z;){if(ee>=z){H=B;break}x&&H<x&&(q=Ue.ArrowRight,H=Wa(x,s.props)?R(q,H):x),b&&H>b&&(q=Ue.ArrowLeft,H=Wa(b,s.props)?R(q,H):b),Wa(H,s.props)?((q===Ue.PageUp||q===Ue.Home)&&(q=Ue.ArrowRight),(q===Ue.PageDown||q===Ue.End)&&(q=Ue.ArrowLeft),H=R(q,H)):Z=!0,ee++}return H};if(M===Ue.Enter){r.preventDefault(),s.handleSelect(k,r),!v&&s.setPreSelection(k);return}else if(M===Ue.Escape){r.preventDefault(),s.setOpen(!1),s.inputOk()||(u=(d=s.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:N1});return}var O=null;switch(M){case Ue.ArrowLeft:case Ue.ArrowRight:case Ue.ArrowUp:case Ue.ArrowDown:case Ue.PageUp:case Ue.PageDown:case Ue.Home:case Ue.End:O=S(M,k);break}if(!O){(f=(h=s.props).onInputError)===null||f===void 0||f.call(h,{code:1,msg:N1});return}if(r.preventDefault(),s.setState({lastPreSelectChange:j1}),A&&s.setSelected(O),s.setPreSelection(O),C){var I=Wr(k),F=Wr(O),$=Lt(k),Q=Lt(O);I!==F||$!==Q?s.setState({shouldFocusDayInline:!0}):s.setState({shouldFocusDayInline:!1})}}},s.onPopperKeyDown=function(r){var i=r.key;i===Ue.Escape&&(r.preventDefault(),s.sendFocusBackToInput())},s.onClearClick=function(r){r&&r.preventDefault&&r.preventDefault(),s.sendFocusBackToInput();var i=s.props,l=i.selectsRange,d=i.onChange;d?.(l?[null,null]:null,r),s.setState({inputValue:null})},s.clear=function(){s.onClearClick()},s.onScroll=function(r){typeof s.props.closeOnScroll=="boolean"&&s.props.closeOnScroll?(r.target===document||r.target===document.documentElement||r.target===document.body)&&s.setOpen(!1):typeof s.props.closeOnScroll=="function"&&s.props.closeOnScroll(r)&&s.setOpen(!1)},s.renderCalendar=function(){var r,i;return!s.props.inline&&!s.isCalendarOpen()?null:he.createElement(mfe,rn({showMonthYearDropdown:void 0,ref:function(l){s.calendar=l}},s.props,s.state,{setOpen:s.setOpen,dateFormat:(r=s.props.dateFormatCalendar)!==null&&r!==void 0?r:e.defaultProps.dateFormatCalendar,onSelect:s.handleSelect,onClickOutside:s.handleCalendarClickOutside,holidays:qme(s.modifyHolidays()),outsideClickIgnoreClass:mM,onDropdownFocus:s.handleDropdownFocus,onTimeChange:s.handleTimeChange,className:s.props.calendarClassName,container:s.props.calendarContainer,handleOnKeyDown:s.props.onKeyDown,handleOnDayKeyDown:s.onDayKeyDown,setPreSelection:s.setPreSelection,dropdownMode:(i=s.props.dropdownMode)!==null&&i!==void 0?i:e.defaultProps.dropdownMode}),s.props.children)},s.renderAriaLiveRegion=function(){var r=s.props,i=r.dateFormat,l=i===void 0?e.defaultProps.dateFormat:i,d=r.locale,u=s.props.showTimeInput||s.props.showTimeSelect,h=u?"PPPPp":"PPPP",f;return s.props.selectsRange?f="Selected start date: ".concat(qa(s.props.startDate,{dateFormat:h,locale:d}),". ").concat(s.props.endDate?"End date: "+qa(s.props.endDate,{dateFormat:h,locale:d}):""):s.props.showTimeSelectOnly?f="Selected time: ".concat(qa(s.props.selected,{dateFormat:l,locale:d})):s.props.showYearPicker?f="Selected year: ".concat(qa(s.props.selected,{dateFormat:"yyyy",locale:d})):s.props.showMonthYearPicker?f="Selected month: ".concat(qa(s.props.selected,{dateFormat:"MMMM yyyy",locale:d})):s.props.showQuarterYearPicker?f="Selected quarter: ".concat(qa(s.props.selected,{dateFormat:"yyyy, QQQ",locale:d})):f="Selected date: ".concat(qa(s.props.selected,{dateFormat:h,locale:d})),he.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},f)},s.renderDateInput=function(){var r,i,l,d=yr(s.props.className,(r={},r[mM]=s.state.open,r)),u=s.props.customInput||he.createElement("input",{type:"text"}),h=s.props.customInputRef||"ref",f=s.props,p=f.dateFormat,x=p===void 0?e.defaultProps.dateFormat:p,b=f.locale,_=typeof s.props.value=="string"?s.props.value:typeof s.state.inputValue=="string"?s.state.inputValue:s.props.selectsRange?kme(s.props.startDate,s.props.endDate,{dateFormat:x,locale:b}):s.props.selectsMultiple?Ame((l=s.props.selectedDates)!==null&&l!==void 0?l:[],{dateFormat:x,locale:b}):qa(s.props.selected,{dateFormat:x,locale:b});return y.cloneElement(u,(i={},i[h]=function(j){s.input=j},i.value=_,i.onBlur=s.handleBlur,i.onChange=s.handleChange,i.onClick=s.onInputClick,i.onFocus=s.handleFocus,i.onKeyDown=s.onInputKeyDown,i.id=s.props.id,i.name=s.props.name,i.form=s.props.form,i.autoFocus=s.props.autoFocus,i.placeholder=s.props.placeholderText,i.disabled=s.props.disabled,i.autoComplete=s.props.autoComplete,i.className=yr(u.props.className,d),i.title=s.props.title,i.readOnly=s.props.readOnly,i.required=s.props.required,i.tabIndex=s.props.tabIndex,i["aria-describedby"]=s.props.ariaDescribedBy,i["aria-invalid"]=s.props.ariaInvalid,i["aria-labelledby"]=s.props.ariaLabelledBy,i["aria-required"]=s.props.ariaRequired,i))},s.renderClearButton=function(){var r=s.props,i=r.isClearable,l=r.disabled,d=r.selected,u=r.startDate,h=r.endDate,f=r.clearButtonTitle,p=r.clearButtonClassName,x=p===void 0?"":p,b=r.ariaLabelClose,_=b===void 0?"Close":b,j=r.selectedDates;return i&&(d!=null||u!=null||h!=null||j?.length)?he.createElement("button",{type:"button",className:yr("react-datepicker__close-icon",x,{"react-datepicker__close-icon--disabled":l}),disabled:l,"aria-label":_,onClick:s.onClearClick,title:f,tabIndex:-1}):null},s.state=s.calcInitialState(),s.preventFocusTimeout=void 0,s}return Object.defineProperty(e,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:fg,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.componentDidUpdate=function(n,s){var r,i,l,d;n.inline&&vfe(n.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&n.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),n.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:iM(this.props.highlightDates)}),!s.focused&&!Md(n.selected,this.props.selected)&&this.setState({inputValue:null}),s.open!==this.state.open&&(s.open===!1&&this.state.open===!0&&((i=(r=this.props).onCalendarOpen)===null||i===void 0||i.call(r)),s.open===!0&&this.state.open===!1&&((d=(l=this.props).onCalendarClose)===null||d===void 0||d.call(l)))},e.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},e.prototype.renderInputContainer=function(){var n=this.props,s=n.showIcon,r=n.icon,i=n.calendarIconClassname,l=n.calendarIconClassName,d=n.toggleCalendarOnIconClick,u=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),he.createElement("div",{className:"react-datepicker__input-container".concat(s?" react-datepicker__view-calendar-icon":"")},s&&he.createElement(ffe,rn({icon:r,className:yr(l,!l&&i,u&&"react-datepicker-ignore-onclickoutside")},d?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},e.prototype.render=function(){var n=this.renderCalendar();if(this.props.inline)return n;if(this.props.withPortal){var s=this.state.open?he.createElement(V7,{enableTabLoop:this.props.enableTabLoop},he.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},n)):null;return this.state.open&&this.props.portalId&&(s=he.createElement(O7,rn({portalId:this.props.portalId},this.props),s)),he.createElement("div",null,this.renderInputContainer(),s)}return he.createElement(bfe,rn({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:n,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},e})(y.Component),wfe="input",j1="navigate";function _fe({date:t,onDateChange:e,mode:n,onModeChange:s,professionals:r,selectedProfessionalId:i,onProfessionalChange:l,isMobile:d,showGridToggle:u=!0,labels:h}){const[f,p]=y.useState(!1),x=y.useRef(null);return y.useEffect(()=>{const b=_=>{x.current&&!x.current.contains(_.target)&&p(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),a.jsx("div",{className:"sticky top-0 z-40 bg-gradient-to-r from-indigo-50 via-white to-purple-50/60 backdrop-blur border-b border-indigo-100/70 shadow-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[a.jsxs("div",{className:"relative",ref:x,children:[a.jsx("span",{className:"text-sm font-medium text-gray-800",children:h.date}),a.jsxs("button",{type:"button",onClick:()=>p(b=>!b),className:"mt-1 inline-flex items-center gap-2 rounded-xl border border-indigo-100 bg-white px-4 py-2 text-base font-semibold text-gray-900 shadow-sm hover:border-indigo-200 focus-visible:ring-2 focus-visible:ring-indigo-500","aria-label":h.date,children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg bg-indigo-100 text-indigo-700 font-bold",children:Kn(t,"dd")}),a.jsxs("span",{className:"text-left",children:[a.jsx("span",{className:"block text-sm text-gray-500 uppercase tracking-wide",children:Kn(t,"MMM yyyy")}),a.jsx("span",{className:"block leading-tight",children:Kn(t,"EEEE")})]})]}),f&&a.jsx("div",{className:"absolute mt-2 w-[280px] rounded-2xl border border-gray-200 bg-white shadow-2xl p-2 z-[100]",children:a.jsx(zy,{inline:!0,selected:t,onChange:b=>{p(!1),b&&e(b)},calendarClassName:"compact-calendar",dayClassName:()=>"text-sm font-semibold",formatWeekDay:b=>b.slice(0,2)})})]}),a.jsxs("label",{className:"flex flex-col text-sm text-gray-700",children:[a.jsxs("span",{className:"font-medium text-gray-800",children:[h.professional,d&&n==="list"?" *":""]}),a.jsxs("select",{value:i,onChange:b=>l(b.target.value),className:"mt-1 w-full sm:w-auto rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-base px-3 py-2 sm:min-w-[180px] max-w-[280px]","aria-label":h.professional,children:[(n==="grid"||!d)&&a.jsx("option",{value:"all",children:h.allProfessionals}),r.map(b=>a.jsx("option",{value:b.id,children:b.name},b.id))]})]})]}),u&&a.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full bg-gray-100 p-1 w-fit",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700 px-2",children:h.mode}),a.jsx("button",{type:"button",onClick:()=>s("list"),"aria-pressed":n==="list","aria-label":h.list,className:`px-4 py-2 rounded-full text-sm font-semibold transition min-w-[96px] ${n==="list"?"bg-white shadow text-indigo-600":"text-gray-700 hover:text-indigo-600"}`,children:h.list}),a.jsx("button",{type:"button",onClick:()=>s("grid"),"aria-pressed":n==="grid","aria-label":h.viewInGrid||h.grid,className:`px-4 py-2 rounded-full text-sm font-semibold transition min-w-[96px] ${n==="grid"?"bg-white shadow text-indigo-600":"text-gray-700 hover:text-indigo-600"}`,children:h.grid})]})]})})}function uv(t){const[e,n]=y.useState("Cargando...");return y.useEffect(()=>{if(!t){n("Sin servicio");return}(async()=>{if(t.service_name||t.service||t.serviceName){n(t.service_name||t.service||t.serviceName);return}try{const r=await ou(t.service_id);n(r?r.name:"Servicio no encontrado")}catch(r){console.error("Error cargando servicio:",r),n(t.service_id)}})()},[t?.service_id]),e}const fM={[Be.REQUESTED]:{bg:"bg-yellow-50",border:"border-yellow-400",accent:"bg-yellow-500",text:"text-yellow-900"},[Be.CONFIRMED]:{bg:"bg-green-50",border:"border-green-500",accent:"bg-green-600",text:"text-green-900"},[Be.COMPLETED]:{bg:"bg-blue-50",border:"border-blue-500",accent:"bg-blue-600",text:"text-blue-900"},[Be.CANCELLED]:{bg:"bg-gray-100",border:"border-gray-400",accent:"bg-gray-500",text:"text-gray-800"},[Be.NO_SHOW]:{bg:"bg-orange-50",border:"border-orange-500",accent:"bg-orange-600",text:"text-orange-900"}};function Efe({appointment:t,professional:e,top:n,height:s,onSelect:r,timeLabel:i,isServiceBusiness:l=!1}){const d=fM[t.status]||fM[Be.CONFIRMED],u=l?"text-slate-900":d.text,h=l?"text-slate-700":d.text,f=l?"text-slate-600":"text-gray-500",p=uv(t);return a.jsxs("button",{type:"button",onClick:()=>r(t),className:`absolute left-2 right-2 rounded-xl border-2 shadow-md text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 transition-all hover:shadow-lg hover:scale-[1.02] overflow-hidden cursor-pointer ${d.bg} ${d.border}`,style:{top:n,height:s,minHeight:Math.min(56,s)},"aria-label":`${t.client_name} ${i}`,children:[a.jsx("span",{className:`absolute left-0 top-0 bottom-0 w-1.5 rounded-l-xl ${d.accent} shadow-sm`}),a.jsxs("div",{className:"px-3 py-2 h-full flex flex-col justify-between overflow-hidden",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:`text-[13px] sm:text-sm font-bold overflow-hidden break-words leading-tight ${u}`,style:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:t.client_name}),a.jsx("p",{className:`text-[12px] sm:text-xs font-medium ${d.text} overflow-hidden break-words leading-snug`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:p||"Servicio"})]}),a.jsxs("div",{className:`flex items-center justify-between text-[11px] sm:text-xs gap-2 min-w-0 leading-tight mt-1 ${h}`,children:[a.jsxs("span",{className:"font-semibold truncate flex items-center gap-1",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),i]}),e&&a.jsxs("span",{className:`truncate max-w-[50%] text-right flex items-center gap-1 ${f}`,children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.name]})]})]})]})}function Nfe({professionals:t,selectedProfessionalId:e}){return a.jsx("div",{className:"flex bg-gray-50 sticky top-0 z-10 border-b border-gray-200 shadow-sm",children:t.map(n=>a.jsxs("div",{className:`min-w-[220px] px-4 py-3 border-r border-gray-100 flex items-center gap-3 transition-colors ${e===n.id?"bg-indigo-50 border-indigo-200":"bg-white hover:bg-gray-50"}`,children:[a.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center font-bold text-sm shadow-sm transition-colors ${e===n.id?"bg-indigo-600 text-white":"bg-indigo-100 text-indigo-700"}`,children:n.name.slice(0,2).toUpperCase()}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:`text-sm font-semibold truncate ${e===n.id?"text-indigo-900":"text-gray-900"}`,children:n.name}),n.specialties&&n.specialties.length>0&&a.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:n.specialties.join(", ")})]})]},n.id))})}function jfe({timeSlots:t,slotHeight:e}){const n=e<32,s=n?-2:-6;return a.jsx("div",{className:"sticky left-0 top-0 bg-gray-50 border-r border-gray-200 z-10 shadow-sm",children:t.map(r=>{const i=r.endsWith(":00");return a.jsx("div",{className:`flex items-start justify-end pr-3 border-b border-dashed border-gray-200 ${i?"text-sm font-semibold text-gray-700":"text-xs text-gray-500"}`,style:{height:e},"aria-hidden":!0,children:a.jsx("span",{style:{transform:`translateY(${s}px)`,fontSize:n?"10px":void 0},children:r})},r)})})}const pM=t=>{const[e,n]=t.split(":").map(Number);return(e||0)*60+(n||0)};function Cfe({appointments:t,professionals:e,selectedProfessionalId:n,onSelectAppointment:s,timeSlots:r,slotHeight:i,dayStartMinutes:l,slotIntervalMinutes:d,isServiceBusiness:u=!1,labels:h,unavailableSlots:f={}}){const p=y.useMemo(()=>n==="all"?e:e.filter(j=>j.id===n),[e,n]),x=y.useMemo(()=>{const j={};return p.forEach(v=>{j[v.id]=t.filter(T=>T.professional_id===v.id)}),j},[t,p]),b=r.length*i,_=(j,v)=>{const T=Math.max(pM(j)-l,0),P=Math.max(pM(v)-l,0),A=Math.max(P-T,d),C=T/d*i,M=A/d*i;return{top:C,height:M}};return a.jsxs("div",{className:"border border-gray-200 rounded-2xl bg-white shadow-md overflow-hidden",children:[a.jsxs("div",{className:"grid grid-cols-[80px,1fr] bg-gray-50",children:[a.jsx("div",{className:"bg-white border-r border-gray-200 px-3 py-3 text-xs font-semibold text-gray-700 sticky top-0 z-10 bg-gray-50",children:h.hours}),a.jsx("div",{className:"overflow-x-auto bg-gray-50",children:a.jsx("div",{className:"min-w-[640px]",children:a.jsx("div",{className:"relative z-10",children:a.jsx(Nfe,{professionals:p,selectedProfessionalId:n==="all"?void 0:n})})})})]}),a.jsx("div",{className:"overflow-x-auto bg-white",children:a.jsx("div",{className:"min-w-[640px]",children:a.jsx("div",{className:"relative overflow-y-hidden",style:{height:b},children:a.jsxs("div",{className:"grid grid-cols-[80px,1fr] relative",style:{minHeight:b},children:[a.jsx(jfe,{timeSlots:r,slotHeight:i}),a.jsxs("div",{className:"relative bg-white",style:{minHeight:b},children:[a.jsx(Sfe,{timeSlots:r,slotHeight:i,totalHeight:b}),a.jsx("div",{className:"relative flex",style:{minHeight:b},children:p.map(j=>a.jsxs("div",{className:"relative min-w-[220px] border-r border-gray-100 last:border-r-0 bg-white",style:{minHeight:b},children:[(f[j.id]||[]).map(v=>{const{top:T,height:P}=_(v.start,v.end);return a.jsx(Tfe,{top:T,height:P,label:h.unavailable(`${v.start} - ${v.end}`)},`${v.start}-${v.end}`)}),(x[j.id]||[]).map(v=>{const{top:T,height:P}=_(v.start_time,v.end_time),A=`${v.start_time} - ${v.end_time}`;return a.jsx(Efe,{appointment:v,professional:j,top:T,height:P,onSelect:s,timeLabel:A,isServiceBusiness:u},v.id)})]},j.id))})]})]})})})})]})}function Sfe({timeSlots:t,slotHeight:e,totalHeight:n}){return a.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{minHeight:n},children:t.map((s,r)=>a.jsx("div",{className:"absolute left-0 right-0 border-b border-dashed border-gray-200",style:{top:r*e,height:e,borderColor:r%2===0?"#e5e7eb":"#f3f4f6",borderWidth:r%2===0?"1px":"0.5px"}},s))})}function Tfe({top:t,height:e,label:n}){return a.jsx("div",{className:"absolute left-2 right-2 rounded-lg border border-gray-300 text-gray-700 text-xs px-3 py-2 flex items-center shadow-inner",style:{top:t,height:e,backgroundImage:"repeating-linear-gradient(45deg, #f3f4f6, #f3f4f6 12px, #e5e7eb 12px, #e5e7eb 24px)"},children:n})}const kfe=[Be.REQUESTED,Be.CONFIRMED,Be.COMPLETED,Be.CANCELLED,Be.NO_SHOW],Afe=t=>t.replace(/[^0-9]/g,"");function U7({appointment:t,professional:e,labels:n,statusLabels:s,onStatusChange:r,onCancel:i,onClose:l,onViewRecord:d}){const u=uv(t),h=`${Kn(t.appointment_date,"dd MMM yyyy")}  ${t.start_time} - ${t.end_time}`,f=t.client_phone?`https://wa.me/${Afe(t.client_phone)}?text=${encodeURIComponent(`Hola ${t.client_name}, hablo desde Pymerp acerca de tu cita.`)}`:void 0;return a.jsxs("div",{className:"p-4 sm:p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm uppercase tracking-wide text-gray-500 font-semibold",children:n.client}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t.client_name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:u})]}),a.jsx("button",{type:"button",onClick:l,className:"text-gray-500 hover:text-gray-700 rounded-full p-2 focus-visible:ring-2 focus-visible:ring-indigo-500","aria-label":"Close",children:""})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx(Qu,{label:n.date,value:h}),a.jsx(Qu,{label:n.professional,value:e?.name||"-"}),a.jsx(Qu,{label:n.phone,value:t.client_phone||"-"}),a.jsx(Qu,{label:n.email,value:t.client_email||"-"}),a.jsx(Qu,{label:n.status,value:s[t.status]||t.status}),a.jsx(Qu,{label:n.timeRange,value:`${t.start_time} - ${t.end_time}`})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("label",{className:"text-sm font-semibold text-gray-800",children:n.changeStatus}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:kfe.map(p=>{const x=t.status===p,b={[Be.REQUESTED]:x?"bg-yellow-500 text-white border-yellow-600 shadow-lg shadow-yellow-200 ring-2 ring-yellow-300":"bg-yellow-50 text-yellow-700 border-yellow-300 hover:bg-yellow-100 hover:border-yellow-400",[Be.CONFIRMED]:x?"bg-green-500 text-white border-green-600 shadow-lg shadow-green-200 ring-2 ring-green-300":"bg-green-50 text-green-700 border-green-300 hover:bg-green-100 hover:border-green-400",[Be.CANCELLED]:x?"bg-red-500 text-white border-red-600 shadow-lg shadow-red-200 ring-2 ring-red-300":"bg-red-50 text-red-700 border-red-300 hover:bg-red-100 hover:border-red-400",[Be.COMPLETED]:x?"bg-blue-500 text-white border-blue-600 shadow-lg shadow-blue-200 ring-2 ring-blue-300":"bg-blue-50 text-blue-700 border-blue-300 hover:bg-blue-100 hover:border-blue-400",[Be.NO_SHOW]:x?"bg-gray-500 text-white border-gray-600 shadow-lg shadow-gray-200 ring-2 ring-gray-300":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100 hover:border-gray-400"};return a.jsx("button",{type:"button",onClick:()=>r(p),className:`px-4 py-3 rounded-lg border-2 text-sm font-semibold min-h-[44px] transition-all duration-200 ${b[p]} ${x?"scale-105 font-bold":"scale-100"}`,"aria-pressed":x,children:s[p]||p},p)})}),a.jsx("button",{type:"button",onClick:i,className:"px-4 py-3 rounded-xl border border-red-200 text-red-700 bg-red-50 hover:bg-red-100 font-semibold min-h-[44px]",children:n.cancel}),a.jsx("button",{type:"button",onClick:d,disabled:!t.client_name,className:"px-4 py-3 rounded-xl border border-gray-200 text-gray-800 bg-gray-50 hover:bg-gray-100 font-semibold min-h-[44px] disabled:opacity-50 disabled:cursor-not-allowed",title:t.client_name?"":"Nombre requerido para ver la ficha",children:n.viewRecord}),f&&a.jsx("a",{href:f,target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl border border-emerald-200 text-emerald-700 bg-emerald-50 hover:bg-emerald-100 font-semibold text-center min-h-[44px]",children:n.whatsapp})]})]})}function Qu({label:t,value:e}){return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-100",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-gray-500 font-semibold",children:t}),a.jsx("p",{className:"text-sm text-gray-900 mt-1 truncate",children:e})]})}function Rfe({isOpen:t,appointment:e,professional:n,onClose:s,onStatusChange:r,onCancel:i,onViewRecord:l,labels:d,statusLabels:u}){const h=y.useRef(null),f=y.useRef(null);return y.useEffect(()=>(t?(f.current=document.activeElement,setTimeout(()=>h.current?.focus(),80),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",f.current?.focus()),()=>{document.body.style.overflow="unset"}),[t]),y.useEffect(()=>{const p=x=>{x.key==="Escape"&&t&&s()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[t,s]),a.jsx(Ci,{children:t&&e&&a.jsx(ke.div,{className:"fixed inset-0 bg-black/40 z-50 flex items-end",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},role:"presentation",onClick:s,children:a.jsxs(ke.div,{ref:h,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:28,stiffness:280},className:"bg-white w-full rounded-t-3xl shadow-2xl max-h-[85vh] overflow-y-auto focus:outline-none",role:"dialog","aria-modal":"true",tabIndex:-1,"aria-label":d.client,onClick:p=>p.stopPropagation(),children:[a.jsx("div",{className:"w-full h-1.5 bg-gray-200 rounded-full mx-auto my-3 max-w-[120px]"}),a.jsx(U7,{appointment:e,professional:n,labels:d,statusLabels:u,onStatusChange:r,onCancel:i,onClose:s,onViewRecord:l})]})})})}function Dfe({isOpen:t,appointment:e,professional:n,onClose:s,onStatusChange:r,onCancel:i,onViewRecord:l,labels:d,statusLabels:u}){return e?a.jsx(Ai,{isOpen:t,onClose:s,className:"max-w-3xl w-full",ariaLabel:d.client,children:a.jsx(U7,{appointment:e,professional:n,labels:d,statusLabels:u,onStatusChange:r,onCancel:i,onClose:s,onViewRecord:l})}):null}const Pfe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},Mfe=(t,e,n)=>{let s;const r=Pfe[t];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+s:"hace "+s:s},Lfe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Ife={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ofe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Vfe={date:Sh({formats:Lfe,defaultWidth:"full"}),time:Sh({formats:Ife,defaultWidth:"full"}),dateTime:Sh({formats:Ofe,defaultWidth:"full"})},Ufe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Bfe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Ffe=(t,e,n,s)=>e.getHours()!==1?Bfe[t]:Ufe[t],$fe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},zfe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Hfe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},qfe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},Wfe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},Yfe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Gfe=(t,e)=>Number(t)+"",Kfe={ordinalNumber:Gfe,era:Ji({values:$fe,defaultWidth:"wide"}),quarter:Ji({values:zfe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Ji({values:Hfe,defaultWidth:"wide"}),day:Ji({values:qfe,defaultWidth:"wide"}),dayPeriod:Ji({values:Wfe,defaultWidth:"wide",formattingValues:Yfe,defaultFormattingWidth:"wide"})},Qfe=/^(\d+)()?/i,Xfe=/\d+/i,Zfe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},Jfe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},epe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},tpe={any:[/1/i,/2/i,/3/i,/4/i]},npe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},spe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},rpe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},ape={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},ipe={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},ope={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},lpe={ordinalNumber:Z8({matchPattern:Qfe,parsePattern:Xfe,valueCallback:function(t){return parseInt(t,10)}}),era:eo({matchPatterns:Zfe,defaultMatchWidth:"wide",parsePatterns:Jfe,defaultParseWidth:"any"}),quarter:eo({matchPatterns:epe,defaultMatchWidth:"wide",parsePatterns:tpe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:eo({matchPatterns:npe,defaultMatchWidth:"wide",parsePatterns:spe,defaultParseWidth:"any"}),day:eo({matchPatterns:rpe,defaultMatchWidth:"wide",parsePatterns:ape,defaultParseWidth:"any"}),dayPeriod:eo({matchPatterns:ipe,defaultMatchWidth:"any",parsePatterns:ope,defaultParseWidth:"any"})},_i={code:"es",formatDistance:Mfe,formatLong:Vfe,formatRelative:Ffe,localize:Kfe,match:lpe,options:{weekStartsOn:1,firstWeekContainsDate:1}};R7("es",_i);const sa={current:"week"};function cpe({appointments:t,professional:e,onSelectAppointment:n,emptyLabel:s,selectedDate:r=new Date,onDateRangeChange:i,isServiceBusiness:l=!1}){const[d,u]=y.useState(()=>(console.log("ScheduleList: Initializing dateRange from persistent ref:",sa.current),sa.current));y.useEffect(()=>{sa.current!==d&&(console.log("dateRange changed to:",d,"ref updated from",sa.current),sa.current=d)},[d]),y.useEffect(()=>{console.log("ScheduleList: Component mounted/remounted, dateRange:",d,"ref:",sa.current),sa.current!==d&&(console.log("ScheduleList: Restoring dateRange from ref:",sa.current),u(sa.current))},[]),y.useEffect(()=>{d==="week"&&sa.current!=="week"&&(console.log("ScheduleList: Detected unexpected reset to week, restoring from ref:",sa.current),u(sa.current))},[d]);const[h,f]=y.useState(()=>Kn(Ka(r,{weekStartsOn:1}),"yyyy-MM-dd")),[p,x]=y.useState(()=>Kn(Of(r,{weekStartsOn:1}),"yyyy-MM-dd")),[b,_]=y.useState([]),[j,v]=y.useState(null),[T,P]=y.useState(!1),[A,C]=y.useState(null),[M,L]=y.useState(null),k=y.useRef(i);y.useEffect(()=>{k.current=i},[i]),y.useEffect(()=>{if(d==="week"){const ee=Ka(r,{weekStartsOn:1}),H=Of(r,{weekStartsOn:1});f(Kn(ee,"yyyy-MM-dd")),x(Kn(H,"yyyy-MM-dd"))}},[r,d]);const R=y.useMemo(()=>{const ee=new Date,H=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate());v(null);try{switch(d){case"week":{const Y=Ka(H,{weekStartsOn:1}),X=Of(H,{weekStartsOn:1});return X.setHours(23,59,59,999),{start:Y,end:X}}case"month":{const Y=new Date(H.getFullYear(),H.getMonth(),1);Y.setHours(0,0,0,0);const X=new Date(H.getFullYear(),H.getMonth()+1,0);return X.setHours(23,59,59,999),{start:Y,end:X}}case"custom":{const Y=Vf(h),X=Vf(p);return!Sd(Y)||!Sd(X)?(v("Fechas invlidas"),{start:H,end:H}):Y>X?(v("La fecha de inicio debe ser anterior a la fecha de fin"),{start:H,end:H}):(Y.setHours(0,0,0,0),X.setHours(23,59,59,999),{start:Y,end:X})}default:return{start:H,end:H}}}catch{return v("Error al procesar las fechas"),{start:H,end:H}}},[d,h,p]),S=y.useRef(null),O=y.useRef(!1);y.useEffect(()=>{if(O.current){O.current=!1;return}if(k.current&&!j){const ee={start:R.start,end:R.end};(!S.current||S.current.start.getTime()!==ee.start.getTime()||S.current.end.getTime()!==ee.end.getTime())&&(S.current=ee,k.current(ee.start,ee.end))}},[R.start,R.end,j]);const I=y.useMemo(()=>{if(j)return[];let ee=t;e&&(ee=t.filter(Y=>Y.professional_id===e.id));let H=ee.filter(Y=>{try{let X;if(Y.appointment_date instanceof Date)X=new Date(Y.appointment_date);else if(typeof Y.appointment_date=="string")X=new Date(Y.appointment_date);else if(Y.appointment_date&&typeof Y.appointment_date=="object"&&"toDate"in Y.appointment_date)X=Y.appointment_date.toDate();else return!1;if(!Sd(X))return!1;const ie=X.getFullYear(),te=X.getMonth(),be=X.getDate(),ve=new Date(ie,te,be,0,0,0,0),Se=new Date(R.start),Pe=Se.getFullYear(),Ie=Se.getMonth(),Fe=Se.getDate(),We=new Date(Pe,Ie,Fe,0,0,0,0),kt=new Date(R.end),nn=kt.getFullYear(),Ze=kt.getMonth(),cn=kt.getDate(),zt=new Date(nn,Ze,cn,23,59,59,999);return ve.getTime()>=We.getTime()&&ve.getTime()<=zt.getTime()}catch(X){return console.error("Error al filtrar cita por fecha:",X,Y),!1}});return b.length>0&&(H=H.filter(Y=>b.includes(Y.status))),H.sort((Y,X)=>{const ie=new Date(Y.appointment_date).getTime(),te=new Date(X.appointment_date).getTime();return ie!==te?ie-te:(Y.start_time||"").localeCompare(X.start_time||"")})},[t,e,R,b,j]),F=y.useCallback(ee=>{_(H=>H.includes(ee)?H.filter(Y=>Y!==ee):[...H,ee])},[]),$=y.useCallback(ee=>{console.log("handleDateRangeChange called with:",ee,"current dateRange:",sa.current),O.current=!0,u(Y=>(console.log("setDateRange: prevRange =",Y,"newRange =",ee),sa.current=ee,ee)),v(null);const H=new Date;switch(H.setHours(0,0,0,0),ee){case"week":{const Y=Ka(H,{weekStartsOn:1}),X=Of(H,{weekStartsOn:1});X.setHours(23,59,59,999),f(Kn(Y,"yyyy-MM-dd")),x(Kn(X,"yyyy-MM-dd")),k.current&&(S.current={start:Y,end:X},k.current(Y,X));break}case"month":{const Y=new Date(H.getFullYear(),H.getMonth(),1);Y.setHours(0,0,0,0);const X=new Date(H.getFullYear(),H.getMonth()+1,0);X.setHours(23,59,59,999),f(Kn(Y,"yyyy-MM-dd")),x(Kn(X,"yyyy-MM-dd")),k.current&&(S.current={start:Y,end:X},k.current(Y,X));break}case"custom":{const Y=Vf(h),X=Vf(p);C(Sd(Y)?Y:H),L(Sd(X)?X:H),P(!0);break}}},[h,p]),Q=y.useCallback(()=>{if(!A||!M){v("Por favor selecciona ambas fechas");return}if(A>M){v("La fecha de inicio debe ser anterior a la fecha de fin");return}f(Kn(A,"yyyy-MM-dd")),x(Kn(M,"yyyy-MM-dd")),v(null),P(!1),u("custom"),k.current&&(A.setHours(0,0,0,0),M.setHours(23,59,59,999),k.current(A,M))},[A,M]),G=y.useCallback(()=>{P(!1),v(null)},[]),B=[{value:Be.REQUESTED,label:"Solicitada",color:"bg-yellow-100 text-yellow-700 border-yellow-300"},{value:Be.CONFIRMED,label:"Confirmada",color:"bg-green-100 text-green-700 border-green-300"},{value:Be.COMPLETED,label:"Completada",color:"bg-blue-100 text-blue-700 border-blue-300"},{value:Be.CANCELLED,label:"Cancelada",color:"bg-gray-100 text-gray-700 border-gray-300"},{value:Be.NO_SHOW,label:"No asisti",color:"bg-red-100 text-red-700 border-red-300"}],z=()=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Filtros"}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-semibold text-indigo-600",children:I.length})," cita",I.length!==1?"s":""," encontrada",I.length!==1?"s":""]})]}),a.jsx(dpe,{dateRange:d,onDateRangeChange:ee=>{console.log("FiltersSection onDateRangeChange called with:",ee,"current dateRange:",d),$(ee)},customStartDate:h,customEndDate:p,selectedStatuses:b,onToggleStatus:F,onClearStatuses:()=>_([]),statusOptions:B,dateError:j})]}),a.jsx(Ai,{isOpen:T,onClose:G,ariaLabel:"Seleccionar rango de fechas personalizado",className:"max-w-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Seleccionar Rango de Fechas"}),a.jsx("button",{onClick:G,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Cerrar",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de inicio"}),a.jsx(zy,{selected:A,onChange:ee=>C(ee),dateFormat:"dd/MM/yyyy",locale:"es",className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors dark:bg-gray-700 dark:text-white",maxDate:M||void 0,placeholderText:"dd/mm/aaaa",allowSameDay:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Fecha de fin"}),a.jsx(zy,{selected:M,onChange:ee=>L(ee),dateFormat:"dd/MM/yyyy",locale:"es",className:"w-full px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors dark:bg-gray-700 dark:text-white",minDate:A||void 0,placeholderText:"dd/mm/aaaa",allowSameDay:!0})]}),j&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-700 dark:text-red-400 font-medium flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),j]})}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:G,className:"flex-1 px-4 py-2.5 border-2 border-gray-300 dark:border-gray-600 rounded-lg text-sm font-semibold text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:Q,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white rounded-lg text-sm font-semibold hover:bg-indigo-700 transition-colors shadow-md",children:"Aplicar"})]})]})]})})]}),q={REQUESTED:"bg-yellow-50 text-yellow-700 border-yellow-200",CONFIRMED:"bg-green-50 text-green-700 border-green-200",COMPLETED:"bg-blue-50 text-blue-700 border-blue-200",CANCELLED:"bg-gray-100 text-gray-700 border-gray-200",NO_SHOW:"bg-red-50 text-red-700 border-red-200"},Z=I.length===0;return a.jsxs("div",{className:"space-y-4",children:[z(),I.length>0?a.jsx("div",{className:"space-y-3",children:I.map(ee=>{const H=ee.status||"REQUESTED";return a.jsx(upe,{appointment:ee,professional:e,status:H,statusColors:q,onSelectAppointment:n,showStatusBadge:!l},ee.id)})}):Z?a.jsx("div",{className:"bg-white border border-dashed border-gray-300 rounded-xl p-8 text-center",children:t.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-4xl mb-3",children:""}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 mb-1",children:"No hay citas en el rango seleccionado"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Intenta ajustar los filtros de fecha o estado"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-4xl mb-3",children:""}),a.jsx("p",{className:"text-lg font-semibold text-gray-900 mb-1",children:s})]})}):null]})}function dpe({dateRange:t,onDateRangeChange:e,customStartDate:n,customEndDate:s,selectedStatuses:r,onToggleStatus:i,onClearStatuses:l,statusOptions:d,dateError:u}){const h=f=>{try{const p=Vf(f);if(Sd(p))return Kn(p,"dd/MM/yyyy",{locale:_i})}catch{}return f};return console.log("FiltersSection render - dateRange:",t),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-800 mb-3",children:"Rango de fechas"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{console.log("Week button clicked"),e("week")},className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 ${t==="week"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 ring-2 ring-indigo-300 ring-offset-2 scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300 hover:border-indigo-300 hover:scale-105 active:scale-95"}`,"aria-pressed":t==="week","aria-label":"Ver citas de esta semana",children:a.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Semana"]})}),a.jsx("button",{type:"button",onClick:()=>{console.log("Month button clicked, current dateRange:",t),e("month")},className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 ${t==="month"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 ring-2 ring-indigo-300 ring-offset-2 scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300 hover:border-indigo-300 hover:scale-105 active:scale-95"}`,"aria-pressed":t==="month","aria-label":"Ver citas de este mes",children:a.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Mes"]})}),a.jsx("button",{type:"button",onClick:()=>e("custom"),className:`px-4 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200 ${t==="custom"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 ring-2 ring-indigo-300 ring-offset-2 scale-105":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300 hover:border-indigo-300 hover:scale-105 active:scale-95"}`,"aria-pressed":t==="custom","aria-label":"Seleccionar rango personalizado",children:a.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),"Personalizado"]})})]}),t==="custom"&&a.jsx("div",{className:"mt-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg",children:a.jsxs("p",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:[a.jsx("span",{className:"font-semibold",children:"Rango seleccionado:"})," ",h(n)," - ",h(s)]})}),u&&a.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400 font-medium",children:u})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-800",children:"Filtrar por estado"}),r.length>0&&a.jsxs("button",{type:"button",onClick:l,className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 underline",children:["Limpiar (",r.length,")"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(f=>{const p=r.includes(f.value);return a.jsx("button",{type:"button",onClick:()=>i(f.value),className:`px-4 py-2 rounded-full text-xs font-semibold border-2 transition-all duration-200 ${p?`${f.color} ring-2 ring-offset-2 ring-indigo-300 shadow-md scale-105`:"bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400"}`,children:f.label},f.value)})})]})]})}function upe({appointment:t,professional:e,status:n,statusColors:s,onSelectAppointment:r,showStatusBadge:i=!0}){const l=uv(t),d=new Date(t.appointment_date),u=d.toDateString()===new Date().toDateString(),h=d<new Date&&!u,f={REQUESTED:"Solicitada",CONFIRMED:"Confirmada",COMPLETED:"Completada",CANCELLED:"Cancelada",NO_SHOW:"No asisti"};return a.jsx("button",{type:"button",onClick:()=>r(t),className:"w-full text-left bg-white rounded-xl border-2 border-gray-200 shadow-sm hover:shadow-lg hover:border-indigo-400 transition-all duration-200 focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 group",children:a.jsxs("div",{className:"px-4 py-4 flex flex-col sm:flex-row sm:items-start gap-4",children:[a.jsxs("div",{className:"flex-shrink-0 flex items-start gap-3",children:[a.jsxs("div",{className:`text-xs sm:text-sm font-bold rounded-lg px-3 py-2.5 min-w-[100px] text-center border-2 ${u?"text-indigo-700 bg-indigo-50 border-indigo-300":h?"text-gray-600 bg-gray-50 border-gray-300":"text-indigo-700 bg-indigo-50 border-indigo-200"}`,children:[a.jsx("div",{className:"font-semibold",children:t.start_time}),a.jsxs("div",{className:"text-xs font-normal opacity-75",children:["- ",t.end_time]})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("div",{className:`text-xs font-semibold px-2 py-1 rounded-md ${u?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600"}`,children:Kn(d,"EEE",{locale:_i})}),a.jsx("div",{className:"text-xs text-gray-500 font-medium",children:Kn(d,"d MMM",{locale:_i})})]})]}),a.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 truncate group-hover:text-indigo-600 transition-colors",children:t.client_name}),t.client_rut&&a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["RUT: ",t.client_rut]})]}),i&&a.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold border flex-shrink-0 ${s[n]||s.REQUESTED}`,children:f[n]||n})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsx("span",{className:"truncate font-medium",children:l})]}),e&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),a.jsx("span",{className:"truncate",children:e.name})]}),t.client_phone&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx("svg",{className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),a.jsx("span",{children:t.client_phone})]}),t.notes&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:a.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:t.notes})})]})]}),a.jsx("div",{className:"flex-shrink-0 self-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})}const y2={[Be.REQUESTED]:"bg-yellow-50 text-yellow-700 border-yellow-200",[Be.CONFIRMED]:"bg-green-50 text-green-700 border-green-200",[Be.CANCELLED]:"bg-red-50 text-red-700 border-red-200",[Be.COMPLETED]:"bg-blue-50 text-blue-700 border-blue-200",[Be.NO_SHOW]:"bg-gray-50 text-gray-700 border-gray-200"},B7={[Be.REQUESTED]:"Solicitada",[Be.CONFIRMED]:"Confirmada",[Be.CANCELLED]:"Cancelada",[Be.COMPLETED]:"Completada",[Be.NO_SHOW]:"No asisti"};function hpe({isOpen:t,appointment:e,companyId:n,onClose:s}){const[r,i]=y.useState([]),[l,d]=y.useState(!1),[u,h]=y.useState(null);return y.useEffect(()=>{if(!t||!e||!e.client_name){i([]);return}(async()=>{d(!0),h(null);try{const p=await tle(n,e.client_name,e.client_rut);i(p)}catch(p){console.error("Error loading patient history:",p),h("Error al cargar el historial del paciente")}finally{d(!1)}})()},[t,e,n]),e?a.jsxs(Ai,{isOpen:t,onClose:s,className:"max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",ariaLabel:"Ficha del paciente",children:[a.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-b border-gray-200 bg-white rounded-t-lg",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ficha del Paciente"}),a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsx("p",{className:"text-lg font-semibold text-gray-800",children:e.client_name}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.client_rut&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-medium",children:"RUT:"}),e.client_rut]}),e.client_phone&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-medium",children:"Telfono:"}),e.client_phone]}),e.client_email&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"font-medium",children:"Email:"}),e.client_email]})]})]})]}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-500 hover:text-gray-700 rounded-full p-2 focus-visible:ring-2 focus-visible:ring-indigo-500","aria-label":"Cerrar",children:""})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 bg-gray-50",children:l?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(yt,{size:"md"})}):u?a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:u}):r.length===0?a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 text-center text-gray-600",children:[a.jsx("p",{className:"text-lg font-semibold mb-2",children:"No hay historial de citas"}),a.jsx("p",{className:"text-sm",children:"Esta es la primera cita registrada para este paciente."})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Historial Completo de Citas (",r.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Todas las citas registradas para este cliente, incluyendo todos los estados"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(B7).map(([f,p])=>{const x=r.filter(b=>b.status===f).length;return x===0?null:a.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${y2[f]||"bg-gray-50 text-gray-700 border-gray-200"}`,children:[p,": ",x]},f)})})]}),r.map(f=>{const p=f.id===e.id;return a.jsx(mpe,{appointment:f,isCurrent:p},f.id)})]})})]}):null}function mpe({appointment:t,isCurrent:e}){const n=uv(t);return a.jsxs("div",{className:`bg-white rounded-lg border-2 p-4 transition-all ${e?"border-indigo-500 shadow-lg ring-2 ring-indigo-200":"border-gray-200 hover:border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"text-base font-semibold text-gray-900",children:Kn(t.appointment_date,"EEEE, d 'de' MMMM 'de' yyyy",{locale:_i})}),e&&a.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-full",children:"Cita actual"})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Horario:"})," ",t.start_time," - ",t.end_time]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Servicio:"})," ",n]})]}),a.jsx("div",{className:"flex flex-col items-end gap-2",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${y2[t.status]||y2[Be.REQUESTED]}`,children:B7[t.status]||t.status})})]}),t.notes&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:a.jsx("span",{className:"font-medium",children:"Notas:"})}),a.jsx("p",{className:"text-sm text-gray-700",children:t.notes})]})]})}const C1=9,gM=20,xM=30,yM=56,bM=12,fpe=t=>(t||"").replace(/[^0-9]/g,""),mC=t=>{const e=new Date(t.appointment_date),[n=9,s=0]=(t.start_time||"09:00").split(":").map(u=>Number(u)),[r=n,i=s]=(t.end_time||t.start_time||"09:30").split(":").map(u=>Number(u)),l=new Date(e);l.setHours(n,s,0,0);const d=new Date(e);return d.setHours(r,i,0,0),{start:l,end:d}},vM=t=>t.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",ppe=async t=>{const{start:e,end:n}=mC(t),s=`Cita con ${t.client_name}`,i=`Servicio: ${await W8(t)}
Cliente: ${t.client_name}
Telfono: ${t.client_phone||""}`;return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(s)}&dates=${vM(e)}/${vM(n)}&details=${encodeURIComponent(i)}`},gpe=t=>t==null||Number.isNaN(t)?"":t.toLocaleString("es-CL",{style:"currency",currency:"CLP",maximumFractionDigits:0}),xpe=async t=>{const e=await W8(t);try{const n=await ou(t.service_id);return{name:e,price:n?.price,duration:n?.estimated_duration_minutes}}catch{return{name:e,price:void 0,duration:void 0}}},ype=async(t,e)=>{if(!t.client_phone)return null;const n=fpe(t.client_phone),{start:s}=mC(t),r=await xpe(t),i=s.toLocaleString("es-CL",{weekday:"long",day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}),l=r.price?gpe(r.price):"",d=r.duration?`${r.duration} min`:"",u=`${r.name}${d?`  ${d}`:""}`;let h="";if(e==="confirm")h=` *Cita confirmada*

`,h+=` Cliente: ${t.client_name}
`,h+=` Servicio: ${u}
`,h+=` Fecha: ${i}
`,l&&(h+=` Valor: ${l}
`),h+=`
Te esperamos!`;else if(e==="complete"){const f=l||"Pendiente";h=` *Pago registrado*

`,h+=` *Boleta*
`,h+=` Cliente: ${t.client_name}
`,h+=` Servicio: ${r.name}
`,h+=` Fecha: ${i}
`,d&&(h+=` Duracin: ${d}
`),h+=` Valor: ${l||"Pendiente"}
`,h+=` Total: ${f}
`,h+=`
Gracias por tu preferencia `}else h=` *Cita cancelada*

`,h+=` Cliente: ${t.client_name}
`,h+=` Servicio: ${u}
`,h+=` Fecha: ${i}
`,h+=`
Si necesitas reagendar, avsanos `;return`https://wa.me/${n}?text=${encodeURIComponent(`Hola ${t.client_name}, ${h}`)}`};function bpe(t,e,n){const s=[],r=t*60,i=e*60;for(let l=r;l<=i;l+=n){const d=Math.floor(l/60),u=l%60;s.push(`${String(d).padStart(2,"0")}:${String(u).padStart(2,"0")}`)}return s}const vpe=()=>{const[t,e]=y.useState(!1),[n,s]=y.useState(!1);return y.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u")return;const i=window.matchMedia("(max-width: 767px)"),l=window.matchMedia("(min-width: 1024px)"),d=()=>{e(i.matches),s(l.matches)};return d(),i.addEventListener("change",d),l.addEventListener("change",d),()=>{i.removeEventListener("change",d),l.removeEventListener("change",d)}},[]),{isMobile:t,isTablet:!t&&!n,isDesktop:n}};function wpe(){const{t}=ln(["schedule","appointments"]),e=qe(),{firestoreUser:n}=wt(),{handleError:s,handleAsyncError:r}=at(),{trackEvent:i}=So(),{isMobile:l,isTablet:d,isDesktop:u}=vpe(),h=y.useRef(null),f=y.useRef(null),p=y.useRef(null),[x,b]=y.useState(null),[_,j]=y.useState([]),[v,T]=y.useState([]),[P,A]=y.useState({}),[C,M]=y.useState("all"),[L,k]=y.useState(new Date),[R,S]=y.useState(()=>typeof window<"u"?window.matchMedia("(max-width: 767px)").matches?"list":"grid":"list"),[O,I]=y.useState(!1),[F,$]=y.useState(!0),[Q,G]=y.useState(!1),[B,z]=y.useState(null),[q,Z]=y.useState(!1),[ee,H]=y.useState(null),[Y,X]=y.useState(null),[ie,te]=y.useState(!1),be=y.useMemo(()=>{const oe=new Date(L);return oe.setHours(0,0,0,0),oe},[L]),ve=y.useMemo(()=>{const oe=new Date(L);return oe.setHours(23,59,59,999),oe},[L]),Se=y.useMemo(()=>bpe(C1,gM,xM),[]);y.useEffect(()=>{const oe=()=>{if(typeof window>"u")return;const ae=h.current?.getBoundingClientRect().height??0,Ee=f.current?.getBoundingClientRect().height??0,Te=p.current?.getBoundingClientRect().height??0,rt=Math.max(bM*Se.length,window.innerHeight-ae-Ee-Te-96);b(rt)};return oe(),window.addEventListener("resize",oe),()=>window.removeEventListener("resize",oe)},[Se.length,ee]);const Pe=y.useMemo(()=>{if(!x)return yM;const oe=Math.floor(x/Se.length);return Math.max(bM,Math.min(yM,oe))},[x,Se.length]);y.useEffect(()=>{i("view_schedule",{date:be.toISOString()})},[be,i]),y.useEffect(()=>{O?(C===""||!C)&&(R==="grid"||u||d?M("all"):l&&R==="list"&&v.length>0&&M(v[0]?.id||"all")):(u||d?(S("grid"),M(oe=>oe===""?"all":oe)):l&&(S("list"),M(oe=>oe===""?v[0]?.id||"all":oe)),I(!0))},[u,d,l,R,v,O,C]),y.useEffect(()=>{if(n?.company_id)try{const oe=R8(n.company_id,ae=>{T(ae),ae.length>0&&M(Ee=>l&&R==="grid"?!Ee||Ee===""?"all":Ee:l?Ee||ae[0].id:!Ee||Ee===""?"all":Ee)});return()=>oe()}catch(oe){s(oe)}},[n?.company_id,l,R,s]),y.useEffect(()=>{if(v.length===0){A({});return}let oe=!0;return(async()=>{try{const ae=await Promise.all(v.map(async Te=>({id:Te.id,availability:await Goe(Te.id)})));if(!oe)return;const Ee={};ae.forEach(({id:Te,availability:ze})=>{Ee[Te]=ze}),A(Ee)}catch(ae){s(ae)}})(),()=>{oe=!1}},[v,s]),y.useEffect(()=>{!n?.id||!n?.company_id||(async()=>{try{const oe=await Zj(n.id,n.company_id);if(!oe){H(null),X(n.email||null);return}H(oe.email_notifications_enabled??!1),X(oe.notification_email||n.email||null)}catch(oe){s(oe)}})()},[n?.id,n?.company_id,n?.email,s]),y.useEffect(()=>{if(!n?.company_id)return;const oe=n.company_id;let ae=!0;return(async()=>{try{const Ee=await yn(oe);if(!ae)return;const Te=Ee?.business_type===an.SERVICES||Ee?.businessMode==="SERVICES";te(Te)}catch(Ee){s(Ee)}})(),()=>{ae=!1}},[n?.company_id,s]),y.useEffect(()=>{if(!n?.company_id||l&&R==="list"&&!C)return;$(!0);const oe=R==="list"?Joe(n.company_id,ae=>{j(ae),$(!1)}):A8(n.company_id,be,ve,ae=>{j(ae),$(!1)});return()=>oe()},[n?.company_id,be,ve,l,R]);const Ie=y.useCallback(oe=>{z(oe),G(!0),i("open_appointment_details",{appointment_id:oe.id,professional_id:oe.professional_id})},[i]),Fe=y.useMemo(()=>[...C==="all"?_:_.filter(ae=>ae.professional_id===C)].sort((ae,Ee)=>ae.start_time.localeCompare(Ee.start_time)),[_,C]),We=v.find(oe=>oe.id===C),kt=y.useMemo(()=>{const oe={},ae=L.getDay(),Ee=C1*60,Te=gM*60,ze=lt=>{const[At,Ht]=lt.split(":").map(Number);return(At||0)*60+(Ht||0)},rt=lt=>`${String(Math.floor(lt/60)).padStart(2,"0")}:${String(lt%60).padStart(2,"0")}`;return v.forEach(lt=>{const At=(P[lt.id]||[]).filter(Ot=>Ot.day_of_week===ae&&Ot.is_available).map(Ot=>({start:Math.max(ze(Ot.start_time),Ee),end:Math.min(ze(Ot.end_time),Te)})).filter(Ot=>Ot.end>Ot.start).sort((Ot,tt)=>Ot.start-tt.start);if(At.length===0){oe[lt.id]=[{start:rt(Ee),end:rt(Te)}];return}const Ht=[];let Ln=Ee;At.forEach(Ot=>{Ot.start>Ln&&Ht.push({start:rt(Ln),end:rt(Ot.start)}),Ln=Math.max(Ln,Ot.end)}),Ln<Te&&Ht.push({start:rt(Ln),end:rt(Te)}),oe[lt.id]=Ht}),oe},[v,P,L]),nn={[Be.REQUESTED]:t("appointments:status.requested"),[Be.CONFIRMED]:t("appointments:status.confirmed"),[Be.CANCELLED]:t("appointments:status.cancelled"),[Be.COMPLETED]:t("appointments:status.completed"),[Be.NO_SHOW]:t("appointments:status.noShow")},Ze=y.useCallback(async(oe,ae)=>{const{start:Ee}=mC(oe),Te=await ype(oe,ae),ze=ae==="confirm"?await ppe(oe):null,rt={confirm:" Cita confirmada",cancel:" Cita cancelada",complete:" Cita pagada"},lt={confirm:"",cancel:"",complete:""},At={confirm:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200"},cancel:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},complete:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"}},Ht=rt[ae],Ln=`${oe.client_name}  ${Ee.toLocaleString("es-CL",{weekday:"long",day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}`,Ot=At[ae];J.custom(tt=>a.jsxs("div",{className:`max-w-md w-full ${Ot.bg} border ${Ot.border} shadow-xl rounded-xl p-4 space-y-3 ${tt.visible?"animate-enter":"animate-leave"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:lt[ae]}),a.jsxs("div",{children:[a.jsx("p",{className:`text-sm ${Ot.text} font-semibold uppercase tracking-wide`,children:Ht}),a.jsx("p",{className:`text-base font-semibold ${Ot.text} mt-1`,children:Ln})]})]}),a.jsx("button",{type:"button",onClick:()=>J.dismiss(tt.id),className:`${Ot.text} hover:opacity-70 transition-opacity`,"aria-label":"Cerrar",children:""})]}),(Te||ze)&&a.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[Te&&a.jsx("a",{href:Te,target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg text-sm font-semibold hover:bg-emerald-100 transition-colors",children:"Enviar WhatsApp"}),ze&&a.jsx("a",{href:ze,target:"_blank",rel:"noreferrer",className:"px-3 py-2 bg-indigo-50 text-indigo-700 border border-indigo-200 rounded-lg text-sm font-semibold hover:bg-indigo-100 transition-colors",children:"Agregar a calendario"})]})]}),{duration:6e3})},[]),cn=y.useCallback(async oe=>{if(!B)return;const ae=B;await r(async()=>{oe===Be.CONFIRMED?(await k8(B.id),Ze(ae,"confirm")):oe===Be.CANCELLED?(await T8(B.id),Ze(ae,"cancel")):oe===Be.COMPLETED?(await jy(B.id,{status:oe}),Ze(ae,"complete")):await jy(B.id,{status:oe}),i("change_appointment_status",{appointment_id:B.id,status:oe})})},[B,r,i,Ze]),zt=y.useCallback(async()=>{B&&confirm("Ests seguro de cancelar esta cita? Se enviar una notificacin al cliente.")&&await cn(Be.CANCELLED)},[B,cn]),_n=R==="grid",_t=R==="list";return n?.company_id?a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-10 relative",children:[a.jsx(dg,{}),a.jsx("div",{ref:h,children:a.jsx(_fe,{date:L,onDateChange:k,mode:R,onModeChange:S,professionals:v,selectedProfessionalId:C,onProfessionalChange:M,isMobile:l,showGridToggle:!0,labels:{date:t("schedule:toolbar.date"),professional:t("schedule:toolbar.professional"),allProfessionals:t("schedule:toolbar.allProfessionals"),mode:t("schedule:toolbar.mode"),list:t("schedule:toolbar.list"),grid:t("schedule:toolbar.grid"),viewInGrid:t("schedule:toolbar.viewInGrid")}})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 space-y-6",children:[a.jsx("div",{ref:f,className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"flex-shrink-0 inline-flex items-center justify-center w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 hover:text-gray-900 transition-colors focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2","aria-label":"Volver al dashboard",title:"Volver al dashboard",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:t("schedule:title")}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:t("schedule:subtitle")})]})]}),!ie&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full bg-yellow-50 text-yellow-700 border border-yellow-200 font-medium",children:t("appointments:status.requested")}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full bg-green-50 text-green-700 border border-green-200 font-medium",children:t("appointments:status.confirmed")}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full bg-blue-50 text-blue-700 border border-blue-200 font-medium",children:t("appointments:status.completed")}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-1.5 rounded-full bg-gray-100 text-gray-700 border border-gray-200 font-medium",children:t("appointments:status.cancelled")})]})]})}),ee===!1&&a.jsxs("div",{ref:p,className:"bg-amber-50 border border-amber-200 text-amber-900 rounded-xl p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold",children:"Activa las notificaciones por correo"}),a.jsxs("p",{className:"text-sm",children:["El dueo de la URL debe activar las notificaciones en"," ",a.jsx("span",{className:"font-semibold",children:"https://www.pymerp.cl/dashboard/settings/notifications"})," ","para recibir los correos de cita solicitada/confirmada/cancelada."]}),Y&&a.jsxs("p",{className:"text-xs text-amber-800",children:["Email configurado: ",Y]})]}),a.jsx("button",{type:"button",onClick:()=>e("/dashboard/settings/notifications"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700",children:"Ir a notificaciones"})]}),F&&a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(yt,{size:"lg"})}),!F&&a.jsxs(a.Fragment,{children:[_t&&a.jsx(cpe,{appointments:_,professional:We,onSelectAppointment:Ie,emptyLabel:t("schedule:empty.title"),selectedDate:L,isServiceBusiness:ie},"schedule-list"),_n&&a.jsxs(a.Fragment,{children:[Fe.length===0&&a.jsxs("div",{className:"bg-white border border-dashed border-gray-300 rounded-2xl p-6 sm:p-8 text-center space-y-3 shadow-sm",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:t("schedule:empty.title")}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600 max-w-md mx-auto",children:t("schedule:empty.description")}),a.jsxs("button",{type:"button",className:"inline-flex justify-center items-center gap-2 px-4 py-3 rounded-xl bg-indigo-600 text-white font-semibold shadow-md hover:bg-indigo-700 hover:shadow-lg focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-indigo-500 min-h-[44px] transition-all",onClick:()=>e("/dashboard/appointments/new"),children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t("schedule:empty.cta")]})]}),Fe.length>0&&a.jsx(Cfe,{appointments:_,professionals:v,selectedProfessionalId:C,onSelectAppointment:Ie,timeSlots:Se,slotHeight:Pe,dayStartMinutes:C1*60,slotIntervalMinutes:xM,unavailableSlots:kt,isServiceBusiness:ie,labels:{hours:t("schedule:labels.hours"),unavailable:oe=>t("schedule:labels.unavailable",{range:oe})}})]})]})]}),a.jsx(Rfe,{isOpen:Q&&l,appointment:B,professional:B?v.find(oe=>oe.id===B.professional_id):void 0,onClose:()=>G(!1),onStatusChange:cn,onCancel:zt,onViewRecord:()=>{G(!1),Z(!0)},labels:{client:t("schedule:details.client"),service:t("schedule:details.service"),date:t("schedule:details.date"),professional:t("schedule:details.professional"),phone:t("schedule:details.phone"),email:t("schedule:details.email"),status:t("schedule:details.status"),changeStatus:t("schedule:details.changeStatus"),cancel:t("schedule:details.cancel"),viewRecord:t("schedule:details.viewRecord"),whatsapp:t("schedule:details.whatsapp"),timeRange:t("schedule:details.timeRange")},statusLabels:nn}),a.jsx(Dfe,{isOpen:Q&&!l,appointment:B,professional:B?v.find(oe=>oe.id===B.professional_id):void 0,onClose:()=>G(!1),onStatusChange:cn,onCancel:zt,onViewRecord:()=>{G(!1),Z(!0)},labels:{client:t("schedule:details.client"),service:t("schedule:details.service"),date:t("schedule:details.date"),professional:t("schedule:details.professional"),phone:t("schedule:details.phone"),email:t("schedule:details.email"),status:t("schedule:details.status"),changeStatus:t("schedule:details.changeStatus"),cancel:t("schedule:details.cancel"),viewRecord:t("schedule:details.viewRecord"),whatsapp:t("schedule:details.whatsapp"),timeRange:t("schedule:details.timeRange")},statusLabels:nn}),a.jsx(hpe,{isOpen:q,appointment:B,companyId:n.company_id||"",onClose:()=>Z(!1)})]}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("p",{className:"text-gray-600",children:"No company selected"})})}const Ei=t=>Kn(t,"yyyy-MM-dd"),_pe=async t=>(await Ts(Ke(Ce,"calendarInventory"),{...t,created_at:Ve.now()})).id,F7=async(t,e,n,s,r)=>{const i=Ei(n),l=Ct(Ke(Ce,"calendarInventory"),Ge("company_id","==",t),Ge("professional_id","==",e),Ge("date","==",i),Ge("status","in",["BOOKED","REQUESTED"])),d=await Dt(l);for(const u of d.docs){const h=u.data();if(s>=h.start_time&&s<h.end_time||r>h.start_time&&r<=h.end_time||s<=h.start_time&&r>=h.end_time)return!1}return!0},Epe=async(t,e)=>{const n=Ei(e),s=Ct(Ke(Ce,"calendarInventory"),Ge("company_id","==",t),Ge("date","==",n),Ge("status","in",["BOOKED","REQUESTED"]));return(await Dt(s)).docs.map(i=>({id:i.id,...i.data(),created_at:i.data().created_at?.toDate()||new Date}))},Npe=async(t,e,n)=>{const s=Ei(e),r=Ei(n),i=Ct(Ke(Ce,"calendarInventory"),Ge("company_id","==",t),Ge("date",">=",s),Ge("date","<=",r),Ge("status","in",["BOOKED","REQUESTED"]));return(await Dt(i)).docs.map(d=>({id:d.id,...d.data(),created_at:d.data().created_at?.toDate()||new Date}))},Ff=(t,e)=>e.some(n=>t.start_time>=n.start_time&&t.start_time<n.end_time||t.end_time>n.start_time&&t.end_time<=n.end_time||t.start_time<=n.start_time&&t.end_time>=n.end_time),jpe=(t,e,n)=>{if(e.length===0)return!1;const s=n.filter(r=>r.professional_id===t||r.professional_id==="unassigned");return e.some(r=>!Ff(r,s))},Fc="clinic_resources",Cpe=t=>{const e=t.data();return{id:t.id,...e,created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},$7=async t=>{const e=os(t);try{const n=Ct(Ke(Ce,Fc),Ge("company_id","==",e));return(await Dt(n)).docs.map(Cpe)}catch(n){throw on.handleFirestoreError(n,{collection:Fc,op:"list"}),n}};const Spe=async t=>{const e=os(t.company_id);try{const n=Ve.now();return(await Ts(Ke(Ce,Fc),{...t,company_id:e,created_at:n,updated_at:n})).id}catch(n){throw on.handleFirestoreError(n,{collection:Fc,op:"create"}),n}},Tpe=async(t,e,n)=>{try{const s=mt(Ce,Fc,t);await Ss(s,{...e,updated_at:Ve.now()})}catch(s){throw on.handleFirestoreError(s,{collection:Fc,op:"update"}),s}},kpe=async(t,e)=>{try{await Co(mt(Ce,Fc,t))}catch(n){throw on.handleFirestoreError(n,{collection:Fc,op:"delete"}),n}},Ef=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],ax={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"},wM=["places"];R7("es",_i);function Ape(t){const e=t.trim().replace("#","");if(![3,6,8].includes(e.length))return null;const n=e.length===3?e.split("").map(l=>l+l).join(""):e.slice(0,6),s=Number.parseInt(n.slice(0,2),16),r=Number.parseInt(n.slice(2,4),16),i=Number.parseInt(n.slice(4,6),16);return[s,r,i].some(l=>Number.isNaN(l))?null:{r:s,g:r,b:i}}function Rpe(t){const e=t.trim().match(/^rgba?\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})(?:\s*,\s*([0-9.]+))?\s*\)$/i);if(!e)return null;const n=Number(e[1]),s=Number(e[2]),r=Number(e[3]);return[n,s,r].some(i=>Number.isNaN(i))?null:{r:Math.min(255,Math.max(0,n)),g:Math.min(255,Math.max(0,s)),b:Math.min(255,Math.max(0,r))}}function b2(t){return t?t.trim().startsWith("#")?Ape(t):t.trim().toLowerCase().startsWith("rgb")?Rpe(t):null:null}function v2({r:t,g:e,b:n}){const r=[t,e,n].map(i=>i/255).map(i=>i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4));return .2126*r[0]+.7152*r[1]+.0722*r[2]}function Dpe(t,e){const n=v2(t),s=v2(e),r=Math.max(n,s),i=Math.min(n,s);return(r+.05)/(i+.05)}function Ppe(t){const e=b2(t);return e?v2(e)<.45:!1}function cp(t,e,n){const s=b2(e),r=b2(t);return s&&r&&Dpe(r,s)>=4.5?t:n}function dp(t){return Ppe(t)?"#f9fafb":"#111827"}function Mpe({currentStep:t}){const e=t,n=[{number:1,label:"Fecha",key:"fecha"},{number:2,label:"Hora",key:"hora"},{number:3,label:"Confirmar",key:"confirmar"}];return a.jsx("div",{className:"flex items-center justify-center gap-2 sm:gap-3",role:"progressbar","aria-valuenow":e,"aria-valuemin":1,"aria-valuemax":3,children:n.map((s,r)=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:`w-7 h-7 sm:w-9 sm:h-9 rounded-full flex items-center justify-center text-xs sm:text-sm font-semibold transition-all border ${s.number<e?"bg-[#0078d4] border-[#0078d4] text-white shadow-sm":s.number===e?"bg-[#e7f0fb] border-[#0078d4] text-[#1e293b] shadow-sm":"bg-[#f3f6fb] border-[#cbd5e1] text-slate-400"}`,"aria-current":s.number===e?"step":void 0,children:s.number<e?a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):s.number}),a.jsx("span",{className:`text-[11px] sm:text-sm font-medium mt-1.5 ${s.number<=e?"text-slate-900":"text-slate-400"}`,children:s.label})]}),r<n.length-1&&a.jsx("div",{className:`w-8 sm:w-12 h-0.5 sm:h-1 mx-1 sm:mx-2 transition-all ${s.number<e?"bg-[#0078d4]":"bg-slate-200"}`,"aria-hidden":"true"})]},s.key))})}function Lpe({theme:t}){const e=[{label:"Disponible",color:t.calendarAvailableDayColor||"#111827",ariaLabel:"Da con horarios disponibles"},{label:"Pocos cupos",color:t.calendarLowSlotsColor||"#f59e0b",ariaLabel:"Da con pocas citas disponibles (1 a 3)"},{label:"Sin horas",color:t.calendarNoSlotsColor||"#dc2626",ariaLabel:"Da sin horarios disponibles"}];return a.jsx("div",{className:"flex flex-wrap items-center gap-3 mt-3 sm:mt-4",role:"list","aria-label":"Leyenda de disponibilidad",children:e.map(n=>a.jsxs("div",{className:"inline-flex items-center gap-2 text-xs sm:text-sm font-medium text-slate-700",role:"listitem",children:[a.jsx("span",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:n.color},"aria-hidden":"true"}),a.jsx("span",{"aria-label":n.ariaLabel,children:n.label})]},n.label))})}function Ipe({theme:t,selectedDate:e,onTodayClick:n,onTomorrowClick:s,onNextWeekClick:r,onNextAvailableClick:i}){const l=cp(t.calendarTitleColor||t.titleColor,t.calendarCardColor||t.cardColor,dp(t.calendarCardColor||t.cardColor||"#ffffff")),d=cp(t.calendarTextColor||t.textColor,t.calendarCardColor||t.cardColor,dp(t.calendarCardColor||t.cardColor||"#ffffff")),u=new Date;u.setHours(0,0,0,0);const h=new Date(u);h.setDate(h.getDate()+1);const f=new Date(u);f.setDate(f.getDate()+7);const p=e&&e.toDateString()===u.toDateString(),x=e&&e.toDateString()===h.toDateString(),b=e&&e.toDateString()===f.toDateString(),_=[{label:"Hoy",onClick:n,isActive:p},{label:"Maana",onClick:s,isActive:x},{label:"Prxima semana",onClick:r,isActive:b},{label:"Prx. disponible",onClick:i,isActive:!1}];return a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium",style:{color:d},children:"Ir a:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(j=>(()=>{const v=t.calendarButtonColor||t.buttonColor,T=cp(t.calendarButtonTextColor||t.buttonTextColor,v,dp(v||"#111827")),P=t.calendarCardColor||t.cardColor||"#f3f6fb";return a.jsx("button",{type:"button",onClick:j.onClick,className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-full border text-xs sm:text-sm font-semibold transition-all hover:shadow-md focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-500 ${j.isActive?"shadow-md":"hover:shadow-sm"}`,style:{borderColor:j.isActive?t.calendarButtonColor||t.buttonColor:(t.calendarButtonColor||t.buttonColor)+"55",backgroundColor:j.isActive?t.calendarButtonColor||t.buttonColor:P,color:j.isActive?T:l},"aria-pressed":j.isActive||void 0,"aria-label":`Ir a ${j.label}`,children:j.label},j.label)})())})]})}function Ope({serviceName:t,serviceDuration:e,servicePrice:n,serviceHidePrice:s,professionalName:r,modalText:i,modalMuted:l,modalBorder:d,onClose:u,isSubmitting:h,currentStep:f}){return a.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-5 border-b",style:{borderColor:d,backgroundColor:"#f3f6fb"},children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500 mb-1",children:"Agendar servicio"}),a.jsx("h3",{id:"booking-modal-title",className:"text-lg sm:text-2xl font-bold truncate",style:{color:i},children:t||"Servicio"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 text-xs sm:text-sm mt-2",style:{color:l},children:[e&&a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e," min"]}),n!==void 0&&!s&&a.jsxs("span",{className:"inline-flex items-center gap-1 font-semibold",children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"$",n.toLocaleString("es-CL")]}),r&&a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Atiende: ",r]})]})]}),a.jsx("button",{onClick:u,disabled:h,className:"text-slate-500 hover:text-slate-800 text-2xl leading-none flex-shrink-0 p-2 hover:bg-slate-100 rounded-full transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 min-w-[40px] min-h-[40px] flex items-center justify-center disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:bg-transparent","aria-label":"Cerrar",children:""})]}),a.jsx("div",{className:"mt-4",children:a.jsx(Mpe,{currentStep:f})})]})}function Vpe({label:t,selectedDate:e,onTodayClick:n,onTomorrowClick:s,onNextWeekClick:r,onNextAvailableClick:i,lightTheme:l,calendarTitle:d,calendarSurfaceBg:u,calendarHeaderBg:h,calendarGridBg:f,calendarText:p,calendarSelectedBg:x,calendarSelectedText:b,calendarNoSlotsSelectedText:_,calendarNoSlotsBg:j,accentColor:v,minDate:T,maxDate:P,handleDateChange:A,isDateAvailable:C,getDayAvailabilityClass:M,slotsSubtleText:L,theme:k}){return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{id:"booking-date-picker-label",className:"block text-base sm:text-lg font-semibold",style:{color:d},children:[a.jsx("span",{className:"mr-2 text-xl","aria-hidden":"true",children:""}),t]}),a.jsx(Ipe,{theme:l,selectedDate:e,onTodayClick:n,onTomorrowClick:s,onNextWeekClick:r,onNextAvailableClick:i})]}),a.jsx("div",{className:"w-full flex justify-center",children:a.jsxs("div",{className:"border rounded-2xl p-2 sm:p-3 md:p-4 shadow-sm hover:shadow-md transition-all w-full max-w-full sm:max-w-md mx-auto flex flex-col items-center",style:{backgroundColor:u,borderColor:v+"30",boxShadow:"0 10px 24px rgba(15, 23, 42, 0.08)"},children:[a.jsx("style",{children:`
            .react-datepicker {
              font-family: inherit !important;
              border: 1px solid ${v+"20"} !important;
              background: ${u} !important;
              box-shadow: 0 16px 40px rgba(15,23,42,0.08) !important;
              border-radius: 1rem !important;
              color: ${p} !important;
              color-scheme: light !important;
              forced-color-adjust: none !important;
              margin: 0 auto !important;
              width: 100% !important;
              max-width: 100% !important;
              font-size: 0.875rem !important;
            }
            @media (max-width: 640px) {
              .react-datepicker { font-size: 0.75rem !important; }
              .react-datepicker__day-names,
              .react-datepicker__week {
                gap: 0.3rem !important;
              }
              .react-datepicker__day-name {
                width: 100% !important;
                height: 2.35rem !important;
                line-height: 2.35rem !important;
                font-size: 0.65rem !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                box-sizing: border-box !important;
              }
              .react-datepicker__day {
                width: 100% !important;
                height: 2.175rem !important;
                line-height: 2.175rem !important;
                font-size: 0.8rem !important;
                justify-self: stretch !important;
              }
              .react-datepicker__header {
                padding: 0.45rem 0.6rem 0.2rem !important;
              }
            }
            .react-datepicker__month-container {
              width: 100% !important;
              margin: 0 auto !important;
            }
            .react-datepicker__month {
              width: 100% !important;
              margin: 0.2rem 0.2rem 0.25rem !important;
              padding: 0.15rem 0.48rem 0.15rem 0.15rem !important;
              box-sizing: border-box !important;
            }
            .react-datepicker__header {
              background: ${h} !important;
              border: none !important;
              padding: 0.5rem 0.75rem 0.25rem !important;
              border-bottom: 1px solid ${v+"20"} !important;
            }
            .react-datepicker__current-month {
              font-size: 0.95rem !important;
              font-weight: 700 !important;
              color: ${d} !important;
              padding-bottom: 0.25rem !important;
              text-transform: uppercase !important;
            }
            .react-datepicker__day-names {
              margin-top: 0.25rem !important;
              display: grid !important;
              grid-template-columns: repeat(7, minmax(0, 1fr)) !important;
              gap: 0.4rem !important;
              width: 100% !important;
              justify-items: center !important;
              align-items: center !important;
            }
            .react-datepicker__day-name {
              color: ${p} !important;
              font-weight: 700 !important;
              font-size: 0.7rem !important;
              width: 100% !important;
              height: 2.55rem !important;
              line-height: 2.55rem !important;
              text-transform: uppercase !important;
              border-radius: 0.75rem !important;
              background: ${h} !important;
              border: 1px solid ${v+"10"} !important;
              text-align: center !important;
              justify-self: stretch !important;
              display: flex !important;
              align-items: center !important;
              justify-content: center !important;
              box-sizing: border-box !important;
              transform: translateY(-0.25rem) !important;
            }
            .react-datepicker__week {
              display: grid !important;
              grid-template-columns: repeat(7, minmax(0, 1fr)) !important;
              gap: 0.4rem !important;
              width: 100% !important;
              margin-top: -0.125rem !important;
              margin-bottom: 0.24rem !important;
              justify-items: center !important;
              align-items: center !important;
            }
            .react-datepicker__day {
              width: 100% !important;
              height: 2.375rem !important;
              line-height: 2.375rem !important;
              margin: 0 !important;
              border-radius: 0.75rem !important;
              font-size: 0.875rem !important;
              font-weight: 600 !important;
              transition: all 0.2s !important;
              border: 0px solid #e2e8f0 !important;
              color: ${p} !important;
              display: inline-flex !important;
              align-items: center !important;
              justify-content: center !important;
              background-color: ${f} !important;
              justify-self: stretch !important;
              text-align: center !important;
              box-sizing: border-box !important;
            }
            .react-datepicker__day:hover:not(.react-datepicker__day--disabled) {
              background-color: ${v}0f !important;
              border-color: ${v} !important;
              transform: translateY(-1px) !important;
            }
            .react-datepicker__day--selected {
              background-color: ${x} !important;
              color: ${b} !important;
              border-color: ${x} !important;
              box-shadow: 0 6px 14px ${v}40 !important;
            }
            .react-datepicker__day--today:not(.react-datepicker__day--selected) {
              font-weight: 700 !important;
              border-color: ${v} !important;
              color: ${p} !important;
              background-color: ${v}10 !important;
            }
            .react-datepicker__day--disabled {
              color: #94a3b8 !important;
              cursor: not-allowed !important;
              background: ${f} !important;
              border-color: #e2e8f0 !important;
            }
            .react-datepicker__navigation {
              top: 0.35rem !important;
              padding: 0.25rem !important;
              border-radius: 999px !important;
            }
            .react-datepicker__navigation-icon::before {
              border-color: ${d} !important;
              border-width: 2px 2px 0 0 !important;
            }
            .react-datepicker__day.booking-day-available {
              background-color: ${(l.calendarAvailableDayColor||"#111827")+"12"} !important;
              border-color: ${l.calendarAvailableDayColor||"#111827"} !important;
            }
            .react-datepicker__day.booking-day-low-slots {
              background-color: ${(l.calendarLowSlotsColor||"#475569")+"18"} !important;
              border-color: ${l.calendarLowSlotsColor||"#475569"} !important;
              border-style: dashed !important;
            }
            .react-datepicker__day.booking-day-no-slots {
              background-color: ${(l.calendarNoSlotsColor||"#94a3b8")+"22"} !important;
              border-color: ${l.calendarNoSlotsColor||"#94a3b8"} !important;
              color: ${p} !important;
              opacity: 0.85 !important;
            }
            .react-datepicker__day.booking-day-no-slots.react-datepicker__day--selected {
              background-color: ${j} !important;
              color: ${_} !important;
            }
          `}),a.jsx(zy,{selected:e,onChange:A,minDate:T,maxDate:P,filterDate:R=>C(R),inline:!0,locale:"es",dateFormat:"dd/MM/yyyy",formatWeekDay:R=>{const S={domingo:"Dom",lunes:"Lun",martes:"Mar",mircoles:"Mi",miercoles:"Mi",jueves:"Jue",viernes:"Vie",sbado:"Sb",sabado:"Sb"},O=R.toLowerCase();return S[O]||R.slice(0,3)},renderCustomHeader:({date:R,decreaseMonth:S,increaseMonth:O,prevMonthButtonDisabled:I,nextMonthButtonDisabled:F})=>a.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3 px-1 gap-1",children:[a.jsx("button",{type:"button",onClick:S,disabled:I,className:"p-1.5 rounded-lg border border-slate-200 hover:border-slate-300 disabled:opacity-40 text-slate-700 bg-[#f3f6fb] transition-colors text-sm flex-shrink-0 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400","aria-label":"Mes anterior",children:a.jsx("span",{"aria-hidden":"true",children:""})}),a.jsx("div",{className:"text-xs sm:text-sm font-semibold uppercase px-3 py-1 border rounded-lg text-center flex-1 mx-1",role:"heading","aria-live":"polite","aria-label":R.toLocaleDateString("es-CL",{month:"long",year:"numeric"}),style:{borderColor:v+"25",backgroundColor:k.calendarCardColor||k.cardColor,color:k.calendarTitleColor||k.titleColor},children:R.toLocaleDateString("es-CL",{month:"long",year:"numeric"})}),a.jsx("button",{type:"button",onClick:O,disabled:F,className:"p-1.5 rounded-lg border border-slate-200 hover:border-slate-300 disabled:opacity-40 text-slate-700 bg-[#f3f6fb] transition-colors text-sm flex-shrink-0 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400","aria-label":"Mes siguiente",children:a.jsx("span",{"aria-hidden":"true",children:""})})]}),dayClassName:R=>M(R),monthsShown:1,fixedHeight:!0,ariaLabelledBy:"booking-date-picker-label"})]})}),a.jsx(Lpe,{theme:l}),a.jsxs("div",{className:"text-xs text-center",style:{color:L},children:[T.toLocaleDateString("es-CL",{day:"numeric",month:"short"})," - ",P.toLocaleDateString("es-CL",{day:"numeric",month:"short"})]}),e&&a.jsx("div",{className:"lg:hidden mt-2 p-3 rounded-xl shadow-sm",style:{backgroundColor:v+"10",borderLeft:`3px solid ${v}`},children:a.jsxs("p",{className:"text-xs sm:text-sm font-semibold flex items-center gap-2",style:{color:k.calendarTitleColor||k.titleColor},children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e?.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})??""]})})]})}function Upe({selectedDate:t,schedules:e,availableCount:n,isLoadingCalendarInventory:s,hasLoadedCalendarInventoryOnce:r,isRefreshingSelectedDate:i,selectedSchedule:l,onScheduleChange:d,serviceDuration:u,slotsText:h,slotsSubtleText:f,slotsSurfaceBg:p,selectedSlotBg:x,selectedSlotBorder:b,selectedSlotText:_,showTimeFilters:j,timeFilter:v,onTimeFilterChange:T,onNextAvailableClick:P}){return t?s&&!r?a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 w-40 bg-slate-200 rounded-full animate-pulse"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2.5",children:Array.from({length:8}).map((A,C)=>a.jsx("div",{className:"h-14 rounded-xl bg-slate-200 animate-pulse"},C))})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Horarios para"}),a.jsx("p",{className:"text-sm sm:text-base font-semibold text-slate-900",children:t?.toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long"})??""}),a.jsxs("p",{className:"text-xs text-slate-600",children:[n," ",n===1?"horario disponible":"horarios disponibles"]})]}),(i||s&&!r)&&a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin opacity-70"})]}),j&&a.jsx("div",{className:"flex flex-wrap gap-2",children:[{label:"Todos",value:"all"},{label:"Maana",value:"morning"},{label:"Tarde",value:"afternoon"}].map(A=>a.jsx("button",{type:"button",onClick:()=>T(A.value),className:`px-3 py-1.5 rounded-full text-xs font-semibold border transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 ${v===A.value?"bg-slate-900 text-white border-slate-900":"bg-[#f3f6fb] text-slate-700 border-slate-200 hover:border-slate-300"}`,"aria-pressed":v===A.value,children:A.label},A.value))}),n===0?a.jsxs("div",{className:"rounded-2xl border border-dashed px-5 py-8 text-center bg-[#f3f6fb]",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-1",children:"No hay horas disponibles"}),a.jsx("p",{className:"text-xs text-slate-600 mb-3",children:"Prueba con otro da o revisa el prximo disponible."}),a.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 rounded-full border border-slate-300 text-slate-700 text-xs font-semibold hover:bg-[#e7f0fb]",children:"Prx. disponible"})]}):a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2.5",children:e.map(A=>{const C=l===A.id,M=A.isAvailable!==!1;return a.jsxs("button",{type:"button",onClick:()=>M&&d(A.id),disabled:!M,className:`group relative w-full px-3 py-3 rounded-xl border-2 text-left transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 ${C?"shadow-md":"shadow-sm hover:shadow-md"} ${M?"":"opacity-50 cursor-not-allowed"}`,style:{borderColor:C?b:"#e2e8f0",backgroundColor:C?x:p,color:C?_:h,...C&&{"--tw-ring-color":b}},"aria-pressed":C||void 0,"aria-label":`Seleccionar horario de ${A.start_time} a ${A.end_time}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold",children:A.start_time}),a.jsx("span",{className:"text-xs opacity-60",children:""}),a.jsx("span",{className:"text-sm font-semibold",children:A.end_time})]}),a.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs",style:{color:f},children:[a.jsx("svg",{className:"w-3.5 h-3.5 opacity-60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),u?`${u} minutos`:M?"Disponible":"No disponible"]})]},A.id)})})]}):a.jsxs("div",{className:"rounded-2xl border border-dashed px-5 py-8 text-center bg-[#f3f6fb]",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900 mb-1",children:"Selecciona una fecha"}),a.jsx("p",{className:"text-xs text-slate-600",children:"Elige un da en el calendario para ver los horarios disponibles."})]})}function Bpe({confirmation:t,step:e,onClose:n,onRestart:s,onBack:r,onNext:i,onSubmit:l,canProceedToStep2:d,canProceedToStep3:u,canSubmit:h,isSubmitting:f,accentColor:p,borderColor:x,primaryLabel:b,showWhatsappIcon:_}){return a.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-t flex flex-col sm:flex-row justify-between gap-2 sm:gap-0",style:{borderColor:x,backgroundColor:"#f3f6fb"},children:t?a.jsxs("div",{className:"w-full flex flex-col sm:flex-row justify-between gap-2",children:[a.jsx(Mt,{onClick:s,className:"px-5 py-2.5 rounded-lg font-medium border-2 border-slate-200 bg-[#f3f6fb] text-slate-700 hover:bg-[#e7f0fb]",children:"Agendar otra cita"}),a.jsx(Mt,{onClick:n,className:"px-5 py-2.5 rounded-lg font-medium",style:{backgroundColor:p,color:"#ffffff"},children:"Cerrar"})]}):e===1?a.jsxs(a.Fragment,{children:[a.jsx(Mt,{onClick:n,className:"px-4 sm:px-5 py-2 sm:py-2.5 bg-[#f3f6fb] border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-[#e7f0fb] font-medium text-sm sm:text-base order-2 sm:order-1",children:"Cancelar"}),a.jsxs("div",{className:"flex flex-col items-end gap-2 order-1 sm:order-2",children:[a.jsx(Mt,{onClick:i,disabled:!d,style:{backgroundColor:p,color:"#ffffff"},className:"px-5 sm:px-6 py-2 sm:py-2.5 rounded-lg hover:opacity-90 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm sm:text-base focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 min-w-[140px]","aria-label":d?"Ver horarios":"Selecciona una fecha",children:b}),!d&&a.jsx("p",{className:"text-xs text-gray-500 text-right max-w-[200px]",children:"Selecciona una fecha para continuar"})]})]}):e===2?a.jsxs(a.Fragment,{children:[a.jsxs(Mt,{onClick:r,className:"px-5 py-2.5 bg-[#f3f6fb] border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-[#e7f0fb] font-medium flex items-center gap-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2","aria-label":"Volver a fecha",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsx(Mt,{onClick:i,disabled:!u,style:{backgroundColor:p,color:"#ffffff"},className:"px-6 py-2.5 rounded-lg hover:opacity-90 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 touch-manipulation","aria-label":u?"Continuar":"Elige un horario",children:b}),!u&&a.jsx("p",{className:"text-xs text-gray-500 text-right max-w-[200px]",children:"Elige un horario para continuar"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Mt,{onClick:r,disabled:f,className:"px-5 py-2.5 bg-[#f3f6fb] border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-[#e7f0fb] font-medium flex items-center gap-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 touch-manipulation","aria-label":"Volver a horarios",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),a.jsxs(Mt,{onClick:l,disabled:!h||f,"aria-busy":f,style:{backgroundColor:p,color:"#ffffff"},className:"px-6 py-2.5 rounded-lg hover:opacity-90 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 touch-manipulation",children:[f&&a.jsx("span",{className:"inline-block w-4 h-4 border-2 border-white/80 border-t-transparent rounded-full animate-spin","aria-hidden":"true"}),_&&a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),f?"Agendando...":b]})]})})}function z7({isOpen:t,theme:e,serviceName:n,servicePrice:s,serviceDuration:r,serviceHidePrice:i=!1,availableSchedules:l,selectedDate:d,selectedSchedule:u,bookingForm:h,onClose:f,onDateChange:p,onScheduleChange:x,onFormChange:b,onSubmit:_,professionals:j=[],selectedProfessionalId:v=null,onProfessionalChange:T,requireProfessional:P=!1,contactLabel:A="Tu WhatsApp *",contactPlaceholder:C="912345678",contactPrefix:M="+56",submitLabel:L="Confirmar reserva",showWhatsappIcon:k=!0,enableEmailField:R=!1,emailLabel:S="Correo (opcional)",emailPlaceholder:O="cliente@correo.com",requireEmail:I=!1,companyId:F,resources:$=[],selectedResourceId:Q=null,onResourceChange:G,requireResource:B=!1,resourceLabel:z="Recurso",resourcePlaceholder:q="Selecciona un recurso",confirmation:Z=null,directionsUrl:ee=null,onRestart:H,isSubmitting:Y=!1}){const X=()=>{Y||f()},{t:ie}=ln(),[te,be]=y.useState(1),[ve,Se]=y.useState("all"),[Pe,Ie]=y.useState([]),[Fe,We]=y.useState(!1),[kt,nn]=y.useState(!1),[Ze,cn]=y.useState(!1),zt=y.useRef(!1),_n=y.useRef(!1),{minDate:_t,maxDate:oe}=y.useMemo(()=>{const _e=new Date;_e.setHours(0,0,0,0);const Xe=new Date(Date.now()+840*60*60*1e3);return Xe.setHours(0,0,0,0),{minDate:_e,maxDate:Xe}},[]),ae=typeof navigator<"u"&&/Android/i.test(navigator.userAgent||""),Ee="#0078d4",Te="#f3f6fb",ze="#e7f0fb",rt={...e,bgColor:Te,cardColor:ze,textColor:"#0f172a",titleColor:"#0b1120",subtitleColor:"#1f2937",buttonColor:Ee,buttonTextColor:"#ffffff",calendarCardColor:ze,calendarTextColor:"#0b1120",calendarTitleColor:"#0b1120",calendarButtonColor:Ee,calendarButtonTextColor:"#ffffff",calendarAvailableDayColor:Ee,calendarLowSlotsColor:"#f59e0b",calendarNoSlotsColor:"#ef4444"},lt=Te,At="#c7d7f2",Ht="#0b1120",Ln="#1f2937",Ot=ae?"#e7f0fb":ze,tt="#d6e7fb",Fs="#f5f9ff",vn="#0b1120",Xn="#0b1120",$n=Ee,An=cp(rt.calendarButtonTextColor||e.buttonTextColor,$n,dp($n)),Lr=rt.calendarNoSlotsColor||"#dc2626",$s=cp(rt.calendarButtonTextColor||e.buttonTextColor,Lr,dp(Lr)),Gr=ze,ks="#0b1120",Ir="#1f2937",In="#dbeafe",As=Ee,ar="#0b1120";y.useEffect(()=>{if(t){const _e=sessionStorage.getItem(`booking_step_${F}`);be(_e==="3"&&d&&u?3:_e==="2"&&d?2:1),Ie([])}},[t,F,d,u]),y.useEffect(()=>{t&&Z&&be(3)},[t,Z]),y.useEffect(()=>{t&&F&&sessionStorage.setItem(`booking_step_${F}`,te.toString())},[te,t,F]);const ls=y.useCallback(async()=>{if(!t||!F){Ie([]),cn(!1);return}if(!zt.current){zt.current=!0,We(!0);try{const _e=await Npe(F,_t,oe);Ie(_e)}catch(_e){console.error("Error loading occupied slots:",_e),Ie([])}finally{We(!1),cn(!0),zt.current=!1}}},[t,F,_t,oe]);y.useEffect(()=>{ls()},[ls]);const Aa=y.useCallback(async _e=>{if(!(!_e||!F)&&!_n.current){_n.current=!0,nn(!0);try{const Xe=await Epe(F,_e);Ie(Vt=>{const sn=Ei(_e);return[...Vt.filter(Vr=>Vr.date!==sn),...Xe]})}catch(Xe){console.error("Error loading occupied slots:",Xe)}finally{nn(!1),_n.current=!1}}},[F]);y.useEffect(()=>{d&&Aa(d)},[d,Aa]),y.useEffect(()=>{Se("all")},[d]);const vr=_e=>{if(_e){const Xe=Ef[_e.getDay()],Vt=l.filter(sn=>sn.days_of_week?.includes(Xe));p(_e,Vt[0]?.id||null)}else p(null,null)},ns=_e=>{const Xe=Ef[_e.getDay()];return l.some(Vt=>Vt.days_of_week?.includes(Xe))},zs=y.useMemo(()=>{if(!d)return[];const _e=Ef[d.getDay()];return l.filter(Xe=>Xe.days_of_week?.includes(_e))},[d,l]),Qs=y.useMemo(()=>{if(!d||Pe.length===0)return[];const _e=Ei(d);return Pe.filter(Xe=>Xe.date===_e)},[d,Pe]),Je=y.useMemo(()=>zs.length===0?[]:zs.map(_e=>{if(Qs.length===0)return{..._e,isAvailable:!0};if(v){const Xe=Qs.filter(Vt=>Vt.professional_id===v||Vt.professional_id==="unassigned");return{..._e,isAvailable:!Ff(_e,Xe)}}return{..._e,isAvailable:!Ff(_e,Qs)}}),[zs,Qs,v]),ko=Je.length>=8,ri=y.useMemo(()=>{const _e=Je,Xe=ve==="all"?_e:_e.filter(sn=>{const[Zt]=sn.start_time.split(":").map(Number);return ve==="morning"?Zt<12:Zt>=12}),Vt=sn=>{const[Zt="0",Vr="0"]=sn.split(":");return Number(Zt)*60+Number(Vr)};return[...Xe].sort((sn,Zt)=>Vt(sn.start_time)-Vt(Zt.start_time))},[Je,ve]),ai=y.useMemo(()=>ri.filter(_e=>_e.isAvailable),[ri]),Kr=y.useMemo(()=>{if(!d||j.length===0||Pe.length===0)return j;const _e=l.filter(Xe=>{const Vt=Ef[d.getDay()];return Xe.days_of_week?.includes(Vt)});return j.filter(Xe=>jpe(Xe.id,_e,Pe))},[d,j,l,Pe]),Ao=y.useCallback(_e=>{const Xe=Ef[_e.getDay()],Vt=l.filter(sn=>sn.days_of_week?.includes(Xe));if(Vt.length===0)return 0;if(Pe.length>0){const sn=Ei(_e),Zt=Pe.filter(Vr=>Vr.date===sn);if(Zt.length>0)return Vt.filter(Pi=>{if(v){const Xs=Zt.filter(or=>or.professional_id===v||or.professional_id==="unassigned");return!Ff(Pi,Xs)}return!Ff(Pi,Zt)}).length}return Vt.length},[l,Pe,v]),wr=_e=>{if(!ns(_e))return"booking-day-blocked";const Xe=Ao(_e);return Xe===0?"booking-day-no-slots":Xe>=1&&Xe<=3?"booking-day-low-slots":"booking-day-available"},ir=_e=>{const Xe=new Date(_e);Xe.setHours(0,0,0,0);for(let Vt=0;Vt<=35;Vt+=1){const sn=new Date(Xe);if(sn.setDate(Xe.getDate()+Vt),sn>oe)break;if(ns(sn)){vr(sn);return}}},Wn=()=>{const _e=[],Xe=new Date;for(Xe.setHours(0,0,0,0);_e.length<3&&Xe<=oe;)ns(Xe)&&_e.push(new Date(Xe)),Xe.setDate(Xe.getDate()+1);return _e},On=!!d,Or=!!u,Ri=()=>te===1?"Ver horarios":te===2?"Continuar":L,Ro=!!h.client_name&&!!h.client_whatsapp&&!!h.client_rut&&(!I||!!h.client_email)&&(!P||!!v),Do=()=>{be(_e=>{const Xe=_e===3?2:1;return F&&sessionStorage.setItem(`booking_step_${F}`,String(Xe)),Xe})},ma=()=>{te===1&&On?(be(2),F&&sessionStorage.setItem(`booking_step_${F}`,"2")):te===2&&Or&&(be(3),F&&sessionStorage.setItem(`booking_step_${F}`,"3"))},Qr=()=>{be(1),F&&sessionStorage.setItem(`booking_step_${F}`,"1"),H?.()},Di=()=>{!h.client_name||h.client_name.trim().length<2||!h.client_whatsapp||h.client_whatsapp.replace(/\D/g,"").length<9||!h.client_rut||h.client_rut.trim().length<8||I&&(!h.client_email||!h.client_email.includes("@"))||P&&!v||_()};return a.jsxs(Ai,{isOpen:t,onClose:X,className:"p-0 w-full max-w-5xl max-h-[92vh] overflow-hidden flex flex-col bg-[#f3f6fb] booking-modal-container",ariaLabel:`Agendar servicio: ${n}`,ariaLabelledBy:"booking-modal-title",ariaDescribedBy:"booking-modal-description",children:[a.jsx(Ope,{serviceName:n,serviceDuration:r,servicePrice:s,serviceHidePrice:i,professionalName:v&&j.length>0?j.find(_e=>_e.id===v)?.name||"Profesional":void 0,modalText:Ht,modalMuted:Ln,modalBorder:At,onClose:X,isSubmitting:Y,currentStep:te}),a.jsxs("div",{className:"px-4 sm:px-6 py-3 sm:py-4 flex-1 min-h-0 overflow-y-auto booking-modal-content",style:{backgroundColor:lt,color:Ht,scrollbarWidth:"none",WebkitTextSizeAdjust:"100%",tabSize:4,fontFeatureSettings:"normal",fontVariationSettings:"normal",WebkitTapHighlightColor:"transparent",lineHeight:"inherit",fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif",WebkitFontSmoothing:"antialiased",boxSizing:"border-box"},children:[a.jsx("style",{children:`
          /* Variables CSS iOS/Android para mantener colores alternados */
          :root, .booking-modal-container {
            --ios-text-primary: #111827;
            --ios-text-secondary: #374151;
            --ios-text-muted: #4b5563;
            --ios-text-subtle: #6b7280;
            --ios-surface: #ffffff;
            --ios-surface-muted: #f8fafc;
            --badge-slate-bg: #e2e8f0;
            --badge-slate-text: #1f2937;
            --badge-slate-border: #cbd5e1;
            --badge-gray-bg: #e5e7eb;
            --badge-gray-text: #1f2937;
            --badge-gray-border: #cbd5e1;
            --badge-blue-bg: #dbeafe;
            --badge-blue-text: #1e3a8a;
            --badge-blue-border: #93c5fd;
            --badge-emerald-bg: #d1fae5;
            --badge-emerald-text: #065f46;
            --badge-emerald-border: #6ee7b7;
            --badge-green-bg: #dcfce7;
            --badge-green-text: #166534;
            --badge-green-border: #86efac;
            --badge-amber-bg: #fef3c7;
            --badge-amber-text: #92400e;
            --badge-amber-border: #fcd34d;
            --badge-yellow-bg: #fef9c3;
            --badge-yellow-text: #854d0e;
            --badge-yellow-border: #fde047;
            --badge-red-bg: #fee2e2;
            --badge-red-text: #991b1b;
            --badge-red-border: #fca5a5;
          }
          
          .booking-modal-content::-webkit-scrollbar {
            display: none;
          }
          
          .booking-modal-content {
            scrollbar-width: none;
          }
        `}),a.jsx("style",{children:`
          .booking-step-panel {
            animation: bookingStepFade 220ms ease;
          }
          @keyframes bookingStepFade {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `}),a.jsx("div",{className:"booking-step-panel",children:Z?a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex flex-col items-center text-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-emerald-100 text-emerald-700 flex items-center justify-center text-3xl shadow-sm",children:""}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xl font-bold text-emerald-800",children:"Reserva solicitada"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Te avisaremos cuando sea confirmada."})]})]}),a.jsxs("div",{className:"rounded-2xl border p-4 sm:p-5",style:{borderColor:At,backgroundColor:ze},children:[a.jsx("h5",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Detalle de la cita"}),a.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[Z.companyName&&a.jsxs("p",{children:[a.jsx("strong",{children:"Negocio:"})," ",Z.companyName]}),Z.serviceName&&a.jsxs("p",{children:[a.jsx("strong",{children:"Servicio:"})," ",Z.serviceName]}),Z.date&&a.jsxs("p",{children:[a.jsx("strong",{children:"Fecha:"})," ",Z.date.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),Z.startTime&&Z.endTime&&a.jsxs("p",{children:[a.jsx("strong",{children:"Hora:"})," ",Z.startTime," - ",Z.endTime]}),Z.professionalName&&a.jsxs("p",{children:[a.jsx("strong",{children:"Profesional:"})," ",Z.professionalName]}),Z.address&&a.jsxs("p",{children:[a.jsx("strong",{children:"Direccin:"})," ",Z.address]})]})]}),ee&&a.jsx("a",{href:ee,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 rounded-lg px-5 py-2.5 text-sm font-semibold shadow-sm",style:{backgroundColor:Ee,color:"#ffffff"},children:"Cmo llegar"})]}):te===1?a.jsx("div",{className:"space-y-5",children:a.jsx(Vpe,{label:"Selecciona una fecha",selectedDate:d,onTodayClick:()=>ir(new Date),onTomorrowClick:()=>{const _e=new Date;_e.setDate(_e.getDate()+1),ir(_e)},onNextWeekClick:()=>{const _e=new Date;_e.setDate(_e.getDate()+7),ir(_e)},onNextAvailableClick:()=>{const[_e]=Wn();_e&&vr(_e)},lightTheme:rt,calendarTitle:Xn,calendarSurfaceBg:Ot,calendarHeaderBg:tt,calendarGridBg:Fs,calendarText:vn,calendarSelectedBg:$n,calendarSelectedText:An,calendarNoSlotsSelectedText:$s,calendarNoSlotsBg:Lr,accentColor:Ee,minDate:_t,maxDate:oe,handleDateChange:vr,isDateAvailable:ns,getDayAvailabilityClass:wr,slotsSubtleText:Ir,theme:e})}):te===2?a.jsx("div",{className:"space-y-4 sm:space-y-5",children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:gap-5",children:[!1,a.jsx(Upe,{selectedDate:d,schedules:ri,availableCount:ai.length,isLoadingCalendarInventory:Fe,hasLoadedCalendarInventoryOnce:Ze,isRefreshingSelectedDate:kt,selectedSchedule:u,onScheduleChange:x,serviceDuration:r,slotsText:ks,slotsSubtleText:Ir,slotsSurfaceBg:Gr,selectedSlotBg:In,selectedSlotBorder:As,selectedSlotText:ar,showTimeFilters:ko,timeFilter:ve,onTimeFilterChange:Se,onNextAvailableClick:()=>{const[_e]=Wn();_e&&vr(_e)}}),!1]})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:"Confirmar reserva"}),a.jsx("h4",{className:"text-lg sm:text-xl font-semibold text-slate-900",children:"Confirma tu reserva"})]}),a.jsxs("div",{className:"border rounded-lg p-4 mb-6",style:{borderColor:At,backgroundColor:ze},children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Resumen de tu reserva"}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Servicio:"})," ",n]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Fecha:"})," ",d?.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Horario:"})," ",l.find(_e=>_e.id===u)?.start_time," - ",l.find(_e=>_e.id===u)?.end_time]}),v&&a.jsxs("p",{children:[a.jsx("strong",{children:"Profesional:"})," ",j.find(_e=>_e.id===v)?.name]})]})]}),Kr.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Selecciona un profesional ",P&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Kr.map(_e=>a.jsxs("button",{type:"button",onClick:()=>T?.(_e.id),className:`w-full text-left px-4 py-3 rounded-lg border-2 transition ${v===_e.id?"border-gray-400 bg-[#e7f0fb]":"border-gray-200 hover:border-gray-300"}`,style:{borderColor:v===_e.id?e.buttonColor:void 0},children:[a.jsx("div",{className:"font-semibold text-gray-900",children:_e.name}),(_e.email||_e.phone)&&a.jsx("div",{className:"text-xs text-gray-600",children:[_e.email,_e.phone].filter(Boolean).join("  ")})]},_e.id))})]}),$.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[z," ",B&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:Q||"",onChange:_e=>G?.(_e.target.value||""),className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent",children:[a.jsx("option",{value:"",children:q}),$.filter(_e=>_e.active!==!1).map(_e=>a.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"client-name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tu nombre completo *"}),a.jsx("input",{id:"client-name",type:"text",required:!0,placeholder:"Ej: Juan Prez",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all",style:{"--tw-ring-color":Ee},value:h.client_name,onChange:_e=>b("client_name",_e.target.value)})]}),R&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"client-email",className:"block text-sm font-medium text-gray-700 mb-2",children:[S," ",I&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{id:"client-email",type:"email",required:I,placeholder:O,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all",style:{"--tw-ring-color":Ee},value:h.client_email||"",onChange:_e=>b("client_email",_e.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"client-rut",className:"block text-sm font-medium text-gray-700 mb-2",children:"RUT *"}),a.jsx("input",{id:"client-rut",type:"text",required:!0,placeholder:"Ej: 12.345.678-9",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all",style:{"--tw-ring-color":Ee},value:h.client_rut||"",onChange:_e=>b("client_rut",_e.target.value)}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Requerido para generar tu ficha de paciente"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"client-whatsapp",className:"block text-sm font-medium text-gray-700 mb-2",children:A}),a.jsxs("div",{className:"relative",children:[M&&a.jsx("span",{className:"absolute left-4 top-3.5 text-gray-500",children:M}),a.jsx("input",{id:"client-whatsapp",type:"tel",required:!0,placeholder:C,maxLength:M?9:15,className:`w-full ${M?"pl-14":"pl-4"} pr-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all`,style:{"--tw-ring-color":Ee},value:h.client_whatsapp,onChange:_e=>{const Xe=_e.target.value.replace(/\D/g,"");b("client_whatsapp",Xe)}})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ingresa tu dato de contacto para confirmar la cita"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"client-comment",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comentarios o solicitudes especiales (opcional)"}),a.jsx("textarea",{id:"client-comment",rows:4,placeholder:"Ej: Prefiero atencin en la maana...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-current focus:border-transparent transition-all resize-none",style:{"--tw-ring-color":Ee},value:h.client_comment,onChange:_e=>b("client_comment",_e.target.value)}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[h.client_comment.length,"/500 caracteres"]})]})]})},Z?"booking-confirmation":`booking-step-${te}`)]}),a.jsx(Bpe,{confirmation:Z,step:te,onClose:X,onRestart:Qr,onBack:Do,onNext:ma,onSubmit:Di,canProceedToStep2:On,canProceedToStep3:Or,canSubmit:Ro,isSubmitting:Y,accentColor:Ee,borderColor:At,primaryLabel:Ri(),showWhatsappIcon:k})]})}const Fpe={bgColor:"#ffffff",cardColor:"#ffffff",bgOpacity:1,cardOpacity:1,buttonColor:"#2563eb",buttonTextColor:"#ffffff",titleColor:"#111827",subtitleColor:"#4b5563",textColor:"#4b5563",fontTitle:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif',fontBody:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif',fontButton:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif'};function $pe(){const t=qe(),{t:e}=ln("appointments"),{firestoreUser:n}=wt(),{handleError:s}=at(),[r,i]=y.useState([]),[l,d]=y.useState([]),[u,h]=y.useState([]),[f,p]=y.useState([]),[x,b]=y.useState(null),[_,j]=y.useState(null),[v,T]=y.useState(null),[P,A]=y.useState(null),[C,M]=y.useState({client_name:"",client_whatsapp:"",client_email:"",client_rut:"",client_comment:""}),[L,k]=y.useState([]),[R,S]=y.useState(null),[O,I]=y.useState(null),[F,$]=y.useState(!1),[Q,G]=y.useState(!0),[B,z]=y.useState(!1);y.useEffect(()=>{Z()},[n]);const q=y.useMemo(()=>r.filter(X=>X.status==="ACTIVE"),[r]),Z=async()=>{if(n?.company_id){G(!0);try{const[X,ie,te]=await Promise.all([Qc(n.company_id),tv(n.company_id),yn(n.company_id)]);i(X.filter(ve=>ve.status==="ACTIVE")),d(ie),I(te?.category_id||null);const be=["clinicas_odontologicas","clinicas_kinesiologicas","centros_terapia"];if(te?.category_id&&be.includes(te.category_id)){const ve=await $7(n.company_id);k(ve.filter(Se=>Se.active!==!1)),S(ve.find(Se=>Se.active!==!1)?.id||null)}else k([]),S(null)}catch(X){s(X)}finally{G(!1)}}},ee=()=>{b(null),j(null),h([]),p([]),T(null),A(null),M({client_name:"",client_whatsapp:"",client_email:"",client_rut:"",client_comment:""}),$(!1)},H=async X=>{if(!n?.company_id)return;b(X),$(!0),T(null),A(null);const ie=X.professional_ids&&X.professional_ids.length>0?l.filter(te=>X.professional_ids?.includes(te.id)):l;h(ie),j(ie[0]?.id||null),L.length>0&&S(L[0]?.id||null);try{const[te,be]=await Promise.all([ig(X.id),$h(n.company_id)]),ve=be.filter(Se=>Se.status==="ACTIVE"&&te.some(Pe=>Pe.schedule_slot_id===Se.id));p(ve)}catch(te){J.error("No pudimos cargar los horarios"),s(te)}},Y=async()=>{if(!x||!P||!v||!n?.company_id){J.error("Completa todos los datos de la cita");return}if(!C.client_name||!C.client_whatsapp||!C.client_rut){J.error("Completa el nombre, telfono y RUT del cliente");return}if(u.length>0&&!_){J.error("Selecciona un profesional");return}if(O&&["clinicas_odontologicas","clinicas_kinesiologicas","centros_terapia"].includes(O)&&L.length>0&&!R){J.error("Selecciona un recurso");return}const te=f.find(Pe=>Pe.id===P);if(!te){J.error("Horario no encontrado");return}const be=_||u[0]?.id;if(!be){J.error("Debes asignar un profesional");return}if(!await ele(n.company_id,be,v,te.start_time,te.end_time)){J.error("El horario seleccionado ya est ocupado");return}if(!await F7(n.company_id,be,v,te.start_time,te.end_time)){J.error("El profesional no tiene cupos disponibles en ese horario");return}z(!0);try{const Pe={company_id:n.company_id,service_id:x.id,professional_id:be,client_name:C.client_name,client_phone:C.client_whatsapp,appointment_date:v,start_time:te.start_time,end_time:te.end_time,status:Be.CONFIRMED};C.client_email?.trim()&&(Pe.client_email=C.client_email.trim()),C.client_rut?.trim()&&(Pe.client_rut=C.client_rut.trim()),C.client_comment?.trim()&&(Pe.notes=C.client_comment.trim()),R&&(Pe.resource_id=R);const Ie=await Zoe(Pe,n.id);await _pe({company_id:n.company_id,service_id:x.id,professional_id:be,schedule_slot_id:P,date:Ei(v),start_time:te.start_time,end_time:te.end_time,status:"BOOKED"});try{const Fe=await ev(Ie),We=await yn(n.company_id),kt=u.find(Ze=>Ze.id===be)?.name||"Profesional",nn=We?.notifications?.toEmail||n.email||"";if(Fe&&(nn&&await Ooe(Fe,x.name,kt,We?.name||"Tu negocio",nn,We?.whatsapp),C.client_email)){await N8(Fe,x.name,kt,We?.name||"Tu negocio",C.client_email,We?.whatsapp);const Ze=new Date(v),cn=new Date(Ze.getTime()-1440*60*1e3),zt=new Date(Ze.getTime()-720*60*1e3),_n=new Date;cn<=_n?await K0(Fe,x.name,kt,We?.name||"Tu negocio",C.client_email,We?.whatsapp):setTimeout(async()=>{try{await K0(Fe,x.name,kt,We?.name||"Tu negocio",C.client_email,We?.whatsapp)}catch(_t){console.warn("No se pudo enviar recordatorio 24h:",_t)}},cn.getTime()-_n.getTime()),zt<=_n?await K0(Fe,x.name,kt,We?.name||"Tu negocio",C.client_email,We?.whatsapp):setTimeout(async()=>{try{await K0(Fe,x.name,kt,We?.name||"Tu negocio",C.client_email,We?.whatsapp)}catch(_t){console.warn("No se pudo enviar recordatorio 12h:",_t)}},zt.getTime()-_n.getTime())}}catch(Fe){console.warn("No se pudieron enviar correos/recordatorios de cita:",Fe)}J.success("Cita creada exitosamente"),ee(),t("/dashboard/schedule")}catch(Pe){s(Pe)}finally{z(!1)}};return Q?a.jsx(yt,{fullScreen:!0,size:"lg"}):q.length===0?a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("button",{onClick:()=>t(-1),className:"mb-4 flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":"Go back",children:[a.jsx(cg,{className:"w-4 h-4"}),e("form.buttons.cancel")]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-8 text-center",children:[a.jsx("p",{className:"text-gray-700 mb-3",children:"Primero debes crear un servicio."}),a.jsx("button",{type:"button",onClick:()=>t("/dashboard/services/new"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Crear servicio"})]})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>t(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Agenda manual"})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Lie,{className:"w-5 h-5 text-blue-600"}),"Selecciona el servicio que quieres agendar"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map(X=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:X.name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:X.description}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Duracin: ",X.estimated_duration_minutes," min"]}),X.professional_ids&&X.professional_ids.length>0&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Profesionales asignados: ",X.professional_ids.length]})]}),a.jsx("button",{type:"button",onClick:()=>H(X),className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Abrir calendario"})]})},X.id))})]})]}),a.jsx(z7,{isOpen:F,serviceName:x?.name,availableSchedules:f,selectedDate:v,selectedSchedule:P,bookingForm:C,onClose:ee,onDateChange:(X,ie)=>{T(X),A(ie)},onScheduleChange:X=>A(X),onFormChange:(X,ie)=>M({...C,[X]:ie}),onSubmit:Y,professionals:u,selectedProfessionalId:_,onProfessionalChange:X=>j(X),requireProfessional:u.length>0,resources:L,selectedResourceId:R,onResourceChange:X=>S(X||null),requireResource:L.length>0&&O?["clinicas_odontologicas","clinicas_kinesiologicas","centros_terapia"].includes(O):!1,resourceLabel:e("form.labels.resource"),resourcePlaceholder:e("form.placeholders.selectResource",{ns:"appointments"}),contactLabel:"Telfono / WhatsApp *",contactPlaceholder:"Ej: +56912345678",contactPrefix:"",submitLabel:B?"Guardando...":"Crear cita",enableEmailField:!0,requireEmail:!0,emailLabel:"Correo del cliente *",emailPlaceholder:"cliente@correo.com",showWhatsappIcon:!1,theme:Fpe})]})}function zpe(){const{t}=ln("notifications"),{firestoreUser:e}=wt(),{trackEvent:n}=So(),{handleAsyncError:s}=at(),[r,i]=y.useState(!0),[l,d]=y.useState(!1),[u,h]=y.useState(!1),[f,p]=y.useState(""),[x,b]=y.useState(!0);y.useEffect(()=>{e?.id&&e?.company_id&&_()},[e]);const _=async()=>{if(!(!e?.id||!e?.company_id)){i(!0);try{const T=await Zj(e.id,e.company_id);T?(b(!0),h(T.email_notifications_enabled??!1),p(T.notification_email||e.email)):(b(!0),h(!1),p(e.email))}catch(T){s(async()=>{throw T})}finally{i(!1)}}},j=async T=>{if(!(!e?.id||!e?.company_id)){d(!0);try{await s(async()=>{await wP(e.id,e.company_id,T,f||e.email),n(T?"notifications_toggle_on":"notifications_toggle_off",{company_id:e.company_id}),h(T),J.success(t(T?"messages.enabledSuccess":"messages.disabledSuccess")),await _()})}catch{J.error(t("messages.error"))}finally{d(!1)}}},v=async()=>{if(!(!e?.id||!e?.company_id||!f)){d(!0);try{await s(async()=>{await wP(e.id,e.company_id,u,f),J.success(t("messages.saved")),await _()})}catch{J.error(t("messages.error"))}finally{d(!1)}}};return r?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx(yt,{})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsxs("div",{className:"px-6 py-5 border-b border-gray-200",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("title")}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t("description")})]}),a.jsxs("div",{className:"px-6 py-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t("emailNotifications.title")}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:t("emailNotifications.description")})]}),a.jsx("button",{type:"button",role:"switch","aria-checked":u,"aria-label":t("emailNotifications.toggleLabel"),onClick:()=>j(!u),disabled:l||!x,className:`${u?"bg-blue-600":"bg-gray-200"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed`,children:a.jsx("span",{"aria-hidden":"true",className:`${u?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]}),u&&a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("label",{htmlFor:"notificationEmail",className:"block text-sm font-medium text-gray-700",children:t("emailNotifications.emailLabel")}),a.jsxs("div",{className:"mt-1 flex gap-3",children:[a.jsx("input",{type:"email",id:"notificationEmail",value:f,onChange:T=>p(T.target.value),placeholder:t("emailNotifications.emailPlaceholder"),className:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),a.jsx("button",{type:"button",onClick:v,disabled:l||!f,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t("buttons.save")})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:t("emailNotifications.emailHelp")})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:t("types.newAppointment")}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("li",{children:[" ",t("types.newAppointment")]}),a.jsxs("li",{children:[" ",t("types.appointmentConfirmed")]}),a.jsxs("li",{children:[" ",t("types.appointmentCancelled")]}),a.jsxs("li",{children:[" ",t("types.appointmentReminder")]})]})]})]})]})})})}function Hpe({companyId:t,onUpgradeClick:e}){const{handleError:n}=at(),[s,r]=y.useState(!0),[i,l]=y.useState("BASIC"),[d,u]=y.useState(null),h=y.useCallback(async()=>{try{r(!0);const _=await woe(t),j=h8(_.currentPlan);l(j),u(_.limits)}catch(_){n(_)}finally{r(!1)}},[t,n]);if(y.useEffect(()=>{h()},[h]),s)return a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:a.jsx(yt,{size:"sm"})});const f=Dp(i),p=lie(i),x=_=>({BASIC:"bg-gray-100 text-gray-800 border-gray-300",STARTER:"bg-blue-100 text-blue-800 border-blue-300",PRO:"bg-purple-100 text-purple-800 border-purple-300",BUSINESS:"bg-indigo-100 text-indigo-800 border-indigo-300",ENTERPRISE:"bg-green-100 text-green-800 border-green-300"})[_]||"bg-gray-100 text-gray-800 border-gray-300",b=_=>_==="PRO"?a.jsx(l2,{className:"w-5 h-5"}):a.jsx(tl,{className:"w-5 h-5"});return a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${x(i)}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[b(i),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:f.label}),a.jsx("p",{className:"text-sm opacity-80",children:f.description})]})]}),a.jsx("div",{className:"text-right",children:a.jsx("p",{className:"text-2xl font-bold",children:f.price})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Caractersticas incluidas:"}),a.jsxs("ul",{className:"space-y-2",children:[f.features.automaticReminders&&a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[a.jsx(tl,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Recordatorios automticos"})]}),f.features.exportData&&a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[a.jsx(tl,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Exportacin de datos"})]}),f.features.integrations&&a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[a.jsx(tl,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Integraciones"})]}),f.features.featuredInDirectory&&a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[a.jsx(tl,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Destacado en directorio"})]}),f.features.customDomain&&a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[a.jsx(tl,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Dominio personalizado"})]}),f.features.advancedAnalytics&&a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[a.jsx(tl,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Analticas avanzadas"})]}),f.features.prioritySupport&&a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[a.jsx(tl,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Soporte prioritario"})]}),f.features.whiteLabel&&a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[a.jsx(tl,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"White Label"})]})]})]}),d&&a.jsxs("div",{className:"px-6 pb-6",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Lmites de tu plan:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Profesionales"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.professionals===1/0?"":d.professionals})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Servicios"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.services===1/0?"":d.services})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Productos"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.products===1/0?"":d.products})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Horarios"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:d.serviceSchedules===1/0?"":d.serviceSchedules})]})]})]}),p&&e&&a.jsxs("div",{className:"px-6 pb-6",children:[a.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg",children:[a.jsx(Fie,{className:"w-5 h-5"}),"Actualizar a ",Dp(p).label]}),a.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Desbloquea ms funciones y lmites superiores"})]}),!p&&i==="ENTERPRISE"&&a.jsx("div",{className:"px-6 pb-6",children:a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(l2,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-purple-900",children:"Tienes el plan ms completo!"}),a.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Disfrutas de todas las funciones sin lmites."})]})]})})]})}function qpe(){const{firestoreUser:t}=wt(),e=qe(),n=()=>{const s=encodeURIComponent("Hola, me gustara actualizar mi plan de suscripcin.");window.open(`https://wa.me/56912345678?text=${s}`,"_blank")};return t?.company_id?a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[a.jsx(cg,{className:"w-5 h-5"}),"Volver al dashboard"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mi Suscripcin"}),a.jsx("p",{className:"text-gray-600",children:"Gestiona tu plan y lmites de recursos"})]}),a.jsx(Hpe,{companyId:t.company_id,onUpgradeClick:n}),a.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Necesitas ms recursos?"}),a.jsx("p",{className:"text-sm text-blue-800 mb-4",children:"Si has alcanzado los lmites de tu plan actual, puedes actualizar a un plan superior para obtener ms profesionales, servicios y productos."}),a.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Ver opciones de actualizacin"})]}),a.jsxs("div",{className:"mt-6 bg-gray-100 border border-gray-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Tienes preguntas?"}),a.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Nuestro equipo est disponible para ayudarte con cualquier consulta sobre planes y facturacin."}),a.jsx("a",{href:"https://wa.me/56912345678?text=Hola,%20tengo%20una%20consulta%20sobre%20mi%20plan",target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Contactar por WhatsApp"})]})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No se encontr informacin de la empresa"}),a.jsx("button",{onClick:()=>e("/dashboard"),className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Volver al dashboard"})]})})}const Wpe=async(t,e)=>{const{width:n,height:s,maxSizeKB:r=1e3,format:i="image/jpeg",quality:l=.9}=e,d=await new Promise((P,A)=>{const C=new FileReader;C.onload=()=>P(C.result),C.onerror=A,C.readAsDataURL(t)}),u=await new Promise((P,A)=>{const C=new Image;C.onload=()=>P(C),C.onerror=A,C.src=d}),h=document.createElement("canvas");h.width=n,h.height=s;const f=h.getContext("2d");if(!f)throw new Error("No se pudo obtener contexto de canvas");i==="image/jpeg"?(f.fillStyle="#ffffff",f.fillRect(0,0,n,s)):f.clearRect(0,0,n,s);const p=Math.min(n/u.width,s/u.height),x=u.width*p,b=u.height*p,_=(n-x)/2,j=(s-b)/2;f.drawImage(u,_,j,x,b);let v=l,T=null;for(let P=0;P<3&&(T=await new Promise(C=>h.toBlob(C,i,v)),!(!T||T.size/1024<=r));P++)v=Math.max(.5,v-.15);if(!T)throw new Error("No se pudo generar la imagen procesada");return new File([T],t.name,{type:i,lastModified:Date.now()})},gg=async(t,e,n)=>{const s=n?await Wpe(t,n):t,r=zte(u9,e);return await Fte(r,s),await $te(r)},nl=[{label:"Sans (Inter/Segoe)",value:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif'},{label:"Serif (Georgia)",value:'Georgia, "Times New Roman", serif'},{label:"Rounded (Nunito)",value:'"Nunito", "Segoe UI Rounded", system-ui, sans-serif'},{label:"Century Gothic",value:'"Century Gothic", "Apple Gothic", sans-serif'},{label:"Graffiti",value:'"Rock Salt", "Comic Sans MS", cursive'},{label:"Code",value:'"Source Code Pro", "Fira Code", monospace'},{label:"Display (Oswald)",value:'"Oswald", "Arial Narrow", sans-serif'},{label:"Grotesk (Space Grotesk)",value:'"Space Grotesk", "Inter", system-ui, sans-serif'},{label:"Humanist (Gill Sans)",value:'"Gill Sans", "Trebuchet MS", sans-serif'}],S1=["","","","","","","","","",""],T1=["classic","modern","compact","immersive","minimal"];function Ype(){const{firestoreUser:t}=wt(),{handleError:e}=at(),{t:n}=ln(),[s,r]=y.useState({logo_url:"",logo_position:"center",background_color:"#ffffff",card_color:"#ffffff",background_opacity:1,card_opacity:1,button_color:"#2563eb",button_text_color:"#ffffff",title_color:"#111827",subtitle_color:"#4b5563",text_color:"#4b5563",description_color:"#6b7280",font_title:nl[0].value,font_body:nl[0].value,font_button:nl[0].value,card_layout:1,show_whatsapp_fab:!1,hero_kicker:"",hero_title:"",hero_description:"",hero_banner_card_color:"#ffffff",hero_banner_card_opacity:0,calendar_card_color:"#ffffff",calendar_card_opacity:100,calendar_text_color:"#111827",calendar_title_color:"#111827",calendar_button_color:"#2563eb",calendar_button_text_color:"#ffffff",calendar_available_day_color:"#22c55e",calendar_low_slots_color:"#eab308",calendar_no_slots_color:"#ef4444",calendar_selected_day_color:"#2563eb",service_modal_bg_color:"#ffffff",service_modal_text_color:"#111827",service_modal_title_color:"#111827",service_modal_price_color:"#2563eb",service_modal_meta_color:"#4b5563",service_modal_image_bg_color:"#f3f4f6",service_modal_section_title_color:"#111827",service_modal_card_bg_color:"#ffffff",service_modal_card_border_color:"#e5e7eb",service_modal_link_color:"#2563eb",service_modal_button_color:"#2563eb",service_modal_button_text_color:"#ffffff",service_modal_close_bg_color:"#ffffff",service_modal_close_icon_color:"#111827",service_card_emoji:"",service_cta_emoji:"",service_professionals_emoji:""}),[i,l]=y.useState("classic"),[d,u]=y.useState(null),[h,f]=y.useState(!0),[p,x]=y.useState(!1);y.useEffect(()=>{b()},[]);const b=async()=>{if(!t?.company_id){f(!1);return}try{const[v,T]=await Promise.all([cl(t.company_id,an.SERVICES),yn(t.company_id)]);if(v&&r({logo_url:v.logo_url||"",logo_position:v.logo_position||"center",background_color:v.background_color||"#ffffff",card_color:v.card_color||"#ffffff",background_opacity:v.background_opacity??1,card_opacity:v.card_opacity??1,button_color:v.button_color||"#2563eb",button_text_color:v.button_text_color||"#ffffff",title_color:v.title_color||"#111827",subtitle_color:v.subtitle_color||"#4b5563",text_color:v.text_color||"#4b5563",description_color:v.description_color||v.text_color||"#6b7280",font_title:v.font_title||nl[0].value,font_body:v.font_body||nl[0].value,font_button:v.font_button||nl[0].value,card_layout:v.card_layout||1,show_whatsapp_fab:v.show_whatsapp_fab||!1,hero_kicker:v.hero_kicker||"",hero_title:v.hero_title||"",hero_description:v.hero_description||"",hero_banner_card_color:v.hero_banner_card_color||"#ffffff",hero_banner_card_opacity:v.hero_banner_card_opacity??0,calendar_card_color:v.calendar_card_color||"#ffffff",calendar_card_opacity:v.calendar_card_opacity??100,calendar_text_color:v.calendar_text_color||"#111827",calendar_title_color:v.calendar_title_color||"#111827",calendar_button_color:v.calendar_button_color||"#2563eb",calendar_button_text_color:v.calendar_button_text_color||"#ffffff",calendar_available_day_color:v.calendar_available_day_color||"#22c55e",calendar_low_slots_color:v.calendar_low_slots_color||"#eab308",calendar_no_slots_color:v.calendar_no_slots_color||"#ef4444",calendar_selected_day_color:v.calendar_selected_day_color||"#2563eb",service_modal_bg_color:v.service_modal_bg_color||v.card_color||"#ffffff",service_modal_text_color:v.service_modal_text_color||v.text_color||"#111827",service_modal_title_color:v.service_modal_title_color||v.title_color||"#111827",service_modal_price_color:v.service_modal_price_color||v.button_color||"#2563eb",service_modal_meta_color:v.service_modal_meta_color||v.subtitle_color||"#4b5563",service_modal_image_bg_color:v.service_modal_image_bg_color||v.card_color||"#f3f4f6",service_modal_section_title_color:v.service_modal_section_title_color||v.title_color||"#111827",service_modal_card_bg_color:v.service_modal_card_bg_color||v.card_color||"#ffffff",service_modal_card_border_color:v.service_modal_card_border_color||v.subtitle_color||"#e5e7eb",service_modal_link_color:v.service_modal_link_color||v.button_color||"#2563eb",service_modal_button_color:v.service_modal_button_color||v.button_color||"#2563eb",service_modal_button_text_color:v.service_modal_button_text_color||v.button_text_color||"#ffffff",service_modal_close_bg_color:v.service_modal_close_bg_color||v.card_color||"#ffffff",service_modal_close_icon_color:v.service_modal_close_icon_color||v.title_color||"#111827",service_card_emoji:v.service_card_emoji||"",service_cta_emoji:v.service_cta_emoji||"",service_professionals_emoji:v.service_professionals_emoji||""}),T){const P=T.public_layout_variant,A=P&&T1.includes(P)?P:"classic";l(A);const C=kr(T);u(C)}}catch(v){e(v)}finally{f(!1)}},_=async(v,T)=>{if(t?.company_id)try{const P=`companies/${t.company_id}/${T}_${Date.now()}`,A=await gg(v,P,{width:512,height:512,maxSizeKB:500,format:"image/png",quality:.95});r({...s,logo_url:A}),J.success("Imagen subida correctamente")}catch(P){J.error("Error al subir imagen"),e(P)}},j=async v=>{if(v.preventDefault(),!!t?.company_id){x(!0);try{await Promise.all([Aj(t.company_id,an.SERVICES,s),si(t.company_id,{public_layout_variant:i||"classic"})]),J.success("Configuracin guardada")}catch(T){J.error("Error al guardar"),e(T)}finally{x(!1)}}};return h?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuracin Visual - Servicios"})]}),a.jsxs("form",{onSubmit:j,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[d!=="barberias"&&a.jsx("div",{className:"rounded-lg border border-blue-100 bg-blue-50/60 p-4",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-blue-900",children:n("dashboard.appearance.publicLayoutVariant.label")}),a.jsx("p",{className:"text-xs text-blue-800",children:n("dashboard.appearance.publicLayoutVariant.helper")})]}),a.jsx("select",{className:"w-full sm:w-auto rounded-md border border-blue-200 bg-white px-3 py-2 text-sm font-medium text-blue-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 transition",value:i,onChange:v=>{const T=v.target.value;T1.includes(T)?l(T):(console.warn("Invalid variant selected, using classic as fallback"),l("classic"))},"aria-label":n("dashboard.appearance.publicLayoutVariant.label"),"aria-describedby":"variant-helper",children:T1.map(v=>a.jsx("option",{value:v,children:n(`dashboard.appearance.publicLayoutVariant.options.${v}`)},v))}),a.jsx("span",{id:"variant-helper",className:"sr-only",children:n("dashboard.appearance.publicLayoutVariant.helper")})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Recomendado: 512x512 px, PNG transparente o JPG, mx ~500KB."}),s.logo_url&&a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("img",{src:s.logo_url,alt:"Logo",className:"h-24"}),a.jsx("button",{type:"button",onClick:()=>r({...s,logo_url:""}),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Eliminar logo"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:v=>{const T=v.target.files?.[0];T&&_(T,"logo")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),a.jsxs("div",{className:"border-t pt-6 mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:" Contenido del Hero (Portada)"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Personaliza el texto y la imagen del hero en tu pgina pblica."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:'Texto pequeo (Kicker) - Ej: "Barbera especializada"'}),a.jsx("input",{type:"text",value:s.hero_kicker,onChange:v=>r({...s,hero_kicker:v.target.value}),placeholder:"Barbera especializada",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Texto que aparece arriba del ttulo principal"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo del Hero"}),a.jsx("input",{type:"text",value:s.hero_title,onChange:v=>r({...s,hero_title:v.target.value}),placeholder:"Deja vaco para usar el nombre de la empresa",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Si est vaco, se usar el nombre de la empresa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin del Hero"}),a.jsx("textarea",{value:s.hero_description,onChange:v=>r({...s,hero_description:v.target.value}),placeholder:"Deja vaco para usar la descripcin de la empresa",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Si est vaco, se usar la descripcin de la empresa"})]}),d!=="barberias"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Recomendado: 512x512 px, PNG transparente o JPG, mx ~500KB."}),s.logo_url&&a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("img",{src:s.logo_url,alt:"Logo",className:"h-32 object-contain rounded"}),a.jsx("button",{type:"button",onClick:()=>r({...s,logo_url:""}),className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Eliminar logo"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:v=>{const T=v.target.files?.[0];T&&_(T,"logo")},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de fondo"}),a.jsx("input",{type:"color",value:s.background_color,onChange:v=>r({...s,background_color:v.target.value}),className:"h-10 w-full"}),a.jsx("label",{className:"block text-sm font-medium text-gray-700 mt-2",children:"Transparencia de fondo"}),a.jsx("input",{type:"range",min:0,max:100,value:Math.round((s.background_opacity??1)*100),onChange:v=>r({...s,background_opacity:Number(v.target.value)/100}),className:"w-full"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Opacidad: ",Math.round((s.background_opacity??1)*100),"%"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de tarjetas"}),a.jsx("input",{type:"color",value:s.card_color,onChange:v=>r({...s,card_color:v.target.value}),className:"h-10 w-full"}),a.jsx("label",{className:"block text-sm font-medium text-gray-700 mt-2",children:"Transparencia de tarjetas"}),a.jsx("input",{type:"range",min:0,max:100,value:Math.round((s.card_opacity??1)*100),onChange:v=>r({...s,card_opacity:Number(v.target.value)/100}),className:"w-full"}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Opacidad: ",Math.round((s.card_opacity??1)*100),"%"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de botones"}),a.jsx("input",{type:"color",value:s.button_color,onChange:v=>r({...s,button_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texto de botones"}),a.jsx("input",{type:"color",value:s.button_text_color,onChange:v=>r({...s,button_text_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de ttulos"}),a.jsx("input",{type:"color",value:s.title_color,onChange:v=>r({...s,title_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de subttulos"}),a.jsx("input",{type:"color",value:s.subtitle_color,onChange:v=>r({...s,subtitle_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de texto"}),a.jsx("input",{type:"color",value:s.text_color,onChange:v=>r({...s,text_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color de descripcin"}),a.jsx("input",{type:"color",value:s.description_color||s.text_color||"#6b7280",onChange:v=>r({...s,description_color:v.target.value}),className:"h-10 w-full"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Color para textos descriptivos y descripciones de servicios"})]})]}),a.jsxs("div",{className:"border-t pt-6 mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ficha de servicio (modal)"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Personaliza cada elemento del detalle del servicio en la pgina pblica."}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fondo de la tarjeta"}),a.jsx("input",{type:"color",value:s.service_modal_bg_color,onChange:v=>r({...s,service_modal_bg_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texto general"}),a.jsx("input",{type:"color",value:s.service_modal_text_color,onChange:v=>r({...s,service_modal_text_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulos"}),a.jsx("input",{type:"color",value:s.service_modal_title_color,onChange:v=>r({...s,service_modal_title_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio"}),a.jsx("input",{type:"color",value:s.service_modal_price_color,onChange:v=>r({...s,service_modal_price_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Metadatos (duracin)"}),a.jsx("input",{type:"color",value:s.service_modal_meta_color,onChange:v=>r({...s,service_modal_meta_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fondo imagen"}),a.jsx("input",{type:"color",value:s.service_modal_image_bg_color,onChange:v=>r({...s,service_modal_image_bg_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulos de seccin"}),a.jsx("input",{type:"color",value:s.service_modal_section_title_color,onChange:v=>r({...s,service_modal_section_title_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fondo tarjetas profesionales"}),a.jsx("input",{type:"color",value:s.service_modal_card_bg_color,onChange:v=>r({...s,service_modal_card_bg_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Borde tarjetas profesionales"}),a.jsx("input",{type:"color",value:s.service_modal_card_border_color,onChange:v=>r({...s,service_modal_card_border_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color enlaces (email)"}),a.jsx("input",{type:"color",value:s.service_modal_link_color,onChange:v=>r({...s,service_modal_link_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Botn agendar"}),a.jsx("input",{type:"color",value:s.service_modal_button_color,onChange:v=>r({...s,service_modal_button_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Texto botn agendar"}),a.jsx("input",{type:"color",value:s.service_modal_button_text_color,onChange:v=>r({...s,service_modal_button_text_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fondo botn cerrar"}),a.jsx("input",{type:"color",value:s.service_modal_close_bg_color,onChange:v=>r({...s,service_modal_close_bg_color:v.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icono botn cerrar"}),a.jsx("input",{type:"color",value:s.service_modal_close_icon_color,onChange:v=>r({...s,service_modal_close_icon_color:v.target.value}),className:"h-10 w-full"})]})]})]}),a.jsxs("div",{className:"border-t pt-6 mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Emojis"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Personaliza los emojis en tarjetas de servicio y botn de agendar."}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emoji en tarjeta de servicio"}),a.jsx("select",{value:s.service_card_emoji,onChange:v=>r({...s,service_card_emoji:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:S1.map(v=>a.jsx("option",{value:v,children:v},v))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ejemplo: ",s.service_card_emoji]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emoji botn Agendar"}),a.jsx("select",{value:s.service_cta_emoji,onChange:v=>r({...s,service_cta_emoji:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:S1.map(v=>a.jsx("option",{value:v,children:v},v))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ejemplo: ",s.service_cta_emoji]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emoji profesionales"}),a.jsx("select",{value:s.service_professionals_emoji,onChange:v=>r({...s,service_professionals_emoji:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:S1.map(v=>a.jsx("option",{value:v,children:v},v))}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Ejemplo: ",s.service_professionals_emoji]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente ttulos"}),a.jsx("select",{value:s.font_title,onChange:v=>r({...s,font_title:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:nl.map(v=>a.jsx("option",{value:v.value,children:v.label},v.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente cuerpo"}),a.jsx("select",{value:s.font_body,onChange:v=>r({...s,font_body:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:nl.map(v=>a.jsx("option",{value:v.value,children:v.label},v.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuente botones"}),a.jsx("select",{value:s.font_button,onChange:v=>r({...s,font_button:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:nl.map(v=>a.jsx("option",{value:v.value,children:v.label},v.value))})]})]}),d!=="barberias"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Layout Premium de Tarjetas"}),a.jsxs("select",{value:s.card_layout,onChange:v=>r({...s,card_layout:Number(v.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[a.jsx("option",{value:1,children:"Layout 1: Grid Clsico"}),a.jsx("option",{value:2,children:"Layout 2: Lista con Imagen Circular"}),a.jsx("option",{value:3,children:"Layout 3: Carrusel Fullscreen"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Selecciona el diseo premium para las tarjetas de servicios en tu pgina pblica."})]}),a.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4",children:[a.jsx("input",{id:"whatsappFab",type:"checkbox",className:"mt-1 h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:s.show_whatsapp_fab,onChange:v=>r({...s,show_whatsapp_fab:v.target.checked})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"whatsappFab",className:"text-sm font-medium text-gray-900",children:"Mostrar botn flotante de WhatsApp"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Agrega un acceso rpido en la esquina inferior para que los clientes escriban por WhatsApp desde la pgina pblica."})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:n(p?"common.saving":"common.save")})})]})]})})}const fC=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],Gpe=fC.slice(0,5),Kpe=fC.slice(5),_M={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"},EM=t=>{const[e,n]=t.split(":").map(Number);return Number.isNaN(e)||Number.isNaN(n)?null:e*60+n},NM=t=>{const e=Math.floor(t/60),n=t%60;return`${String(e).padStart(2,"0")}:${String(n).padStart(2,"0")}`},jM=t=>[...t].sort().join("|");function Qpe(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),[s,r]=y.useState([]),[i,l]=y.useState(null),[d,u]=y.useState(!0),[h,f]=y.useState(!1),[p,x]=y.useState(null),[b,_]=y.useState(!1),[j,v]=y.useState({days_of_week:[],start_time:"",end_time:"",status:"ACTIVE"});y.useEffect(()=>{T()},[]);const T=async()=>{if(t?.company_id)try{const[S,O]=await Promise.all([yn(t.company_id),$h(t.company_id)]);l(S),r(O)}catch(S){n(S)}finally{u(!1)}},P=()=>gne("serviceSchedules",i?.subscription_plan),A=async S=>{if(S.preventDefault(),j.days_of_week.length===0){J.error("Selecciona al menos un da");return}if(t?.company_id){if(s.length>=P()&&!p){const O=y4(i?.subscription_plan);J.error(`Tu plan ${O} no permite ms horarios`);return}try{p?(await v9(p.id,{...j,company_id:t.company_id}),J.success("Horario actualizado")):(await HE({...j,company_id:t.company_id}),J.success("Horario creado")),f(!1),x(null),v({days_of_week:[],start_time:"",end_time:"",status:"ACTIVE"}),await T()}catch(O){J.error("Error al guardar"),n(O)}}},C=S=>{x(S),v({days_of_week:S.days_of_week||[],start_time:S.start_time||"",end_time:S.end_time||"",status:S.status||"ACTIVE"}),f(!0)},M=async S=>{if(confirm("Ests seguro de eliminar este horario?"))try{await w9(S),J.success("Horario eliminado"),await T()}catch(O){J.error("Error al eliminar"),n(O)}},L=S=>{j.days_of_week.includes(S)?v({...j,days_of_week:j.days_of_week.filter(O=>O!==S)}):v({...j,days_of_week:[...j.days_of_week,S]})},k=(S,O,I,F,$)=>{if(S.length===0||!F||!$)return[];const Q=EM(F),G=EM($);if(Q===null||G===null||G<=Q)return[];const B=[];for(let z=Q;z+I<=G;z+=O)B.push({days_of_week:S,start_time:NM(z),end_time:NM(z+I)});return B},R=async S=>{const O=t?.company_id;if(!O||b)return;const I=i?.weekday_open_time,F=i?.weekday_close_time,$=i?.weekend_open_time,Q=i?.weekend_close_time;if(!I&&!F&&!$&&!Q){J.error("Configura horarios de apertura y cierre en tu empresa");return}const G=60,B=[...k(Gpe,S,G,I,F),...k(Kpe,S,G,$,Q)];if(B.length===0){J.error("No hay horarios vlidos para crear con la configuracin actual");return}const z=new Set(s.map(ee=>`${jM(ee.days_of_week||[])}|${ee.start_time}|${ee.end_time}`)),q=B.filter(ee=>{const H=`${jM(ee.days_of_week)}|${ee.start_time}|${ee.end_time}`;return!z.has(H)});if(q.length===0){J.error("Todos los horarios ya existen");return}const Z=P();if(Z!==1/0&&s.length+q.length>Z){const ee=y4(i?.subscription_plan),H=Z-s.length;J.error(`Tu plan ${ee} permite solo ${H} horarios adicionales`);return}try{_(!0),await Promise.all(q.map(ee=>HE({...ee,status:"ACTIVE",company_id:O}))),J.success("Horarios creados"),await T()}catch(ee){J.error("Error al crear horarios"),n(ee)}finally{_(!1)}};return d?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Horarios"})]}),!h&&s.length<P()&&a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsx("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Nuevo horario"}),a.jsx("button",{type:"button",onClick:()=>R(30),disabled:b,className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 disabled:opacity-60",children:"Agregar cada 30 min"}),a.jsx("button",{type:"button",onClick:()=>R(60),disabled:b,className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 disabled:opacity-60",children:"Agregar cada 1 hora"})]})]}),s.length>=P()&&P()!==1/0&&a.jsxs("div",{className:"mb-4 text-sm text-red-600",children:["Alcanzaste el mximo de horarios para tu plan ",i?.subscription_plan||"actual","."]}),h&&a.jsxs("form",{onSubmit:A,className:"bg-white shadow rounded-lg p-6 mb-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Das de la semana *"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:fC.map(S=>a.jsx("button",{type:"button",onClick:()=>L(S),className:`px-4 py-2 rounded-md ${j.days_of_week.includes(S)?"bg-blue-600 text-white":"bg-gray-200 text-blue-800 hover:bg-gray-300"}`,children:_M[S]},S))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora inicio *"}),a.jsx("input",{type:"time",required:!0,step:x4,value:j.start_time,onChange:S=>v({...j,start_time:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora fin *"}),a.jsx("input",{type:"time",required:!0,step:x4,value:j.end_time,onChange:S=>v({...j,end_time:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),a.jsxs("select",{value:j.status,onChange:S=>v({...j,status:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[a.jsx("option",{value:"ACTIVE",children:"Activo"}),a.jsx("option",{value:"INACTIVE",children:"Inactivo"})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),x(null),v({days_of_week:[],start_time:"",end_time:"",status:"ACTIVE"})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:p?"Actualizar":"Crear"})]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[s.length," / ",P()===1/0?"":P()," horarios creados"]})}),a.jsxs("div",{className:"divide-y",children:[s.map(S=>a.jsxs("div",{className:"p-6 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:S.days_of_week?.map(O=>_M[O]).join(", ")}),a.jsxs("div",{className:"text-sm text-gray-600",children:[S.start_time," - ",S.end_time]}),a.jsx("span",{className:`inline-block mt-2 px-2 py-1 text-xs rounded badge-light ${S.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.status})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>C(S),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"Editar"}),a.jsx("button",{onClick:()=>M(S.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Eliminar"})]})]},S.id)),s.length===0&&a.jsx("div",{className:"p-6 text-center text-gray-500",children:"No hay horarios configurados"})]})]})]})})}function Xpe(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),[s,r]=y.useState([]),[i,l]=y.useState(!0),[d,u]=y.useState(null);y.useEffect(()=>{h()},[]);const h=async()=>{if(t?.company_id)try{const x=await Qc(t.company_id);r(x)}catch(x){n(x)}finally{l(!1)}},f=async x=>{if(confirm("Ests seguro de eliminar este servicio?"))try{await E9(x),J.success("Servicio eliminado"),await h()}catch(b){J.error("Error al eliminar"),n(b)}},p=async(x,b)=>{try{await Rj(x,{hide_price:!b}),J.success(b?"Precio visible":"Precio oculto - consulta por WhatsApp"),await h()}catch(_){J.error("Error al actualizar"),n(_)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Servicios"})]}),a.jsx(jt,{to:"/dashboard/services/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Nuevo servicio"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map(x=>a.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden border border-gray-100 hover:shadow-lg transition",children:[a.jsxs("button",{type:"button",onClick:()=>u(x.image_url||""),className:"w-full h-48 bg-gray-100 flex items-center justify-center group relative",children:[a.jsx("img",{src:x.image_url||"https://placehold.co/600x400/EEF2FF/1F2937?text=Sin+imagen",alt:x.name,className:"max-h-full max-w-full object-contain"}),a.jsx("span",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/15 transition flex items-center justify-center text-white text-lg opacity-0 group-hover:opacity-100",children:""})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-lg mb-2",children:x.name}),a.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:x.description}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["$",x.price.toLocaleString()]}),a.jsxs("span",{className:"text-sm text-gray-500",children:[x.estimated_duration_minutes," min"]})]}),a.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:`hide-price-${x.id}`,checked:x.hide_price||!1,onChange:()=>p(x.id,x.hide_price||!1),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("label",{htmlFor:`hide-price-${x.id}`,className:"text-sm text-gray-700 cursor-pointer",children:"Consulta precio por WhatsApp"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jt,{to:`/dashboard/services/edit/${x.id}`,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm text-center hover:bg-blue-700",children:"Editar"}),a.jsx("button",{onClick:()=>f(x.id),className:"px-3 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Eliminar"})]}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded badge-light ${x.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:x.status})})]})]},x.id)),s.length===0&&a.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:["No hay servicios creados. ",a.jsx(jt,{to:"/dashboard/services/new",className:"text-blue-600 hover:underline",children:"Crear uno"})]})]})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative max-w-3xl w-full",children:[a.jsx("button",{onClick:()=>u(null),className:"absolute -top-10 right-0 text-white text-2xl","aria-label":"Cerrar",children:""}),a.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-lg max-h-[80vh] flex items-center justify-center",children:a.jsx("img",{src:d,alt:"Vista previa",className:"max-h-[80vh] max-w-full object-contain"})})]})})]})}function CM(){const{id:t}=Mr(),{firestoreUser:e}=wt(),n=qe(),{handleError:s}=at(),r=y.useMemo(()=>!e?.company_id||t?null:`service-form-draft-${e.company_id}`,[e?.company_id,t]),[i,l]=y.useState({name:"",description:"",price:"",image_url:"",estimated_duration_minutes:"",status:"ACTIVE"}),[d,u]=y.useState([]),[h,f]=y.useState([]),[p,x]=y.useState([]),[b,_]=y.useState([]),[j,v]=y.useState(!0),[T,P]=y.useState(!1);y.useEffect(()=>{A()},[t,e?.company_id]),y.useEffect(()=>{if(!r)return;const S=localStorage.getItem(r);if(S)try{const{formData:O,selectedSlots:I}=JSON.parse(S);O&&l(O),I&&f(I)}catch(O){s(O,{customMessage:"Error leyendo borrador de servicio"})}},[r]),y.useEffect(()=>{r&&localStorage.setItem(r,JSON.stringify({formData:i,selectedSlots:h}))},[r,i,h]);const A=async()=>{if(e?.company_id){v(!0);try{const[S,O]=await Promise.all([$h(e.company_id),tv(e.company_id)]);if(u(S),x(O),t){const I=await ou(t);if(I){l({name:I.name,description:I.description,price:I.price.toString(),image_url:I.image_url,estimated_duration_minutes:I.estimated_duration_minutes.toString(),status:I.status});const F=await ig(t);f(F.map($=>$.schedule_slot_id)),_(I.professional_ids||[])}}}catch(S){s(S)}finally{v(!1)}}},C=async S=>{if(e?.company_id)try{const O=`companies/${e.company_id}/services/${Date.now()}`,I=await gg(S,O,Jf);l({...i,image_url:I}),J.success("Imagen subida correctamente")}catch(O){J.error("Error al subir imagen"),s(O)}},M=async S=>{if(S.preventDefault(),!!e?.company_id){if(h.length===0){J.error("Debes seleccionar al menos un horario");return}if(b.length===0){J.error("Debes asignar al menos un profesional");return}P(!0);try{const O={company_id:e.company_id,name:i.name,description:i.description,price:parseFloat(i.price),image_url:i.image_url,estimated_duration_minutes:parseInt(i.estimated_duration_minutes),status:i.status,professional_ids:b};console.log(" SERVICE DATA:",O),console.log(" FIRESTORE USER:",e);let I;t?(console.log(" Updating service:",t),await Rj(t,O),I=t,J.success("Servicio actualizado")):(console.log(" Creating new service..."),I=await _9(O),console.log(" Service created with ID:",I),J.success("Servicio creado"),r&&localStorage.removeItem(r)),console.log(" Setting schedules for service:",I,h),await j9(I,h,e.company_id),n("/dashboard/services")}catch(O){console.error(" ERROR AL GUARDAR:",O),console.error(" ERROR CODE:",O?.code),console.error(" ERROR MESSAGE:",O?.message),J.error("Error al guardar"),s(O)}finally{P(!1)}}},L=S=>{h.includes(S)?f(h.filter(O=>O!==S)):f([...h,S])},k=S=>{b.includes(S)?_(b.filter(O=>O!==S)):_([...b,S])};if(j)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const R={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>n(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Editar servicio":"Nuevo servicio"})]}),a.jsxs("form",{onSubmit:M,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"service-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),a.jsx("input",{id:"service-name",name:"name",type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:i.name,onChange:S=>l({...i,name:S.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"service-description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin *"}),a.jsx("textarea",{id:"service-description",name:"description",rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:i.description,onChange:S=>l({...i,description:S.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"service-price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor *"}),a.jsx("input",{id:"service-price",name:"price",type:"number",required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:i.price,onChange:S=>l({...i,price:S.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"service-duration",className:"block text-sm font-medium text-gray-700 mb-1",children:"Duracin estimada (minutos) *"}),a.jsx("input",{id:"service-duration",name:"estimated_duration_minutes",type:"number",required:!0,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:i.estimated_duration_minutes,onChange:S=>l({...i,estimated_duration_minutes:S.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"service-image",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagen *"}),a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:d9}),i.image_url&&a.jsx("img",{src:i.image_url,alt:"Preview",className:"h-48 mb-2 rounded"}),a.jsx("input",{id:"service-image",name:"image",type:"file",accept:"image/*",onChange:S=>{const O=S.target.files?.[0];O&&C(O)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"service-status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),a.jsxs("select",{id:"service-status",name:"status",value:i.status,onChange:S=>l({...i,status:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[a.jsx("option",{value:"ACTIVE",children:"Activo"}),a.jsx("option",{value:"INACTIVE",children:"Inactivo"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Profesionales asignados *"}),a.jsx("button",{type:"button",onClick:()=>n("/dashboard/professionals/new"),className:"text-sm text-blue-700 hover:underline",children:"Crear profesional"})]}),a.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto border rounded-md p-4",children:[p.map(S=>a.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b.includes(S.id),onChange:()=>k(S.id),className:"accent-blue-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:S.name}),(S.email||S.phone)&&a.jsx("div",{className:"text-xs text-gray-600",children:[S.email,S.phone].filter(Boolean).join("  ")})]})]},S.id)),p.length===0&&a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay profesionales registrados. Puedes crearlos aqu mismo."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horarios disponibles * (selecciona al menos uno)"}),a.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto border rounded-md p-4",children:[d.filter(S=>S.status==="ACTIVE").map(S=>a.jsxs("label",{className:"flex items-center p-2 hover:bg-gray-50 cursor-pointer schedule-slot",children:[a.jsx("input",{type:"checkbox",checked:h.includes(S.id),onChange:()=>L(S.id),className:"mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:S.days_of_week?.map(O=>R[O]).join(", ")}),a.jsxs("div",{className:"text-sm text-gray-600",children:[S.start_time," - ",S.end_time]})]})]},S.id)),d.filter(S=>S.status==="ACTIVE").length===0&&a.jsxs("p",{className:"text-gray-500 text-sm",children:["No hay horarios activos."," ",a.jsx("button",{type:"button",onClick:()=>n("/dashboard/services/schedules"),className:"text-blue-600 hover:underline",children:"Crear horarios"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>n("/dashboard/services/schedules"),className:"px-6 py-2 bg-blue-100 text-blue-800 border border-blue-200 rounded-md hover:bg-blue-200 w-full sm:w-auto",children:"Nuevo horario"}),a.jsx("button",{type:"button",onClick:()=>{r&&localStorage.removeItem(r),n("/dashboard/services")},className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 w-full sm:w-auto",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:T,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 w-full sm:w-auto",children:T?"Guardando...":"Guardar"})]})]})]})})}const sl=[{label:"Sans (Inter/Segoe)",value:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif'},{label:"Serif (Georgia)",value:'Georgia, "Times New Roman", serif'},{label:"Rounded (Nunito)",value:'"Nunito", "Segoe UI Rounded", system-ui, sans-serif'},{label:"Century Gothic",value:'"Century Gothic", "Apple Gothic", sans-serif'},{label:"Graffiti",value:'"Rock Salt", "Comic Sans MS", cursive'},{label:"Code",value:'"Source Code Pro", "Fira Code", monospace'},{label:"Display (Oswald)",value:'"Oswald", "Arial Narrow", sans-serif'},{label:"Grotesk (Space Grotesk)",value:'"Space Grotesk", "Inter", system-ui, sans-serif'},{label:"Humanist (Gill Sans)",value:'"Gill Sans", "Trebuchet MS", sans-serif'}];function Zpe(){const{firestoreUser:t}=wt(),{handleError:e}=at(),{t:n}=ln(),[s,r]=y.useState({logo_url:"",logo_position:"center",background_color:"#ffffff",card_color:"#ffffff",background_opacity:1,card_opacity:1,button_color:"#2563eb",button_text_color:"#ffffff",title_color:"#111827",subtitle_color:"#4b5563",text_color:"#4b5563",font_title:sl[0].value,font_body:sl[0].value,font_button:sl[0].value,layout:"GRID",card_layout:1,show_whatsapp_fab:!1,menu_background_color:"#f9fafb",menu_card_color:"#ffffff",menu_text_color:"#374151",menu_title_color:"#111827",menu_button_color:"#2563eb",menu_button_text_color:"#ffffff",menu_category_image_default:"",menu_background_image:"",menu_hero_card_color:"transparent",menu_hero_card_opacity:0,menu_hero_logo_card_color:"transparent",menu_hero_logo_card_opacity:0,hero_card_color:"#ffffff",hero_card_opacity:1,hero_background_image:"",hero_logo_position:"center",hero_kicker:"",hero_title:"",hero_description:"",hero_title_color:"#111827",hero_subtitle_color:"#4b5563",hero_text_color:"#4b5563",hero_primary_button_color:"#2563eb",hero_primary_button_text_color:"#ffffff",hero_secondary_button_color:"#2563eb",hero_secondary_button_text_color:"#ffffff",product_card_color:"#ffffff",product_card_opacity:1,product_card_title_color:"#111827",product_card_text_color:"#4b5563",product_card_subtitle_color:"#4b5563",product_card_accent_color:"#2563eb",product_card_button_text_color:"#ffffff"}),[i,l]=y.useState({weekday_days:[],weekday_open_time:"",weekday_close_time:"",weekend_days:[],weekend_open_time:"",weekend_close_time:""}),[d,u]=y.useState(!1),[h,f]=y.useState({enabled:!1,modes:[]}),[p,x]=y.useState(!0),[b,_]=y.useState(!1),j=["MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY","SUNDAY"],v={MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Mircoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sbado",SUNDAY:"Domingo"};y.useEffect(()=>{T()},[]);const T=async()=>{if(t?.company_id)try{const[C,M]=await Promise.all([cl(t.company_id,an.PRODUCTS),yn(t.company_id)]);C&&r({logo_url:C.logo_url||"",logo_position:C.logo_position||"center",background_color:C.background_color||"#ffffff",card_color:C.card_color||"#ffffff",background_opacity:C.background_opacity??1,card_opacity:C.card_opacity??1,button_color:C.button_color||"#2563eb",button_text_color:C.button_text_color||"#ffffff",title_color:C.title_color||"#111827",subtitle_color:C.subtitle_color||"#4b5563",text_color:C.text_color||"#4b5563",font_title:C.font_title||sl[0].value,font_body:C.font_body||sl[0].value,font_button:C.font_button||sl[0].value,layout:M?.category_id==="restaurantes_comida_rapida"?"GRID":C.layout||"GRID",card_layout:C.card_layout||1,show_whatsapp_fab:C.show_whatsapp_fab||!1,menu_background_color:C.menu_background_color||"#f9fafb",menu_card_color:C.menu_card_color||"#ffffff",menu_text_color:C.menu_text_color||"#374151",menu_title_color:C.menu_title_color||"#111827",menu_button_color:C.menu_button_color||"#2563eb",menu_button_text_color:C.menu_button_text_color||"#ffffff",menu_category_image_default:C.menu_category_image_default||"",menu_background_image:C.menu_background_image||"",menu_hero_card_color:C.menu_hero_card_color||"transparent",menu_hero_card_opacity:C.menu_hero_card_opacity??0,menu_hero_logo_card_color:C.menu_hero_logo_card_color||"transparent",menu_hero_logo_card_opacity:C.menu_hero_logo_card_opacity??0,hero_card_color:C.hero_card_color||"#ffffff",hero_card_opacity:C.hero_card_opacity??1,hero_background_image:C.hero_background_image||"",hero_logo_position:C.hero_logo_position||"center",hero_kicker:C.hero_kicker||"",hero_title:C.hero_title||"",hero_description:C.hero_description||"",hero_title_color:C.hero_title_color||"#111827",hero_subtitle_color:C.hero_subtitle_color||"#4b5563",hero_text_color:C.hero_text_color||"#4b5563",hero_primary_button_color:C.hero_primary_button_color||"#2563eb",hero_primary_button_text_color:C.hero_primary_button_text_color||"#ffffff",hero_secondary_button_color:C.hero_secondary_button_color||"#2563eb",hero_secondary_button_text_color:C.hero_secondary_button_text_color||"#ffffff",product_card_color:C.product_card_color||"#ffffff",product_card_opacity:C.product_card_opacity??1,product_card_title_color:C.product_card_title_color||"#111827",product_card_text_color:C.product_card_text_color||"#4b5563",product_card_subtitle_color:C.product_card_subtitle_color||"#4b5563",product_card_accent_color:C.product_card_accent_color||"#2563eb",product_card_button_text_color:C.product_card_button_text_color||"#ffffff"}),M&&(l({weekday_days:M.weekday_days||[],weekday_open_time:M.weekday_open_time||"",weekday_close_time:M.weekday_close_time||"",weekend_days:M.weekend_days||[],weekend_open_time:M.weekend_open_time||"",weekend_close_time:M.weekend_close_time||""}),u(M.delivery_enabled||!1),M.fulfillment_config?f({enabled:M.fulfillment_config.enabled??!1,modes:M.fulfillment_config.modes??[],delivery_fee:M.fulfillment_config.delivery_fee,minimum_order:M.fulfillment_config.minimum_order,delivery_time_minutes:M.fulfillment_config.delivery_time_minutes,preparation_time_minutes:M.fulfillment_config.preparation_time_minutes,title:M.fulfillment_config.title,description:M.fulfillment_config.description,note:M.fulfillment_config.note}):M.delivery_enabled?f({enabled:!0,modes:["DELIVERY","TAKEAWAY"]}):f({enabled:!1,modes:[]}))}catch(C){e(C)}finally{x(!1)}},P=async(C,M)=>{if(t?.company_id)try{const L=`companies/${t.company_id}/${M}_${Date.now()}`,k=await gg(C,L,M==="logo"?{width:512,height:512,maxSizeKB:500,format:"image/png",quality:.95}:M==="hero_background"?{width:1920,height:1080,maxSizeKB:1500,format:"image/jpeg",quality:.9}:M==="menu_background"?{width:1920,height:1080,maxSizeKB:1500,format:"image/jpeg",quality:.9}:{width:800,height:800,maxSizeKB:800,format:"image/jpeg",quality:.9});r(M==="logo"?{...s,logo_url:k}:M==="hero_background"?{...s,hero_background_image:k}:M==="menu_background"?{...s,menu_background_image:k}:{...s,menu_category_image_default:k}),J.success("Imagen subida correctamente")}catch(L){J.error("Error al subir imagen"),e(L)}},A=async C=>{if(C.preventDefault(),!!t?.company_id){_(!0);try{await Promise.all([Aj(t.company_id,an.PRODUCTS,s),si(t.company_id,{weekday_days:i.weekday_days,weekday_open_time:i.weekday_open_time,weekday_close_time:i.weekday_close_time,weekend_days:i.weekend_days,weekend_open_time:i.weekend_open_time,weekend_close_time:i.weekend_close_time,delivery_enabled:d,public_layout_variant:"immersive"})]),J.success("Configuracin guardada")}catch(M){J.error("Error al guardar"),e(M)}finally{_(!1)}}};return p?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8 relative dark:bg-slate-950",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"p-2 rounded-full border border-gray-200 dark:border-slate-700 text-gray-700 dark:text-slate-200 hover:bg-gray-100 dark:hover:bg-slate-800","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-slate-100",children:"Configuracin Visual - Productos"})]}),a.jsxs("form",{onSubmit:A,className:"bg-white shadow rounded-lg p-6 space-y-6 dark:bg-slate-900 dark:border dark:border-slate-800",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Logo"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mb-1",children:"Recomendado: 512x512 px, PNG transparente o JPG, mx ~500KB."}),s.logo_url&&a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("img",{src:s.logo_url,alt:"Logo",className:"h-24"}),a.jsx("button",{type:"button",onClick:()=>r({...s,logo_url:""}),className:"px-3 py-2 text-sm bg-gray-100 dark:bg-slate-800 text-gray-700 dark:text-slate-200 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700",children:"Eliminar logo"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:C=>{const M=C.target.files?.[0];M&&P(M,"logo")},className:"block w-full text-sm text-gray-500 dark:text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 dark:file:bg-slate-800 file:text-blue-700 dark:file:text-blue-200 hover:file:bg-blue-100 dark:hover:file:bg-slate-700"})]}),a.jsxs("div",{className:"border-t pt-6 mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:" Contenido del Hero (Portada)"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300 mb-4",children:"Personaliza el texto principal del hero en tu pgina pblica."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:'Texto pequeo (Kicker) - Ej: "Especialistas en ..."'}),a.jsx("input",{type:"text",value:s.hero_kicker,onChange:C=>r({...s,hero_kicker:C.target.value}),placeholder:"Especialistas en ...",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md dark:bg-slate-950 dark:text-slate-100"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Texto que aparece arriba del ttulo principal"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Ttulo del Hero"}),a.jsx("input",{type:"text",value:s.hero_title,onChange:C=>r({...s,hero_title:C.target.value}),placeholder:"Deja vaco para usar el nombre de la empresa",className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md dark:bg-slate-950 dark:text-slate-100"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Si est vaco, se usar el nombre de la empresa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Descripcin del Hero"}),a.jsx("textarea",{value:s.hero_description,onChange:C=>r({...s,hero_description:C.target.value}),placeholder:"Deja vaco para usar la descripcin de la empresa",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md dark:bg-slate-950 dark:text-slate-100"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Si est vaco, se usar la descripcin de la empresa"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de fondo"}),a.jsx("input",{type:"color",value:s.background_color,onChange:C=>r({...s,background_color:C.target.value}),className:"h-10 w-full"}),a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mt-2",children:"Transparencia de fondo"}),a.jsx("input",{type:"range",min:0,max:100,value:Math.round((s.background_opacity??1)*100),onChange:C=>r({...s,background_opacity:Number(C.target.value)/100}),className:"w-full"}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["Opacidad: ",Math.round((s.background_opacity??1)*100),"%"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de tarjetas"}),a.jsx("input",{type:"color",value:s.card_color,onChange:C=>r({...s,card_color:C.target.value}),className:"h-10 w-full"}),a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mt-2",children:"Transparencia de tarjetas"}),a.jsx("input",{type:"range",min:0,max:100,value:Math.round((s.card_opacity??1)*100),onChange:C=>r({...s,card_opacity:Number(C.target.value)/100}),className:"w-full"}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["Opacidad: ",Math.round((s.card_opacity??1)*100),"%"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de botones"}),a.jsx("input",{type:"color",value:s.button_color,onChange:C=>r({...s,button_color:C.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Texto de botones"}),a.jsx("input",{type:"color",value:s.button_text_color,onChange:C=>r({...s,button_text_color:C.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de ttulos"}),a.jsx("input",{type:"color",value:s.title_color,onChange:C=>r({...s,title_color:C.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de subttulos"}),a.jsx("input",{type:"color",value:s.subtitle_color,onChange:C=>r({...s,subtitle_color:C.target.value}),className:"h-10 w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de texto"}),a.jsx("input",{type:"color",value:s.text_color,onChange:C=>r({...s,text_color:C.target.value}),className:"h-10 w-full"})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-slate-700 pt-6 mt-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100 mb-4",children:" Apariencia de tarjetas de productos"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300 mb-6",children:"Personaliza colores y acentos de las tarjetas pblicas de productos."}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de tarjeta"}),a.jsx("input",{type:"color",value:s.product_card_color,onChange:C=>r({...s,product_card_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"}),a.jsx("label",{className:"block text-xs text-gray-600 dark:text-slate-300 mt-2",children:"Transparencia de tarjeta"}),a.jsx("input",{type:"range",min:0,max:100,value:Math.round((s.product_card_opacity??1)*100),onChange:C=>r({...s,product_card_opacity:Number(C.target.value)/100}),className:"w-full"}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["Opacidad: ",Math.round((s.product_card_opacity??1)*100),"%"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de acento"}),a.jsx("input",{type:"color",value:s.product_card_accent_color,onChange:C=>r({...s,product_card_accent_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-2",children:"Afecta precio, tags, bordes y botones en tarjetas."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de ttulos"}),a.jsx("input",{type:"color",value:s.product_card_title_color,onChange:C=>r({...s,product_card_title_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de texto"}),a.jsx("input",{type:"color",value:s.product_card_text_color,onChange:C=>r({...s,product_card_text_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de subttulos"}),a.jsx("input",{type:"color",value:s.product_card_subtitle_color,onChange:C=>r({...s,product_card_subtitle_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Texto de botn"}),a.jsx("input",{type:"color",value:s.product_card_button_text_color,onChange:C=>r({...s,product_card_button_text_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"border rounded-lg p-4 dark:border-slate-700 dark:bg-slate-900/60",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-slate-100",children:"Horario semana"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-slate-200",children:"Das"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(C=>a.jsx("button",{type:"button",onClick:()=>l(M=>({...M,weekday_days:M.weekday_days.includes(C)?M.weekday_days.filter(L=>L!==C):[...M.weekday_days,C]})),className:`px-3 py-1 rounded-md text-sm ${i.weekday_days.includes(C)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-slate-800 text-gray-800 dark:text-slate-100 hover:bg-gray-300 dark:hover:bg-slate-700"}`,children:v[C]},C))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Desde"}),a.jsx("input",{type:"time",value:i.weekday_open_time,onChange:C=>l(M=>({...M,weekday_open_time:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md dark:bg-slate-950 dark:text-slate-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Hasta"}),a.jsx("input",{type:"time",value:i.weekday_close_time,onChange:C=>l(M=>({...M,weekday_close_time:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md dark:bg-slate-950 dark:text-slate-100"})]})]})]}),a.jsxs("div",{className:"border rounded-lg p-4 dark:border-slate-700 dark:bg-slate-900/60",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-slate-100",children:"Horario fin de semana"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-sm font-medium mb-2 text-gray-700 dark:text-slate-200",children:"Das"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(C=>a.jsx("button",{type:"button",onClick:()=>l(M=>({...M,weekend_days:M.weekend_days.includes(C)?M.weekend_days.filter(L=>L!==C):[...M.weekend_days,C]})),className:`px-3 py-1 rounded-md text-sm ${i.weekend_days.includes(C)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-slate-800 text-gray-800 dark:text-slate-100 hover:bg-gray-300 dark:hover:bg-slate-700"}`,children:v[C]},C))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Desde"}),a.jsx("input",{type:"time",value:i.weekend_open_time,onChange:C=>l(M=>({...M,weekend_open_time:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md dark:bg-slate-950 dark:text-slate-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Hasta"}),a.jsx("input",{type:"time",value:i.weekend_close_time,onChange:C=>l(M=>({...M,weekend_close_time:C.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md dark:bg-slate-950 dark:text-slate-100"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Fuente ttulos"}),a.jsx("select",{value:s.font_title,onChange:C=>r({...s,font_title:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",children:sl.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Fuente cuerpo"}),a.jsx("select",{value:s.font_body,onChange:C=>r({...s,font_body:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",children:sl.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Fuente botones"}),a.jsx("select",{value:s.font_button,onChange:C=>r({...s,font_button:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",children:sl.map(C=>a.jsx("option",{value:C.value,children:C.label},C.value))})]})]}),a.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4 dark:border-slate-700 dark:bg-slate-900/60",children:[a.jsx("input",{id:"whatsappFab",type:"checkbox",className:"mt-1 h-5 w-5 text-blue-600 border-gray-300 dark:border-slate-700 rounded focus:ring-blue-500",checked:s.show_whatsapp_fab,onChange:C=>r({...s,show_whatsapp_fab:C.target.checked})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"whatsappFab",className:"text-sm font-medium text-gray-900 dark:text-slate-100",children:"Mostrar botn flotante de WhatsApp"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-slate-300",children:"Permite a los clientes abrir WhatsApp desde la esquina inferior de la pgina pblica de productos."})]})]}),a.jsxs("div",{className:"border-t-2 border-gray-200 dark:border-slate-700 pt-6 mt-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:" Configuracin de Entrega y Retiro"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300 mb-6",children:"Configura los mtodos de entrega disponibles para tus clientes."}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-start gap-3 border rounded-lg p-4 bg-green-50 dark:bg-emerald-950/40 dark:border-emerald-900/60",children:[a.jsx("input",{id:"fulfillmentEnabled",type:"checkbox",className:"mt-1 h-5 w-5 text-green-600 border-gray-300 dark:border-slate-700 rounded focus:ring-green-500",checked:h.enabled??!1,onChange:C=>f({...h,enabled:C.target.checked,modes:C.target.checked?h.modes||["DELIVERY","TAKEAWAY"]:[]})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fulfillmentEnabled",className:"text-sm font-medium text-gray-900 dark:text-slate-100 flex items-center gap-2",children:"Activar mtodos de entrega"}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-slate-300 mt-1",children:"Permite a los clientes seleccionar cmo recibirn sus pedidos (delivery, retiro en local, consumo en local)."})]})]}),h.enabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-3",children:"Mtodos disponibles"}),a.jsx("div",{className:"space-y-2",children:["DELIVERY","TAKEAWAY","DINE_IN"].map(C=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:`mode-${C}`,checked:h.modes?.includes(C)||!1,onChange:M=>{const L=h.modes||[];M.target.checked?f({...h,modes:[...L,C]}):f({...h,modes:L.filter(k=>k!==C)})},className:"h-4 w-4 text-green-600 border-gray-300 dark:border-slate-700 rounded focus:ring-green-500"}),a.jsxs("label",{htmlFor:`mode-${C}`,className:"text-sm text-gray-700 dark:text-slate-200",children:[C==="DELIVERY"&&" Delivery (Entrega a domicilio)",C==="TAKEAWAY"&&" Takeaway (Retiro en local)",C==="DINE_IN"&&" Dine-in (Consumo en local)"]})]},C))})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Costo de delivery ($)"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:h.delivery_fee||"",onChange:C=>f({...h,delivery_fee:C.target.value?parseFloat(C.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Pedido mnimo ($)"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:h.minimum_order||"",onChange:C=>f({...h,minimum_order:C.target.value?parseFloat(C.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Tiempo de entrega (minutos)"}),a.jsx("input",{type:"number",min:"0",value:h.delivery_time_minutes||"",onChange:C=>f({...h,delivery_time_minutes:C.target.value?parseInt(C.target.value,10):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",placeholder:"30"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Tiempo de preparacin (minutos)"}),a.jsx("input",{type:"number",min:"0",value:h.preparation_time_minutes||"",onChange:C=>f({...h,preparation_time_minutes:C.target.value?parseInt(C.target.value,10):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",placeholder:"15"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Ttulo (opcional)"}),a.jsx("input",{type:"text",value:h.title||"",onChange:C=>f({...h,title:C.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",placeholder:"Mtodos de entrega"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Descripcin (opcional)"}),a.jsx("textarea",{rows:2,value:h.description||"",onChange:C=>f({...h,description:C.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",placeholder:"Selecciona cmo deseas recibir tu pedido"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Nota (opcional)"}),a.jsx("textarea",{rows:2,value:h.note||"",onChange:C=>f({...h,note:C.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-slate-700 rounded-md",placeholder:"Notas adicionales sobre la entrega"})]})]})]})]})]}),a.jsxs("div",{className:"border-t-2 border-gray-200 dark:border-slate-700 pt-6 mt-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:" Configuracin de Apariencia del Men"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-slate-300 mb-6",children:"Personaliza los colores y la imagen por defecto para las tarjetas de categoras en tu men pblico."}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de fondo del men"}),a.jsx("input",{type:"color",value:s.menu_background_color,onChange:C=>r({...s,menu_background_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Imagen de fondo del men (opcional)"}),s.menu_background_image&&a.jsxs("div",{className:"mb-2",children:[a.jsx("img",{src:s.menu_background_image,alt:"Fondo del men",className:"w-full max-w-xs rounded-md shadow-sm border"}),a.jsx("button",{type:"button",onClick:()=>r({...s,menu_background_image:""}),className:"mt-2 px-3 py-2 text-sm bg-gray-100 dark:bg-slate-800 text-gray-700 dark:text-slate-200 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700",children:"Eliminar fondo"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:C=>{const M=C.target.files?.[0];M&&P(M,"menu_background")},className:"block w-full text-sm text-gray-500 dark:text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 dark:file:bg-slate-800 file:text-blue-700 dark:file:text-blue-200 hover:file:bg-blue-100 dark:hover:file:bg-slate-700"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Recomendado: 1920x1080 px, JPG/PNG, mx ~1.5MB."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Color tarjeta hero (texto/botones)"}),a.jsx("input",{type:"color",value:s.menu_hero_card_color,onChange:C=>r({...s,menu_hero_card_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"}),a.jsx("label",{className:"block text-xs text-gray-600 dark:text-slate-300 mt-2",children:"Opacidad tarjeta hero"}),a.jsx("input",{type:"range",min:0,max:100,value:Math.round((s.menu_hero_card_opacity??0)*100),onChange:C=>r({...s,menu_hero_card_opacity:Number(C.target.value)/100}),className:"w-full"}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["Actual: ",Math.round((s.menu_hero_card_opacity??0)*100),"%"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-1",children:"Color tarjeta logo"}),a.jsx("input",{type:"color",value:s.menu_hero_logo_card_color,onChange:C=>r({...s,menu_hero_logo_card_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"}),a.jsx("label",{className:"block text-xs text-gray-600 dark:text-slate-300 mt-2",children:"Opacidad tarjeta logo"}),a.jsx("input",{type:"range",min:0,max:100,value:Math.round((s.menu_hero_logo_card_opacity??0)*100),onChange:C=>r({...s,menu_hero_logo_card_opacity:Number(C.target.value)/100}),className:"w-full"}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400",children:["Actual: ",Math.round((s.menu_hero_logo_card_opacity??0)*100),"%"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de fondo de tarjetas del men"}),a.jsx("input",{type:"color",value:s.menu_card_color,onChange:C=>r({...s,menu_card_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de texto del men"}),a.jsx("input",{type:"color",value:s.menu_text_color,onChange:C=>r({...s,menu_text_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de ttulos del men"}),a.jsx("input",{type:"color",value:s.menu_title_color,onChange:C=>r({...s,menu_title_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de botones del men"}),a.jsx("input",{type:"color",value:s.menu_button_color,onChange:C=>r({...s,menu_button_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Color de texto de botones del men"}),a.jsx("input",{type:"color",value:s.menu_button_text_color,onChange:C=>r({...s,menu_button_text_color:C.target.value}),className:"h-10 w-full rounded-md border border-gray-300 dark:border-slate-700"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Imagen por defecto para categoras"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mb-1",children:"Esta imagen se mostrar en las categoras que no tengan una imagen propia. Recomendado: 800x800 px, JPG o PNG, mx ~800KB."}),s.menu_category_image_default&&a.jsxs("div",{className:"mb-2",children:[a.jsx("img",{src:s.menu_category_image_default,alt:"Imagen por defecto",className:"w-32 h-32 object-cover rounded mb-2"}),a.jsx("button",{type:"button",onClick:()=>r({...s,menu_category_image_default:""}),className:"px-3 py-2 text-sm bg-gray-100 dark:bg-slate-800 text-gray-700 dark:text-slate-200 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700",children:"Eliminar imagen"})]}),a.jsx("input",{type:"file",accept:"image/*",onChange:C=>{const M=C.target.files?.[0];M&&P(M,"menu_category_default")},className:"block w-full text-sm text-gray-500 dark:text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 dark:file:bg-slate-800 file:text-blue-700 dark:file:text-blue-200 hover:file:bg-blue-100 dark:hover:file:bg-slate-700"})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:n(b?"common.saving":"common.save")})})]})]})})}function Tl({children:t,className:e="",style:n,delay:s=0}){return a.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:s},whileHover:{y:-4,transition:{duration:.2}},className:e,style:n,children:t})}function Jpe(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),[s,r]=y.useState([]),[i,l]=y.useState(!0),[d,u]=y.useState(null);y.useEffect(()=>{h()},[]);const h=async()=>{if(t?.company_id)try{const x=await lu(t.company_id);r(x)}catch(x){n(x)}finally{l(!1)}},f=async x=>{if(confirm("Ests seguro de eliminar este producto?"))try{await T9(x),J.success("Producto eliminado"),await h()}catch(b){J.error("Error al eliminar"),n(b)}},p=async(x,b)=>{try{await kp(x,{hide_price:!b}),J.success(b?"Precio visible":"Precio oculto - consulta por WhatsApp"),await h()}catch(_){J.error("Error al actualizar"),n(_)}};return i?a.jsx(yt,{fullScreen:!0,size:"lg"}):a.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 relative",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Productos"})]}),a.jsx(jt,{to:"/dashboard/products/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Nuevo producto"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map((x,b)=>a.jsxs(Tl,{delay:b*.1,className:"bg-white shadow rounded-lg overflow-hidden border border-gray-100",children:[a.jsxs("button",{type:"button",onClick:()=>u(x.image_url||""),className:"w-full h-48 bg-gray-100 flex items-center justify-center group relative",children:[a.jsx("img",{src:x.image_url||"https://placehold.co/600x400/EEF2FF/1F2937?text=Sin+imagen",alt:x.name,className:"max-h-full max-w-full object-contain"}),a.jsx("span",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/15 transition flex items-center justify-center text-white text-lg opacity-0 group-hover:opacity-100",children:""})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-lg mb-2",children:x.name}),a.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:x.description}),a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["$",x.price.toLocaleString()]}),x.weight&&a.jsxs("span",{className:"text-sm text-gray-500",children:[x.weight,"g"]})]}),a.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:`hide-price-${x.id}`,checked:x.hide_price||!1,onChange:()=>p(x.id,x.hide_price||!1),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("label",{htmlFor:`hide-price-${x.id}`,className:"text-sm text-gray-700 cursor-pointer",children:"Consulta precio por WhatsApp"})]}),x.tags&&x.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:x.tags.map((_,j)=>a.jsx("span",{className:"px-2 py-1 text-xs rounded border shadow-sm text-slate-900 font-semibold",style:{backgroundColor:"#e2e8f0",borderColor:"#94a3b8"},children:_},j))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jt,{to:`/dashboard/products/edit/${x.id}`,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm text-center hover:bg-blue-700",children:"Editar"}),a.jsx(Mt,{onClick:()=>f(x.id),className:"px-3 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Eliminar"})]}),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded badge-light font-semibold ${x.status==="ACTIVE"?"bg-green-100 text-green-900":"bg-gray-100 text-gray-900"}`,children:x.status})})]})]},x.id)),s.length===0&&a.jsxs("div",{className:"col-span-full text-center py-12 text-gray-500",children:["No hay productos creados. ",a.jsx(jt,{to:"/dashboard/products/new",className:"text-blue-600 hover:underline",children:"Crear uno"})]})]})]}),a.jsxs(Ai,{isOpen:!!d,onClose:()=>u(null),className:"relative max-w-3xl p-0 bg-transparent shadow-none",children:[a.jsx("button",{onClick:()=>u(null),className:"absolute -top-10 right-0 text-white text-2xl z-10","aria-label":"Cerrar",children:""}),a.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-lg max-h-[80vh] flex items-center justify-center",children:a.jsx("img",{src:d||"",alt:"Vista previa",className:"max-h-[80vh] max-w-full object-contain"})})]})]})}function SM(){const{id:t}=Mr(),{firestoreUser:e}=wt(),n=qe(),{handleError:s}=at(),[r,i]=y.useState({name:"",description:"",price:"",image_url:"",weight:"",kcal:"",tags:"",status:"ACTIVE"}),[l,d]=y.useState(!0),[u,h]=y.useState(!1);y.useEffect(()=>{f()},[t]);const f=async()=>{if(!e?.company_id){d(!1);return}try{if(t){const b=await C9(t);b&&i({name:b.name,description:b.description,price:b.price.toString(),image_url:b.image_url,weight:b.weight?.toString()||"",kcal:b.kcal?.toString()||"",tags:b.tags?.join(", ")||"",status:b.status})}}catch(b){s(b)}finally{d(!1)}},p=async b=>{if(e?.company_id)try{const _=`companies/${e.company_id}/products/${Date.now()}`,j=await gg(b,_,Jf);i({...r,image_url:j}),J.success("Imagen subida correctamente")}catch(_){J.error("Error al subir imagen"),s(_)}},x=async b=>{if(b.preventDefault(),!!e?.company_id){h(!0);try{const _={company_id:e.company_id,name:r.name,description:r.description,price:parseFloat(r.price),image_url:r.image_url,status:r.status};r.weight&&(_.weight=parseFloat(r.weight)),r.kcal&&(_.kcal=parseFloat(r.kcal)),r.tags&&(_.tags=r.tags.split(",").map(j=>j.trim()).filter(j=>j)),t?(await kp(t,_),J.success("Producto actualizado")):(await S9(_),J.success("Producto creado")),n("/dashboard/products")}catch(_){J.error("Error al guardar"),s(_)}finally{h(!1)}}};return l?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>n(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t?"Editar producto":"Nuevo producto"})]}),a.jsxs("form",{onSubmit:x,className:"bg-white shadow rounded-lg p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),a.jsx("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.name,onChange:b=>i({...r,name:b.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin *"}),a.jsx("textarea",{rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.description,onChange:b=>i({...r,description:b.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio *"}),a.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.price,onChange:b=>i({...r,price:b.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso (g)"}),a.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.weight,onChange:b=>i({...r,weight:b.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kcal"}),a.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:r.kcal,onChange:b=>i({...r,kcal:b.target.value})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiquetas (separadas por comas)"}),a.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"vegano, sin gluten, orgnico",value:r.tags,onChange:b=>i({...r,tags:b.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imagen *"}),a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:d9}),r.image_url&&a.jsx("img",{src:r.image_url,alt:"Preview",className:"h-48 mb-2 rounded"}),a.jsx("input",{type:"file",accept:"image/*",onChange:b=>{const _=b.target.files?.[0];_&&p(_)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),a.jsxs("select",{value:r.status,onChange:b=>i({...r,status:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[a.jsx("option",{value:"ACTIVE",children:"Activo"}),a.jsx("option",{value:"INACTIVE",children:"Inactivo"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>n("/dashboard/products"),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 w-full sm:w-auto",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 w-full sm:w-auto",children:u?"Guardando...":"Guardar"})]})]})]})})}const $c="menu_categories",ege=t=>{const e=t.data();return{id:t.id,...e,created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},Hy=async t=>{const e=os(t);try{const n=Ct(Ke(Ce,$c),Ge("company_id","==",e));return(await Dt(n)).docs.map(ege)}catch(n){throw on.handleFirestoreError(n,{collection:$c,op:"list"}),n}};const tge=async t=>{const e=os(t.company_id);try{const n=Ve.now();return(await Ts(Ke(Ce,$c),{...t,company_id:e,created_at:n,updated_at:n})).id}catch(n){throw on.handleFirestoreError(n,{collection:$c,op:"create"}),n}},TM=async(t,e,n)=>{try{const s=mt(Ce,$c,t);await Ss(s,{...e,updated_at:Ve.now()})}catch(s){throw on.handleFirestoreError(s,{collection:$c,op:"update"}),s}},nge=async(t,e)=>{try{await Co(mt(Ce,$c,t))}catch(n){throw on.handleFirestoreError(n,{collection:$c,op:"delete"}),n}},sge=()=>{const{t}=ln(),{firestoreUser:e}=wt(),n=qe(),{handleError:s}=at(),[r,i]=y.useState([]),[l,d]=y.useState([]),[u,h]=y.useState(!0),[f,p]=y.useState(""),[x,b]=y.useState("");y.useEffect(()=>{(async()=>{if(e?.company_id)try{const[R,S]=await Promise.all([Hy(e.company_id),lu(e.company_id)]),O=[...R].sort((I,F)=>(I.order??0)-(F.order??0));i(O),d(S)}catch(R){s(R)}finally{h(!1)}})()},[e?.company_id,s]);const _=y.useMemo(()=>r.reduce((k,R)=>(k[R.id]=l.filter(S=>S.menuCategoryId===R.id).sort((S,O)=>(S.menuOrder??0)-(O.menuOrder??0)),k),{}),[r,l]),j=y.useMemo(()=>l.filter(k=>!k.menuCategoryId&&(!x||k.name.toLowerCase().includes(x.toLowerCase())||k.description?.toLowerCase().includes(x.toLowerCase()))),[l,x]),v=async()=>{if(!(!e?.company_id||!f.trim()))try{const k=r.length;await tge({company_id:e.company_id,name:f.trim(),order:k,active:!0}),p(""),J.success(t("menuCategories.created"));const R=await Hy(e.company_id);i(R.sort((S,O)=>(S.order??0)-(O.order??0)))}catch(k){s(k)}},T=async k=>{await Promise.all(k.map((R,S)=>TM(R.id,{order:S})))},P=async(k,R)=>{const S=k+R;if(S<0||S>=r.length)return;const O=[...r],[I]=O.splice(k,1);O.splice(S,0,I),i(O);try{await T(O),J.success(t("menuCategories.reordered"))}catch(F){s(F)}},A=async k=>{if(confirm(t("menuCategories.deleteConfirm")))try{await nge(k),J.success(t("menuCategories.deleted")),i(R=>R.filter(S=>S.id!==k)),d(R=>R.map(S=>S.menuCategoryId===k?{...S,menuCategoryId:void 0,menuOrder:void 0}:S))}catch(R){s(R)}},C=async(k,R)=>{try{await TM(k,{name:R}),i(S=>S.map(O=>O.id===k?{...O,name:R}:O)),J.success(t("menuCategories.updated"))}catch(S){s(S)}},M=async(k,R)=>{const O=l.filter(I=>I.menuCategoryId===k).length;try{await kp(R,{menuCategoryId:k,menuOrder:O}),J.success(t("menuCategories.assigned")),d(I=>I.map(F=>F.id===R?{...F,menuCategoryId:k,menuOrder:O}:F))}catch(I){s(I)}},L=async k=>{try{await kp(k.id,{isAvailable:!k.isAvailable}),d(R=>R.map(S=>S.id===k.id?{...S,isAvailable:!k.isAvailable}:S))}catch(R){s(R)}};return u?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>n("/dashboard/products"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":t("common.back"),children:""}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("menuCategories.title")})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(jt,{to:"/dashboard/products/settings",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2",children:[a.jsx("span",{children:""}),a.jsx("span",{children:"Configurar Apariencia del Men"})]}),a.jsx(jt,{to:"/dashboard/products",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:t("menuCategories.goProducts")})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4 mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:t("menuCategories.newCategory")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:f,onChange:k=>p(k.target.value),placeholder:t("menuCategories.newCategoryPlaceholder"),className:"flex-1 border border-gray-200 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx(Mt,{onClick:v,className:"px-4 py-2 bg-blue-600 text-white rounded",children:t("menuCategories.create")})]})]}),a.jsxs("div",{className:"w-full sm:w-72",children:[a.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:t("menuCategories.searchProducts")}),a.jsx("input",{type:"text",value:x,onChange:k=>b(k.target.value),placeholder:t("common.search"),className:"w-full border border-gray-200 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsx("div",{className:"space-y-6",children:r.map((k,R)=>a.jsxs(Tl,{className:"bg-white shadow-sm border border-gray-100 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:k.name,onChange:S=>i(O=>O.map(I=>I.id===k.id?{...I,name:S.target.value}:I)),onBlur:S=>C(k.id,S.target.value.trim()),className:"text-lg font-semibold text-gray-900 border border-transparent focus:border-blue-500 rounded px-2 py-1"}),a.jsxs("span",{className:"text-xs text-gray-400",children:["#",k.order??R+1]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>P(R,-1),className:"px-3 py-1 border border-gray-200 rounded hover:bg-gray-100 text-sm",children:""}),a.jsx("button",{type:"button",onClick:()=>P(R,1),className:"px-3 py-1 border border-gray-200 rounded hover:bg-gray-100 text-sm",children:""}),a.jsx(Mt,{onClick:()=>A(k.id),className:"px-3 py-1 bg-red-50 text-red-600 border border-red-200 rounded text-sm hover:bg-red-100",children:t("common.delete")})]})]}),a.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-600",children:t("menuCategories.assignProduct")}),a.jsxs("select",{className:"border border-gray-200 rounded px-3 py-2",defaultValue:"",onChange:S=>{S.target.value&&(M(k.id,S.target.value),S.target.value="")},children:[a.jsx("option",{value:"",children:t("menuCategories.selectProduct")}),j.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[(_[k.id]||[]).map(S=>a.jsxs("div",{className:"border border-gray-200 rounded p-3 flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:S.name}),a.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:S.description})]}),a.jsx("button",{type:"button",onClick:()=>L(S),className:`px-2 py-1 text-xs rounded ${S.isAvailable===!1?"bg-gray-200 text-gray-700":"bg-green-100 text-green-800"}`,children:S.isAvailable===!1?t("menuCategories.soldOut"):t("menuCategories.available")})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[a.jsx("span",{children:S.price?`$${S.price}`:t("common.notAvailable")}),a.jsx("span",{className:"text-xs text-gray-400",children:t("menuCategories.orderLabel",{order:S.menuOrder??0})})]})]},S.id)),(_[k.id]||[]).length===0&&a.jsx("p",{className:"text-sm text-gray-500",children:t("menuCategories.emptyCategory")})]})]})]},k.id))}),a.jsxs("div",{className:"mt-8 bg-white border border-gray-100 rounded-lg p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:t("menuCategories.unassigned")}),j.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:t("menuCategories.allAssigned")}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:j.map(k=>a.jsxs("div",{className:"border border-gray-200 rounded p-3",children:[a.jsx("p",{className:"font-semibold text-gray-900",children:k.name}),a.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:k.description}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.price?`$${k.price}`:t("common.notAvailable")})]},k.id))})]})]})})},ix={REQUESTED:"Solicitado",CONFIRMED:"Confirmado",PREPARING:"En preparacin",DELIVERED:"Entregado",PAID:"Pagado",CANCELLED:"Cancelado"},rge={REQUESTED:"CONFIRMED",CONFIRMED:"PREPARING",PREPARING:"DELIVERED",DELIVERED:"PAID",PAID:null,CANCELLED:null},age={REQUESTED:"bg-blue-100 text-black dark:bg-blue-500/20 dark:text-black",CONFIRMED:"bg-indigo-100 text-black dark:bg-indigo-500/20 dark:text-black",PREPARING:"bg-amber-100 text-black dark:bg-amber-500/20 dark:text-black",DELIVERED:"bg-emerald-100 text-black dark:bg-emerald-500/20 dark:text-black",PAID:"bg-green-100 text-black dark:bg-green-500/20 dark:text-black",CANCELLED:"bg-red-100 text-black dark:bg-red-500/20 dark:text-black"},ige=t=>(t||"").replace(/[^0-9]/g,""),H7={TABLE:"Consumo en local",PICKUP:"Retiro en local",DELIVERY:"Delivery"},pi=t=>t.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e]??e),oge=t=>t?new Date(t).toLocaleString():"-",lge=(t,e)=>{const n=t.id.slice(-6).toUpperCase(),s=t.order_type?H7[t.order_type]:"Retiro en local",r=oge(t.created_at),i=new Date().toLocaleString(),l=t.items.map(p=>{const x=e[p.product_id]?.name||p.product_id,b=p.unit_price?`$${p.unit_price.toLocaleString()}`:"";return`<tr>
        <td style="padding:4px 0; vertical-align:top;">${p.quantity}x</td>
        <td style="padding:4px 8px 4px 0; vertical-align:top;">${pi(x)}</td>
        <td style="padding:4px 0; text-align:right; vertical-align:top;">${pi(b)}</td>
      </tr>`}).join(""),d=t.client_name?pi(t.client_name):"Sin nombre",u=t.client_whatsapp?pi(t.client_whatsapp):"",h=t.client_comment?pi(t.client_comment):"",f=t.total_estimated?`$${t.total_estimated.toLocaleString()}`:"";return`<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Comanda ${n}</title>
    <style>
      * { box-sizing: border-box; }
      body {
        margin: 0;
        padding: 16px;
        color: #000;
        font-family: "Courier New", Courier, monospace;
        font-size: 12px;
      }
      .receipt {
        width: 280px;
        margin: 0 auto;
      }
      .title {
        font-size: 16px;
        text-align: center;
        font-weight: 700;
        letter-spacing: 1px;
      }
      .muted { color: #333; }
      .divider {
        border: 0;
        border-top: 1px dashed #000;
        margin: 8px 0;
      }
      table { width: 100%; border-collapse: collapse; }
      .totals {
        display: flex;
        justify-content: space-between;
        font-weight: 700;
        margin-top: 6px;
      }
    </style>
  </head>
  <body>
    <div class="receipt">
      <div class="title">COMANDA</div>
      <div class="muted" style="text-align:center;">Pedido #${n}</div>
      <hr class="divider" />
      <div>Creado: ${pi(r)}</div>
      <div>Impreso: ${pi(i)}</div>
      <div>Mesa: ${pi(t.table_number||"N/D")}</div>
      <div>Tipo: ${pi(s)}</div>
      <div>Canal: ${pi(t.channel||"WHATSAPP")}</div>
      <hr class="divider" />
      <div><strong>Cliente</strong></div>
      <div>${d}</div>
      ${u?`<div>Tel: ${u}</div>`:""}
      ${h?`<div>Nota: ${h}</div>`:""}
      <hr class="divider" />
      <div><strong>Detalle</strong></div>
      <table>
        <tbody>
          ${l||'<tr><td colspan="3">Sin productos</td></tr>'}
        </tbody>
      </table>
      ${f?`<div class="totals"><span>Total</span><span>${pi(f)}</span></div>`:""}
      <hr class="divider" />
      <div style="text-align:center;">Gracias por tu compra</div>
    </div>
  </body>
</html>`},cge=(t,e,n)=>{if(!t.client_whatsapp)return null;const s=ige(t.client_whatsapp);if(!s)return null;const r=t.id.slice(-6).toUpperCase(),i=t.order_type?H7[t.order_type]:"Retiro en local",l=t.items.map(u=>{const h=e[u.product_id]?.name||u.product_id;return`${u.quantity}x ${h}`}).join(", ");let d=`Hola ${t.client_name||"cliente"}, tu pedido #${r} est confirmado .`;return d+=`
Tipo: ${i}.`,t.order_type==="TABLE"&&t.table_number&&(d+=`
Mesa: ${t.table_number}.`),l&&(d+=`
Resumen: ${l}.`),t.total_estimated&&(d+=`
Total estimado: $${t.total_estimated.toLocaleString()}.`),d+=`

Revisa el estado de tu pedido aqu:
${n}`,d+=`

Tu pedido comenzar a prepararse cuando confirmes que los datos se encuentran en orden.`,`https://wa.me/${s}?text=${encodeURIComponent(d)}`};function dge(){const{firestoreUser:t}=wt(),{handleError:e}=at(),n=qe(),[s,r]=y.useState([]),[i,l]=y.useState({}),[d,u]=y.useState(null),[h,f]=y.useState(!0),[p,x]=y.useState("ALL"),[b,_]=y.useState(null),j=A=>{const C=window.open("","_blank","width=380,height=600");if(!C){J.error("No se pudo abrir la ventana de impresin");return}C.document.write(lge(A,i)),C.document.close(),C.focus(),setTimeout(()=>{C.print(),C.close()},250)};y.useEffect(()=>{t?.company_id&&v()},[t?.company_id]);const v=async()=>{if(t?.company_id)try{f(!0);const[A,C,M]=await Promise.all([Pj(t.company_id),lu(t.company_id),yn(t.company_id)]);r(A),u(M?.slug||null),l(C.reduce((L,k)=>(L[k.id]=k,L),{}))}catch(A){e(A),J.error("No se pudieron cargar los pedidos")}finally{f(!1)}},T=y.useMemo(()=>p==="ALL"?s:s.filter(A=>(A.status||"REQUESTED")===p),[s,p]),P=async(A,C)=>{if(C)try{_(A);const M=s.find(k=>k.id===A),L=M?.status||"REQUESTED";if(L!==C?await D9(A,L,C):await A9(A,{status:C}),r(k=>k.map(R=>R.id===A?{...R,status:C,status_history:[...R.status_history||[],{from:L||null,to:C,created_at:new Date}]}:R)),M&&C==="CONFIRMED"&&d){const k=`https://www.pymerp.cl/${d}/tracking/${A}`,R=cge({...M,status:C},i,k);R&&window.confirm("Enviar WhatsApp al cliente con el link de seguimiento?")&&window.open(R,"_blank")}J.success(`Estado cambiado a ${ix[C]||C}`)}catch(M){e(M),J.error("No se pudo actualizar el estado")}finally{_(null)}};return h?a.jsx(yt,{fullScreen:!0}):a.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-6 text-black",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-black",children:"Pedidos"}),a.jsx("h1",{className:"text-2xl font-bold text-black",children:"Gestin de pedidos"}),a.jsx("p",{className:"text-sm text-black",children:"Incluye pedidos ingresados desde el men y los capturados por WhatsApp."})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>n("/dashboard"),className:"px-4 py-2 rounded-md border border-slate-200 bg-white text-black text-sm font-semibold hover:bg-slate-50",children:"Volver al dashboard"}),a.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 rounded-md bg-slate-900 text-white text-sm font-semibold hover:bg-slate-800",children:"Recargar"})]})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["ALL","REQUESTED","CONFIRMED","PREPARING","DELIVERED","PAID","CANCELLED"].map(A=>a.jsx("button",{type:"button",onClick:()=>x(A),className:`px-3 py-1.5 rounded-full text-xs font-semibold border ${p===A?"bg-slate-900 text-white border-slate-900 dark:bg-slate-100 dark:text-slate-900 dark:border-slate-100":"bg-white text-black border-slate-200"}`,children:A==="ALL"?"Todos":ix[A]||A},A))}),T.length===0?a.jsx("div",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 p-6 text-center text-black",children:"No hay pedidos en esta categora."}):a.jsx("div",{className:"space-y-4",children:T.map(A=>{const C=A.status||"REQUESTED",M=rge[C]||null;return a.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm p-4 flex flex-col gap-3 dark:border-slate-700 dark:bg-slate-900",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs text-black",children:["Creado: ",A.created_at?new Date(A.created_at).toLocaleString():"-"]}),a.jsxs("p",{className:"text-lg font-semibold text-black",children:["Pedido #",A.id.slice(-6)]}),a.jsxs("p",{className:"text-sm text-black",children:["Mesa: ",A.table_number||"N/D","  Tipo: ",A.order_type||"TABLE","  Canal:"," ",A.channel||"WHATSAPP"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>j(A),className:"px-3 py-2 rounded-md bg-slate-100 text-slate-900 text-xs font-semibold hover:bg-slate-200",children:"Imprimir"}),a.jsx("button",{type:"button",disabled:!d,onClick:()=>{if(!d)return;const L=`https://www.pymerp.cl/${d}/tracking/${A.id}`;window.open(L,"_blank")},className:"px-3 py-2 rounded-md border border-slate-200 bg-white text-black text-xs font-semibold hover:bg-slate-50 disabled:opacity-60 disabled:cursor-not-allowed",children:"Ver tracking"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${age[C]||"bg-slate-100 text-slate-900 dark:bg-slate-700 dark:text-slate-100"}`,children:ix[C]||C}),M&&a.jsxs("button",{type:"button",disabled:b===A.id,onClick:()=>P(A.id,M),className:"px-3 py-2 rounded-md bg-blue-600 text-white text-xs font-semibold hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:["Avanzar a ",ix[M]||M]}),C!=="CANCELLED"&&C!=="PAID"&&a.jsx("button",{type:"button",disabled:b===A.id,onClick:()=>P(A.id,"CANCELLED"),className:"px-3 py-2 rounded-md bg-red-50 text-red-800 text-xs font-semibold border border-red-200 hover:bg-red-100 disabled:opacity-60 disabled:cursor-not-allowed dark:bg-red-500/15 dark:text-red-100 dark:border-red-500/30 dark:hover:bg-red-500/20",children:"Cancelar"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-6 text-sm",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold text-black",children:"Cliente"}),a.jsx("p",{className:"text-black",children:A.client_name||"Sin nombre"}),A.client_whatsapp&&a.jsxs("p",{className:"text-black",children:[" ",A.client_whatsapp]}),A.client_comment&&a.jsxs("p",{className:"text-black",children:[" ",A.client_comment]})]}),a.jsxs("div",{className:"space-y-1 flex-1 min-w-[240px]",children:[a.jsx("p",{className:"font-semibold text-black",children:"Productos"}),a.jsx("ul",{className:"list-disc list-inside text-black space-y-1",children:A.items.map((L,k)=>a.jsxs("li",{children:[L.quantity,"x ",i[L.product_id]?.name||L.product_id," ",L.unit_price?a.jsxs("span",{className:"text-black",children:["- $",L.unit_price.toLocaleString()]}):""]},k))})]}),A.total_estimated?a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-semibold text-black",children:"Total estimado"}),a.jsxs("p",{className:"text-lg font-bold text-black",children:["$",A.total_estimated.toLocaleString()]})]}):null]})]},A.id)})})]})}function uge(){const{firestoreUser:t}=wt(),e=qe(),{t:n}=ln(),{handleError:s}=at(),[r,i]=y.useState([]),[l,d]=y.useState(!0),[u,h]=y.useState(!1),[f,p]=y.useState({name:"",type:"ROOM",quantity:"",notes:""});y.useEffect(()=>{t?.company_id&&x()},[t?.company_id]);const x=async()=>{if(t?.company_id){d(!0);try{const v=await $7(t.company_id);i(v)}catch(v){s(v)}finally{d(!1)}}},b=async()=>{if(!(!t?.company_id||!f.name.trim())){h(!0);try{await Spe({company_id:t.company_id,name:f.name.trim(),type:f.type,quantity:f.quantity?Number(f.quantity):void 0,notes:f.notes?.trim()||void 0,active:!0}),p({name:"",type:"ROOM",quantity:"",notes:""}),await x()}catch(v){s(v)}finally{h(!1)}}},_=async(v,T)=>{try{await Tpe(v,T),i(P=>P.map(A=>A.id===v?{...A,...T}:A))}catch(P){s(P)}},j=async v=>{if(confirm(n("clinicResources.deleteConfirm")))try{await kpe(v),i(T=>T.filter(P=>P.id!==v))}catch(T){s(T)}};return l?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":n("common.back"),children:""}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n("clinicResources.title")}),a.jsx("p",{className:"text-sm text-gray-600",children:n("clinicResources.subtitle")})]})]})}),a.jsxs(Tl,{className:"bg-white border border-gray-100 shadow-sm p-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:n("clinicResources.name")}),a.jsx("input",{type:"text",value:f.name,onChange:v=>p(T=>({...T,name:v.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500",placeholder:n("clinicResources.namePlaceholder")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:n("clinicResources.type")}),a.jsxs("select",{value:f.type,onChange:v=>p(T=>({...T,type:v.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"ROOM",children:n("clinicResources.types.ROOM")}),a.jsx("option",{value:"EQUIPMENT",children:n("clinicResources.types.EQUIPMENT")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:n("clinicResources.quantity")}),a.jsx("input",{type:"number",min:"0",value:f.quantity,onChange:v=>p(T=>({...T,quantity:v.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500",placeholder:"1"})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:n("clinicResources.notes")}),a.jsx("textarea",{value:f.notes,onChange:v=>p(T=>({...T,notes:v.target.value})),rows:2,className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx(Mt,{onClick:b,disabled:u||!f.name.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:n(u?"clinicResources.creating":"clinicResources.create")})})]}),a.jsxs("div",{className:"space-y-3",children:[r.length===0&&a.jsx("p",{className:"text-gray-500 text-sm",children:n("clinicResources.empty")}),r.map(v=>a.jsxs(Tl,{className:"bg-white border border-gray-100 shadow-sm p-4 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("input",{type:"text",value:v.name,onChange:T=>i(P=>P.map(A=>A.id===v.id?{...A,name:T.target.value}:A)),onBlur:T=>_(v.id,{name:T.target.value.trim()}),className:"text-lg font-semibold text-gray-900 border border-transparent focus:border-blue-500 rounded px-1 py-1"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n("clinicResources.types."+v.type)}),v.notes&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v.notes})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>_(v.id,{active:v.active===!1}),className:`px-3 py-1 rounded text-sm ${v.active===!1?"bg-gray-100 text-gray-700":"bg-green-100 text-green-800"}`,children:v.active===!1?n("clinicResources.inactive"):n("clinicResources.active")}),a.jsx("button",{type:"button",onClick:()=>j(v.id),className:"px-3 py-1 bg-red-50 text-red-600 border border-red-200 rounded text-sm hover:bg-red-100",children:n("common.delete")})]})]}),a.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("span",{children:n("clinicResources.typesLabel")}),a.jsxs("select",{value:v.type,onChange:T=>_(v.id,{type:T.target.value}),className:"border border-gray-200 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"ROOM",children:n("clinicResources.types.ROOM")}),a.jsx("option",{value:"EQUIPMENT",children:n("clinicResources.types.EQUIPMENT")})]})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("span",{children:n("clinicResources.quantity")}),a.jsx("input",{type:"number",min:"0",value:v.quantity??"",onChange:T=>_(v.id,{quantity:Number(T.target.value)||0}),className:"w-20 border border-gray-200 rounded px-2 py-1"})]})]})]},v.id))]})]})})}const qy="delivery_routes",Wy="payment_collections",kM="delivery_locations",hge=t=>{const e=t.data();return{id:t.id,...e,start_date:e.start_date?.toDate?.(),end_date:e.end_date?.toDate?.(),created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},mge=t=>{const e=t.data();return{id:t.id,...e,due_date:e.due_date?.toDate?.(),paid_date:e.paid_date?.toDate?.(),created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},fge=t=>{const e=t.data();return{id:t.id,...e,timestamp:e.timestamp?.toDate?.()||new Date,created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},pge=async t=>{const e=os(t,"getDeliveryRoutes");try{const n=Ct(Ke(Ce,qy),Ge("company_id","==",e),da("created_at","desc"));return(await Dt(n)).docs.map(hge)}catch(n){throw on.handleFirestoreError(n,{collection:qy,op:"list"}),n}},gge=async t=>{const e=os(t.company_id,"createDeliveryRoute");try{const n=Ve.now();return(await Ts(Ke(Ce,qy),{...t,company_id:e,created_at:n,updated_at:n})).id}catch(n){throw on.handleFirestoreError(n,{collection:qy,op:"create"}),n}},xge=async t=>{const e=os(t,"getCollections");try{const n=Ct(Ke(Ce,Wy),Ge("company_id","==",e),da("created_at","desc"));return(await Dt(n)).docs.map(mge)}catch(n){throw on.handleFirestoreError(n,{collection:Wy,op:"list"}),n}},yge=async(t,e)=>{try{const n=mt(Ce,Wy,t);await Ss(n,{...e,updated_at:Ve.now()})}catch(n){throw on.handleFirestoreError(n,{collection:Wy,op:"update"}),n}},bge=async t=>{const e=os(t,"getDeliveryLocations");try{const n=Ct(Ke(Ce,kM),Ge("company_id","==",e),da("timestamp","desc"));return(await Dt(n)).docs.map(fge)}catch(n){throw on.handleFirestoreError(n,{collection:kM,op:"list"}),n}};function vge(){const{firestoreUser:t}=wt(),{handleError:e}=at(),[n,s]=y.useState([]),[r,i]=y.useState(!0),[l,d]=y.useState(!1),[u,h]=y.useState({name:"",driver:"",vehicle:"",notes:""});y.useEffect(()=>{t?.company_id&&f()},[t?.company_id]);const f=async()=>{if(t?.company_id)try{i(!0);const x=await pge(t.company_id);s(x)}catch(x){e(x),J.error("No se pudieron cargar las rutas")}finally{i(!1)}},p=async()=>{if(!u.name.trim()){J.error("Ingresa un nombre para la ruta");return}try{if(!t?.company_id){J.error("No se encontro la empresa asociada");return}await gge({company_id:t.company_id,name:u.name.trim(),driver:u.driver.trim()||void 0,vehicle:u.vehicle.trim()||void 0,notes:u.notes.trim()||void 0,orders:[],status:"PLANNED"}),J.success("Ruta creada exitosamente"),h({name:"",driver:"",vehicle:"",notes:""}),d(!1),f()}catch(x){e(x),J.error("No se pudo crear la ruta")}};return r?a.jsx(yt,{fullScreen:!0}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(dg,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-500",children:"Distribuidores"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Rutas de Reparto"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Gestiona las rutas de entrega y asigna pedidos a repartidores"})]}),a.jsx("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium shadow-lg hover:shadow-xl transition-all",children:"+ Nueva Ruta"})]}),n.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No hay rutas creadas"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Crea tu primera ruta de reparto para comenzar a organizar las entregas"}),a.jsx("button",{onClick:()=>d(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Crear Primera Ruta"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(x=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.name}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x.status==="PLANNED"?"bg-blue-100 text-blue-800":x.status==="IN_PROGRESS"?"bg-amber-100 text-amber-800":x.status==="COMPLETED"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.status==="PLANNED"?"Planificada":x.status==="IN_PROGRESS"?"En Curso":x.status==="COMPLETED"?"Completada":"Cancelada"})]}),x.driver&&a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" Repartidor: ",x.driver]}),x.vehicle&&a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" Vehculo: ",x.vehicle]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[" Pedidos: ",x.orders.length]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"flex-1 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 font-medium text-sm",children:"Ver Detalles"}),a.jsx("button",{className:"px-4 py-2 bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 font-medium text-sm",children:"Editar"})]})]},x.id))}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Nueva Ruta de Reparto"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la ruta *"}),a.jsx("input",{type:"text",value:u.name,onChange:x=>h({...u,name:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Ruta Norte - Maana"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repartidor"}),a.jsx("input",{type:"text",value:u.driver,onChange:x=>h({...u,driver:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre del repartidor"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vehculo"}),a.jsx("input",{type:"text",value:u.vehicle,onChange:x=>h({...u,vehicle:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Camioneta ABC-123"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),a.jsx("textarea",{value:u.notes,onChange:x=>h({...u,notes:x.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Notas adicionales sobre la ruta"})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium",children:"Cancelar"}),a.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"Crear Ruta"})]})]})})]})]})}function wge(){const{firestoreUser:t}=wt(),{handleError:e}=at(),[n,s]=y.useState([]),[r,i]=y.useState(!0),[l,d]=y.useState("ALL"),[u,h]=y.useState(0),[f,p]=y.useState(0);y.useEffect(()=>{t?.company_id&&x()},[t?.company_id]);const x=async()=>{if(t?.company_id)try{i(!0);const j=await xge(t.company_id);s(j);const v=j.filter(P=>P.status==="PENDING").reduce((P,A)=>P+A.amount,0),T=j.filter(P=>P.status==="PAID").reduce((P,A)=>P+A.amount,0);h(v),p(T)}catch(j){e(j),J.error("No se pudieron cargar las cobranzas")}finally{i(!1)}},b=async j=>{try{await yge(j,{status:"PAID",paid_date:new Date}),J.success("Cobranza marcada como pagada"),x()}catch(v){e(v),J.error("No se pudo actualizar la cobranza")}},_=n.filter(j=>l==="ALL"||j.status===l);return r?a.jsx(yt,{fullScreen:!0}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(dg,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-500",children:"Distribuidores"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Cobranza"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Gestiona los pagos pendientes y realizados de tus pedidos"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Pendiente"}),a.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:["$",u.toLocaleString()]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Pagado"}),a.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["$",f.toLocaleString()]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Cobranzas"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.length})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6",children:a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>d("ALL"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${l==="ALL"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Todas"}),a.jsx("button",{onClick:()=>d("PENDING"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${l==="PENDING"?"bg-amber-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pendientes"}),a.jsx("button",{onClick:()=>d("PAID"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${l==="PAID"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Pagadas"}),a.jsx("button",{onClick:()=>d("OVERDUE"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${l==="OVERDUE"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Vencidas"})]})}),_.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No hay cobranzas registradas"}),a.jsx("p",{className:"text-gray-600",children:"Las cobranzas se generan automticamente cuando se crean pedidos"})]}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimiento"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mtodo de pago"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(j=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.client_name}),a.jsx("div",{className:"text-sm text-gray-500",children:j.client_whatsapp})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:["$",j.amount.toLocaleString()]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${j.status==="PENDING"?"bg-amber-100 text-amber-800":j.status==="PAID"?"bg-green-100 text-green-800":j.status==="OVERDUE"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:j.status==="PENDING"?"Pendiente":j.status==="PAID"?"Pagada":j.status==="OVERDUE"?"Vencida":"Cancelada"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.due_date?new Date(j.due_date).toLocaleDateString("es-CL"):"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.payment_method||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:j.status==="PENDING"&&a.jsx("button",{onClick:()=>b(j.id),className:"text-green-600 hover:text-green-900 font-medium",children:"Marcar como pagada"})})]},j.id))})]})})]})]})}function _ge(){const{firestoreUser:t}=wt(),{handleError:e}=at(),[n,s]=y.useState([]),[r,i]=y.useState(!0),[l,d]=y.useState(null),[u,h]=y.useState(!1),f=y.useRef(null),p=y.useRef(null),x=y.useRef([]);y.useEffect(()=>{t?.company_id&&b()},[t?.company_id]),y.useEffect(()=>{if(xn.googleMapsApiKey&&!u){const _=document.createElement("script");_.src=`https://maps.googleapis.com/maps/api/js?key=${xn.googleMapsApiKey}&libraries=places,geometry`,_.async=!0,_.defer=!0,_.onload=()=>h(!0),document.head.appendChild(_)}},[u]);const b=async()=>{if(t?.company_id)try{i(!0);const _=await bge(t.company_id);s(_)}catch(_){e(_),J.error("No se pudieron cargar las ubicaciones")}finally{i(!1)}};return y.useEffect(()=>{if(!u||!f.current)return;const _=window?.google?.maps;if(_&&!p.current){const j=n[0],v=j?{lat:j.latitude,lng:j.longitude}:{lat:-33.4489,lng:-70.6693};p.current=new _.Map(f.current,{center:v,zoom:j?12:10})}},[u,n]),y.useEffect(()=>{const _=window?.google?.maps;!p.current||!_||(x.current.forEach(j=>j.setMap(null)),x.current=[],n.forEach(j=>{const v=new _.Marker({position:{lat:j.latitude,lng:j.longitude},map:p.current,title:j.client_name});v.addListener("click",()=>d(j)),x.current.push(v)}))},[n]),y.useEffect(()=>{!l||!p.current||p.current.panTo({lat:l.latitude,lng:l.longitude})},[l]),r?a.jsx(yt,{fullScreen:!0}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(dg,{}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-500",children:"Distribuidores"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Geolocalizacin"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Visualiza las ubicaciones de entrega de tus pedidos en el mapa"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ubicaciones de Entrega"}),n.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("p",{className:"text-gray-600 text-sm",children:"No hay ubicaciones registradas"})]}):a.jsx("div",{className:"space-y-3",children:n.map(_=>a.jsx("div",{onClick:()=>d(_),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${l?.id===_.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:_.client_name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.address}),a.jsx("span",{className:`inline-block mt-2 px-2 py-1 rounded text-xs font-medium ${_.status==="PENDING"?"bg-amber-100 text-amber-800":_.status==="IN_ROUTE"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:_.status==="PENDING"?"Pendiente":_.status==="IN_ROUTE"?"En Ruta":"Entregado"})]})})},_.id))})]})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",style:{height:"600px"},children:xn.googleMapsApiKey?u?a.jsx("div",{ref:f,id:"map",style:{width:"100%",height:"100%"}}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(yt,{})}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("p",{className:"text-gray-600",children:"Google Maps API Key no configurada"})]})})})})]})]})]})}const Eo="events",Xh="event_reservations",q7=t=>{const e=t.data();return{id:t.id,...e,start_date:e.start_date?.toDate?.()||e.start_date,end_date:e.end_date?.toDate?.()||e.end_date,created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},Ege=t=>{const e=t.data();return{id:t.id,...e,created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},W7=async t=>{const e=os(t);try{const n=Ct(Ke(Ce,Eo),Ge("company_id","==",e));return(await Dt(n)).docs.map(q7)}catch(n){throw on.handleFirestoreError(n,{collection:Eo,op:"list"}),n}},pC=async(t,e)=>{try{const n=mt(Ce,Eo,t),s=await ua(n);return s.exists()?q7(s):null}catch(n){throw on.handleFirestoreError(n,{collection:Eo,op:"get"}),n}},Nge=async t=>{const e=os(t.company_id);try{const n=Ve.now();return(await Ts(Ke(Ce,Eo),{...t,company_id:e,start_date:t.start_date?Ve.fromDate(t.start_date):Ve.now(),end_date:t.end_date?Ve.fromDate(t.end_date):void 0,created_at:n,updated_at:n})).id}catch(n){throw on.handleFirestoreError(n,{collection:Eo,op:"create"}),n}},jge=async(t,e,n)=>{try{const s=mt(Ce,Eo,t),r={...e,updated_at:Ve.now()};e.start_date instanceof Date&&(r.start_date=Ve.fromDate(e.start_date)),e.end_date instanceof Date&&(r.end_date=Ve.fromDate(e.end_date)),await Ss(s,r)}catch(s){throw on.handleFirestoreError(s,{collection:Eo,op:"update"}),s}},Cge=async(t,e)=>{try{await Co(mt(Ce,Eo,t))}catch(n){throw on.handleFirestoreError(n,{collection:Eo,op:"delete"}),n}},Yy=async(t,e)=>{const n=os(t);try{let s=[Ge("company_id","==",n)];e&&(s=[...s,Ge("event_id","==",e)]);const r=Ct(Ke(Ce,Xh),...s);return(await Dt(r)).docs.map(Ege)}catch(s){throw on.handleFirestoreError(s,{collection:Xh,op:"list"}),s}},Sge=async t=>{const e=os(t.company_id);try{const n=Ve.now();return(await Ts(Ke(Ce,Xh),{...t,company_id:e,created_at:n,updated_at:n})).id}catch(n){throw on.handleFirestoreError(n,{collection:Xh,op:"create"}),n}},Tge=async(t,e)=>{try{const n=mt(Ce,Xh,t);await Ss(n,{...e,updated_at:Ve.now()})}catch(n){throw on.handleFirestoreError(n,{collection:Xh,op:"update"}),n}},AM=t=>t?(t instanceof Date?t:new Date(t)).toLocaleString():"-";function kge(){const{firestoreUser:t}=wt(),{t:e}=ln(),n=qe(),{handleError:s}=at(),[r,i]=y.useState([]),[l,d]=y.useState({}),[u,h]=y.useState(!0);y.useEffect(()=>{(async()=>{if(t?.company_id)try{const b=await W7(t.company_id);i(b);const _={};for(const j of b){const v=await Yy(t.company_id,j.id);_[j.id]=v}d(_)}catch(b){s(b)}finally{h(!1)}})()},[t?.company_id,s]);const f=x=>(l[x]||[]).filter(b=>(b.status||"CONFIRMED")==="CONFIRMED").reduce((b,_)=>b+(_.tickets||1),0),p=async x=>{if(confirm(e("eventsModule.deleteConfirm")))try{await Cge(x),i(b=>b.filter(_=>_.id!==x)),J.success(e("eventsModule.deleted"))}catch(b){s(b)}};return u?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>n("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":e("common.back"),children:""}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e("eventsModule.title")})]}),a.jsx(jt,{to:"/dashboard/events/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:e("eventsModule.new")})]}),r.length===0&&a.jsx("p",{className:"text-sm text-gray-600",children:e("eventsModule.empty")}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((x,b)=>{const _=f(x.id),j=x.capacity??null,v=j?Math.max(j-_,0):null;return a.jsxs(Tl,{delay:b*.05,className:"bg-white border border-gray-100 shadow-sm p-4 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:x.title}),a.jsx("p",{className:"text-sm text-gray-600",children:x.description})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded ${x.status==="PUBLISHED"?"bg-green-100 text-green-800":x.status==="CANCELLED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:x.status||"DRAFT"})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:[AM(x.start_date),"  ",AM(x.end_date)]}),a.jsx("p",{children:x.location||e("eventsModule.noLocation")}),a.jsx("p",{children:j?`${e("eventsModule.capacity")}: ${j}  ${e("eventsModule.available")}: ${v}`:e("eventsModule.openCapacity")}),a.jsxs("p",{children:[e("eventsModule.confirmed"),": ",_]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jt,{to:`/dashboard/events/${x.id}`,className:"px-3 py-2 rounded bg-blue-50 text-blue-700 text-sm border border-blue-100 hover:bg-blue-100",children:e("common.edit")}),a.jsx(jt,{to:`/dashboard/events/${x.id}/reservations`,className:"px-3 py-2 rounded bg-indigo-50 text-indigo-700 text-sm border border-indigo-100 hover:bg-indigo-100",children:e("eventsModule.reservations")}),a.jsx("button",{type:"button",onClick:()=>p(x.id),className:"px-3 py-2 rounded bg-red-50 text-red-700 text-sm border border-red-100 hover:bg-red-100",children:e("common.delete")})]})]},x.id)})})]})})}const RM=t=>t?(t instanceof Date?t:new Date(t)).toISOString().slice(0,16):"";function DM(){const{id:t}=Mr(),e=!!t,{firestoreUser:n}=wt(),{t:s}=ln(),r=qe(),{handleError:i}=at(),[l,d]=y.useState(e),[u,h]=y.useState(!1),[f,p]=y.useState({id:"",company_id:"",title:"",description:"",start_date:new Date,end_date:void 0,location:"",capacity:void 0,status:"DRAFT",created_at:new Date,updated_at:new Date});y.useEffect(()=>{(async()=>{if(t)try{const _=await pC(t);if(!_){J.error(s("eventsModule.notFound")),r("/dashboard/events");return}p(_)}catch(_){i(_)}finally{d(!1)}})()},[t,i,r,s]);const x=async()=>{if(n?.company_id){if(!f.title.trim()){J.error(s("eventsModule.requiredTitle"));return}h(!0);try{const b={...f,company_id:n.company_id,start_date:f.start_date instanceof Date?f.start_date:new Date(f.start_date),end_date:f.end_date?f.end_date instanceof Date?f.end_date:new Date(f.end_date):void 0};e&&t?(await jge(t,b),J.success(s("eventsModule.updated"))):(await Nge({...b,id:void 0}),J.success(s("eventsModule.created"))),r("/dashboard/events")}catch(b){i(b)}finally{h(!1)}}};return l?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>r(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":s("common.back"),children:""}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s(e?"eventsModule.editTitle":"eventsModule.newTitle")}),a.jsx("p",{className:"text-sm text-gray-600",children:s("eventsModule.subtitle")})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 shadow-sm rounded-lg p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("eventsModule.fields.title")}),a.jsx("input",{type:"text",value:f.title,onChange:b=>p(_=>({..._,title:b.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("eventsModule.fields.description")}),a.jsx("textarea",{value:f.description||"",onChange:b=>p(_=>({..._,description:b.target.value})),rows:3,className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("eventsModule.fields.startDate")}),a.jsx("input",{type:"datetime-local",value:RM(f.start_date),onChange:b=>p(_=>({..._,start_date:new Date(b.target.value)})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("eventsModule.fields.endDate")}),a.jsx("input",{type:"datetime-local",value:RM(f.end_date),onChange:b=>p(_=>({..._,end_date:b.target.value?new Date(b.target.value):void 0})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("eventsModule.fields.location")}),a.jsx("input",{type:"text",value:f.location||"",onChange:b=>p(_=>({..._,location:b.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("eventsModule.fields.capacity")}),a.jsx("input",{type:"number",min:"0",value:f.capacity??"",onChange:b=>p(_=>({..._,capacity:b.target.value?Number(b.target.value):void 0})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("eventsModule.fields.status")}),a.jsxs("select",{value:f.status||"DRAFT",onChange:b=>p(_=>({..._,status:b.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"DRAFT",children:s("eventsModule.status.draft")}),a.jsx("option",{value:"PUBLISHED",children:s("eventsModule.status.published")}),a.jsx("option",{value:"CANCELLED",children:s("eventsModule.status.cancelled")})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>r("/dashboard/events"),className:"px-4 py-2 border border-gray-200 rounded text-sm hover:bg-gray-50",children:s("common.cancel")}),a.jsx("button",{type:"button",onClick:x,disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:s(u?"eventsModule.saving":"eventsModule.save")})]})]})]})})}function Age(){const{id:t}=Mr(),e=qe(),{t:n}=ln(),{firestoreUser:s}=wt(),{handleError:r}=at(),[i,l]=y.useState(null),[d,u]=y.useState([]),[h,f]=y.useState(!0),[p,x]=y.useState(!1),[b,_]=y.useState({attendee_name:"",attendee_email:"",attendee_phone:"",tickets:1,status:"CONFIRMED"});y.useEffect(()=>{(async()=>{if(!(!t||!s?.company_id))try{const[C,M]=await Promise.all([pC(t),Yy(s.company_id,t)]);l(C),u(M)}catch(C){r(C)}finally{f(!1)}})()},[t,s?.company_id,r]);const j=y.useMemo(()=>d.filter(A=>(A.status||"CONFIRMED")==="CONFIRMED").reduce((A,C)=>A+(C.tickets||1),0),[d]),v=i?.capacity?Math.max(i.capacity-j,0):null,T=async()=>{if(!(!t||!s?.company_id)){if(!b.attendee_name.trim()){J.error(n("eventsModule.reservationsForm.nameRequired"));return}if(v!==null&&b.status==="CONFIRMED"&&b.tickets>v){J.error(n("eventsModule.capacityExceeded"));return}x(!0);try{await Sge({company_id:s.company_id,event_id:t,attendee_name:b.attendee_name.trim(),attendee_email:b.attendee_email.trim()||void 0,attendee_phone:b.attendee_phone.trim()||void 0,tickets:b.tickets,status:b.status,created_at:new Date,updated_at:new Date,id:""});const A=await Yy(s.company_id,t);u(A),_({attendee_name:"",attendee_email:"",attendee_phone:"",tickets:1,status:"CONFIRMED"}),J.success(n("eventsModule.reservationsForm.created"))}catch(A){r(A)}finally{x(!1)}}},P=async(A,C)=>{if(!s?.company_id)return;const L=d.find(k=>k.id===A)?.tickets||1;if(v!==null&&C==="CONFIRMED"&&L>v){J.error(n("eventsModule.capacityExceeded"));return}try{await Tge(A,{status:C}),u(k=>k.map(R=>R.id===A?{...R,status:C}:R))}catch(k){r(k)}};return h?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":n("common.back"),children:""}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[n("eventsModule.reservationsFor")," ",i?.title]}),a.jsx("p",{className:"text-sm text-gray-600",children:i?.capacity?`${n("eventsModule.capacity")}: ${i.capacity}  ${n("eventsModule.available")}: ${v}`:n("eventsModule.openCapacity")})]})]}),a.jsx(jt,{to:"/dashboard/events",className:"text-sm text-blue-600 hover:underline",children:n("eventsModule.backToEvents")})]}),a.jsxs("div",{className:"bg-white border border-gray-100 shadow-sm rounded-lg p-4 space-y-3",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n("eventsModule.addReservation")}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:n("eventsModule.reservationsForm.name")}),a.jsx("input",{type:"text",value:b.attendee_name,onChange:A=>_(C=>({...C,attendee_name:A.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:n("eventsModule.reservationsForm.email")}),a.jsx("input",{type:"email",value:b.attendee_email,onChange:A=>_(C=>({...C,attendee_email:A.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:n("eventsModule.reservationsForm.phone")}),a.jsx("input",{type:"tel",value:b.attendee_phone,onChange:A=>_(C=>({...C,attendee_phone:A.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:n("eventsModule.reservationsForm.tickets")}),a.jsx("input",{type:"number",min:"1",value:b.tickets,onChange:A=>_(C=>({...C,tickets:Number(A.target.value)||1})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm text-gray-700",children:n("eventsModule.reservationsForm.status")}),a.jsxs("select",{value:b.status,onChange:A=>_(C=>({...C,status:A.target.value})),className:"border border-gray-200 rounded px-3 py-2",children:[a.jsx("option",{value:"PENDING",children:n("eventsModule.status.pending")}),a.jsx("option",{value:"CONFIRMED",children:n("eventsModule.status.confirmed")}),a.jsx("option",{value:"CANCELLED",children:n("eventsModule.status.cancelled")})]}),a.jsx("button",{type:"button",onClick:T,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:n(p?"eventsModule.saving":"eventsModule.reservationsForm.create")})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 shadow-sm rounded-lg p-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:n("eventsModule.reservationsList")}),d.length===0?a.jsx("p",{className:"text-sm text-gray-600",children:n("eventsModule.reservationsEmpty")}):a.jsx("div",{className:"divide-y divide-gray-100",children:d.map(A=>a.jsxs("div",{className:"py-3 flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:A.attendee_name}),a.jsx("p",{className:"text-sm text-gray-600",children:[A.attendee_email,A.attendee_phone].filter(Boolean).join("  ")}),a.jsx("p",{className:"text-sm text-gray-500",children:n("eventsModule.ticketsLabel",{count:A.tickets||1})})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("select",{value:A.status||"CONFIRMED",onChange:C=>P(A.id,C.target.value),className:"border border-gray-200 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"PENDING",children:n("eventsModule.status.pending")}),a.jsx("option",{value:"CONFIRMED",children:n("eventsModule.status.confirmed")}),a.jsx("option",{value:"CANCELLED",children:n("eventsModule.status.cancelled")})]})})]},A.id))})]})]})})}const No="properties",Zh="property_bookings",Y7=t=>{const e=t.data();return{id:t.id,...e,created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},Rge=t=>{const e=t.data();return{id:t.id,...e,check_in:e.check_in?.toDate?.()||e.check_in,check_out:e.check_out?.toDate?.()||e.check_out,created_at:e.created_at?.toDate?.()||new Date,updated_at:e.updated_at?.toDate?.()||new Date}},gC=async t=>{const e=os(t);try{const n=Ct(Ke(Ce,No),Ge("company_id","==",e));return(await Dt(n)).docs.map(Y7)}catch(n){throw on.handleFirestoreError(n,{collection:No,op:"list"}),n}},hv=async(t,e)=>{try{const n=mt(Ce,No,t),s=await ua(n);return s.exists()?Y7(s):null}catch(n){throw on.handleFirestoreError(n,{collection:No,op:"get"}),n}},Dge=async t=>{const e=os(t.company_id);try{const n=Ve.now();return(await Ts(Ke(Ce,No),{...t,company_id:e,created_at:n,updated_at:n})).id}catch(n){throw on.handleFirestoreError(n,{collection:No,op:"create"}),n}},Pge=async(t,e,n)=>{try{const s=mt(Ce,No,t);await Ss(s,{...e,updated_at:Ve.now()})}catch(s){throw on.handleFirestoreError(s,{collection:No,op:"update"}),s}},Mge=async(t,e)=>{try{await Co(mt(Ce,No,t))}catch(n){throw on.handleFirestoreError(n,{collection:No,op:"delete"}),n}},xC=async(t,e)=>{const n=os(t);try{let s=[Ge("company_id","==",n)];e&&(s=[...s,Ge("property_id","==",e)]);const r=Ct(Ke(Ce,Zh),...s);return(await Dt(r)).docs.map(Rge)}catch(s){throw on.handleFirestoreError(s,{collection:Zh,op:"list"}),s}},Jbe=async t=>{const e=os(t.company_id);try{const n=Ve.now();return(await Ts(Ke(Ce,Zh),{...t,company_id:e,check_in:t.check_in?Ve.fromDate(t.check_in):void 0,check_out:t.check_out?Ve.fromDate(t.check_out):void 0,created_at:n,updated_at:n})).id}catch(n){throw on.handleFirestoreError(n,{collection:Zh,op:"create"}),n}},Lge=async(t,e)=>{try{const n=mt(Ce,Zh,t),s={...e,updated_at:Ve.now()};e.check_in instanceof Date&&(s.check_in=Ve.fromDate(e.check_in)),e.check_out instanceof Date&&(s.check_out=Ve.fromDate(e.check_out)),await Ss(n,s)}catch(n){throw on.handleFirestoreError(n,{collection:Zh,op:"update"}),n}};function Ige(){const{firestoreUser:t}=wt(),{t:e}=ln(),n=qe(),{handleError:s}=at(),[r,i]=y.useState([]),[l,d]=y.useState(!0);y.useEffect(()=>{(async()=>{if(t?.company_id)try{const f=await gC(t.company_id);i(f)}catch(f){s(f)}finally{d(!1)}})()},[t?.company_id,s]);const u=async h=>{if(confirm(e("propertiesModule.deleteConfirm")))try{await Mge(h),i(f=>f.filter(p=>p.id!==h)),J.success(e("propertiesModule.deleted"))}catch(f){s(f)}};return l?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>n("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":e("common.back"),children:""}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e("propertiesModule.title")})]}),a.jsx(jt,{to:"/dashboard/properties/new",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e("propertiesModule.new")})]}),r.length===0&&a.jsx("p",{className:"text-sm text-gray-600",children:e("propertiesModule.empty")}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map((h,f)=>a.jsxs(Tl,{delay:f*.05,className:"bg-white border border-gray-100 shadow-sm p-4 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:h.title}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:h.description}),a.jsx("p",{className:"text-sm text-gray-500",children:h.address}),a.jsxs("p",{className:"text-sm text-gray-600",children:[e("propertiesModule.capacity"),": ",h.capacity??"-"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[e("propertiesModule.price"),": ",h.price_per_night?`$${h.price_per_night}`:e("common.notAvailable")]})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded ${h.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-700"}`,children:h.status||"INACTIVE"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(jt,{to:`/dashboard/properties/${h.id}`,className:"px-3 py-2 rounded bg-blue-50 text-blue-700 text-sm border border-blue-100 hover:bg-blue-100",children:e("common.edit")}),a.jsx(jt,{to:`/dashboard/properties/${h.id}/calendar`,className:"px-3 py-2 rounded bg-indigo-50 text-indigo-700 text-sm border border-indigo-100 hover:bg-indigo-100",children:e("propertiesModule.calendar")}),a.jsx(jt,{to:`/dashboard/properties/${h.id}/bookings`,className:"px-3 py-2 rounded bg-purple-50 text-purple-700 text-sm border border-purple-100 hover:bg-purple-100",children:e("propertiesModule.bookings")}),a.jsx(Mt,{onClick:()=>u(h.id),className:"px-3 py-2 bg-red-50 text-red-700 border border-red-100 rounded text-sm hover:bg-red-100",children:e("common.delete")})]})]},h.id))})]})})}function PM(){const{id:t}=Mr(),e=!!t,n=qe(),{t:s}=ln(),{firestoreUser:r}=wt(),{handleError:i}=at(),[l,d]=y.useState(e),[u,h]=y.useState(!1),[f,p]=y.useState({id:"",company_id:"",title:"",description:"",address:"",location:"",capacity:void 0,amenities:[],price_per_night:void 0,currency:"CLP",status:"ACTIVE",created_at:new Date,updated_at:new Date});y.useEffect(()=>{(async()=>{if(t)try{const _=await hv(t);if(!_){J.error(s("propertiesModule.notFound")),n("/dashboard/properties");return}p(_)}catch(_){i(_)}finally{d(!1)}})()},[t,i,n,s]);const x=async()=>{if(r?.company_id){if(!f.title.trim()){J.error(s("propertiesModule.requiredTitle"));return}h(!0);try{const b={...f,company_id:r.company_id};e&&t?(await Pge(t,b),J.success(s("propertiesModule.updated"))):(await Dge({...b,id:void 0}),J.success(s("propertiesModule.created"))),n("/dashboard/properties")}catch(b){i(b)}finally{h(!1)}}};return l?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>n(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":s("common.back"),children:""}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s(e?"propertiesModule.editTitle":"propertiesModule.newTitle")}),a.jsx("p",{className:"text-sm text-gray-600",children:s("propertiesModule.subtitle")})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 shadow-sm rounded-lg p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.fields.title")}),a.jsx("input",{type:"text",value:f.title,onChange:b=>p(_=>({..._,title:b.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.fields.description")}),a.jsx("textarea",{value:f.description||"",onChange:b=>p(_=>({..._,description:b.target.value})),rows:3,className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.fields.address")}),a.jsx("input",{type:"text",value:f.address||"",onChange:b=>p(_=>({..._,address:b.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.fields.capacity")}),a.jsx("input",{type:"number",min:"0",value:f.capacity??"",onChange:b=>p(_=>({..._,capacity:b.target.value?Number(b.target.value):void 0})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.fields.price")}),a.jsx("input",{type:"number",min:"0",value:f.price_per_night??"",onChange:b=>p(_=>({..._,price_per_night:b.target.value?Number(b.target.value):void 0})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.fields.status")}),a.jsxs("select",{value:f.status||"ACTIVE",onChange:b=>p(_=>({..._,status:b.target.value})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"ACTIVE",children:s("propertiesModule.status.active")}),a.jsx("option",{value:"INACTIVE",children:s("propertiesModule.status.inactive")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.fields.amenities")}),a.jsx("input",{type:"text",value:f.amenities?.join(", ")||"",onChange:b=>p(_=>({..._,amenities:b.target.value.split(",").map(j=>j.trim()).filter(Boolean)})),className:"w-full border border-gray-200 rounded px-3 py-2 focus:ring-2 focus:ring-blue-500",placeholder:"WiFi, Estacionamiento, Desayuno"})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>n("/dashboard/properties"),className:"px-4 py-2 border border-gray-200 rounded text-sm hover:bg-gray-50",children:s("common.cancel")}),a.jsx("button",{type:"button",onClick:x,disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:s(u?"propertiesModule.saving":"propertiesModule.save")})]})]})]})})}const Oge=(t,e)=>{const n=[];for(let s=0;s<e;s++){const r=new Date(t);r.setDate(t.getDate()+s),n.push(r)}return n};function Vge(){const{id:t}=Mr(),e=qe(),{t:n}=ln(),{firestoreUser:s}=wt(),{handleError:r}=at(),[i,l]=y.useState(null),[d,u]=y.useState([]),[h,f]=y.useState(!0);y.useEffect(()=>{(async()=>{if(!(!t||!s?.company_id))try{const[b,_]=await Promise.all([hv(t),xC(s.company_id,t)]);l(b),u(_)}catch(b){r(b)}finally{f(!1)}})()},[t,s?.company_id,r]);const p=y.useMemo(()=>{const x=new Date;return x.setHours(0,0,0,0),Oge(x,30).map(_=>{const j=Ei(_),v=d.filter(P=>{const A=new Date(P.check_in),C=new Date(P.check_out);return _>=A&&_<C});let T="AVAILABLE";return v.some(P=>(P.status||"CONFIRMED")==="CONFIRMED")?T="BOOKED":v.length>0&&(T="PARTIAL"),{date:j,status:T}})},[d]);return h?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":n("common.back"),children:""}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[n("propertiesModule.calendarFor")," ",i?.title]}),a.jsx("p",{className:"text-sm text-gray-600",children:n("propertiesModule.calendarHint")})]})]}),a.jsx(jt,{to:`/dashboard/properties/${t}/bookings`,className:"text-sm text-blue-600 hover:underline",children:n("propertiesModule.bookings")})]}),a.jsx("div",{className:"bg-white border border-gray-100 shadow-sm rounded-lg p-4 grid grid-cols-2 md:grid-cols-5 gap-3",children:p.map(x=>a.jsxs("div",{className:"p-3 rounded border border-gray-100 bg-gray-50",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:new Date(x.date).toLocaleDateString()}),a.jsx("span",{className:`inline-block mt-2 px-2 py-1 text-xs rounded ${x.status==="BOOKED"?"bg-red-100 text-red-700":x.status==="PARTIAL"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-800"}`,children:n("propertiesModule.statusLabel."+x.status)})]},x.date))})]})})}function Uge(){const{id:t}=Mr(),e=qe(),{t:n}=ln(),{firestoreUser:s}=wt(),{handleError:r}=at(),[i,l]=y.useState(null),[d,u]=y.useState([]),[h,f]=y.useState(!0);y.useEffect(()=>{(async()=>{if(!(!t||!s?.company_id))try{const[_,j]=await Promise.all([hv(t),xC(s.company_id,t)]);l(_),u(j)}catch(_){r(_)}finally{f(!1)}})()},[t,s?.company_id,r]);const p=y.useMemo(()=>d.filter(b=>(b.status||"CONFIRMED")==="CONFIRMED").length,[d]),x=async(b,_)=>{try{await Lge(b,{status:_}),u(j=>j.map(v=>v.id===b?{...v,status:_}:v))}catch(j){r(j)}};return h?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>e(-1),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":n("common.back"),children:""}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[n("propertiesModule.bookingsFor")," ",i?.title]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[n("propertiesModule.totalBookings",{count:d.length}),"  ",n("propertiesModule.confirmed"),": ",p]})]})]}),a.jsx(jt,{to:"/dashboard/properties",className:"text-sm text-blue-600 hover:underline",children:n("propertiesModule.backToList")})]}),a.jsx("div",{className:"bg-white border border-gray-100 shadow-sm rounded-lg p-4",children:d.length===0?a.jsx("p",{className:"text-sm text-gray-600",children:n("propertiesModule.bookingsEmpty")}):a.jsx("div",{className:"divide-y divide-gray-100",children:d.map(b=>a.jsxs("div",{className:"py-3 flex items-start justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:b.guest_name}),a.jsx("p",{className:"text-sm text-gray-600",children:[b.guest_email,b.guest_phone].filter(Boolean).join("  ")}),a.jsxs("p",{className:"text-sm text-gray-500",children:[new Date(b.check_in).toLocaleDateString()," - ",new Date(b.check_out).toLocaleDateString()]}),a.jsxs("p",{className:"text-sm text-gray-500",children:[n("propertiesModule.guests"),": ",b.guests||1]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("select",{value:b.status||"CONFIRMED",onChange:_=>x(b.id,_.target.value),className:"border border-gray-200 rounded px-2 py-1 text-sm",children:[a.jsx("option",{value:"PENDING",children:n("propertiesModule.status.pending")}),a.jsx("option",{value:"CONFIRMED",children:n("propertiesModule.status.confirmed")}),a.jsx("option",{value:"CANCELLED",children:n("propertiesModule.status.cancelled")})]})})]},b.id))})})]})})}const Bge=["image/jpeg","image/jpg","image/png","image/webp","image/avif"],MM=10,Fge=10,Vx=100,G7="VERTICAL",K7="cover";function $ge(t){if(t==null)return Vx;const e=typeof t=="string"?Number.parseFloat(t):Number(t);return Number.isNaN(e)?Vx:e<=1?Math.round(e*100):Math.max(Fge,Math.min(Vx,Math.round(e)))}function LM(t,e){const n=t.background_url||"";e.setEnabled(!!t.background_enabled),e.setUrl(n),e.setOrientation(t.background_orientation||G7),e.setImageFit(t.background_fit||K7),e.setOpacity($ge(t.background_opacity)),e.setPreviewUrl(n)}function zge(){const{firestoreUser:t}=wt(),{handleError:e}=at(),n=qe(),[s,r]=y.useState(!0),[i,l]=y.useState(null),[d,u]=y.useState(!1),[h,f]=y.useState(!1),[p,x]=y.useState(""),[b,_]=y.useState(G7),[j,v]=y.useState(K7),[T,P]=y.useState(!1),[A,C]=y.useState(""),[M,L]=y.useState(null),[k,R]=y.useState(Vx),S=y.useRef(null),O=y.useRef(null),I=y.useRef(!0),F=y.useRef(null),$=t?.company_id??null;y.useEffect(()=>(I.current=!0,()=>{I.current=!1,F.current&&(URL.revokeObjectURL(F.current),F.current=null),P(!1),u(!1)}),[]);const Q=y.useCallback(q=>{const Z=new Image;Z.crossOrigin="anonymous",Z.onload=()=>{if(!I.current)return;const ee=Z.width/Z.height;L({width:Z.width,height:Z.height,aspectRatio:ee,sizeKB:0,format:q.split(".").pop()?.toUpperCase()||"UNKNOWN"})},Z.onerror=()=>{I.current&&L(null)},Z.src=q},[]),G=y.useCallback(async()=>{if($){l(null),r(!0);try{const q=await yn($);if(!q){l("Empresa no encontrada");return}LM(q,{setEnabled:f,setUrl:x,setOrientation:_,setImageFit:v,setOpacity:R,setPreviewUrl:C}),q.background_url&&Q(q.background_url)}catch(q){l(q?.message??"Error al cargar la configuracin")}finally{r(!1)}}},[$,Q]);y.useEffect(()=>{if(!$){r(!1);return}G()},[$,G]);const B=async q=>{if(!q||!t?.company_id)return;if(!Bge.includes(q.type)){J.error("Formato no soportado. Usa JPG, PNG, WebP o AVIF");return}if(q.size>MM*1024*1024){J.error(`La imagen es muy grande. Mximo ${MM} MB`);return}const Z=new FileReader;Z.onload=ee=>{if(!I.current)return;const H=ee.target?.result;C(H);const Y=new Image;Y.onload=()=>{if(!I.current)return;const X=Y.width/Y.height;L({width:Y.width,height:Y.height,aspectRatio:X,sizeKB:Math.round(q.size/1024),format:q.type.split("/")[1].toUpperCase()})},Y.src=H},Z.readAsDataURL(q),P(!0);try{const ee=`backgrounds/${t.company_id}/${Date.now()}-${q.name.replace(/[^a-zA-Z0-9.-]/g,"_")}`;F.current&&URL.revokeObjectURL(F.current);const H=new Image,Y=URL.createObjectURL(q);F.current=Y,H.onload=()=>{if(!I.current){URL.revokeObjectURL(Y);return}const ie=H.width/H.height>1;let te=ie?2560:1440,be=ie?1440:2560;H.width<te?(te=H.width,be=Math.round(H.height*(te/H.width))):H.height<be&&(be=H.height,te=Math.round(H.width*(be/H.height)));const ve=H.width>2e3?.85:.92;gg(q,ee,{width:te,height:be,maxSizeKB:2e3,format:"image/jpeg",quality:ve}).then(Pe=>{I.current&&(x(Pe),C(Pe),J.success("Imagen subida y optimizada correctamente"))}).catch(Pe=>{I.current&&(J.error("No se pudo subir la imagen"),e(Pe))}).finally(()=>{I.current&&(P(!1),S.current&&(S.current.value="")),URL.revokeObjectURL(Y),F.current===Y&&(F.current=null)})},H.onerror=()=>{URL.revokeObjectURL(Y),F.current===Y&&(F.current=null),I.current&&(P(!1),J.error("Error al cargar la imagen"))},H.src=Y}catch(ee){I.current&&(J.error("Error al procesar la imagen"),e(ee),P(!1))}},z=async q=>{if(q.preventDefault(),!!t?.company_id){u(!0);try{await si(t.company_id,{background_enabled:h,background_url:p.trim(),background_orientation:b,background_fit:j,background_opacity:k}),J.success(" Fondo actualizado correctamente");const Z=await yn(t.company_id);Z&&(LM(Z,{setEnabled:f,setUrl:x,setOrientation:_,setImageFit:v,setOpacity:R,setPreviewUrl:C}),Z.background_url&&Q(Z.background_url))}catch(Z){J.error(" No se pudo guardar el fondo"),e(Z)}finally{u(!1)}}};return s?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsxs("div",{className:"bg-white shadow-lg rounded-xl p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Fondo de la Ficha Pblica"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Personaliza el fondo de tu pgina pblica con una imagen de alta calidad. El sistema optimizar automticamente la imagen para mantener la mejor resolucin en todos los dispositivos."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"button",onClick:()=>n(-1),className:"px-4 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:" Volver"}),a.jsx("button",{type:"button",onClick:()=>n("/dashboard"),className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Dashboard"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("h3",{className:"font-semibold text-blue-900",children:"Formatos Soportados"})]}),a.jsx("p",{className:"text-xs text-blue-700",children:"JPG, PNG, WebP, AVIF. Hasta 10MB. Se optimizar automticamente."})]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("h3",{className:"font-semibold text-green-900",children:"Resoluciones Recomendadas"})]}),a.jsx("p",{className:"text-xs text-green-700",children:"Horizontal: 2560x1440px (2K) o superior. Vertical: 1440x2560px o superior."})]}),a.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("h3",{className:"font-semibold text-purple-900",children:"Optimizacin Automtica"})]}),a.jsx("p",{className:"text-xs text-purple-700",children:"La imagen se redimensiona y comprime manteniendo la mxima calidad visual."})]})]})]}),i&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6 flex flex-wrap items-center justify-between gap-3",children:[a.jsx("p",{className:"text-red-800 text-sm font-medium",children:i}),a.jsx("button",{type:"button",onClick:()=>G(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium",children:"Reintentar"})]}),a.jsx("div",{className:"bg-white shadow-lg rounded-xl p-6",children:a.jsxs("form",{className:"space-y-6",onSubmit:z,children:[a.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border-2 border-gray-200",children:a.jsxs("label",{className:"inline-flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:h,onChange:q=>f(q.target.checked),className:"h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-base font-semibold text-gray-900 block",children:"Mostrar fondo en la ficha pblica"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Activa esta opcin para mostrar la imagen de fondo"})]})]})}),h&&a.jsxs("div",{className:"space-y-6",children:[A&&a.jsxs("div",{className:"relative bg-gray-100 rounded-xl overflow-hidden border-2 border-gray-300",children:[a.jsxs("div",{className:"relative h-64 sm:h-96 overflow-hidden",children:[a.jsx("img",{ref:O,src:A,alt:"Preview del fondo",className:"w-full h-full transition-all duration-300",style:{opacity:k/100,objectFit:j,objectPosition:"center"},onError:()=>{I.current&&(C(""),J.error("No se pudo cargar la imagen"))}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]}),M&&a.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/70 text-white text-xs p-2 rounded backdrop-blur-sm",children:a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-300",children:"Dimensiones:"}),a.jsxs("span",{className:"ml-1 font-semibold",children:[M.width,"  ",M.height,"px"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-300",children:"Aspect Ratio:"}),a.jsxs("span",{className:"ml-1 font-semibold",children:[M.aspectRatio.toFixed(2),":1"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-300",children:"Formato:"}),a.jsx("span",{className:"ml-1 font-semibold",children:M.format})]}),M.sizeKB>0&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-300",children:"Tamao:"}),a.jsxs("span",{className:"ml-1 font-semibold",children:[M.sizeKB," KB"]})]})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"URL de la imagen"}),a.jsx("input",{type:"url",placeholder:"https://ejemplo.com/imagen.jpg",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",value:p,onChange:q=>{if(!I.current)return;const Z=q.target.value.trim();y.startTransition(()=>{x(Z),Z?(C(Z),Q(Z)):(C(""),L(null))})},disabled:T}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Ingresa una URL directa a la imagen. Asegrate de que sea accesible pblicamente."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"O sube una imagen desde tu dispositivo"}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("label",{className:"flex-1 cursor-pointer",children:[a.jsx("input",{ref:S,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/avif",disabled:T,onChange:q=>{const Z=q.target.files?.[0];Z&&B(Z)},className:"hidden"}),a.jsx("div",{className:"px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:T?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Subiendo y optimizando..."})]}):a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-600 font-medium",children:" Click para seleccionar"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, WebP, AVIF (mx 10MB)"})]})})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Ajuste de la imagen"}),a.jsxs("select",{value:j,onChange:q=>{I.current&&y.startTransition(()=>{v(q.target.value)})},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"cover",children:" Cover - Cubre todo el espacio (puede recortar)"}),a.jsx("option",{value:"contain",children:" Contain - Muestra toda la imagen (puede dejar espacios)"}),a.jsx("option",{value:"fill",children:" Fill - Estira para llenar (puede distorsionar)"}),a.jsx("option",{value:"scale-down",children:" Scale Down - Reduce si es necesario (mantiene proporcin)"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[a.jsx("strong",{children:"Cover:"})," Mejor para fondos decorativos.",a.jsx("strong",{children:" Contain:"})," Mejor para preservar toda la imagen."]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Opacidad: ",k,"%"]}),a.jsx("input",{type:"range",min:"10",max:"100",value:k,onChange:q=>{I.current&&y.startTransition(()=>{R(Number(q.target.value))})},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"10% (Muy transparente)"}),a.jsx("span",{children:"100% (Completamente opaco)"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Ajusta la opacidad para que el contenido sea ms legible sobre el fondo."})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>n(-1),className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:d||h&&!p.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:d?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"animate-spin inline-block rounded-full h-4 w-4 border-b-2 border-white"}),"Guardando..."]}):a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{children:""}),"Guardar Configuracin"]})})]})]})})]})})}function mv(t){if(!t||typeof t!="string")return null;const e=t.trim();if(/^[a-zA-Z0-9_-]{11}$/.test(e))return e;const n=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/^https?:\/\/(?:www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]{11})/,/^https?:\/\/youtu\.be\/([a-zA-Z0-9_-]{11})/,/^https?:\/\/(?:www\.)?youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/];for(const r of n){const i=e.match(r);if(i&&i[1])return i[1]}const s=e.match(/src=["']([^"']+)["']/);return s?mv(s[1]):null}function IM(t){if(!t||typeof t!="string"||!t.trim())return{videoId:"",embedUrl:"",isValid:!1,error:"URL vaca"};const e=mv(t.trim());if(!e)return{videoId:"",embedUrl:"",isValid:!1,error:"URL de YouTube no vlida. Acepta enlaces como: https://youtu.be/VIDEO_ID o https://www.youtube.com/watch?v=VIDEO_ID"};const n=`https://www.youtube.com/embed/${e}?rel=0&modestbranding=1`;return{videoId:e,embedUrl:n,isValid:!0}}function Hge(t,e="high"){return`https://img.youtube.com/vi/${t}/${{default:"default.jpg",medium:"mqdefault.jpg",high:"hqdefault.jpg",maxres:"maxresdefault.jpg"}[e]}`}function qge(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),[s,r]=y.useState(!0),[i,l]=y.useState(!1),[d,u]=y.useState(!1),[h,f]=y.useState(""),[p,x]=y.useState("HERO"),[b,_]=y.useState(null);y.useEffect(()=>{if(!h.trim()){_(null);return}const T=IM(h);_(T)},[h]),y.useEffect(()=>{(async()=>{if(!t?.company_id){r(!1);return}try{const P=await yn(t.company_id);if(P){u(!!P.video_enabled);const A=P.video_url||"";if(f(A),A){const C=IM(A);_(C)}x(P.video_placement||"HERO")}}catch(P){n(P,{customMessage:"No se pudo cargar el video"})}finally{r(!1)}})()},[t?.company_id,n]);const j=async T=>{if(T.preventDefault(),!!t?.company_id){if(d){if(!h.trim()){J.error("Por favor ingresa una URL de YouTube");return}if(!b?.isValid){J.error(b?.error||"URL de YouTube no vlida");return}}l(!0);try{let P;b?.isValid&&b.videoId?P=b.embedUrl:P=h.trim(),console.log("[BrandingVideo] Saving video:",{enabled:d,placement:p,urlToSave:P,videoInfo:b});const A={video_enabled:d,video_url:P,video_placement:p};await Promise.all([si(t.company_id,A),kj(t.company_id,A)]),J.success("Video actualizado correctamente")}catch(P){J.error("No se pudo guardar el video"),n(P)}finally{l(!1)}}},v=y.useMemo(()=>b?.isValid&&b.videoId?Hge(b.videoId,"high"):null,[b]);return s?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:a.jsx(yt,{size:"lg"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsx("div",{className:"bg-white shadow rounded-xl p-6",children:a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Video en ficha pblica"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Agrega un enlace de YouTube para mostrar en tu ficha pblica. Puedes activar/desactivar el video y elegir cmo se presenta."})]}),a.jsxs("button",{type:"button",onClick:()=>e("/dashboard"),className:"px-4 py-2 text-sm font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]})]})}),a.jsxs("form",{className:"bg-white shadow rounded-xl p-6 space-y-6",onSubmit:j,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"video-enabled",checked:d,onChange:T=>u(T.target.checked),className:"h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"video-enabled",className:"text-sm font-semibold text-gray-900 cursor-pointer",children:"Mostrar video en la ficha pblica"})]}),d&&a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold",children:"Activo"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Enlace de YouTube"}),a.jsx("input",{type:"text",placeholder:"https://youtu.be/VIDEO_ID o https://www.youtube.com/watch?v=VIDEO_ID",className:`w-full px-4 py-3 border-2 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors ${b&&!b.isValid&&h.trim()?"border-red-300 focus:border-red-500":b?.isValid?"border-green-300 focus:border-green-500":"border-gray-300 focus:border-indigo-500"}`,value:h,onChange:T=>f(T.target.value),disabled:!d,required:d}),b&&!b.isValid&&h.trim()&&a.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),b.error]}),b?.isValid&&a.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"URL de YouTube vlida"]}),a.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Acepta enlaces de YouTube en formato: ",a.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"youtu.be/VIDEO_ID"})," o ",a.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"youtube.com/watch?v=VIDEO_ID"})]})]}),d&&b?.isValid&&b.embedUrl&&a.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-gray-50",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Vista previa del video"}),a.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:a.jsx("iframe",{src:b.embedUrl,className:"absolute top-0 left-0 w-full h-full rounded-lg",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Vista previa del video"})}),v&&a.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Video ID: ",a.jsx("code",{className:"bg-gray-200 px-1 rounded",children:b.videoId})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Ubicacin del video"}),a.jsxs("select",{value:p,onChange:T=>x(T.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",disabled:!d,children:[a.jsx("option",{value:"MODAL",children:"Ventana emergente al iniciar (con botn cerrar)"}),a.jsx("option",{value:"HERO",children:"Tarjeta destacada al inicio del contenido"}),a.jsx("option",{value:"FOOTER",children:"Tarjeta al final del contenido"})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Elige dnde se mostrar el video en tu ficha pblica"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{f(""),_(null),u(!1)},className:"px-4 py-2 text-sm font-semibold text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Limpiar"}),a.jsx("button",{type:"submit",disabled:i||d&&!b?.isValid,className:"px-6 py-2 text-sm font-semibold text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx(yt,{size:"sm"}),"Guardando..."]}):"Guardar video"})]})]})]})})}function Q7({appointment:t,serviceName:e,professionalName:n,onConfirm:s,onCancel:r,onEdit:i,showActions:l=!0}){const d={[Be.REQUESTED]:"bg-yellow-100 text-yellow-800 border-yellow-300",[Be.CONFIRMED]:"bg-green-100 text-green-800 border-green-300",[Be.CANCELLED]:"bg-red-100 text-red-800 border-red-300",[Be.COMPLETED]:"bg-blue-100 text-blue-800 border-blue-300",[Be.NO_SHOW]:"bg-gray-100 text-gray-800 border-gray-300"},u={[Be.REQUESTED]:"Solicitada",[Be.CONFIRMED]:"Confirmada",[Be.CANCELLED]:"Cancelada",[Be.COMPLETED]:"Completada",[Be.NO_SHOW]:"No asisti"};return a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border-2 border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.client_name}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:[" ",t.client_phone]}),t.client_email&&a.jsxs("p",{className:"text-sm text-gray-600",children:[" ",t.client_email]}),t.client_rut&&a.jsxs("p",{className:"text-sm text-gray-600",children:[" RUT: ",t.client_rut]})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${d[t.status]}`,children:u[t.status]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4 p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("span",{className:"font-medium text-base",children:""}),a.jsx("span",{className:"font-medium",children:Kn(t.appointment_date,"EEEE d 'de' MMMM",{locale:_i})})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("span",{className:"font-medium text-base",children:""}),a.jsxs("span",{className:"font-medium",children:[t.start_time," - ",t.end_time]})]}),e&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("span",{className:"font-medium text-base",children:""}),a.jsx("span",{children:e})]}),n&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("span",{className:"font-medium text-base",children:""}),a.jsxs("span",{className:"font-medium text-blue-700",children:["Profesional: ",n]})]})]}),t.notes&&a.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2 text-sm text-gray-700",children:[a.jsx("span",{className:"font-medium text-base",children:""}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Notas:"}),a.jsx("p",{className:"mt-1",children:t.notes})]})]})}),l&&t.status!==Be.CANCELLED&&a.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-200",children:[t.status===Be.REQUESTED&&s&&a.jsx("button",{type:"button",onClick:()=>s(t.id),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium",children:"Confirmar"}),i&&a.jsx("button",{type:"button",onClick:()=>i(t.id),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium",children:"Editar"}),r&&a.jsx("button",{type:"button",onClick:()=>r(t.id),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium",children:"Cancelar"})]})]})}function Wge({appointments:t,services:e,professionals:n,onConfirm:s,onCancel:r,loading:i=!1}){return i?a.jsx("div",{className:"flex justify-center py-12",children:a.jsx(yt,{size:"lg"})}):t.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500 text-lg",children:" No hay citas pendientes"})}):a.jsx("div",{className:"space-y-4",children:t.map(l=>{const d=e.find(h=>h.id===l.service_id),u=n.find(h=>h.id===l.professional_id);return a.jsx(Q7,{appointment:l,serviceName:d?.name,professionalName:u?.name,onConfirm:s,onCancel:r,showActions:!0},l.id)})})}function Yge(){const t=qe(),{firestoreUser:e}=wt(),{handleError:n}=at(),[s,r]=y.useState(!0),[i,l]=y.useState([]),[d,u]=y.useState([]),[h,f]=y.useState([]),[p,x]=y.useState([]),[b,_]=y.useState(new Date),[j,v]=y.useState("day"),[T,P]=y.useState("all"),[A,C]=y.useState(!1);y.useEffect(()=>{M()},[]),y.useEffect(()=>{if(!e?.company_id)return;const I=j==="day"?new Date(b.setHours(0,0,0,0)):Ka(b,{weekStartsOn:1}),F=j==="day"?new Date(b.setHours(23,59,59,999)):Of(b,{weekStartsOn:1}),$=A8(e.company_id,I,F,Q=>{f(T==="all"?Q:Q.filter(G=>G.professional_id===T))});return()=>$()},[e?.company_id,b,j,T]);const M=async()=>{if(e?.company_id)try{const[I,F,$]=await Promise.all([Qc(e.company_id),j8(e.company_id),f1(e.company_id)]);l(I),u(F),x($)}catch(I){n(I)}finally{r(!1)}},L=async I=>{try{if(await k8(I),J.success("Cita confirmada. Se enviaron notificaciones al cliente."),e?.company_id){const F=await f1(e.company_id);x(F)}}catch(F){n(F)}},k=async I=>{if(confirm("Ests seguro de cancelar esta cita? Se enviar una notificacin al cliente."))try{if(await T8(I),J.success("Cita cancelada. Se enviaron notificaciones al cliente."),e?.company_id){const F=await f1(e.company_id);x(F)}}catch(F){n(F)}},R=I=>h.filter(F=>NP(F.appointment_date,I)),S=()=>{const I=R(b);return I.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500 text-lg",children:"No hay citas para este da"})}):a.jsx("div",{className:"space-y-4",children:I.map(F=>{const $=i.find(G=>G.id===F.service_id),Q=d.find(G=>G.id===F.professional_id);return a.jsx(Q7,{appointment:F,serviceName:$?.name,professionalName:Q?.name,onConfirm:L,onCancel:k,showActions:!0},F.id)})})},O=()=>{const I=Ka(b,{weekStartsOn:1}),F=Array.from({length:7},($,Q)=>yle(I,Q));return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:F.map($=>{const Q=R($),G=NP($,new Date);return a.jsxs("div",{className:`border-2 rounded-lg p-3 ${G?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:Kn($,"EEE d",{locale:_i})}),Q.length===0?a.jsx("p",{className:"text-xs text-gray-500",children:"Sin citas"}):a.jsx("div",{className:"space-y-2",children:Q.map(B=>a.jsxs("div",{className:"text-xs bg-white border border-gray-200 rounded p-2 cursor-pointer hover:shadow",onClick:()=>_($),children:[a.jsx("p",{className:"font-medium text-gray-900",children:B.start_time}),a.jsx("p",{className:"text-gray-600 truncate",children:B.client_name})]},B.id))})]},$.toISOString())})})};return s?a.jsx(yt,{fullScreen:!0,size:"lg"}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Horarios y Citas"})]}),a.jsx("button",{type:"button",onClick:()=>t("/dashboard/appointments/new"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-medium",children:"+ Nueva cita"})]}),p.length>0&&a.jsx("div",{className:"mb-4",children:a.jsxs("button",{type:"button",onClick:()=>C(!A),className:"flex items-center gap-2 px-4 py-2 bg-yellow-100 border-2 border-yellow-300 rounded-lg hover:bg-yellow-200 transition-colors",children:[a.jsxs("span",{className:"text-yellow-900 font-semibold",children:[" ",p.length," citas pendientes de confirmar"]}),a.jsx("span",{className:"text-yellow-700",children:A?"":""})]})}),A&&p.length>0&&a.jsxs(ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white shadow rounded-lg p-6 mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Citas pendientes"}),a.jsx(Wge,{appointments:p,services:i,professionals:d,onConfirm:L,onCancel:k})]}),a.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>_(new Date(b.getTime()-(j==="day"?864e5:6048e5))),className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100",children:""}),a.jsx("span",{className:"text-lg font-semibold text-gray-900 min-w-[200px] text-center",children:j==="day"?Kn(b,"d 'de' MMMM, yyyy",{locale:_i}):`Semana del ${Kn(Ka(b,{weekStartsOn:1}),"d MMM",{locale:_i})}`}),a.jsx("button",{type:"button",onClick:()=>_(new Date(b.getTime()+(j==="day"?864e5:6048e5))),className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100",children:""}),a.jsx("button",{type:"button",onClick:()=>_(new Date),className:"px-3 py-2 bg-gray-200 rounded-md hover:bg-gray-300 text-sm font-medium",children:"Hoy"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>v("day"),className:`px-4 py-2 rounded-md text-sm font-medium ${j==="day"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Da"}),a.jsx("button",{type:"button",onClick:()=>v("week"),className:`px-4 py-2 rounded-md text-sm font-medium ${j==="week"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Semana"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"professional_filter",className:"sr-only",children:"Filtrar por profesional"}),a.jsxs("select",{id:"professional_filter",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:T,onChange:I=>P(I.target.value),children:[a.jsx("option",{value:"all",children:"Todos los profesionales"}),d.map(I=>a.jsx("option",{value:I.id,children:I.name},I.id))]})]})]})}),a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:j==="day"?S():O()})]})})})}const k1=[{value:0,label:"Domingo"},{value:1,label:"Lunes"},{value:2,label:"Martes"},{value:3,label:"Mircoles"},{value:4,label:"Jueves"},{value:5,label:"Viernes"},{value:6,label:"Sbado"}];function Gge({professional:t,isOpen:e,onClose:n}){const{t:s}=ln(),{firestoreUser:r}=wt(),{handleError:i}=at(),[l,d]=y.useState(!1),[u,h]=y.useState(!1),[f,p]=y.useState([]),x=y.useCallback(async()=>{if(t.id){d(!0);try{const T=(await C8(t.id)).filter(A=>A.is_available),P=k1.map(A=>{const C=T.find(M=>M.day_of_week===A.value);return{day_of_week:A.value,enabled:!!C,start_time:C?.start_time||"09:00",end_time:C?.end_time||"18:00"}});p(P)}catch(v){v?.code==="permission-denied"||v?.message?.includes("permissions")?console.warn("No se pudieron cargar los horarios existentes. Continuando con valores por defecto."):i(v)}finally{d(!1)}}},[i,t.id]);y.useEffect(()=>{if(e&&t.id){const v=k1.map(T=>({day_of_week:T.value,enabled:!1,start_time:"09:00",end_time:"18:00"}));p(v),x()}else p([])},[e,x,t.id]);const b=v=>{if(v<0||v>=f.length){console.error("Invalid index:",v,"availabilities length:",f.length);return}const T=[...f];T[v]&&(T[v].enabled=!T[v].enabled,p(T))},_=(v,T,P)=>{if(v<0||v>=f.length||!f[v]){console.error("Invalid index:",v,"availabilities length:",f.length);return}const A=[...f];if(A[v]){if(A[v][T]=P,T==="start_time"&&A[v].end_time&&P>=A[v].end_time){J.error("La hora de inicio debe ser menor que la hora de fin");return}if(T==="end_time"&&A[v].start_time&&P<=A[v].start_time){J.error("La hora de fin debe ser mayor que la hora de inicio");return}p(A)}},j=async()=>{if(!r?.company_id){J.error(s("common.errorAuthentication"));return}const v=r.company_id;if(!v){J.error(s("common.errorCompanyIdNotFound"));return}h(!0);try{await Qoe(t.id);const T=f.filter(A=>A.enabled);if(T.length===0){J.success("Horarios actualizados (sin das disponibles)"),n();return}const P=T.map(A=>Yoe({professional_id:t.id,company_id:v,day_of_week:A.day_of_week,start_time:A.start_time,end_time:A.end_time,is_available:!0}));await Promise.all(P),J.success("Horarios disponibles guardados exitosamente"),n()}catch(T){i(T)}finally{h(!1)}};return e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:n,"aria-hidden":"true"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[a.jsxs("div",{className:"bg-indigo-600 px-4 py-5 sm:px-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(b8,{className:"w-6 h-6 text-white"}),a.jsxs("h3",{className:"text-lg font-medium text-white",children:["Horarios disponibles - ",t.name]})]}),a.jsx("button",{type:"button",onClick:n,className:"text-white hover:text-gray-200 focus:outline-none","aria-label":"Cerrar",children:a.jsx(Pp,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:l?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(yt,{size:"lg"})}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Selecciona los das y horarios en los que ",t.name," est disponible para recibir citas."]}),a.jsx("div",{className:"space-y-3",children:k1.map((v,T)=>{const P=f[T]||{day_of_week:v.value,enabled:!1,start_time:"09:00",end_time:"18:00"};return a.jsxs("div",{className:`border rounded-lg p-4 ${P.enabled?"border-indigo-300 bg-indigo-50":"border-gray-200 bg-gray-50"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:P.enabled,onChange:()=>b(T),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),a.jsx("span",{className:"font-medium text-gray-900",children:v.label})]})}),P.enabled&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(o2,{className:"w-4 h-4 inline mr-1"}),"Hora inicio"]}),a.jsx("input",{type:"time",value:P.start_time,onChange:A=>_(T,"start_time",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.jsx(o2,{className:"w-4 h-4 inline mr-1"}),"Hora fin"]}),a.jsx("input",{type:"time",value:P.end_time,onChange:A=>_(T,"end_time",A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]})]},v.value)})})]})}),a.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",onClick:j,disabled:u||l,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:s(u?"common.saving":"common.saveSchedules")}),a.jsx("button",{type:"button",onClick:n,disabled:u,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"})]})]})]})}):null}function Kge(){const{firestoreUser:t}=wt(),e=qe(),{handleError:n}=at(),[s,r]=y.useState([]),[i,l]=y.useState(!0),[d,u]=y.useState(null);y.useEffect(()=>{if(!t?.company_id)return;const f=R8(t.company_id,p=>{r(p),l(!1)});return()=>f()},[t]);const h=async(f,p)=>{if(confirm(`Ests seguro de eliminar a ${p}? Esta accin no se puede deshacer.`))try{await Woe(f),J.success("Profesional eliminado")}catch(x){n(x)}};return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx(yt,{})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e("/dashboard"),className:"p-2 text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"Volver al dashboard",children:a.jsx(cg,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profesionales"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestiona tu equipo de profesionales"})]})]}),a.jsxs(jt,{to:"/dashboard/professionals/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors",children:[a.jsx(Rx,{className:"w-4 h-4"}),"Nuevo Profesional"]})]}),s.length===0?a.jsx("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"p-4 bg-orange-100 rounded-full",children:a.jsx(Rx,{className:"w-12 h-12 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay profesionales registrados"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Crea tu primer profesional para comenzar a asignar servicios"}),a.jsxs(jt,{to:"/dashboard/professionals/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors",children:[a.jsx(Rx,{className:"w-4 h-4"}),"Crear Profesional"]})]})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(f=>a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:f.name}),f.specialties&&f.specialties.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:f.specialties.map((p,x)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded",children:p},x))})]}),a.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.status==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f.status==="ACTIVE"?"Activo":"Inactivo"})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[f.email&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(eoe,{className:"w-4 h-4 text-gray-400"}),a.jsx("a",{href:`mailto:${f.email}`,className:"hover:text-blue-600 transition-colors",children:f.email})]}),f.phone&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(soe,{className:"w-4 h-4 text-gray-400"}),a.jsx("a",{href:`tel:${f.phone}`,className:"hover:text-blue-600 transition-colors",children:f.phone})]})]}),!f.email&&!f.phone&&a.jsx("p",{className:"text-sm text-gray-400 italic mt-2",children:"Sin informacin de contacto"}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>u(f),className:"w-full px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(o2,{className:"w-4 h-4"}),"Seleccionar horarios disponibles"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>e(`/dashboard/professionals/edit/${f.id}`),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(uoe,{className:"w-4 h-4"}),"Editar"]}),a.jsxs("button",{type:"button",onClick:()=>h(f.id,f.name),className:"flex-1 px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[a.jsx(moe,{className:"w-4 h-4"}),"Eliminar"]})]})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500 text-center",children:["Creado: ",f.created_at.toLocaleDateString()]})]})]},f.id))})]}),d&&a.jsx(Gge,{professional:d,isOpen:!!d,onClose:()=>u(null)})]})}function Qge({onSuccess:t,onCancel:e}){const{firestoreUser:n}=wt(),{handleAsyncError:s}=at(),{trackEvent:r}=So(),[i,l]=y.useState(!1),[d,u]=y.useState({name:"",email:"",phone:"",specialties:""}),[h,f]=y.useState({}),p=y.useRef(!0);if(y.useEffect(()=>()=>{p.current=!1},[]),!n?.company_id)return a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsx("p",{className:"text-gray-600",children:"Cargando..."})});const x=()=>{const j={};return d.name.trim()||(j.name="El nombre es obligatorio"),d.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)&&(j.email="Email invlido"),d.phone&&!/^\+?[\d\s-()]+$/.test(d.phone)&&(j.phone="Formato de telfono invlido"),f(j),Object.keys(j).length===0},b=async j=>{if(j.preventDefault(),!(!x()||!n?.company_id)){l(!0);try{await s(async()=>{const v=d.specialties.split(",").map(T=>T.trim()).filter(T=>T.length>0);await D8({companyId:n.company_id,name:d.name,email:d.email||void 0,phone:d.phone||void 0,specialties:v.length>0?v:void 0}),r("professional_created",{company_id:n.company_id,has_email:!!d.email,has_phone:!!d.phone,specialties_count:v.length}),J.success("Profesional creado exitosamente"),t?.()})}catch(v){Coe(v,_8.PRO_LIMIT_REACHED)?J.error("Has alcanzado el lmite de profesionales de tu plan. Actualiza para agregar ms.",{duration:5e3}):J.error("Error al crear profesional. Intenta nuevamente.")}finally{p.current&&l(!1)}}},_=(j,v)=>{u(T=>({...T,[j]:v})),h[j]&&f(T=>{const P={...T};return delete P[j],P})};return a.jsxs("form",{onSubmit:b,noValidate:!0,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Nuevo Profesional"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Nombre completo ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"name",value:d.name,onChange:j=>_("name",j.target.value),placeholder:"Dr. Juan Prez",className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${h.name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-invalid":!!h.name,"aria-describedby":h.name?"name-error":void 0}),h.name&&a.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",role:"alert",children:h.name})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email (opcional)"}),a.jsx("input",{type:"email",id:"email",value:d.email,onChange:j=>_("email",j.target.value),placeholder:"juan@ejemplo.cl",className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${h.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-invalid":!!h.email,"aria-describedby":h.email?"email-error":void 0}),h.email&&a.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",role:"alert",children:h.email})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Telfono (opcional)"}),a.jsx("input",{type:"tel",id:"phone",value:d.phone,onChange:j=>_("phone",j.target.value),placeholder:"+56912345678",className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${h.phone?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-invalid":!!h.phone,"aria-describedby":h.phone?"phone-error":void 0}),h.phone&&a.jsx("p",{id:"phone-error",className:"mt-1 text-sm text-red-600",role:"alert",children:h.phone})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"specialties",className:"block text-sm font-medium text-gray-700",children:"Especialidades (opcional)"}),a.jsx("input",{type:"text",id:"specialties",value:d.specialties,onChange:j=>_("specialties",j.target.value),placeholder:"Corte, Peinado, Manicure (separadas por comas)",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Separa mltiples especialidades con comas"})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[e&&a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2",children:[a.jsx(Qie,{className:`w-4 h-4 ${i?"animate-spin":"hidden"}`}),a.jsx("span",{children:i?"Creando...":"Crear Profesional"})]})]})]})}function Xge(){const t=qe(),e=()=>{t("/dashboard/professionals")},n=()=>{t("/dashboard")};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("button",{onClick:()=>t(-1),className:"mb-4 flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2 py-1","aria-label":"Volver",children:[a.jsx(cg,{className:"w-4 h-4"}),"Volver"]}),a.jsx(Qge,{onSuccess:e,onCancel:n})]})})}function Zge(){const t=qe(),{id:e}=Mr(),{firestoreUser:n}=wt(),{handleError:s}=at(),[r,i]=y.useState(!!e),[l,d]=y.useState(!1),[u,h]=y.useState({name:"",email:"",phone:"",avatar_url:"",specialties:[],status:"ACTIVE"}),[f,p]=y.useState("");y.useEffect(()=>{e&&x()},[e]);const x=async()=>{if(e)try{const v=await Xj(e);v&&h({name:v.name,email:v.email||"",phone:v.phone||"",avatar_url:v.avatar_url||"",specialties:v.specialties||[],status:v.status})}catch(v){s(v),t("/dashboard/professionals")}finally{i(!1)}},b=()=>{const v=f.trim();if(v){if(u.specialties.includes(v)){J.error("Esta especialidad ya est agregada");return}h({...u,specialties:[...u.specialties,v]}),p("")}},_=v=>{h({...u,specialties:u.specialties.filter((T,P)=>P!==v)})},j=async v=>{if(v.preventDefault(),!n?.company_id){J.error("Error de autenticacin");return}if(!u.name.trim()){J.error("El nombre es obligatorio");return}d(!0);try{const T={company_id:n.company_id,name:u.name.trim(),email:u.email.trim()||void 0,phone:u.phone.trim()||void 0,avatar_url:u.avatar_url.trim()||void 0,specialties:u.specialties.length>0?u.specialties:void 0,status:u.status};e?(await qoe(e,T),J.success("Profesional actualizado")):(await D8({companyId:n.company_id,name:u.name.trim(),email:u.email.trim()||void 0,phone:u.phone.trim()||void 0,avatar_url:u.avatar_url.trim()||void 0,specialties:u.specialties.length>0?u.specialties:void 0,status:u.status}),J.success("Profesional creado")),t("/dashboard/professionals")}catch(T){const P=T?.code||"",A=T?.message||"";A.startsWith("LIMIT_REACHED:")?J.error(A.replace("LIMIT_REACHED:","")):P==="PRO_LIMIT_REACHED"?J.error("Alcanzaste el lmite de profesionales de tu plan. Actualiza tu suscripcin para agregar ms."):s(T)}finally{d(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsx("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white shadow rounded-lg p-6",children:r?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx(yt,{size:"lg"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>t("/dashboard/professionals"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Editar profesional":"Nuevo profesional"})]}),a.jsxs("form",{onSubmit:j,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Informacin bsica"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),a.jsx("input",{type:"text",id:"name",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:u.name,onChange:v=>h({...u,name:v.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",id:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:u.email,onChange:v=>h({...u,email:v.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),a.jsx("input",{type:"tel",id:"phone",placeholder:"+56912345678",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:u.phone,onChange:v=>h({...u,phone:v.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"avatar_url",className:"block text-sm font-medium text-gray-700 mb-1",children:"URL de avatar (opcional)"}),a.jsx("input",{type:"url",id:"avatar_url",placeholder:"https://example.com/avatar.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:u.avatar_url,onChange:v=>h({...u,avatar_url:v.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),a.jsxs("select",{id:"status",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:u.status,onChange:v=>h({...u,status:v.target.value}),children:[a.jsx("option",{value:"ACTIVE",children:"Activo"}),a.jsx("option",{value:"INACTIVE",children:"Inactivo"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Los profesionales inactivos no aparecern en el sistema de citas"})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Especialidades"}),a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("input",{type:"text",placeholder:"Ej: Corte de cabello, Manicure, etc.",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:f,onChange:v=>p(v.target.value),onKeyPress:v=>{v.key==="Enter"&&(v.preventDefault(),b())}}),a.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium",children:"Agregar"})]}),u.specialties.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2",children:u.specialties.map((v,T)=>a.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[v,a.jsx("button",{type:"button",onClick:()=>_(T),className:"hover:text-blue-900","aria-label":`Eliminar ${v}`,children:""})]},T))})]}),a.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:l?"Guardando...":e?"Actualizar":"Crear profesional"}),a.jsx("button",{type:"button",onClick:()=>t("/dashboard/professionals"),className:"px-6 py-3 bg-red-600 text-white rounded-md hover:bg-red-700 font-medium",children:"Cancelar"})]})]})]})})})})}function Jge(){const t=qe(),{firestoreUser:e}=wt(),{handleError:n}=at(),[s,r]=y.useState(!0),[i,l]=y.useState([]),[d,u]=y.useState([]),[h,f]=y.useState([]),[p,x]=y.useState(null),[b,_]=y.useState(new Date);y.useEffect(()=>{j()},[]),y.useEffect(()=>{i.length>0&&v()},[i,b]);const j=async()=>{if(e?.company_id)try{const[C,M,L]=await Promise.all([S8(e.company_id),Qc(e.company_id),j8(e.company_id)]);l(C),u(M),f(L)}catch(C){n(C)}finally{r(!1)}},v=()=>{const C=jle(b),M=Nle(b),L=i.filter($=>Nce($.appointment_date,{start:C,end:M}));if(L.length===0){x({total:0,requested:0,confirmed:0,completed:0,cancelled:0,noShow:0,byService:{},byProfessional:{},byDay:{},averageDuration:0,completionRate:0,cancellationRate:0});return}const k={requested:L.filter($=>$.status===Be.REQUESTED).length,confirmed:L.filter($=>$.status===Be.CONFIRMED).length,completed:L.filter($=>$.status===Be.COMPLETED).length,cancelled:L.filter($=>$.status===Be.CANCELLED).length,noShow:L.filter($=>$.status===Be.NO_SHOW).length},R={},S={},O={};L.forEach($=>{R[$.service_id]=(R[$.service_id]||0)+1,S[$.professional_id]=(S[$.professional_id]||0)+1;const Q=Kn($.appointment_date,"yyyy-MM-dd");O[Q]=(O[Q]||0)+1});const I=k.completed>0?k.completed/(k.completed+k.noShow+k.cancelled)*100:0,F=k.cancelled>0?k.cancelled/L.length*100:0;x({total:L.length,requested:k.requested,confirmed:k.confirmed,completed:k.completed,cancelled:k.cancelled,noShow:k.noShow,byService:R,byProfessional:S,byDay:O,averageDuration:0,completionRate:I,cancellationRate:F})},T=C=>d.find(M=>M.id===C)?.name||"Desconocido",P=C=>h.find(M=>M.id===C)?.name||"Sin asignar",A=C=>{_(M=>Bce(M,-C))};return s?a.jsx(yt,{fullScreen:!0,size:"lg"}):p?a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>t("/dashboard"),className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100","aria-label":"Volver",children:""}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reporte de Citas"})]})}),a.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{type:"button",onClick:()=>A(-1),className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100",children:""}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Kn(b,"MMMM yyyy",{locale:_i})}),a.jsx("button",{type:"button",onClick:()=>A(1),className:"p-2 border border-gray-300 rounded-md hover:bg-gray-100",children:""})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx(ox,{title:"Total de citas",value:p.total,icon:"",color:"blue"}),a.jsx(ox,{title:"Completadas",value:p.completed,icon:"",color:"green",subtitle:`${p.completionRate.toFixed(1)}% tasa de xito`}),a.jsx(ox,{title:"Canceladas",value:p.cancelled,icon:"",color:"red",subtitle:`${p.cancellationRate.toFixed(1)}% tasa cancelacin`}),a.jsx(ox,{title:"No asistieron",value:p.noShow,icon:"",color:"yellow"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Por estado"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Xu,{label:"Solicitadas",count:p.requested,total:p.total,color:"yellow"}),a.jsx(Xu,{label:"Confirmadas",count:p.confirmed,total:p.total,color:"blue"}),a.jsx(Xu,{label:"Completadas",count:p.completed,total:p.total,color:"green"}),a.jsx(Xu,{label:"Canceladas",count:p.cancelled,total:p.total,color:"red"}),a.jsx(Xu,{label:"No asistieron",count:p.noShow,total:p.total,color:"gray"})]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Por servicio"}),a.jsxs("div",{className:"space-y-3",children:[Object.entries(p.byService).sort(([,C],[,M])=>M-C).map(([C,M])=>a.jsx(Xu,{label:T(C),count:M,total:p.total,color:"blue"},C)),Object.keys(p.byService).length===0&&a.jsx("p",{className:"text-gray-500 text-sm",children:"No hay datos"})]})]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Por profesional"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object.entries(p.byProfessional).sort(([,C],[,M])=>M-C).map(([C,M])=>a.jsxs("div",{className:"p-4 border-2 border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:P(C)}),a.jsx("span",{className:"text-2xl font-bold text-blue-600",children:M})]}),a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[(M/p.total*100).toFixed(1),"% del total"]})]},C)),Object.keys(p.byProfessional).length===0&&a.jsx("p",{className:"text-gray-500 text-sm col-span-2",children:"No hay datos"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>J.error("Exportacin prximamente disponible"),className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 font-medium",children:" Exportar a CSV"})})]})})}):a.jsx(yt,{fullScreen:!0,size:"lg"})}function ox({title:t,value:e,icon:n,color:s,subtitle:r}){const i={blue:"bg-blue-50 border-blue-200",green:"bg-green-50 border-green-200",red:"bg-red-50 border-red-200",yellow:"bg-yellow-50 border-yellow-200"};return a.jsxs("div",{className:`border-2 rounded-lg p-6 ${i[s]}`,children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"text-3xl",role:"img","aria-hidden":"true",children:n}),a.jsx("h3",{className:"text-sm font-medium text-gray-600",children:t})]}),a.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:e}),r&&a.jsx("div",{className:"text-sm text-gray-600",children:r})]})}function Xu({label:t,count:e,total:n,color:s}){const r=n>0?e/n*100:0,i={blue:"bg-blue-600",green:"bg-green-600",red:"bg-red-600",yellow:"bg-yellow-600",gray:"bg-gray-600"};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:t}),a.jsxs("span",{className:"text-gray-600",children:[e," (",r.toFixed(1),"%)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`${i[s]} h-2 rounded-full transition-all duration-300`,style:{width:`${r}%`}})})]})}function e0e({company:t,appearance:e,theme:n}){const r=kr(t)==="barberias";return a.jsx("header",{id:"navigation",className:"w-full py-6 sm:py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 sm:px-8 lg:px-8",style:{color:n.textColor,fontFamily:n.fontBody},children:!e?.logo_url&&!r&&a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-2 sm:mb-3",style:{color:n.titleColor,fontFamily:n.fontTitle},children:t.name}),t.industry&&a.jsx("p",{className:"text-lg sm:text-xl md:text-2xl",style:{color:n.subtitleColor,fontFamily:n.fontBody},children:t.industry})]})})})}function X7({company:t,theme:e,isCarousel:n=!1}){return!t.description||t.show_description===!1?null:n?a.jsx("div",{className:"w-full h-full flex flex-col rounded-3xl sm:rounded-[2rem] p-6 sm:p-8 md:p-10 lg:p-12 xl:p-16 shadow-2xl overflow-hidden border",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:`${e.buttonColor}20`,boxShadow:`0 10px 40px ${e.buttonColor}12, 0 2px 8px rgba(0,0,0,0.1)`},children:a.jsxs("div",{className:"flex-1 flex flex-col min-h-0 space-y-4 sm:space-y-5 md:space-y-6 lg:space-y-8",children:[a.jsxs("h2",{className:"font-extrabold text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl flex-shrink-0 leading-tight",style:{color:e.titleColor,fontFamily:e.fontTitle},children:[" Acerca de ",t.name]}),a.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:a.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl leading-relaxed sm:leading-loose md:leading-loose whitespace-pre-line break-words hyphens-auto",style:{color:e.textColor,opacity:.9},children:t.description})})]})}):a.jsx("div",{className:"mb-8 sm:mb-10 rounded-2xl sm:rounded-3xl p-6 sm:p-8 md:p-10 lg:p-12 shadow-xl overflow-hidden border",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:`${e.buttonColor}15`,boxShadow:`0 8px 24px ${e.buttonColor}08, 0 2px 6px rgba(0,0,0,0.1)`},children:a.jsxs("div",{className:"space-y-4 sm:space-y-5 md:space-y-6",children:[a.jsxs("h2",{className:"font-extrabold text-xl sm:text-2xl md:text-3xl lg:text-4xl mb-3 sm:mb-4 md:mb-5 flex-shrink-0 leading-tight",style:{color:e.titleColor,fontFamily:e.fontTitle},children:[" Acerca de ",t.name]}),a.jsx("div",{className:"overflow-hidden",children:a.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl leading-relaxed sm:leading-loose md:leading-loose whitespace-pre-line break-words hyphens-auto line-clamp-none",style:{color:e.textColor,opacity:.9},children:t.description})})]})})}function t0e({isOpen:t,onClose:e,children:n}){const s=y.useRef(null),r=y.useRef(null);return y.useEffect(()=>(t?(r.current=document.activeElement,setTimeout(()=>{s.current?.focus()},100),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",r.current&&r.current.focus()),()=>{document.body.style.overflow="unset"}),[t]),y.useEffect(()=>{const i=l=>{l.key==="Escape"&&t&&e()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t,e]),a.jsx(Ci,{children:t&&a.jsxs(a.Fragment,{children:[a.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e,role:"presentation","aria-hidden":"true"}),a.jsx(ke.div,{ref:s,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed right-0 top-0 h-full w-full sm:w-96 bg-white shadow-2xl z-50 overflow-hidden flex flex-col",role:"dialog","aria-modal":"true","aria-label":"Carrito de compras",tabIndex:-1,children:n})]})})}function n0e({count:t}){return a.jsx(Ci,{mode:"wait",children:t>0&&a.jsx(ke.span,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{type:"spring",stiffness:500,damping:15},className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:t},t)})}function s0e({theme:t,onWhatsApp:e,onOpenCart:n,cartItems:s=0,showCartCta:r,socialLinks:i}){const{t:l}=ln(),d=i?.facebook?.trim(),u=i?.instagram?.trim(),h=!!(d||u);return a.jsxs("div",{className:"flex flex-col items-center w-full gap-4 sm:gap-5",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-center gap-5 sm:gap-6 items-center w-full",children:[a.jsxs(Mt,{onClick:e,style:{backgroundColor:"#25D366",color:"#ffffff",fontFamily:t.fontButton},className:"px-8 sm:px-10 py-4 sm:py-5 rounded-xl font-bold hover:opacity-90 w-full sm:w-auto min-w-[280px] sm:min-w-[300px] text-lg sm:text-xl shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center gap-3 active:scale-[0.98]",ariaLabel:l("common.contactWhatsApp"),children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 sm:h-8 sm:w-8",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M20.52 3.48A11.82 11.82 0 0 0 12.07 0 11.86 11.86 0 0 0 1.07 12.17 11.7 11.7 0 0 0 3.5 20.5l-1 3.48 3.6-.94a11.93 11.93 0 0 0 5.94 1.52h.05A11.83 11.83 0 0 0 24 12.07 11.8 11.8 0 0 0 20.52 3.48ZM12.1 21a9.9 9.9 0 0 1-5.05-1.38l-.36-.22-2.14.55.57-2.08-.24-.34a9.83 9.83 0 0 1-1.7-5.54A10.08 10.08 0 0 1 12.06 2a9.92 9.92 0 0 1 7.07 2.93 9.92 9.92 0 0 1 2.92 7.12A10 10 0 0 1 12.1 21Zm5.47-7.3c-.3-.15-1.77-.87-2.04-.97s-.47-.15-.67.15-.77.97-.94 1.17-.35.22-.64.07A8.14 8.14 0 0 1 10 11.8a9.18 9.18 0 0 1-1.65-2 .55.55 0 0 1 .13-.76c.13-.14.3-.37.45-.55a2.54 2.54 0 0 0 .3-.52.67.67 0 0 0-.03-.63c-.08-.15-.67-1.62-.92-2.22-.24-.58-.5-.5-.67-.51H6.8a1.3 1.3 0 0 0-.94.44 3.93 3.93 0 0 0-1.24 2.9c0 1.7 1.26 3.34 1.43 3.57.17.22 2.47 3.78 5.98 5.13a19.4 19.4 0 0 0 2.02.6 4.86 4.86 0 0 0 2.25.14c.69-.1 2.1-.86 2.4-1.7a3 3 0 0 0 .21-1.7c-.09-.14-.27-.22-.57-.37Z"})}),l("common.contactWhatsApp")]}),r&&n&&a.jsxs(Mt,{onClick:n,className:"px-8 sm:px-10 py-4 sm:py-5 text-blue-700 border-2 border-blue-400 rounded-xl font-bold hover:bg-blue-50 active:bg-blue-100 w-full sm:w-auto min-w-[280px] sm:min-w-[300px] relative text-lg sm:text-xl shadow-xl hover:shadow-2xl transition-all duration-300 active:scale-[0.98] flex items-center justify-center gap-3",ariaLabel:l("common.viewCartWithItems",{count:s}),children:[a.jsx("span",{className:"bg-white rounded-full p-1.5 flex items-center justify-center",children:a.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6",fill:"none",stroke:"#000000",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),l("common.viewCartWithItems",{count:s}),a.jsx(n0e,{count:s})]})]}),h&&a.jsxs("div",{className:"flex items-center justify-center gap-4 h-12",children:[d&&a.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"h-12 w-12 rounded-full bg-[#1877F2] text-white flex items-center justify-center shadow-lg hover:opacity-90 transition flex-shrink-0","aria-label":"Facebook",children:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-6 w-6",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M13.5 8.5V7.2c0-.6.4-1 1-1h1V4h-1.7C11.9 4 11 5.2 11 6.9V8.5H9v2.5h2V20h2.5v-9H15l.4-2.5h-1.9z"})})}),u&&a.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"h-12 w-12 rounded-full text-white flex items-center justify-center shadow-lg hover:opacity-90 transition flex-shrink-0",style:{background:"linear-gradient(135deg, #f58529 0%, #dd2a7b 35%, #8134af 70%, #515bd4 100%)"},"aria-label":"Instagram",children:a.jsx("svg",{viewBox:"0 0 24 24",className:"h-6 w-6",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})})]})]})}function Z7({isOpen:t,cart:e,orderForm:n,orderChannel:s,menuQrTableCount:r=0,deliveryEnabled:i=!1,fulfillmentConfig:l,onClose:d,onQuantityChange:u,onRemove:h,onFormChange:f,onSubmit:p}){const{t:x}=ln(),b=e.reduce((I,F)=>I+F.quantity,0),_=s==="PUBLIC",j=s==="MENU",v=Math.max(0,Math.min(40,Math.floor(r))),T=n.delivery_type||(_?"PICKUP":j?"TABLE":void 0),P=e.some(I=>I.product.hide_price===!0),A=P?0:e.reduce((I,F)=>{const $=F.product.price||0;return I+$*F.quantity},0),C=l?.delivery_fee&&T==="DELIVERY"?l.delivery_fee:0,M=A+C,L=l?.enabled&&l?.modes&&l.modes.length>0,k=_||L||i,R=!l?.minimum_order||A>=l.minimum_order,S=n.payment_method&&n.payment_method!=="CASH"&&n.payment_method!=="TRANSFER"&&n.payment_method!=="CARD"&&n.payment_method!=="OTHER",O=n.payment_method==="OTHER"||S;return a.jsx(t0e,{isOpen:t,onClose:d,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:x("common.cart")}),a.jsxs("h3",{className:"text-xl font-bold",children:[x("common.products")," (",b,")"]})]}),a.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 text-3xl leading-none","aria-label":x("common.closeCart"),children:""})]}),a.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:e.length===0?a.jsx("p",{className:"text-gray-500 text-center py-8",children:x("common.cartEmpty")}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4 mb-6",children:e.map(I=>a.jsxs("div",{className:"flex items-center gap-4 border-b pb-4",children:[I.product.image_url?a.jsx("img",{src:I.product.image_url,alt:`${I.product.name} en el carrito`,className:"w-16 h-16 object-cover rounded",loading:"lazy"}):a.jsx("div",{className:"w-16 h-16 rounded bg-gray-100 flex items-center justify-center text-gray-400 text-xs",children:"Sin imagen"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold",children:I.product.name}),!I.product.hide_price&&a.jsxs("p",{className:"text-sm text-gray-600",children:["$",I.product.price.toLocaleString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>u(I.product.id,I.quantity-1),className:"px-2 py-1 bg-gray-200 rounded","aria-label":`Reducir cantidad de ${I.product.name}`,children:"-"}),a.jsx("span",{"aria-label":`Cantidad: ${I.quantity}`,children:I.quantity}),a.jsx("button",{onClick:()=>u(I.product.id,I.quantity+1),className:"px-2 py-1 bg-gray-200 rounded","aria-label":`Aumentar cantidad de ${I.product.name}`,children:"+"})]}),a.jsx("button",{onClick:()=>h(I.product.id),className:"text-red-600 hover:text-red-800","aria-label":`Eliminar ${I.product.name} del carrito`,children:""})]},I.product.id))}),!P&&a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[a.jsxs("span",{children:[x("common.total"),":"]}),a.jsxs("span",{children:["$",M.toLocaleString()]})]}),C>0&&a.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[a.jsx("span",{children:x("publicPage.restaurantsLayout.fulfillment.deliveryFee",{fee:C.toLocaleString()})}),a.jsxs("span",{children:["+$",C.toLocaleString()]})]}),l?.minimum_order&&a.jsx("p",{className:"text-xs text-gray-500",children:x("publicPage.restaurantsLayout.fulfillment.minimumOrder",{amount:l.minimum_order.toLocaleString()})}),l?.minimum_order&&!R&&a.jsx("p",{className:"text-sm font-semibold text-red-600",children:x("publicPage.restaurantsLayout.fulfillment.minimumOrderError",{amount:l.minimum_order.toLocaleString()})})]})}),a.jsxs("div",{className:"space-y-4",children:[_&&a.jsxs("div",{className:"border-t pt-4 mt-2 space-y-3 bg-blue-50 -mx-4 px-4 py-4 rounded-lg",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-900 block",children:[x("common.deliveryType")," *"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsx("button",{type:"button",onClick:()=>f("delivery_type","DELIVERY"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="DELIVERY"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:x("common.delivery")})]})}),a.jsx("button",{type:"button",onClick:()=>f("delivery_type","PICKUP"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="PICKUP"||!T?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:x("common.pickup")})]})})]})]}),j&&a.jsxs("div",{className:"border-t pt-4 mt-2 space-y-3 bg-blue-50 -mx-4 px-4 py-4 rounded-lg",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-900 block",children:[x("common.deliveryType")," *"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsx("button",{type:"button",onClick:()=>f("delivery_type","TABLE"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="TABLE"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:"Consumo en el local"})]})}),a.jsx("button",{type:"button",onClick:()=>f("delivery_type","PICKUP"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="PICKUP"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:"Para llevar"})]})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"cart-client-name",className:"block text-sm font-medium text-gray-700 mb-1",children:[x("common.name"),_?" *":""]}),a.jsx("input",{id:"cart-client-name",name:"client_name",type:"text",required:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:n.client_name,onChange:I=>f("client_name",I.target.value)})]}),j&&v>0&&T==="TABLE"&&a.jsxs("div",{className:"border border-amber-200 rounded-lg p-3 bg-amber-50",children:[a.jsx("label",{className:"block text-sm font-semibold text-amber-900 mb-2",children:"Nmero de mesa *"}),a.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-5 gap-2",children:Array.from({length:v},(I,F)=>{const $=F+1,Q=`Mesa ${$}`,G=n.table_number===Q;return a.jsx("button",{type:"button",onClick:()=>f("table_number",Q),className:`aspect-square rounded-md border-2 text-sm font-semibold transition flex items-center justify-center ${G?"bg-amber-600 text-white border-amber-600 shadow-md":"bg-white text-amber-900 border-amber-300 hover:border-amber-500"}`,"aria-pressed":G,children:$},Q)})}),a.jsx("p",{className:"text-xs text-amber-800 mt-2",children:"Selecciona tu mesa para continuar."})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"cart-client-whatsapp",className:"block text-sm font-medium text-gray-700 mb-1",children:[x("common.whatsapp"),_?" *":""]}),a.jsx("input",{id:"cart-client-whatsapp",name:"client_whatsapp",type:"tel",required:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:n.client_whatsapp,onChange:I=>f("client_whatsapp",I.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cart-client-comment",className:"block text-sm font-medium text-gray-700 mb-1",children:x("common.comment")}),a.jsx("textarea",{id:"cart-client-comment",name:"client_comment",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",value:n.client_comment,onChange:I=>f("client_comment",I.target.value)})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[" ",x("publicPage.orderForm.paymentMethodLabel")]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[a.jsxs("button",{type:"button",onClick:()=>f("payment_method","CASH"),className:`px-3 py-2 rounded-lg border-2 transition text-sm font-medium ${n.payment_method==="CASH"?"bg-green-600 text-white border-green-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-green-400"}`,children:[" ",x("publicPage.orderForm.paymentMethodCash")]}),a.jsxs("button",{type:"button",onClick:()=>f("payment_method","TRANSFER"),className:`px-3 py-2 rounded-lg border-2 transition text-sm font-medium ${n.payment_method==="TRANSFER"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:[" ",x("publicPage.orderForm.paymentMethodTransfer")]}),a.jsxs("button",{type:"button",onClick:()=>f("payment_method","CARD"),className:`px-3 py-2 rounded-lg border-2 transition text-sm font-medium ${n.payment_method==="CARD"?"bg-purple-600 text-white border-purple-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-purple-400"}`,children:[" ",x("publicPage.orderForm.paymentMethodCard")]}),a.jsxs("button",{type:"button",onClick:()=>f("payment_method","OTHER"),className:`px-3 py-2 rounded-lg border-2 transition text-sm font-medium ${n.payment_method==="OTHER"?"bg-orange-600 text-white border-orange-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-orange-400"}`,children:[" ",x("publicPage.orderForm.paymentMethodOther")]})]}),O&&a.jsx("input",{id:"cart-payment-method-other",name:"payment_method_other",type:"text",placeholder:x("publicPage.orderForm.paymentMethodOtherPlaceholder"),className:"w-full px-3 py-2 border-2 border-orange-300 rounded-md focus:border-orange-500 focus:ring-2 focus:ring-orange-200",value:S?n.payment_method:"",onChange:I=>{const F=I.target.value.trim();F?f("payment_method",F):f("payment_method","OTHER")}})]}),!_&&!j&&k&&L&&a.jsxs("div",{className:"border-t pt-4 mt-4 space-y-4 bg-blue-50 -mx-4 px-4 py-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-900 block",children:[x("publicPage.restaurantsLayout.fulfillment.selectMode")," *"]}),a.jsxs("div",{className:`grid gap-3 ${(l?.modes?.length||0)===3?"grid-cols-3":(l?.modes?.length||0)===2?"grid-cols-2":"grid-cols-1"}`,children:[l?.modes?.includes("DELIVERY")&&a.jsx("button",{type:"button",onClick:()=>f("delivery_type","DELIVERY"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="DELIVERY"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:x("publicPage.restaurantsLayout.fulfillment.delivery")}),l.delivery_fee&&a.jsxs("div",{className:"text-xs mt-1 opacity-75",children:["+$",l.delivery_fee.toLocaleString()]})]})}),l?.modes?.includes("TAKEAWAY")&&a.jsx("button",{type:"button",onClick:()=>f("delivery_type","PICKUP"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="PICKUP"||!T&&!l?.modes?.includes("DELIVERY")?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:x("publicPage.restaurantsLayout.fulfillment.takeaway")})]})}),l?.modes?.includes("DINE_IN")&&a.jsx("button",{type:"button",onClick:()=>f("delivery_type","TABLE"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="TABLE"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:x("publicPage.restaurantsLayout.fulfillment.dineIn")})]})})]})]}),T==="DELIVERY"&&a.jsxs("div",{className:"space-y-4 pt-3 border-t border-blue-200",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"cart-delivery-address",className:"block text-sm font-bold text-gray-900 mb-2",children:[" ",x("publicPage.restaurantsLayout.fulfillment.deliveryAddress")," *"]}),a.jsx("textarea",{id:"cart-delivery-address",name:"delivery_address",rows:2,required:!0,placeholder:x("publicPage.restaurantsLayout.fulfillment.deliveryAddressPlaceholder"),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_address||"",onChange:I=>f("delivery_address",I.target.value)})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"cart-delivery-notes",className:"block text-sm font-bold text-gray-900 mb-2",children:[" ",x("common.deliveryNotes")," (",x("common.optional"),")"]}),a.jsx("textarea",{id:"cart-delivery-notes",name:"delivery_notes",rows:2,placeholder:"Ej: Timbre en el 2do piso, horario preferido entre 14:00 y 18:00",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_notes||"",onChange:I=>f("delivery_notes",I.target.value)})]})]})]}),!_&&!j&&k&&!L&&i&&a.jsxs("div",{className:"border-t pt-4 mt-4 space-y-4 bg-blue-50 -mx-4 px-4 py-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("span",{className:"text-sm font-bold text-gray-900 block",children:[x("common.deliveryType")," *"]}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3",children:[a.jsx("button",{type:"button",onClick:()=>f("delivery_type","PICKUP"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="PICKUP"||!T?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:x("common.pickup")})]})}),a.jsx("button",{type:"button",onClick:()=>f("delivery_type","TABLE"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="TABLE"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:x("publicPage.restaurantsLayout.fulfillment.dineIn")})]})}),a.jsx("button",{type:"button",onClick:()=>f("delivery_type","DELIVERY"),className:`px-4 py-3 rounded-lg border-2 transition font-medium ${T==="DELIVERY"?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-700 border-gray-300 hover:border-blue-400"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-lg mb-1",children:""}),a.jsx("div",{className:"text-sm",children:x("common.delivery")})]})})]})]}),T==="DELIVERY"&&a.jsxs("div",{className:"space-y-4 pt-3 border-t border-blue-200",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"cart-delivery-address-fallback",className:"block text-sm font-bold text-gray-900 mb-2",children:[" ",x("common.deliveryAddress")," *"]}),a.jsx("textarea",{id:"cart-delivery-address-fallback",name:"delivery_address",rows:2,required:!0,placeholder:"Ej: Av. Principal 123, Dpto 45, Comuna",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_address||"",onChange:I=>f("delivery_address",I.target.value)})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"cart-delivery-notes-fallback",className:"block text-sm font-bold text-gray-900 mb-2",children:[" ",x("common.deliveryNotes")," (",x("common.optional"),")"]}),a.jsx("textarea",{id:"cart-delivery-notes-fallback",name:"delivery_notes",rows:2,placeholder:"Ej: Timbre en el 2do piso, horario preferido entre 14:00 y 18:00",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_notes||"",onChange:I=>f("delivery_notes",I.target.value)})]})]})]}),_&&T==="DELIVERY"&&a.jsxs("div",{className:"border-t pt-4 mt-4 space-y-4 bg-blue-50 -mx-4 px-4 py-4 rounded-lg",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"cart-delivery-address-public",className:"block text-sm font-bold text-gray-900 mb-2",children:[" ",x("common.deliveryAddress")," *"]}),a.jsx("textarea",{id:"cart-delivery-address-public",name:"delivery_address",rows:2,required:!0,placeholder:x("publicPage.restaurantsLayout.fulfillment.deliveryAddressPlaceholder"),className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_address||"",onChange:I=>f("delivery_address",I.target.value)})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"cart-delivery-notes-public",className:"block text-sm font-bold text-gray-900 mb-2",children:[" ",x("common.deliveryNotes")," (",x("common.optional"),")"]}),a.jsx("textarea",{id:"cart-delivery-notes-public",name:"delivery_notes",rows:2,placeholder:"Ej: Timbre en el 2do piso, horario preferido entre 14:00 y 18:00",className:"w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:border-blue-500 focus:ring-2 focus:ring-blue-200",value:n.delivery_notes||"",onChange:I=>f("delivery_notes",I.target.value)})]})]})]})]})}),a.jsx("div",{className:"px-6 py-4 border-t bg-white",children:e.length===0?a.jsx(Mt,{onClick:d,className:"w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:x("common.continueShopping")}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx(Mt,{onClick:p,disabled:!R,style:{backgroundColor:"#2563eb",color:"#ffffff"},className:"px-4 py-3 rounded-md hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed",children:"Ingresar pedido"}),a.jsx(Mt,{onClick:d,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:x("common.continueShopping")})]})})]})})}function r0e(t){let e=document.getElementById(t);if(e||t==="section-products"&&(e=document.getElementById("menu-section")),e){const r=e.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:r,behavior:"smooth"})}}function a0e({isOpen:t,onClose:e,sections:n,theme:s,appearance:r}){const{t:i}=ln(),l=r?.card_color||s.cardColor,d=r?.menu_button_color||r?.button_color||s.buttonColor,u=r?.menu_button_text_color||r?.button_text_color||s.buttonTextColor,h=r?.menu_title_color||r?.title_color||s.titleColor,f=x=>{const b=x.scrollToId||`section-${x.id}`;r0e(b),setTimeout(()=>{e()},100)},p=()=>{e()};return a.jsx(Ai,{isOpen:t,onClose:p,className:"p-0 relative max-w-full w-full overflow-hidden sm:max-h-[90vh] sm:rounded-lg",children:a.jsxs("div",{className:"flex flex-col",style:{backgroundColor:l},children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",style:{borderColor:`${d}20`,backgroundColor:l},children:[a.jsx("h2",{className:"text-lg font-semibold",style:{color:h},children:(()=>{const x=i("publicPage.mobileMenu.title");return x==="publicPage.mobileMenu.title"?"Men":x})()}),a.jsx("button",{type:"button",onClick:p,className:"p-2 rounded-full transition hover:opacity-80",style:{color:d},"aria-label":"Cerrar",children:a.jsx(Pp,{className:"w-6 h-6"})})]}),a.jsx("div",{style:{backgroundColor:l},children:a.jsx("div",{className:"p-4 space-y-2",children:n.map(x=>a.jsxs("button",{type:"button",onClick:()=>f(x),className:"w-full flex items-center gap-3 p-4 rounded-lg hover:opacity-90 transition text-left",style:{backgroundColor:d,color:u},children:[x.icon&&a.jsx("span",{className:"text-2xl",children:x.icon}),a.jsx("span",{className:"font-semibold",children:x.label}),a.jsx("svg",{className:"w-5 h-5 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},x.id))})})]})})}function i0e({children:t,theme:e}){const[n,s]=y.useState(0),[r,i]=y.useState(!1),[l,d]=y.useState(!0),u=y.useRef(null),h=y.useRef([]),f=fN(0);hY(f,{damping:30,stiffness:300});const x=y.Children.toArray(t).filter(Boolean),b=x.length;y.useEffect(()=>{const T=u.current;if(!T)return;const P=()=>{const{scrollLeft:C,scrollWidth:M,clientWidth:L}=T;i(C>0),d(C<M-L-10)};P(),T.addEventListener("scroll",P);const A=new ResizeObserver(P);return A.observe(T),()=>{T.removeEventListener("scroll",P),A.disconnect()}},[x.length]);const _=T=>{const P=u.current,A=h.current[T];if(!P||!A)return;const C=P.getBoundingClientRect(),M=A.getBoundingClientRect(),L=P.scrollLeft+(M.left-C.left)-C.width/2+M.width/2;P.scrollTo({left:L,behavior:"smooth"}),s(T)},j=T=>{const P=u.current;if(!P)return;const A=P.clientWidth*.8,C=P.scrollLeft+(T==="left"?-A:A);P.scrollTo({left:C,behavior:"smooth"})},v=()=>{const T=u.current;if(!T)return;const{scrollLeft:P,scrollWidth:A,clientWidth:C}=T;f.set(P);let M=0,L=1/0;h.current.forEach((k,R)=>{if(!k)return;const S=k.getBoundingClientRect(),O=T.getBoundingClientRect(),I=S.left+S.width/2,F=O.left+O.width/2,$=Math.abs(I-F);$<L&&(L=$,M=R)}),s(M),i(P>0),d(P<A-C-10)};return a.jsxs("div",{className:"relative w-full",children:[r&&a.jsx(ke.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>j("left"),className:"hidden md:flex absolute left-4 top-1/2 -translate-y-1/2 z-30 h-12 w-12 items-center justify-center rounded-full shadow-lg backdrop-blur-sm bg-white/90 hover:bg-white transition-colors",style:{color:e.buttonColor},"aria-label":"Deslizar hacia la izquierda",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l&&a.jsx(ke.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>j("right"),className:"hidden md:flex absolute right-4 top-1/2 -translate-y-1/2 z-30 h-12 w-12 items-center justify-center rounded-full shadow-lg backdrop-blur-sm bg-white/90 hover:bg-white transition-colors",style:{color:e.buttonColor},"aria-label":"Deslizar hacia la derecha",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),a.jsx("div",{ref:u,onScroll:v,className:"flex gap-4 md:gap-6 overflow-x-auto snap-x snap-mandatory pb-6 scrollbar-hide scroll-smooth px-2 md:px-0",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:x.map((T,P)=>a.jsx(ke.div,{ref:A=>{h.current[P]=A},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:P*.1},whileHover:{scale:1.02,y:-4},className:"snap-start min-w-[80vw] sm:min-w-[65vw] md:min-w-[42vw] lg:min-w-[34vw] xl:min-w-[28vw] 2xl:min-w-[24vw] max-w-[80vw] sm:max-w-[65vw] md:max-w-[42vw] lg:max-w-[34vw] xl:max-w-[28vw] 2xl:max-w-[24vw] flex-shrink-0",children:a.jsx("div",{className:"h-full aspect-square bg-white/70 dark:bg-gray-900/70 backdrop-blur-md rounded-xl shadow-lg p-3 sm:p-4 md:p-5 transition-all duration-300 hover:shadow-xl border border-white/30 dark:border-gray-700/30 hover:border-white/50 dark:hover:border-gray-600/50 overflow-hidden",children:a.jsx("div",{className:"h-full overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:T})})},P))}),b>1&&a.jsx("div",{className:"flex justify-center items-center gap-2 mt-6",children:x.map((T,P)=>a.jsx("button",{onClick:()=>_(P),className:`transition-all duration-300 rounded-full ${P===n?"w-8 h-3":"w-3 h-3 opacity-40 hover:opacity-60"}`,style:{backgroundColor:P===n?e.buttonColor:e.subtitleColor},"aria-label":`Ir a seccin ${P+1}`},P))}),l&&a.jsx(ke.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:2,repeat:1/0},className:"md:hidden absolute right-4 top-1/2 -translate-y-1/2 z-20 pointer-events-none",children:a.jsxs("div",{className:"flex flex-col items-center gap-1 text-gray-400",children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),a.jsx("span",{className:"text-xs font-medium",children:"Desliza"})]})})]})}function J7({company:t,theme:e,isCarousel:n=!1}){return!t.mission&&!t.vision||t.show_mission_vision===!1?null:n?a.jsx("div",{className:"w-full h-full flex flex-col rounded-2xl sm:rounded-3xl p-4 sm:p-6 md:p-8 lg:p-10 xl:p-12 shadow-lg overflow-hidden",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:a.jsxs("div",{className:"flex-1 flex flex-col min-h-0 space-y-4 sm:space-y-5 md:space-y-6 lg:space-y-8 overflow-y-auto",children:[t.mission&&a.jsxs("div",{className:"flex-shrink-0 space-y-2 sm:space-y-3 md:space-y-4",children:[a.jsx("h2",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Misin"}),a.jsx("div",{className:"overflow-hidden",children:a.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed sm:leading-loose md:leading-loose break-words hyphens-auto",style:{color:e.textColor},children:t.mission})})]}),t.vision&&a.jsxs("div",{className:"flex-shrink-0 space-y-2 sm:space-y-3 md:space-y-4",children:[a.jsx("h2",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Visin"}),a.jsx("div",{className:"overflow-hidden",children:a.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-relaxed sm:leading-loose md:leading-loose break-words hyphens-auto",style:{color:e.textColor},children:t.vision})})]})]})}):a.jsxs("div",{className:"mb-4 sm:mb-6 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm sm:shadow-md overflow-hidden",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[t.mission&&a.jsxs("div",{className:"space-y-1.5 sm:space-y-2 mb-3 sm:mb-4 md:mb-5 last:mb-0",children:[a.jsx("h2",{className:"font-semibold text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl mb-1.5 sm:mb-2 md:mb-2.5 flex-shrink-0",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Misin"}),a.jsx("div",{className:"overflow-hidden",children:a.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-base leading-relaxed sm:leading-relaxed md:leading-loose break-words hyphens-auto",style:{color:e.textColor},children:t.mission})})]}),t.vision&&a.jsxs("div",{className:"space-y-1.5 sm:space-y-2",children:[a.jsx("h2",{className:"font-semibold text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl mb-1.5 sm:mb-2 md:mb-2.5 flex-shrink-0",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Visin"}),a.jsx("div",{className:"overflow-hidden",children:a.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-base leading-relaxed sm:leading-relaxed md:leading-loose break-words hyphens-auto",style:{color:e.textColor},children:t.vision})})]})]})}const o0e=Object.freeze(Object.defineProperty({__proto__:null,MissionVisionCard:J7},Symbol.toStringTag,{value:"Module"}));function eV({company:t,theme:e,isCarousel:n=!1}){const s=t.weekday_days?.length||t.weekend_days?.length;return t.business_type!==an.PRODUCTS||!s?null:n?a.jsxs("div",{className:"w-full h-full flex flex-col justify-center rounded-2xl sm:rounded-3xl p-6 sm:p-8 md:p-10 lg:p-12 shadow-lg",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[a.jsx("h2",{className:"font-bold text-2xl sm:text-3xl md:text-4xl lg:text-5xl mb-6 sm:mb-8 md:mb-10",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Horario de atencin"}),a.jsxs("div",{className:"space-y-6 sm:space-y-8 md:space-y-10 flex-1 flex flex-col justify-center",children:[t.weekday_days?.length?a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl mb-3 sm:mb-4 md:mb-5",style:{color:e.subtitleColor,fontFamily:e.fontTitle},children:"Semana"}),a.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl leading-relaxed sm:leading-loose",children:[t.weekday_days.map(r=>ax[r]||r).join(", ")," ",t.weekday_open_time&&t.weekday_close_time?` ${t.weekday_open_time} - ${t.weekday_close_time}`:""]})]}):null,t.weekend_days?.length?a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-xl sm:text-2xl md:text-3xl lg:text-4xl mb-3 sm:mb-4 md:mb-5",style:{color:e.subtitleColor,fontFamily:e.fontTitle},children:"Fin de semana"}),a.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl leading-relaxed sm:leading-loose",children:[t.weekend_days.map(r=>ax[r]||r).join(", ")," ",t.weekend_open_time&&t.weekend_close_time?` ${t.weekend_open_time} - ${t.weekend_close_time}`:""]})]}):null]})]}):a.jsxs("div",{className:"mb-4 sm:mb-6 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm sm:shadow-md",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[a.jsx("h2",{className:"font-semibold text-sm sm:text-base md:text-lg lg:text-xl mb-3 sm:mb-4",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Horario de atencin"}),a.jsxs("div",{className:"space-y-2.5 sm:space-y-3",children:[t.weekday_days?.length?a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm md:text-base mb-1.5 sm:mb-2",style:{color:e.subtitleColor,fontFamily:e.fontTitle},children:"Semana"}),a.jsxs("p",{className:"text-xs sm:text-sm md:text-base leading-relaxed sm:leading-loose",children:[t.weekday_days.map(r=>ax[r]||r).join(", ")," ",t.weekday_open_time&&t.weekday_close_time?` ${t.weekday_open_time} - ${t.weekday_close_time}`:""]})]}):null,t.weekend_days?.length?a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm md:text-base mb-1.5 sm:mb-2",style:{color:e.subtitleColor,fontFamily:e.fontTitle},children:"Fin de semana"}),a.jsxs("p",{className:"text-xs sm:text-sm md:text-base leading-relaxed sm:leading-loose",children:[t.weekend_days.map(r=>ax[r]||r).join(", ")," ",t.weekend_open_time&&t.weekend_close_time?` ${t.weekend_open_time} - ${t.weekend_close_time}`:""]})]}):null]})]})}const l0e=Object.freeze(Object.defineProperty({__proto__:null,OperatingHoursCard:eV},Symbol.toStringTag,{value:"Module"}));function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function c0e(t,e){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(Op(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d0e(t){var e=c0e(t,"string");return Op(e)=="symbol"?e:e+""}function pe(t,e,n){return(e=d0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tV(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A1,OM;function u0e(){if(OM)return A1;OM=1;var t=function(n,s,r,i,l,d,u,h){if(!n){var f;if(s===void 0)f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[r,i,l,d,u,h],x=0;f=new Error(s.replace(/%s/g,function(){return p[x++]})),f.name="Invariant Violation"}throw f.framesToPop=1,f}};return A1=t,A1}var h0e=u0e(),Gs=tV(h0e),Tt=y.createContext(null);function m0e(){Gs(!!y.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=y.useContext(Tt);return Gs(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function f0e(t,e,n){return Object.keys(t).reduce(function(r,i){return e(r,t[i],i)},n)}function p0e(t,e){Object.keys(t).forEach(n=>e(t[n],n))}function g0e(t,e,n,s){var r={},i=(l,d)=>{var u=n[d];u!==e[d]&&(r[d]=u,l(s,u))};return p0e(t,i),r}function x0e(t,e,n){var s=f0e(n,function(i,l,d){return typeof t[d]=="function"&&i.push(google.maps.event.addListener(e,l,t[d])),i},[]);return s}function y0e(t){google.maps.event.removeListener(t)}function $t(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(y0e)}function It(t){var{updaterMap:e,eventMap:n,prevProps:s,nextProps:r,instance:i}=t,l=x0e(r,i,n);return g0e(e,s,r,i),l}var VM={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},UM={extraMapTypes(t,e){e.forEach(function(s,r){t.mapTypes.set(String(r),s)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function b0e(t){var{children:e,options:n,id:s,mapContainerStyle:r,mapContainerClassName:i,center:l,onClick:d,onDblClick:u,onDrag:h,onDragEnd:f,onDragStart:p,onMouseMove:x,onMouseOut:b,onMouseOver:_,onMouseDown:j,onMouseUp:v,onRightClick:T,onCenterChanged:P,onLoad:A,onUnmount:C}=t,[M,L]=y.useState(null),k=y.useRef(null),[R,S]=y.useState(null),[O,I]=y.useState(null),[F,$]=y.useState(null),[Q,G]=y.useState(null),[B,z]=y.useState(null),[q,Z]=y.useState(null),[ee,H]=y.useState(null),[Y,X]=y.useState(null),[ie,te]=y.useState(null),[be,ve]=y.useState(null),[Se,Pe]=y.useState(null),[Ie,Fe]=y.useState(null);return y.useEffect(()=>{n&&M!==null&&M.setOptions(n)},[M,n]),y.useEffect(()=>{M!==null&&typeof l<"u"&&M.setCenter(l)},[M,l]),y.useEffect(()=>{M&&u&&(O!==null&&google.maps.event.removeListener(O),I(google.maps.event.addListener(M,"dblclick",u)))},[u]),y.useEffect(()=>{M&&f&&(F!==null&&google.maps.event.removeListener(F),$(google.maps.event.addListener(M,"dragend",f)))},[f]),y.useEffect(()=>{M&&p&&(Q!==null&&google.maps.event.removeListener(Q),G(google.maps.event.addListener(M,"dragstart",p)))},[p]),y.useEffect(()=>{M&&j&&(B!==null&&google.maps.event.removeListener(B),z(google.maps.event.addListener(M,"mousedown",j)))},[j]),y.useEffect(()=>{M&&x&&(q!==null&&google.maps.event.removeListener(q),Z(google.maps.event.addListener(M,"mousemove",x)))},[x]),y.useEffect(()=>{M&&b&&(ee!==null&&google.maps.event.removeListener(ee),H(google.maps.event.addListener(M,"mouseout",b)))},[b]),y.useEffect(()=>{M&&_&&(Y!==null&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(M,"mouseover",_)))},[_]),y.useEffect(()=>{M&&v&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(M,"mouseup",v)))},[v]),y.useEffect(()=>{M&&T&&(be!==null&&google.maps.event.removeListener(be),ve(google.maps.event.addListener(M,"rightclick",T)))},[T]),y.useEffect(()=>{M&&d&&(Se!==null&&google.maps.event.removeListener(Se),Pe(google.maps.event.addListener(M,"click",d)))},[d]),y.useEffect(()=>{M&&h&&(Ie!==null&&google.maps.event.removeListener(Ie),Fe(google.maps.event.addListener(M,"drag",h)))},[h]),y.useEffect(()=>{M&&P&&(R!==null&&google.maps.event.removeListener(R),S(google.maps.event.addListener(M,"center_changed",P)))},[d]),y.useEffect(()=>{var We=k.current===null?null:new google.maps.Map(k.current,n);return L(We),We!==null&&A&&A(We),()=>{We!==null&&C&&C(We)}},[]),a.jsx("div",{id:s,ref:k,style:r,className:i,children:a.jsx(Tt.Provider,{value:M,children:M!==null?e:null})})}y.memo(b0e);class BM extends y.PureComponent{constructor(){super(...arguments),pe(this,"state",{map:null}),pe(this,"registeredEvents",[]),pe(this,"mapRef",null),pe(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),pe(this,"panTo",e=>{var n=this.getInstance();n&&n.panTo(e)}),pe(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),pe(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=It({updaterMap:UM,eventMap:VM,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:UM,eventMap:VM,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),$t(this.registeredEvents))}render(){return a.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:a.jsx(Tt.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function FM(t,e,n,s,r,i,l){try{var d=t[i](l),u=d.value}catch(h){return void n(h)}d.done?e(u):Promise.resolve(u).then(s,r)}function nV(t){return function(){var e=this,n=arguments;return new Promise(function(s,r){var i=t.apply(e,n);function l(u){FM(i,s,r,l,d,"next",u)}function d(u){FM(i,s,r,l,d,"throw",u)}l(void 0)})}}function sV(t){var{googleMapsApiKey:e,googleMapsClientId:n,version:s="weekly",language:r,region:i,libraries:l,channel:d,mapIds:u,authReferrerPolicy:h,apiUrl:f="https://maps.googleapis.com"}=t,p=[];return Gs(e&&n||!(e&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?p.push("key=".concat(e)):n&&p.push("client=".concat(n)),s&&p.push("v=".concat(s)),r&&p.push("language=".concat(r)),i&&p.push("region=".concat(i)),l&&l.length&&p.push("libraries=".concat(l.sort().join(","))),d&&p.push("channel=".concat(d)),u&&u.length&&p.push("map_ids=".concat(u.join(","))),h&&p.push("auth_referrer_policy=".concat(h)),p.push("loading=async"),p.push("callback=initMap"),"".concat(f,"/maps/api/js?").concat(p.join("&"))}var vc=typeof document<"u";function rV(t){var{url:e,id:n,nonce:s}=t;return vc?new Promise(function(i,l){var d=document.getElementById(n),u=window;if(d){var h=d.getAttribute("data-state");if(d.src===e&&h!=="error"){if(h==="ready")return i(n);var f=u.initMap,p=d.onerror;u.initMap=function(){f&&f(),i(n)},d.onerror=function(b){p&&p(b),l(b)};return}else d.remove()}var x=document.createElement("script");x.type="text/javascript",x.src=e,x.id=n,x.async=!0,x.nonce=s||"",x.onerror=function(_){x.setAttribute("data-state","error"),l(_)},u.initMap=function(){x.setAttribute("data-state","ready"),i(n)},document.head.appendChild(x)}).catch(r=>{throw console.error("injectScript error: ",r),r}):Promise.reject(new Error("document is undefined"))}function $M(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function yC(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(r,i){return $M(r)||Reflect.apply(e,t,[r,i]),r};var n=t.appendChild.bind(t);t.appendChild=function(r){return $M(r)||Reflect.apply(n,t,[r]),r}}}var Nf=!1;function aV(){return a.jsx("div",{children:"Loading..."})}var Vp={id:"script-loader",version:"weekly"};class w2 extends y.PureComponent{constructor(){super(...arguments),pe(this,"check",null),pe(this,"state",{loaded:!1}),pe(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),pe(this,"isCleaningUp",nV(function*(){function e(n){if(!Nf)n();else if(vc)var s=window.setInterval(function(){Nf||(window.clearInterval(s),n())},1)}return new Promise(e)})),pe(this,"cleanup",()=>{Nf=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(s){return typeof s.src=="string"&&s.src.includes("maps.googleapis")}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(s){return s.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(s){return s.innerText!==void 0&&s.innerText.length>0&&s.innerText.includes(".gm-")}).forEach(function(s){s.parentNode&&s.parentNode.removeChild(s)})}),pe(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&yC(),Gs(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:sV(this.props)};rV(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(n=>{this.props.onError&&this.props.onError(n),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),pe(this,"getRef",e=>{this.check=e})}componentDidMount(){if(vc){if(window.google&&window.google.maps&&!Nf){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(n){console.error("Error at injecting script after cleaning up: ",n)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),vc&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(vc){this.cleanup();var e=()=>{this.check||(delete window.google,Nf=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||a.jsx(aV,{})]})}}pe(w2,"defaultProps",Vp);function v0e(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.includes(s))continue;n[s]=t[s]}return n}function bC(t,e){if(t==null)return{};var n,s,r=v0e(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)n=i[s],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var zM;function w0e(t){var{id:e=Vp.id,version:n=Vp.version,nonce:s,googleMapsApiKey:r,googleMapsClientId:i,language:l,region:d,libraries:u,preventGoogleFontsLoading:h,channel:f,mapIds:p,authReferrerPolicy:x,apiUrl:b="https://maps.googleapis.com"}=t,_=y.useRef(!1),[j,v]=y.useState(!1),[T,P]=y.useState(void 0);y.useEffect(function(){return _.current=!0,()=>{_.current=!1}},[]),y.useEffect(function(){vc&&h&&yC()},[h]),y.useEffect(function(){j&&Gs(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[j]);var A=sV({version:n,googleMapsApiKey:r,googleMapsClientId:i,language:l,region:d,libraries:u,channel:f,mapIds:p,authReferrerPolicy:x,apiUrl:b});y.useEffect(function(){if(!vc)return;function L(){_.current&&(v(!0),zM=A)}if(window.google&&window.google.maps&&zM===A){L();return}rV({id:e,url:A,nonce:s}).then(L).catch(function(R){_.current&&P(R),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(r||"-",") or Client ID (").concat(i||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(R)})},[e,A,s]);var C=y.useRef(void 0);return y.useEffect(function(){C.current&&u!==C.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),C.current=u},[u]),{isLoaded:j,loadError:T,url:A}}var _0e=["loadingElement","onLoad","onError","onUnmount","children"],E0e=a.jsx(aV,{});function N0e(t){var{loadingElement:e,onLoad:n,onError:s,onUnmount:r,children:i}=t,l=bC(t,_0e),{isLoaded:d,loadError:u}=w0e(l);return y.useEffect(function(){d&&typeof n=="function"&&n()},[d,n]),y.useEffect(function(){u&&typeof s=="function"&&s(u)},[u,s]),y.useEffect(function(){return()=>{r&&r()}},[r]),d?i:e||E0e}y.memo(N0e);function j0e(t,e,n,s){function r(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function d(f){try{h(s.next(f))}catch(p){l(p)}}function u(f){try{h(s.throw(f))}catch(p){l(p)}}function h(f){f.done?i(f.value):r(f.value).then(d,u)}h((s=s.apply(t,[])).next())})}function C0e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var S0e=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,r,i;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(r=s;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=s;r--!==0;){var l=i[r];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n},T0e=C0e(S0e),HM="__googleMapsScriptId",ph;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(ph||(ph={}));class Td{constructor(e){var{apiKey:n,authReferrerPolicy:s,channel:r,client:i,id:l=HM,language:d,libraries:u=[],mapIds:h,nonce:f,region:p,retries:x=3,url:b="https://maps.googleapis.com/maps/api/js",version:_}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=n,this.authReferrerPolicy=s,this.channel=r,this.client=i,this.id=l||HM,this.language=d,this.libraries=u,this.mapIds=h,this.nonce=f,this.region=p,this.retries=x,this.url=b,this.version=_,Td.instance){if(!T0e(this.options,Td.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(Td.instance.options)));return Td.instance}Td.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?ph.FAILURE:this.done?ph.SUCCESS:this.loading?ph.LOADING:ph.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,n)=>{this.loadCallback(s=>{s?n(s.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,n;if(document.getElementById(this.id)){this.callback();return}var s={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(s).forEach(i=>!s[i]&&delete s[i]),!((n=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||n===void 0)&&n.importLibrary||(i=>{var l,d,u,h="The Google Maps JavaScript API",f="google",p="importLibrary",x="__ib__",b=document,_=window;_=_[f]||(_[f]={});var j=_.maps||(_.maps={}),v=new Set,T=new URLSearchParams,P=()=>l||(l=new Promise((A,C)=>j0e(this,void 0,void 0,function*(){var M;yield d=b.createElement("script"),d.id=this.id,T.set("libraries",[...v]+"");for(u in i)T.set(u.replace(/[A-Z]/g,L=>"_"+L[0].toLowerCase()),i[u]);T.set("callback",f+".maps."+x),d.src=this.url+"?"+T,j[x]=A,d.onerror=()=>l=C(Error(h+" could not load.")),d.nonce=this.nonce||((M=b.querySelector("script[nonce]"))===null||M===void 0?void 0:M.nonce)||"",b.head.append(d)})));j[p]?console.warn(h+" only loads once. Ignoring:",i):j[p]=function(A){for(var C=arguments.length,M=new Array(C>1?C-1:0),L=1;L<C;L++)M[L-1]=arguments[L];return v.add(A)&&P().then(()=>j[p](A,...M))}})(s);var r=this.libraries.map(i=>this.importLibrary(i));r.length||r.push(this.importLibrary("core")),Promise.all(r).then(()=>this.callback(),i=>{var l=new ErrorEvent("error",{error:i});this.loadErrorCallback(l)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var n=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(n," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var k0e=["maps"];function eve(t){var{id:e=Vp.id,version:n=Vp.version,nonce:s,googleMapsApiKey:r,language:i,region:l,libraries:d=k0e,preventGoogleFontsLoading:u,mapIds:h,authReferrerPolicy:f}=t,p=y.useRef(!1),[x,b]=y.useState(!1),[_,j]=y.useState(void 0);y.useEffect(function(){return p.current=!0,()=>{p.current=!1}},[]);var v=y.useMemo(()=>new Td({id:e,apiKey:r,version:n,libraries:d,language:i||"en",region:l||"US",mapIds:h||[],nonce:s||"",authReferrerPolicy:f||"origin"}),[e,r,n,d,i,l,h,s,f]);y.useEffect(function(){x||v.load().then(()=>{p.current&&b(!0)}).catch(A=>{j(A)})},[]),y.useEffect(()=>{vc&&u&&yC()},[u]);var T=y.useRef();return y.useEffect(()=>{T.current&&d!==T.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),T.current=d},[d]),{isLoaded:x,loadError:_}}function qM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Gy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qM(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var WM={},YM={options(t,e){t.setOptions(e)}};function A0e(t){var{options:e,onLoad:n,onUnmount:s}=t,r=y.useContext(Tt),[i,l]=y.useState(null);return y.useEffect(()=>{i!==null&&i.setMap(r)},[r]),y.useEffect(()=>{e&&i!==null&&i.setOptions(e)},[i,e]),y.useEffect(()=>{var d=new google.maps.TrafficLayer(Gy(Gy({},e),{},{map:r}));return l(d),n&&n(d),()=>{i!==null&&(s&&s(i),i.setMap(null))}},[]),null}y.memo(A0e);class R0e extends y.PureComponent{constructor(){super(...arguments),pe(this,"state",{trafficLayer:null}),pe(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),pe(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Gy(Gy({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:YM,eventMap:WM,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:YM,eventMap:WM,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),$t(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}pe(R0e,"contextType",Tt);function D0e(t){var{onLoad:e,onUnmount:n}=t,s=y.useContext(Tt),[r,i]=y.useState(null);return y.useEffect(()=>{r!==null&&r.setMap(s)},[s]),y.useEffect(()=>{var l=new google.maps.BicyclingLayer;return i(l),l.setMap(s),e&&e(l),()=>{l!==null&&(n&&n(l),l.setMap(null))}},[]),null}y.memo(D0e);class P0e extends y.PureComponent{constructor(){super(...arguments),pe(this,"state",{bicyclingLayer:null}),pe(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}pe(P0e,"contextType",Tt);function M0e(t){var{onLoad:e,onUnmount:n}=t,s=y.useContext(Tt),[r,i]=y.useState(null);return y.useEffect(()=>{r!==null&&r.setMap(s)},[s]),y.useEffect(()=>{var l=new google.maps.TransitLayer;return i(l),l.setMap(s),e&&e(l),()=>{r!==null&&(n&&n(r),r.setMap(null))}},[]),null}y.memo(M0e);class L0e extends y.PureComponent{constructor(){super(...arguments),pe(this,"state",{transitLayer:null}),pe(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}pe(L0e,"contextType",Tt);function GM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Ky(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GM(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var KM={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},QM={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function I0e(t){var{options:e,drawingMode:n,onCircleComplete:s,onMarkerComplete:r,onOverlayComplete:i,onPolygonComplete:l,onPolylineComplete:d,onRectangleComplete:u,onLoad:h,onUnmount:f}=t,p=y.useContext(Tt),[x,b]=y.useState(null),[_,j]=y.useState(null),[v,T]=y.useState(null),[P,A]=y.useState(null),[C,M]=y.useState(null),[L,k]=y.useState(null),[R,S]=y.useState(null);return y.useEffect(()=>{x!==null&&x.setMap(p)},[p]),y.useEffect(()=>{e&&x!==null&&x.setOptions(e)},[x,e]),y.useEffect(()=>{x!==null&&x.setDrawingMode(n??null)},[x,n]),y.useEffect(()=>{x&&s&&(_!==null&&google.maps.event.removeListener(_),j(google.maps.event.addListener(x,"circlecomplete",s)))},[x,s]),y.useEffect(()=>{x&&r&&(v!==null&&google.maps.event.removeListener(v),T(google.maps.event.addListener(x,"markercomplete",r)))},[x,r]),y.useEffect(()=>{x&&i&&(P!==null&&google.maps.event.removeListener(P),A(google.maps.event.addListener(x,"overlaycomplete",i)))},[x,i]),y.useEffect(()=>{x&&l&&(C!==null&&google.maps.event.removeListener(C),M(google.maps.event.addListener(x,"polygoncomplete",l)))},[x,l]),y.useEffect(()=>{x&&d&&(L!==null&&google.maps.event.removeListener(L),k(google.maps.event.addListener(x,"polylinecomplete",d)))},[x,d]),y.useEffect(()=>{x&&u&&(R!==null&&google.maps.event.removeListener(R),S(google.maps.event.addListener(x,"rectanglecomplete",u)))},[x,u]),y.useEffect(()=>{Gs(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var O=new google.maps.drawing.DrawingManager(Ky(Ky({},e),{},{map:p}));return n&&O.setDrawingMode(n),s&&j(google.maps.event.addListener(O,"circlecomplete",s)),r&&T(google.maps.event.addListener(O,"markercomplete",r)),i&&A(google.maps.event.addListener(O,"overlaycomplete",i)),l&&M(google.maps.event.addListener(O,"polygoncomplete",l)),d&&k(google.maps.event.addListener(O,"polylinecomplete",d)),u&&S(google.maps.event.addListener(O,"rectanglecomplete",u)),b(O),h&&h(O),()=>{x!==null&&(_&&google.maps.event.removeListener(_),v&&google.maps.event.removeListener(v),P&&google.maps.event.removeListener(P),C&&google.maps.event.removeListener(C),L&&google.maps.event.removeListener(L),R&&google.maps.event.removeListener(R),f&&f(x),x.setMap(null))}},[]),null}y.memo(I0e);class O0e extends y.PureComponent{constructor(e){super(e),pe(this,"registeredEvents",[]),pe(this,"state",{drawingManager:null}),pe(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),Gs(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Ky(Ky({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:QM,eventMap:KM,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:QM,eventMap:KM,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),$t(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}pe(O0e,"contextType",Tt);function XM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Ah(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XM(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var ZM={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},JM={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Qy={};function V0e(t){var{position:e,options:n,clusterer:s,noClustererRedraw:r,children:i,draggable:l,visible:d,animation:u,clickable:h,cursor:f,icon:p,label:x,opacity:b,shape:_,title:j,zIndex:v,onClick:T,onDblClick:P,onDrag:A,onDragEnd:C,onDragStart:M,onMouseOut:L,onMouseOver:k,onMouseUp:R,onMouseDown:S,onRightClick:O,onClickableChanged:I,onCursorChanged:F,onAnimationChanged:$,onDraggableChanged:Q,onFlatChanged:G,onIconChanged:B,onPositionChanged:z,onShapeChanged:q,onTitleChanged:Z,onVisibleChanged:ee,onZindexChanged:H,onLoad:Y,onUnmount:X}=t,ie=y.useContext(Tt),[te,be]=y.useState(null),[ve,Se]=y.useState(null),[Pe,Ie]=y.useState(null),[Fe,We]=y.useState(null),[kt,nn]=y.useState(null),[Ze,cn]=y.useState(null),[zt,_n]=y.useState(null),[_t,oe]=y.useState(null),[ae,Ee]=y.useState(null),[Te,ze]=y.useState(null),[rt,lt]=y.useState(null),[At,Ht]=y.useState(null),[Ln,Ot]=y.useState(null),[tt,Fs]=y.useState(null),[vn,Xn]=y.useState(null),[$n,An]=y.useState(null),[Lr,$s]=y.useState(null),[Gr,ks]=y.useState(null),[Ir,In]=y.useState(null),[As,ar]=y.useState(null),[ls,Aa]=y.useState(null),[vr,ns]=y.useState(null);y.useEffect(()=>{te!==null&&te.setMap(ie)},[ie]),y.useEffect(()=>{typeof n<"u"&&te!==null&&te.setOptions(n)},[te,n]),y.useEffect(()=>{typeof l<"u"&&te!==null&&te.setDraggable(l)},[te,l]),y.useEffect(()=>{e&&te!==null&&te.setPosition(e)},[te,e]),y.useEffect(()=>{typeof d<"u"&&te!==null&&te.setVisible(d)},[te,d]),y.useEffect(()=>{te?.setAnimation(u)},[te,u]),y.useEffect(()=>{te&&h!==void 0&&te.setClickable(h)},[te,h]),y.useEffect(()=>{te&&f!==void 0&&te.setCursor(f)},[te,f]),y.useEffect(()=>{te&&p!==void 0&&te.setIcon(p)},[te,p]),y.useEffect(()=>{te&&x!==void 0&&te.setLabel(x)},[te,x]),y.useEffect(()=>{te&&b!==void 0&&te.setOpacity(b)},[te,b]),y.useEffect(()=>{te&&_!==void 0&&te.setShape(_)},[te,_]),y.useEffect(()=>{te&&j!==void 0&&te.setTitle(j)},[te,j]),y.useEffect(()=>{te&&v!==void 0&&te.setZIndex(v)},[te,v]),y.useEffect(()=>{te&&P&&(ve!==null&&google.maps.event.removeListener(ve),Se(google.maps.event.addListener(te,"dblclick",P)))},[P]),y.useEffect(()=>{te&&C&&(Pe!==null&&google.maps.event.removeListener(Pe),Ie(google.maps.event.addListener(te,"dragend",C)))},[C]),y.useEffect(()=>{te&&M&&(Fe!==null&&google.maps.event.removeListener(Fe),We(google.maps.event.addListener(te,"dragstart",M)))},[M]),y.useEffect(()=>{te&&S&&(kt!==null&&google.maps.event.removeListener(kt),nn(google.maps.event.addListener(te,"mousedown",S)))},[S]),y.useEffect(()=>{te&&L&&(Ze!==null&&google.maps.event.removeListener(Ze),cn(google.maps.event.addListener(te,"mouseout",L)))},[L]),y.useEffect(()=>{te&&k&&(zt!==null&&google.maps.event.removeListener(zt),_n(google.maps.event.addListener(te,"mouseover",k)))},[k]),y.useEffect(()=>{te&&R&&(_t!==null&&google.maps.event.removeListener(_t),oe(google.maps.event.addListener(te,"mouseup",R)))},[R]),y.useEffect(()=>{te&&O&&(ae!==null&&google.maps.event.removeListener(ae),Ee(google.maps.event.addListener(te,"rightclick",O)))},[O]),y.useEffect(()=>{te&&T&&(Te!==null&&google.maps.event.removeListener(Te),ze(google.maps.event.addListener(te,"click",T)))},[T]),y.useEffect(()=>{te&&A&&(rt!==null&&google.maps.event.removeListener(rt),lt(google.maps.event.addListener(te,"drag",A)))},[A]),y.useEffect(()=>{te&&I&&(At!==null&&google.maps.event.removeListener(At),Ht(google.maps.event.addListener(te,"clickable_changed",I)))},[I]),y.useEffect(()=>{te&&F&&(Ln!==null&&google.maps.event.removeListener(Ln),Ot(google.maps.event.addListener(te,"cursor_changed",F)))},[F]),y.useEffect(()=>{te&&$&&(tt!==null&&google.maps.event.removeListener(tt),Fs(google.maps.event.addListener(te,"animation_changed",$)))},[$]),y.useEffect(()=>{te&&Q&&(vn!==null&&google.maps.event.removeListener(vn),Xn(google.maps.event.addListener(te,"draggable_changed",Q)))},[Q]),y.useEffect(()=>{te&&G&&($n!==null&&google.maps.event.removeListener($n),An(google.maps.event.addListener(te,"flat_changed",G)))},[G]),y.useEffect(()=>{te&&B&&(Lr!==null&&google.maps.event.removeListener(Lr),$s(google.maps.event.addListener(te,"icon_changed",B)))},[B]),y.useEffect(()=>{te&&z&&(Gr!==null&&google.maps.event.removeListener(Gr),ks(google.maps.event.addListener(te,"position_changed",z)))},[z]),y.useEffect(()=>{te&&q&&(Ir!==null&&google.maps.event.removeListener(Ir),In(google.maps.event.addListener(te,"shape_changed",q)))},[q]),y.useEffect(()=>{te&&Z&&(As!==null&&google.maps.event.removeListener(As),ar(google.maps.event.addListener(te,"title_changed",Z)))},[Z]),y.useEffect(()=>{te&&ee&&(ls!==null&&google.maps.event.removeListener(ls),Aa(google.maps.event.addListener(te,"visible_changed",ee)))},[ee]),y.useEffect(()=>{te&&H&&(vr!==null&&google.maps.event.removeListener(vr),ns(google.maps.event.addListener(te,"zindex_changed",H)))},[H]),y.useEffect(()=>{var Qs=Ah(Ah(Ah({},n||Qy),s?Qy:{map:ie}),{},{position:e}),Je=new google.maps.Marker(Qs);return s?s.addMarker(Je,!!r):Je.setMap(ie),e&&Je.setPosition(e),typeof d<"u"&&Je.setVisible(d),typeof l<"u"&&Je.setDraggable(l),typeof h<"u"&&Je.setClickable(h),typeof f=="string"&&Je.setCursor(f),p&&Je.setIcon(p),typeof x<"u"&&Je.setLabel(x),typeof b<"u"&&Je.setOpacity(b),_&&Je.setShape(_),typeof j=="string"&&Je.setTitle(j),typeof v=="number"&&Je.setZIndex(v),P&&Se(google.maps.event.addListener(Je,"dblclick",P)),C&&Ie(google.maps.event.addListener(Je,"dragend",C)),M&&We(google.maps.event.addListener(Je,"dragstart",M)),S&&nn(google.maps.event.addListener(Je,"mousedown",S)),L&&cn(google.maps.event.addListener(Je,"mouseout",L)),k&&_n(google.maps.event.addListener(Je,"mouseover",k)),R&&oe(google.maps.event.addListener(Je,"mouseup",R)),O&&Ee(google.maps.event.addListener(Je,"rightclick",O)),T&&ze(google.maps.event.addListener(Je,"click",T)),A&&lt(google.maps.event.addListener(Je,"drag",A)),I&&Ht(google.maps.event.addListener(Je,"clickable_changed",I)),F&&Ot(google.maps.event.addListener(Je,"cursor_changed",F)),$&&Fs(google.maps.event.addListener(Je,"animation_changed",$)),Q&&Xn(google.maps.event.addListener(Je,"draggable_changed",Q)),G&&An(google.maps.event.addListener(Je,"flat_changed",G)),B&&$s(google.maps.event.addListener(Je,"icon_changed",B)),z&&ks(google.maps.event.addListener(Je,"position_changed",z)),q&&In(google.maps.event.addListener(Je,"shape_changed",q)),Z&&ar(google.maps.event.addListener(Je,"title_changed",Z)),ee&&Aa(google.maps.event.addListener(Je,"visible_changed",ee)),H&&ns(google.maps.event.addListener(Je,"zindex_changed",H)),be(Je),Y&&Y(Je),()=>{ve!==null&&google.maps.event.removeListener(ve),Pe!==null&&google.maps.event.removeListener(Pe),Fe!==null&&google.maps.event.removeListener(Fe),kt!==null&&google.maps.event.removeListener(kt),Ze!==null&&google.maps.event.removeListener(Ze),zt!==null&&google.maps.event.removeListener(zt),_t!==null&&google.maps.event.removeListener(_t),ae!==null&&google.maps.event.removeListener(ae),Te!==null&&google.maps.event.removeListener(Te),At!==null&&google.maps.event.removeListener(At),Ln!==null&&google.maps.event.removeListener(Ln),tt!==null&&google.maps.event.removeListener(tt),vn!==null&&google.maps.event.removeListener(vn),$n!==null&&google.maps.event.removeListener($n),Lr!==null&&google.maps.event.removeListener(Lr),Gr!==null&&google.maps.event.removeListener(Gr),As!==null&&google.maps.event.removeListener(As),ls!==null&&google.maps.event.removeListener(ls),vr!==null&&google.maps.event.removeListener(vr),X&&X(Je),s?s.removeMarker(Je,!!r):Je&&Je.setMap(null)}},[]);var zs=y.useMemo(()=>i?y.Children.map(i,Qs=>{if(!y.isValidElement(Qs))return Qs;var Je=Qs;return y.cloneElement(Je,{anchor:te})}):null,[i,te]);return a.jsx(a.Fragment,{children:zs})||null}y.memo(V0e);class _2 extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[])}componentDidMount(){var e=this;return nV(function*(){var n=Ah(Ah(Ah({},e.props.options||Qy),e.props.clusterer?Qy:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(n),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=It({updaterMap:JM,eventMap:ZM,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:JM,eventMap:ZM,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),$t(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?y.Children.map(this.props.children,n=>{if(!y.isValidElement(n))return n;var s=n;return y.cloneElement(s,{anchor:this.marker})}):null;return e||null}}pe(_2,"contextType",Tt);var U0e=(function(){function t(e,n){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var n=this.cluster.getClusterer();if(google.maps.event.trigger(n,"click",this.cluster),google.maps.event.trigger(n,"clusterclick",this.cluster),n.getZoomOnClick()){var s=n.getMaxZoom(),r=this.cluster.getBounds(),i=n.getMap();i!==null&&"fitBounds"in i&&i.fitBounds(r),this.timeOut=window.setTimeout(function(){var l=n.getMap();if(l!==null){"fitBounds"in l&&l.fitBounds(r);var d=l.getZoom()||0;s!==null&&d>s&&l.setZoom(s+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var n=this.getMap();n!==null&&(this.boundsChangedListener=google.maps.event.addListener(n,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,n,s,r,i,l;if(this.div&&this.center){var d=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,u=this.backgroundPosition.split(" "),h=parseInt(((e=u[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),f=parseInt(((n=u[1])===null||n===void 0?void 0:n.replace(/^\s+|\s+$/g,""))||"0",10),p=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(p!==null?"".concat(p.y,"px"):"0","; left: ").concat(p!==null?"".concat(p.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var x=document.createElement("img");x.alt=d,x.src=this.url,x.width=this.width,x.height=this.height,x.setAttribute("style","position: absolute; top: ".concat(f,"px; left: ").concat(h,"px")),this.cluster.getClusterer().enableRetinaIcons||(x.style.clip="rect(-".concat(f,"px, -").concat(h+this.width,"px, -").concat(f+this.height,", -").concat(h,")"));var b=document.createElement("div");b.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((s=this.sums)===null||s===void 0)&&s.text&&(b.innerText="".concat((r=this.sums)===null||r===void 0?void 0:r.text)),!((i=this.sums)===null||i===void 0)&&i.html&&(b.innerHTML="".concat((l=this.sums)===null||l===void 0?void 0:l.html)),this.div.innerHTML="",this.div.appendChild(x),this.div.appendChild(b),this.div.title=d,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var n=this.cluster.getClusterer().getStyles(),s=n[Math.min(n.length-1,Math.max(0,e.index-1))];s&&(this.url=s.url,this.height=s.height,this.width=s.width,s.className&&(this.className="".concat(this.clusterClassName," ").concat(s.className)),this.anchorText=s.anchorText||[0,0],this.anchorIcon=s.anchorIcon||[this.height/2,this.width/2],this.textColor=s.textColor||"black",this.textSize=s.textSize||11,this.textDecoration=s.textDecoration||"none",this.fontWeight=s.fontWeight||"bold",this.fontStyle=s.fontStyle||"normal",this.fontFamily=s.fontFamily||"Arial,sans-serif",this.backgroundPosition=s.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var n=this.getProjection().fromLatLngToDivPixel(e);return n!==null&&(n.x-=this.anchorIcon[1],n.y-=this.anchorIcon[0]),n},t})(),B0e=(function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new U0e(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),n=this.getMarkers(),s=0,r=n;s<r.length;s++){var i=r[s],l=i.getPosition();l&&e.extend(l)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var s=e.getPosition();if(s){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+s.lat())/r,(this.center.lng()*(r-1)+s.lng())/r),this.calculateBounds()}}}else{var s=e.getPosition();s&&(this.center=s,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var i=this.markers.length,l=this.markerClusterer.getMaxZoom(),d=(n=this.map)===null||n===void 0?void 0:n.getZoom();if(l!==null&&typeof d<"u"&&d>l)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var u=0,h=this.markers;u<h.length;u++){var f=h[u];f.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var n=e.getPosition();if(n)return this.bounds.contains(n)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,n=this.markers.length,s=this.markerClusterer.getMaxZoom(),r=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(s!==null&&typeof r<"u"&&r>s){this.clusterIcon.hide();return}if(n<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var n=0;n<this.markers.length;n++)if(e===this.markers[n])return!0;return!1},t})();function F0e(t,e){var n=t.length,s=n.toString().length,r=Math.min(s,e);return{text:n.toString(),index:r,title:""}}var $0e=2e3,z0e=500,H0e="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",q0e="png",W0e=[53,56,66,78,90],Y0e="cluster",iV=(function(){function t(e,n,s){n===void 0&&(n=[]),s===void 0&&(s={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=s.gridSize||60,this.minClusterSize=s.minimumClusterSize||2,this.maxZoom=s.maxZoom||null,this.styles=s.styles||[],this.title=s.title||"",this.zoomOnClick=!0,s.zoomOnClick!==void 0&&(this.zoomOnClick=s.zoomOnClick),this.averageCenter=!1,s.averageCenter!==void 0&&(this.averageCenter=s.averageCenter),this.ignoreHidden=!1,s.ignoreHidden!==void 0&&(this.ignoreHidden=s.ignoreHidden),this.enableRetinaIcons=!1,s.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=s.enableRetinaIcons),this.imagePath=s.imagePath||H0e,this.imageExtension=s.imageExtension||q0e,this.imageSizes=s.imageSizes||W0e,this.calculator=s.calculator||F0e,this.batchSize=s.batchSize||$0e,this.batchSizeIE=s.batchSizeIE||z0e,this.clusterClass=s.clusterClass||Y0e,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,n;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((n=this.getMap())===null||n===void 0?void 0:n.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,n=this.markers;e<n.length;e++){var s=n[e];s.getMap()!==this.activeMap&&s.setMap(this.activeMap)}for(var r=0,i=this.clusters;r<i.length;r++){var l=i[r];l.remove()}this.clusters=[];for(var d=0,u=this.listeners;d<u.length;d++){var h=u[d];google.maps.event.removeListener(h)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),n=new google.maps.LatLngBounds,s=0,r=e;s<r.length;s++){var i=r[s],l=i.getPosition();l&&n.extend(l)}var d=this.getMap();d!==null&&"fitBounds"in d&&d.fitBounds(n)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,n){this.pushMarkerTo(e),n||this.redraw()},t.prototype.addMarkers=function(e,n){for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=e[s];r&&this.pushMarkerTo(r)}n||this.redraw()},t.prototype.pushMarkerTo=function(e){var n=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){n.ready&&(e.isAdded=!1,n.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var n=-1;if(this.markers.indexOf)n=this.markers.indexOf(e);else for(var s=0;s<this.markers.length;s++)if(e===this.markers[s]){n=s;break}return n===-1?!1:(e.setMap(null),this.markers.splice(n,1),!0)},t.prototype.removeMarker=function(e,n){var s=this.removeMarker_(e);return!n&&s&&this.repaint(),s},t.prototype.removeMarkers=function(e,n){for(var s=!1,r=0,i=e;r<i.length;r++){var l=i[r];s=s||this.removeMarker_(l)}return!n&&s&&this.repaint(),s},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var s=0,r=e;s<r.length;s++){var i=r[s];i.remove()}},0)},t.prototype.getExtendedBounds=function(e){var n=this.getProjection(),s=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));s!==null&&(s.x+=this.gridSize,s.y-=this.gridSize);var r=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(r!==null&&(r.x-=this.gridSize,r.y+=this.gridSize),s!==null){var i=n.fromDivPixelToLatLng(s);i!==null&&e.extend(i)}if(r!==null){var l=n.fromDivPixelToLatLng(r);l!==null&&e.extend(l)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var n=0,s=this.clusters;n<s.length;n++){var r=s[n];r.remove()}this.clusters=[];for(var i=0,l=this.markers;i<l.length;i++){var d=l[i];d.isAdded=!1,e&&d.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,n){var s=6371,r=(n.lat()-e.lat())*Math.PI/180,i=(n.lng()-e.lng())*Math.PI/180,l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(n.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return s*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))},t.prototype.isMarkerInBounds=function(e,n){var s=e.getPosition();return s?n.contains(s):!1},t.prototype.addToClosestCluster=function(e){for(var n,s=4e4,r=null,i=0,l=this.clusters;i<l.length;i++){var d=l[i];n=d;var u=n.getCenter(),h=e.getPosition();if(u&&h){var f=this.distanceBetweenPoints(u,h);f<s&&(s=f,r=n)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):(n=new B0e(this),n.addMarker(e),this.clusters.push(n))},t.prototype.createClusters=function(e){var n=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var s=this.getMap(),r=s!==null&&("getBounds"in s)?s.getBounds():null,i=s?.getZoom()||0,l=i>3?new google.maps.LatLngBounds(r?.getSouthWest(),r?.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),d=this.getExtendedBounds(l),u=Math.min(e+this.batchSize,this.markers.length),h=e;h<u;h++){var f=this.markers[h];f&&!f.isAdded&&this.isMarkerInBounds(f,d)&&(!this.ignoreHidden||this.ignoreHidden&&f.getVisible())&&this.addToClosestCluster(f)}if(u<this.markers.length)this.timerRefStatic=window.setTimeout(function(){n.createClusters(u)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var p=0,x=this.clusters;p<x.length;p++){var b=x[p];b.updateIcon()}}}},t.prototype.extend=function(e,n){return(function(r){for(var i in r.prototype){var l=i;this.prototype[l]=r.prototype[l]}return this}).apply(e,[n])},t})();function e3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function G0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var za={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},hn={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},K0e={};function Q0e(t){var{children:e,options:n,averageCenter:s,batchSizeIE:r,calculator:i,clusterClass:l,enableRetinaIcons:d,gridSize:u,ignoreHidden:h,imageExtension:f,imagePath:p,imageSizes:x,maxZoom:b,minimumClusterSize:_,styles:j,title:v,zoomOnClick:T,onClick:P,onClusteringBegin:A,onClusteringEnd:C,onMouseOver:M,onMouseOut:L,onLoad:k,onUnmount:R}=t,[S,O]=y.useState(null),I=y.useContext(Tt),[F,$]=y.useState(null),[Q,G]=y.useState(null),[B,z]=y.useState(null),[q,Z]=y.useState(null),[ee,H]=y.useState(null);return y.useEffect(()=>{S&&L&&(q!==null&&google.maps.event.removeListener(q),Z(google.maps.event.addListener(S,za.onMouseOut,L)))},[L]),y.useEffect(()=>{S&&M&&(ee!==null&&google.maps.event.removeListener(ee),H(google.maps.event.addListener(S,za.onMouseOver,M)))},[M]),y.useEffect(()=>{S&&P&&(F!==null&&google.maps.event.removeListener(F),$(google.maps.event.addListener(S,za.onClick,P)))},[P]),y.useEffect(()=>{S&&A&&(Q!==null&&google.maps.event.removeListener(Q),G(google.maps.event.addListener(S,za.onClusteringBegin,A)))},[A]),y.useEffect(()=>{S&&C&&(B!==null&&google.maps.event.removeListener(B),G(google.maps.event.addListener(S,za.onClusteringEnd,C)))},[C]),y.useEffect(()=>{typeof s<"u"&&S!==null&&hn.averageCenter(S,s)},[S,s]),y.useEffect(()=>{typeof r<"u"&&S!==null&&hn.batchSizeIE(S,r)},[S,r]),y.useEffect(()=>{typeof i<"u"&&S!==null&&hn.calculator(S,i)},[S,i]),y.useEffect(()=>{typeof l<"u"&&S!==null&&hn.clusterClass(S,l)},[S,l]),y.useEffect(()=>{typeof d<"u"&&S!==null&&hn.enableRetinaIcons(S,d)},[S,d]),y.useEffect(()=>{typeof u<"u"&&S!==null&&hn.gridSize(S,u)},[S,u]),y.useEffect(()=>{typeof h<"u"&&S!==null&&hn.ignoreHidden(S,h)},[S,h]),y.useEffect(()=>{typeof f<"u"&&S!==null&&hn.imageExtension(S,f)},[S,f]),y.useEffect(()=>{typeof p<"u"&&S!==null&&hn.imagePath(S,p)},[S,p]),y.useEffect(()=>{typeof x<"u"&&S!==null&&hn.imageSizes(S,x)},[S,x]),y.useEffect(()=>{typeof b<"u"&&S!==null&&hn.maxZoom(S,b)},[S,b]),y.useEffect(()=>{typeof _<"u"&&S!==null&&hn.minimumClusterSize(S,_)},[S,_]),y.useEffect(()=>{typeof j<"u"&&S!==null&&hn.styles(S,j)},[S,j]),y.useEffect(()=>{typeof v<"u"&&S!==null&&hn.title(S,v)},[S,v]),y.useEffect(()=>{typeof T<"u"&&S!==null&&hn.zoomOnClick(S,T)},[S,T]),y.useEffect(()=>{if(I){var Y=G0e({},n||K0e),X=new iV(I,[],Y);return s&&hn.averageCenter(X,s),r&&hn.batchSizeIE(X,r),i&&hn.calculator(X,i),l&&hn.clusterClass(X,l),d&&hn.enableRetinaIcons(X,d),u&&hn.gridSize(X,u),h&&hn.ignoreHidden(X,h),f&&hn.imageExtension(X,f),p&&hn.imagePath(X,p),x&&hn.imageSizes(X,x),b&&hn.maxZoom(X,b),_&&hn.minimumClusterSize(X,_),j&&hn.styles(X,j),v&&hn.title(X,v),T&&hn.zoomOnClick(X,T),L&&Z(google.maps.event.addListener(X,za.onMouseOut,L)),M&&H(google.maps.event.addListener(X,za.onMouseOver,M)),P&&$(google.maps.event.addListener(X,za.onClick,P)),A&&G(google.maps.event.addListener(X,za.onClusteringBegin,A)),C&&z(google.maps.event.addListener(X,za.onClusteringEnd,C)),O(X),k&&k(X),()=>{q!==null&&google.maps.event.removeListener(q),ee!==null&&google.maps.event.removeListener(ee),F!==null&&google.maps.event.removeListener(F),Q!==null&&google.maps.event.removeListener(Q),B!==null&&google.maps.event.removeListener(B),R&&R(X)}}},[]),S!==null&&e(S)||null}y.memo(Q0e);class X0e extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{markerClusterer:null}),pe(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new iV(this.context,[],this.props.options);this.registeredEvents=It({updaterMap:hn,eventMap:za,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:hn,eventMap:za,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),$t(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}pe(X0e,"contextType",Tt);function t3(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var oV=(function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,n=function(f){f.returnValue=!1,f.preventDefault&&f.preventDefault(),e.enableEventPropagation||t3(f)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var s=this.getPanes();if(s!==null&&s[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var r=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-r.left-r.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],l=0,d=i;l<d.length;l++){var u=d[l];this.eventListeners.push(google.maps.event.addListener(this.div,u,t3))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",n),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var n=this.getMap();if(n instanceof google.maps.Map){var s=0,r=0,i=n.getBounds();i&&!i.contains(this.position)&&n.setCenter(this.position);var l=n.getDiv(),d=l.offsetWidth,u=l.offsetHeight,h=this.pixelOffset.width,f=this.pixelOffset.height,p=this.div.offsetWidth,x=this.div.offsetHeight,b=this.infoBoxClearance.width,_=this.infoBoxClearance.height,j=this.getProjection(),v=j.fromLatLngToContainerPixel(this.position);v!==null&&(v.x<-h+b?s=v.x+h-b:v.x+p+h+b>d&&(s=v.x+p+h+b-d),this.alignBottom?v.y<-f+_+x?r=v.y+f-_-x:v.y+f+_>u&&(r=v.y+f+_-u):v.y<-f+_?r=v.y+f-_:v.y+x+f+_>u&&(r=v.y+x+f+_-u)),s===0&&r===0||n.panBy(s,r)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.div.style[n]=e[n]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var s=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+s*100+')"',this.div.style.filter="alpha(opacity="+s*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var n=this.div.ownerDocument,s=n&&n.defaultView?n.defaultView.getComputedStyle(this.div,""):null;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),n=e.fromLatLngToDivPixel(this.position);n!==null&&(this.div.style.left=n.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(n.y+this.pixelOffset.height)+"px":this.div.style.top=n.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,n){var s=this;n&&(this.position=n.getPosition(),this.moveListener=google.maps.event.addListener(n,"position_changed",function(){var r=n.getPosition();s.setPosition(r)}),this.mapListener=google.maps.event.addListener(n,"map_changed",function(){s.setMap(n.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,n=this.eventListeners;e<n.length;e++){var s=n[e];google.maps.event.removeListener(s)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,n){return(function(r){for(var i in r.prototype)Object.prototype.hasOwnProperty.call(this,i)||(this.prototype[i]=r.prototype[i]);return this}).apply(e,[n])},t})(),Z0e=["position"],J0e=["position"];function n3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Xy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var s3={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},r3={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},exe={};function txe(t){var{children:e,anchor:n,options:s,position:r,zIndex:i,onCloseClick:l,onDomReady:d,onContentChanged:u,onPositionChanged:h,onZindexChanged:f,onLoad:p,onUnmount:x}=t,b=y.useContext(Tt),[_,j]=y.useState(null),[v,T]=y.useState(null),[P,A]=y.useState(null),[C,M]=y.useState(null),[L,k]=y.useState(null),[R,S]=y.useState(null),O=y.useRef(null);return y.useEffect(()=>{b&&_!==null&&(_.close(),n?_.open(b,n):_.getPosition()&&_.open(b))},[b,_,n]),y.useEffect(()=>{s&&_!==null&&_.setOptions(s)},[_,s]),y.useEffect(()=>{if(r&&_!==null){var I=r instanceof google.maps.LatLng?r:new google.maps.LatLng(r.lat,r.lng);_.setPosition(I)}},[r]),y.useEffect(()=>{typeof i=="number"&&_!==null&&_.setZIndex(i)},[i]),y.useEffect(()=>{_&&l&&(v!==null&&google.maps.event.removeListener(v),T(google.maps.event.addListener(_,"closeclick",l)))},[l]),y.useEffect(()=>{_&&d&&(P!==null&&google.maps.event.removeListener(P),A(google.maps.event.addListener(_,"domready",d)))},[d]),y.useEffect(()=>{_&&u&&(C!==null&&google.maps.event.removeListener(C),M(google.maps.event.addListener(_,"content_changed",u)))},[u]),y.useEffect(()=>{_&&h&&(L!==null&&google.maps.event.removeListener(L),k(google.maps.event.addListener(_,"position_changed",h)))},[h]),y.useEffect(()=>{_&&f&&(R!==null&&google.maps.event.removeListener(R),S(google.maps.event.addListener(_,"zindex_changed",f)))},[f]),y.useEffect(()=>{if(b){var I=s||exe,{position:F}=I,$=bC(I,Z0e),Q;F&&!(F instanceof google.maps.LatLng)&&(Q=new google.maps.LatLng(F.lat,F.lng));var G=new oV(Xy(Xy({},$),Q?{position:Q}:{}));O.current=document.createElement("div"),j(G),l&&T(google.maps.event.addListener(G,"closeclick",l)),d&&A(google.maps.event.addListener(G,"domready",d)),u&&M(google.maps.event.addListener(G,"content_changed",u)),h&&k(google.maps.event.addListener(G,"position_changed",h)),f&&S(google.maps.event.addListener(G,"zindex_changed",f)),G.setContent(O.current),n?G.open(b,n):G.getPosition()?G.open(b):Gs(!1,"You must provide either an anchor or a position prop for <InfoBox>."),p&&p(G)}return()=>{_!==null&&(v&&google.maps.event.removeListener(v),C&&google.maps.event.removeListener(C),P&&google.maps.event.removeListener(P),L&&google.maps.event.removeListener(L),R&&google.maps.event.removeListener(R),x&&x(_),_.close())}},[]),O.current?zc.createPortal(y.Children.only(e),O.current):null}y.memo(txe);class nxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"containerElement",null),pe(this,"state",{infoBox:null}),pe(this,"open",(e,n)=>{n?this.context!==null&&e.open(this.context,n):e.getPosition()?this.context!==null&&e.open(this.context):Gs(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),pe(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:n}=e,s=bC(e,J0e),r;n&&!(n instanceof google.maps.LatLng)&&(r=new google.maps.LatLng(n.lat,n.lng));var i=new oV(Xy(Xy({},s),r?{position:r}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=It({updaterMap:r3,eventMap:s3,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:n}=this.state;n!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:r3,eventMap:s3,prevProps:e,nextProps:this.props,instance:n}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:n}=this.state;n!==null&&(e&&e(n),$t(this.registeredEvents),n.close())}render(){return this.containerElement?zc.createPortal(y.Children.only(this.props.children),this.containerElement):null}}pe(nxe,"contextType",Tt);var R1,a3;function sxe(){return a3||(a3=1,R1=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,r,i;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(r=s;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),s=i.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=s;r--!==0;){var l=i[r];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n}),R1}var rxe=sxe(),i3=tV(rxe),o3=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],D1=1,jf=8;class vC{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[n,s]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");var r=s>>4;if(r!==D1)throw new Error("Got v".concat(r," data when expected v").concat(D1,"."));var i=o3[s&15];if(!i)throw new Error("Unrecognized array type.");var[l]=new Uint16Array(e,2,1),[d]=new Uint32Array(e,4,1);return new vC(d,l,i,e)}constructor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var i=o3.indexOf(this.ArrayType),l=e*2*this.ArrayType.BYTES_PER_ELEMENT,d=e*this.IndexArrayType.BYTES_PER_ELEMENT,u=(8-d%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(s,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,jf,e),this.coords=new this.ArrayType(this.data,jf+d+u,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(jf+l+d+u),this.ids=new this.IndexArrayType(this.data,jf,e),this.coords=new this.ArrayType(this.data,jf+d+u,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(D1<<4)+i]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){var s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=n,s}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return E2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,s,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:l,nodeSize:d}=this,u=[0,i.length-1,0],h=[];u.length;){var f=u.pop()||0,p=u.pop()||0,x=u.pop()||0;if(p-x<=d){for(var b=x;b<=p;b++){var _=l[2*b],j=l[2*b+1];_>=e&&_<=s&&j>=n&&j<=r&&h.push(i[b])}continue}var v=x+p>>1,T=l[2*v],P=l[2*v+1];T>=e&&T<=s&&P>=n&&P<=r&&h.push(i[v]),(f===0?e<=T:n<=P)&&(u.push(x),u.push(v-1),u.push(1-f)),(f===0?s>=T:r>=P)&&(u.push(v+1),u.push(p),u.push(1-f))}return h}within(e,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:r,coords:i,nodeSize:l}=this,d=[0,r.length-1,0],u=[],h=s*s;d.length;){var f=d.pop()||0,p=d.pop()||0,x=d.pop()||0;if(p-x<=l){for(var b=x;b<=p;b++)l3(i[2*b],i[2*b+1],e,n)<=h&&u.push(r[b]);continue}var _=x+p>>1,j=i[2*_],v=i[2*_+1];l3(j,v,e,n)<=h&&u.push(r[_]),(f===0?e-s<=j:n-s<=v)&&(d.push(x),d.push(_-1),d.push(1-f)),(f===0?e+s>=j:n+s>=v)&&(d.push(_+1),d.push(p),d.push(1-f))}return u}}function E2(t,e,n,s,r,i){if(!(r-s<=n)){var l=s+r>>1;lV(t,e,l,s,r,i),E2(t,e,n,s,l-1,1-i),E2(t,e,n,l+1,r,1-i)}}function lV(t,e,n,s,r,i){for(;r>s;){if(r-s>600){var l=r-s+1,d=n-s+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(d-l/2<0?-1:1),p=Math.max(s,Math.floor(n-d*h/l+f)),x=Math.min(r,Math.floor(n+(l-d)*h/l+f));lV(t,e,n,p,x,i)}var b=e[2*n+i],_=s,j=r;for(Cf(t,e,s,n),e[2*r+i]>b&&Cf(t,e,s,r);_<j;){for(Cf(t,e,_,j),_++,j--;e[2*_+i]<b;)_++;for(;e[2*j+i]>b;)j--}e[2*s+i]===b?Cf(t,e,s,j):(j++,Cf(t,e,j,r)),j<=n&&(s=j+1),n<=j&&(r=j-1)}}function Cf(t,e,n,s){P1(t,n,s),P1(e,2*n,2*s),P1(e,2*n+1,2*s+1)}function P1(t,e,n){var s=t[e];t[e]=t[n],t[n]=s}function l3(t,e,n,s){var r=t-n,i=e-s;return r*r+i*i}var axe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},c3=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),wd=2,uc=3,M1=4,cc=5,cV=6;class ixe{constructor(e){this.options=Object.assign(Object.create(axe),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:n,minZoom:s,maxZoom:r}=this.options;n&&console.time("total time");var i="prepare ".concat(e.length," points");n&&console.time(i),this.points=e;for(var l=[],d=0;d<e.length;d++){var u=e[d];if(u.geometry){var[h,f]=u.geometry.coordinates,p=c3(lx(h)),x=c3(cx(f));l.push(p,x,1/0,d,-1,1),this.options.reduce&&l.push(0)}}var b=this.trees[r+1]=this._createTree(l);n&&console.timeEnd(i);for(var _=r;_>=s;_--){var j=+Date.now();b=this.trees[_]=this._createTree(this._cluster(b,_)),n&&console.log("z%d: %d clusters in %dms",_,b.numItems,+Date.now()-j)}return n&&console.timeEnd("total time"),this}getClusters(e,n){var s=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=e[2]===180?180:((e[2]+180)%360+360)%360-180,l=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)s=-180,i=180;else if(s>i){var d=this.getClusters([s,r,180,l],n),u=this.getClusters([-180,r,i,l],n);return d.concat(u)}var h=this.trees[this._limitZoom(n)],f=h.range(lx(s),cx(l),lx(i),cx(r)),p=h.data,x=[];for(var b of f){var _=this.stride*b;x.push(p[_+cc]>1?d3(p,_,this.clusterProps):this.points[p[_+uc]])}return x}getChildren(e){var n=this._getOriginId(e),s=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[s];if(!i)throw new Error(r);var l=i.data;if(n*this.stride>=l.length)throw new Error(r);var d=this.options.radius/(this.options.extent*Math.pow(2,s-1)),u=l[n*this.stride],h=l[n*this.stride+1],f=i.within(u,h,d),p=[];for(var x of f){var b=x*this.stride;l[b+M1]===e&&p.push(l[b+cc]>1?d3(l,b,this.clusterProps):this.points[l[b+uc]])}if(p.length===0)throw new Error(r);return p}getLeaves(e,n,s){n=n||10,s=s||0;var r=[];return this._appendLeaves(r,e,n,s,0),r}getTile(e,n,s){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:l,radius:d}=this.options,u=d/l,h=(s-u)/i,f=(s+1+u)/i,p={features:[]};return this._addTileFeatures(r.range((n-u)/i,h,(n+1+u)/i,f),r.data,n,s,i,p),n===0&&this._addTileFeatures(r.range(1-u/i,h,1,f),r.data,i,s,i,p),n===i-1&&this._addTileFeatures(r.range(0,h,u/i,f),r.data,-1,s,i,p),p.features.length?p:null}getClusterExpansionZoom(e){for(var n=this._getOriginZoom(e)-1;n<=this.options.maxZoom;){var s=this.getChildren(e);if(n++,s.length!==1)break;e=s[0].properties.cluster_id}return n}_appendLeaves(e,n,s,r,i){var l=this.getChildren(n);for(var d of l){var u=d.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,s,r,i):i<r?i++:e.push(d),e.length===s)break}return i}_createTree(e){for(var n=new vC(e.length/this.stride|0,this.options.nodeSize,Float32Array),s=0;s<e.length;s+=this.stride)n.add(e[s],e[s+1]);return n.finish(),n.data=e,n}_addTileFeatures(e,n,s,r,i,l){for(var d of e){var u=d*this.stride,h=n[u+cc]>1,f=void 0,p=void 0,x=void 0;if(h)f=dV(n,u,this.clusterProps),p=n[u],x=n[u+1];else{var b=this.points[n[u+uc]];f=b.properties;var[_,j]=b.geometry.coordinates;p=lx(_),x=cx(j)}var v={type:1,geometry:[[Math.round(this.options.extent*(p*i-s)),Math.round(this.options.extent*(x*i-r))]],tags:f},T=void 0;h||this.options.generateId?T=n[u+uc]:T=this.points[n[u+uc]].id,T!==void 0&&(v.id=T),l.features.push(v)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,n){for(var{radius:s,extent:r,reduce:i,minPoints:l}=this.options,d=s/(r*Math.pow(2,n)),u=e.data,h=[],f=this.stride,p=0;p<u.length;p+=f)if(!(u[p+wd]<=n)){u[p+wd]=n;var x=u[p],b=u[p+1],_=e.within(u[p],u[p+1],d),j=u[p+cc],v=j;for(var T of _){var P=T*f;u[P+wd]>n&&(v+=u[P+cc])}if(v>j&&v>=l){var A=x*j,C=b*j,M=void 0,L=-1,k=((p/f|0)<<5)+(n+1)+this.points.length;for(var R of _){var S=R*f;if(!(u[S+wd]<=n)){u[S+wd]=n;var O=u[S+cc];A+=u[S]*O,C+=u[S+1]*O,u[S+M1]=k,i&&(M||(M=this._map(u,p,!0),L=this.clusterProps.length,this.clusterProps.push(M)),i(M,this._map(u,S)))}}u[p+M1]=k,h.push(A/v,C/v,1/0,k,-1,v),i&&h.push(L)}else{for(var I=0;I<f;I++)h.push(u[p+I]);if(v>1)for(var F of _){var $=F*f;if(!(u[$+wd]<=n)){u[$+wd]=n;for(var Q=0;Q<f;Q++)h.push(u[$+Q])}}}}return h}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,n,s){if(e[n+cc]>1){var r=this.clusterProps[e[n+cV]];return s?Object.assign({},r):r}var i=this.points[e[n+uc]].properties,l=this.options.map(i);return s&&l===i?Object.assign({},l):l}}function d3(t,e,n){return{type:"Feature",id:t[e+uc],properties:dV(t,e,n),geometry:{type:"Point",coordinates:[oxe(t[e]),lxe(t[e+1])]}}}function dV(t,e,n){var s=t[e+cc],r=s>=1e4?"".concat(Math.round(s/1e3),"k"):s>=1e3?"".concat(Math.round(s/100)/10,"k"):s,i=t[e+cV],l=i===-1?{}:Object.assign({},n[i]);return Object.assign(l,{cluster:!0,cluster_id:t[e+uc],point_count:s,point_count_abbreviated:r})}function lx(t){return t/360+.5}function cx(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function oxe(t){return(t-.5)*360}function lxe(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function cxe(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}class Ea{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,n){this.isAdvancedMarker(e)?e.map=n:e.setMap(n)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class N2{constructor(e){var{markers:n,position:s}=e;this.markers=n,s&&(s instanceof google.maps.LatLng?this._position=s:this._position=new google.maps.LatLng(s))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var n of this.markers)e.extend(Ea.getPosition(n));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Ea.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Ea.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class dxe{constructor(e){var{maxZoom:n=16}=e;this.maxZoom=n}noop(e){var{markers:n}=e;return uxe(n)}}var uxe=t=>{var e=t.map(n=>new N2({position:Ea.getPosition(n),markers:[n]}));return e};class hxe extends dxe{constructor(e){var{maxZoom:n,radius:s=60}=e,r=cxe(e,["maxZoom","radius"]);super({maxZoom:n}),this.state={zoom:-1},this.superCluster=new ixe(Object.assign({maxZoom:this.maxZoom,radius:s},r))}calculate(e){var n=!1,s={zoom:e.map.getZoom()};if(!i3(e.markers,this.markers)){n=!0,this.markers=[...e.markers];var r=this.markers.map(i=>{var l=Ea.getPosition(i),d=[l.lng(),l.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:d},properties:{marker:i}}});this.superCluster.load(r)}return n||(this.state.zoom<=this.maxZoom||s.zoom<=this.maxZoom)&&(n=!i3(this.state,s)),this.state=s,n&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:n}}cluster(e){var{map:n}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(n.getZoom())).map(s=>this.transformCluster(s))}transformCluster(e){var{geometry:{coordinates:[n,s]},properties:r}=e;if(r.cluster)return new N2({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(l=>l.properties.marker),position:{lat:s,lng:n}});var i=r.marker;return new N2({markers:[i],position:Ea.getPosition(i)})}}class mxe{constructor(e,n){this.markers={sum:e.length};var s=n.map(i=>i.count),r=s.reduce((i,l)=>i+l,0);this.clusters={count:n.length,markers:{mean:r/n.length,sum:r,min:Math.min(...s),max:Math.max(...s)}}}}class fxe{render(e,n,s){var{count:r,position:i}=e,l=r>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff",d='<svg fill="'.concat(l,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(r,`</text>
</svg>`),u="Cluster of ".concat(r," markers"),h=Number(google.maps.Marker.MAX_ZINDEX)+r;if(Ea.isAdvancedMarkerAvailable(s)){var f=new DOMParser,p=f.parseFromString(d,"image/svg+xml").documentElement;p.setAttribute("transform","translate(0 25)");var x={map:s,position:i,zIndex:h,title:u,content:p};return new google.maps.marker.AdvancedMarkerElement(x)}var b={position:i,zIndex:h,title:u,icon:{url:"data:image/svg+xml;base64,".concat(btoa(d)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(b)}}function pxe(t,e){for(var n in e.prototype)t.prototype[n]=e.prototype[n]}class wC{constructor(){pxe(wC,google.maps.OverlayView)}}var up;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(up||(up={}));var gxe=(t,e,n)=>{n.fitBounds(e.bounds)};class xxe extends wC{constructor(e){var{map:n,markers:s=[],algorithmOptions:r={},algorithm:i=new hxe(r),renderer:l=new fxe,onClusterClick:d=gxe}=e;super(),this.markers=[...s],this.clusters=[],this.algorithm=i,this.renderer=l,this.onClusterClick=d,n&&this.setMap(n)}addMarker(e,n){this.markers.includes(e)||(this.markers.push(e),n||this.render())}addMarkers(e,n){e.forEach(s=>{this.addMarker(s,!0)}),n||this.render()}removeMarker(e,n){var s=this.markers.indexOf(e);return s===-1?!1:(Ea.setMap(e,null),this.markers.splice(s,1),n||this.render(),!0)}removeMarkers(e,n){var s=!1;return e.forEach(r=>{s=this.removeMarker(r,!0)||s}),s&&!n&&this.render(),s}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,up.CLUSTERING_BEGIN,this);var{clusters:n,changed:s}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(s||s==null){var r=new Set;for(var i of n)i.markers.length==1&&r.add(i.markers[0]);var l=[];for(var d of this.clusters)d.marker!=null&&(d.markers.length==1?r.has(d.marker)||Ea.setMap(d.marker,null):l.push(d.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>l.forEach(u=>Ea.setMap(u,null)))}google.maps.event.trigger(this,up.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Ea.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new mxe(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(s=>{s.markers.length===1?s.marker=s.markers[0]:(s.marker=this.renderer.render(s,e,n),s.markers.forEach(r=>Ea.setMap(r,null)),this.onClusterClick&&s.marker.addListener("click",r=>{google.maps.event.trigger(this,up.CLUSTER_CLICK,s),this.onClusterClick(r,s,n)})),Ea.setMap(s.marker,n)})}}function u3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function h3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function yxe(t){var e=m0e(),[n,s]=y.useState(null);return y.useEffect(()=>{if(e&&n===null){var r=new xxe(h3(h3({},t),{},{map:e}));s(r)}},[e]),n}function bxe(t){var{children:e,options:n}=t,s=yxe(n);return s!==null?e(s):null}y.memo(bxe);var m3={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},f3={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function vxe(t){var{children:e,anchor:n,options:s,position:r,zIndex:i,onCloseClick:l,onDomReady:d,onContentChanged:u,onPositionChanged:h,onZindexChanged:f,onLoad:p,onUnmount:x}=t,b=y.useContext(Tt),[_,j]=y.useState(null),[v,T]=y.useState(null),[P,A]=y.useState(null),[C,M]=y.useState(null),[L,k]=y.useState(null),[R,S]=y.useState(null),O=y.useRef(null);return y.useEffect(()=>{_!==null&&(_.close(),n?_.open(b,n):_.getPosition()&&_.open(b))},[b,_,n]),y.useEffect(()=>{s&&_!==null&&_.setOptions(s)},[_,s]),y.useEffect(()=>{r&&_!==null&&_.setPosition(r)},[r]),y.useEffect(()=>{typeof i=="number"&&_!==null&&_.setZIndex(i)},[i]),y.useEffect(()=>{_&&l&&(v!==null&&google.maps.event.removeListener(v),T(google.maps.event.addListener(_,"closeclick",l)))},[l]),y.useEffect(()=>{_&&d&&(P!==null&&google.maps.event.removeListener(P),A(google.maps.event.addListener(_,"domready",d)))},[d]),y.useEffect(()=>{_&&u&&(C!==null&&google.maps.event.removeListener(C),M(google.maps.event.addListener(_,"content_changed",u)))},[u]),y.useEffect(()=>{_&&h&&(L!==null&&google.maps.event.removeListener(L),k(google.maps.event.addListener(_,"position_changed",h)))},[h]),y.useEffect(()=>{_&&f&&(R!==null&&google.maps.event.removeListener(R),S(google.maps.event.addListener(_,"zindex_changed",f)))},[f]),y.useEffect(()=>{var I=new google.maps.InfoWindow(s);return j(I),O.current=document.createElement("div"),l&&T(google.maps.event.addListener(I,"closeclick",l)),d&&A(google.maps.event.addListener(I,"domready",d)),u&&M(google.maps.event.addListener(I,"content_changed",u)),h&&k(google.maps.event.addListener(I,"position_changed",h)),f&&S(google.maps.event.addListener(I,"zindex_changed",f)),I.setContent(O.current),r&&I.setPosition(r),i&&I.setZIndex(i),n?I.open(b,n):I.getPosition()?I.open(b):Gs(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),p&&p(I),()=>{v&&google.maps.event.removeListener(v),C&&google.maps.event.removeListener(C),P&&google.maps.event.removeListener(P),L&&google.maps.event.removeListener(L),R&&google.maps.event.removeListener(R),x&&x(I),I.close()}},[]),O.current?zc.createPortal(y.Children.only(e),O.current):null}y.memo(vxe);class wxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"containerElement",null),pe(this,"state",{infoWindow:null}),pe(this,"open",(e,n)=>{n?e.open(this.context,n):e.getPosition()?e.open(this.context):Gs(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),pe(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=It({updaterMap:f3,eventMap:m3,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:f3,eventMap:m3,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&($t(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?zc.createPortal(y.Children.only(this.props.children),this.containerElement):null}}pe(wxe,"contextType",Tt);function p3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Zy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var g3={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},x3={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},_xe={};function Exe(t){var{options:e,draggable:n,editable:s,visible:r,path:i,onDblClick:l,onDragEnd:d,onDragStart:u,onMouseDown:h,onMouseMove:f,onMouseOut:p,onMouseOver:x,onMouseUp:b,onRightClick:_,onClick:j,onDrag:v,onLoad:T,onUnmount:P}=t,A=y.useContext(Tt),[C,M]=y.useState(null),[L,k]=y.useState(null),[R,S]=y.useState(null),[O,I]=y.useState(null),[F,$]=y.useState(null),[Q,G]=y.useState(null),[B,z]=y.useState(null),[q,Z]=y.useState(null),[ee,H]=y.useState(null),[Y,X]=y.useState(null),[ie,te]=y.useState(null),[be,ve]=y.useState(null);return y.useEffect(()=>{C!==null&&C.setMap(A)},[A]),y.useEffect(()=>{typeof e<"u"&&C!==null&&C.setOptions(e)},[C,e]),y.useEffect(()=>{typeof n<"u"&&C!==null&&C.setDraggable(n)},[C,n]),y.useEffect(()=>{typeof s<"u"&&C!==null&&C.setEditable(s)},[C,s]),y.useEffect(()=>{typeof r<"u"&&C!==null&&C.setVisible(r)},[C,r]),y.useEffect(()=>{typeof i<"u"&&C!==null&&C.setPath(i)},[C,i]),y.useEffect(()=>{C&&l&&(L!==null&&google.maps.event.removeListener(L),k(google.maps.event.addListener(C,"dblclick",l)))},[l]),y.useEffect(()=>{C&&d&&(R!==null&&google.maps.event.removeListener(R),S(google.maps.event.addListener(C,"dragend",d)))},[d]),y.useEffect(()=>{C&&u&&(O!==null&&google.maps.event.removeListener(O),I(google.maps.event.addListener(C,"dragstart",u)))},[u]),y.useEffect(()=>{C&&h&&(F!==null&&google.maps.event.removeListener(F),$(google.maps.event.addListener(C,"mousedown",h)))},[h]),y.useEffect(()=>{C&&f&&(Q!==null&&google.maps.event.removeListener(Q),G(google.maps.event.addListener(C,"mousemove",f)))},[f]),y.useEffect(()=>{C&&p&&(B!==null&&google.maps.event.removeListener(B),z(google.maps.event.addListener(C,"mouseout",p)))},[p]),y.useEffect(()=>{C&&x&&(q!==null&&google.maps.event.removeListener(q),Z(google.maps.event.addListener(C,"mouseover",x)))},[x]),y.useEffect(()=>{C&&b&&(ee!==null&&google.maps.event.removeListener(ee),H(google.maps.event.addListener(C,"mouseup",b)))},[b]),y.useEffect(()=>{C&&_&&(Y!==null&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(C,"rightclick",_)))},[_]),y.useEffect(()=>{C&&j&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(C,"click",j)))},[j]),y.useEffect(()=>{C&&v&&(be!==null&&google.maps.event.removeListener(be),ve(google.maps.event.addListener(C,"drag",v)))},[v]),y.useEffect(()=>{var Se=new google.maps.Polyline(Zy(Zy({},e||_xe),{},{map:A}));return i&&Se.setPath(i),typeof r<"u"&&Se.setVisible(r),typeof s<"u"&&Se.setEditable(s),typeof n<"u"&&Se.setDraggable(n),l&&k(google.maps.event.addListener(Se,"dblclick",l)),d&&S(google.maps.event.addListener(Se,"dragend",d)),u&&I(google.maps.event.addListener(Se,"dragstart",u)),h&&$(google.maps.event.addListener(Se,"mousedown",h)),f&&G(google.maps.event.addListener(Se,"mousemove",f)),p&&z(google.maps.event.addListener(Se,"mouseout",p)),x&&Z(google.maps.event.addListener(Se,"mouseover",x)),b&&H(google.maps.event.addListener(Se,"mouseup",b)),_&&X(google.maps.event.addListener(Se,"rightclick",_)),j&&te(google.maps.event.addListener(Se,"click",j)),v&&ve(google.maps.event.addListener(Se,"drag",v)),M(Se),T&&T(Se),()=>{L!==null&&google.maps.event.removeListener(L),R!==null&&google.maps.event.removeListener(R),O!==null&&google.maps.event.removeListener(O),F!==null&&google.maps.event.removeListener(F),Q!==null&&google.maps.event.removeListener(Q),B!==null&&google.maps.event.removeListener(B),q!==null&&google.maps.event.removeListener(q),ee!==null&&google.maps.event.removeListener(ee),Y!==null&&google.maps.event.removeListener(Y),ie!==null&&google.maps.event.removeListener(ie),P&&P(Se),Se.setMap(null)}},[]),null}y.memo(Exe);class Nxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{polyline:null}),pe(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(Zy(Zy({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:x3,eventMap:g3,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:x3,eventMap:g3,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),$t(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}pe(Nxe,"contextType",Tt);function y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function b3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var v3={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},w3={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function jxe(t){var{options:e,draggable:n,editable:s,visible:r,path:i,paths:l,onDblClick:d,onDragEnd:u,onDragStart:h,onMouseDown:f,onMouseMove:p,onMouseOut:x,onMouseOver:b,onMouseUp:_,onRightClick:j,onClick:v,onDrag:T,onLoad:P,onUnmount:A,onEdit:C}=t,M=y.useContext(Tt),[L,k]=y.useState(null),[R,S]=y.useState(null),[O,I]=y.useState(null),[F,$]=y.useState(null),[Q,G]=y.useState(null),[B,z]=y.useState(null),[q,Z]=y.useState(null),[ee,H]=y.useState(null),[Y,X]=y.useState(null),[ie,te]=y.useState(null),[be,ve]=y.useState(null),[Se,Pe]=y.useState(null);return y.useEffect(()=>{L!==null&&L.setMap(M)},[M]),y.useEffect(()=>{typeof e<"u"&&L!==null&&L.setOptions(e)},[L,e]),y.useEffect(()=>{typeof n<"u"&&L!==null&&L.setDraggable(n)},[L,n]),y.useEffect(()=>{typeof s<"u"&&L!==null&&L.setEditable(s)},[L,s]),y.useEffect(()=>{typeof r<"u"&&L!==null&&L.setVisible(r)},[L,r]),y.useEffect(()=>{typeof i<"u"&&L!==null&&L.setPath(i)},[L,i]),y.useEffect(()=>{typeof l<"u"&&L!==null&&L.setPaths(l)},[L,l]),y.useEffect(()=>{L&&typeof d=="function"&&(R!==null&&google.maps.event.removeListener(R),S(google.maps.event.addListener(L,"dblclick",d)))},[d]),y.useEffect(()=>{L&&(google.maps.event.addListener(L.getPath(),"insert_at",()=>{C?.(L)}),google.maps.event.addListener(L.getPath(),"set_at",()=>{C?.(L)}),google.maps.event.addListener(L.getPath(),"remove_at",()=>{C?.(L)}))},[L,C]),y.useEffect(()=>{L&&typeof u=="function"&&(O!==null&&google.maps.event.removeListener(O),I(google.maps.event.addListener(L,"dragend",u)))},[u]),y.useEffect(()=>{L&&typeof h=="function"&&(F!==null&&google.maps.event.removeListener(F),$(google.maps.event.addListener(L,"dragstart",h)))},[h]),y.useEffect(()=>{L&&typeof f=="function"&&(Q!==null&&google.maps.event.removeListener(Q),G(google.maps.event.addListener(L,"mousedown",f)))},[f]),y.useEffect(()=>{L&&typeof p=="function"&&(B!==null&&google.maps.event.removeListener(B),z(google.maps.event.addListener(L,"mousemove",p)))},[p]),y.useEffect(()=>{L&&typeof x=="function"&&(q!==null&&google.maps.event.removeListener(q),Z(google.maps.event.addListener(L,"mouseout",x)))},[x]),y.useEffect(()=>{L&&typeof b=="function"&&(ee!==null&&google.maps.event.removeListener(ee),H(google.maps.event.addListener(L,"mouseover",b)))},[b]),y.useEffect(()=>{L&&typeof _=="function"&&(Y!==null&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(L,"mouseup",_)))},[_]),y.useEffect(()=>{L&&typeof j=="function"&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(L,"rightclick",j)))},[j]),y.useEffect(()=>{L&&typeof v=="function"&&(be!==null&&google.maps.event.removeListener(be),ve(google.maps.event.addListener(L,"click",v)))},[v]),y.useEffect(()=>{L&&typeof T=="function"&&(Se!==null&&google.maps.event.removeListener(Se),Pe(google.maps.event.addListener(L,"drag",T)))},[T]),y.useEffect(()=>{var Ie=new google.maps.Polygon(b3(b3({},e),{},{map:M}));return i&&Ie.setPath(i),l&&Ie.setPaths(l),typeof r<"u"&&Ie.setVisible(r),typeof s<"u"&&Ie.setEditable(s),typeof n<"u"&&Ie.setDraggable(n),d&&S(google.maps.event.addListener(Ie,"dblclick",d)),u&&I(google.maps.event.addListener(Ie,"dragend",u)),h&&$(google.maps.event.addListener(Ie,"dragstart",h)),f&&G(google.maps.event.addListener(Ie,"mousedown",f)),p&&z(google.maps.event.addListener(Ie,"mousemove",p)),x&&Z(google.maps.event.addListener(Ie,"mouseout",x)),b&&H(google.maps.event.addListener(Ie,"mouseover",b)),_&&X(google.maps.event.addListener(Ie,"mouseup",_)),j&&te(google.maps.event.addListener(Ie,"rightclick",j)),v&&ve(google.maps.event.addListener(Ie,"click",v)),T&&Pe(google.maps.event.addListener(Ie,"drag",T)),k(Ie),P&&P(Ie),()=>{R!==null&&google.maps.event.removeListener(R),O!==null&&google.maps.event.removeListener(O),F!==null&&google.maps.event.removeListener(F),Q!==null&&google.maps.event.removeListener(Q),B!==null&&google.maps.event.removeListener(B),q!==null&&google.maps.event.removeListener(q),ee!==null&&google.maps.event.removeListener(ee),Y!==null&&google.maps.event.removeListener(Y),ie!==null&&google.maps.event.removeListener(ie),be!==null&&google.maps.event.removeListener(be),A&&A(Ie),Ie.setMap(null)}},[]),null}y.memo(jxe);class Cxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=It({updaterMap:w3,eventMap:v3,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:w3,eventMap:v3,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),$t(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}pe(Cxe,"contextType",Tt);function _3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Jy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var E3={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},N3={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function Sxe(t){var{options:e,bounds:n,draggable:s,editable:r,visible:i,onDblClick:l,onDragEnd:d,onDragStart:u,onMouseDown:h,onMouseMove:f,onMouseOut:p,onMouseOver:x,onMouseUp:b,onRightClick:_,onClick:j,onDrag:v,onBoundsChanged:T,onLoad:P,onUnmount:A}=t,C=y.useContext(Tt),[M,L]=y.useState(null),[k,R]=y.useState(null),[S,O]=y.useState(null),[I,F]=y.useState(null),[$,Q]=y.useState(null),[G,B]=y.useState(null),[z,q]=y.useState(null),[Z,ee]=y.useState(null),[H,Y]=y.useState(null),[X,ie]=y.useState(null),[te,be]=y.useState(null),[ve,Se]=y.useState(null),[Pe,Ie]=y.useState(null);return y.useEffect(()=>{M!==null&&M.setMap(C)},[C]),y.useEffect(()=>{typeof e<"u"&&M!==null&&M.setOptions(e)},[M,e]),y.useEffect(()=>{typeof s<"u"&&M!==null&&M.setDraggable(s)},[M,s]),y.useEffect(()=>{typeof r<"u"&&M!==null&&M.setEditable(r)},[M,r]),y.useEffect(()=>{typeof i<"u"&&M!==null&&M.setVisible(i)},[M,i]),y.useEffect(()=>{typeof n<"u"&&M!==null&&M.setBounds(n)},[M,n]),y.useEffect(()=>{M&&l&&(k!==null&&google.maps.event.removeListener(k),R(google.maps.event.addListener(M,"dblclick",l)))},[l]),y.useEffect(()=>{M&&d&&(S!==null&&google.maps.event.removeListener(S),O(google.maps.event.addListener(M,"dragend",d)))},[d]),y.useEffect(()=>{M&&u&&(I!==null&&google.maps.event.removeListener(I),F(google.maps.event.addListener(M,"dragstart",u)))},[u]),y.useEffect(()=>{M&&h&&($!==null&&google.maps.event.removeListener($),Q(google.maps.event.addListener(M,"mousedown",h)))},[h]),y.useEffect(()=>{M&&f&&(G!==null&&google.maps.event.removeListener(G),B(google.maps.event.addListener(M,"mousemove",f)))},[f]),y.useEffect(()=>{M&&p&&(z!==null&&google.maps.event.removeListener(z),q(google.maps.event.addListener(M,"mouseout",p)))},[p]),y.useEffect(()=>{M&&x&&(Z!==null&&google.maps.event.removeListener(Z),ee(google.maps.event.addListener(M,"mouseover",x)))},[x]),y.useEffect(()=>{M&&b&&(H!==null&&google.maps.event.removeListener(H),Y(google.maps.event.addListener(M,"mouseup",b)))},[b]),y.useEffect(()=>{M&&_&&(X!==null&&google.maps.event.removeListener(X),ie(google.maps.event.addListener(M,"rightclick",_)))},[_]),y.useEffect(()=>{M&&j&&(te!==null&&google.maps.event.removeListener(te),be(google.maps.event.addListener(M,"click",j)))},[j]),y.useEffect(()=>{M&&v&&(ve!==null&&google.maps.event.removeListener(ve),Se(google.maps.event.addListener(M,"drag",v)))},[v]),y.useEffect(()=>{M&&T&&(Pe!==null&&google.maps.event.removeListener(Pe),Ie(google.maps.event.addListener(M,"bounds_changed",T)))},[T]),y.useEffect(()=>{var Fe=new google.maps.Rectangle(Jy(Jy({},e),{},{map:C}));return typeof i<"u"&&Fe.setVisible(i),typeof r<"u"&&Fe.setEditable(r),typeof s<"u"&&Fe.setDraggable(s),typeof n<"u"&&Fe.setBounds(n),l&&R(google.maps.event.addListener(Fe,"dblclick",l)),d&&O(google.maps.event.addListener(Fe,"dragend",d)),u&&F(google.maps.event.addListener(Fe,"dragstart",u)),h&&Q(google.maps.event.addListener(Fe,"mousedown",h)),f&&B(google.maps.event.addListener(Fe,"mousemove",f)),p&&q(google.maps.event.addListener(Fe,"mouseout",p)),x&&ee(google.maps.event.addListener(Fe,"mouseover",x)),b&&Y(google.maps.event.addListener(Fe,"mouseup",b)),_&&ie(google.maps.event.addListener(Fe,"rightclick",_)),j&&be(google.maps.event.addListener(Fe,"click",j)),v&&Se(google.maps.event.addListener(Fe,"drag",v)),T&&Ie(google.maps.event.addListener(Fe,"bounds_changed",T)),L(Fe),P&&P(Fe),()=>{k!==null&&google.maps.event.removeListener(k),S!==null&&google.maps.event.removeListener(S),I!==null&&google.maps.event.removeListener(I),$!==null&&google.maps.event.removeListener($),G!==null&&google.maps.event.removeListener(G),z!==null&&google.maps.event.removeListener(z),Z!==null&&google.maps.event.removeListener(Z),H!==null&&google.maps.event.removeListener(H),X!==null&&google.maps.event.removeListener(X),te!==null&&google.maps.event.removeListener(te),ve!==null&&google.maps.event.removeListener(ve),Pe!==null&&google.maps.event.removeListener(Pe),A&&A(Fe),Fe.setMap(null)}},[]),null}y.memo(Sxe);class Txe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{rectangle:null}),pe(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(Jy(Jy({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:N3,eventMap:E3,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:N3,eventMap:E3,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),$t(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}pe(Txe,"contextType",Tt);function j3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function eb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var C3={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},S3={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},kxe={};function Axe(t){var{options:e,center:n,radius:s,draggable:r,editable:i,visible:l,onDblClick:d,onDragEnd:u,onDragStart:h,onMouseDown:f,onMouseMove:p,onMouseOut:x,onMouseOver:b,onMouseUp:_,onRightClick:j,onClick:v,onDrag:T,onCenterChanged:P,onRadiusChanged:A,onLoad:C,onUnmount:M}=t,L=y.useContext(Tt),[k,R]=y.useState(null),[S,O]=y.useState(null),[I,F]=y.useState(null),[$,Q]=y.useState(null),[G,B]=y.useState(null),[z,q]=y.useState(null),[Z,ee]=y.useState(null),[H,Y]=y.useState(null),[X,ie]=y.useState(null),[te,be]=y.useState(null),[ve,Se]=y.useState(null),[Pe,Ie]=y.useState(null),[Fe,We]=y.useState(null),[kt,nn]=y.useState(null);return y.useEffect(()=>{k!==null&&k.setMap(L)},[L]),y.useEffect(()=>{typeof e<"u"&&k!==null&&k.setOptions(e)},[k,e]),y.useEffect(()=>{typeof r<"u"&&k!==null&&k.setDraggable(r)},[k,r]),y.useEffect(()=>{typeof i<"u"&&k!==null&&k.setEditable(i)},[k,i]),y.useEffect(()=>{typeof l<"u"&&k!==null&&k.setVisible(l)},[k,l]),y.useEffect(()=>{typeof s=="number"&&k!==null&&k.setRadius(s)},[k,s]),y.useEffect(()=>{typeof n<"u"&&k!==null&&k.setCenter(n)},[k,n]),y.useEffect(()=>{k&&d&&(S!==null&&google.maps.event.removeListener(S),O(google.maps.event.addListener(k,"dblclick",d)))},[d]),y.useEffect(()=>{k&&u&&(I!==null&&google.maps.event.removeListener(I),F(google.maps.event.addListener(k,"dragend",u)))},[u]),y.useEffect(()=>{k&&h&&($!==null&&google.maps.event.removeListener($),Q(google.maps.event.addListener(k,"dragstart",h)))},[h]),y.useEffect(()=>{k&&f&&(G!==null&&google.maps.event.removeListener(G),B(google.maps.event.addListener(k,"mousedown",f)))},[f]),y.useEffect(()=>{k&&p&&(z!==null&&google.maps.event.removeListener(z),q(google.maps.event.addListener(k,"mousemove",p)))},[p]),y.useEffect(()=>{k&&x&&(Z!==null&&google.maps.event.removeListener(Z),ee(google.maps.event.addListener(k,"mouseout",x)))},[x]),y.useEffect(()=>{k&&b&&(H!==null&&google.maps.event.removeListener(H),Y(google.maps.event.addListener(k,"mouseover",b)))},[b]),y.useEffect(()=>{k&&_&&(X!==null&&google.maps.event.removeListener(X),ie(google.maps.event.addListener(k,"mouseup",_)))},[_]),y.useEffect(()=>{k&&j&&(te!==null&&google.maps.event.removeListener(te),be(google.maps.event.addListener(k,"rightclick",j)))},[j]),y.useEffect(()=>{k&&v&&(ve!==null&&google.maps.event.removeListener(ve),Se(google.maps.event.addListener(k,"click",v)))},[v]),y.useEffect(()=>{k&&T&&(Pe!==null&&google.maps.event.removeListener(Pe),Ie(google.maps.event.addListener(k,"drag",T)))},[T]),y.useEffect(()=>{k&&P&&(Fe!==null&&google.maps.event.removeListener(Fe),We(google.maps.event.addListener(k,"center_changed",P)))},[v]),y.useEffect(()=>{k&&A&&(kt!==null&&google.maps.event.removeListener(kt),nn(google.maps.event.addListener(k,"radius_changed",A)))},[A]),y.useEffect(()=>{var Ze=new google.maps.Circle(eb(eb({},e||kxe),{},{map:L}));return typeof s=="number"&&Ze.setRadius(s),typeof n<"u"&&Ze.setCenter(n),typeof s=="number"&&Ze.setRadius(s),typeof l<"u"&&Ze.setVisible(l),typeof i<"u"&&Ze.setEditable(i),typeof r<"u"&&Ze.setDraggable(r),d&&O(google.maps.event.addListener(Ze,"dblclick",d)),u&&F(google.maps.event.addListener(Ze,"dragend",u)),h&&Q(google.maps.event.addListener(Ze,"dragstart",h)),f&&B(google.maps.event.addListener(Ze,"mousedown",f)),p&&q(google.maps.event.addListener(Ze,"mousemove",p)),x&&ee(google.maps.event.addListener(Ze,"mouseout",x)),b&&Y(google.maps.event.addListener(Ze,"mouseover",b)),_&&ie(google.maps.event.addListener(Ze,"mouseup",_)),j&&be(google.maps.event.addListener(Ze,"rightclick",j)),v&&Se(google.maps.event.addListener(Ze,"click",v)),T&&Ie(google.maps.event.addListener(Ze,"drag",T)),P&&We(google.maps.event.addListener(Ze,"center_changed",P)),A&&nn(google.maps.event.addListener(Ze,"radius_changed",A)),R(Ze),C&&C(Ze),()=>{S!==null&&google.maps.event.removeListener(S),I!==null&&google.maps.event.removeListener(I),$!==null&&google.maps.event.removeListener($),G!==null&&google.maps.event.removeListener(G),z!==null&&google.maps.event.removeListener(z),Z!==null&&google.maps.event.removeListener(Z),H!==null&&google.maps.event.removeListener(H),X!==null&&google.maps.event.removeListener(X),te!==null&&google.maps.event.removeListener(te),ve!==null&&google.maps.event.removeListener(ve),Fe!==null&&google.maps.event.removeListener(Fe),kt!==null&&google.maps.event.removeListener(kt),M&&M(Ze),Ze.setMap(null)}},[]),null}y.memo(Axe);class Rxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{circle:null}),pe(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(eb(eb({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:S3,eventMap:C3,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:S3,eventMap:C3,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),$t(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}pe(Rxe,"contextType",Tt);function T3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function tb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var k3={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},A3={add(t,e){t.add(e)},addgeojson(t,e,n){t.addGeoJson(e,n)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,n,s){t.loadGeoJson(e,n,s)},overridestyle(t,e,n){t.overrideStyle(e,n)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function Dxe(t){var{options:e,onClick:n,onDblClick:s,onMouseDown:r,onMouseMove:i,onMouseOut:l,onMouseOver:d,onMouseUp:u,onRightClick:h,onAddFeature:f,onRemoveFeature:p,onRemoveProperty:x,onSetGeometry:b,onSetProperty:_,onLoad:j,onUnmount:v}=t,T=y.useContext(Tt),[P,A]=y.useState(null),[C,M]=y.useState(null),[L,k]=y.useState(null),[R,S]=y.useState(null),[O,I]=y.useState(null),[F,$]=y.useState(null),[Q,G]=y.useState(null),[B,z]=y.useState(null),[q,Z]=y.useState(null),[ee,H]=y.useState(null),[Y,X]=y.useState(null),[ie,te]=y.useState(null),[be,ve]=y.useState(null),[Se,Pe]=y.useState(null);return y.useEffect(()=>{P!==null&&P.setMap(T)},[T]),y.useEffect(()=>{P&&s&&(C!==null&&google.maps.event.removeListener(C),M(google.maps.event.addListener(P,"dblclick",s)))},[s]),y.useEffect(()=>{P&&r&&(L!==null&&google.maps.event.removeListener(L),k(google.maps.event.addListener(P,"mousedown",r)))},[r]),y.useEffect(()=>{P&&i&&(R!==null&&google.maps.event.removeListener(R),S(google.maps.event.addListener(P,"mousemove",i)))},[i]),y.useEffect(()=>{P&&l&&(O!==null&&google.maps.event.removeListener(O),I(google.maps.event.addListener(P,"mouseout",l)))},[l]),y.useEffect(()=>{P&&d&&(F!==null&&google.maps.event.removeListener(F),$(google.maps.event.addListener(P,"mouseover",d)))},[d]),y.useEffect(()=>{P&&u&&(Q!==null&&google.maps.event.removeListener(Q),G(google.maps.event.addListener(P,"mouseup",u)))},[u]),y.useEffect(()=>{P&&h&&(B!==null&&google.maps.event.removeListener(B),z(google.maps.event.addListener(P,"rightclick",h)))},[h]),y.useEffect(()=>{P&&n&&(q!==null&&google.maps.event.removeListener(q),Z(google.maps.event.addListener(P,"click",n)))},[n]),y.useEffect(()=>{P&&f&&(ee!==null&&google.maps.event.removeListener(ee),H(google.maps.event.addListener(P,"addfeature",f)))},[f]),y.useEffect(()=>{P&&p&&(Y!==null&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(P,"removefeature",p)))},[p]),y.useEffect(()=>{P&&x&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(P,"removeproperty",x)))},[x]),y.useEffect(()=>{P&&b&&(be!==null&&google.maps.event.removeListener(be),ve(google.maps.event.addListener(P,"setgeometry",b)))},[b]),y.useEffect(()=>{P&&_&&(Se!==null&&google.maps.event.removeListener(Se),Pe(google.maps.event.addListener(P,"setproperty",_)))},[_]),y.useEffect(()=>{if(T!==null){var Ie=new google.maps.Data(tb(tb({},e),{},{map:T}));s&&M(google.maps.event.addListener(Ie,"dblclick",s)),r&&k(google.maps.event.addListener(Ie,"mousedown",r)),i&&S(google.maps.event.addListener(Ie,"mousemove",i)),l&&I(google.maps.event.addListener(Ie,"mouseout",l)),d&&$(google.maps.event.addListener(Ie,"mouseover",d)),u&&G(google.maps.event.addListener(Ie,"mouseup",u)),h&&z(google.maps.event.addListener(Ie,"rightclick",h)),n&&Z(google.maps.event.addListener(Ie,"click",n)),f&&H(google.maps.event.addListener(Ie,"addfeature",f)),p&&X(google.maps.event.addListener(Ie,"removefeature",p)),x&&te(google.maps.event.addListener(Ie,"removeproperty",x)),b&&ve(google.maps.event.addListener(Ie,"setgeometry",b)),_&&Pe(google.maps.event.addListener(Ie,"setproperty",_)),A(Ie),j&&j(Ie)}return()=>{P&&(C!==null&&google.maps.event.removeListener(C),L!==null&&google.maps.event.removeListener(L),R!==null&&google.maps.event.removeListener(R),O!==null&&google.maps.event.removeListener(O),F!==null&&google.maps.event.removeListener(F),Q!==null&&google.maps.event.removeListener(Q),B!==null&&google.maps.event.removeListener(B),q!==null&&google.maps.event.removeListener(q),ee!==null&&google.maps.event.removeListener(ee),Y!==null&&google.maps.event.removeListener(Y),ie!==null&&google.maps.event.removeListener(ie),be!==null&&google.maps.event.removeListener(be),Se!==null&&google.maps.event.removeListener(Se),v&&v(P),P.setMap(null))}},[]),null}y.memo(Dxe);class Pxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{data:null}),pe(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(tb(tb({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:A3,eventMap:k3,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:A3,eventMap:k3,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),$t(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}pe(Pxe,"contextType",Tt);function R3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function D3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var P3={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},M3={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class Mxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{kmlLayer:null}),pe(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(D3(D3({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:M3,eventMap:P3,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:M3,eventMap:P3,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),$t(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}pe(Mxe,"contextType",Tt);function uV(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function Lxe(t,e){return new e(t.lat,t.lng)}function Ixe(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function Oxe(t,e,n){return t instanceof e?t:n(t,e)}function Vxe(t,e,n){return t instanceof e?t:n(t,e)}function Uxe(t,e,n){var s=t&&t.fromLatLngToDivPixel(n.getNorthEast()),r=t&&t.fromLatLngToDivPixel(n.getSouthWest());return s&&r?{left:"".concat(r.x+e.x,"px"),top:"".concat(s.y+e.y,"px"),width:"".concat(s.x-r.x-e.x,"px"),height:"".concat(r.y-s.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function Bxe(t,e,n){var s=t&&t.fromLatLngToDivPixel(n);if(s){var{x:r,y:i}=s;return{left:"".concat(r+e.x,"px"),top:"".concat(i+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function hV(t,e,n,s){return n!==void 0?Uxe(t,e,Vxe(n,google.maps.LatLngBounds,Ixe)):Bxe(t,e,Oxe(s,google.maps.LatLng,Lxe))}function Fxe(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function L3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function $xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function zxe(t,e,n,s,r){class i extends google.maps.OverlayView{constructor(d,u,h,f){super(),this.container=d,this.pane=u,this.position=h,this.bounds=f}onAdd(){var d,u=(d=this.getPanes())===null||d===void 0?void 0:d[this.pane];u?.appendChild(this.container)}draw(){var d=this.getProjection(),u=$xe({},this.container?uV(this.container,r):{x:0,y:0}),h=hV(d,u,this.bounds,this.position);for(var[f,p]of Object.entries(h))this.container.style[f]=p}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new i(t,e,n,s)}function I3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Hxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function O3(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function V3(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function qxe(t){var{position:e,bounds:n,mapPaneName:s,zIndex:r,onLoad:i,onUnmount:l,getPixelPositionOffset:d,children:u}=t,h=y.useContext(Tt),f=y.useMemo(()=>{var x=document.createElement("div");return x.style.position="absolute",x},[]),p=y.useMemo(()=>zxe(f,s,e,n,d),[f,s,e,n]);return y.useEffect(()=>(i?.(p),p?.setMap(h),()=>{l?.(p),p?.setMap(null)}),[h,p]),y.useEffect(()=>{f.style.zIndex="".concat(r)},[r,f]),zc.createPortal(u,f)}y.memo(qxe);class fm extends y.PureComponent{constructor(e){super(e),pe(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),pe(this,"updatePane",()=>{var s=this.props.mapPaneName,r=this.overlayView.getPanes();Gs(!!s,"OverlayView requires props.mapPaneName but got %s",s),r?this.setState({paneEl:r[s]}):this.setState({paneEl:null})}),pe(this,"onAdd",()=>{var s,r;this.updatePane(),(s=(r=this.props).onLoad)===null||s===void 0||s.call(r,this.overlayView)}),pe(this,"onPositionElement",()=>{var s=this.overlayView.getProjection(),r=Hxe({x:0,y:0},this.containerRef.current?uV(this.containerRef.current,this.props.getPixelPositionOffset):{}),i=hV(s,r,this.props.bounds,this.props.position);if(!Fxe(i,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var l,d,u,h;this.setState({containerStyle:{top:(l=i.top)!==null&&l!==void 0?l:0,left:(d=i.left)!==null&&d!==void 0?d:0,width:(u=i.width)!==null&&u!==void 0?u:0,height:(h=i.height)!==null&&h!==void 0?h:0,position:"absolute"}})}}),pe(this,"draw",()=>{this.onPositionElement()}),pe(this,"onRemove",()=>{var s,r;this.setState(()=>({paneEl:null})),(s=(r=this.props).onUnmount)===null||s===void 0||s.call(r,this.overlayView)}),this.containerRef=y.createRef();var n=new google.maps.OverlayView;n.onAdd=this.onAdd,n.draw=this.draw,n.onRemove=this.onRemove,this.overlayView=n}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var n=O3(e.position),s=O3(this.props.position),r=V3(e.bounds),i=V3(this.props.bounds);(n!==s||r!==i)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?zc.createPortal(a.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:y.Children.only(this.props.children)}),e):null}}pe(fm,"FLOAT_PANE","floatPane");pe(fm,"MAP_PANE","mapPane");pe(fm,"MARKER_LAYER","markerLayer");pe(fm,"OVERLAY_LAYER","overlayLayer");pe(fm,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");pe(fm,"contextType",Tt);function Wxe(){}function U3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function B3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var F3={onDblClick:"dblclick",onClick:"click"},$3={opacity(t,e){t.setOpacity(e)}};function Yxe(t){var{url:e,bounds:n,options:s,visible:r}=t,i=y.useContext(Tt),l=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),d=y.useMemo(()=>new google.maps.GroundOverlay(e,l,s),[]);return y.useEffect(()=>{d!==null&&d.setMap(i)},[i]),y.useEffect(()=>{typeof e<"u"&&d!==null&&(d.set("url",e),d.setMap(i))},[d,e]),y.useEffect(()=>{typeof r<"u"&&d!==null&&d.setOpacity(r?1:0)},[d,r]),y.useEffect(()=>{var u=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));typeof n<"u"&&d!==null&&(d.set("bounds",u),d.setMap(i))},[d,n]),null}y.memo(Yxe);class mV extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{groundOverlay:null}),pe(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){Gs(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,B3(B3({},this.props.options),{},{map:this.context}));this.registeredEvents=It({updaterMap:$3,eventMap:F3,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:$3,eventMap:F3,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}pe(mV,"defaultProps",{onLoad:Wxe});pe(mV,"contextType",Tt);function z3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function nb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z3(Object(n),!0).forEach(function(s){pe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z3(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}var H3={},q3={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function Gxe(t){var{data:e,onLoad:n,onUnmount:s,options:r}=t,i=y.useContext(Tt),[l,d]=y.useState(null);return y.useEffect(()=>{google.maps.visualization||Gs(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),y.useEffect(()=>{Gs(!!e,"data property is required in HeatmapLayer %s",e)},[e]),y.useEffect(()=>{l!==null&&l.setMap(i)},[i]),y.useEffect(()=>{r&&l!==null&&l.setOptions(r)},[l,r]),y.useEffect(()=>{var u=new google.maps.visualization.HeatmapLayer(nb(nb({},r),{},{data:e,map:i}));return d(u),n&&n(u),()=>{l!==null&&(s&&s(l),l.setMap(null))}},[]),null}y.memo(Gxe);class Kxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{heatmapLayer:null}),pe(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){Gs(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Gs(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(nb(nb({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=It({updaterMap:q3,eventMap:H3,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){$t(this.registeredEvents),this.registeredEvents=It({updaterMap:q3,eventMap:H3,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),$t(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}pe(Kxe,"contextType",Tt);var W3={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Y3={register(t,e,n){t.registerPanoProvider(e,n)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class Qxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{streetViewPanorama:null}),pe(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,n,s=(e=(n=this.context)===null||n===void 0?void 0:n.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=It({updaterMap:Y3,eventMap:W3,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({streetViewPanorama:s}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:Y3,eventMap:W3,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),$t(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}pe(Qxe,"contextType",Tt);class Xxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"state",{streetViewService:null}),pe(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}pe(Xxe,"contextType",Tt);var G3={onDirectionsChanged:"directions_changed"},K3={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class Zxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"state",{directionsRenderer:null}),pe(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=It({updaterMap:K3,eventMap:G3,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:K3,eventMap:G3,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),$t(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}pe(Zxe,"contextType",Tt);var Q3={onPlacesChanged:"places_changed"},X3={bounds(t,e){t.setBounds(e)}};class Jxe extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"containerElement",y.createRef()),pe(this,"state",{searchBox:null}),pe(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(Gs(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var n=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=It({updaterMap:X3,eventMap:Q3,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{searchBox:n}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&($t(this.registeredEvents),this.registeredEvents=It({updaterMap:X3,eventMap:Q3,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),$t(this.registeredEvents))}render(){return a.jsx("div",{ref:this.containerElement,children:y.Children.only(this.props.children)})}}pe(Jxe,"contextType",Tt);var Z3={onPlaceChanged:"place_changed"},J3={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class fV extends y.PureComponent{constructor(){super(...arguments),pe(this,"registeredEvents",[]),pe(this,"containerElement",y.createRef()),pe(this,"state",{autocomplete:null}),pe(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;Gs(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var n=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(n){var s=new google.maps.places.Autocomplete(n,this.props.options);this.registeredEvents=It({updaterMap:J3,eventMap:Z3,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({autocomplete:s}),this.setAutocompleteCallback)}}componentDidUpdate(e){$t(this.registeredEvents),this.registeredEvents=It({updaterMap:J3,eventMap:Z3,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&$t(this.registeredEvents)}render(){return a.jsx("div",{ref:this.containerElement,className:this.props.className,children:y.Children.only(this.props.children)})}}pe(fV,"defaultProps",{className:""});pe(fV,"contextType",Tt);function eye(t){if(!t)return null;if(t.latitude!=null&&t.longitude!=null)return`https://www.google.com/maps/dir/?api=1&destination=${t.latitude},${t.longitude}`;const n=[t.address,t.commune,t.region].filter(Boolean).join(", ");return n?`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(n)}`:null}function pV({company:t,theme:e,googleMapsApiKey:n,isCarousel:s=!1}){if(!t.latitude||!t.longitude)return null;const r=!!n,i=eye(t);return s?a.jsxs("div",{className:"w-full h-full flex flex-col rounded-2xl sm:rounded-3xl p-6 sm:p-8 md:p-10 lg:p-12 shadow-lg",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[a.jsx("h2",{className:"font-bold text-2xl sm:text-3xl md:text-4xl lg:text-5xl mb-4 sm:mb-6",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Ubicacin"}),a.jsx("p",{className:"mb-4 sm:mb-6 text-lg sm:text-xl md:text-2xl leading-relaxed",children:t.address}),i&&a.jsx("div",{className:"mb-4 sm:mb-6",children:a.jsx(Mt,{onClick:()=>window.open(i,"_blank","noopener,noreferrer"),className:"px-4 py-2 text-sm font-semibold rounded-lg shadow-md transition",style:{backgroundColor:"#2563eb",color:"#ffffff",fontFamily:e.fontButton},ariaLabel:"Cmo llegar",children:" Cmo llegar"})}),a.jsx("div",{className:"flex-1 min-h-0 w-full rounded-xl sm:rounded-2xl overflow-hidden shadow-lg",children:r?a.jsx(w2,{googleMapsApiKey:n,libraries:wM,loadingElement:a.jsx("div",{className:"h-full w-full bg-gray-100 animate-pulse"}),children:a.jsx(BM,{mapContainerStyle:{width:"100%",height:"100%"},center:{lat:t.latitude,lng:t.longitude},zoom:15,children:a.jsx(_2,{position:{lat:t.latitude,lng:t.longitude}})})}):a.jsx("div",{className:"h-full w-full bg-gray-100 flex items-center justify-center text-sm sm:text-base text-gray-600",children:"Mapa no disponible: falta la clave de Google Maps"})})]}):a.jsxs("div",{className:"mb-6 rounded-lg p-4 sm:p-5 shadow",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:[a.jsx("h2",{className:"font-semibold text-base sm:text-lg mb-2",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Ubicacin"}),a.jsx("p",{className:"mb-3 text-sm leading-relaxed",children:t.address}),i&&a.jsx("div",{className:"mb-3",children:a.jsx(Mt,{onClick:()=>window.open(i,"_blank","noopener,noreferrer"),className:"px-3 py-2 text-xs sm:text-sm font-semibold rounded-lg shadow-sm transition",style:{backgroundColor:"#2563eb",color:"#ffffff",fontFamily:e.fontButton},ariaLabel:"Cmo llegar",children:" Cmo llegar"})}),a.jsx("div",{className:"h-40 sm:h-56 w-full rounded overflow-hidden",children:r?a.jsx(w2,{googleMapsApiKey:n,libraries:wM,loadingElement:a.jsx("div",{className:"h-full w-full bg-gray-100 animate-pulse"}),children:a.jsx(BM,{mapContainerStyle:{width:"100%",height:"100%"},center:{lat:t.latitude,lng:t.longitude},zoom:15,children:a.jsx(_2,{position:{lat:t.latitude,lng:t.longitude}})})}):a.jsx("div",{className:"h-full w-full bg-gray-100 flex items-center justify-center text-xs text-gray-600",children:"Mapa no disponible: falta la clave de Google Maps"})})]})}const tye=Object.freeze(Object.defineProperty({__proto__:null,LocationMapCard:pV},Symbol.toStringTag,{value:"Module"}));function eL({service:t,theme:e,onBook:n,onServiceClick:s}){const r=()=>{s(t)},i=l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),s(t))};return a.jsxs("div",{onClick:r,onKeyDown:i,role:"button",tabIndex:0,"aria-label":`Ver detalles del servicio ${t.name}`,className:"rounded-xl sm:rounded-2xl shadow-lg overflow-hidden flex flex-col border hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 cursor-pointer h-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 group",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:`${e.buttonColor}15`,boxShadow:`0 4px 16px ${e.buttonColor}08, 0 1px 3px rgba(0,0,0,0.08)`},children:[a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"w-full h-36 xs:h-40 sm:h-44 md:h-48 flex items-center justify-center group relative flex-shrink-0",style:{backgroundColor:`${e.buttonColor}08`,backgroundImage:`linear-gradient(135deg, ${e.buttonColor}05 0%, ${e.buttonColor}02 100%)`},children:[a.jsx("img",{src:t.image_url,alt:`Imagen del servicio ${t.name}`,className:"max-h-full max-w-full object-contain transition-all duration-500 group-hover:scale-110 group-hover:brightness-105",loading:"lazy",width:"400",height:"400",decoding:"async",style:{aspectRatio:"1 / 1"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/0 via-black/0 to-black/0 group-hover:from-black/5 group-hover:via-black/0 group-hover:to-black/0 transition-all duration-300 flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold opacity-0 group-hover:opacity-100 bg-black/70 backdrop-blur-sm px-3 sm:px-4 py-1.5 rounded-full transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 shadow-lg",children:"Ver detalles"})})]})}),a.jsxs("div",{className:"p-3 sm:p-4 md:p-5 flex flex-col flex-1",children:[a.jsx("h3",{className:"font-bold text-sm sm:text-base md:text-lg mb-2 sm:mb-2.5 line-clamp-2 leading-snug",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),a.jsx("p",{className:"text-xs sm:text-sm mb-3 sm:mb-4 line-clamp-2 flex-1 leading-relaxed",style:{color:e.textColor,opacity:.75},children:t.description}),a.jsxs("div",{className:"flex justify-between items-center mb-3 sm:mb-4 text-xs sm:text-sm",children:[t.hide_price?a.jsxs("span",{className:"text-xs sm:text-sm font-medium flex items-center gap-1",style:{color:"#25D366",fontFamily:e.fontBody},children:[a.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio"]}):a.jsxs("span",{className:"text-sm sm:text-base md:text-lg font-bold",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),a.jsxs("span",{className:"flex items-center gap-1",style:{color:e.subtitleColor},children:[a.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("span",{className:"text-xs sm:text-sm",children:[t.estimated_duration_minutes," min"]})]})]}),a.jsx("div",{onClick:l=>l.stopPropagation(),children:a.jsx(Mt,{onClick:()=>n(t),style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full py-2 sm:py-2.5 text-sm sm:text-base rounded-xl hover:opacity-90 font-semibold shadow-md hover:shadow-lg transition-all duration-300 active:scale-[0.98]",ariaLabel:`Agendar servicio ${t.name}`,children:a.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[e.serviceCardEmoji||"",a.jsx("span",{children:"Agendar"})]})})})]})]})}function nye({service:t,theme:e,onBook:n,onServiceClick:s}){const r=()=>{s(t)},i=l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),s(t))};return a.jsxs("div",{onClick:r,onKeyDown:i,role:"button",tabIndex:0,"aria-label":`Ver detalles del servicio ${t.name}`,className:"rounded-2xl sm:rounded-3xl overflow-hidden flex flex-col border hover:shadow-2xl hover:scale-[1.01] transition-all duration-300 cursor-pointer relative group h-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:`${e.buttonColor}25`,boxShadow:`0 10px 40px ${e.buttonColor}10, 0 2px 8px rgba(0,0,0,0.08)`},children:[a.jsxs("div",{className:"relative h-40 xs:h-44 sm:h-48 md:h-52 lg:h-56 overflow-hidden",children:[a.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{background:`linear-gradient(135deg, ${e.buttonColor}12 0%, ${e.buttonColor}04 50%, ${e.buttonColor}02 100%)`},children:a.jsx("img",{src:t.image_url,alt:`Imagen del servicio ${t.name}`,className:"max-h-full max-w-full object-contain transition-all duration-700 group-hover:scale-110 group-hover:brightness-105",loading:"lazy",width:"400",height:"400",decoding:"async",style:{aspectRatio:"1 / 1"}})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/8 group-hover:to-black/12 transition-all duration-300"})]}),a.jsxs("div",{className:"p-4 sm:p-5 md:p-6 lg:p-7 flex flex-col flex-1 relative",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1",style:{background:`linear-gradient(90deg, ${e.buttonColor} 0%, ${e.buttonColor}CC 50%, ${e.buttonColor}66 100%)`}}),a.jsx("h3",{className:"font-extrabold text-base sm:text-lg md:text-xl lg:text-2xl mb-2 sm:mb-3 mt-2 line-clamp-2 leading-tight",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),a.jsx("p",{className:"text-sm sm:text-base md:text-lg mb-4 sm:mb-5 line-clamp-2 flex-1 leading-relaxed sm:leading-loose",style:{color:e.textColor,opacity:.75},children:t.description}),a.jsx("div",{className:"flex items-center justify-between mb-4 sm:mb-5",children:a.jsxs("div",{children:[t.hide_price?a.jsxs("span",{className:"text-sm sm:text-base md:text-lg font-medium flex items-center gap-1.5",style:{color:"#25D366",fontFamily:e.fontBody},children:[a.jsx("svg",{className:"w-4 sm:w-5 h-4 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio por WhatsApp"]}):a.jsxs("span",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-extrabold block",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),a.jsxs("span",{className:"text-xs sm:text-sm font-light mt-0.5",style:{color:e.subtitleColor},children:["Duracin: ",t.estimated_duration_minutes," min"]})]})}),a.jsx("div",{onClick:l=>l.stopPropagation(),children:a.jsx(Mt,{onClick:()=>n(t),style:{background:`linear-gradient(135deg, ${e.buttonColor} 0%, ${e.buttonColor}DD 100%)`,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full py-3 sm:py-3.5 md:py-4 text-sm sm:text-base md:text-lg rounded-xl sm:rounded-2xl hover:opacity-90 font-bold shadow-lg hover:shadow-xl transition-all duration-300 active:scale-[0.98]",ariaLabel:`Agendar servicio ${t.name}`,children:a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.serviceCardEmoji||"",a.jsx("span",{children:"Reservar"})]})})})]})]})}function sye({service:t,theme:e,onBook:n,onServiceClick:s}){const r=()=>{s(t)},i=l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),s(t))};return a.jsxs("div",{onClick:r,onKeyDown:i,role:"button",tabIndex:0,"aria-label":`Ver detalles del servicio ${t.name}`,className:"rounded-xl sm:rounded-2xl overflow-hidden flex flex-col sm:flex-row items-center gap-3 sm:gap-4 md:gap-5 p-3 sm:p-4 md:p-5 border hover:shadow-xl hover:scale-[1.01] transition-all duration-300 cursor-pointer group focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:`${e.buttonColor}20`,boxShadow:`0 2px 12px ${e.buttonColor}08, 0 1px 3px rgba(0,0,0,0.06)`},children:[a.jsx("div",{className:"relative flex-shrink-0",children:a.jsx("div",{className:"w-20 h-20 xs:w-22 xs:h-22 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-full overflow-hidden flex items-center justify-center shadow-md group-hover:shadow-lg transition-shadow duration-300",style:{backgroundColor:`${e.buttonColor}12`,border:`3px solid ${e.buttonColor}25`,boxShadow:`0 4px 12px ${e.buttonColor}15`},children:a.jsx("img",{src:t.image_url,alt:`Imagen del servicio ${t.name}`,className:"w-full h-full object-cover transition-all duration-500 group-hover:scale-110 group-hover:brightness-105",loading:"lazy",width:"400",height:"400",decoding:"async",style:{aspectRatio:"1 / 1"}})})}),a.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[a.jsx("h3",{className:"font-bold text-sm sm:text-base md:text-lg lg:text-xl mb-1 sm:mb-1.5 line-clamp-1 sm:line-clamp-2 text-center sm:text-left leading-tight",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),a.jsx("p",{className:"text-xs sm:text-sm mb-2 sm:mb-2.5 line-clamp-2 leading-relaxed text-center sm:text-left",style:{color:e.textColor,opacity:.75},children:t.description}),a.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 sm:gap-3 flex-wrap",children:[t.hide_price?a.jsxs("span",{className:"text-xs sm:text-sm font-medium flex items-center gap-1",style:{color:"#25D366",fontFamily:e.fontBody},children:[a.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio"]}):a.jsxs("span",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-extrabold",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),a.jsxs("span",{className:"flex items-center gap-1 text-xs sm:text-sm",style:{color:e.subtitleColor},children:[a.jsx("svg",{className:"w-3 sm:w-3.5 h-3 sm:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.estimated_duration_minutes," min"]})]})]}),a.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",onClick:l=>l.stopPropagation(),children:a.jsx(Mt,{onClick:()=>n(t),style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full sm:w-auto px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 text-sm sm:text-base rounded-xl hover:opacity-90 font-semibold shadow-md hover:shadow-lg transition-all duration-300 active:scale-[0.98] whitespace-nowrap",ariaLabel:`Agendar servicio ${t.name}`,children:a.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[e.serviceCardEmoji||"",a.jsx("span",{children:"Agendar"})]})})})]})}function rye(t){return{1:eL,2:sye,3:nye}[t]||eL}function aye({layout:t=1}){return t===2?a.jsxs("div",{className:"rounded-lg sm:rounded-xl overflow-hidden flex flex-col sm:flex-row items-center gap-2 sm:gap-3 md:gap-4 p-2.5 sm:p-3 md:p-4 border border-gray-200/50 animate-pulse",children:[a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gray-200 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 w-full space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),a.jsx("div",{className:"h-6 bg-gray-200 rounded w-24"})]})]}):t===6||t===3?a.jsxs("div",{className:"rounded-xl sm:rounded-2xl overflow-hidden flex flex-col border border-gray-200/50 animate-pulse h-full",children:[a.jsx("div",{className:"w-full h-32 xs:h-36 sm:h-40 md:h-44 bg-gray-200"}),a.jsxs("div",{className:"p-2.5 sm:p-3 md:p-4 space-y-2 flex-1 flex flex-col",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),a.jsx("div",{className:"mt-auto h-8 bg-gray-200 rounded w-full"})]})]}):a.jsxs("div",{className:"rounded-lg sm:rounded-xl shadow-md overflow-hidden flex flex-col border border-gray-200/50 animate-pulse h-full",children:[a.jsx("div",{className:"w-full h-32 xs:h-36 sm:h-40 md:h-44 bg-gray-200 flex-shrink-0"}),a.jsxs("div",{className:"p-2.5 sm:p-3 md:p-4 flex-1 flex flex-col space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),a.jsx("div",{className:"mt-auto h-8 bg-gray-200 rounded w-full"})]})]})}const iye=y.memo(aye);function oye({services:t,theme:e,onBook:n,onServiceClick:s,loading:r=!1}){const i=e.cardLayout||1,l=rye(i),u=i===2?"grid grid-cols-1 gap-5 sm:gap-6":"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 sm:gap-6 lg:gap-7";return r?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 mb-4 animate-pulse"}),a.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent pr-1",children:a.jsx("div",{className:u,children:Array.from({length:6}).map((h,f)=>a.jsx(iye,{layout:i},f))})})]}):t.length===0?null:a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold mb-6 sm:mb-8 sticky top-0 z-10 pb-4 leading-tight",style:{color:e.titleColor,fontFamily:e.fontTitle,backgroundColor:"transparent"},children:"Servicios"}),a.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent pr-2",children:a.jsx("div",{className:u,children:t.map((h,f)=>a.jsx(l,{service:h,theme:e,onBook:n,onServiceClick:s,index:f},h.id))})})]})}const gV=y.memo(oye),lye=Object.freeze(Object.defineProperty({__proto__:null,default:gV},Symbol.toStringTag,{value:"Module"}));function tL({product:t,theme:e,quantity:n,onAddToCart:s,onUpdateQuantity:r,onProductClick:i,index:l}){const d=p=>{p.stopPropagation(),r(t.id,n+1)},u=p=>{p.stopPropagation(),n>0&&r(t.id,n-1)},h=()=>{i(t)},f=p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),i(t))};return a.jsx("div",{onClick:h,onKeyDown:f,role:"button",tabIndex:0,"aria-label":`Ver detalles de ${t.name}`,className:"cursor-pointer group h-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 rounded-lg sm:rounded-xl",children:a.jsxs(Tl,{delay:l*.1,className:"rounded-xl sm:rounded-2xl shadow-lg overflow-hidden flex flex-col hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 border h-full group",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:`${e.buttonColor}15`,boxShadow:`0 4px 16px ${e.buttonColor}08, 0 1px 3px rgba(0,0,0,0.08)`},children:[a.jsxs("div",{className:"w-full h-44 sm:h-48 md:h-52 lg:h-56 flex items-center justify-center relative overflow-hidden flex-shrink-0",style:{backgroundColor:`${e.buttonColor}08`,aspectRatio:"1 / 1",backgroundImage:`linear-gradient(135deg, ${e.buttonColor}05 0%, ${e.buttonColor}02 100%)`},children:[a.jsx("img",{src:t.image_url||"https://placehold.co/400x400/EEF2FF/1F2937?text=Sin+imagen",alt:t.image_url?`Imagen del producto ${t.name}`:`Imagen no disponible para ${t.name}`,className:"max-h-full max-w-full object-contain transition-all duration-500 group-hover:scale-110 group-hover:brightness-105",loading:"lazy",width:"400",height:"400",decoding:"async"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/0 via-black/0 to-black/0 group-hover:from-black/5 group-hover:via-black/0 group-hover:to-black/0 transition-all duration-300 flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold opacity-0 group-hover:opacity-100 bg-black/70 backdrop-blur-sm px-3 sm:px-4 py-1.5 rounded-full transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 shadow-lg",children:"Ver detalles"})}),t.stock!==void 0&&t.stock<10&&t.stock>0&&a.jsxs("div",{className:"absolute top-2 sm:top-2.5 right-2 sm:right-2.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white text-xs font-bold px-2 sm:px-2.5 py-1 rounded-full shadow-lg backdrop-blur-sm z-10 animate-pulse",children:["ltimos ",t.stock,"!"]}),t.stock===0&&a.jsx("div",{className:"absolute top-2 sm:top-2.5 right-2 sm:right-2.5 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold px-2 sm:px-2.5 py-1 rounded-full shadow-lg backdrop-blur-sm z-10",children:"Agotado"})]}),a.jsxs("div",{className:"p-4 sm:p-5 md:p-6 flex-1 flex flex-col min-h-0",children:[a.jsx("h3",{className:"font-bold text-base sm:text-lg md:text-xl mb-3 sm:mb-3.5 line-clamp-2 leading-snug",style:{color:e.titleColor,fontFamily:e.fontTitle},title:t.name,children:t.name}),t.description&&a.jsx("p",{className:"text-sm sm:text-base mb-3 sm:mb-4 line-clamp-2 flex-1 leading-relaxed",style:{color:e.textColor,opacity:.75},children:t.description}),t.tags&&t.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2 sm:mb-3",children:t.tags.slice(0,2).map((p,x)=>a.jsx("span",{className:"px-2 sm:px-2.5 py-0.5 sm:py-1 text-xs rounded-full font-medium",style:{backgroundColor:`${e.buttonColor}15`,color:e.buttonColor,border:`1px solid ${e.buttonColor}30`},children:p},x))}),a.jsxs("div",{className:"flex justify-between items-center mb-2 sm:mb-3",children:[t.hide_price?a.jsxs("span",{className:"text-sm sm:text-base font-semibold flex items-center gap-1.5",style:{color:"#25D366",fontFamily:e.fontBody},children:[a.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio"]}):a.jsxs("span",{className:"text-lg sm:text-xl md:text-2xl font-extrabold",style:{color:e.buttonColor,fontFamily:e.fontTitle},children:["$",t.price.toLocaleString()]}),t.weight&&a.jsxs("span",{className:"text-xs sm:text-sm flex items-center gap-1 font-medium",style:{color:e.subtitleColor,opacity:.8},children:[a.jsx("svg",{className:"w-3.5 sm:w-4 h-3.5 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"})}),t.weight,"g"]})]}),a.jsx("div",{className:"mt-auto",onClick:p=>p.stopPropagation(),children:n>0?a.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-2.5 rounded-xl p-1.5 sm:p-2",style:{backgroundColor:`${e.buttonColor}10`,border:`1px solid ${e.buttonColor}20`},children:[a.jsx("button",{onClick:u,className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full flex items-center justify-center font-bold text-lg sm:text-xl hover:opacity-90 active:scale-95 transition-all shadow-md hover:shadow-lg",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor},"aria-label":"Disminuir cantidad",children:""}),a.jsx("span",{className:"text-lg sm:text-xl font-extrabold min-w-[2.25rem] sm:min-w-[2.5rem] text-center",style:{color:e.titleColor},children:n}),a.jsx("button",{onClick:d,className:"w-9 h-9 sm:w-10 sm:h-10 rounded-full flex items-center justify-center font-bold text-lg sm:text-xl hover:opacity-90 active:scale-95 transition-all shadow-md hover:shadow-lg",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor},"aria-label":"Aumentar cantidad",children:"+"})]}):a.jsx(Mt,{onClick:()=>s(t,1),style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full py-2 sm:py-2.5 text-sm sm:text-base rounded-xl hover:opacity-90 font-semibold shadow-md hover:shadow-lg transition-all duration-300 active:scale-[0.98]",ariaLabel:`Agregar ${t.name} al carrito`,children:a.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Agregar al carrito"]})})})]})]})})}function cye({product:t,theme:e,quantity:n,onAddToCart:s,onUpdateQuantity:r,onProductClick:i,index:l}){const d=()=>{i(t)},u=p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),i(t))},h=p=>{p.stopPropagation(),r(t.id,n+1)},f=p=>{p.stopPropagation(),n>0&&r(t.id,n-1)};return a.jsx("div",{onClick:d,onKeyDown:u,role:"button",tabIndex:0,"aria-label":`Ver detalles de ${t.name}`,className:"cursor-pointer group focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 rounded-lg sm:rounded-xl",children:a.jsxs(Tl,{delay:l*.05,className:"rounded-2xl sm:rounded-3xl overflow-hidden flex flex-wrap items-start gap-4 sm:gap-5 md:gap-6 p-4 sm:p-5 md:p-6 border-2 hover:shadow-2xl hover:scale-[1.01] transition-all duration-500",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:`${e.buttonColor}25`,boxShadow:`0 4px 20px ${e.buttonColor}12, 0 2px 6px rgba(0,0,0,0.08)`},children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsxs("div",{className:"w-24 h-24 sm:w-28 sm:h-28 md:w-32 md:h-32 rounded-2xl overflow-hidden flex items-center justify-center relative shadow-md transition-all duration-500 group-hover:scale-105",style:{background:`linear-gradient(135deg, ${e.buttonColor}18 0%, ${e.buttonColor}08 100%)`,border:`3px solid ${e.buttonColor}30`,boxShadow:`0 8px 24px ${e.buttonColor}20, inset 0 1px 0 rgba(255,255,255,0.2)`},children:[a.jsx("img",{src:t.image_url||"https://placehold.co/400x400/EEF2FF/1F2937?text=Sin+imagen",alt:t.image_url?`Imagen del producto ${t.name}`:`Imagen no disponible para ${t.name}`,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-115 group-hover:brightness-110",loading:"lazy",width:"400",height:"400",decoding:"async",style:{aspectRatio:"1 / 1"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),a.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(t)},className:"absolute bottom-2 right-2 inline-flex items-center justify-center rounded-full bg-white/90 text-slate-900 shadow-md backdrop-blur-sm p-2 hover:bg-white transition","aria-label":`Ver imagen de ${t.name}`,children:""})]}),t.stock!==void 0&&t.stock<10&&t.stock>0&&a.jsxs("div",{className:"absolute -top-1 -right-1 bg-gradient-to-br from-orange-500 via-orange-600 to-orange-700 text-white text-xs font-bold px-2.5 py-1 rounded-full shadow-2xl backdrop-blur-md z-10 border-2 border-white/90 animate-pulse",children:[" ",t.stock]}),t.stock===0&&a.jsx("div",{className:"absolute -top-1 -right-1 bg-gradient-to-br from-red-500 via-red-600 to-red-700 text-white text-xs font-bold px-2.5 py-1 rounded-full shadow-2xl backdrop-blur-md z-10 border-2 border-white/90",children:""})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-extrabold text-base sm:text-lg md:text-xl lg:text-2xl mb-2 sm:mb-3 line-clamp-2 leading-tight text-left",style:{color:e.titleColor,fontFamily:e.fontTitle},children:t.name}),t.description&&a.jsx("p",{className:"text-sm sm:text-base mb-2 sm:mb-3 line-clamp-2 leading-relaxed text-left",style:{color:e.textColor,opacity:.8},children:t.description}),t.tags&&t.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 mb-2 sm:mb-3 justify-start",children:t.tags.slice(0,2).map((p,x)=>a.jsx("span",{className:"px-2.5 py-1 text-xs sm:text-sm rounded-full font-medium shadow-sm",style:{backgroundColor:`${e.buttonColor}18`,color:e.buttonColor,border:`1px solid ${e.buttonColor}35`},children:p},x))}),a.jsxs("div",{className:"flex items-center justify-start gap-3 sm:gap-4 flex-wrap",children:[t.hide_price?a.jsxs("span",{className:"text-sm sm:text-base font-semibold flex items-center gap-2",style:{color:"#25D366",fontFamily:e.fontBody},children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio"]}):a.jsxs("span",{className:"text-lg sm:text-xl md:text-2xl font-extrabold",style:{color:e.buttonColor,fontFamily:e.fontTitle,textShadow:`0 2px 8px ${e.buttonColor}25`},children:["$",t.price.toLocaleString()]}),t.weight&&a.jsxs("span",{className:"text-xs sm:text-sm font-medium px-2 py-1 rounded-lg",style:{backgroundColor:`${e.subtitleColor}10`,color:e.subtitleColor,opacity:.9},children:[t.weight,"g"]})]})]}),a.jsx("div",{className:"flex-shrink-0 w-full sm:w-auto",onClick:p=>p.stopPropagation(),children:n>0?a.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3 rounded-xl p-2 shadow-lg",style:{backgroundColor:`${e.buttonColor}15`,border:`2px solid ${e.buttonColor}30`},children:[a.jsx("button",{onClick:f,className:"w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center font-bold text-base sm:text-lg hover:opacity-90 active:scale-95 transition-all shadow-md hover:shadow-lg",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor},"aria-label":"Disminuir cantidad",children:""}),a.jsx("span",{className:"text-base sm:text-lg font-extrabold min-w-[2rem] sm:min-w-[2.25rem] text-center",style:{color:e.titleColor},children:n}),a.jsx("button",{onClick:h,className:"w-8 h-8 sm:w-9 sm:h-9 rounded-full flex items-center justify-center font-bold text-base sm:text-lg hover:opacity-90 active:scale-95 transition-all shadow-md hover:shadow-lg",style:{backgroundColor:e.buttonColor,color:e.buttonTextColor},"aria-label":"Aumentar cantidad",children:"+"})]}):a.jsx(Mt,{onClick:()=>s(t,1),style:{backgroundColor:e.buttonColor,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full sm:w-auto px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 text-sm sm:text-base rounded-xl hover:opacity-90 font-semibold shadow-md hover:shadow-lg transition-all duration-300 active:scale-[0.98] whitespace-nowrap",ariaLabel:`Agregar ${t.name} al carrito`,children:a.jsxs("span",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Agregar"]})})})]})})}function dye({product:t,theme:e,quantity:n,onAddToCart:s,onUpdateQuantity:r,onProductClick:i,index:l}){const d=p=>{p.stopPropagation(),r(t.id,n+1)},u=p=>{p.stopPropagation(),n>0&&r(t.id,n-1)},h=()=>{i(t)},f=p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),i(t))};return a.jsx("div",{onClick:h,onKeyDown:f,role:"button",tabIndex:0,"aria-label":`Ver detalles de ${t.name}`,className:"cursor-pointer group h-full focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 rounded-2xl sm:rounded-3xl",children:a.jsxs(Tl,{delay:l*.05,className:"rounded-3xl sm:rounded-[2rem] overflow-hidden flex flex-col border-2 hover:shadow-[0_20px_60px_-15px_rgba(0,0,0,0.3)] hover:scale-[1.02] transition-all duration-500 relative h-full group backdrop-blur-xl",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody,borderColor:`${e.buttonColor}30`,boxShadow:`0 20px 60px ${e.buttonColor}15, 0 4px 20px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.2)`,background:`linear-gradient(135deg, ${e.cardColor} 0%, ${e.cardColor}F8 100%)`},children:[a.jsxs("div",{className:"relative h-56 sm:h-64 md:h-72 lg:h-80 overflow-hidden",children:[a.jsxs("div",{className:"w-full h-full flex items-center justify-center relative",style:{background:`radial-gradient(ellipse at center, ${e.buttonColor}20 0%, ${e.buttonColor}08 40%, ${e.buttonColor}02 100%)`},children:[a.jsx("img",{src:t.image_url||"https://placehold.co/400x400/EEF2FF/1F2937?text=Sin+imagen",alt:t.image_url?`Imagen del producto ${t.name}`:`Imagen no disponible para ${t.name}`,className:"max-h-full max-w-full object-contain transition-all duration-1000 group-hover:scale-125 group-hover:brightness-110 group-hover:rotate-1",loading:"lazy",width:"400",height:"400",decoding:"async"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/10 group-hover:to-black/15 transition-all duration-500"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000 ease-in-out"})]}),t.stock!==void 0&&t.stock<10&&t.stock>0&&a.jsxs("div",{className:"absolute top-4 right-4 bg-gradient-to-br from-orange-400 via-orange-500 to-orange-600 text-white text-sm sm:text-base font-bold px-4 py-2 rounded-full shadow-2xl backdrop-blur-xl z-10 border-3 border-white/90 animate-pulse transform group-hover:scale-110 transition-transform",children:[" ltimos ",t.stock,"!"]}),t.stock===0&&a.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-br from-red-500 via-red-600 to-red-700 text-white text-sm sm:text-base font-bold px-4 py-2 rounded-full shadow-2xl backdrop-blur-xl z-10 border-3 border-white/90",children:" Agotado"})]}),a.jsxs("div",{className:"p-6 sm:p-7 md:p-8 lg:p-10 flex flex-col flex-1 relative",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 rounded-b-full",style:{background:`linear-gradient(90deg, ${e.buttonColor} 0%, ${e.buttonColor}DD 25%, ${e.buttonColor}AA 50%, ${e.buttonColor}DD 75%, ${e.buttonColor} 100%)`,boxShadow:`0 2px 8px ${e.buttonColor}40`}}),a.jsx("h3",{className:"font-extrabold text-xl sm:text-2xl md:text-3xl lg:text-4xl mb-3 sm:mb-4 mt-3 sm:mt-4 line-clamp-2 leading-tight",style:{color:e.titleColor,fontFamily:e.fontTitle,textShadow:`0 2px 12px ${e.titleColor}15`},children:t.name}),t.description&&a.jsx("p",{className:"text-base sm:text-lg md:text-xl mb-4 sm:mb-5 line-clamp-2 flex-1 leading-relaxed sm:leading-loose",style:{color:e.textColor,opacity:.85},children:t.description}),t.tags&&t.tags.length>0&&a.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3 mb-4 sm:mb-5",children:t.tags.slice(0,3).map((p,x)=>a.jsx("span",{className:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm rounded-full font-semibold shadow-lg backdrop-blur-sm",style:{background:`linear-gradient(135deg, ${e.buttonColor}25 0%, ${e.buttonColor}15 100%)`,color:e.buttonColor,border:`2px solid ${e.buttonColor}40`},children:p},x))}),a.jsx("div",{className:"flex items-center justify-between mb-5 sm:mb-6",children:a.jsx("div",{children:t.hide_price?a.jsxs("span",{className:"text-lg sm:text-xl md:text-2xl font-semibold flex items-center gap-2",style:{color:"#25D366",fontFamily:e.fontBody},children:[a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio por WhatsApp"]}):a.jsxs("div",{children:[a.jsxs("span",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-extrabold block",style:{color:e.buttonColor,fontFamily:e.fontTitle,textShadow:`0 4px 16px ${e.buttonColor}30`},children:["$",t.price.toLocaleString()]}),t.weight&&a.jsxs("span",{className:"text-sm sm:text-base font-medium mt-1.5 opacity-80 block",style:{color:e.subtitleColor},children:["Peso: ",t.weight,"g"]})]})})}),a.jsx("div",{className:"mt-auto",onClick:p=>p.stopPropagation(),children:n>0?a.jsxs("div",{className:"flex items-center justify-between gap-4 rounded-2xl p-3 shadow-2xl backdrop-blur-md",style:{background:`linear-gradient(135deg, ${e.buttonColor}20 0%, ${e.buttonColor}15 100%)`,border:`2px solid ${e.buttonColor}40`},children:[a.jsx("button",{onClick:u,className:"w-12 h-12 rounded-2xl flex items-center justify-center font-bold text-2xl hover:opacity-90 active:scale-95 transition-all shadow-xl hover:shadow-2xl",style:{background:`linear-gradient(135deg, ${e.buttonColor} 0%, ${e.buttonColor}DD 100%)`,color:e.buttonTextColor},"aria-label":"Disminuir cantidad",children:""}),a.jsx("span",{className:"text-2xl sm:text-3xl font-extrabold min-w-[3.5rem] text-center",style:{color:e.titleColor},children:n}),a.jsx("button",{onClick:d,className:"w-12 h-12 rounded-2xl flex items-center justify-center font-bold text-2xl hover:opacity-90 active:scale-95 transition-all shadow-xl hover:shadow-2xl",style:{background:`linear-gradient(135deg, ${e.buttonColor} 0%, ${e.buttonColor}DD 100%)`,color:e.buttonTextColor},"aria-label":"Aumentar cantidad",children:"+"})]}):a.jsx(Mt,{onClick:()=>s(t,1),style:{background:`linear-gradient(135deg, ${e.buttonColor} 0%, ${e.buttonColor}DD 100%)`,color:e.buttonTextColor,fontFamily:e.fontButton},className:"w-full py-4 sm:py-5 text-lg sm:text-xl md:text-2xl rounded-2xl hover:opacity-90 font-bold shadow-2xl hover:shadow-[0_20px_40px_-10px_rgba(0,0,0,0.3)] transition-all duration-300 active:scale-[0.98] transform hover:scale-[1.02]",ariaLabel:`Agregar ${t.name} al carrito`,children:a.jsxs("span",{className:"flex items-center justify-center gap-3",children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M12 4v16m8-8H4"})}),"Agregar al carrito"]})})})]})]})})}function uye(t){return{1:tL,2:cye,3:dye}[t]||tL}function hye({layout:t=1}){return t===2?a.jsxs("div",{className:"rounded-lg sm:rounded-xl overflow-hidden flex flex-col sm:flex-row items-center gap-2 sm:gap-3 md:gap-4 p-2.5 sm:p-3 md:p-4 border border-gray-200/50 animate-pulse",children:[a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gray-200 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 w-full space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),a.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"})]})]}):t===6||t===3?a.jsxs("div",{className:"rounded-xl sm:rounded-2xl overflow-hidden flex flex-col border border-gray-200/50 animate-pulse h-full",children:[a.jsx("div",{className:"w-full h-32 xs:h-36 sm:h-40 md:h-44 bg-gray-200"}),a.jsxs("div",{className:"p-2.5 sm:p-3 md:p-4 space-y-2 flex-1 flex flex-col",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),a.jsx("div",{className:"mt-auto h-8 bg-gray-200 rounded w-full"})]})]}):a.jsxs("div",{className:"rounded-lg sm:rounded-xl shadow-md overflow-hidden flex flex-col border border-gray-200/50 animate-pulse h-full",children:[a.jsx("div",{className:"w-full h-32 xs:h-36 sm:h-40 md:h-44 bg-gray-200 flex-shrink-0"}),a.jsxs("div",{className:"p-2.5 sm:p-3 md:p-4 flex-1 flex flex-col space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"}),a.jsx("div",{className:"mt-auto h-6 bg-gray-200 rounded w-20"})]})]})}const mye=y.memo(hye);function fye({products:t,theme:e,layout:n,cart:s,onAddToCart:r,onUpdateQuantity:i,onProductClick:l,loading:d=!1,menuCategories:u=[],enableCategoryFilters:h=!1}){const f=e.cardLayout||1,[p,x]=y.useState("all"),b=L=>{const k=s.find(R=>R.product.id===L);return k?k.quantity:0},_=n==="LIST"||f===2,v=uye(_?2:f),T=_?"grid grid-cols-1 gap-3 sm:gap-4":"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-5 lg:gap-6",P=y.useMemo(()=>u.filter(L=>L.active!==!1),[u]),A=h&&P.length>0;y.useEffect(()=>{A&&p!=="all"&&!P.some(L=>L.id===p)&&x("all")},[p,P,A]);const C=y.useMemo(()=>!A||p==="all"?t:t.filter(L=>L.menuCategoryId===p),[t,p,A]),M=y.useMemo(()=>{if(!A)return[];const L=P.map(R=>({id:R.id,name:R.name,items:C.filter(S=>S.menuCategoryId===R.id)})).filter(R=>R.items.length>0),k=C.filter(R=>!R.menuCategoryId);return k.length>0&&L.push({id:"uncategorized",name:"Sin categora",items:k}),L},[C,P,A]);return d?a.jsxs("div",{className:"mb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:[a.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 animate-pulse"}),a.jsx("div",{className:"h-10 bg-gray-200 rounded w-32 animate-pulse"})]}),a.jsx("div",{className:T,children:Array.from({length:8}).map((L,k)=>a.jsx(mye,{layout:f},k))})]}):t.length===0?null:a.jsxs("div",{className:"mb-8 sm:mb-10 -mt-6 sm:-mt-8 relative z-10",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-5 mb-6 sm:mb-8 relative z-10",children:a.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-extrabold leading-tight",style:{color:e.titleColor,fontFamily:e.fontTitle},children:"Productos"})}),A&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-2.5",children:[a.jsx("button",{type:"button",onClick:()=>x("all"),className:"rounded-full px-4 py-2 text-xs sm:text-sm font-semibold shadow-sm transition",style:{backgroundColor:p==="all"?e.buttonColor:e.cardColor||"#ffffff",color:p==="all"?e.buttonTextColor:e.textColor||"#1f2937",border:`1px solid ${e.cardColor?`${e.cardColor}80`:"rgba(148, 163, 184, 0.3)"}`},children:"Todos"}),P.map(L=>{const k=p===L.id;return a.jsx("button",{type:"button",onClick:()=>x(L.id),className:"rounded-full px-4 py-2 text-xs sm:text-sm font-semibold shadow-sm transition",style:{backgroundColor:k?e.buttonColor:e.cardColor||"#ffffff",color:k?e.buttonTextColor:e.textColor||"#1f2937",border:`1px solid ${e.cardColor?`${e.cardColor}80`:"rgba(148, 163, 184, 0.3)"}`},children:L.name},L.id)})]}),A?a.jsx("div",{className:"space-y-5 sm:space-y-6",children:M.map(L=>a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-lg sm:text-xl font-bold",style:{color:e.titleColor,fontFamily:e.fontTitle},children:L.name}),a.jsx("div",{className:T,children:L.items.map((k,R)=>{const S=b(k.id);return a.jsx(v,{product:k,theme:e,quantity:S,onAddToCart:r,onUpdateQuantity:i,onProductClick:l,index:R},k.id)})})]},L.id))}):a.jsx("div",{className:T,children:C.map((L,k)=>{const R=b(L.id);return a.jsx(v,{product:L,theme:e,quantity:R,onAddToCart:r,onUpdateQuantity:i,onProductClick:l,index:k},L.id)})})]})}const xV=y.memo(fye),pye=Object.freeze(Object.defineProperty({__proto__:null,default:xV},Symbol.toStringTag,{value:"Module"}));function j2({company:t,theme:e}){if(!t.video_enabled||!t.video_url)return null;let n;if(t.video_url.includes("youtube.com/embed/"))n=`${t.video_url.split("?")[0]}?rel=0&modestbranding=1&enablejsapi=1&origin=${encodeURIComponent(window.location.origin)}`;else{const s=mv(t.video_url);if(!s)return console.warn("[VideoCard] Could not extract video ID from:",t.video_url),null;const r=typeof window<"u"?window.location.origin:"https://pymerp.cl";n=`https://www.youtube.com/embed/${s}?rel=0&modestbranding=1&enablejsapi=1&origin=${encodeURIComponent(r)}`}return a.jsx("div",{className:"mb-4 sm:mb-6 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm sm:shadow-md w-full",style:{backgroundColor:e.cardColor,color:e.textColor,fontFamily:e.fontBody},children:a.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[a.jsx("h2",{className:"font-semibold text-sm sm:text-base md:text-lg lg:text-xl mb-2 sm:mb-3",style:{color:e.titleColor,fontFamily:e.fontTitle},children:" Video"}),a.jsx("div",{className:"relative w-full rounded-lg overflow-hidden",style:{paddingBottom:"56.25%"},children:a.jsx("iframe",{src:n,className:"absolute top-0 left-0 w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,title:`Video de ${t.name}`,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})})}const gye=Object.freeze(Object.defineProperty({__proto__:null,VideoCard:j2},Symbol.toStringTag,{value:"Module"}));function xye({company:t,theme:e,productTheme:n,services:s=[],products:r=[],cart:i=[],googleMapsApiKey:l,onBook:d,onServiceClick:u,onAddToCart:h,onUpdateQuantity:f,onProductClick:p}){const[x,b]=y.useState(0),[_,j]=y.useState(!1),v=y.useRef(null),T=[t?.video_enabled&&t.video_placement==="HERO"&&t.video_url&&{type:"video-hero",component:a.jsx(j2,{company:t,theme:e})},t?.description&&t?.show_description!==!1&&{type:"description",component:a.jsx(X7,{company:t,theme:e,isCarousel:!0})},(t?.mission||t?.vision)&&t?.show_mission_vision!==!1&&{type:"mission",component:a.jsx(J7,{company:t,theme:e,isCarousel:!0})},(t?.weekday_days&&t.weekday_days.length>0||t?.weekend_days&&t.weekend_days.length>0)&&{type:"hours",component:a.jsx(eV,{company:t,theme:e,isCarousel:!0})},t?.address&&l&&{type:"location",component:a.jsx(pV,{company:t,theme:e,googleMapsApiKey:l,isCarousel:!0})},s.length>0&&{type:"services",component:a.jsx(gV,{services:s,theme:e,onBook:d||(()=>{}),onServiceClick:u||(()=>{})})},r.length>0&&{type:"products",component:a.jsx(xV,{products:r,theme:n||e,cart:i,onAddToCart:h||(()=>{}),onUpdateQuantity:f||(()=>{}),onProductClick:p||(()=>{})})},t?.video_enabled&&t.video_placement==="FOOTER"&&t.video_url&&{type:"video-footer",component:a.jsx(j2,{company:t,theme:e})}].filter(Boolean),P=()=>{_||T.length===0||(j(!0),v.current&&(clearTimeout(v.current),v.current=null),b(L=>(L+1)%T.length),setTimeout(()=>j(!1),700))},A=()=>{_||T.length===0||(j(!0),v.current&&(clearTimeout(v.current),v.current=null),b(L=>(L-1+T.length)%T.length),setTimeout(()=>j(!1),700))},C=L=>{_||T.length===0||(j(!0),v.current&&(clearTimeout(v.current),v.current=null),b(L),setTimeout(()=>j(!1),700))},M=T[x]?.type==="video-hero"||T[x]?.type==="video-footer";return y.useEffect(()=>{if(T.length===0)return;v.current&&(clearTimeout(v.current),v.current=null);const R=setTimeout(()=>{M?v.current=setTimeout(()=>{b(S=>(S+1)%T.length)},18e4):v.current=setTimeout(()=>{b(S=>(S+1)%T.length)},6e3)},_?700:0);return()=>{v.current&&(clearTimeout(v.current),v.current=null),clearTimeout(R)}},[x,_,T.length,M]),T.length===0?null:a.jsxs("div",{className:"relative w-full h-[85vh] min-h-[600px] overflow-hidden rounded-3xl mb-8",children:[a.jsx("div",{className:"absolute inset-0 flex transition-transform duration-700 ease-in-out",style:{transform:`translateX(-${x*100}%)`},children:T.map((L,k)=>a.jsx("div",{className:"min-w-full h-full flex items-center justify-center p-6 sm:p-12 overflow-y-auto",style:{backgroundColor:e.cardColor+"95",backdropFilter:"blur(10px)"},children:a.jsx(Ci,{mode:"wait",children:a.jsx(ke.div,{initial:{opacity:0,y:50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.95},transition:{duration:.6,ease:"easeOut"},className:"w-full h-full max-w-6xl",children:L.component},x)})},k))}),T.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:A,disabled:_,className:"absolute left-4 top-1/2 -translate-y-1/2 w-14 h-14 rounded-full bg-transparent flex items-center justify-center transition-all z-10 disabled:opacity-50 hover:opacity-80","aria-label":"Anterior",children:a.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"#4B5563",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:P,disabled:_,className:"absolute right-4 top-1/2 -translate-y-1/2 w-14 h-14 rounded-full bg-transparent flex items-center justify-center transition-all z-10 disabled:opacity-50 hover:opacity-80","aria-label":"Siguiente",children:a.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"#4B5563",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})}),a.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:T.map((L,k)=>a.jsx("button",{onClick:()=>C(k),disabled:_,className:`h-3 rounded-full transition-all duration-300 ${k===x?"w-10 bg-white shadow-lg":"w-3 bg-white/50 hover:bg-white/75"}`,"aria-label":`Ir a slide ${k+1}`},k))}),a.jsx("div",{className:"absolute top-6 right-6 z-10 px-4 py-2 rounded-full bg-transparent",children:a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[x+1," / ",T.length]})})]})]})}function yV({url:t,onClose:e}){return a.jsxs(Ai,{isOpen:!!t,onClose:e,className:"relative max-w-4xl p-0 bg-transparent shadow-none",ariaLabel:"Vista previa de imagen",children:[a.jsx("button",{onClick:e,className:"absolute -top-10 right-0 text-white text-3xl z-10","aria-label":"Cerrar vista previa",children:""}),a.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-lg max-h-[80vh] flex items-center justify-center",children:t?a.jsx("img",{src:t,alt:"Vista previa ampliada de la imagen",className:"max-h-[80vh] max-w-full object-contain"}):null})]})}function yye({company:t,isOpen:e,onClose:n}){const[s,r]=y.useState(!1);if(y.useEffect(()=>{const u=`video_modal_seen_${t.id}`;sessionStorage.getItem(u)==="true"&&r(!0)},[t.id]),y.useEffect(()=>{if(e&&!s){const u=`video_modal_seen_${t.id}`;sessionStorage.setItem(u,"true"),r(!0)}},[e,s,t.id]),!e||!t.video_enabled||!t.video_url)return null;const i=mv(t.video_url);if(!i)return null;const l=typeof window<"u"?window.location.origin:"https://pymerp.cl",d=`https://www.youtube.com/embed/${i}?rel=0&modestbranding=1&autoplay=1&enablejsapi=1&origin=${encodeURIComponent(l)}`;return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 animate-fadeIn",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"video-modal-title",children:a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center p-4",onClick:u=>u.stopPropagation(),children:[a.jsx("button",{type:"button",onClick:n,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-black bg-opacity-30 hover:bg-opacity-50 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-black","aria-label":"Cerrar video",children:a.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white opacity-80 hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("div",{className:"relative w-full h-full max-w-[95vw] max-h-[95vh]",children:a.jsx("iframe",{src:d,className:"w-full h-full rounded-lg",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,title:`Video de ${t.name}`,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})]})})}const nL=new Intl.NumberFormat("es-CL"),Sf=(t,e)=>{const n=Math.min(1,Math.max(0,e)),s=t?.trim();if(!s)return`rgba(255,255,255,${n})`;if(s.startsWith("rgba")||s.startsWith("rgb"))return s.replace(/rgba?\(([^)]+)\)/,(f,p)=>{const x=p.split(",").map(v=>v.trim()),[b,_,j]=x;return`rgba(${b}, ${_}, ${j}, ${n})`});const r=s.replace("#",""),i=r.length===3?r.split("").map(f=>f+f).join(""):r,l=parseInt(i.substring(0,6),16),d=l>>16&255,u=l>>8&255,h=l&255;return`rgba(${d}, ${u}, ${h}, ${n})`};function bV({product:t,isOpen:e=!0,onClose:n,onAddToCart:s,isAvailable:r=!0,t:i,theme:l,quantity:d=1,onIncrement:u,onDecrement:h}){const{t:f}=ln(),p=i||f,x=y.useRef(null),b=y.useRef(null),_=!!(t&&e!==!1),[j,v]=y.useState(null);if(y.useEffect(()=>{if(!_){document.body.style.overflow="unset",v(null);return}return e?(b.current=document.activeElement,setTimeout(()=>{x.current?.focus()},100),document.body.style.overflow="hidden"):(document.body.style.overflow="unset",b.current&&b.current.focus()),()=>{document.body.style.overflow="unset"}},[e,_]),y.useEffect(()=>{if(!_)return;const F=$=>{$.key==="Escape"&&e&&n()};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[e,n,_]),y.useEffect(()=>{if(!_||!e||!x.current)return;const F=$=>{if($.key!=="Tab")return;const Q=x.current?.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!Q||Q.length===0)return;const G=Q[0],B=Q[Q.length-1];$.shiftKey&&document.activeElement===G?($.preventDefault(),B?.focus()):!$.shiftKey&&document.activeElement===B&&($.preventDefault(),G?.focus())};return document.addEventListener("keydown",F),()=>document.removeEventListener("keydown",F)},[e,_]),!_||!t)return null;const T=l?.cardColor||"#ffffff",P=typeof l?.cardOpacity=="number"?l.cardOpacity:1,A=l?.titleColor||"#111827",C=l?.subtitleColor||"#4b5563",M=l?.textColor||"#374151",L=l?.buttonColor||"#2563eb",k=l?.buttonTextColor||"#ffffff",R=Sf(M,.18),S=P<1?Sf(T,P):T,O=Sf(T,Math.min(1,P*.9+.08)),I=F=>{F.target===F.currentTarget&&n()};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:I,role:"presentation","aria-hidden":!e,children:[a.jsxs("div",{ref:x,className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",style:{backgroundColor:S},role:"dialog","aria-modal":"true","aria-labelledby":"product-detail-title","aria-describedby":"product-detail-description",tabIndex:-1,onClick:F=>F.stopPropagation(),children:[t.image_url&&a.jsxs("div",{className:"relative h-64 w-full overflow-hidden",children:[a.jsx("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),a.jsx("button",{type:"button",onClick:()=>v(t.image_url||null),className:"absolute top-4 left-4 bg-white/90 backdrop-blur-sm rounded-full p-2 hover:bg-white transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","aria-label":"Ver imagen ampliada",children:""}),a.jsx("button",{type:"button",onClick:n,className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-full p-2 hover:bg-white transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","aria-label":p("common.close"),children:a.jsx(Pp,{className:"w-5 h-5 text-gray-900"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[!t.image_url&&a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("h2",{className:"text-3xl font-bold flex-1",style:{color:A},children:t.name}),a.jsx("button",{type:"button",onClick:n,className:"rounded-full p-2 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",style:{backgroundColor:Sf(T,.12),color:A},"aria-label":p("common.close"),children:a.jsx(Pp,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-3xl font-bold",style:{color:A},children:t.price?`$${nL.format(t.price)}`:p("common.notAvailable")}),t.price&&a.jsx("p",{className:"text-sm font-medium mt-1.5",style:{color:C},children:d&&d>1?`${p("common.unitPrice")}  ${d} ${p("common.quantity")} = $${nL.format(t.price*d)}`:p("common.unitPrice")})]}),u&&h&&a.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[a.jsxs("span",{className:"text-sm font-medium",style:{color:C},children:[p("common.quantity"),":"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:h,className:"w-10 h-10 rounded-full border-2 flex items-center justify-center font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",style:{borderColor:R,color:M},"aria-label":p("common.decrementQuantity"),children:""}),a.jsx("span",{className:"text-xl font-bold w-8 text-center",style:{color:A},children:d}),a.jsx("button",{type:"button",onClick:u,className:"w-10 h-10 rounded-full border-2 flex items-center justify-center font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",style:{borderColor:R,color:M},"aria-label":p("common.incrementQuantity"),children:"+"})]})]}),t.description&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:A},children:p("common.description")}),a.jsx("p",{className:"whitespace-pre-line leading-relaxed",style:{color:M},children:t.description})]}),t.tags&&t.tags.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:A},children:p("common.features")}),a.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(F=>a.jsx("span",{className:"px-3 py-1.5 text-sm rounded-full font-medium",style:{backgroundColor:Sf(L,.14),color:L},children:F},F))})]}),a.jsx("div",{className:"border-t pt-4",style:{borderColor:R},children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1",style:{color:C},children:p("common.availability")}),a.jsx("p",{className:`font-semibold ${r?"text-green-600":"text-red-600"}`,children:p(r?"common.available":"common.unavailable")})]}),t.status&&a.jsxs("div",{children:[a.jsx("p",{className:"mb-1",style:{color:C},children:p("common.status")}),a.jsx("p",{className:"font-semibold capitalize",style:{color:A},children:t.status==="ACTIVE"?p("common.active"):p("common.inactive")})]})]})})]}),a.jsx("div",{className:"border-t p-6",style:{borderColor:R,backgroundColor:O},children:s?a.jsx("button",{type:"button",onClick:()=>{try{typeof s=="function"&&(s.length>0?s(t):s())}catch(F){console.error("Error adding to cart:",F)}n()},disabled:!r||!t.price,className:`w-full px-6 py-3 rounded-lg text-base font-semibold transition-colors ${!r||!t.price?"bg-gray-300 text-gray-500 cursor-not-allowed":l?.buttonColor?"hover:opacity-90":"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800"}`,style:l?.buttonColor&&!(!r||!t.price)?{backgroundColor:l.buttonColor,color:k}:void 0,children:r?t.price?d&&d>1?p("common.addToCartWithQuantity").replace("{{quantity}}",String(d)):p("common.addToCart"):p("common.notAvailable"):p("menuView.soldOut")}):a.jsx("div",{className:"text-center text-sm text-gray-600",children:p("common.notAvailable")})})]}),a.jsx(yV,{url:j,onClose:()=>v(null)})]})}function bye({service:t,professionals:e,theme:n,onClose:s,onBook:r}){if(!t)return null;const i=n.serviceModalBgColor||n.cardColor,l=n.serviceModalTextColor||n.textColor,d=n.serviceModalTitleColor||n.titleColor,u=n.serviceModalPriceColor||n.buttonColor,h=n.serviceModalMetaColor||n.subtitleColor,f=n.serviceModalImageBgColor||n.cardColor,p=n.serviceModalSectionTitleColor||n.titleColor,x=n.serviceModalCardBgColor||n.cardColor,b=n.serviceModalCardBorderColor||n.subtitleColor,_=n.serviceModalLinkColor||n.buttonColor,j=n.serviceModalButtonColor||n.buttonColor,v=n.serviceModalButtonTextColor||n.buttonTextColor,T=n.serviceModalCloseBgColor||n.cardColor,P=n.serviceModalCloseIconColor||n.titleColor,A=n.serviceProfessionalsEmoji||"",C=t.professional_ids&&t.professional_ids.length>0?e.filter(M=>t.professional_ids?.includes(M.id)):e;return a.jsx(Ci,{children:a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),a.jsxs(ke.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:"relative bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",style:{backgroundColor:i,color:l},onClick:M=>M.stopPropagation(),children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 z-10 w-8 h-8 flex items-center justify-center rounded-full shadow-lg transition hover:opacity-90","aria-label":"Cerrar",style:{backgroundColor:T,color:P},children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.image_url&&a.jsx("div",{className:"w-full h-64 sm:h-96 flex items-center justify-center",style:{backgroundColor:f},children:a.jsx("img",{src:t.image_url,alt:t.name,className:"max-h-full max-w-full object-contain"})}),a.jsxs("div",{className:"p-6 sm:p-8",style:{backgroundColor:i},children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",style:{color:d,fontFamily:n.fontTitle},children:t.name}),a.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[a.jsx("span",{className:"text-3xl font-bold",style:{color:u,fontFamily:n.fontTitle},children:t.hide_price?a.jsxs("span",{className:"text-base font-medium flex items-center gap-2",style:{color:u},children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Consulta precio por WhatsApp"]}):`$${t.price.toLocaleString()}`}),a.jsx("div",{className:"flex items-center gap-4 text-sm",style:{color:h},children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.estimated_duration_minutes," minutos"]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",style:{color:p,fontFamily:n.fontTitle},children:" Descripcin"}),a.jsx("p",{className:"text-base leading-relaxed whitespace-pre-wrap",style:{color:l},children:t.description})]}),C.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-3",style:{color:p,fontFamily:n.fontTitle},children:[A," Profesionales disponibles"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:C.map(M=>a.jsx("div",{className:"p-4 rounded-lg border shadow-sm hover:shadow-md transition-shadow",style:{backgroundColor:x,borderColor:b},children:a.jsxs("div",{className:"flex items-start gap-3",children:[M.avatar_url?a.jsx("img",{src:M.avatar_url,alt:M.name,className:"w-12 h-12 rounded-full object-cover flex-shrink-0"}):a.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",style:{backgroundColor:n.buttonColor},children:M.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-sm mb-1",style:{color:d},children:M.name}),M.specialties&&M.specialties.length>0&&a.jsx("p",{className:"text-xs mb-2 line-clamp-1",style:{color:h},children:M.specialties.join(", ")}),M.email&&a.jsxs("div",{className:"flex items-center gap-1.5 mt-2",children:[a.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:h},children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsx("a",{href:`mailto:${M.email}`,className:"text-xs truncate hover:underline",style:{color:_},onClick:L=>L.stopPropagation(),children:M.email})]})]})]})},M.id))})]}),a.jsx("button",{onClick:()=>{s(),r()},className:"w-full py-3 rounded-lg font-semibold text-lg hover:opacity-90 transition",style:{backgroundColor:j,color:v,fontFamily:n.fontButton},children:" Agendar este servicio"})]})]})]})})}function vV({isOpen:t,onClose:e,orderCode:n,trackingLink:s}){const[r,i]=y.useState(!1),l=async()=>{try{await navigator.clipboard.writeText(s),i(!0),window.setTimeout(()=>i(!1),1500)}catch{i(!1)}};return a.jsx(Ai,{isOpen:t,onClose:e,ariaLabel:"Pedido creado",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Pedido"}),a.jsx("h2",{className:"mt-2 text-2xl font-bold text-slate-900",children:" Pedido creado con xito"}),a.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Nmero de pedido: ",a.jsxs("span",{className:"font-semibold text-slate-900",children:["#",n]})]})]}),a.jsx("button",{type:"button",onClick:e,className:"rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold text-slate-600 hover:bg-slate-50",children:"Cerrar"})]}),a.jsxs("div",{className:"mt-6 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-400",children:"Link de seguimiento"}),a.jsxs("div",{className:"mt-2 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("p",{className:"text-xs text-slate-600 break-all",children:s}),a.jsx("button",{type:"button",onClick:l,className:"inline-flex items-center justify-center rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-100",children:r?"Copiado":"Copiar"})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end",children:[a.jsx("a",{href:s,className:"inline-flex items-center justify-center rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white hover:bg-slate-800",children:"Seguir pedido en tiempo real"}),a.jsx("button",{type:"button",onClick:e,className:"inline-flex items-center justify-center rounded-full border border-slate-200 px-5 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Cerrar"})]})]})})}const vye={barberias:"barberiasShowcase",agenda_profesionales:"barberiasShowcase",peluquerias:"barberiasShowcase",centros_estetica:"beautyShowcase",unas:"barberiasShowcase",tatuajes_piercing:"beautyShowcase",masajes_spa:"barberiasShowcase",clinicas_odontologicas:"servicesShowcase",clinicas_kinesiologicas:"servicesShowcase",centros_entrenamiento:"servicesShowcase",agenda_profesionales_independientes:"agendaProfesionalesIndependientesShowcase",actividad_entrenamiento_fisico:"actividadEntrenamientoFisicoShowcase",centros_terapia:"servicesShowcase",psicologia:"servicesShowcase",nutricion:"servicesShowcase",cursos_capacitaciones:"servicesShowcase",servicios_legales:"servicesShowcase",contabilidad:"servicesShowcase",bodegas_logistica:"servicesShowcase",taller_vehiculos:"servicesShowcase",minimarket:"minimarketShowcase",distribuidores:"minimarketShowcase",articulos_aseo:"productsShowcase",productos_cuidado_personal:"productosCuidadoPersonalShowcase",ferreteria:"productsShowcase",floreria:"productsShowcase",ropa_accesorios:"productsShowcase",libreria_papeleria:"productsShowcase",tecnologia:"productsShowcase",botillerias:"productsShowcase",restaurantes_comida_rapida:"restaurantesComidaRapidaShowcase",restaurantes:"barberiasShowcase",bares:"barberiasShowcase",foodtruck:"barberiasShowcase",panaderia_pasteleria:"productsShowcase",turismo:"servicesShowcase",deporte_aventura:"servicesShowcase",fotografia:"servicesShowcase",arriendo_cabanas_casas:"propertyShowcase",inmobiliaria_terrenos_casas:"inmobiliariaTerrenosCasasShowcase",centros_eventos:"propertyShowcase",construccion:"construccionShowcase",construccion_mantencion:"construccionShowcase"},wye=["default","servicesShowcase","productsShowcase","beautyShowcase","propertyShowcase","barberiasShowcase","agendaProfesionalesShowcase","agendaProfesionalesIndependientesShowcase","actividadEntrenamientoFisicoShowcase","restaurantesComidaRapidaShowcase","minimarketShowcase","inmobiliariaTerrenosCasasShowcase","construccionShowcase","productosCuidadoPersonalShowcase"],sb=["classic","modern","compact","immersive","minimal"],_ye={barberias:"modern",agenda_profesionales:"modern",peluquerias:"modern",centros_estetica:"modern",unas:"modern",tatuajes_piercing:"modern",restaurantes_comida_rapida:"classic",restaurantes:"classic",bares:"classic",foodtruck:"classic",panaderia_pasteleria:"classic",arriendo_cabanas_casas:"compact",inmobiliaria_terrenos_casas:"compact",centros_eventos:"immersive",deporte_aventura:"immersive",fotografia:"modern",construccion:"modern",construccion_mantencion:"modern",actividad_entrenamiento_fisico:"modern",agenda_profesionales_independientes:"modern",masajes_spa:"modern"};function wV(t){if(!t||typeof t!="string")return null;const e=t.trim().toLowerCase();return wye.find(s=>s.toLowerCase()===e)??null}function Eye(t){if(!t||typeof t!="string")return null;const e=t.trim().toLowerCase();return sb.find(s=>s.toLowerCase()===e)??null}function Nye(t){const e=t?.public_layout_key??t?.public_layout_template??t?.publicLayoutTemplate??t?.public_layout_variant??t?.publicLayoutVariant;return wV(e)}function jye(t){if(!t)return null;const e=t?.public_layout_variant??t?.public_layout_style??t?.publicLayoutStyle??t?.public_layout_variant_extra;if(!e||typeof e=="string"&&e.trim()===""||wV(e))return null;const n=Eye(e);return!n||!sb.includes(n)?null:n}function Cye(t){if(!t)return{key:"default",variant:"classic",source:"fallback",variantSource:"fallback",categoryId:null,override:null};let e=null;try{e=kr(t)}catch{e=null}const n=jye(t),s=e&&_ye[e]||null;let r="classic";n&&sb.includes(n)?r=n:s&&sb.includes(s)?r=s:r="classic";const i=Nye(t);if(i)return{key:i,variant:r,source:"override",variantSource:n?"company":s?"category":"fallback",override:i,categoryId:e};const l=e&&vye[e]||null;return l?{key:l,variant:r,source:"category",variantSource:n?"company":s?"category":"fallback",categoryId:e,override:null}:t.business_type===an.PRODUCTS?{key:"productsShowcase",variant:r,source:"businessType",variantSource:n?"company":s?"category":"fallback",categoryId:e,override:null}:{key:"default",variant:r,source:"fallback",variantSource:n?"company":s?"category":"fallback",categoryId:e,override:null}}function Sye({company:t,appearance:e,theme:n,onPrimaryCta:s,primaryLabel:r,secondary:i,showDescription:l=!0,hidePrimaryCta:d=!1,hideLogoOnMobile:u=!1,onMenuClick:h}){const f=kr(t),x=Mp(f)?.group==="RETAIL",b=f==="barberias",_=e?.hero_card_color||n.cardColor,j=b?0:e?.hero_card_opacity??n.cardOpacity??1,v=e?.hero_background_image,T=e?.hero_title_color||n.titleColor,P=e?.hero_text_color||n.textColor,A=e?.hero_primary_button_color||n.buttonColor,C=e?.hero_primary_button_text_color||n.buttonTextColor,M=e?.hero_secondary_button_color||n.buttonColor,L=e?.hero_secondary_button_text_color||n.buttonTextColor,k=(S,O)=>{const I=Math.min(1,Math.max(0,O)),F=S?.trim();if(!F)return`rgba(255,255,255,${I})`;if(F.startsWith("rgba")||F.startsWith("rgb"))return F.replace(/rgba?\(([^)]+)\)/,(Z,ee)=>{const H=ee.split(",").map(te=>te.trim()),[Y,X,ie]=H;return`rgba(${Y}, ${X}, ${ie}, ${I})`});const $=F.replace("#",""),Q=$.length===3?$.split("").map(Z=>Z+Z).join(""):$,G=parseInt(Q.substring(0,6),16),B=G>>16&255,z=G>>8&255,q=G&255;return`rgba(${B}, ${z}, ${q}, ${I})`},R=()=>{const S=e?.logo_url||t?.logo_url,O=S?a.jsx("div",{className:`items-center gap-3 ${u?"hidden sm:flex":"flex"}`,children:a.jsx("img",{src:S,alt:`Logo de ${t.name}`,className:"h-14 w-14 sm:h-16 sm:w-16 object-contain",loading:"eager"})}):null,F=d||x?null:a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("button",{type:"button",onClick:s,className:"rounded-full px-5 py-2.5 text-sm font-semibold shadow-lg transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 focus-visible:ring-2 focus-visible:ring-blue-500 hover:opacity-90 active:scale-95",style:{backgroundColor:A,color:C,fontFamily:n.fontButton},"aria-label":r,children:r}),i&&(()=>{let $=!1;if(typeof i=="string")$=i.includes("Chat on WhatsApp")||i.includes("")||i.includes("Chat");else if(he.isValidElement(i)){const Q=i.props?.children,G=typeof Q=="string"?Q:String(Q||"");$=G.includes("Chat on WhatsApp")||G.includes("")||G.includes("Chat")}else{const Q=String(i);$=Q.includes("Chat on WhatsApp")||Q.includes("")||Q.includes("Chat")}return $?null:a.jsx("div",{className:"flex items-center gap-2 rounded-full border px-4 py-2 text-sm font-semibold shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",style:{backgroundColor:`${M}10`,borderColor:`${M}30`,color:L,fontFamily:n.fontBody},children:i})})()]});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between rounded-2xl border px-4 py-3 backdrop-blur",style:{backgroundColor:k(_,j),borderColor:k(_,Math.min(j+.1,1))},children:[a.jsxs("div",{className:"flex items-center gap-3",children:[O,a.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide",style:{color:T,fontFamily:n.fontTitle},children:"Men"})]}),a.jsx("button",{type:"button",onClick:h,className:"inline-flex sm:hidden items-center justify-center rounded-full p-3 hover:bg-white/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500","aria-label":"Abrir men",style:{color:P},children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})})]}),F&&a.jsx("div",{className:"space-y-4",children:F})]})};return a.jsxs("section",{className:"relative overflow-hidden rounded-3xl sm:rounded-[32px] p-5 sm:p-8 lg:p-10 focus:outline-none focus-visible:ring-4 focus-visible:ring-blue-200 transition-shadow shadow-xl",style:v?{backgroundImage:`url(${v})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:void 0,tabIndex:-1,children:[a.jsx("div",{className:"absolute inset-0 rounded-3xl sm:rounded-[32px]",style:{backgroundColor:k(_,j)}}),a.jsx("div",{className:"relative z-10",children:R()})]})}const Tye=["highlight","services","team","products","properties","schedule","reviews","faqs","missionVision","hours","location","media"],kye=["hero","highlight","services","team","products","missionVision","hours","location","media"],dx=["hero","highlight","products","services","location","hours","reviews","faqs","media"],sL=["hero","highlight","properties","schedule","team","location","hours","faqs","media"],Aye=["highlight","services","schedule","team","products","properties","reviews","faqs","missionVision","hours","location","media"],Rye=["hero","services","schedule","team","highlight","hours","location","faqs","reviews","media"];function Dye(t){return t==="beautyShowcase"?kye:t==="productsShowcase"||t==="restaurantesComidaRapidaShowcase"||t==="minimarketShowcase"||t==="productosCuidadoPersonalShowcase"?dx:t==="inmobiliariaTerrenosCasasShowcase"||t==="propertyShowcase"?sL:t==="actividadEntrenamientoFisicoShowcase"?Aye:t==="agendaProfesionalesIndependientesShowcase"?Rye:Tye}function Pye({sections:t,order:e,hideHero:n}){return a.jsx("div",{className:"space-y-6 sm:space-y-8",children:e.map(s=>{if(n&&s==="hero")return null;const r=t[s];if(!r)return null;const i=`section-${s}`;return a.jsx("div",{id:i,className:"perf-section scroll-mt-20",children:a.jsx(y.Fragment,{children:r})},s)})})}function xg({layoutKey:t,variant:e,sections:n,contactActions:s,floatingCta:r,appearance:i}){const l=Dye(t),d=n.hero,u=e==="compact"?"p-5 sm:p-7 lg:p-8":"p-5 sm:p-8 lg:p-10",h=e==="immersive"?"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white shadow-xl":e==="modern"?"bg-white/80 backdrop-blur-xl border border-slate-200 text-slate-900 shadow-[0_10px_40px_rgba(15,23,42,0.14)]":e==="compact"?"bg-slate-50/90 border border-slate-200 text-slate-900 shadow-sm":e==="minimal"?"bg-white/90 border border-slate-200 text-slate-900 shadow-sm":"bg-gradient-to-br from-blue-50 via-white to-sky-50 text-slate-900 shadow-lg";return a.jsxs("div",{className:"space-y-8 sm:space-y-10",children:[d&&(i?d:a.jsx("section",{className:`relative overflow-hidden rounded-3xl sm:rounded-[32px] ${u} focus:outline-none focus-visible:ring-4 focus-visible:ring-blue-200 transition-shadow ${h}`,tabIndex:-1,children:d})),a.jsx(Pye,{sections:n,order:l,hideHero:!!d}),n.contact||s?a.jsx("div",{id:"section-contact",className:"flex justify-center scroll-mt-20",children:n.contact??s}):null,r&&a.jsx("div",{className:"fixed bottom-4 inset-x-4 sm:hidden z-40 drop-shadow-xl",children:r})]})}const Mye=y.lazy(()=>tn(()=>import("./BarberiasPublicLayout-CoCj3NGa.js"),[]).then(t=>({default:t.BarberiasPublicLayout}))),Lye=y.lazy(()=>tn(()=>import("./AgendaProfesionalesPublicLayout-BCLrtmdO.js"),__vite__mapDeps([4,5])).then(t=>({default:t.AgendaProfesionalesPublicLayout}))),Iye=y.lazy(()=>tn(()=>import("./MinimarketPublicLayout-D9qO8Rwz.js"),[]).then(t=>({default:t.MinimarketPublicLayout}))),Oye=y.lazy(()=>tn(()=>import("./RestaurantesComidaRapidaPublicLayout-BuW2scaN.js"),[]).then(t=>({default:t.RestaurantesComidaRapidaPublicLayout}))),Vye=y.lazy(()=>tn(()=>import("./InmobiliariaTerrenosCasasPublicLayout-BWOMINhz.js"),__vite__mapDeps([6,7])).then(t=>({default:t.InmobiliariaTerrenosCasasPublicLayout}))),Uye=y.lazy(()=>tn(()=>import("./ConstruccionPublicLayout-NhXMd-sw.js"),__vite__mapDeps([8,7])).then(t=>({default:t.ConstruccionPublicLayout}))),Bye=y.lazy(()=>tn(()=>import("./ActividadEntrenamientoFisicoPublicLayout-CsGsYUTa.js"),[]).then(t=>({default:t.ActividadEntrenamientoFisicoPublicLayout}))),Fye=y.lazy(()=>tn(()=>import("./AgendaProfesionalesIndependientesPublicLayout-DtGHl8eG.js"),[]).then(t=>({default:t.AgendaProfesionalesIndependientesPublicLayout}))),$ye=y.lazy(()=>tn(()=>import("./ProductosCuidadoPersonalPublicLayout-BO4eLFju.js"),[]).then(t=>({default:t.ProductosCuidadoPersonalPublicLayout}))),C2=t=>a.jsx(xg,{...t}),zye=t=>{const e={...t.sections,highlight:t.sections.highlight??t.sections.services};return a.jsx(xg,{...t,sections:e})},Hye=t=>{const e={...t.sections,highlight:t.sections.highlight??t.sections.products};return a.jsx(xg,{...t,sections:e})},qye=t=>{const e={...t.sections,highlight:t.sections.highlight??t.sections.hero};return a.jsx(xg,{...t,sections:e})},Wye=t=>{const e={...t.sections,highlight:t.sections.highlight??t.sections.properties??t.sections.hero};return a.jsx(xg,{...t,sections:e})},rl=t=>e=>a.jsx(y.Suspense,{fallback:a.jsx(yt,{size:"lg"}),children:a.jsx(t,{...e})}),Yye={default:C2,servicesShowcase:zye,productsShowcase:Hye,beautyShowcase:qye,propertyShowcase:Wye,barberiasShowcase:rl(Mye),agendaProfesionalesShowcase:rl(Lye),actividadEntrenamientoFisicoShowcase:rl(Bye),agendaProfesionalesIndependientesShowcase:rl(Fye),restaurantesComidaRapidaShowcase:rl(Oye),minimarketShowcase:rl(Iye),inmobiliariaTerrenosCasasShowcase:rl(Vye),construccionShowcase:rl(Uye),productosCuidadoPersonalShowcase:rl($ye)};function Gye(t){return!t||typeof t!="string"?C2:Yye[t]??C2}function _d({title:t,lines:e=3}){return a.jsxs("div",{className:"animate-pulse rounded-2xl border border-slate-100 bg-white/70 p-4 shadow-sm",children:[t&&a.jsx("div",{className:"h-4 w-32 rounded bg-slate-200 mb-4","aria-hidden":"true"}),a.jsx("div",{className:"space-y-3",children:Array.from({length:e}).map((n,s)=>a.jsx("div",{className:"h-3 w-full rounded bg-slate-200",style:{width:`${80-s*8}%`},"aria-hidden":"true"},s))})]})}const ux=(t,e)=>{const n=Math.min(1,Math.max(0,e)),s=t?.trim();if(!s)return`rgba(255,255,255,${n})`;if(s.startsWith("rgba")||s.startsWith("rgb"))return s.replace(/rgba?\(([^)]+)\)/,(f,p)=>{const x=p.split(",").map(v=>v.trim()),[b,_,j]=x;return`rgba(${b}, ${_}, ${j}, ${n})`});const r=s.replace("#",""),i=r.length===3?r.split("").map(f=>f+f).join(""):r,l=parseInt(i.substring(0,6),16),d=l>>16&255,u=l>>8&255,h=l&255;return`rgba(${d}, ${u}, ${h}, ${n})`},Pt={bgColor:"#ffffff",bgOpacity:1,cardColor:"#ffffff",cardOpacity:1,buttonColor:"#2563eb",buttonTextColor:"#ffffff",titleColor:"#111827",subtitleColor:"#4b5563",textColor:"#4b5563",fontTitle:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif',fontBody:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif',fontButton:'Inter, "Segoe UI", system-ui, -apple-system, sans-serif'};function Kye(t){return t?t.fulfillment_config?{enabled:t.fulfillment_config.enabled??!1,modes:t.fulfillment_config.modes??[],delivery_fee:t.fulfillment_config.delivery_fee,minimum_order:t.fulfillment_config.minimum_order,delivery_time_minutes:t.fulfillment_config.delivery_time_minutes,preparation_time_minutes:t.fulfillment_config.preparation_time_minutes,title:t.fulfillment_config.title,description:t.fulfillment_config.description,note:t.fulfillment_config.note}:t.delivery_enabled===!0?{enabled:!0,modes:["DELIVERY","TAKEAWAY","DINE_IN"]}:{enabled:!1,modes:[]}:{enabled:!1,modes:[]}}const Qye=y.lazy(()=>tn(()=>Promise.resolve().then(()=>o0e),void 0).then(t=>({default:t.MissionVisionCard}))),Xye=y.lazy(()=>tn(()=>Promise.resolve().then(()=>l0e),void 0).then(t=>({default:t.OperatingHoursCard}))),Zye=y.lazy(()=>tn(()=>Promise.resolve().then(()=>tye),void 0).then(t=>({default:t.LocationMapCard}))),Jye=y.lazy(()=>tn(()=>Promise.resolve().then(()=>lye),void 0)),ebe=y.lazy(()=>tn(()=>Promise.resolve().then(()=>pye),void 0)),rL=y.lazy(()=>tn(()=>Promise.resolve().then(()=>gye),void 0).then(t=>({default:t.VideoCard})));function L1(){const{slug:t}=Mr(),e=ka(),{t:n}=ln(),{trackConversion:s,trackClick:r,trackNamedEvent:i}=So(),{handleError:l}=at(),d=y.useMemo(()=>typeof navigator<"u"&&/iPhone|iPad|iPod|Android/i.test(navigator.userAgent||""),[]),[u,h]=y.useState(null),[f,p]=y.useState(null),[x,b]=y.useState([]),[_,j]=y.useState([]),[v,T]=y.useState([]),[P,A]=y.useState(null),[C,M]=y.useState([]),[L,k]=y.useState([]),[R,S]=y.useState([]),[O,I]=y.useState([]),[F,$]=y.useState(!0),[Q,G]=y.useState(!1),[B,z]=y.useState(null),[q,Z]=y.useState(!1),[ee,H]=y.useState(null),[Y,X]=y.useState(null),[ie,te]=y.useState(null),[be,ve]=y.useState([]),[Se,Pe]=y.useState([]),[Ie,Fe]=y.useState([]),[We,kt]=y.useState({client_name:"",client_whatsapp:"",client_email:"",client_rut:"",client_comment:""}),[nn,Ze]=y.useState(null),[cn,zt]=y.useState(!1),[_n,_t]=y.useState(null),[oe,ae]=y.useState({client_name:"",client_whatsapp:"",client_comment:"",delivery_type:"PICKUP",delivery_address:"",delivery_location:"",delivery_notes:""}),[Ee,Te]=y.useState(null),[ze,rt]=y.useState(0),[lt,At]=y.useState(!1),[Ht,Ln]=y.useState(!1),Ot=!!(f?.show_whatsapp_fab&&u?.whatsapp);y.useEffect(()=>{t&&Lr(t)},[t]),y.useEffect(()=>{u?.id&&An(u.id)},[u]),y.useEffect(()=>{if(u?.video_enabled&&u.video_placement==="MODAL"&&u.video_url){const ye=setTimeout(()=>{At(!0)},500);return()=>clearTimeout(ye)}},[u?.video_enabled,u?.video_placement,u?.video_url]);const tt=y.useMemo(()=>{const ye=f?.background_color||Pt.bgColor,Ae=f?.card_color||Pt.cardColor,ut=f?.background_opacity??Pt.bgOpacity,ft=f?.card_opacity??Pt.cardOpacity,En=f?.calendar_card_color||f?.card_color||"#ffffff",fn=f?.calendar_card_opacity??100,zn=ux(Ae,ft);return{bgColor:ux(ye,ut),bgOpacity:ut,cardColor:zn,cardOpacity:ft,buttonColor:f?.button_color||Pt.buttonColor,buttonTextColor:f?.button_text_color||Pt.buttonTextColor,titleColor:f?.title_color||Pt.titleColor,subtitleColor:f?.subtitle_color||Pt.subtitleColor,textColor:f?.text_color||Pt.textColor,descriptionColor:f?.description_color||f?.text_color||Pt.textColor,fontTitle:f?.font_title||Pt.fontTitle,fontBody:f?.font_body||Pt.fontBody,fontButton:f?.font_button||Pt.fontButton,cardLayout:f?.card_layout||1,calendarCardColor:ux(En,fn/100),calendarCardOpacity:fn,calendarTextColor:f?.calendar_text_color||f?.text_color||Pt.textColor,calendarTitleColor:f?.calendar_title_color||f?.title_color||Pt.titleColor,calendarButtonColor:f?.calendar_button_color||f?.button_color||Pt.buttonColor,calendarButtonTextColor:f?.calendar_button_text_color||f?.button_text_color||Pt.buttonTextColor,calendarAvailableDayColor:f?.calendar_available_day_color||"#22c55e",calendarLowSlotsColor:f?.calendar_low_slots_color||"#eab308",calendarNoSlotsColor:f?.calendar_no_slots_color||"#ef4444",calendarSelectedDayColor:f?.calendar_selected_day_color||f?.button_color||Pt.buttonColor,serviceModalBgColor:f?.service_modal_bg_color||zn,serviceModalTextColor:f?.service_modal_text_color||f?.text_color||Pt.textColor,serviceModalTitleColor:f?.service_modal_title_color||f?.title_color||Pt.titleColor,serviceModalPriceColor:f?.service_modal_price_color||f?.button_color||Pt.buttonColor,serviceModalMetaColor:f?.service_modal_meta_color||f?.subtitle_color||Pt.subtitleColor,serviceModalImageBgColor:f?.service_modal_image_bg_color||f?.card_color||Pt.cardColor,serviceModalSectionTitleColor:f?.service_modal_section_title_color||f?.title_color||Pt.titleColor,serviceModalCardBgColor:f?.service_modal_card_bg_color||f?.card_color||Pt.cardColor,serviceModalCardBorderColor:f?.service_modal_card_border_color||f?.subtitle_color||Pt.subtitleColor,serviceModalLinkColor:f?.service_modal_link_color||f?.button_color||Pt.buttonColor,serviceModalButtonColor:f?.service_modal_button_color||f?.button_color||Pt.buttonColor,serviceModalButtonTextColor:f?.service_modal_button_text_color||f?.button_text_color||Pt.buttonTextColor,serviceModalCloseBgColor:f?.service_modal_close_bg_color||f?.card_color||Pt.cardColor,serviceModalCloseIconColor:f?.service_modal_close_icon_color||f?.title_color||Pt.titleColor,serviceCardEmoji:f?.service_card_emoji||"",serviceCtaEmoji:f?.service_cta_emoji||"",serviceProfessionalsEmoji:f?.service_professionals_emoji||""}},[f]),Fs=y.useMemo(()=>{const ye=f?.product_card_color||f?.card_color||Pt.cardColor,Ae=f?.product_card_opacity??f?.card_opacity??Pt.cardOpacity,ut=f?.product_card_accent_color||f?.button_color||Pt.buttonColor,ft=f?.product_card_button_text_color||f?.button_text_color||Pt.buttonTextColor;return{...tt,cardColor:ux(ye,Ae),cardOpacity:Ae,titleColor:f?.product_card_title_color||f?.title_color||Pt.titleColor,textColor:f?.product_card_text_color||f?.text_color||Pt.textColor,subtitleColor:f?.product_card_subtitle_color||f?.subtitle_color||Pt.subtitleColor,buttonColor:ut,buttonTextColor:ft}},[f,tt]),vn=y.useMemo(()=>Kye(u),[u]),Xn=y.useMemo(()=>({position:"relative",minHeight:"100vh",backgroundColor:"transparent"}),[]),$n=!!f?.logo_url,An=async ye=>{try{await hh(ye,ia.PAGE_VIEW)}catch{}},Lr=async ye=>{$(!0),k([]),b([]),M([]),S([]),j([]),ve([]),Pe([]);try{const Ae=await qb(ye);if(!Ae)return;h(Ae);const ut=kr(Ae),ft=Ae.businessMode||Ae.business_type||"BOTH",En=ft===an.SERVICES||ft==="BOTH",fn=ft===an.PRODUCTS||ft==="BOTH",zn=fn&&ul(ut,"menu-categories"),ds=ul(ut,"properties"),Zs=En&&ul(ut,"schedule"),Ur=(async()=>{try{if(Ae.business_type){const pt=await cl(Ae.id,Ae.business_type);if(pt){p(pt);return}}if(Ae.businessMode){const pt=await cl(Ae.id,Ae.businessMode);if(pt){p(pt);return}}if(fn){const pt=await cl(Ae.id,an.PRODUCTS);if(pt){p(pt);return}}if(En){const pt=await cl(Ae.id,an.SERVICES);if(pt){p(pt);return}}}catch(pt){console.warn("Error loading appearance:",pt)}})(),Er=En?(async()=>{try{const ss=(await Qc(Ae.id)).filter(Rt=>!Rt.status||Rt.status==="ACTIVE");b(ss)}catch(pt){l(pt)}try{if(Zs){const ss=(await $h(Ae.id)).filter(Rt=>Rt.status==="ACTIVE");Pe(ss)}}catch(pt){l(pt)}try{if(Zs){const pt=await N9(Ae.id);Fe(pt)}}catch(pt){l(pt)}try{const pt=await tv(Ae.id);j(pt)}catch(pt){l(pt)}})():Promise.resolve(),Xr=fn?(async()=>{try{const ss=(await lu(Ae.id)).filter(Rt=>!Rt.status||Rt.status==="ACTIVE");M(ss)}catch(pt){l(pt)}})():Promise.resolve(),Ds=zn?(async()=>{try{const ss=(await Hy(Ae.id)).filter(Rt=>Rt.active!==!1).sort((Rt,Zn)=>(Rt.order??0)-(Zn.order??0));k(ss)}catch(pt){l(pt)}})():Promise.resolve(),ii=ds?(async()=>{try{const ss=(await gC(Ae.id)).filter(Rt=>!Rt.status||Rt.status==="ACTIVE");S(ss)}catch(pt){l(pt)}})():Promise.resolve();await Promise.all([Ur,Er,Xr,Ds,ii])}catch(Ae){l(Ae)}finally{$(!1)}},$s=async()=>{if(!u?.whatsapp){J.error(n("common.errorWhatsAppNotConfigured"));return}const ye=u.booking_message||"Hola, quiero contactarte",Ae=`https://wa.me/${u.whatsapp}?text=${encodeURIComponent(ye)}`;try{if(window.open(Ae,"_blank")||(window.location.href=Ae),u?.id)try{await hh(u.id,ia.WHATSAPP_CLICK),i("contact.whatsappClick",{company_id:u.id,company_name:u.name}),s()(po.WHATSAPP_CLICK,void 0,{company_id:u.id,company_name:u.name})}catch(ft){Re.warn("Failed to track WhatsApp click",ft)}}catch(ut){J.error(n("common.errorOpeningWhatsApp")),l(ut)}},Gr=async ye=>{if(u?.id)try{const Ae=await ig(ye),ft=(Se.length>0?Se:await $h(u.id)).filter(En=>En.status==="ACTIVE"&&Ae.some(fn=>fn.schedule_slot_id===En.id));return ve(ft),ft}catch(Ae){throw Ae}},ks=async(ye,Ae)=>{if(!u?.id)return;Z(!0),z(ye),H(null),X(null);const ut=ye.professional_ids&&ye.professional_ids.length>0?_.filter(En=>ye.professional_ids?.includes(En.id)):_;T(ut);const ft=Ae&&ut.some(En=>En.id===Ae)?Ae:null;A(ft||ut[0]?.id||null);try{await Gr(ye.id),G(!0),hh(u.id,ia.SERVICE_BOOK_CLICK)}catch(En){Z(!1);const fn=En?.message||"";fn.includes("network")||fn.includes("fetch")?J.error(n("common.errorNetwork"),{duration:5e3}):J.error(n("common.errorProcessingRequest"),{duration:5e3}),l(En)}},Ir=()=>{G(!1),z(null),Z(!1),H(null),X(null),T([]),A(null),te(null),kt({client_name:"",client_whatsapp:"",client_email:"",client_rut:"",client_comment:""})},In=()=>{H(null),X(null),A(null),te(null),kt(ye=>({client_name:ye.client_name,client_whatsapp:ye.client_whatsapp,client_email:ye.client_email,client_rut:ye.client_rut,client_comment:""})),u?.id&&sessionStorage.setItem(`booking_step_${u.id}`,"1")},As=ye=>ye?[ye.address,ye.commune,ye.region].filter(Boolean).join(", "):"",ar=ye=>{if(!ye)return null;const Ae=ye.location;if(Ae?.latitude!=null&&Ae?.longitude!=null)return`https://www.google.com/maps/search/?api=1&query=${Ae.latitude},${Ae.longitude}`;const ut=As(ye);return ut?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(ut)}`:null},[ls,Aa]=y.useState(!1),vr=async()=>{if(ls)return;if(!B||!ee||!Y||!u){J.error(n("common.errorRequiredFields"));return}if(v.length>0&&!P){J.error(n("common.errorSelectServiceProfessional"));return}const ye=gr(We.client_name,120),Ae=We.client_whatsapp.replace(/\D/g,""),ut=We.client_email?.trim()||"",ft=gr(We.client_rut||"",20),En=We.client_comment?gr(We.client_comment,600):void 0;if(!ye||ye.length<2){J.error(n("common.errorInvalidName"));return}if(!Ae||Ae.length<9){J.error(n("common.errorInvalidWhatsApp"));return}if(!Ny(Ae)){J.error(n("common.errorInvalidWhatsApp"));return}if(!ft||ft.length<8){J.error(n("errorInvalidRut"));return}if(ut&&!Jb(ut)){J.error(n("common.errorInvalidEmail"));return}Aa(!0);try{const fn=be.find(Er=>Er.id===Y);if(!fn){J.error("Horario no encontrado");return}const zn=P||"unassigned";if(!await F7(u.id,zn,ee,fn.start_time,fn.end_time)){J.error("El horario ya no est disponible, elige otra opcin");return}await sle({companyId:u.id,serviceId:B.id,professionalId:zn,date:Ei(ee),startTime:fn.start_time,endTime:fn.end_time,clientName:ye,clientPhone:Ae,clientEmail:ut||void 0,notes:En,scheduleSlotId:Y||void 0}),s()(po.SERVICE_BOOKING,B.price,{service_id:B.id,service_name:B.name,company_id:u.id,company_name:u.name}),i("appointments.publicRequested",{service_id:B.id,professional_id:zn,company_id:u.id});const Zs=ee.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Ur=`${fn.start_time} - ${fn.end_time}`;J.success(` Cita solicitada exitosamente!

 ${Zs}
 ${Ur}

Te notificaremos cuando sea confirmada.`,{duration:6e3}),te({companyName:u.name,serviceName:B.name,date:ee,startTime:fn.start_time,endTime:fn.end_time,professionalName:P?v.find(Er=>Er.id===P)?.name:void 0,address:As(u)})}catch(fn){const zn=fn?.message||"",ds=zn.includes("network")||zn.includes("fetch");zn.includes("SLOT_TAKEN")||zn.includes("disponible")?(J.error(n("common.errorSlotOccupied"),{duration:5e3}),B&&Gr(B.id).catch(()=>{})):ds?J.error(n("common.errorNetwork"),{duration:6e3}):J.error(n("common.errorProcessingRequest"),{duration:5e3}),l(fn)}finally{Aa(!1)}},ns=(ye,Ae=1)=>{const ut=O.find(ft=>ft.product.id===ye.id);I(ut?O.map(ft=>ft.product.id===ye.id?{...ft,quantity:ft.quantity+Ae}:ft):[...O,{product:ye,quantity:Ae}]),r("add_to_cart")({product_id:ye.id,product_name:ye.name,product_price:ye.price,company_id:u?.id}),J.success(`${Ae>1?`${Ae} productos agregados`:"Producto agregado"} al carrito`)},zs=(ye,Ae)=>{if(Ae===0)I(O.filter(ut=>ut.product.id!==ye)),J.success("Producto eliminado del carrito");else if(O.find(ft=>ft.product.id===ye))I(O.map(ft=>ft.product.id===ye?{...ft,quantity:Ae}:ft));else{const ft=C.find(En=>En.id===ye);ft&&I([...O,{product:ft,quantity:Ae}])}},Qs=ye=>{const Ae=O.find(ut=>ut.product.id===ye.id);rt(Ae?Ae.quantity:0),Te(ye)},Je=ye=>{z(ye),Z(!1);const Ae=ye.professional_ids&&ye.professional_ids.length>0?_.filter(ut=>ye.professional_ids?.includes(ut.id)):_;T(Ae)},ko=()=>{Ee&&ze>0&&(O.find(Ae=>Ae.product.id===Ee.id)?(zs(Ee.id,ze),J.success("Carrito actualizado")):ns(Ee,ze),Te(null),rt(0))},ri=ye=>{I(O.filter(Ae=>Ae.product.id!==ye)),J.success("Producto eliminado del carrito")},ai=async()=>{if(!u)return;const ye=gr(oe.client_name,120),Ae=oe.client_whatsapp.replace(/\D/g,""),ut=oe.client_comment?gr(oe.client_comment,400):"";if(!ye||!Ae){J.error("Completa nombre y WhatsApp");return}if(!Ny(Ae)){J.error("Ingresa un WhatsApp vlido (9 a 20 dgitos)");return}if(O.length===0){J.error("El carrito est vaco");return}const ft=O.some(Zs=>Zs.product.hide_price===!0);if(vn?.minimum_order&&!ft&&O.reduce((Ur,Er)=>Ur+(Er.product.price||0)*Er.quantity,0)<vn.minimum_order){J.error(n("publicPage.restaurantsLayout.fulfillment.minimumOrderError",{amount:vn.minimum_order.toLocaleString()}));return}if((vn?.enabled&&vn?.modes?.includes("DELIVERY")&&oe.delivery_type==="DELIVERY"||u.delivery_enabled&&oe.delivery_type==="DELIVERY")&&(!oe.delivery_address||oe.delivery_address.trim()==="")){J.error("Por favor ingresa la direccin de entrega");return}const fn=oe.delivery_address?gr(oe.delivery_address,200):"",zn=oe.delivery_location?gr(oe.delivery_location,300):"",ds=oe.delivery_notes?gr(oe.delivery_notes,300):"";try{const Zs=O.map(Rt=>({product_id:Rt.product.id,quantity:Rt.quantity,unit_price:Rt.product.price})),Ur=ft?0:O.reduce((Rt,Zn)=>Rt+(Zn.product.price||0)*Zn.quantity,0),Er=vn?.delivery_fee&&oe.delivery_type==="DELIVERY"?vn.delivery_fee:0,Xr=Ur+Er;let Ds=`Hola, quiero consultar disponibilidad de estos productos:

`;if(O.forEach((Rt,Zn)=>{const Nr=Rt.product.name,lr=Rt.quantity,Ii=Rt.product.hide_price?"":`$${Rt.product.price.toLocaleString()}`,Lo=Rt.product.hide_price?"":`$${(Rt.product.price*lr).toLocaleString()}`;Ds+=`${Zn+1}. *${Nr}* x${lr}`,Ii&&Lo&&(Ds+=` (${Ii} c/u = ${Lo})`),Ds+=`
`}),!ft&&Xr>0&&(Ds+=`
*Total estimado: $${Xr.toLocaleString()}*`),Ds+=`

*Mis datos:*
 Nombre: ${ye}
 WhatsApp: ${Ae}`,oe.payment_method){const Nr={CASH:" Efectivo",TRANSFER:" Transferencia bancaria",CARD:" Tarjeta de dbito/crdito",OTHER:" Otro"}[oe.payment_method]||oe.payment_method;Ds+=`
 Mtodo de pago: ${Nr}`}if((vn?.enabled&&vn?.modes&&vn.modes.length>0||u.delivery_enabled)&&oe.delivery_type){const Zn={DELIVERY:">> DOMICILIO <<",PICKUP:">> RETIRO EN LOCAL <<",TABLE:">> CONSUMO EN LOCAL <<"}[oe.delivery_type]||">> RETIRO EN LOCAL <<";Ds+=`


*TIPO DE ENTREGA:*
${Zn}
`,oe.delivery_type==="DELIVERY"&&(Ds+=`

*DIRECCION DE ENTREGA:*
${fn}`,zn&&(Ds+=`

*UBICACION (Google Maps):*
${zn}`),ds&&(Ds+=`

*NOTAS DE ENTREGA:*
${ds}`)),oe.delivery_type==="TABLE"&&oe.table_number&&(Ds+=`

*MESA:*
${oe.table_number}`)}ut&&(Ds+=`

*COMENTARIOS:*
${ut}`);const pt=oe.delivery_type||"PICKUP";try{const Rt=await Dj({company_id:u.id,items:Zs,total_estimated:Xr,client_name:ye,client_whatsapp:Ae,client_comment:ut,payment_method:oe.payment_method,channel:"WHATSAPP",order_type:pt,status:"REQUESTED"}),Zn=`https://www.pymerp.cl/${u.slug||t}/tracking/${Rt}`;hh(u.id,ia.PRODUCT_ORDER_CLICK),s()(po.PRODUCT_ORDER,Xr,{product_count:O.length,total_items:O.reduce((Nr,lr)=>Nr+lr.quantity,0),company_id:u.id,company_name:u.name}),i("products.orderSubmitted",{product_count:O.length,total_items:O.reduce((Nr,lr)=>Nr+lr.quantity,0),company_id:u.id,company_name:u.name,total_estimated:Xr}),_t({id:Rt,link:Zn})}catch(Rt){Re.warn("No se pudo registrar el pedido en Firestore, continuando con WhatsApp.",Rt)}const ss=`https://wa.me/${u.whatsapp}?text=${encodeURIComponent(Ds)}`;window.open(ss,"_blank"),zt(!1),I([]),ae({client_name:"",client_whatsapp:"",client_comment:"",table_number:"",delivery_type:"PICKUP",delivery_address:"",delivery_location:"",delivery_notes:"",payment_method:void 0}),J.success("Redirigiendo a WhatsApp...")}catch(Zs){if(Re.error("Error al procesar la solicitud de productos:",Zs),J.error(n("common.errorProcessingRequestWhatsApp")),u?.whatsapp){const Ur=`Hola, quiero consultar disponibilidad. Mi nombre es ${ye}. WhatsApp: ${Ae}. Comentarios: ${ut||"Ninguno"}.`;window.open(`https://wa.me/${u.whatsapp}?text=${encodeURIComponent(Ur)}`,"_blank")}l(Zs,{showToast:!1,context:{action:"submitProductOrder"}})}},Kr=u?`${u.name} | ${u.sector||u.industry||"PYM-ERP"}`:"Ficha pblica | PYM-ERP",Ao=u?.mission||u?.booking_message||"Descubre servicios y productos locales en PYM-ERP.",wr=f?.banner_url||f?.logo_url||"/logopymerp.png",ir=typeof window<"u"?window.location.href:"",Wn=u?$ae({name:u.name,description:Ao,image:wr,url:ir,phone:u.whatsapp,priceRange:"$$",address:{street:u.address||"",city:u.city||u.comuna||"",region:u.region||"",postalCode:u.postal_code||"",country:"CL"},geo:u.latitude&&u.longitude?{latitude:u.latitude,longitude:u.longitude}:void 0}):null,On=O.reduce((ye,Ae)=>ye+Ae.quantity,0),Or=O.reduce((ye,Ae)=>ye+(Ae.product.price||0)*Ae.quantity,0),Ri=O.some(ye=>ye.product.hide_price===!0),Ro=xn.googleMapsApiKey,Do=!!(u?.address&&Ro),ma=y.useMemo(()=>{try{return Cye(u)}catch(ye){return console.warn("Error resolving public layout, using default:",ye),{key:"default",variant:"classic",source:"fallback",variantSource:"fallback",categoryId:null,override:null}}},[u?.category_id,u?.public_layout_variant,u?.public_layout_key,u?.business_type]),Qr=y.useMemo(()=>Gye(ma.key),[ma.key]);if(F)return a.jsx(yt,{fullScreen:!0,size:"lg"});if(!u)return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:n("common.companyNotFound")}),a.jsx("p",{className:"text-gray-600 mb-6",children:n("common.pageNotFound")}),a.jsx("a",{href:"/",className:"text-blue-600 hover:underline text-sm",children:n("common.backHome")})]})})});const Di=!!(u?.background_enabled&&u.background_orientation!=="VERTICAL"),_e=u.business_type===an.PRODUCTS||u.businessMode==="BOTH",Xe=(u?.category_id||"").toLowerCase(),Vt=["foodtruck","restaurantes","restaurantes_comida_rapida","bares"].includes(Xe),sn=_e||Vt,Zt=u.business_type===an.SERVICES||u.businessMode==="BOTH",Vr=n(_e?"publicPage.layouts.cta.products":"publicPage.layouts.cta.services"),Pi=!!(u?.description&&u?.show_description!==!1),Xs=a.jsx(s0e,{theme:tt,onWhatsApp:$s,onOpenCart:()=>zt(!0),cartItems:On,showCartCta:_e,socialLinks:u?.social_links||u?.socialLinks}),or=!Ot&&u?.whatsapp&&!sn?a.jsxs("button",{type:"button",onClick:$s,className:"flex w-full items-center justify-center gap-2 rounded-full bg-emerald-500 px-4 py-3 text-white shadow-lg transition hover:bg-emerald-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-offset-2 focus-visible:ring-offset-emerald-500","aria-label":n("common.contactWhatsApp"),children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M20.52 3.48A11.82 11.82 0 0 0 12.07 0 11.86 11.86 0 0 0 1.07 12.17 11.7 11.7 0 0 0 3.5 20.5l-1 3.48 3.6-.94a11.93 11.93 0 0 0 5.94 1.52h.05A11.83 11.83 0 0 0 24 12.07 11.8 11.8 0 0 0 20.52 3.48ZM12.1 21a9.9 9.9 0 0 1-5.05-1.38l-.36-.22-2.14.55.57-2.08-.24-.34a9.83 9.83 0 0 1-1.7-5.54A10.08 10.08 0 0 1 12.06 2a9.92 9.92 0 0 1 7.07 2.93 9.92 9.92 0 0 1 2.92 7.12A10 10 0 0 1 12.1 21Zm5.47-7.3c-.3-.15-1.77-.87-2.04-.97s-.47-.15-.67.15-.77.97-.94 1.17-.35.22-.64.07A8.14 8.14 0 0 1 10 11.8a9.18 9.18 0 0 1-1.65-2 .55.55 0 0 1 .13-.76c.13-.14.3-.37.45-.55a2.54 2.54 0 0 0 .3-.52.67.67 0 0 0-.03-.63c-.08-.15-.67-1.62-.92-2.22-.24-.58-.5-.5-.67-.51H6.8a1.3 1.3 0 0 0-.94.44 3.93 3.93 0 0 0-1.24 2.9c0 1.7 1.26 3.34 1.43 3.57.17.22 2.47 3.78 5.98 5.13a19.4 19.4 0 0 0 2.02.6 4.86 4.86 0 0 0 2.25.14c.69-.1 2.1-.86 2.4-1.7a3 3 0 0 0 .21-1.7c-.09-.14-.27-.22-.57-.37Z"})}),Vr]}):null,Al=sn?null:a.jsx(Sye,{company:u,appearance:f,theme:tt,primaryLabel:Vr,onPrimaryCta:$s,hidePrimaryCta:sn,hideLogoOnMobile:$n,showDescription:!Pi,onMenuClick:()=>Ln(!0),secondary:!Do&&u.address?a.jsx("span",{className:"text-xs sm:text-sm",style:{fontFamily:tt.fontBody,color:f?.hero_text_color||tt.textColor},children:u.address}):null}),Xc=kr(u),Rl=["restaurantes","bares","foodtruck","restaurantes_comida_rapida"].includes(Xc||""),Rs={videoHero:u?.video_enabled&&u.video_placement==="HERO"&&u.video_url?a.jsx(y.Suspense,{fallback:a.jsx(_d,{title:"Video",lines:2}),children:a.jsx(rL,{company:u,theme:tt},"video-hero")}):null,description:u?.description&&u?.show_description!==!1?a.jsx(X7,{company:u,theme:tt},"description"):null,missionVision:(u?.mission||u?.vision)&&u?.show_mission_vision!==!1?a.jsx(y.Suspense,{fallback:a.jsx(_d,{title:"Propsito"}),children:a.jsx(Qye,{company:u,theme:tt},"mission")}):null,operatingHours:u?.weekday_days&&u.weekday_days.length>0||u?.weekend_days&&u.weekend_days.length>0?a.jsx(y.Suspense,{fallback:a.jsx(_d,{title:"Horarios"}),children:a.jsx(Xye,{company:u,theme:tt},"hours")}):null,locationMap:Do?a.jsx(y.Suspense,{fallback:a.jsx(_d,{title:"Ubicacin",lines:4}),children:a.jsx(Zye,{company:u,theme:tt,googleMapsApiKey:Ro},"location")}):null,services:Zt&&x.length>0?a.jsx(y.Suspense,{fallback:a.jsx(_d,{title:"Servicios",lines:4}),children:a.jsx(Jye,{services:x,theme:tt,onBook:ks,onServiceClick:Je},"services")}):null,products:_e&&C.length>0?a.jsx(y.Suspense,{fallback:a.jsx(_d,{title:"Productos",lines:4}),children:a.jsx(ebe,{products:C,theme:Fs,layout:Rl?"LIST":f?.layout,cart:O,onAddToCart:ns,onUpdateQuantity:zs,onProductClick:Qs,menuCategories:L,enableCategoryFilters:Rl},"products")}):null,videoFooter:u?.video_enabled&&u.video_placement==="FOOTER"&&u.video_url?a.jsx(y.Suspense,{fallback:a.jsx(_d,{title:"Video",lines:2}),children:a.jsx(rL,{company:u,theme:tt},"video-footer")}):null,properties:R.length>0?a.jsxs("div",{id:"public-properties",className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs uppercase tracking-[0.25em] text-slate-500",children:n("publicPage.properties.pretitle")}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900",style:{fontFamily:tt.fontTitle},children:n("publicPage.properties.title")})]}),u.whatsapp&&a.jsxs("button",{type:"button",onClick:$s,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",children:[a.jsx("span",{"aria-hidden":!0,children:""}),n("publicPage.properties.cta")]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:R.map(ye=>{const Ae=ye.price_per_night??ye?.price??ye?.price_sale??ye?.price_monthly,ut=typeof Ae=="number"?`$${Ae.toLocaleString("es-CL")}`:n("common.notAvailable");return a.jsxs("div",{className:"flex h-full flex-col justify-between rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",style:{backgroundColor:tt.cardColor},children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",style:{color:tt.titleColor},children:ye.title}),a.jsx("p",{className:"line-clamp-3 text-sm text-slate-600",style:{color:tt.textColor},children:ye.description||n("publicPage.properties.addressFallback")}),a.jsx("p",{className:"text-sm font-semibold",style:{color:tt.buttonColor},children:ut}),ye.address&&a.jsx("p",{className:"text-xs text-slate-500",children:ye.address})]}),a.jsx("div",{className:"pt-3",children:a.jsx("button",{type:"button",onClick:$s,className:"w-full rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 px-4 py-2 text-sm font-semibold text-white shadow-md transition hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-200",children:n("publicPage.properties.cta")})})]},ye.id)})})]},"properties"):null},Mi=[Rs.videoHero,Rs.description].filter(Boolean),_r=[...Mi,Rs.missionVision,Rs.operatingHours,Rs.locationMap,Rs.videoFooter,Rs.services,Rs.products].filter(Boolean),cs=Mi.length?a.jsx("div",{className:"space-y-6",children:Mi}):null;let Vn={hero:Al,highlight:cs,properties:Rs.properties,services:Rs.services,products:Rs.products,missionVision:Rs.missionVision,hours:Rs.operatingHours,location:Rs.locationMap,media:Rs.videoFooter,contact:Xs};Di&&_r.length>0&&tt.cardLayout!==3&&(Vn={hero:Al,highlight:a.jsx(i0e,{theme:tt,children:_r}),contact:Xs});const Li=L.map(ye=>({id:ye.id,name:ye.name,order:ye.order,active:ye.active,image_url:ye.image_url})),fa=[],qt=(ye,Ae)=>{const ut=n(ye);return ut===ye?Ae:ut};Vn.products&&fa.push({id:"products",label:qt("publicPage.mobileMenu.products","Productos"),icon:"",scrollToId:"section-products"}),Vn.services&&fa.push({id:"services",label:qt("publicPage.mobileMenu.services","Servicios"),icon:"",scrollToId:"section-services"}),Vn.highlight&&fa.push({id:"about",label:qt("publicPage.mobileMenu.about","Acerca de"),icon:"",scrollToId:"section-highlight"}),Vn.hours&&fa.push({id:"hours",label:qt("publicPage.mobileMenu.hours","Horarios"),icon:"",scrollToId:"section-hours"}),Vn.location&&fa.push({id:"location",label:qt("publicPage.mobileMenu.location","Ubicacin"),icon:"",scrollToId:"section-location"}),(Vn.contact||Xs)&&fa.push({id:"contact",label:qt("publicPage.mobileMenu.contact","Contacto"),icon:"",scrollToId:"section-contact"});const Po={layoutKey:ma.key,variant:ma.variant,company:u,appearance:f,theme:tt,services:x,products:C,schedules:Se,serviceSchedules:Ie,properties:R,professionals:_,menuCategories:Li,cart:O,cartItems:On,cartTotal:Or,hasHiddenPrices:Ri,sections:Vn,contactActions:Xs,floatingCta:or,hideHeroLogoOnMobile:$n,onBookService:x.length>0?ks:void 0,onWhatsAppClick:$s,onOpenCart:()=>zt(!0),onAddToCart:ns,onUpdateQuantity:zs,onProductClick:Qs,onServiceClick:Je,isLoading:F},Ra=tt.cardLayout===3?a.jsxs("div",{className:"space-y-6",children:[a.jsx(xye,{company:u,theme:tt,productTheme:Fs,services:x,products:C,cart:O,googleMapsApiKey:Ro,onBook:ks,onServiceClick:Je,onAddToCart:ns,onUpdateQuantity:zs,onProductClick:Qs}),a.jsx("div",{className:"flex justify-center",children:Xs})]}):a.jsx(Qr,{...Po}),Mo=/(^|\/)barberias(\/|$)/.test(e.pathname);return a.jsxs(a.Fragment,{children:[!Mo&&a.jsx(ha,{title:Kr,description:Ao,keywords:`${u.name}, ${u.sector||""}, ${u.industry||""}, ${u.comuna||""}, servicios, productos`,ogImage:wr,ogImageAlt:`${u.name} - ${u.sector||"Negocio local"}`,ogType:"website",schema:Wn||void 0,robots:"index, follow"}),a.jsxs("div",{className:"min-h-screen relative background-container",style:Xn,"data-orientation":u?.background_orientation?.toLowerCase()||"horizontal","data-fit":u?.background_fit||"cover","data-layout-variant":ma.key,"data-layout-variant-style":ma.variant,children:[u?.background_enabled&&u.background_url&&a.jsxs(a.Fragment,{children:[a.jsx("img",{src:u.background_url,alt:"",className:"background-preload",loading:"eager",decoding:"async","aria-hidden":"true"}),a.jsx("div",{className:"fixed inset-0 -z-10",style:{backgroundImage:`url(${u.background_url})`,backgroundSize:u.background_fit||"cover",backgroundRepeat:"no-repeat",backgroundPosition:u.background_orientation==="VERTICAL"?"center top":"center center",backgroundAttachment:d?"scroll":"fixed",opacity:(()=>{const ye=u.background_opacity,Ae=typeof ye=="string"?Number.parseFloat(ye):ye;return typeof Ae=="number"&&!Number.isNaN(Ae)?Ae<=1?Ae:Ae/100:1})(),imageRendering:"high-quality",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden",transform:"translateZ(0)",willChange:"transform",objectFit:u.background_fit||"cover",transition:"opacity 0.3s ease-in-out",backgroundColor:"transparent",WebkitBackgroundColor:"transparent"},"aria-hidden":"true"})]}),(!u?.background_enabled||!u.background_url)&&a.jsx("div",{className:"fixed inset-0 -z-20",style:{backgroundColor:tt.bgColor},"aria-hidden":"true"}),a.jsx(e0e,{company:u,appearance:f,theme:tt}),$n&&a.jsxs("div",{className:"fixed top-0 inset-x-0 z-40 sm:hidden flex items-center justify-between px-4 py-2 shadow-md",style:{backgroundColor:f?.card_color||tt.cardColor,color:f?.button_color||tt.buttonColor},children:[a.jsx("img",{src:f?.logo_url||"/logopymerp.png",alt:"Logo",className:"h-10 w-auto object-contain"}),a.jsx("button",{type:"button",onClick:()=>Ln(!0),className:"h-10 w-10 rounded-full flex items-center justify-center transition hover:opacity-80",style:{color:f?.button_color||tt.buttonColor},"aria-label":"Abrir men",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),a.jsx("main",{id:"main-content",className:`max-w-7xl mx-auto px-6 sm:px-8 lg:px-10 py-8 sm:py-10 lg:py-12 ${$n?"pt-4":""}`,style:{color:tt.textColor,fontFamily:tt.fontBody},children:Ra}),tt.cardLayout===3&&or&&a.jsx("div",{className:"fixed bottom-4 inset-x-4 sm:hidden z-40 drop-shadow-xl",children:or}),_e&&C.length>0&&a.jsxs("button",{type:"button",onClick:()=>zt(!0),className:`fixed right-6 z-40 h-14 w-14 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center active:scale-[0.98] ${Ot?"bottom-24 sm:bottom-28":"bottom-6"}`,style:{backgroundColor:"#ffffff",fontFamily:tt.fontButton},"aria-label":`Ver carrito con ${On} artculos`,children:[a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"#000000",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),On>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center shadow-xl border-2 border-white",children:On})]}),Ot&&a.jsx("button",{type:"button",onClick:$s,className:"fixed bottom-6 right-6 z-40 flex items-center justify-center h-14 w-14 rounded-full shadow-lg text-white hover:opacity-90 transition",style:{backgroundColor:"#25D366",color:"#ffffff"},"aria-label":n("common.contactWhatsApp"),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:a.jsx("path",{d:"M20.52 3.48A11.82 11.82 0 0 0 12.07 0 11.86 11.86 0 0 0 1.07 12.17 11.7 11.7 0 0 0 3.5 20.5l-1 3.48 3.6-.94a11.93 11.93 0 0 0 5.94 1.52h.05A11.83 11.83 0 0 0 24 12.07 11.8 11.8 0 0 0 20.52 3.48ZM12.1 21a9.9 9.9 0 0 1-5.05-1.38l-.36-.22-2.14.55.57-2.08-.24-.34a9.83 9.83 0 0 1-1.7-5.54A10.08 10.08 0 0 1 12.06 2a9.92 9.92 0 0 1 7.07 2.93 9.92 9.92 0 0 1 2.92 7.12A10 10 0 0 1 12.1 21Zm5.47-7.3c-.3-.15-1.77-.87-2.04-.97s-.47-.15-.67.15-.77.97-.94 1.17-.35.22-.64.07A8.14 8.14 0 0 1 10 11.8a9.18 9.18 0 0 1-1.65-2 .55.55 0 0 1 .13-.76c.13-.14.3-.37.45-.55a2.54 2.54 0 0 0 .3-.52.67.67 0 0 0-.03-.63c-.08-.15-.67-1.62-.92-2.22-.24-.58-.5-.5-.67-.51H6.8a1.3 1.3 0 0 0-.94.44 3.93 3.93 0 0 0-1.24 2.9c0 1.7 1.26 3.34 1.43 3.57.17.22 2.47 3.78 5.98 5.13a19.4 19.4 0 0 0 2.02.6 4.86 4.86 0 0 0 2.25.14c.69-.1 2.1-.86 2.4-1.7a3 3 0 0 0 .21-1.7c-.09-.14-.27-.22-.57-.37Z"})})}),a.jsxs("footer",{id:"footer",className:"text-center py-6 text-sm",style:{color:tt.textColor,transform:"translateY(-1.2rem)"},children:["Desarrollado por"," ",a.jsx("a",{href:"https://www.pymerp.cl",className:"text-blue-600 hover:underline",style:{fontFamily:tt.fontBody},target:"_blank",rel:"noopener noreferrer","aria-label":"Visitar sitio web de PymERP (se abre en nueva ventana)",children:"pymerp.cl"})]}),a.jsx(z7,{isOpen:Q,serviceName:B?.name,servicePrice:B?.price,serviceDuration:B?.estimated_duration_minutes,serviceHidePrice:B?.hide_price,availableSchedules:be,selectedDate:ee,selectedSchedule:Y,bookingForm:We,onClose:Ir,onDateChange:(ye,Ae)=>{H(ye),X(Ae)},onScheduleChange:ye=>X(ye),onFormChange:(ye,Ae)=>kt({...We,[ye]:Ae}),onSubmit:vr,professionals:v,selectedProfessionalId:P,onProfessionalChange:ye=>A(ye),requireProfessional:v.length>0,enableEmailField:!0,emailLabel:"Correo del cliente (opcional)",emailPlaceholder:"cliente@correo.com",theme:tt,companyId:u?.id,confirmation:ie,directionsUrl:ar(u),onRestart:In,isSubmitting:ls}),a.jsx(Z7,{isOpen:cn,cart:O,orderForm:oe,orderChannel:"PUBLIC",deliveryEnabled:u?.delivery_enabled,fulfillmentConfig:vn,onClose:()=>zt(!1),onQuantityChange:zs,onRemove:ri,onFormChange:(ye,Ae)=>ae({...oe,[ye]:Ae}),onSubmit:ai}),_n&&a.jsx(vV,{isOpen:!!_n,onClose:()=>_t(null),orderCode:_n.id.slice(-6).toUpperCase(),trackingLink:_n.link}),a.jsx(yV,{url:nn,onClose:()=>Ze(null)}),u&&a.jsx(yye,{company:u,theme:tt,isOpen:lt,onClose:()=>At(!1)}),Ee&&a.jsx(bV,{product:Ee,theme:Fs,quantity:ze,onClose:()=>{Te(null),rt(0)},onIncrement:()=>rt(ze+1),onDecrement:()=>rt(Math.max(0,ze-1)),onAddToCart:ko}),B&&!Q&&!q&&a.jsx(bye,{service:B,professionals:v.length>0?v:_,theme:tt,onClose:()=>{z(null),T([])},onBook:()=>ks(B)}),a.jsx("div",{className:"sm:hidden",children:a.jsx(a0e,{isOpen:Ht,onClose:()=>Ln(!1),sections:fa,theme:tt,appearance:f})})]})]})}function tbe(t,e=300){const[n,s]=y.useState(t);return y.useEffect(()=>{const r=setTimeout(()=>{s(t)},e);return()=>{clearTimeout(r)}},[t,e]),n}function nbe(t){const e=(t.tags||[]).join(" ");return`${t.name} ${t.description||""} ${e}`.toLowerCase()}function sbe(t,e){if(!e.trim())return t;const n=e.trim().toLowerCase();return t.filter(s=>nbe(s).includes(n))}const Zu=new Intl.NumberFormat("es-CL"),rbe=t=>t?t.fulfillment_config?{enabled:t.fulfillment_config.enabled??!1,modes:t.fulfillment_config.modes??[],delivery_fee:t.fulfillment_config.delivery_fee,minimum_order:t.fulfillment_config.minimum_order,delivery_time_minutes:t.fulfillment_config.delivery_time_minutes,preparation_time_minutes:t.fulfillment_config.preparation_time_minutes,title:t.fulfillment_config.title,description:t.fulfillment_config.description,note:t.fulfillment_config.note}:t.delivery_enabled===!0?{enabled:!0,modes:["DELIVERY","TAKEAWAY","DINE_IN"]}:{enabled:!1,modes:[]}:{enabled:!1,modes:[]},aL=(t,e)=>{const n=document.getElementById(`menu-cat-${t}`);if(n){const i=80+(e?.current?.offsetHeight||50)+20,d=n.getBoundingClientRect().top+window.pageYOffset-i;n.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{window.scrollTo({top:d,behavior:"smooth"})},100),n.classList.add("ring-4","ring-blue-400","ring-opacity-50"),setTimeout(()=>{n.classList.remove("ring-4","ring-blue-400","ring-opacity-50")},2e3)}};function abe(){const{companyId:t}=Mr(),e=qe(),{t:n}=ln(),{trackEvent:s}=So(),{handleError:r}=at(),[i,l]=y.useState(null),[d,u]=y.useState(null),[h,f]=y.useState([]),[p,x]=y.useState([]),[b,_]=y.useState([]),[j,v]=y.useState(!0),[T,P]=y.useState(null),[A,C]=y.useState(!1),[M,L]=y.useState(!1),[k,R]=y.useState(null),[S,O]=y.useState({client_name:"",client_whatsapp:"",client_comment:"",table_number:"",delivery_type:"TABLE",delivery_address:"",delivery_location:"",delivery_notes:"",payment_method:void 0}),[I,F]=y.useState(""),[$,Q]=y.useState(1),[G,B]=y.useState(null),z=y.useRef(null),q=y.useMemo(()=>typeof window<"u"&&window.innerWidth<1024,[]),Z=tbe(I,300),ee=y.useMemo(()=>d?{backgroundColor:d.menu_background_color||"#f9fafb",backgroundImage:d.menu_background_image||"",cardColor:d.menu_card_color||"#ffffff",textColor:d.menu_text_color||"#374151",titleColor:d.menu_title_color||"#111827",buttonColor:d.menu_button_color||"#2563eb",buttonTextColor:d.menu_button_text_color||"#ffffff",categoryImageDefault:d.menu_category_image_default}:{backgroundColor:"#f9fafb",backgroundImage:"",cardColor:"#ffffff",textColor:"#374151",titleColor:"#111827",buttonColor:"#2563eb",buttonTextColor:"#ffffff",categoryImageDefault:void 0},[d]),H=y.useMemo(()=>rbe(i),[i]),Y=Math.max(0,Math.min(40,Math.floor(i?.menu_qr_table_count??0)));y.useEffect(()=>{(async()=>{if(t)try{const Ee=await qb(t)??await yn(t);if(!Ee){J.error(n("menuView.companyNotFound")),e("/");return}const[Te,ze,rt]=await Promise.all([Hy(Ee.id),lu(Ee.id),cl(Ee.id,an.PRODUCTS).catch(()=>null)]);rt&&u(rt);const lt=Te.filter(Ht=>Ht.active!==!1).sort((Ht,Ln)=>(Ht.order??0)-(Ln.order??0)),At=ze.filter(Ht=>Ht.status!=="INACTIVE").map(Ht=>({...Ht,isAvailable:Ht.isAvailable??!0}));l(Ee),f(lt),x(At),s("MENU_VIEW",{category:Bn.NAVIGATION,company_id:Ee.id})}catch(Ee){r(Ee)}finally{v(!1)}})()},[t,r,e,n,s]);const X=Z.trim().length>0,ie=y.useMemo(()=>h.reduce((ae,Ee)=>(ae[Ee.id]=p.filter(Te=>Te.menuCategoryId===Ee.id).sort((Te,ze)=>(Te.menuOrder??0)-(ze.menuOrder??0)),ae),{}),[h,p]),te=y.useMemo(()=>{if(!X)return ie;const ae={};return h.forEach(Ee=>{const Te=ie[Ee.id]||[];ae[Ee.id]=sbe(Te,Z)}),ae},[ie,h,Z,X]),be=y.useMemo(()=>h.flatMap(ae=>te[ae.id]||[]),[h,te]);y.useEffect(()=>{Q(1)},[Z]);const ve=24,Se=be.length,Pe=Math.ceil(Se/ve),Ie=y.useMemo(()=>{if(Se===0)return[];const ae=($-1)*ve;return be.slice(ae,ae+ve)},[be,$,Se]),Fe=y.useMemo(()=>{const ae={};return h.forEach(Ee=>{ae[Ee.id]=[]}),Ie.forEach(Ee=>{Ee.menuCategoryId&&(ae[Ee.menuCategoryId]=ae[Ee.menuCategoryId]||[],ae[Ee.menuCategoryId].push(Ee))}),ae},[h,Ie]),We=y.useMemo(()=>h.filter(ae=>(Fe[ae.id]||[]).length>0),[h,Fe]),kt=y.useMemo(()=>b.reduce((ae,Ee)=>ae+(Ee.product.price||0)*Ee.quantity,0),[b]),nn=H?.delivery_fee&&S.delivery_type==="DELIVERY"?H.delivery_fee:0,Ze=kt+nn,cn=y.useCallback((ae,Ee=1)=>{if(ae.isAvailable===!1||!ae.price){J.error(n("menuView.productUnavailable"));return}_(Te=>Te.find(lt=>lt.product.id===ae.id)?Te.map(At=>At.product.id===ae.id?{...At,quantity:At.quantity+Ee}:At):[...Te,{product:ae,quantity:Ee}]),J.success(n("menuView.cartUpdated",{product:ae.name,quantity:Ee})),s("MENU_ADD_TO_CART",{category:Bn.ENGAGEMENT,company_id:i?.id,product_id:ae.id,quantity:Ee}),q&&!M&&setTimeout(()=>L(!0),300)},[i?.id,q,M,n,s]),zt=y.useCallback((ae,Ee)=>{_(Te=>{const ze=Te.map(rt=>rt.product.id===ae?{...rt,quantity:Math.max(0,rt.quantity+Ee)}:rt).filter(rt=>rt.quantity>0);return Ee<0&&Te.find(rt=>rt.product.id===ae)?.quantity===1&&J.success(n("menuView.removedFromCart")),ze})},[n]),_n=y.useCallback(ae=>{_(Ee=>{const Te=Ee.find(rt=>rt.product.id===ae)?.product,ze=Ee.filter(rt=>rt.product.id!==ae);return Te&&J.success(n("menuView.removedFromCart",{product:Te.name})),ze})},[n]);y.useEffect(()=>{const ae=We[0]?.id||null;ae&&(!G||!We.find(Ee=>Ee.id===G))&&B(ae)},[G,We]),y.useEffect(()=>{if(We.length===0)return;const ae=()=>{const Ee=We.map(Te=>({id:Te.id,element:document.getElementById(`menu-cat-${Te.id}`)})).filter(Te=>Te.element!==null);for(let Te=Ee.length-1;Te>=0;Te--){const ze=Ee[Te];if(ze.element){const rt=ze.element.getBoundingClientRect(),Ht=80+(z.current?.offsetHeight||50)+20;if(rt.top<=Ht){B(ze.id);break}}}};return window.addEventListener("scroll",ae,{passive:!0}),ae(),()=>window.removeEventListener("scroll",ae)},[We]);const _t=async()=>{if(!i)return;const ae=gr(S.client_name.trim(),120)||"Cliente",Ee=gr(S.table_number?.trim()||"",50),Te=S.delivery_type||"TABLE",ze=S.delivery_address?.trim()||"";if(Y>0&&Te==="TABLE"&&!Ee){J.error("Selecciona el nmero de la mesa");return}if(b.length===0){J.error(n("menuView.cartEmpty"));return}try{if(H?.minimum_order&&kt<H.minimum_order){J.error(n("publicPage.restaurantsLayout.fulfillment.minimumOrderError",{amount:H.minimum_order.toLocaleString()}));return}if((H?.enabled&&H?.modes?.includes("DELIVERY")&&Te==="DELIVERY"||i.delivery_enabled&&Te==="DELIVERY")&&!ze){J.error("Por favor ingresa la direccin de entrega");return}const At=b.map(Fs=>({product_id:Fs.product.id,quantity:Fs.quantity,unit_price:Fs.product.price||0})),Ln=b.some(Fs=>Fs.product.hide_price===!0)?0:Ze,Ot=await Dj({company_id:i.id,items:At,total_estimated:Ln,client_name:ae,client_whatsapp:S.client_whatsapp||"",client_comment:S.client_comment?S.client_comment.trim():"",payment_method:S.payment_method,table_number:Te==="TABLE"?Ee:void 0,order_type:Te,channel:"MENU",status:"REQUESTED"}),tt=`https://www.pymerp.cl/${i.slug||t}/tracking/${Ot}`;await hh(i.id,ia.PRODUCT_ORDER_CLICK),s("MENU_ORDER_SUBMITTED",{category:Bn.CONVERSION,company_id:i.id,total_amount:Ze,items:b.length}),_([]),O({client_name:"",client_whatsapp:"",client_comment:"",table_number:"",delivery_type:"TABLE",delivery_address:"",delivery_location:"",delivery_notes:"",payment_method:void 0}),L(!1),R({id:Ot,link:tt}),J.success("Pedido ingresado")}catch(lt){J.error(n("common.errorProcessingRequest")),r(lt)}};if(j)return a.jsx(yt,{fullScreen:!0});const oe={backgroundColor:ee.backgroundColor,backgroundImage:ee.backgroundImage?`url(${ee.backgroundImage})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"};return i?h.length===0&&p.length===0?a.jsxs("div",{className:"min-h-screen",style:oe,children:[a.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-30",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:i.name}),a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:n("menuView.title")})]}),a.jsx("button",{type:"button",onClick:()=>e(`/${i.slug||i.id}`),className:"text-sm text-blue-600 hover:underline","aria-label":`${n("menuView.backToProfile")} - ${i.name}`,children:n("menuView.backToProfile")})]})}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n("menuView.emptyTitle")}),a.jsx("p",{className:"text-gray-600 mb-6",children:n("menuView.emptyMessage")}),a.jsx("button",{type:"button",onClick:()=>e(`/${i.slug||i.id}`),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium","aria-label":`${n("menuView.backToProfile")} - ${i.name}`,children:n("menuView.backToProfile")})]})})]}):a.jsxs("div",{className:"min-h-screen",style:oe,children:[a.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-30",children:[a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:i?.name}),a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:n("menuView.title")})]}),a.jsx("button",{type:"button",onClick:()=>e(`/${i?.slug||i?.id}`),className:"text-sm text-blue-600 hover:underline","aria-label":`${n("menuView.backToProfile")} - ${i?.name||""}`,children:n("menuView.backToProfile")})]}),a.jsx("div",{className:"bg-white border-t border-gray-100 sticky top-20 z-20 shadow-sm",children:a.jsx("div",{ref:z,className:"max-w-5xl mx-auto px-4 py-2 flex gap-2 overflow-x-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:We.map(ae=>{const Ee=G===ae.id;return a.jsx("button",{onClick:()=>aL(ae.id,z),className:`px-5 sm:px-6 py-2.5 sm:py-3 rounded-full border-2 text-base sm:text-lg whitespace-nowrap transition-all duration-300 flex-shrink-0 font-semibold ${Ee?"border-blue-500 bg-gradient-to-r from-blue-50 to-blue-100 text-blue-700 font-bold shadow-md scale-105":"border-gray-200 bg-white hover:bg-blue-50 hover:border-blue-300 text-gray-700 hover:scale-105 active:scale-95"}`,"aria-label":`Ver categora ${ae.name}`,"aria-current":Ee?"true":"false",children:ae.name},ae.id)})})})]}),a.jsxs("main",{className:"max-w-7xl mx-auto px-6 sm:px-8 lg:px-10 py-8 sm:py-10",children:[i&&ul(kr(i),"menu-qr")&&a.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-200 p-6 shadow-sm",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:n("menuView.qrTitle")})]}),a.jsx("p",{className:"text-sm text-gray-700",children:n("menuView.qrDescription")})]}),a.jsx("button",{type:"button",onClick:()=>{J(n("menuView.qrInfo"),{duration:4e3,icon:""})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium text-sm transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 whitespace-nowrap","aria-label":n("menuView.qrCta"),children:n("menuView.qrCta")})]})}),a.jsx("div",{className:"mb-10",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:I,onChange:ae=>F(ae.target.value),placeholder:n("publicPage.restaurantsLayout.searchPlaceholder"),className:"w-full rounded-2xl border border-gray-200 bg-white/90 px-4 py-3 pl-11 pr-10 text-base shadow-sm focus:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-100","aria-label":n("publicPage.restaurantsLayout.searchPlaceholder")}),a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),I&&a.jsx("button",{type:"button",onClick:()=>F(""),className:"absolute right-3 top-1/2 -translate-y-1/2 rounded-full p-1 text-gray-400 transition hover:bg-gray-100 hover:text-gray-600","aria-label":n("publicPage.restaurantsLayout.clearSearch"),children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),We.length>0&&a.jsxs("div",{className:"mb-16",children:[a.jsxs("div",{className:"flex items-center justify-between mb-10",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-900 leading-tight",children:"Nuestras Categoras"}),a.jsxs("p",{className:"text-base sm:text-lg text-gray-600 font-medium hidden sm:block",children:[We.length," ",We.length===1?"categora disponible":"categoras disponibles"]})]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6 sm:gap-7 md:gap-8",children:We.map(ae=>{const Ee=Fe[ae.id]||[];return Ee.length===0?null:a.jsxs("button",{onClick:()=>aL(ae.id,z),className:"group relative rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden border-2 border-gray-100 hover:border-blue-500 transform hover:-translate-y-2 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 active:scale-[0.98]",style:{backgroundColor:ee.cardColor},"aria-label":`Ver categora ${ae.name}`,children:[a.jsxs("div",{className:"aspect-square relative overflow-hidden bg-gradient-to-br from-gray-50 via-gray-50 to-gray-100 group-hover:from-gray-100 group-hover:via-gray-50 group-hover:to-gray-100 transition-colors duration-300",children:[ae.image_url?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:ae.image_url,alt:ae.name,className:"w-full h-full object-cover group-hover:scale-110 group-hover:brightness-105 transition-all duration-500",loading:"lazy",width:"400",height:"400",decoding:"async"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-black/10 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):ee.categoryImageDefault?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:ee.categoryImageDefault,alt:ae.name,className:"w-full h-full object-cover group-hover:scale-110 group-hover:brightness-105 transition-all duration-500",loading:"lazy",width:"400",height:"400",decoding:"async"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-black/10 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center group-hover:from-blue-100 group-hover:via-purple-100 group-hover:to-pink-100 transition-colors duration-300",children:a.jsx("span",{className:"text-5xl sm:text-6xl md:text-7xl group-hover:scale-110 transition-transform duration-300",children:""})}),a.jsx("div",{className:"absolute top-3 right-3 bg-white/95 backdrop-blur-md rounded-full px-2.5 py-1.5 shadow-lg border border-gray-200/50",children:a.jsx("span",{className:"text-xs sm:text-sm font-extrabold text-gray-800",children:Ee.length})})]}),a.jsxs("div",{className:"p-5 sm:p-6",style:{backgroundColor:ee.cardColor},children:[a.jsx("h3",{className:"font-extrabold text-base sm:text-lg md:text-xl text-center line-clamp-2 mb-2 group-hover:opacity-80 transition-colors duration-300 leading-tight",style:{color:ee.titleColor},children:ae.name}),ae.description&&a.jsx("p",{className:"text-sm sm:text-base mt-2 text-center line-clamp-1",style:{color:ee.textColor,opacity:.8},children:ae.description}),a.jsx("div",{className:"mt-3 flex items-center justify-center",children:a.jsx("span",{className:"text-xs sm:text-sm font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-x-[-4px] group-hover:translate-x-0",style:{color:ee.buttonColor},children:"Ver productos "})})]})]},ae.id)})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("section",{className:"lg:col-span-2 space-y-8",children:[We.map(ae=>{const Ee=Fe[ae.id]||[];return Ee.length===0?null:a.jsxs("div",{id:`menu-cat-${ae.id}`,className:"scroll-mt-24 transition-all duration-300 rounded-xl",children:[a.jsx("div",{className:"mb-8 sm:mb-10",children:ae.image_url?a.jsxs("div",{className:"relative h-64 sm:h-72 md:h-80 rounded-3xl sm:rounded-[2rem] overflow-hidden mb-8 shadow-xl",children:[a.jsx("img",{src:ae.image_url,alt:ae.name,className:"w-full h-full object-cover",loading:"lazy",width:"800",height:"200",decoding:"async",style:{aspectRatio:"16 / 6"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),a.jsxs("div",{className:"absolute bottom-8 sm:bottom-10 left-8 sm:left-10 right-8 sm:right-10",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold text-white mb-3 leading-tight",children:ae.name}),ae.description&&a.jsx("p",{className:"text-lg sm:text-xl text-white/95 font-medium",children:ae.description})]})]}):ee.categoryImageDefault?a.jsxs("div",{className:"relative h-64 sm:h-72 md:h-80 rounded-3xl sm:rounded-[2rem] overflow-hidden mb-8 shadow-xl",children:[a.jsx("img",{src:ee.categoryImageDefault,alt:ae.name,className:"w-full h-full object-cover",loading:"lazy",width:"800",height:"200",decoding:"async",style:{aspectRatio:"16 / 6"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"}),a.jsxs("div",{className:"absolute bottom-8 sm:bottom-10 left-8 sm:left-10 right-8 sm:right-10",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold text-white mb-3 leading-tight",children:ae.name}),ae.description&&a.jsx("p",{className:"text-lg sm:text-xl text-white/95 font-medium",children:ae.description})]})]}):a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold mb-3 leading-tight",style:{color:ee.titleColor},children:ae.name}),ae.description&&a.jsx("p",{className:"text-lg sm:text-xl font-medium",style:{color:ee.textColor,opacity:.8},children:ae.description})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5 sm:gap-6",children:Ee.map(Te=>a.jsxs("div",{className:"rounded-2xl shadow-lg border border-gray-200/50 hover:shadow-2xl hover:scale-[1.01] transition-all duration-300 overflow-hidden cursor-pointer group active:scale-[0.99]",style:{backgroundColor:ee.cardColor},onClick:()=>{P(Te),C(!0)},children:[a.jsxs("div",{className:"aspect-square w-full overflow-hidden relative bg-gradient-to-br from-gray-50 to-gray-100",children:[Te.image_url?a.jsx("img",{src:Te.image_url,alt:Te.name,className:"w-full h-full object-cover group-hover:scale-110 group-hover:brightness-105 transition-all duration-500",loading:"lazy",width:"400",height:"400",decoding:"async"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-50 via-gray-50 to-gray-100",children:a.jsx("span",{className:"text-5xl sm:text-6xl opacity-50",children:""})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/0 via-black/0 to-black/0 group-hover:from-black/10 group-hover:via-black/5 group-hover:to-black/0 transition-all duration-300"}),a.jsx("div",{className:"absolute top-3 right-3 bg-white/95 backdrop-blur-md rounded-full px-3 sm:px-4 py-1.5 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 shadow-lg border border-gray-200/50",children:a.jsx("span",{className:"text-xs sm:text-sm font-semibold text-gray-900",children:n("common.viewDetails")})})]}),a.jsxs("div",{className:"p-5 sm:p-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-extrabold text-lg sm:text-xl mb-2 group-hover:opacity-80 transition-colors duration-300 leading-tight",style:{color:ee.titleColor},children:Te.name}),Te.description&&a.jsx("p",{className:"text-sm sm:text-base line-clamp-2 mb-3 leading-relaxed opacity-90",style:{color:ee.textColor},children:Te.description})]}),a.jsxs("div",{className:"flex flex-col items-end gap-1",children:[Te.hide_price?a.jsx("span",{className:"text-sm sm:text-base font-semibold text-gray-600",children:n("menuView.priceOnRequest")}):Te.price?a.jsxs("p",{className:"text-xl sm:text-2xl font-extrabold text-gray-900 whitespace-nowrap",children:["$",Zu.format(Te.price)]}):a.jsx("span",{className:"text-sm text-gray-500",children:n("common.notAvailable")}),Te.isAvailable===!1&&a.jsx("span",{className:"text-xs sm:text-sm px-2.5 py-1 rounded-full bg-gradient-to-r from-red-100 to-red-200 text-red-700 font-semibold border border-red-300",children:n("menuView.soldOut")})]})]}),Te.tags&&Te.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[Te.tags.slice(0,3).map(ze=>a.jsx("span",{className:"px-2.5 py-1 text-xs sm:text-sm rounded-full bg-gray-100 text-gray-700 font-medium border border-gray-200",children:ze},ze)),Te.tags.length>3&&a.jsxs("span",{className:"px-2.5 py-1 text-xs sm:text-sm rounded-full bg-blue-100 text-blue-700 font-semibold border border-blue-200",children:["+",Te.tags.length-3]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:ze=>{ze.stopPropagation(),P(Te),C(!0)},className:"flex-1 px-4 py-2.5 rounded-xl text-sm sm:text-base font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 active:scale-[0.98]","aria-label":`Ver detalles de ${Te.name}`,children:n("common.viewDetails")}),a.jsx("button",{type:"button",onClick:ze=>{ze.stopPropagation(),cn(Te,1)},disabled:Te.isAvailable===!1||!Te.price,className:`flex-1 px-4 py-2.5 rounded-xl text-sm sm:text-base font-semibold transition-all duration-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500 ${Te.isAvailable===!1||!Te.price?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:opacity-90 active:opacity-80 shadow-md hover:shadow-lg active:scale-[0.98]"}`,style:Te.isAvailable===!1||!Te.price?{}:{backgroundColor:ee.buttonColor,color:ee.buttonTextColor},"aria-label":Te.isAvailable===!1||!Te.price?`${Te.name} no disponible`:`Agregar ${Te.name} al carrito`,children:Te.isAvailable===!1?n("menuView.soldOut"):n("menuView.addToCart")})]})]})]},Te.id))})]},ae.id)}),Se===0&&p.length>0&&X&&a.jsx("div",{className:"rounded-2xl border border-dashed border-gray-200 bg-white/70 p-6 text-center text-gray-600",children:n("common.noResults")}),Se>0&&Pe>1&&a.jsx("div",{className:"flex flex-col items-center gap-4 py-4",children:$<Pe?a.jsx("button",{type:"button",onClick:()=>Q(ae=>ae+1),className:"rounded-full px-6 py-3 text-sm font-semibold shadow-md transition bg-blue-600 text-white hover:bg-blue-700",children:n("publicPage.restaurantsLayout.loadMore")}):a.jsx("p",{className:"text-sm text-gray-500",children:n("publicPage.restaurantsLayout.noMoreProducts")})})]}),!q&&a.jsxs("aside",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-4 h-fit sticky top-28",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n("menuView.cart")}),a.jsxs("span",{className:"text-sm text-gray-500",children:[b.length," ",b.length===1?n("menuView.item"):n("menuView.items")]})]}),b.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("p",{className:"text-sm text-gray-500",children:n("menuView.cartEmpty")})]}):a.jsxs("div",{className:"space-y-3",children:[b.map(ae=>a.jsxs("div",{className:"flex items-start justify-between gap-3 pb-3 border-b border-gray-100 last:border-0",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-gray-900 truncate",children:ae.product.name}),!ae.product.hide_price&&a.jsxs("p",{className:"text-sm text-gray-500",children:[ae.quantity," x $",Zu.format(ae.product.price||0)," = $",Zu.format((ae.product.price||0)*ae.quantity)]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>zt(ae.product.id,-1),className:"w-7 h-7 flex items-center justify-center border border-gray-200 rounded hover:bg-gray-100 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-blue-500","aria-label":`Reducir cantidad de ${ae.product.name}`,children:""}),a.jsx("span",{className:"w-8 text-center text-sm font-medium",children:ae.quantity}),a.jsx("button",{type:"button",onClick:()=>zt(ae.product.id,1),className:"w-7 h-7 flex items-center justify-center border border-gray-200 rounded hover:bg-gray-100 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-1 focus-visible:outline-blue-500","aria-label":`Aumentar cantidad de ${ae.product.name}`,children:"+"})]})]},ae.product.id)),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200 mt-3",children:[a.jsx("span",{className:"text-base font-semibold text-gray-900",children:n("menuView.total")}),a.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["$",Zu.format(Ze)]})]}),a.jsx("button",{type:"button",onClick:()=>L(!0),className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold shadow-md hover:shadow-lg transition-all focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-500","aria-label":`${n("menuView.whatsappOrder")} - Total: $${Zu.format(Ze)}`,children:n("menuView.whatsappOrder")})]})]}),q&&b.length>0&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-gray-200 shadow-lg lg:hidden",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[b.length," ",b.length===1?n("menuView.item"):n("menuView.items")]}),a.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["$",Zu.format(Ze)]})]}),a.jsx("button",{type:"button",onClick:()=>L(!0),className:"px-6 py-3 bg-green-600 text-white rounded-lg font-semibold shadow-md hover:bg-green-700 active:bg-green-800 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-500","aria-label":n("menuView.viewCart"),children:n("menuView.viewCart")})]})})})]})]}),a.jsx(bV,{product:T,isOpen:A,onClose:()=>{C(!1),P(null)},onAddToCart:ae=>cn(ae,1),isAvailable:T?.isAvailable!==!1,t:n}),a.jsx(Z7,{isOpen:M,cart:b.map(ae=>({product:ae.product,quantity:ae.quantity})),orderForm:S,orderChannel:"MENU",menuQrTableCount:Y,deliveryEnabled:i?.delivery_enabled,fulfillmentConfig:H,onClose:()=>L(!1),onQuantityChange:(ae,Ee)=>{const Te=Ee-(b.find(ze=>ze.product.id===ae)?.quantity||0);zt(ae,Te)},onRemove:_n,onFormChange:(ae,Ee)=>O(Te=>({...Te,[ae]:Ee})),onSubmit:_t}),k&&a.jsx(vV,{isOpen:!!k,onClose:()=>R(null),orderCode:k.id.slice(-6).toUpperCase(),trackingLink:k.link}),q&&b.length>0&&a.jsx("div",{className:"h-24"})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",style:oe,children:a.jsxs("div",{className:"text-center px-4",children:[a.jsx("p",{className:"text-lg text-gray-600 mb-4",children:n("menuView.companyNotFound")}),a.jsx("button",{type:"button",onClick:()=>e("/"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700","aria-label":n("menuView.backToHome"),children:n("menuView.backToHome")})]})})}function ibe(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center space-y-2 p-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pgina deshabilitada"}),a.jsx("p",{className:"text-gray-600",children:"El contenido de Transparencia ya no est disponible."})]})})}function iL(){const t=qe(),e=[{icon:"",title:"Simplicidad",description:"Creemos que la tecnologa debe ser accesible para todos. Sin complicaciones, sin barreras tcnicas."},{icon:"",title:"Innovacin",description:"Estamos constantemente mejorando y agregando nuevas funcionalidades basadas en las necesidades reales de nuestros usuarios."},{icon:"",title:"Compromiso",description:"Tu xito es nuestro xito. Trabajamos da a da para que tu negocio crezca y prospere."},{icon:"",title:"Seguridad",description:"Protegemos tus datos con tecnologa de nivel empresarial y cumplimos con todas las normativas chilenas."}],n=[{year:"2024",title:"Nacimiento de PyM-ERP",description:"Identificamos la necesidad de digitalizar las PYMEs chilenas con una solucin simple y accesible."},{year:"2025-2026 Q4",title:"Lanzamiento Beta",description:"Lanzamos nuestra plataforma bsica con funcionalidades esenciales para emprendedores y pequeas empresas."},{year:"2026",title:"Expansin y Crecimiento",description:"Lanzamiento de planes avanzados y funcionalidades ERP completas para empresas en crecimiento."}];return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Acerca de Nosotros | PyM-ERP",description:"Conoce la historia, misin y valores de PyM-ERP. Somos una plataforma diseada para digitalizar y hacer crecer tu negocio.",canonical:"/about"}),a.jsx("div",{className:"min-h-screen bg-white",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[a.jsx(ke.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-8 text-indigo-600 hover:text-indigo-700 font-medium",children:" Volver al inicio"}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[a.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:"Acerca de PyM-ERP"}),a.jsx("p",{className:"text-xl md:text-2xl text-gray-700 max-w-4xl mx-auto leading-relaxed mb-8",children:"Somos una plataforma tecnolgica diseada especficamente para emprendedores y PYMEs chilenas. Nuestra misin es democratizar el acceso a herramientas profesionales de gestin empresarial."}),a.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl p-8 md:p-12 max-w-4xl mx-auto",children:a.jsx("p",{className:"text-lg md:text-xl text-gray-800 leading-relaxed font-medium",children:'"Creemos que cada negocio, sin importar su tamao, merece tener acceso a tecnologa de clase mundial para competir y crecer en el mercado digital actual."'})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-16",children:[a.jsxs(ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"bg-white border-2 border-indigo-100 rounded-2xl p-8 shadow-lg",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:"Nuestra Misin"}),a.jsx("p",{className:"text-base md:text-lg text-gray-700 leading-relaxed",children:"Facilitar la transformacin digital de emprendedores y PYMEs en Chile, proporcionando herramientas intuitivas, accesibles y poderosas que les permitan gestionar su negocio de manera profesional sin necesidad de conocimientos tcnicos avanzados ni grandes inversiones."})]}),a.jsxs(ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},className:"bg-white border-2 border-purple-100 rounded-2xl p-8 shadow-lg",children:[a.jsx("div",{className:"text-5xl mb-4",children:""}),a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-4",children:"Nuestra Visin"}),a.jsx("p",{className:"text-base md:text-lg text-gray-700 leading-relaxed",children:"Ser la plataforma lder en Chile para la gestin empresarial de PYMEs, reconocida por su simplicidad, innovacin y compromiso con el xito de nuestros usuarios. Aspiramos a ser el socio tecnolgico de confianza que impulsa el crecimiento de miles de negocios chilenos."})]})]}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-12",children:"Nuestros Valores"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((s,r)=>a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5+r*.1},className:"bg-white rounded-xl p-6 shadow-md border border-gray-200 hover:shadow-lg transition-shadow text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:s.icon}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:s.title}),a.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})]},s.title))})]}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 md:p-12 text-white mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-8 text-center",children:"Nuestra Historia"}),a.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[a.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"PyM-ERP naci de la observacin de una realidad: miles de emprendedores y pequeas empresas en Chile luchan por competir en un mercado cada vez ms digitalizado, pero carecen de acceso a herramientas profesionales de gestin debido a su complejidad y costo."}),a.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Decidimos crear una solucin que combinara la potencia de un ERP empresarial con la simplicidad que necesita un emprendedor. Utilizamos tecnologa de punta (Firebase, React, Cloud Computing) para ofrecer una plataforma robusta, segura y escalable, pero con una interfaz intuitiva que cualquiera puede usar."}),a.jsx("p",{className:"text-lg md:text-xl leading-relaxed",children:"Hoy, PyM-ERP est ayudando a cientos de negocios a digitalizarse, gestionar sus operaciones y crecer. Nuestro compromiso es seguir innovando y mejorando para ser el mejor aliado tecnolgico de tu negocio."})]})]}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.7},className:"mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-12",children:"Hitos Importantes"}),a.jsx("div",{className:"space-y-6",children:n.map((s,r)=>a.jsx(ke.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.8+r*.1},className:"bg-white border-2 border-gray-200 rounded-xl p-6 md:p-8 shadow-md hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("span",{className:"inline-block px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg font-bold text-lg",children:s.year})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:s.title}),a.jsx("p",{className:"text-base md:text-lg text-gray-700 leading-relaxed",children:s.description})]})]})},s.year))})]}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.9},className:"bg-gray-50 rounded-2xl p-8 md:p-12 mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-8",children:"Tecnologa de Clase Mundial"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-3",children:""}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Google Cloud"}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Infraestructura escalable y segura con 99.9% de disponibilidad"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-3",children:""}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Seguridad Avanzada"}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Cifrado de datos y cumplimiento con normativas chilenas"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl mb-3",children:""}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Rendimiento ptimo"}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Tecnologa moderna para mxima velocidad y experiencia fluida"})]})]})]}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 md:p-12 text-center text-white",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"nete a Nuestra Comunidad"}),a.jsx("p",{className:"text-lg md:text-xl mb-8 opacity-90 max-w-2xl mx-auto",children:"Comienza tu transformacin digital hoy. El plan bsico es completamente gratis y te da acceso a todas las herramientas esenciales para gestionar tu negocio profesionalmente."}),a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/request-access"),className:"px-8 py-4 bg-white text-indigo-600 rounded-lg font-semibold text-lg shadow-xl hover:shadow-2xl transition-shadow",children:"Crear Cuenta Gratis "})]})]})})]})}function obe(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center space-y-2 p-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pgina deshabilitada"}),a.jsx("p",{className:"text-gray-600",children:"La informacin de planes y precios ya no est disponible."})]})})}const lbe=[{title:"Responsable y contacto",items:["PYMERP PLATAFORMA DIGITAL SpA, operada desde Chile para pymes y profesionales.","Correo de contacto legal y privacidad: ignacio@datakomerz.com.","Domicilio referencial para efectos legales: Romeral, Regin del Maule, Chile.","RUT: 78.340.269-6."]},{title:"Marco normativo",items:["Ley N19.628 sobre Proteccin de la Vida Privada.","Ley N19.496 de Proteccin de los Derechos de los Consumidores.","Normativa tributaria chilena y exigencias del SII para facturacin."]},{title:"Datos que tratamos",items:["Identificacin y contacto (nombre, RUT/ID, correo, telfono, empresa).","Datos de uso del servicio (logs tcnicos, configuraciones, interacciones).","Datos de facturacin y medios de pago procesados por proveedores externos seguros.","Informacin opcional de marketing (preferencias, respuesta a campaas)."]},{title:"Finalidades y bases legtimas",items:["Prestacin del servicio y soporte (ejecucin de contrato).","Seguridad, prevencin de fraude y continuidad operacional (inters legtimo).","Facturacin y obligaciones legales en Chile (obligacin legal).","Analtica y mejora del producto (inters legtimo, datos agregados/annimos cuando sea posible).","Envo de comunicaciones comerciales con consentimiento revocable."]}],cbe=["Acceso, rectificacin y eliminacin conforme a la Ley 19.628.","Bloqueo o suspensin de tratamiento cuando proceda.","Oposicin al uso con fines de marketing directo.","Portabilidad de datos cuando sea tcnicamente viable.","Derecho a revocar el consentimiento sin efectos retroactivos."];function oL(){const t=qe();return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Poltica de Privacidad | PyM-ERP",description:"Cmo protegemos y usamos los datos de tu negocio cumpliendo la normativa chilena.",canonical:"/privacy"}),a.jsx("div",{className:"min-h-screen bg-gray-800",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"mb-4",children:a.jsx("button",{type:"button",onClick:()=>t(-1),className:"inline-flex items-center gap-2 rounded-full border border-cyan-300/60 px-3 py-1.5 text-xs font-semibold text-cyan-100 hover:bg-cyan-300/10 transition","aria-label":"Volver",children:" Volver"})}),a.jsx("p",{className:"text-sm text-cyan-400 font-semibold uppercase tracking-wide mb-2",children:"Actualizado: julio 2024  Cobertura Chile"}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Poltica de Privacidad"}),a.jsx("p",{className:"mt-4 text-lg text-cyan-100 leading-relaxed",children:"Diseamos PyM-ERP con seguridad y transparencia desde el da uno. Este documento explica cmo tratamos tus datos personales en Chile, por qu lo hacemos y cmo puedes ejercer tus derechos."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:lbe.map(e=>a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.title}),a.jsx("ul",{className:"space-y-3 text-base md:text-lg text-cyan-100 leading-relaxed",children:e.items.map(n=>a.jsxs("li",{children:[" ",n]},n))})]},e.title))}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Tus derechos de privacidad"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 mb-5 leading-relaxed",children:"Puedes ejercerlos escribiendo a ignacio@datakomerz.com. Respondemos dentro de los plazos legales y siempre validamos identidad para proteger tu informacin."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:cbe.map(e=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("span",{className:"mt-1.5 h-3 w-3 rounded-full bg-cyan-400 flex-shrink-0","aria-hidden":"true"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:e})]},e))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Transferencias y almacenamiento"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Alojamientos en Google Cloud/Firebase con servidores en regiones de alta disponibilidad. Aplicamos clusulas contractuales estndar y medidas adicionales para transferencias internacionales, siempre buscando que tus datos permanezcan en jurisdicciones con niveles adecuados de proteccin."})]}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Retencin y eliminacin"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Conservamos datos mientras tengas cuenta activa. Informacin de facturacin se mantiene por 5 aos segn exigencias tributarias chilenas. Al cerrar tu cuenta, anonimizamos o eliminamos datos que no debamos conservar por obligacin legal."})]})]}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Cookies y analtica responsable"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 mb-3 leading-relaxed",children:"Usamos cookies necesarias para el inicio de sesin y el funcionamiento de la plataforma, y cookies de analtica (por ejemplo Google Analytics 4) para mejorar el producto. Puedes gestionar tu consentimiento desde el banner de cookies o en la configuracin de tu navegador. Ms detalles en nuestra pgina de Cookies."}),a.jsx("a",{href:"/cookies",className:"inline-flex items-center text-base md:text-lg text-cyan-300 font-semibold hover:text-cyan-200",children:"Ver poltica de Cookies "})]}),a.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-8",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Necesitas un acuerdo o anexo de datos?"}),a.jsx("p",{className:"text-gray-100 mb-4",children:"Podemos firmar anexos de tratamiento de datos, acuerdos de confidencialidad y revisar requisitos especficos de tu industria en Chile. Escrbenos y lo resolvemos rpido."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx("a",{className:"px-5 py-3 bg-white text-gray-900 rounded-lg font-semibold text-center",href:"mailto:ignacio@datakomerz.com",children:"ignacio@datakomerz.com"}),a.jsx("a",{className:"px-5 py-3 border border-white/40 text-white rounded-lg font-semibold text-center hover:bg-white hover:text-gray-900 transition",href:"/contacto",children:"Contactar al equipo"})]})]})]})})})]})}const dbe=[{title:"Aceptacin y alcance",items:["Al crear una cuenta o usar PyM-ERP aceptas estos Trminos y nuestra Poltica de Privacidad.","El servicio se presta en modalidad SaaS para Chile; algunos mdulos pueden requerir acuerdos adicionales.","Usuario debe ser mayor de 18 aos y entregar informacin veraz para cumplir con normativas locales."]},{title:"Planes, pagos y facturacin",items:["Precios expresados en CLP salvo indicacin distinta. Emitimos documentos tributarios conforme al SII.","Se puede ajustar el valor de planes; te avisaremos con 15 das corridos de anticipacin.","Derecho de retracto online conforme Ley 19.496: 10 das desde la contratacin si no has usado el servicio.","Renovaciones mensuales o anuales segn plan; puedes cancelar en cualquier momento antes del siguiente ciclo."]},{title:"Uso permitido",items:["Prohibido cargar datos ilcitos, infringir derechos de terceros o vulnerar seguridad del servicio.","No se permite revender, sublicenciar o realizar ingeniera inversa del software.","Podemos suspender cuentas ante uso abusivo, impago, fraude o incumplimiento contractual."]},{title:"Propiedad intelectual",items:["PyM-ERP mantiene derechos sobre el software, marca y contenidos. Otorgamos una licencia limitada, no exclusiva y revocable para usar la plataforma.","El usuario conserva titularidad de sus datos y contenidos. Solo los usamos para prestar el servicio y cumplir obligaciones legales.","Las integraciones y bibliotecas de terceros mantienen sus respectivas licencias, detalladas en la seccin de Licencias."]},{title:"Limitacin de responsabilidad",items:["El servicio se entrega tal cual y con esfuerzos razonables de continuidad; puede sufrir interrupciones programadas o de fuerza mayor.","Nuestra responsabilidad total frente al usuario se limita al monto efectivamente pagado en los ltimos 3 meses previos al reclamo.","Nada limita derechos irrenunciables del consumidor bajo la Ley 19.496 o normas imperativas chilenas."]},{title:"Datos y confidencialidad",items:["Custodiamos la informacin siguiendo polticas de seguridad y privacidad alineadas a la Ley 19.628.","Si tratamos datos personales como encargado, podemos firmar un anexo de tratamiento y confidencialidad.","Avisaremos incidentes de seguridad relevantes y colaboraremos con las autoridades cuando corresponda."]}];function lL(){const t=qe();return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Trminos y Condiciones | PyM-ERP",description:"Condiciones de uso del servicio SaaS PyM-ERP bajo la legislacin chilena.",canonical:"/terms"}),a.jsx("div",{className:"min-h-screen bg-gray-800",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"mb-4",children:a.jsx("button",{type:"button",onClick:()=>t(-1),className:"inline-flex items-center gap-2 rounded-full border border-cyan-300/60 px-3 py-1.5 text-xs font-semibold text-cyan-100 hover:bg-cyan-300/10 transition","aria-label":"Volver",children:" Volver"})}),a.jsx("p",{className:"text-sm text-cyan-400 font-semibold uppercase tracking-wide mb-2",children:"Actualizado: julio 2024  Vigente en Chile"}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Trminos y Condiciones"}),a.jsx("p",{className:"mt-4 text-lg text-cyan-100 leading-relaxed",children:"Este acuerdo regula tu relacin con PyM-ERP. Queremos que tengas claridad total sobre qu puedes esperar del servicio, cules son tus obligaciones y cmo resolvemos disputas."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:dbe.map(e=>a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-4",children:e.title}),a.jsx("ul",{className:"space-y-3 text-base md:text-lg text-cyan-100 leading-relaxed",children:e.items.map(n=>a.jsxs("li",{children:[" ",n]},n))})]},e.title))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Duracin y trmino"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"El contrato es de tracto sucesivo mientras mantengas una suscripcin activa. Puedes terminarlo en cualquier momento desde tu panel o escribiendo a soporte. Si hay obligaciones pendientes (pagos o entrega de informacin tributaria), debers cumplirlas incluso despus del trmino."})]}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Ley aplicable y solucin de controversias"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Este contrato se rige por las leyes de la Repblica de Chile. Cualquier disputa se somete a los tribunales ordinarios de justicia de Santiago. Antes de llegar a ese punto, te invitamos a activar un proceso de solucin directa con nuestro equipo legal."})]})]}),a.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-8",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Tienes dudas legales o necesitas un contrato a medida?"}),a.jsx("p",{className:"text-gray-100 mb-4",children:"Ajustamos anexos, clusulas sectoriales y polticas de datos segn tu industria en Chile. Nuestro objetivo es que cumplas tus obligaciones regulatorias sin friccin."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx("a",{className:"px-5 py-3 bg-white text-gray-900 rounded-lg font-semibold text-center",href:"mailto:ignacio@datakomerz.com",children:"ignacio@datakomerz.com"}),a.jsx("a",{className:"px-5 py-3 border border-white/40 text-white rounded-lg font-semibold text-center hover:bg-white hover:text-gray-900 transition",href:"/contacto",children:"Coordinar con el equipo"})]})]})]})})})]})}const ube=[{title:"Esenciales",description:"Necesarias para iniciar sesin, mantener la sesin activa y recordar configuraciones bsicas del panel."},{title:"Preferencias",description:"Guardan idioma, vistas favoritas o ajustes de accesibilidad. Puedes desactivarlas, pero tu experiencia puede ser menos personalizada."},{title:"Analtica",description:"Usamos Google Analytics 4 para entender uso agregado y mejorar el producto. Se recogen mtricas anonimizadas cuando es posible."},{title:"Marketing",description:"Solo con tu consentimiento. Nos ayudan a medir campaas y evitar mensajes irrelevantes."}];function hbe(){const t=qe();return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Poltica de Cookies | PyM-ERP",description:"Cmo usamos cookies y tecnologas similares en PyM-ERP conforme a la normativa chilena.",canonical:"/cookies"}),a.jsx("div",{className:"min-h-screen bg-gray-800",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"mb-4",children:a.jsx("button",{type:"button",onClick:()=>t(-1),className:"inline-flex items-center gap-2 rounded-full border border-cyan-300/60 px-3 py-1.5 text-xs font-semibold text-cyan-100 hover:bg-cyan-300/10 transition","aria-label":"Volver",children:" Volver"})}),a.jsx("p",{className:"text-sm text-cyan-400 font-semibold uppercase tracking-wide mb-2",children:"Transparencia de datos  Cumplimiento Chile"}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Poltica de Cookies"}),a.jsx("p",{className:"mt-4 text-lg text-cyan-100 leading-relaxed",children:"Usamos cookies para que PyM-ERP funcione seguro y para mejorar la experiencia. Aqu te explicamos qu guardamos, por qu y cmo puedes controlar tus preferencias."})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ube.map(e=>a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:e.title}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:e.description})]},e.title))}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Gestin de consentimiento"}),a.jsxs("ul",{className:"space-y-3 text-base md:text-lg text-cyan-100 leading-relaxed",children:[a.jsx("li",{children:" Puedes aceptar, rechazar o ajustar categoras desde el banner de cookies de PyM-ERP."}),a.jsx("li",{children:" Tambin puedes borrar o bloquear cookies desde la configuracin de tu navegador."}),a.jsx("li",{children:" Si bloqueas cookies esenciales, algunas funciones (ej. autenticacin, carrito o agenda) pueden dejar de funcionar."}),a.jsx("li",{children:" Google Analytics 4 almacena identificadores tcnicos; usamos IP anonimizada y retencin limitada para cumplir con el estndar de minimizacin de datos."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Base legal en Chile"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"El uso de cookies se ampara en tu consentimiento informado y en nuestro inters legtimo para proveer seguridad y continuidad operacional. Cumplimos con la Ley 19.628 y las directrices de SERNAC sobre transparencia al consumidor."})]}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Tiempos de retencin"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Cookies de sesin expiran al cerrar el navegador. Cookies de preferencia y analtica se conservan entre 6 y 13 meses salvo que las elimines antes. Revisamos peridicamente que no existan cookies heredadas o no declaradas."})]})]}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Ejercer tus derechos"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 mb-4 leading-relaxed",children:"Puedes solicitar acceso o eliminacin de datos asociados a cookies contactando a ignacio@datakomerz.com. Si usas identificadores publicitarios, gestionaremos la peticin con los terceros correspondientes."}),a.jsx("a",{href:"mailto:ignacio@datakomerz.com",className:"inline-flex items-center text-base md:text-lg text-cyan-300 font-semibold hover:text-cyan-200",children:"Escribir a ignacio@datakomerz.com "})]})]})})})]})}const mbe=["Cumplir la Ley 19.628 (Proteccin de la Vida Privada) y la Ley 19.496 (Derechos del Consumidor).","Alinear contratos y anexos a las exigencias sectoriales de cada cliente (salud, educacin, retail, etc.).","Notificar incidentes relevantes y colaborar con la autoridad competente cuando corresponda.","Firmar acuerdos de confidencialidad y anexos de tratamiento de datos cuando lo requieras."];function fbe(){return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Aviso Legal | PyM-ERP",description:"Informacin legal, obligaciones y compromisos de cumplimiento de PyM-ERP en Chile.",canonical:"/legal"}),a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-indigo-600 font-semibold uppercase tracking-wide mb-2",children:"Transparencia legal  Chile"}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900",children:"Aviso Legal"}),a.jsx("p",{className:"mt-4 text-lg text-gray-700 leading-relaxed",children:"PyM-ERP es una plataforma SaaS diseada y operada desde Chile. Estas son las reglas bsicas que rigen nuestra relacin con clientes, proveedores y usuarios finales."})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Identificacin del proveedor"}),a.jsx("p",{className:"text-gray-700",children:"PyM-ERP opera como software para pymes y profesionales. Domicilio referencial: Santiago, Chile. Correo oficial para notificaciones y temas legales: legal@pym-erp.com."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Compromisos de cumplimiento"}),a.jsx("ul",{className:"space-y-2 text-gray-700",children:mbe.map(t=>a.jsxs("li",{children:[" ",t]},t))})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Responsabilidad y cobertura"}),a.jsx("p",{className:"text-gray-700",children:"Limitamos responsabilidad al marco permitido por la ley chilena y los contratos vigentes. Contamos con proveedores con certificaciones de seguridad (Google Cloud/Firebase) y aplicamos controles tcnicos y organizativos alineados a buenas prcticas (cifrado en trnsito y reposo, backups, segregacin de ambientes)."})]})]}),a.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-xl p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Cmo resolver incidentes o disputas"}),a.jsx("p",{className:"text-gray-700",children:"Para reclamos de consumo puedes recurrir a SERNAC o tribunales competentes. Preferimos siempre una solucin directa: escrbenos a legal@pym-erp.com con los antecedentes y responderemos en el menor plazo posible."})]}),a.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-8",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Documentacin complementaria"}),a.jsx("p",{className:"text-gray-100 mb-4",children:"Revisa tambin nuestros Trminos, Poltica de Privacidad, Cookies y Licencias para entender todo el marco legal del servicio."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx("a",{className:"px-5 py-3 bg-white text-gray-900 rounded-lg font-semibold text-center",href:"/terms",children:"Ver Trminos"}),a.jsx("a",{className:"px-5 py-3 border border-white/40 text-white rounded-lg font-semibold text-center hover:bg-white hover:text-gray-900 transition",href:"/privacy",children:"Poltica de Privacidad"})]})]})]})})})]})}const pbe=[{name:"React",license:"MIT",link:"https://github.com/facebook/react/blob/main/LICENSE"},{name:"Vite",license:"MIT",link:"https://github.com/vitejs/vite/blob/main/LICENSE"},{name:"Tailwind CSS",license:"MIT",link:"https://github.com/tailwindlabs/tailwindcss/blob/master/LICENSE"},{name:"Firebase",license:"Trminos de Google/Firebase",link:"https://firebase.google.com/terms"},{name:"Framer Motion",license:"MIT",link:"https://github.com/framer/motion/blob/main/LICENSE"}];function cL(){return a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Licencias y terceros | PyM-ERP",description:"Detalle de licencias de software y activos utilizados en PyM-ERP.",canonical:"/licenses"}),a.jsx("div",{className:"min-h-screen bg-gray-800",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-cyan-400 font-semibold uppercase tracking-wide mb-2",children:"Transparencia  Software y activos"}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Licencias y componentes"}),a.jsx("p",{className:"mt-4 text-lg text-cyan-100 leading-relaxed",children:"PyM-ERP es propiedad de sus autores. Esta pgina resume las licencias relevantes y los principales componentes de terceros que usamos para entregar el servicio."})]}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Derechos de PyM-ERP"}),a.jsxs("ul",{className:"space-y-3 text-base md:text-lg text-cyan-100 leading-relaxed",children:[a.jsx("li",{children:" Marca, logotipos, copy y material comercial: todos los derechos reservados."}),a.jsx("li",{children:" Cdigo fuente propio: licencia propietaria, uso limitado al contrato con clientes."}),a.jsx("li",{children:" Queda prohibida la reproduccin, copia o redistribucin salvo autorizacin escrita."})]})]}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4",children:"Componentes de terceros"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 mb-5 leading-relaxed",children:"Utilizamos software open source y servicios cloud. Cada uno mantiene su propia licencia; al usar PyM-ERP aceptas tambin los trminos aplicables de estos terceros."}),a.jsx("div",{className:"divide-y divide-gray-600",children:pbe.map(t=>a.jsxs("div",{className:"py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-base md:text-lg text-white font-semibold",children:t.name}),a.jsxs("p",{className:"text-base md:text-lg text-cyan-100 mt-1",children:["Licencia: ",t.license]})]}),a.jsx("a",{className:"text-base md:text-lg text-cyan-300 font-semibold hover:text-cyan-200",href:t.link,target:"_blank",rel:"noreferrer",children:"Ver licencia"})]},t.name))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Activos creativos"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Ilustraciones, videos y fotografas utilizadas en campaas o en la app tienen licencias especficas (propias o de bancos de imgenes). Si necesitas confirmacin de derechos para una campaa conjunta, escrbenos y entregaremos respaldos."})]}),a.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-sm",children:[a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white mb-3",children:"Solicitudes legales"}),a.jsx("p",{className:"text-base md:text-lg text-cyan-100 leading-relaxed",children:"Para reportar uso indebido de material protegido o solicitar una licencia adicional, contctanos en legal@pym-erp.com. Respondemos siguiendo la ley chilena y las directrices de propiedad intelectual aplicables."})]})]})]})})})]})}function gbe(){const t=qe(),[e]=M2(),n=e.get("plan"),[s,r]=y.useState(n),[i,l]=y.useState(null),[d,u]=y.useState({name:"",email:"",phone:"",rut:"",contactType:"",message:""}),[h,f]=y.useState(!1),[p,x]=y.useState(!1),[b,_]=y.useState({}),j=qj().filter(C=>C.planId!=="BASIC");y.useEffect(()=>{s&&u(C=>({...C,contactType:"subscription-plan"}))},[s]);const v=[{value:"subscription-plan",label:"Solicitar plan de suscripcin",icon:"",description:"Activa un plan STARTER, PRO, BUSINESS o ENTERPRISE"},{value:"solution",label:"Necesitas una solucin digital especfica en tu proyecto?",icon:"",description:"Cuntanos sobre tu proyecto y te ayudamos a encontrar la mejor solucin"},{value:"question",label:"Tienes alguna duda o un feedback?",icon:"",description:"Estamos aqu para escucharte y ayudarte"},{value:"internship-commercial",label:"Prctica profesional - Comercial",icon:"",description:"nete a nuestro equipo comercial"},{value:"internship-developer",label:"Prctica profesional - Programador",icon:"",description:"Desarrolla con tecnologas modernas"},{value:"internship-marketing",label:"Prctica profesional - Marketing",icon:"",description:"Crea estrategias digitales innovadoras"},{value:"internship-designer",label:"Prctica profesional - Diseador",icon:"",description:"Disea experiencias increbles"},{value:"other",label:"Otros",icon:"",description:"Otra consulta o propuesta"}],T=C=>{const M=v.find(L=>L.value===C);return M?M.label:""},P=async C=>{C.preventDefault(),_({});const M=E8({name:{value:d.name,validators:[op]},email:{value:d.email,validators:[Soe]},contactType:{value:d.contactType,validators:[op]},message:{value:d.message,validators:d.contactType==="subscription-plan"?[]:[op]}});if(d.contactType==="subscription-plan"&&(i===null&&(M.hasAccount="Por favor indica si ya tienes una cuenta"),i===!0&&(!d.rut||d.rut.trim()==="")&&(M.rut="El RUT es requerido para activar el plan en una cuenta existente")),Object.keys(M).length>0){_(M),J.error("Por favor completa todos los campos requeridos correctamente");return}f(!0);try{let L=d.message.trim();if(s&&d.contactType==="subscription-plan"){const O=j.find(I=>I.planId===s);L=`Solicitud de activacin del plan ${O?.label||s}

`,L+=`Plan: ${O?.label||s}
`,L+=`Precio: ${O?.price||"Consultar"}

`,i===!0?(L+=` Ya tengo una cuenta creada
`,L+=`RUT de la empresa: ${d.rut||"No proporcionado"}
`,L+=`Correo de la cuenta: ${d.email}

`,L+=`Por favor activar el plan ${O?.label||s} en esta cuenta existente.

`):i===!1&&(L+=` No tengo cuenta, necesito crear una nueva
`,L+=`Correo para la nueva cuenta: ${d.email}

`,L+=`Por favor crear una nueva cuenta y activar el plan ${O?.label||s}.

`),d.message.trim()&&(L+=`Mensaje adicional:
${d.message.trim()}`)}const k="",R=encodeURIComponent(s?`Solicitud Plan ${s} - PyM-ERP`:`Contacto PyM-ERP: ${T(d.contactType)}`),S=encodeURIComponent(`Nombre: ${d.name}
Email: ${d.email}
Telfono: ${d.phone||"No proporcionado"}
`+(d.rut?`RUT: ${d.rut}
`:"")+`Tipo de consulta: ${T(d.contactType)}
`+(s?`Plan solicitado: ${s}
`:"")+(i!==null?`Tiene cuenta: ${i?"S":"No"}
`:"")+`
Mensaje:
${L}`);window.location.href=`mailto:ignacio@datakomerz.com?subject=${R}&body=${S}`,setTimeout(()=>{x(!0),u({name:"",email:"",phone:"",rut:"",contactType:"",message:""}),r(null),l(null)},500)}catch(L){J.error("Hubo un error al enviar tu mensaje. Por favor intenta nuevamente."),console.error("Error:",L)}finally{f(!1)}},A=(C,M)=>{if(u({...d,[C]:M}),b[C]){const L={...b};delete L[C],_(L)}};return p?a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Contacto | PyM-ERP",description:"Contctanos para resolver tus dudas, solicitar soluciones digitales o unirte a nuestro equipo.",canonical:"/contacto"}),a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-700 via-blue-800 to-indigo-900 flex items-center justify-center px-4",children:a.jsxs(ke.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl p-8 md:p-12 shadow-xl max-w-2xl w-full text-center",children:[a.jsx("div",{className:"text-6xl mb-6",children:""}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Mensaje Enviado!"}),a.jsx("p",{className:"text-lg text-gray-700 mb-8",children:"Gracias por contactarnos. Hemos recibido tu mensaje y te responderemos pronto."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{x(!1),u({name:"",email:"",phone:"",rut:"",contactType:"",message:""}),r(null),l(null)},className:"px-6 py-3 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition-colors",children:"Enviar otro mensaje"}),a.jsx(ke.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>t("/"),className:"px-6 py-3 bg-white text-blue-900 rounded-lg font-semibold hover:bg-blue-50 transition-colors",children:"Volver al inicio"})]})]})})]}):a.jsxs(a.Fragment,{children:[a.jsx(ha,{title:"Contacto | PyM-ERP",description:"Contctanos para resolver tus dudas, solicitar soluciones digitales o unirte a nuestro equipo.",canonical:"/contacto"}),a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-700 via-blue-800 to-indigo-900",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:[a.jsx(ke.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>t("/"),className:"mb-8 text-blue-100 hover:text-white font-medium",children:" Volver al inicio"}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Contctanos"}),a.jsx("p",{className:"text-xl text-blue-100 max-w-2xl mx-auto",children:"Estamos aqu para ayudarte. Cuntanos qu necesitas y te responderemos lo antes posible."})]}),!s&&a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-12",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-6 text-center",children:"Solicitas un plan de suscripcin?"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:j.map(C=>{const M={STARTER:"from-blue-500 to-blue-600",PRO:"from-purple-500 to-purple-600",BUSINESS:"from-indigo-500 to-indigo-600",ENTERPRISE:"from-green-500 to-green-600"};return a.jsxs(ke.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{r(C.planId),u(L=>({...L,contactType:"subscription-plan"}))},className:`bg-gradient-to-r ${M[C.planId]} text-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all text-left`,children:[a.jsx("div",{className:"font-bold text-xl mb-2",children:C.label}),a.jsx("div",{className:"text-sm opacity-90 mb-3",children:C.description}),a.jsx("div",{className:"font-semibold",children:C.price})]},C.planId)})}),a.jsx("p",{className:"text-center text-blue-100 mt-4 text-sm",children:"O contina con el formulario general de contacto"})]}),s&&a.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border-2 border-indigo-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:["Plan seleccionado: ",j.find(C=>C.planId===s)?.label]}),a.jsx("p",{className:"text-gray-700",children:j.find(C=>C.planId===s)?.description})]}),a.jsx("button",{type:"button",onClick:()=>{r(null),l(null),u(C=>({...C,rut:"",contactType:""}))},className:"px-4 py-2 bg-white text-gray-700 rounded-lg font-semibold hover:bg-gray-100 transition-colors border border-gray-300",children:"Cambiar plan"})]})}),a.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 lg:p-10",children:a.jsxs("form",{onSubmit:P,className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:["Cmo podemos ayudarte? ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(C=>a.jsx(ke.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsxs("label",{className:`block p-4 rounded-xl border-2 cursor-pointer transition-all ${d.contactType===C.value?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"}`,children:[a.jsx("input",{type:"radio",name:"contactType",value:C.value,checked:d.contactType===C.value,onChange:M=>A("contactType",M.target.value),className:"sr-only"}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl flex-shrink-0",children:C.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:C.label}),a.jsx("div",{className:"text-sm text-gray-600",children:C.description})]}),d.contactType===C.value&&a.jsx("span",{className:"text-indigo-600 text-xl",children:""})]})]})},C.value))})]}),s&&d.contactType==="subscription-plan"&&a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:[a.jsxs("label",{className:"block text-lg font-semibold text-gray-900 mb-4",children:["Ya tienes una cuenta en PyM-ERP? ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs(ke.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(!0),className:`p-4 rounded-lg border-2 font-semibold transition-all ${i===!0?"border-green-500 bg-green-50 text-green-900":"border-gray-300 bg-white text-gray-700 hover:border-green-300"}`,children:[a.jsx("div",{className:"text-2xl mb-2",children:""}),a.jsx("div",{children:"S, ya tengo cuenta"}),a.jsx("div",{className:"text-sm font-normal mt-1 opacity-75",children:"Activar plan en cuenta existente"})]}),a.jsxs(ke.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{l(!1),u(C=>({...C,rut:""}))},className:`p-4 rounded-lg border-2 font-semibold transition-all ${i===!1?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-300 bg-white text-gray-700 hover:border-blue-300"}`,children:[a.jsx("div",{className:"text-2xl mb-2",children:""}),a.jsx("div",{children:"No, crear cuenta nueva"}),a.jsx("div",{className:"text-sm font-normal mt-1 opacity-75",children:"Crear cuenta y activar plan"})]})]}),i===!0&&a.jsxs(ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"rut",className:"block text-sm font-semibold text-gray-900 mb-2",children:["RUT de la empresa ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"rut",value:d.rut,onChange:C=>A("rut",C.target.value),className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-colors ${b.rut?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:"12.345.678-9","aria-invalid":!!b.rut,"aria-describedby":b.rut?"rut-error":void 0}),b.rut&&a.jsx("p",{id:"rut-error",className:"mt-1 text-sm text-red-600",role:"alert",children:b.rut}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Necesitamos tu RUT para identificar tu cuenta y activar el plan"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"account-email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Correo de la cuenta ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",id:"account-email",value:d.email,onChange:C=>A("email",C.target.value),className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-colors ${b.email?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:"correo@de-tu-cuenta.com","aria-invalid":!!b.email,"aria-describedby":b.email?"email-error":void 0}),b.email&&a.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",role:"alert",children:b.email==="required-field"?"Campo requerido":"Email invlido"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El correo con el que te registraste en PyM-ERP"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Nombre completo ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"name",value:d.name,onChange:C=>A("name",C.target.value),className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-colors ${b.name?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:"Tu nombre","aria-invalid":!!b.name,"aria-describedby":b.name?"name-error":void 0}),b.name&&a.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",role:"alert",children:"Campo requerido"})]}),(!s||i===!1||i===null)&&a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",id:"email",value:d.email,onChange:C=>A("email",C.target.value),className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-colors ${b.email?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:"tu@email.com","aria-invalid":!!b.email,"aria-describedby":b.email?"email-error":void 0}),b.email&&a.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",role:"alert",children:b.email==="required-field"?"Campo requerido":"Email invlido"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Telfono / WhatsApp ",a.jsx("span",{className:"text-gray-500 text-xs",children:"(opcional)"})]}),a.jsx("input",{type:"tel",id:"phone",value:d.phone,onChange:C=>u({...d,phone:C.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-colors",placeholder:"+56 9 1234 5678"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"message",className:"block text-sm font-semibold text-gray-900 mb-2",children:[d.contactType==="subscription-plan"?"Mensaje adicional":"Mensaje",d.contactType!=="subscription-plan"&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{id:"message",value:d.message,onChange:C=>A("message",C.target.value),rows:6,className:`w-full px-4 py-3 border-2 rounded-lg outline-none transition-colors resize-none ${b.message?"border-red-300 focus:border-red-500 focus:ring-2 focus:ring-red-200":"border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200"}`,placeholder:d.contactType==="subscription-plan"?"Alguna pregunta sobre el plan o informacin adicional que quieras compartir? (opcional)":"Cuntanos ms sobre tu consulta, proyecto o inters...","aria-invalid":!!b.message,"aria-describedby":b.message?"message-error":void 0}),b.message&&a.jsx("p",{id:"message-error",className:"mt-1 text-sm text-red-600",role:"alert",children:"Campo requerido"}),d.contactType==="subscription-plan"?a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Si tienes alguna pregunta especfica sobre el plan o necesitas informacin adicional, comprtela aqu."}):a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Mientras ms detalles nos compartas, mejor podremos ayudarte"})]}),Object.keys(b).length>0&&a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Por favor corrige los errores en el formulario:"}),a.jsxs("ul",{className:"list-disc list-inside text-sm text-red-600 space-y-1",children:[b.hasAccount&&a.jsx("li",{children:b.hasAccount}),b.rut&&a.jsx("li",{children:b.rut}),b.name&&a.jsx("li",{children:"Nombre completo es requerido"}),b.email&&a.jsx("li",{children:"Email es requerido y debe ser vlido"}),b.contactType&&a.jsx("li",{children:"Tipo de consulta es requerido"}),b.message&&a.jsx("li",{children:"Mensaje es requerido"})]})]}),a.jsx(ke.button,{type:"submit",disabled:h,whileHover:{scale:h?1:1.02},whileTap:{scale:h?1:.98},className:`w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold text-lg shadow-lg hover:shadow-xl transition-shadow ${h?"opacity-70 cursor-not-allowed":""}`,children:h?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):d.contactType==="subscription-plan"&&s?`Solicitar Plan ${j.find(C=>C.planId===s)?.label||s} `:"Enviar Mensaje "}),a.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Al enviar este formulario, aceptas que nos pongamos en contacto contigo para responder tu consulta."})]})}),a.jsxs(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[a.jsx("div",{className:"text-3xl mb-3",children:""}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Email"}),a.jsx("a",{href:"mailto:ignacio@datakomerz.com",className:"text-indigo-600 hover:text-indigo-700",children:"ignacio@datakomerz.com"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[a.jsx("div",{className:"text-3xl mb-3",children:""}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Tiempo de Respuesta"}),a.jsx("p",{className:"text-gray-600",children:"24-48 horas"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-md text-center",children:[a.jsx("div",{className:"text-3xl mb-3",children:""}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Ubicacin"}),a.jsx("p",{className:"text-gray-600",children:"Chile"})]})]})]})})]})}function xbe(){return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center space-y-2 p-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Pgina deshabilitada"}),a.jsx("p",{className:"text-gray-600",children:"Las condiciones de beta ya no estn publicadas."})]})})}function ybe(){return a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm animate-pulse",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}),a.jsxs("div",{className:"space-y-2 mb-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]})}const bbe=y.memo(ybe);function vbe(){const{companyId:t}=Mr(),{t:e}=ln(),n=qe(),{handleError:s}=at(),{trackEvent:r}=So(),[i,l]=y.useState(""),[d,u]=y.useState([]),[h,f]=y.useState(!0);return y.useEffect(()=>{(async()=>{if(t)try{const[x,b]=await Promise.all([yn(t),W7(t)]);if(!x){n("/");return}l(x.name),u(b.filter(_=>_.status==="PUBLISHED").sort((_,j)=>{const v=_.start_date?.getTime?.()||new Date(_.start_date).getTime(),T=j.start_date?.getTime?.()||new Date(j.start_date).getTime();return v-T})),r("EVENTS_VIEW",{category:Bn.NAVIGATION,company_id:x.id})}catch(x){s(x)}finally{f(!1)}})()},[t,s,n,r]),a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:h?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-3 bg-gray-200 rounded w-32 animate-pulse"}),a.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 animate-pulse"})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-xs text-gray-500",children:i}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e("eventsModule.publicTitle")})]})}),!h&&a.jsx("button",{type:"button",onClick:()=>n(`/${t}`),className:"text-sm text-blue-600 hover:underline",children:e("menuView.backToProfile")})]}),h?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:4}).map((p,x)=>a.jsx(bbe,{},x))}):d.length===0?a.jsx("p",{className:"text-sm text-gray-600",children:e("eventsModule.publicEmpty")}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(p=>a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:p.title}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(p.start_date).toLocaleString()})]}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:p.description}),a.jsx("p",{className:"text-sm text-gray-500",children:p.location}),a.jsx(jt,{to:`/${t}/events/${p.id}`,className:"text-sm text-blue-600 hover:underline",children:e("eventsModule.viewDetails")})]},p.id))})]})})}function wbe(){const{companyId:t,eventId:e}=Mr(),{t:n}=ln(),s=qe(),{handleError:r}=at(),{trackEvent:i}=So(),[l,d]=y.useState(null),[u,h]=y.useState(""),[f,p]=y.useState(""),[x,b]=y.useState([]),[_,j]=y.useState(1),[v,T]=y.useState(!0);y.useEffect(()=>{(async()=>{if(!(!t||!e))try{const[L,k,R]=await Promise.all([yn(t),pC(e),Yy(t,e)]);if(!L||!k||k.status!=="PUBLISHED"){s("/");return}h(L.name),p(L.whatsapp||""),d(k),b(R),i("EVENT_VIEW",{category:Bn.NAVIGATION,company_id:L.id,event_id:k.id})}catch(L){r(L)}finally{T(!1)}})()},[t,e,r,s,i]);const P=y.useMemo(()=>x.filter(M=>(M.status||"CONFIRMED")==="CONFIRMED").reduce((M,L)=>M+(L.tickets||1),0),[x]),A=l?.capacity?Math.max(l.capacity-P,0):null,C=()=>{if(!f){J.error(n("menuView.noWhatsapp"));return}if(A!==null&&_>A){J.error(n("eventsModule.capacityExceeded"));return}const M=f.replace(/\D/g,""),L=[`Hola! Quiero reservar para el evento ${l?.title}`,`Cantidad: ${_}`,l?.start_date?`Fecha: ${new Date(l.start_date).toLocaleString()}`:"",l?.location?`Lugar: ${l.location}`:""],k=`https://wa.me/${M}?text=${encodeURIComponent(L.filter(Boolean).join(`
`))}`;i("EVENT_WHATSAPP_ORDER",{category:Bn.CONVERSION,company_id:t,event_id:e,qty:_}),window.open(k,"_blank")};return v?a.jsx(yt,{fullScreen:!0}):l?a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 space-y-4",children:[a.jsx("button",{type:"button",onClick:()=>s(`/${t}/events`),className:"text-sm text-blue-600 hover:underline",children:n("common.back")}),a.jsxs("div",{className:"bg-white border border-gray-100 shadow-sm rounded-lg p-5 space-y-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:u}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l.title}),a.jsx("p",{className:"text-sm text-gray-600",children:l.description}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(l.start_date).toLocaleString()}),l.end_date&&a.jsxs("p",{className:"text-xs text-gray-500",children:[n("eventsModule.ends"),": ",new Date(l.end_date).toLocaleString()]}),l.location&&a.jsx("p",{className:"text-sm text-gray-600",children:l.location}),a.jsx("p",{className:"text-sm text-gray-600",children:l.capacity?`${n("eventsModule.capacity")}: ${l.capacity}  ${n("eventsModule.available")}: ${A}`:n("eventsModule.openCapacity")}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm text-gray-700",children:n("eventsModule.qty")}),a.jsx("input",{type:"number",min:1,max:A||99,value:_,onChange:M=>j(Math.max(1,Math.min(A||99,Number(M.target.value)||1))),className:"w-24 border border-gray-200 rounded px-3 py-2"}),a.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:n("eventsModule.whatsapp")})]})]})]})}):null}function _be(){const{companyId:t}=Mr(),e=qe(),{t:n}=ln(),{handleError:s}=at(),[r,i]=y.useState(""),[l,d]=y.useState([]),[u,h]=y.useState(!0);return y.useEffect(()=>{(async()=>{if(t)try{const[p,x]=await Promise.all([yn(t),gC(t)]);if(!p){e("/");return}i(p.name),d(x.filter(b=>b.status!=="INACTIVE"))}catch(p){s(p)}finally{h(!1)}})()},[t,s,e]),u?a.jsx(yt,{fullScreen:!0}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:r}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n("propertiesModule.publicTitle")})]}),a.jsx("button",{type:"button",onClick:()=>e(`/${t}`),className:"text-sm text-blue-600 hover:underline",children:n("menuView.backToProfile")})]}),l.length===0&&a.jsx("p",{className:"text-sm text-gray-600",children:n("propertiesModule.publicEmpty")}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(f=>a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm flex flex-col gap-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f.title}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:f.description}),a.jsx("p",{className:"text-sm text-gray-500",children:f.address}),a.jsx("p",{className:"text-sm text-gray-600",children:f.price_per_night?`$${f.price_per_night}/noche`:n("common.notAvailable")}),a.jsx(jt,{to:`/${t}/stay/${f.id}`,className:"text-sm text-blue-600 hover:underline",children:n("propertiesModule.viewDetails")})]},f.id))})]})})}const dL=t=>t?Ei(t):"";function Ebe(){const{companyId:t,propertyId:e}=Mr(),n=qe(),{t:s}=ln(),{handleError:r}=at(),{trackEvent:i}=So(),[l,d]=y.useState(null),[u,h]=y.useState(""),[f,p]=y.useState(""),[x,b]=y.useState([]),[_,j]=y.useState(""),[v,T]=y.useState(""),[P,A]=y.useState(2),[C,M]=y.useState(!0);y.useEffect(()=>{(async()=>{if(!(!t||!e))try{const[S,O,I]=await Promise.all([yn(t),hv(e),xC(t,e)]);if(!S||!O||O.status==="INACTIVE"){n("/");return}h(S.name),p(S.whatsapp||""),d(O),b(I),i("properties.view",{company_id:S.id,property_id:O.id})}catch(S){r(S)}finally{M(!1)}})()},[t,e,r,n,i]);const L=y.useMemo(()=>{if(!_||!v)return!1;const R=new Date(_),S=new Date(v);return x.some(O=>{if((O.status||"CONFIRMED")!=="CONFIRMED")return!1;const I=new Date(O.check_in),F=new Date(O.check_out);return R<F&&S>I})},[x,_,v]),k=()=>{if(!f){J.error(s("menuView.noWhatsapp"));return}if(!_||!v){J.error(s("propertiesModule.selectDates"));return}if(L){J.error(s("propertiesModule.notAvailableRange"));return}const R=f.replace(/\D/g,""),S=[`Hola! Quiero reservar ${l?.title}`,`Check-in: ${_}`,`Check-out: ${v}`,`Huespedes: ${P}`,l?.price_per_night?`Precio listado: $${l.price_per_night}/noche`:""],O=`https://wa.me/${R}?text=${encodeURIComponent(S.filter(Boolean).join(`
`))}`;i("properties.whatsapp",{company_id:t,property_id:e,guests:P}),window.open(O,"_blank")};return C?a.jsx(yt,{fullScreen:!0}):l?a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 space-y-4",children:[a.jsx("button",{type:"button",onClick:()=>n(`/${t}/stay`),className:"text-sm text-blue-600 hover:underline",children:s("common.back")}),a.jsxs("div",{className:"bg-white border border-gray-100 shadow-sm rounded-lg p-5 space-y-3",children:[a.jsx("p",{className:"text-xs text-gray-500",children:u}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l.title}),a.jsx("p",{className:"text-sm text-gray-600",children:l.description}),a.jsx("p",{className:"text-sm text-gray-600",children:l.address}),a.jsx("p",{className:"text-sm text-gray-600",children:l.price_per_night?`$${l.price_per_night}/noche`:s("common.notAvailable")}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.checkIn")}),a.jsx("input",{type:"date",value:_,onChange:R=>j(R.target.value),className:"w-full border border-gray-200 rounded px-3 py-2",min:dL(new Date)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:s("propertiesModule.checkOut")}),a.jsx("input",{type:"date",value:v,onChange:R=>T(R.target.value),className:"w-full border border-gray-200 rounded px-3 py-2",min:_||dL(new Date)})]})]}),L&&a.jsx("p",{className:"text-sm text-red-600",children:s("propertiesModule.notAvailableRange")}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm text-gray-700",children:s("propertiesModule.guests")}),a.jsx("input",{type:"number",min:"1",value:P,onChange:R=>A(Math.max(1,Number(R.target.value)||1)),className:"w-24 border border-gray-200 rounded px-3 py-2"}),a.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:s("propertiesModule.whatsapp")})]})]})]})}):null}const Tf=[{key:"REQUESTED",label:"Pedido recibido",emoji:""},{key:"CONFIRMED",label:"Pedido confirmado",emoji:""},{key:"PREPARING",label:"En preparacin",emoji:""},{key:"DELIVERED",label:"En camino / Listo para retiro",emoji:""},{key:"PAID",label:"Entregado / Retirado",emoji:""}],hx={REQUESTED:"Pedido recibido",CONFIRMED:"Pedido confirmado",PREPARING:"En preparacin",DELIVERED:"En camino / Listo para retiro",PAID:"Entregado / Retirado",CANCELLED:"Cancelado"},Nbe={REQUESTED:"bg-blue-100 text-blue-800 border border-blue-200",CONFIRMED:"bg-indigo-100 text-indigo-800 border border-indigo-200",PREPARING:"bg-amber-100 text-amber-800 border border-amber-200",DELIVERED:"bg-emerald-100 text-emerald-800 border border-emerald-200",PAID:"bg-green-100 text-green-800 border border-green-200",CANCELLED:"bg-rose-100 text-rose-800 border border-rose-200"},uL=t=>t?new Date(t).toLocaleString():"-";function jbe(){const{slug:t,pedidoId:e}=Mr(),n=qe(),[s,r]=y.useState(null),[i,l]=y.useState(null),[d,u]=y.useState(!0),[h,f]=y.useState(null),p=i?.status||"REQUESTED",x=y.useMemo(()=>i?i.status_history&&i.status_history.length>0?[...i.status_history].sort((v,T)=>new Date(v.created_at).getTime()-new Date(T.created_at).getTime()):[{from:null,to:p,created_at:i.created_at}]:[],[i,p]);if(y.useEffect(()=>{let v=!0,T=null;const P=async()=>{if(!(!t||!e))try{u(!0);const[A,C]=await Promise.all([qb(t),R9(e)]);if(!A)throw new Error("No encontramos esta empresa");if(!C||C.company_id!==A.id)throw new Error("No encontramos este pedido");v&&(r(A),l(C),f(null))}catch(A){v&&f(A?.message||"No pudimos cargar el pedido")}finally{v&&u(!1)}};return P(),T=window.setInterval(P,12e3),()=>{v=!1,T&&window.clearInterval(T)}},[t,e]),d)return a.jsx(yt,{fullScreen:!0});if(h||!s||!i)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center px-4 py-10",children:a.jsxs("div",{className:"max-w-md w-full rounded-2xl sm:rounded-3xl border border-blue-200 bg-white/95 backdrop-blur-sm p-6 sm:p-8 text-center shadow-lg shadow-blue-100/50",children:[a.jsx("div",{className:"text-4xl sm:text-5xl mb-4",children:""}),a.jsx("p",{className:"text-[10px] sm:text-xs uppercase tracking-[0.35em] text-blue-500 font-semibold",children:"Tracking"}),a.jsx("h1",{className:"mt-3 text-xl sm:text-2xl font-bold text-slate-900",children:"Pedido no disponible"}),a.jsx("p",{className:"mt-3 text-sm sm:text-base text-slate-900 leading-relaxed",children:h||"No encontramos este pedido."}),a.jsx("button",{type:"button",onClick:()=>n("/"),className:"mt-6 inline-flex items-center justify-center rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 px-6 py-3 text-sm sm:text-base font-semibold text-white shadow-md hover:shadow-lg transition-all duration-200",children:"Volver al inicio"})]})});const b=i.id.slice(-6).toUpperCase(),_=Tf.findIndex(v=>v.key===p),j=x[x.length-1];return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 px-3 sm:px-4 py-6 sm:py-10 text-slate-900",children:a.jsxs("div",{className:"mx-auto max-w-5xl space-y-4 sm:space-y-6",children:[a.jsxs("div",{className:"rounded-2xl sm:rounded-3xl border border-blue-100 bg-white/95 backdrop-blur-sm p-4 sm:p-6 shadow-lg shadow-blue-100/50",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-[10px] sm:text-xs font-semibold uppercase tracking-[0.35em] text-blue-500",children:"Seguimiento"}),a.jsx("h1",{className:"mt-2 text-xl sm:text-2xl lg:text-3xl font-bold text-slate-900 truncate",children:s.name}),a.jsxs("p",{className:"mt-1 text-xs sm:text-sm text-slate-900",children:["Pedido ",a.jsxs("span",{className:"font-semibold text-blue-600",children:["#",b]})]}),a.jsx("p",{className:"mt-1 text-[10px] sm:text-xs text-slate-900 break-all",children:i.id})]}),a.jsx("div",{className:`rounded-full px-3 sm:px-4 py-1.5 sm:py-2 text-[10px] sm:text-xs font-semibold whitespace-nowrap ${Nbe[p]}`,children:hx[p]})]}),a.jsxs("div",{className:"mt-4 sm:mt-6 grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-[1.2fr,0.8fr]",children:[a.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-blue-100 bg-gradient-to-br from-blue-50 to-white px-4 sm:px-5 py-3 sm:py-4",children:[a.jsx("p",{className:"text-[10px] sm:text-xs font-semibold uppercase tracking-[0.25em] text-blue-500",children:"Estado actual"}),a.jsxs("div",{className:"mt-2 sm:mt-3 flex items-center gap-2 sm:gap-3 text-base sm:text-lg font-semibold",children:[a.jsx("span",{className:"text-xl sm:text-2xl flex-shrink-0",children:Tf[Math.max(_,0)]?.emoji||""}),a.jsx("span",{className:"text-slate-900 truncate",children:hx[p]}),a.jsxs("span",{className:"relative flex h-5 w-5 sm:h-6 sm:w-6 items-center justify-center flex-shrink-0",children:[a.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full border-2 border-blue-400/40"}),a.jsx("span",{className:"absolute inline-flex h-full w-full animate-spin rounded-full border-2 border-blue-500 border-t-transparent"})]})]})]}),a.jsxs("div",{className:"rounded-xl sm:rounded-2xl border border-blue-100 bg-gradient-to-br from-slate-50 to-blue-50/30 px-4 sm:px-5 py-3 sm:py-4",children:[a.jsx("p",{className:"text-[10px] sm:text-xs font-semibold uppercase tracking-[0.25em] text-blue-500",children:"Actualizacin"}),a.jsx("p",{className:"mt-2 sm:mt-3 text-xs sm:text-sm text-slate-900 font-medium",children:"ltimo cambio:"}),a.jsx("p",{className:"mt-1 text-xs sm:text-sm text-slate-900 font-semibold",children:uL(j?.created_at)}),a.jsx("p",{className:"mt-2 text-[10px] sm:text-xs text-blue-600",children:"Se actualiza automticamente cada 12 segundos."})]})]})]}),a.jsxs("div",{className:"rounded-2xl sm:rounded-3xl border border-blue-100 bg-white/95 backdrop-blur-sm p-4 sm:p-6 shadow-lg shadow-blue-100/50",children:[a.jsx("p",{className:"text-[10px] sm:text-xs font-semibold uppercase tracking-[0.35em] text-blue-500 mb-4 sm:mb-6",children:"Progreso del pedido"}),a.jsx("div",{className:"mt-4 sm:mt-6 grid grid-cols-5 gap-2 sm:gap-4 md:gap-6",children:Tf.map((v,T)=>{const P=_>=T&&p!=="CANCELLED",A=_===T&&p!=="CANCELLED";return a.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[T<Tf.length-1&&a.jsx("span",{className:`absolute left-1/2 top-4 sm:top-6 h-0.5 sm:h-1 w-full -translate-y-1/2 rounded-full transition-colors duration-300 ${P?"bg-gradient-to-r from-blue-400 to-blue-500":"bg-slate-200"}`}),a.jsxs("div",{className:`relative z-10 flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-xl sm:rounded-2xl text-base sm:text-xl shadow-md transition-all duration-300 ${P?"bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-blue-200":"bg-white text-blue-600 border-2 border-blue-200"} ${A?"ring-2 ring-blue-400 ring-offset-2":""}`,children:[v.emoji,A&&a.jsx("span",{className:"absolute -right-1 -top-1 sm:-right-2 sm:-top-2 inline-flex h-4 w-4 sm:h-5 sm:w-5 animate-spin rounded-full border-2 border-blue-300 border-t-transparent bg-white"})]}),a.jsx("p",{className:`mt-2 sm:mt-3 text-[10px] sm:text-xs font-semibold leading-tight px-1 ${P?"text-blue-600":"text-slate-900"}`,children:v.label})]},v.key)})}),p==="CANCELLED"&&a.jsx("div",{className:"mt-4 sm:mt-6 rounded-xl sm:rounded-2xl border-2 border-rose-300 bg-gradient-to-r from-rose-50 to-pink-50 px-4 py-3 text-xs sm:text-sm text-rose-800 font-medium",children:" Este pedido fue cancelado. Si tienes dudas, contacta al negocio."})]}),a.jsxs("div",{className:"rounded-2xl sm:rounded-3xl border border-blue-100 bg-white/95 backdrop-blur-sm p-4 sm:p-6 shadow-lg shadow-blue-100/50",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[a.jsx("p",{className:"text-[10px] sm:text-xs font-semibold uppercase tracking-[0.35em] text-blue-500",children:"Historial completo"}),a.jsxs("span",{className:"text-[10px] sm:text-xs text-blue-600 font-semibold bg-blue-50 px-2 py-1 rounded-full",children:[x.length," ",x.length===1?"cambio":"cambios"]})]}),a.jsx("div",{className:"mt-4 sm:mt-5 space-y-2 sm:space-y-3",children:x.map((v,T)=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3 rounded-xl sm:rounded-2xl border border-blue-100 bg-gradient-to-r from-slate-50 to-blue-50/30 px-3 sm:px-4 py-2.5 sm:py-3 transition-all hover:shadow-md hover:border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0 flex-1",children:[a.jsx("span",{className:"text-base sm:text-lg flex-shrink-0",children:Tf.find(P=>P.key===v.to)?.emoji||""}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-xs sm:text-sm font-semibold text-slate-900 truncate",children:hx[v.to]||v.to}),v.from&&a.jsxs("p",{className:"text-[10px] sm:text-xs text-slate-900 mt-0.5",children:["Desde ",hx[v.from]||v.from]})]})]}),a.jsx("p",{className:"text-[10px] sm:text-xs text-blue-600 font-medium whitespace-nowrap sm:ml-2",children:uL(v.created_at)})]},`${v.to}-${T}`))})]})]})})}const Cbe=y.lazy(()=>tn(()=>import("./NearbyCompanies-B2ybp188.js"),[])),Sbe=y.lazy(()=>tn(()=>import("./SetupCompanyLocation-8EFTSY8t.js"),[]));function Tbe(){const t=ka(),e=y.useMemo(()=>{if(xn.app.environment==="e2e"||xn.e2eUser)return!0;if(typeof window>"u")return!1;try{return!!window.localStorage.getItem("e2e:user")}catch{return!1}},[]);return a.jsx(Ci,{mode:"wait",children:a.jsxs(RL,{location:t,children:[a.jsx(De,{path:"/",element:a.jsx(Oe,{children:a.jsx(Xae,{})})}),a.jsx(De,{path:"/landing-old",element:a.jsx(Oe,{children:a.jsx(zae,{})})}),a.jsx(De,{path:"/login",element:a.jsx(Oe,{children:a.jsx(nie,{})})}),a.jsx(De,{path:"/auth/action",element:a.jsx(Oe,{children:a.jsx(oie,{})})}),a.jsx(De,{path:"/request-access",element:a.jsx(Oe,{children:a.jsx(aie,{})})}),a.jsx(De,{path:"/change-password",element:a.jsx(Oe,{children:a.jsx(gt,{requireActive:!1,children:a.jsx(iie,{})})})}),a.jsx(De,{path:"/admin",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.SUPERADMIN,children:a.jsx(voe,{})})})}),a.jsx(De,{path:"/admin/subscriptions/:companyId",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.SUPERADMIN,children:a.jsx(Noe,{})})})}),a.jsx(De,{path:"/setup/company-basic",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(koe,{})})})}),a.jsx(De,{path:"/setup/company-location",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(y.Suspense,{fallback:a.jsx(yt,{}),children:a.jsx(Sbe,{})})})})}),a.jsx(De,{path:"/setup/company-info",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Aoe,{})})})}),a.jsx(De,{path:"/setup/business-type",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Roe,{})})})}),a.jsx(De,{path:"/setup/category",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Moe,{})})})}),a.jsx(De,{path:"/setup/social-links",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Ioe,{})})})}),a.jsx(De,{path:"/dashboard",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(ple,{})})})}),a.jsx(De,{path:"/dashboard/schedule",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(wpe,{})})})}),a.jsx(De,{path:"/dashboard/appointments/new",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx($pe,{})})})}),a.jsx(De,{path:"/dashboard/settings/notifications",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(zpe,{})})})}),a.jsx(De,{path:"/dashboard/settings/subscription",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(qpe,{})})})}),a.jsx(De,{path:"/dashboard/services/settings",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Ype,{})})})}),a.jsx(De,{path:"/dashboard/services/schedules",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Qpe,{})})})}),a.jsx(De,{path:"/dashboard/services",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Xpe,{})})})}),a.jsx(De,{path:"/dashboard/services/new",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(CM,{})})})}),a.jsx(De,{path:"/dashboard/services/edit/:id",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(CM,{})})})}),a.jsx(De,{path:"/dashboard/products/settings",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Zpe,{})})})}),a.jsx(De,{path:"/dashboard/branding/background",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(zge,{})})})}),a.jsx(De,{path:"/dashboard/branding/video",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(qge,{})})})}),a.jsx(De,{path:"/dashboard/appointments",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Yge,{})})})}),a.jsx(De,{path:"/dashboard/professionals",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Kge,{})})})}),a.jsx(De,{path:"/dashboard/professionals/new",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Xge,{})})})}),a.jsx(De,{path:"/dashboard/professionals/edit/:id",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Zge,{})})})}),a.jsx(De,{path:"/dashboard/reports/appointments",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Jge,{})})})}),a.jsx(De,{path:"/dashboard/products",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Jpe,{})})})}),a.jsx(De,{path:"/dashboard/pedidos",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(dge,{})})})}),a.jsx(De,{path:"/dashboard/distributors/routes",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(vge,{})})})}),a.jsx(De,{path:"/dashboard/distributors/collections",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(wge,{})})})}),a.jsx(De,{path:"/dashboard/distributors/geolocation",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(_ge,{})})})}),a.jsx(De,{path:"/dashboard/catalog/menu-categories",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(sge,{})})})}),a.jsx(De,{path:"/dashboard/products/new",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(SM,{})})})}),a.jsx(De,{path:"/dashboard/products/edit/:id",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(SM,{})})})}),a.jsx(De,{path:"/dashboard/events",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(kge,{})})})}),a.jsx(De,{path:"/dashboard/events/new",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(DM,{})})})}),a.jsx(De,{path:"/dashboard/events/:id",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(DM,{})})})}),a.jsx(De,{path:"/dashboard/events/:id/reservations",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Age,{})})})}),a.jsx(De,{path:"/dashboard/clinic/resources",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(uge,{})})})}),a.jsx(De,{path:"/dashboard/properties",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Ige,{})})})}),a.jsx(De,{path:"/dashboard/properties/new",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(PM,{})})})}),a.jsx(De,{path:"/dashboard/properties/:id",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(PM,{})})})}),a.jsx(De,{path:"/dashboard/properties/:id/calendar",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Vge,{})})})}),a.jsx(De,{path:"/dashboard/properties/:id/bookings",element:a.jsx(Oe,{children:a.jsx(gt,{requiredRole:ct.ENTREPRENEUR,children:a.jsx(Uge,{})})})}),a.jsx(De,{path:"/transparencia",element:a.jsx(Oe,{children:a.jsx(ibe,{})})}),a.jsx(De,{path:"/que-es-pymerp",element:a.jsx(Oe,{children:a.jsx(iL,{})})}),a.jsx(De,{path:"/about",element:a.jsx(Oe,{children:a.jsx(iL,{})})}),a.jsx(De,{path:"/features",element:a.jsx(Oe,{children:a.jsx(cie,{})})}),a.jsx(De,{path:"/security",element:a.jsx(Oe,{children:a.jsx(die,{})})}),a.jsx(De,{path:"/roadmap",element:a.jsx(Oe,{children:a.jsx(uie,{})})}),a.jsx(De,{path:"/costos",element:a.jsx(Oe,{children:a.jsx(obe,{})})}),a.jsx(De,{path:"/privacidad",element:a.jsx(Oe,{children:a.jsx(oL,{})})}),a.jsx(De,{path:"/privacy",element:a.jsx(Oe,{children:a.jsx(oL,{})})}),a.jsx(De,{path:"/terminos",element:a.jsx(Oe,{children:a.jsx(lL,{})})}),a.jsx(De,{path:"/terms",element:a.jsx(Oe,{children:a.jsx(lL,{})})}),a.jsx(De,{path:"/cookies",element:a.jsx(Oe,{children:a.jsx(hbe,{})})}),a.jsx(De,{path:"/legal",element:a.jsx(Oe,{children:a.jsx(fbe,{})})}),a.jsx(De,{path:"/licenses",element:a.jsx(Oe,{children:a.jsx(cL,{})})}),a.jsx(De,{path:"/licencias",element:a.jsx(Oe,{children:a.jsx(cL,{})})}),a.jsx(De,{path:"/contacto",element:a.jsx(Oe,{children:a.jsx(gbe,{})})}),a.jsx(De,{path:"/condiciones-beta",element:a.jsx(Oe,{children:a.jsx(xbe,{})})}),a.jsx(De,{path:"/pymes-cercanas",element:a.jsx(Oe,{children:a.jsx(y.Suspense,{fallback:a.jsx(yt,{}),children:a.jsx(Cbe,{})})})}),a.jsx(De,{path:"/:companyId/menu",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(abe,{})})})}),a.jsx(De,{path:"/:companyId/events",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(vbe,{})})})}),a.jsx(De,{path:"/:companyId/events/:eventId",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(wbe,{})})})}),a.jsx(De,{path:"/:companyId/stay",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(_be,{})})})}),a.jsx(De,{path:"/:companyId/stay/:propertyId",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(Ebe,{})})})}),e&&a.jsx(De,{path:"/micarritodecomida",element:a.jsx(Oe,{children:a.jsx(_V,{})})}),e&&a.jsx(De,{path:"/demo10",element:a.jsx(Oe,{children:a.jsx(EV,{})})}),a.jsx(De,{path:"/:slug/barberias/servicios/:serviceSlug",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(L1,{})})})}),a.jsx(De,{path:"/:slug/barberias",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(L1,{})})})}),a.jsx(De,{path:"/:slug/tracking/:pedidoId",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(jbe,{})})})}),a.jsx(De,{path:"/:slug",element:a.jsx(Oe,{children:a.jsx(Gi,{children:a.jsx(L1,{})})})})]},t.pathname)})}function kbe(){return xn.app.environment==="e2e"?a.jsx(Rbe,{}):a.jsx(Gi,{children:a.jsx(Xre,{children:a.jsxs(DL,{children:[a.jsx(Zre,{}),a.jsx(aae,{}),a.jsx(rae,{}),a.jsx(Tbe,{}),a.jsx(Abe,{}),a.jsx(Jre,{}),a.jsx(iae,{}),a.jsx(T$,{position:"top-right",toastOptions:{style:{background:"#1f2937",color:"#f9fafb"},success:{iconTheme:{primary:"#10b981",secondary:"#f9fafb"}},error:{iconTheme:{primary:"#ef4444",secondary:"#f9fafb"}},ariaProps:{role:"status","aria-live":"polite"}}})]})})})}function Abe(){if(!ka().pathname.startsWith("/dashboard"))return null;const n=encodeURIComponent("Hola, necesito ayuda tcnica, dominio propio, diseo personalizado o una app nica para mi empresa. Adjuntar pantallazos o un video para resolver ms rpido.");return a.jsx("footer",{className:"border-t bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex flex-col items-center justify-center gap-3 text-center",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Necesitas ayuda tcnica, dominio propio, diseo personalizado o una app nica para tu empresa? Envanos un mensaje por WhatsApp. Idealmente adjunta pantallazos o un video para resolver ms rpido."}),a.jsx("a",{href:`https://wa.me/56984664812?text=${n}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 rounded-full bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-green-700","aria-label":"Solicitar ayuda tcnica por WhatsApp",children:" Solicitar ayuda tcnica"})]})})}function Rbe(){return a.jsx(DL,{children:a.jsxs(RL,{children:[a.jsx(De,{path:"/login",element:a.jsx("div",{style:{padding:32},children:a.jsx("h1",{children:"Login"})})}),a.jsx(De,{path:"/dashboard",element:a.jsx(Pbe,{})}),a.jsx(De,{path:"/admin",element:a.jsx(Mbe,{})}),a.jsx(De,{path:"/dashboard/services",element:a.jsx(Lbe,{})}),a.jsx(De,{path:"/dashboard/services/new",element:a.jsx(Ibe,{})}),a.jsx(De,{path:"/dashboard/products",element:a.jsx(Obe,{})}),a.jsx(De,{path:"/dashboard/products/new",element:a.jsx(Vbe,{})}),a.jsx(De,{path:"/setup/company-basic",element:a.jsx(Ube,{})}),a.jsx(De,{path:"/setup/company-location",element:a.jsx(Bbe,{})}),a.jsx(De,{path:"/setup/company-info",element:a.jsx(Fbe,{})}),a.jsx(De,{path:"/setup/business-type",element:a.jsx($be,{})}),a.jsx(De,{path:"/servicios-demo",element:a.jsx(zbe,{})}),a.jsx(De,{path:"/demo10",element:a.jsx(EV,{})}),a.jsx(De,{path:"/micarritodecomida",element:a.jsx(_V,{})}),a.jsx(De,{path:"*",element:a.jsx(Dbe,{})})]})})}function Dbe(){return a.jsxs("div",{style:{padding:32},children:[a.jsx("button",{"aria-label":"Cerrar",children:""}),a.jsxs("div",{style:{marginTop:16},children:[a.jsx("a",{href:"/login",children:"Login"})," | ",a.jsx("a",{href:"/request-access",children:"Solicitar acceso"})]})]})}function Pbe(){return a.jsx("div",{style:{padding:32},children:a.jsx("h1",{children:"Dashboard"})})}function Mbe(){const[t,e]=y.useState("PENDING");return a.jsxs("div",{style:{padding:32},children:[a.jsx("h1",{children:"Panel de Administracin"}),a.jsx("h2",{children:"Solicitudes de Acceso"}),a.jsxs("div",{children:[a.jsx("div",{children:"Ana SPA"}),a.jsx("div",{children:t}),a.jsx("button",{onClick:()=>e("APPROVED"),children:"Aprobar"})]}),a.jsx("button",{children:"Perfiles"}),a.jsx("div",{children:"founder@demo.com"}),a.jsx("div",{children:"Empresa Ana"})]})}function Lbe(){const t=qe();return a.jsxs("div",{style:{padding:32},children:[a.jsx("h1",{children:"Servicios"}),a.jsx("button",{onClick:()=>t("/dashboard/services/new"),children:"Nuevo servicio"})]})}function Ibe(){const t=qe(),[e,n]=y.useState(!1);return a.jsxs("div",{style:{padding:32},children:[a.jsxs("label",{children:["Nombre *",a.jsx("input",{"aria-label":"Nombre *"})]}),a.jsxs("label",{children:["Descripcin *",a.jsx("textarea",{"aria-label":"Descripcin *"})]}),a.jsxs("label",{children:["Valor *",a.jsx("input",{"aria-label":"Valor *"})]}),a.jsxs("label",{children:["Duracin estimada (minutos) *",a.jsx("input",{"aria-label":"Duracin estimada (minutos) *"})]}),a.jsxs("label",{children:["Imagen *",a.jsx("input",{"aria-label":"Imagen *",type:"file"})]}),a.jsxs("label",{children:["Estado",a.jsx("select",{"aria-label":"Estado",children:a.jsx("option",{value:"ACTIVE",children:"Activo"})})]}),a.jsx("div",{className:"schedule-slot",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox"})," Lunes"]})}),a.jsx("button",{onClick:()=>{n(!0),t("/dashboard/services")},children:"Guardar"}),e&&a.jsx("div",{children:"Implementacin Express"})]})}function Obe(){const t=qe();return a.jsxs("div",{style:{padding:32},children:[a.jsx("h1",{children:"Productos"}),a.jsx("button",{onClick:()=>t("/dashboard/products/new"),children:"Nuevo producto"})]})}function Vbe(){const t=qe(),[e,n]=y.useState(!1);return a.jsxs("div",{style:{padding:32},children:[a.jsxs("label",{children:["Nombre *",a.jsx("input",{"aria-label":"Nombre *"})]}),a.jsxs("label",{children:["Descripcin *",a.jsx("textarea",{"aria-label":"Descripcin *"})]}),a.jsxs("label",{children:["Precio *",a.jsx("input",{"aria-label":"Precio *"})]}),a.jsxs("label",{children:["Imagen *",a.jsx("input",{"aria-label":"Imagen *",type:"file"})]}),a.jsxs("label",{children:["Estado",a.jsx("select",{"aria-label":"Estado",children:a.jsx("option",{value:"ACTIVE",children:"Activo"})})]}),a.jsx("button",{onClick:()=>{n(!0),t("/dashboard/products")},children:"Guardar"}),e&&a.jsx("div",{children:"Caja regalo premium"})]})}function Ube(){const t=qe();return a.jsxs("div",{style:{padding:32},children:[a.jsx("h1",{children:"Paso 1"}),a.jsxs("label",{children:["Nombre de la empresa *",a.jsx("input",{"aria-label":"Nombre de la empresa *"})]}),a.jsxs("label",{children:["RUT *",a.jsx("input",{"aria-label":"RUT *"})]}),a.jsxs("label",{children:["Rubro *",a.jsx("input",{"aria-label":"Rubro *"})]}),a.jsxs("label",{children:["Sector *",a.jsx("input",{"aria-label":"Sector *"})]}),a.jsxs("label",{children:["Palabra o frase clave (SEO) *",a.jsx("input",{"aria-label":"Palabra o frase clave (SEO) *"})]}),a.jsxs("label",{children:["Telfono WhatsApp principal *",a.jsx("input",{"aria-label":"Telfono WhatsApp principal *"})]}),a.jsx("button",{onClick:()=>t("/setup/company-location"),children:"Siguiente"})]})}function Bbe(){const t=qe();return a.jsxs("div",{style:{padding:32},children:[a.jsxs("label",{children:["Direccin *",a.jsx("input",{"aria-label":"Direccin *"})]}),a.jsxs("label",{children:["Comuna / Ciudad",a.jsx("input",{"aria-label":"Comuna / Ciudad"})]}),a.jsx("button",{onClick:()=>t("/setup/company-info"),children:"Siguiente"})]})}function Fbe(){const t=qe();return a.jsxs("div",{style:{padding:32},children:[a.jsxs("label",{children:["Misin",a.jsx("textarea",{"aria-label":"Misin"})]}),a.jsxs("label",{children:["Visin",a.jsx("textarea",{"aria-label":"Visin"})]}),a.jsxs("label",{children:["Mensaje para agendar/comprar",a.jsx("input",{"aria-label":"Mensaje para agendar/comprar"})]}),a.jsx("button",{onClick:()=>t("/setup/business-type"),children:"Siguiente"})]})}function $be(){const t=qe(),[e,n]=y.useState("");return a.jsxs("div",{style:{padding:32},children:[a.jsxs("label",{children:[a.jsx("input",{type:"radio",name:"businessType",value:"SERVICES",checked:e==="SERVICES",onChange:()=>n("SERVICES")}),"Servicios"]}),a.jsxs("label",{children:[a.jsx("input",{type:"radio",name:"businessType",value:"PRODUCTS",checked:e==="PRODUCTS",onChange:()=>n("PRODUCTS")}),"Productos"]}),a.jsx("button",{onClick:()=>t(e==="SERVICES"?"/dashboard/services":"/dashboard/products"),children:"Finalizar"})]})}function zbe(){const[t,e]=y.useState(!1);return a.jsxs("div",{style:{padding:32},children:[a.jsx("h2",{children:"Servicios"}),a.jsxs("div",{children:[a.jsx("h3",{children:"Implementacin Express"}),a.jsx("button",{onClick:()=>e(!0),children:"Agendar"})]}),t&&a.jsxs("div",{children:[a.jsxs("label",{children:["Fecha *",a.jsx("input",{"aria-label":"Fecha *"})]}),a.jsxs("label",{children:["Horario *",a.jsxs("select",{"aria-label":"Horario *",children:[a.jsx("option",{value:"",children:"Selecciona"}),a.jsx("option",{value:"1",children:"Lunes"})]})]}),a.jsxs("label",{children:["Nombre *",a.jsx("input",{"aria-label":"Nombre *"})]}),a.jsxs("label",{children:["WhatsApp *",a.jsx("input",{"aria-label":"WhatsApp *"})]}),a.jsx("button",{onClick:()=>e(!1),children:"Enviar por WhatsApp"})]})]})}function _V(){const t=y.useMemo(()=>[{id:"p1",company_id:"company-products",name:"Pizza Margherita",description:"Clsica con albahaca",image_url:"https://placehold.co/400",price:8990,status:"ACTIVE",category:"Platos"},{id:"p2",company_id:"company-products",name:"Pizza Pepperoni",description:"Extra queso",image_url:"https://placehold.co/400",price:9990,status:"ACTIVE",category:"Platos"},{id:"p3",company_id:"company-products",name:"Ensalada Csar",description:"Fresca y ligera",image_url:"https://placehold.co/400",price:5990,status:"ACTIVE",category:"Entradas"},{id:"p4",company_id:"company-products",name:"Brownie",description:"Con helado",image_url:"https://placehold.co/400",price:4990,status:"ACTIVE",category:"Postres"},{id:"p5",company_id:"company-products",name:"Limonada",description:"Menta jengibre",image_url:"https://placehold.co/400",price:2990,status:"ACTIVE",category:"Bebidas"},{id:"p6",company_id:"company-products",name:"Pasta Alfredo",description:"Salsa cremosa",image_url:"https://placehold.co/400",price:10990,status:"ACTIVE",category:"Platos"}],[]),[e,n]=y.useState(t),[s,r]=y.useState(""),[i,l]=y.useState(null),[d,u]=y.useState("priceAsc"),[h,f]=y.useState(0),[p,x]=y.useState(!1);y.useEffect(()=>{const T=setTimeout(()=>{Array.from(document.querySelectorAll("button")).find(C=>{const M=(C.textContent||"").toLowerCase();return M.includes("aceptar todo")||M.includes("accept all")})?.click()},200);return()=>clearTimeout(T)},[]);const b=y.useMemo(()=>{const T=s.toLowerCase(),P=e.filter(A=>{const C=!i||A.category===i,M=!T||A.name.toLowerCase().includes(T);return C&&M});return d==="priceAsc"?[...P].sort((A,C)=>A.price-C.price):d==="priceDesc"?[...P].sort((A,C)=>C.price-A.price):P},[e,i,s,d]),_=()=>{if(e.length>24)return;const T=Array.from({length:25},(P,A)=>({id:`extra-${A}`,company_id:"company-products",name:`Producto ${A+1}`,description:"Item extra",image_url:"https://placehold.co/400",price:5e3+A*100,status:"ACTIVE",category:["Entradas","Platos","Postres","Bebidas"][A%4]}));n([...e,...T])},j=()=>{f(T=>T+1)},v=h>0?`Carrito (${h})`:"Carrito";return a.jsx("div",{className:"min-h-screen bg-white text-gray-900",children:a.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8",id:"main-content",children:[a.jsxs("header",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-extrabold mb-2",children:"Men"}),a.jsx("p",{className:"text-gray-600",children:"Restaurante Demo micarritodecomida"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4 mb-6",children:[a.jsx("input",{"aria-label":"Buscar productos",placeholder:"Buscar productos",className:"border rounded-lg px-3 py-2 w-full sm:w-80",value:s,onChange:T=>r(T.target.value)}),a.jsxs("label",{className:"flex items-center gap-2 mt-3 sm:mt-0",children:[a.jsx("span",{className:"text-sm font-semibold",children:"Ordenar por"}),a.jsxs("select",{"aria-label":"Ordenar por",value:d,onChange:T=>u(T.target.value),className:"border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"priceAsc",children:"Precio menor a mayor"}),a.jsx("option",{value:"priceDesc",children:"Precio mayor a menor"})]})]}),a.jsx("button",{className:"ml-auto px-4 py-2 rounded-lg bg-blue-600 text-white",onClick:()=>x(!0),"aria-label":"Carrito",children:v})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["Entradas","Platos","Postres","Bebidas"].map(T=>a.jsx("button",{type:"button",onClick:()=>l(P=>P===T?null:T),className:`px-3 py-2 rounded-full border ${i===T?"bg-slate-900 text-white active":"bg-white text-gray-800"}`,children:T},T))}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:b.map(T=>a.jsxs("article",{className:"border rounded-xl p-4 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-lg mb-1",children:T.name}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:T.description}),a.jsxs("div",{className:"text-blue-700 font-bold mb-3",children:["$",T.price.toLocaleString("es-CL")]}),a.jsx("button",{className:"px-3 py-2 rounded-lg bg-emerald-600 text-white",onClick:j,children:"Agregar"})]},T.id))}),b.length===0&&a.jsx("div",{className:"text-gray-700 mb-4",children:"No se encontraron resultados"}),a.jsx("button",{className:"px-4 py-3 rounded-lg bg-gray-900 text-white",onClick:_,children:"Cargar ms productos"}),a.jsxs("div",{className:"mt-10 space-y-3",children:[a.jsx("div",{className:"text-lg font-semibold",children:"Opciones de fulfillment"}),a.jsx("div",{children:"Delivery"}),a.jsx("div",{children:"Takeaway"})]}),p&&a.jsxs("div",{className:"mt-6 border rounded-xl p-4 bg-gray-50",children:[a.jsx("h2",{className:"text-xl font-bold mb-2",children:"Carrito"}),a.jsx("div",{className:"text-sm text-gray-700 mb-2",children:"Pedido mnimo $10.000"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-100 text-blue-800",children:"Delivery"}),a.jsx("span",{className:"px-3 py-1 rounded-full bg-emerald-100 text-emerald-800",children:"Takeaway"})]})]})]})})}function EV(){const t=y.useMemo(()=>[{id:"s1",company_id:"barber-company",name:"Corte clsico",description:"Estilo tradicional",price:12e3,status:"ACTIVE",available:!0,image_url:"https://placehold.co/400",estimated_duration_minutes:45},{id:"s2",company_id:"barber-company",name:"Barba perfilada",description:"Con toalla caliente",price:8e3,status:"ACTIVE",available:!0,image_url:"https://placehold.co/400",estimated_duration_minutes:30},{id:"s3",company_id:"barber-company",name:"Corte + Barba",description:"Paquete completo",price:18e3,status:"ACTIVE",available:!0,image_url:"https://placehold.co/400",estimated_duration_minutes:60},{id:"s4",company_id:"barber-company",name:"Tinte",description:"Color rpido",price:15e3,status:"ACTIVE",available:!1,image_url:"https://placehold.co/400",estimated_duration_minutes:40},{id:"s5",company_id:"barber-company",name:"Afeitado tradicional",description:"Navaja y espuma",price:7e3,status:"ACTIVE",available:!0,image_url:"https://placehold.co/400",estimated_duration_minutes:25},{id:"s6",company_id:"barber-company",name:"Cejas",description:"Perfilado rpido",price:5e3,status:"ACTIVE",available:!0,image_url:"https://placehold.co/400",estimated_duration_minutes:20}],[]),[e,n]=y.useState(t),[s,r]=y.useState(""),[i,l]=y.useState(!1),[d,u]=y.useState("priceAsc"),[h,f]=y.useState(!1),[p,x]=y.useState(!1),b=y.useMemo(()=>{const T=s.toLowerCase();let P=e.filter(A=>A.name.toLowerCase().includes(T));return i&&(P=P.filter(A=>A.available)),d==="priceAsc"?P=[...P].sort((A,C)=>A.price-C.price):d==="priceDesc"&&(P=[...P].sort((A,C)=>C.price-A.price)),P},[e,s,i,d]),_=p?b:b.slice(0,12),j=()=>{if(e.length<=12){const T=Array.from({length:15},(P,A)=>({id:`extra-s-${A}`,company_id:"barber-company",name:`Servicio extra ${A+1}`,description:"Servicio adicional",price:6e3+A*200,status:"ACTIVE",available:A%2===0,image_url:"https://placehold.co/400",estimated_duration_minutes:30}));n([...e,...T])}x(!0)},v=()=>r("");return a.jsx("div",{className:"min-h-screen bg-white text-gray-900",children:a.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-8",id:"main-content",children:[a.jsxs("header",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold mb-2",children:"Servicios"}),a.jsx("p",{className:"text-gray-600",children:"Barbera Demo10"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4 mb-4",children:[a.jsxs("div",{className:"relative w-full sm:w-80",children:[a.jsx("input",{"aria-label":"Buscar servicios",placeholder:"Buscar servicios...",className:"w-full rounded-xl border border-slate-200 bg-white/80 px-4 py-3 pl-10 pr-10 text-sm shadow-sm transition focus:border-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-200 focus:ring-offset-0",value:s,onChange:T=>r(T.target.value)}),s&&a.jsx("button",{type:"button","aria-label":"Limpiar bsqueda",className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 bg-white rounded-full p-1 z-10 shadow-sm",onClick:v,"data-testid":"clear-search",children:"X"})]}),a.jsxs("label",{className:"flex items-center gap-2 mt-3 sm:mt-0",children:[a.jsx("span",{className:"text-sm font-semibold",children:"Ordenar por"}),a.jsxs("select",{"aria-label":"Ordenar por",value:d,onChange:T=>u(T.target.value),className:"border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"priceAsc",children:"Precio menor a mayor"}),a.jsx("option",{value:"priceDesc",children:"Precio mayor a menor"})]})]})]}),a.jsx("div",{className:"flex gap-3 flex-wrap mb-5",children:a.jsx("button",{type:"button",className:`rounded-full px-4 py-2 text-sm font-semibold transition ${i?"bg-slate-900 text-white active":"bg-slate-100 text-slate-800 hover:bg-slate-200"}`,onClick:()=>l(T=>!T),children:"Disponibles"})}),b.length===0&&a.jsx("div",{className:"text-gray-700 mb-4",children:"No se encontraron servicios"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:_.map(T=>a.jsxs("article",{className:"border rounded-xl p-4 shadow-sm",role:"article",children:[a.jsx("h3",{className:"font-semibold text-lg mb-1",children:T.name}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:T.description}),a.jsxs("div",{className:"text-blue-700 font-bold mb-3",children:["$",T.price.toLocaleString("es-CL")]}),a.jsx("button",{className:"px-3 py-2 rounded-lg bg-emerald-600 text-white",onClick:()=>f(!0),children:"Agendar"})]},T.id))}),b.length>_.length&&a.jsx("button",{className:"px-4 py-3 rounded-lg bg-gray-900 text-white",onClick:j,children:"Cargar ms servicios"}),h&&a.jsxs("div",{className:"mt-6 border rounded-xl p-4 bg-gray-50",role:"dialog",children:[a.jsx("h2",{className:"text-xl font-bold mb-2",children:"Agendar servicio"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[a.jsx("div",{children:"Selecciona fecha y hora"}),a.jsx("button",{className:"px-3 py-2 rounded-lg bg-blue-600 text-white",onClick:()=>f(!1),children:"Cerrar"})]})]})]})})}typeof document<"u"&&(document.documentElement.getAttribute("lang")||(document.documentElement.lang="es",document.documentElement.setAttribute("xml:lang","es")));tn(async()=>{const{initSentry:t}=await Promise.resolve().then(()=>qre);return{initSentry:t}},void 0).then(({initSentry:t})=>{t()});const Hbe="G-58V5RL01MF";xae(Hbe);Eie();hB.createRoot(document.getElementById("root")).render(a.jsx(he.StrictMode,{children:a.jsx(bL,{children:a.jsx(Zae,{children:a.jsx(lae,{children:a.jsx(kbe,{})})})})}));export{qbe as $,Mt as A,an as B,wt as C,Ef as D,yn as E,fV as F,BM as G,si as H,wxe as I,Ei as J,Ff as K,yt as L,_2 as M,Npe as N,os as O,xg as P,H8 as Q,Ct as R,ha as S,Ve as T,Ke as U,Ce as V,Ge as W,da as X,Dt as Y,Ts as Z,on as _,at as a,su as a0,ln as b,eve as c,v8 as d,kr as e,Mp as f,Ine as g,xn as h,Mne as i,a as j,tbe as k,ul as l,ke as m,sbe as n,uye as o,gC as p,Ny as q,y as r,gr as s,Jb as t,qe as u,Jbe as v,Xoe as w,Be as x,Tne as y,J as z};
